<!DOCTYPE html>
<html lang="en">
  <head><script type="text/javascript" src="/blog/lib/jquery/jquery.min.js"></script>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><script type="text/javascript" src="/blog/lib/slideout/slideout.js"></script>
  <script type="text/javascript" src="/blog/lib/fancybox/jquery.fancybox.pack.js"></script>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="description" content="《快乐的Linux命令行》笔记（20）"/><meta name="keywords" content="linux, shell, bash, shell note, Onns Blog" /><link rel="alternate" href="/blog/default" title="Onns Blog"><link rel="shortcut icon" type="image/x-icon" href="/blog/favicon.ico?v=2.11.0" />
<link rel="canonical" href="https://onns.xyz/2021/04/12/the-linux-command-line-note-20/"/>

<link rel="stylesheet" type="text/css" href="/blog/lib/fancybox/jquery.fancybox.css" /><script type="text/javascript">
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]  
      },
      svg: {
        fontCache: 'global'
      }
    };
  </script>
  <script type="text/javascript" async src="//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<link rel="stylesheet" type="text/css" href="/blog/css/style.css?v=2.11.0" />

<script id="baidu_analytics">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?094f3776af9873aa4bf55d2700e2b1cc";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script><!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-127068305-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-127068305-1');
</script><script src="//onns.xyz/js/av-min.js"></script>
  <script id="leancloud">
    AV.init({
      appId: "jIRe5LRqbWDB2dxmu7FH8c1S-gzGzoHsz",
      appKey: "pM10kNYtPMwvqYUCWfbUGBPJ",
      serverURLs: "https://jire5lrq.lc-cn-n1-shared.com"
    });
  </script><script>
  window.config = {"leancloud":{"app_id":"jIRe5LRqbWDB2dxmu7FH8c1S-gzGzoHsz","app_key":"pM10kNYtPMwvqYUCWfbUGBPJ","server_urls":"https://jire5lrq.lc-cn-n1-shared.com"},"toc":true,"fancybox":true,"pjax":true,"latex":true};
</script>

<script id="search">
    var searchFunc = function(path, search_id, content_id) {
    'use strict';
    $.ajax({
        url: path,
        dataType: "xml",
        success: function( xmlResponse ) {
            // get the contents from search data
            var datas = $( "entry", xmlResponse ).map(function() {
                return {
                    title: $( "title", this ).text(),
                    content: $("content",this).text(),
                    url: $( "url" , this).text()
                };
            }).get();

            var $input = document.getElementById(search_id);
			if (!$input) return;
            var $resultContent = document.getElementById(content_id);
            
            $input.addEventListener('input', function () {
                $resultContent.innerHTML = "";
                var str = '<section class=\"posts\">';
                var rawValue = this.value.trim().toLowerCase();
                if (rawValue.length <= 0) {
                    return;
                }
                var keywords = [];
                for (const matchKey of rawValue.matchAll(/"([^"]*)"/g)) {
                  keywords.push(matchKey[1]);
                  rawValue = rawValue.replace(matchKey[0], "");
                }
                keywords = keywords.concat(rawValue.split(/[\s\-]+/));
                keywords = keywords.filter(function(el) {
                    return el.trim().length > 0;
                });
                if (keywords.length <= 0) {
                    return;
                }
                
                // perform local searching
                datas.forEach(function (data) {
                    var isMatch = true;
                    var content_index = [];
                    if (!data.title || data.title.trim() === '') {
                        data.title = "Untitled";
                    }
                    var data_title = data.title.trim().toLowerCase();
                    var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                    var data_url = data.url;
                    var index_title = -1;
                    var index_content = -1;
                    var first_occur = -1;
                    // only match artiles with not empty contents
                    if (data_content !== '') {
                        keywords.forEach(function (keyword, i) {
                            index_title = data_title.indexOf(keyword);
                            index_content = data_content.indexOf(keyword);

                            if (index_title < 0 && index_content < 0) {
                                isMatch = false;
                            } else {
                                if (index_content < 0) {
                                    index_content = 0;
                                }
                                if (i == 0) {
                                    first_occur = index_content;
                                }
                                // content_index.push({index_content:index_content, keyword_len:keyword_len});
                            }
                        });
                    } else {
                        isMatch = false;
                    }
                    // show search results
                    if (isMatch) {
                        str += `
<article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="`+ data_url +`">`+ data_title +`</a>
        </h1>
    </header>
    <div class="post-content">
        `;
                        var content = data.content.trim().replace(/<[^>]+>/g, "");
                        if (first_occur >= 0) {
                            // cut out 100 characters
                            var start = first_occur - 20;
                            var end = first_occur + 80;

                            if (start < 0) {
                                start = 0;
                            }

                            if (start == 0) {
                                end = 100;
                            }

                            if (end > content.length) {
                                end = content.length;
                            }

                            var match_content = content.substring(start, end);

                            // highlight all keywords
                            keywords.forEach(function (keyword) {
                                var regS = new RegExp(keyword, "gi");
                                match_content = match_content.replace(regS, "<code>" + keyword + "</code>");
                            });

                            str += "<p>" + match_content + "...</p>"
                        }
                        str += "</article>";
                    }
                });
                str += "</section>";
                $resultContent.innerHTML = str;
            });
        }
    });
}    
var search_path = "search.xml";
if (search_path.length == 0) {
search_path = "search.xml";
}
var path = "/blog/" + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script>
    <title>《快乐的Linux命令行》笔记（20） - Onns Blog</title>
  <meta name="generator" content="Hexo 4.2.1"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="mobile-header-logo">
    <a href="/blog/." class="logo">Onns Blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list"><a href="/blog/home">
        <li class="mobile-menu-item">Home
          </li>
      </a><a href="/blog/archives">
        <li class="mobile-menu-item">Archives
          </li>
      </a><a href="/blog/tags">
        <li class="mobile-menu-item">Tags
          </li>
      </a><a href="/blog/categories">
        <li class="mobile-menu-item">Categories
          </li>
      </a><a href="/blog/about">
        <li class="mobile-menu-item">About
          </li>
      </a></ul>
</nav>
<div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/blog/." class="logo">Onns Blog</a>
</div>

<nav class="site-navbar"><div class="search-button">
        <a href="#" class="search-toggle" data-selector=".site-navbar"></a>
    </div>
    <div class="search-box">
        <input type="text" id="local-search-input" class="text search-input" placeholder="Type here to search..." />
    </div><ul id="menu" class="menu"><li class="menu-item">
          <a class="menu-item-link" href="/blog/home">
            Home
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/blog/archives">
            Archives
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/blog/tags">
            Tags
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/blog/categories">
            Categories
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/blog/about">
            About
            </a>
        </li>
      </ul></nav>
</header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            <div id="local-search-result"></div><article class="post">
    <header class="post-header">
      <h1 class="post-title">《快乐的Linux命令行》笔记（20）
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2021-04-12 14:20:16
        </span><span class="post-category">
            <a href="/blog/categories/learn/">learn</a>
            </span>
        <span class="post-visits"
             data-url="/blog/2021/04/12/the-linux-command-line-note-20/"
             data-title="《快乐的Linux命令行》笔记（20）">
          Visits 0
        </span>
        </div>
    </header>

    <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">Contents</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#《快乐的-linux-命令行》"><span class="toc-text">《快乐的 Linux 命令行》</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#cat"><span class="toc-text">cat</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#todo"><span class="toc-text">TODO</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sort"><span class="toc-text">sort</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#uniq"><span class="toc-text">uniq</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cut"><span class="toc-text">cut</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#paste"><span class="toc-text">paste</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#join"><span class="toc-text">join</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#comm"><span class="toc-text">comm</span></a></li></ol></li></ol>
    </div>
  </div><div class="post-content"><h1 id="《快乐的-linux-命令行》"><a class="header-anchor" href="#《快乐的-linux-命令行》">#</a>《快乐的 Linux 命令行》</h1>
<a id="more"></a>
<h2 id="cat"><a class="header-anchor" href="#cat">#</a>cat</h2>
<p><code>Ctrl-d</code>可以告诉<code>cat</code>到达文件末尾。<br>
<code>-A</code>选项可以显示不可见字符，比如制表符等：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ cat &gt; onns.txt</span><br><span class="line">	The quick brown fox jumped over the lazy dog.</span><br><span class="line"></span><br><span class="line">$  cat -A onns.txt</span><br><span class="line">^IThe quick brown fox jumped over the lazy dog.$</span><br><span class="line">^I^I$</span><br></pre></td></tr></table></figure>
<p><code>-n</code>选项给文本行添加行号。<br>
<code>-s</code>选项禁止输出多个空白行。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$ cat &gt; onns.txt</span><br><span class="line">The quick brown fox</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">jumped over the lazy dog.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ cat onns.txt</span><br><span class="line">The quick brown fox</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">jumped over the lazy dog.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ cat -ns onns.txt</span><br><span class="line">     1	The quick brown fox</span><br><span class="line">     2</span><br><span class="line">     3	jumped over the lazy dog.</span><br><span class="line">     4</span><br></pre></td></tr></table></figure>
<p>不知道为什么这个<code>cat</code>之后会在最前面<strong>增加五个空格</strong>，之前我在<code>MacOS</code>上的<code>wc</code>之类的命令也会，有机会查一下！下面是我在<code>Mac</code>上的运行结果，也是有空格：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[14:30:49] onns@Onns ~/Desktop $ cat &gt; onns.txt</span><br><span class="line">The quick brown fox</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">jumped over the lazy dog.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[14:31:04] onns@Onns ~/Desktop $ cat onns.txt</span><br><span class="line">The quick brown fox</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">jumped over the lazy dog.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[14:31:08] onns@Onns ~/Desktop $ cat -ns onns.txt</span><br><span class="line">     1	The quick brown fox</span><br><span class="line">     2</span><br><span class="line">     3	jumped over the lazy dog.</span><br><span class="line">     4</span><br></pre></td></tr></table></figure>
<h3 id="todo"><a class="header-anchor" href="#todo">#</a>TODO</h3>
<ul>
<li>查一下为什么<code>cat</code>会有多余的空格。</li>
</ul>
<h2 id="sort"><a class="header-anchor" href="#sort">#</a>sort</h2>
<p><code>sort</code>程序对标准输入的内容，或命令行中指定的一个或多个文件进行排序，然后把排序结果发送到标准输出。</p>
<p>之前已经列举过参数了，不重复了，具体可以参考：<a href="https://onns.xyz/blog/2020/08/21/ip-records-top-3/#%E5%86%8D%E6%8E%92%E5%BA%8F">ip 访问记录查询 top3</a>。</p>
<p>显示<code>10</code>个最大的空间消费者：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$ du -s /usr/share/* | head</span><br><span class="line">112	/usr/share/GConf</span><br><span class="line">6824	/usr/share/GeoIP</span><br><span class="line">108	/usr/share/ImageMagick-6</span><br><span class="line">28	/usr/share/PackageKit</span><br><span class="line">5848	/usr/share/X11</span><br><span class="line">676	/usr/share/aclocal</span><br><span class="line">160	/usr/share/aclocal-1.15</span><br><span class="line">8	/usr/share/acpi-support</span><br><span class="line">8	/usr/share/adduser</span><br><span class="line">612	/usr/share/adium</span><br><span class="line">$ du -s /usr/share/* | sort -nr | head</span><br><span class="line">166684	/usr/share/fonts</span><br><span class="line">122520	/usr/share/sogouimebs</span><br><span class="line">81468	/usr/share/doc</span><br><span class="line">68532	/usr/share/icons</span><br><span class="line">44384	/usr/share/man</span><br><span class="line">40920	/usr/share/ibus</span><br><span class="line">38372	/usr/share/locale</span><br><span class="line">37360	/usr/share/backgrounds</span><br><span class="line">32064	/usr/share/vim</span><br><span class="line">29984	/usr/share/<span class="built_in">help</span></span><br></pre></td></tr></table></figure>
<p><code>-n</code>可以按照数值排序，但是这是因为这个数字在最开头，<code>ls</code>的就不在最开始，所以需要<code>-k</code>参数：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$ ls -l /usr/bin | head</span><br><span class="line">total 174060</span><br><span class="line">-rwxr-xr-x 1 root root          96 2月  27 23:10 2to3-2.7</span><br><span class="line">-rwxr-xr-x 1 root root       10104 4月  23  2016 411toppm</span><br><span class="line">lrwxrwxrwx 1 root root          11 9月  25  2020 GET -&gt; lwp-request</span><br><span class="line">lrwxrwxrwx 1 root root          11 9月  25  2020 HEAD -&gt; lwp-request</span><br><span class="line">lrwxrwxrwx 1 root root          11 9月  25  2020 POST -&gt; lwp-request</span><br><span class="line">lrwxrwxrwx 1 root root           4 12月  1 01:57 X -&gt; Xorg</span><br><span class="line">lrwxrwxrwx 1 root root           1 9月  25  2020 X11 -&gt; .</span><br><span class="line">-rwxr-xr-x 1 root root     2438904 12月  1 01:57 Xephyr</span><br><span class="line">-rwxr-xr-x 1 root root         274 12月  1 01:57 Xorg</span><br><span class="line">$ ls -l /usr/bin | sort -nr -k 5 | head</span><br><span class="line">-rwxr-xr-x 1 root root    19428040 2月   2 16:21 snap</span><br><span class="line">-rwxr-xr-x 1 root root     7619056 10月 30 19:45 gdb</span><br><span class="line">-rwxr-xr-x 1 root root     5893648 6月  24  2019 ubuntu-report</span><br><span class="line">-rwxr-xr-x 1 root root     4551912 1月  13  2020 gnome-control-center</span><br><span class="line">-rwxr-xr-x 2 root root     4526456 1月  26 23:33 python3.6m</span><br><span class="line">-rwxr-xr-x 2 root root     4526456 1月  26 23:33 python3.6</span><br><span class="line">-rwxr-xr-x 1 root root     3633000 2月  27 23:10 python2.7</span><br><span class="line">-rwxr-xr-x 1 root root     3111952 2月  12 16:45 x86_64-linux-gnu-ld.gold</span><br><span class="line">-rwxr-xr-x 1 root root     2886928 2月  12 16:45 x86_64-linux-gnu-dwp</span><br><span class="line">-rwxr-xr-x 1 root root     2675336 10月 13 23:49 vim.basic</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">$ vi distros.txt</span><br><span class="line">SUSE	10.2	12/07/2006</span><br><span class="line">Fedora	10	11/25/2008</span><br><span class="line">SUSE	11.0	06/18/2008</span><br><span class="line">Ubuntu	8.04	04/24/2008</span><br><span class="line">Fedora	8	11/08/2007</span><br><span class="line">SUSE	10.3	10/04/2007</span><br><span class="line">Ubuntu	6.10	10/26/2006</span><br><span class="line">Fedora	7	05/31/2007</span><br><span class="line">Ubuntu	7.10	10/18/2007</span><br><span class="line">Ubuntu	7.04	04/19/2007</span><br><span class="line">SUSE	10.1	05/11/2006</span><br><span class="line">Fedora	6	10/24/2006</span><br><span class="line">Fedora	9	05/13/2008</span><br><span class="line">Ubuntu	6.06	06/01/2006</span><br><span class="line">Ubuntu	8.10	10/30/2008</span><br><span class="line">Fedora	5	03/20/2006</span><br><span class="line">$ sort distros.txt</span><br><span class="line">Fedora	10	11/25/2008</span><br><span class="line">Fedora	5	03/20/2006</span><br><span class="line">Fedora	6	10/24/2006</span><br><span class="line">Fedora	7	05/31/2007</span><br><span class="line">Fedora	8	11/08/2007</span><br><span class="line">Fedora	9	05/13/2008</span><br><span class="line">SUSE	10.1	05/11/2006</span><br><span class="line">SUSE	10.2	12/07/2006</span><br><span class="line">SUSE	10.3	10/04/2007</span><br><span class="line">SUSE	11.0	06/18/2008</span><br><span class="line">Ubuntu	6.06	06/01/2006</span><br><span class="line">Ubuntu	6.10	10/26/2006</span><br><span class="line">Ubuntu	7.04	04/19/2007</span><br><span class="line">Ubuntu	7.10	10/18/2007</span><br><span class="line">Ubuntu	8.04	04/24/2008</span><br><span class="line">Ubuntu	8.10	10/30/2008</span><br></pre></td></tr></table></figure>
<p><code>sort</code>中一个关键值可能包括一个字段区域，如果没有指定区域，<code>sort</code>程序会使用一个键值，其始于指定的字段，一直扩展到行尾。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ sort -k 1,1 -k 2n distros.txt</span><br><span class="line">Fedora	5	03/20/2006</span><br><span class="line">Fedora	6	10/24/2006</span><br><span class="line">Fedora	7	05/31/2007</span><br><span class="line">Fedora	8	11/08/2007</span><br><span class="line">Fedora	9	05/13/2008</span><br><span class="line">Fedora	10	11/25/2008</span><br><span class="line">SUSE	10.1	05/11/2006</span><br><span class="line">SUSE	10.2	12/07/2006</span><br><span class="line">SUSE	10.3	10/04/2007</span><br><span class="line">SUSE	11.0	06/18/2008</span><br><span class="line">Ubuntu	6.06	06/01/2006</span><br><span class="line">Ubuntu	6.10	10/26/2006</span><br><span class="line">Ubuntu	7.04	04/19/2007</span><br><span class="line">Ubuntu	7.10	10/18/2007</span><br><span class="line">Ubuntu	8.04	04/24/2008</span><br><span class="line">Ubuntu	8.10	10/30/2008</span><br></pre></td></tr></table></figure>
<p><code>1,1</code>的意思是<strong>排序始于并且结束于第一个字段</strong>。<br>
<code>2n</code>中<code>2</code>是排序的键值，并且按照数值排序（<code>n</code>）。一个选项字母可能被包含在一个键值说明符的末尾，其用来指定排序的种类，这些选项字母和<code>sort</code>程序的全局选项一样。<br>
<code>key</code>选项允许在字段中指定偏移量：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ sort -k 3.7nbr -k 3.1nbr -k 3.4nbr distros.txt</span><br><span class="line">Fedora	10	11/25/2008</span><br><span class="line">Ubuntu	8.10	10/30/2008</span><br><span class="line">SUSE	11.0	06/18/2008</span><br><span class="line">Fedora	9	05/13/2008</span><br><span class="line">Ubuntu	8.04	04/24/2008</span><br><span class="line">Fedora	8	11/08/2007</span><br><span class="line">Ubuntu	7.10	10/18/2007</span><br><span class="line">SUSE	10.3	10/04/2007</span><br><span class="line">Fedora	7	05/31/2007</span><br><span class="line">Ubuntu	7.04	04/19/2007</span><br><span class="line">SUSE	10.2	12/07/2006</span><br><span class="line">Ubuntu	6.10	10/26/2006</span><br><span class="line">Fedora	6	10/24/2006</span><br><span class="line">Ubuntu	6.06	06/01/2006</span><br><span class="line">SUSE	10.1	05/11/2006</span><br><span class="line">Fedora	5	03/20/2006</span><br></pre></td></tr></table></figure>
<p><code>3.7nbr</code>代表第三个字段中的第七个字符开始。</p>
<p><code>-t</code>指定分隔符：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ sort -t <span class="string">':'</span> -k 7 /etc/passwd | head</span><br><span class="line">hs:x:1000:1000:hs,,,:/home/hs:/bin/bash</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">gdm:x:121:125:Gnome Display Manager:/var/lib/gdm3:/bin/<span class="literal">false</span></span><br><span class="line">gnome-initial-setup:x:120:65534::/run/gnome-initial-setup/:/bin/<span class="literal">false</span></span><br><span class="line">hplip:x:117:7:HPLIP system user,,,:/var/run/hplip:/bin/<span class="literal">false</span></span><br><span class="line">speech-dispatcher:x:111:29:Speech Dispatcher,,,:/var/run/speech-dispatcher:/bin/<span class="literal">false</span></span><br><span class="line">whoopsie:x:112:117::/nonexistent:/bin/<span class="literal">false</span></span><br><span class="line">sync:x:4:65534:sync:/bin:/bin/sync</span><br><span class="line">_apt:x:104:65534::/nonexistent:/usr/sbin/nologin</span><br><span class="line">avahi-autoipd:x:106:112:Avahi autoip daemon,,,:/var/lib/avahi-autoipd:/usr/sbin/nologin</span><br></pre></td></tr></table></figure>
<h2 id="uniq"><a class="header-anchor" href="#uniq">#</a>uniq</h2>
<p><code>uniq</code>程序能完成任务，其输入必须是排好序的数据。</p>
<p>可以参考：<a href="https://onns.xyz/blog/2020/08/21/ip-records-top-3/#%E5%86%8D%E6%8E%92%E5%BA%8F">ip 访问记录查询 top3</a>。</p>
<h2 id="cut"><a class="header-anchor" href="#cut">#</a>cut</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">$ cut --<span class="built_in">help</span></span><br><span class="line">Usage: cut OPTION... [FILE]...</span><br><span class="line">Print selected parts of lines from each FILE to standard output.</span><br><span class="line"></span><br><span class="line">With no FILE, or when FILE is -, <span class="built_in">read</span> standard input.</span><br><span class="line"></span><br><span class="line">Mandatory arguments to long options are mandatory <span class="keyword">for</span> short options too.</span><br><span class="line">  -b, --bytes=LIST        select only these bytes</span><br><span class="line">  -c, --characters=LIST   select only these characters</span><br><span class="line">  -d, --delimiter=DELIM   use DELIM instead of TAB <span class="keyword">for</span> field delimiter</span><br><span class="line">  -f, --fields=LIST       select only these fields;  also <span class="built_in">print</span> any line</span><br><span class="line">                            that contains no delimiter character, unless</span><br><span class="line">                            the -s option is specified</span><br><span class="line">  -n                      (ignored)</span><br><span class="line">      --complement        complement the <span class="built_in">set</span> of selected bytes, characters</span><br><span class="line">                            or fields</span><br><span class="line">  -s, --only-delimited    <span class="keyword">do</span> not <span class="built_in">print</span> lines not containing delimiters</span><br><span class="line">      --output-delimiter=STRING  use STRING as the output delimiter</span><br><span class="line">                            the default is to use the input delimiter</span><br><span class="line">  -z, --zero-terminated    line delimiter is NUL, not newline</span><br><span class="line">      --<span class="built_in">help</span>     display this <span class="built_in">help</span> and <span class="built_in">exit</span></span><br><span class="line">      --version  output version information and <span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line">Use one, and only one of -b, -c or -f.  Each LIST is made up of one</span><br><span class="line">range, or many ranges separated by commas.  Selected input is written</span><br><span class="line"><span class="keyword">in</span> the same order that it is <span class="built_in">read</span>, and is written exactly once.</span><br><span class="line">Each range is one of:</span><br><span class="line"></span><br><span class="line">  N     N<span class="string">'th byte, character or field, counted from 1</span></span><br><span class="line"><span class="string">  N-    from N'</span>th byte, character or field, to end of line</span><br><span class="line">  N-M   from N<span class="string">'th to M'</span>th (included) byte, character or field</span><br><span class="line">  -M    from first to M<span class="string">'th (included) byte, character or field</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">GNU coreutils online help: &lt;http://www.gnu.org/software/coreutils/&gt;</span></span><br><span class="line"><span class="string">Report cut translation bugs to &lt;http://translationproject.org/team/&gt;</span></span><br><span class="line"><span class="string">Full documentation at: &lt;http://www.gnu.org/software/coreutils/cut&gt;</span></span><br><span class="line"><span class="string">or available locally via: info '</span>(coreutils) cut invocation<span class="string">'</span></span><br></pre></td></tr></table></figure>
<p>一个由<code>tab</code>分离的文件，每行不太可能包含相同的字符数，这就使计算每行中字符的位置变得困难或者是不可能。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">$ cut -f 3 distros.txt</span><br><span class="line">12/07/2006</span><br><span class="line">11/25/2008</span><br><span class="line">06/18/2008</span><br><span class="line">04/24/2008</span><br><span class="line">11/08/2007</span><br><span class="line">10/04/2007</span><br><span class="line">10/26/2006</span><br><span class="line">05/31/2007</span><br><span class="line">10/18/2007</span><br><span class="line">04/19/2007</span><br><span class="line">05/11/2006</span><br><span class="line">10/24/2006</span><br><span class="line">05/13/2008</span><br><span class="line">06/01/2006</span><br><span class="line">10/30/2008</span><br><span class="line">03/20/2006</span><br><span class="line">$ cut -f 3 distros.txt | cut -c 7-10</span><br><span class="line">2006</span><br><span class="line">2008</span><br><span class="line">2008</span><br><span class="line">2008</span><br><span class="line">2007</span><br><span class="line">2007</span><br><span class="line">2006</span><br><span class="line">2007</span><br><span class="line">2007</span><br><span class="line">2007</span><br><span class="line">2006</span><br><span class="line">2006</span><br><span class="line">2008</span><br><span class="line">2006</span><br><span class="line">2008</span><br><span class="line">2006</span><br></pre></td></tr></table></figure>
<p><code>expand</code>命令可以把<code>tab</code>展开成空格：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ expand distros.txt | cut -c 23-</span><br><span class="line">2006</span><br><span class="line">2008</span><br><span class="line">2008</span><br><span class="line">2008</span><br><span class="line">2007</span><br><span class="line">2007</span><br><span class="line">2006</span><br><span class="line">2007</span><br><span class="line">2007</span><br><span class="line">2007</span><br><span class="line">2006</span><br><span class="line">2006</span><br><span class="line">2008</span><br><span class="line">2006</span><br><span class="line">2008</span><br><span class="line">2006</span><br></pre></td></tr></table></figure>
<p><code>-d</code>指定分隔符：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ cut -d <span class="string">':'</span> -f 1 /etc/passwd | head</span><br><span class="line">root</span><br><span class="line">daemon</span><br><span class="line">bin</span><br><span class="line">sys</span><br><span class="line">sync</span><br><span class="line">games</span><br><span class="line">man</span><br><span class="line">lp</span><br><span class="line">mail</span><br><span class="line">news</span><br></pre></td></tr></table></figure>
<h2 id="paste"><a class="header-anchor" href="#paste">#</a>paste</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ paste --<span class="built_in">help</span></span><br><span class="line">Usage: paste [OPTION]... [FILE]...</span><br><span class="line">Write lines consisting of the sequentially corresponding lines from</span><br><span class="line">each FILE, separated by TABs, to standard output.</span><br><span class="line"></span><br><span class="line">With no FILE, or when FILE is -, <span class="built_in">read</span> standard input.</span><br><span class="line"></span><br><span class="line">Mandatory arguments to long options are mandatory <span class="keyword">for</span> short options too.</span><br><span class="line">  -d, --delimiters=LIST   reuse characters from LIST instead of TABs</span><br><span class="line">  -s, --serial            paste one file at a time instead of <span class="keyword">in</span> parallel</span><br><span class="line">  -z, --zero-terminated    line delimiter is NUL, not newline</span><br><span class="line">      --<span class="built_in">help</span>     display this <span class="built_in">help</span> and <span class="built_in">exit</span></span><br><span class="line">      --version  output version information and <span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line">GNU coreutils online <span class="built_in">help</span>: &lt;http://www.gnu.org/software/coreutils/&gt;</span><br><span class="line">Report paste translation bugs to &lt;http://translationproject.org/team/&gt;</span><br><span class="line">Full documentation at: &lt;http://www.gnu.org/software/coreutils/paste&gt;</span><br><span class="line">or available locally via: info <span class="string">'(coreutils) paste invocation'</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">$ sort -k 3.7nbr -k 3.1nbr -k 3.4nbr distros.txt &gt; distros-by-date.txt</span><br><span class="line">$ cat distros-by-date.txt</span><br><span class="line">Fedora	10	11/25/2008</span><br><span class="line">Ubuntu	8.10	10/30/2008</span><br><span class="line">SUSE	11.0	06/18/2008</span><br><span class="line">Fedora	9	05/13/2008</span><br><span class="line">Ubuntu	8.04	04/24/2008</span><br><span class="line">Fedora	8	11/08/2007</span><br><span class="line">Ubuntu	7.10	10/18/2007</span><br><span class="line">SUSE	10.3	10/04/2007</span><br><span class="line">Fedora	7	05/31/2007</span><br><span class="line">Ubuntu	7.04	04/19/2007</span><br><span class="line">SUSE	10.2	12/07/2006</span><br><span class="line">Ubuntu	6.10	10/26/2006</span><br><span class="line">Fedora	6	10/24/2006</span><br><span class="line">Ubuntu	6.06	06/01/2006</span><br><span class="line">SUSE	10.1	05/11/2006</span><br><span class="line">Fedora	5	03/20/2006</span><br><span class="line">$ cut -f 1,2 distros-by-date.txt &gt; distros-versions.txt</span><br><span class="line">$ cat distros-versions.txt</span><br><span class="line">Fedora	10</span><br><span class="line">Ubuntu	8.10</span><br><span class="line">SUSE	11.0</span><br><span class="line">Fedora	9</span><br><span class="line">Ubuntu	8.04</span><br><span class="line">Fedora	8</span><br><span class="line">Ubuntu	7.10</span><br><span class="line">SUSE	10.3</span><br><span class="line">Fedora	7</span><br><span class="line">Ubuntu	7.04</span><br><span class="line">SUSE	10.2</span><br><span class="line">Ubuntu	6.10</span><br><span class="line">Fedora	6</span><br><span class="line">Ubuntu	6.06</span><br><span class="line">SUSE	10.1</span><br><span class="line">Fedora	5</span><br><span class="line">$ cut -f 3 distros-by-date.txt &gt; distros-dates.txt</span><br><span class="line">$ cat distros-dates.txt</span><br><span class="line">11/25/2008</span><br><span class="line">10/30/2008</span><br><span class="line">06/18/2008</span><br><span class="line">05/13/2008</span><br><span class="line">04/24/2008</span><br><span class="line">11/08/2007</span><br><span class="line">10/18/2007</span><br><span class="line">10/04/2007</span><br><span class="line">05/31/2007</span><br><span class="line">04/19/2007</span><br><span class="line">12/07/2006</span><br><span class="line">10/26/2006</span><br><span class="line">10/24/2006</span><br><span class="line">06/01/2006</span><br><span class="line">05/11/2006</span><br><span class="line">03/20/2006</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ paste distros-dates.txt distros-versions.txt</span><br><span class="line">11/25/2008	Fedora	10</span><br><span class="line">10/30/2008	Ubuntu	8.10</span><br><span class="line">06/18/2008	SUSE	11.0</span><br><span class="line">05/13/2008	Fedora	9</span><br><span class="line">04/24/2008	Ubuntu	8.04</span><br><span class="line">11/08/2007	Fedora	8</span><br><span class="line">10/18/2007	Ubuntu	7.10</span><br><span class="line">10/04/2007	SUSE	10.3</span><br><span class="line">05/31/2007	Fedora	7</span><br><span class="line">04/19/2007	Ubuntu	7.04</span><br><span class="line">12/07/2006	SUSE	10.2</span><br><span class="line">10/26/2006	Ubuntu	6.10</span><br><span class="line">10/24/2006	Fedora	6</span><br><span class="line">06/01/2006	Ubuntu	6.06</span><br><span class="line">05/11/2006	SUSE	10.1</span><br><span class="line">03/20/2006	Fedora	5</span><br></pre></td></tr></table></figure>
<h2 id="join"><a class="header-anchor" href="#join">#</a>join</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">$ join --<span class="built_in">help</span></span><br><span class="line">Usage: join [OPTION]... FILE1 FILE2</span><br><span class="line">For each pair of input lines with identical join fields, write a line to</span><br><span class="line">standard output.  The default join field is the first, delimited by blanks.</span><br><span class="line"></span><br><span class="line">When FILE1 or FILE2 (not both) is -, <span class="built_in">read</span> standard input.</span><br><span class="line"></span><br><span class="line">  -a FILENUM        also <span class="built_in">print</span> unpairable lines from file FILENUM, <span class="built_in">where</span></span><br><span class="line">                      FILENUM is 1 or 2, corresponding to FILE1 or FILE2</span><br><span class="line">  -e EMPTY          replace missing input fields with EMPTY</span><br><span class="line">  -i, --ignore-case  ignore differences <span class="keyword">in</span> <span class="keyword">case</span> when comparing fields</span><br><span class="line">  -j FIELD          equivalent to <span class="string">'-1 FIELD -2 FIELD'</span></span><br><span class="line">  -o FORMAT         obey FORMAT <span class="keyword">while</span> constructing output line</span><br><span class="line">  -t CHAR           use CHAR as input and output field separator</span><br><span class="line">  -v FILENUM        like -a FILENUM, but suppress joined output lines</span><br><span class="line">  -1 FIELD          join on this FIELD of file 1</span><br><span class="line">  -2 FIELD          join on this FIELD of file 2</span><br><span class="line">  --check-order     check that the input is correctly sorted, even</span><br><span class="line">                      <span class="keyword">if</span> all input lines are pairable</span><br><span class="line">  --nocheck-order   <span class="keyword">do</span> not check that the input is correctly sorted</span><br><span class="line">  --header          treat the first line <span class="keyword">in</span> each file as field headers,</span><br><span class="line">                      <span class="built_in">print</span> them without trying to pair them</span><br><span class="line">  -z, --zero-terminated     line delimiter is NUL, not newline</span><br><span class="line">      --<span class="built_in">help</span>     display this <span class="built_in">help</span> and <span class="built_in">exit</span></span><br><span class="line">      --version  output version information and <span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line">Unless -t CHAR is given, leading blanks separate fields and are ignored,</span><br><span class="line"><span class="keyword">else</span> fields are separated by CHAR.  Any FIELD is a field number counted</span><br><span class="line">from 1.  FORMAT is one or more comma or blank separated specifications,</span><br><span class="line">each being <span class="string">'FILENUM.FIELD'</span> or <span class="string">'0'</span>.  Default FORMAT outputs the join field,</span><br><span class="line">the remaining fields from FILE1, the remaining fields from FILE2, all</span><br><span class="line">separated by CHAR.  If FORMAT is the keyword <span class="string">'auto'</span>, <span class="keyword">then</span> the first</span><br><span class="line">line of each file determines the number of fields output <span class="keyword">for</span> each line.</span><br><span class="line"></span><br><span class="line">Important: FILE1 and FILE2 must be sorted on the join fields.</span><br><span class="line">E.g., use <span class="string">"sort -k 1b,1"</span> <span class="keyword">if</span> <span class="string">'join'</span> has no options,</span><br><span class="line">or use <span class="string">"join -t ''"</span> <span class="keyword">if</span> <span class="string">'sort'</span> has no options.</span><br><span class="line">Note, comparisons honor the rules specified by <span class="string">'LC_COLLATE'</span>.</span><br><span class="line">If the input is not sorted and some lines cannot be joined, a</span><br><span class="line">warning message will be given.</span><br><span class="line"></span><br><span class="line">GNU coreutils online <span class="built_in">help</span>: &lt;http://www.gnu.org/software/coreutils/&gt;</span><br><span class="line">Report join translation bugs to &lt;http://translationproject.org/team/&gt;</span><br><span class="line">Full documentation at: &lt;http://www.gnu.org/software/coreutils/join&gt;</span><br><span class="line">or available locally via: info <span class="string">'(coreutils) join invocation'</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">$ cut -f 1,1 distros-by-date.txt &gt; distros-names.txt</span><br><span class="line">$ paste distros-dates.txt distros-names.txt &gt; distros-key-names.txt</span><br><span class="line">$ cat distros-key-names.txt</span><br><span class="line">11/25/2008	Fedora</span><br><span class="line">10/30/2008	Ubuntu</span><br><span class="line">06/18/2008	SUSE</span><br><span class="line">05/13/2008	Fedora</span><br><span class="line">04/24/2008	Ubuntu</span><br><span class="line">11/08/2007	Fedora</span><br><span class="line">10/18/2007	Ubuntu</span><br><span class="line">10/04/2007	SUSE</span><br><span class="line">05/31/2007	Fedora</span><br><span class="line">04/19/2007	Ubuntu</span><br><span class="line">12/07/2006	SUSE</span><br><span class="line">10/26/2006	Ubuntu</span><br><span class="line">10/24/2006	Fedora</span><br><span class="line">06/01/2006	Ubuntu</span><br><span class="line">05/11/2006	SUSE</span><br><span class="line">03/20/2006	Fedora</span><br><span class="line">$ cut -f 2,2 distros-by-date.txt &gt; distros-vernums.txt</span><br><span class="line">$ paste distros-dates.txt distros-vernums.txt &gt; distros-key-vernums.txt</span><br><span class="line">$ cat distros-key-vernums.txt</span><br><span class="line">11/25/2008	10</span><br><span class="line">10/30/2008	8.10</span><br><span class="line">06/18/2008	11.0</span><br><span class="line">05/13/2008	9</span><br><span class="line">04/24/2008	8.04</span><br><span class="line">11/08/2007	8</span><br><span class="line">10/18/2007	7.10</span><br><span class="line">10/04/2007	10.3</span><br><span class="line">05/31/2007	7</span><br><span class="line">04/19/2007	7.04</span><br><span class="line">12/07/2006	10.2</span><br><span class="line">10/26/2006	6.10</span><br><span class="line">10/24/2006	6</span><br><span class="line">06/01/2006	6.06</span><br><span class="line">05/11/2006	10.1</span><br><span class="line">03/20/2006	5</span><br></pre></td></tr></table></figure>
<p>为了使<code>join</code>命令能正常工作，所有文件必须按照关键数据域排序：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ join distros-key-names.txt distros-key-vernums.txt</span><br><span class="line">11/25/2008 Fedora 10</span><br><span class="line">10/30/2008 Ubuntu 8.10</span><br><span class="line">06/18/2008 SUSE 11.0</span><br><span class="line">05/13/2008 Fedora 9</span><br><span class="line">04/24/2008 Ubuntu 8.04</span><br><span class="line">11/08/2007 Fedora 8</span><br><span class="line">10/18/2007 Ubuntu 7.10</span><br><span class="line">10/04/2007 SUSE 10.3</span><br><span class="line">05/31/2007 Fedora 7</span><br><span class="line">04/19/2007 Ubuntu 7.04</span><br><span class="line">12/07/2006 SUSE 10.2</span><br><span class="line">10/26/2006 Ubuntu 6.10</span><br><span class="line">10/24/2006 Fedora 6</span><br><span class="line">06/01/2006 Ubuntu 6.06</span><br><span class="line">05/11/2006 SUSE 10.1</span><br><span class="line">03/20/2006 Fedora 5</span><br></pre></td></tr></table></figure>
<p>默认情况下，<code>join</code>命令使用空白字符做为输入字段的界定符，一个空格作为输出字段的界定符。<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p>
<h2 id="comm"><a class="header-anchor" href="#comm">#</a>comm</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">$ comm --<span class="built_in">help</span></span><br><span class="line">Usage: comm [OPTION]... FILE1 FILE2</span><br><span class="line">Compare sorted files FILE1 and FILE2 line by line.</span><br><span class="line"></span><br><span class="line">When FILE1 or FILE2 (not both) is -, <span class="built_in">read</span> standard input.</span><br><span class="line"></span><br><span class="line">With no options, produce three-column output.  Column one contains</span><br><span class="line">lines unique to FILE1, column two contains lines unique to FILE2,</span><br><span class="line">and column three contains lines common to both files.</span><br><span class="line"></span><br><span class="line">  -1              suppress column 1 (lines unique to FILE1)</span><br><span class="line">  -2              suppress column 2 (lines unique to FILE2)</span><br><span class="line">  -3              suppress column 3 (lines that appear <span class="keyword">in</span> both files)</span><br><span class="line"></span><br><span class="line">  --check-order     check that the input is correctly sorted, even</span><br><span class="line">                      <span class="keyword">if</span> all input lines are pairable</span><br><span class="line">  --nocheck-order   <span class="keyword">do</span> not check that the input is correctly sorted</span><br><span class="line">  --output-delimiter=STR  separate columns with STR</span><br><span class="line">  --total           output a summary</span><br><span class="line">  -z, --zero-terminated    line delimiter is NUL, not newline</span><br><span class="line">      --<span class="built_in">help</span>     display this <span class="built_in">help</span> and <span class="built_in">exit</span></span><br><span class="line">      --version  output version information and <span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line">Note, comparisons honor the rules specified by <span class="string">'LC_COLLATE'</span>.</span><br><span class="line"></span><br><span class="line">Examples:</span><br><span class="line">  comm -12 file1 file2  Print only lines present <span class="keyword">in</span> both file1 and file2.</span><br><span class="line">  comm -3 file1 file2  Print lines <span class="keyword">in</span> file1 not <span class="keyword">in</span> file2, and vice versa.</span><br><span class="line"></span><br><span class="line">GNU coreutils online <span class="built_in">help</span>: &lt;http://www.gnu.org/software/coreutils/&gt;</span><br><span class="line">Report comm translation bugs to &lt;http://translationproject.org/team/&gt;</span><br><span class="line">Full documentation at: &lt;http://www.gnu.org/software/coreutils/comm&gt;</span><br><span class="line">or available locally via: info <span class="string">'(coreutils) comm invocation'</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ vi file1.txt</span><br><span class="line">a</span><br><span class="line">b</span><br><span class="line">c</span><br><span class="line">d</span><br><span class="line">$ vi file2.txt</span><br><span class="line">b</span><br><span class="line">c</span><br><span class="line">d</span><br><span class="line">e</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ comm file1.txt file2.txt</span><br><span class="line">a</span><br><span class="line">		b</span><br><span class="line">		c</span><br><span class="line">		d</span><br><span class="line">	e</span><br></pre></td></tr></table></figure>
<p>第一列包含第一个文件独有的文本行；第二列文本行是第二列独有的；第三列包含两个文件共有的文本行。</p>
<p><code>comm</code>支持<code>-n</code>形式的选项，这里<code>n</code>代表<code>1</code>、<code>2</code>或<code>3</code>。这些选项使用的时候，指定了要隐藏的列：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ comm -12 file1.txt file2.txt</span><br><span class="line">b</span><br><span class="line">c</span><br><span class="line">d</span><br></pre></td></tr></table></figure>
<p>今天先到这里。</p>
<p>292/505</p>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p>感觉和<code>MySQL</code>的<code>join</code>一样的，也不知道是谁学谁😂。 <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>

      </div>
      
      <footer class="post-footer">
        <div class="post-tags">
            <a href="/blog/tags/linux/">linux</a>
            <a href="/blog/tags/shell/">shell</a>
            <a href="/blog/tags/bash/">bash</a>
            <a href="/blog/tags/shell-note/">shell note</a>
            </div>
        
        <nav class="post-nav"><a class="prev" href="/blog/2021/04/13/the-linux-command-line-note-21/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">《快乐的Linux命令行》笔记（21）</span>
        <span class="prev-text nav-mobile">Prev</span>
      </a>
    <a class="next" href="/blog/2021/04/11/the-go-programming-language-note-6/">
        <span class="next-text nav-default">《Go语音圣经（中文版）》笔记（6）</span>
        <span class="prev-text nav-mobile">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
    </nav></footer>
    </article></div><div class="comments" id="comments"><div id="gitalk-container"></div>
    </div></div>
      </main>

      <footer id="footer" class="footer"><div class="social-links"><a href="mailto:onns@onns.xyz" class="iconfont icon-email" title="email"></a>
        <a href="https://facebook.com/onnsxyz" target="_blank" rel="noopener" class="iconfont icon-facebook" title="facebook"></a>
        <a href="https://github.com/onns" target="_blank" rel="noopener" class="iconfont icon-github" title="github"></a>
        <a href="https://www.douban.com/people/onnsxyz/" target="_blank" rel="noopener" class="iconfont icon-douban" title="douban"></a>
        <a href="https://instagram.com/onnsxyz" target="_blank" rel="noopener" class="iconfont icon-instagram" title="instagram"></a>
        <a href="/blog/atom.xml" class="iconfont icon-rss" title="rss"></a>
    </div><div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even" target="_blank" rel="noopener">Even</a>
  </span>

  <span class="copyright-year">&copy;2015 - 2023<span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">Onns</span>
    <span class="licence"> <a href="http://www.beian.miit.gov.cn" target="_blank" rel="noopener">闽ICP备15022938号-2</a> </span>
  </span>
</div>
</footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>
<script src="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>


<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.css"/>


<script src="//cdn.jsdelivr.net/npm/js-md5@0.7.3/src/md5.min.js"></script>

<script>
  var gitalk = new Gitalk({
    clientID: '7ebadcd52312c2b34f81',
    clientSecret: '052f4cb2121b344c1acd459e277d1bcdc53d1bce',
    repo: 'onns.xyz',
    owner: 'onns',
    admin: ['onns'],
    id: md5(location.pathname),
    
      language: window.navigator.language || window.navigator.userLanguage,
    
    distractionFreeMode: 'true'
  });
  gitalk.render('gitalk-container');
</script><script type="text/javascript" src="/blog/js/src/even.js?v=2.11.0"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
</html>
