<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>cronè„šæœ¬ç›¸å…³çš„è®°å½•</title>
      <link href="/blog/2021/11/21/cron-tips/"/>
      <url>/blog/2021/11/21/cron-tips/</url>
      
        <content type="html"><![CDATA[<p>ä¸ºäº†è®©ä¹‹åçš„äººå°‘èµ°å¼¯è·¯</p><a id="more"></a><h2 id="cron-æ—¥å¿—æŒ‰æ—¥æœŸåˆ’åˆ†"><a class="header-anchor" href="#cron-æ—¥å¿—æŒ‰æ—¥æœŸåˆ’åˆ†">#</a>cron æ—¥å¿—æŒ‰æ—¥æœŸåˆ’åˆ†</h2><p>å…ˆè¯´ç»“æœçš„ä¾‹å­ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ONNS_HOME=/Users/onns</span><br><span class="line">ONNS_ROOT=/Users/onns/Onns</span><br><span class="line">ONNS_CONFIG_DIR=/Users/onns/Onns/code/config/bash</span><br><span class="line">ONNS_PLATFORM=macmini</span><br><span class="line">cron_log_dir=/Users/onns/Onns/code/<span class="built_in">log</span>/cron</span><br><span class="line">30 * * * * zsh /Users/onns/Onns/code/bash/oclear &gt;&gt;<span class="variable">$&#123;cron_log_dir&#125;</span>/out-<span class="variable">$&#123;ONNS_PLATFORM&#125;</span>-`date <span class="string">"+\%Y\%m"</span>`.<span class="built_in">log</span> 2&gt;&gt;<span class="variable">$&#123;cron_log_dir&#125;</span>/err-<span class="variable">$&#123;ONNS_PLATFORM&#125;</span>-`date <span class="string">"+\%Y\%m"</span>`.<span class="built_in">log</span></span><br><span class="line">0 22 * * * zsh /Users/onns/Onns/code/bash/obackup &gt;&gt;<span class="variable">$&#123;cron_log_dir&#125;</span>/out-<span class="variable">$&#123;ONNS_PLATFORM&#125;</span>-`date <span class="string">"+\%Y\%m"</span>`.<span class="built_in">log</span> 2&gt;&gt;<span class="variable">$&#123;cron_log_dir&#125;</span>/err-<span class="variable">$&#123;ONNS_PLATFORM&#125;</span>-`date <span class="string">"+\%Y\%m"</span>`.<span class="built_in">log</span></span><br><span class="line">*/10 * * * * /Users/onns/Downloads/github/ddns/ddns &gt;&gt;<span class="variable">$&#123;cron_log_dir&#125;</span>/out-<span class="variable">$&#123;ONNS_PLATFORM&#125;</span>-`date <span class="string">"+\%Y\%m"</span>`.<span class="built_in">log</span> 2&gt;&gt;<span class="variable">$&#123;cron_log_dir&#125;</span>/err-<span class="variable">$&#123;ONNS_PLATFORM&#125;</span>-`date <span class="string">"+\%Y\%m"</span>`.<span class="built_in">log</span></span><br></pre></td></tr></table></figure><p>æ—¥æœŸå¾ˆå¥½æ‹¿ï¼Œé€šè¿‡<code>date +%Y%m</code>å°±æ‹¿åˆ°äº†ï¼Œä½†æ˜¯æƒ³è¦å†™åœ¨æ–‡ä»¶åé‡Œéœ€è¦æ³¨æ„å‡ ç‚¹ï¼š</p><ol><li><p>ä¸èƒ½å†™åœ¨å˜é‡é‡Œï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯æˆ‘å†™çš„æœ‰é—®é¢˜ï¼Œæˆ‘è¯•è¿‡å¦‚ä¸‹çš„å†™æ³•éƒ½å¤±è´¥äº†ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">log_date=$(date +%Y%m)</span><br><span class="line">log_date=`date +%Y%m`</span><br><span class="line">log_date=`date <span class="string">"+\%Y\%m"</span>`</span><br></pre></td></tr></table></figure></li><li><p><code>%</code>éœ€è¦è½¬ä¹‰ï¼ˆä¸‹é¢è¿™ç§å†™æ³•æˆ‘è¯•è¿‡ä¹Ÿä¸è¡Œï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* * * * * /Users/onns/Downloads/github/ddns/ddns &gt;&gt;<span class="variable">$&#123;cron_log_dir&#125;</span>/out-<span class="variable">$&#123;ONNS_PLATFORM&#125;</span>-`date +%Y%m`.<span class="built_in">log</span> 2&gt;&gt;<span class="variable">$&#123;cron_log_dir&#125;</span>/err-<span class="variable">$&#123;ONNS_PLATFORM&#125;</span>-`date +%Y%m`.<span class="built_in">log</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="todo"><a class="header-anchor" href="#todo">#</a>TODO</h3><ul><li>æ€»æ„Ÿè§‰æœ‰é€šè¿‡å˜é‡çš„æ–¹å¼å®šä¹‰æ—¶é—´æ—¥æœŸçš„æ–¹æ³•ï¼Œä¸ç„¶ç°åœ¨è¿™ç§å¤ªå‘†äº†ã€‚</li></ul><h2 id="cron-ä½¿ç”¨å˜é‡"><a class="header-anchor" href="#cron-ä½¿ç”¨å˜é‡">#</a>cron ä½¿ç”¨å˜é‡</h2><p>å¾ˆå¥‡æ€ªï¼Œä¸èƒ½å®šä¹‰å¤šçº§å˜é‡ï¼Œä¸ç„¶ä¼šç´¢å¼•ä¸åˆ°ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿™æ ·å¯ä»¥</span></span><br><span class="line">ONNS_HOME=/Users/onns</span><br><span class="line">ONNS_ROOT=/Users/onns/Onns</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿™æ ·å°±ä¸è¡Œ</span></span><br><span class="line">ONNS_HOME=/Users/onns</span><br><span class="line">ONNS_ROOT=<span class="variable">$ONNS_HOME</span>/Onns</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> try </category>
          
      </categories>
      
      
        <tags>
            
            <tag> shell </tag>
            
            <tag> zsh </tag>
            
            <tag> cron </tag>
            
            <tag> crontab </tag>
            
            <tag> macos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>postmané…ç½®é¢„å¤„ç†è„šæœ¬ç­‰</title>
      <link href="/blog/2021/11/16/postman-script/"/>
      <url>/blog/2021/11/16/postman-script/</url>
      
        <content type="html"><![CDATA[<p>è®°å½• postman ç›¸å…³ç”¨æ³•ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> city_id = pm.request.url.query.get(<span class="string">"cityId"</span>);</span><br><span class="line"><span class="built_in">console</span>.log(city_id);</span><br><span class="line"><span class="keyword">var</span> ts = <span class="built_in">parseInt</span>(<span class="built_in">Date</span>.now() / <span class="number">1000</span>);</span><br><span class="line"><span class="built_in">console</span>.log(ts);</span><br><span class="line"><span class="keyword">var</span> hash = CryptoJS.MD5(password + ts + city_id).toString();</span><br><span class="line">pm.globals.set(<span class="string">"moji_key"</span>, hash);</span><br><span class="line">pm.globals.set(<span class="string">"ts"</span>, ts);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> try </category>
          
      </categories>
      
      
        <tags>
            
            <tag> js </tag>
            
            <tag> postman </tag>
            
            <tag> work </tag>
            
            <tag> curl </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git hookåˆ é™¤é¡¹ç›®é…ç½®</title>
      <link href="/blog/2021/11/14/git-hook-usage/"/>
      <url>/blog/2021/11/14/git-hook-usage/</url>
      
        <content type="html"><![CDATA[<p>æ˜¨æ™šçŠ¯äº†ä¸€ä¸ªè ¢äº‹ï¼Œä¸å°å¿ƒæŠŠä¸€ä¸ªæƒé™å¾ˆå¤§çš„ key ä¼ ä¸Š GitHub äº†ï¼Œè®°å½•ä¸€ä¸‹é—®é¢˜ä»¥åŠè§£å†³æ–¹æ¡ˆã€‚</p><h2 id="äº‹å‘åŸå› "><a class="header-anchor" href="#äº‹å‘åŸå› ">#</a>äº‹å‘åŸå› </h2><p>æˆ‘æœ‰ä¸€ä¸ªåŠ¨æ€è§£æåŸŸåçš„ä»£ç ï¼š<a href="https://github.com/onns/ddns" target="_blank" rel="noopener">https://github.com/onns/ddns</a>ï¼Œå› ä¸ºæœ€è¿‘éœ€è¦ä¸€ä¸ªå°†å†…ç½‘ ip æ˜ å°„åˆ°åŸŸåçš„åŠŸèƒ½æ‰€ä»¥ä¿®æ”¹äº†ä¸€éƒ¨åˆ†ä»£ç ï¼Œä½†æ˜¯ä¸å°å¿ƒ<strong>å°†æˆ‘çš„é˜¿é‡Œäº‘ accesskey å’Œ secret ä¼ ä¸Šå»äº†</strong>ï¼Œå®ƒèƒ½è·å–æˆ‘åœ¨é˜¿é‡Œäº‘çš„å…¨éƒ¨æƒé™= =ï¼Œæ‰€ä»¥è¿˜æ˜¯è›®å¯æ€•çš„ï¼Œä¸ºäº†ä¸‹æ¬¡ä¸å‘ç”Ÿç±»ä¼¼çš„é—®é¢˜ï¼Œæ‰¾å¯»è§£å†³æ–¹æ¡ˆå¹¶ä»¥æˆ‘ä¸ºæˆ’ã€‚</p><p>ä¸å¾—ä¸è¯´é˜¿é‡Œäº‘è¿™æ–¹ä¾¿åšçš„è¿˜æ˜¯è›®å¥½çš„ï¼Œæˆ‘ä¼ ä¸Šå»çš„ä¸€ç¬é—´å°±æ”¶åˆ°äº†å‘Šè­¦çŸ­ä¿¡ã€‚</p><blockquote><p>ã€é˜¿é‡Œäº‘ã€‘å°Šæ•¬çš„onns@onns.xyzï¼šé˜¿é‡Œäº‘äº‘å®‰å…¨ä¸­å¿ƒæ£€æµ‹åˆ°æ‚¨è´¦å·çš„ AccessKeyï¼šLTAIMwxO3zIjXWiQ è¢«å…¬å¼€åœ¨ Github ä»£ç åº“ä¸­ï¼Œå»ºè®®æ‚¨ç«‹å³ç™»å½•äº‘å®‰å…¨ä¸­å¿ƒï¼ŒAK&amp;å¸å¯†æ³„éœ²æ£€æµ‹æŸ¥çœ‹è¯¦æƒ…ï¼Œå»ºè®®æ ¸å®åï¼Œå°½å¿«ç¦ç”¨ã€‚</p></blockquote><a id="more"></a><h2 id="æ€è€ƒ"><a class="header-anchor" href="#æ€è€ƒ">#</a>æ€è€ƒ</h2><p>å¯¹äºæ­¤ç±»é—®é¢˜ï¼Œå…¶å®ä¸€ä¸ªæœ€å¥½çš„è§£å†³æ–¹æ¡ˆæ˜¯<strong>å°†é…ç½®ä¸ä¸»ä»£ç åˆ†ç¦»</strong>ï¼Œå°†é…ç½®æ”¾åˆ°é…ç½®æ–‡ä»¶é‡Œï¼Œæˆ–è€…æ˜¯<strong>é€šè¿‡å‚æ•°æ‰‹åŠ¨å†™å…¥</strong>ã€‚</p><p>ä½†æˆ‘çš„åº”ç”¨åœºæ™¯æ˜¯ï¼Œå¾ˆå¤šå°æœºå™¨è·‘å®šæ—¶ä»»åŠ¡æ›´æ–° ipï¼Œå¦‚æœèµ°é…ç½®æ–‡ä»¶çš„è¯æ¢èµ·æ¥æˆæœ¬å¹¶ä¸ä¼šé™ä½ï¼Œè€Œä¸”åˆ°æ—¶å€™è¿˜è¦è€ƒè™‘æ–‡ä»¶ä¾èµ–çš„é—®é¢˜ï¼Œæ‰€ä»¥æœ€å¥½çš„å†™æ³•æ˜¯å°†é…ç½®ç›´æ¥ç¡¬ç¼–ç åœ¨ä»£ç é‡Œï¼Œå•æ–‡ä»¶åˆ°å¤„å¯ç”¨ã€‚</p><p>æ‰€ä»¥é—®é¢˜çš„è§£å†³æ–¹æ¡ˆå°±å˜æˆäº†ï¼š<strong>å¦‚ä½•ä¸æŠŠé…ç½®ä¿¡æ¯ä¼ ä¸Š GitHub</strong>ã€‚</p><p>é‚£é—®é¢˜çš„è§£ç­”å°±å˜å¾—æ¸…æ™°äº†èµ·æ¥ï¼š<code>git hook</code>ï¼Œ<code>git hook</code>å¯ä»¥ä¿è¯å¸®æˆ‘åœ¨ä»£ç æäº¤å‰åˆ é™¤å¯¹åº”çš„é…ç½®æ–‡ä»¶ä»£ç ã€‚</p><h2 id="è§£å†³"><a class="header-anchor" href="#è§£å†³">#</a>è§£å†³</h2><p><code>git hook</code>æœ¬èº«å·²ç»é›†æˆåœ¨<code>git</code>ä¸Šäº†ï¼Œæ— éœ€å†å®‰è£…ä»»ä½•æ’ä»¶å³å¯ä½¿ç”¨ã€‚</p><h3 id="hook-æµç¨‹"><a class="header-anchor" href="#hook-æµç¨‹">#</a>hook æµç¨‹</h3><ol><li>æ‰¾åˆ°æ‰€æœ‰çš„å˜æ›´æ–‡ä»¶</li><li>ç­›é€‰ç¬¦åˆè¦æ±‚çš„æ–‡ä»¶</li><li>å¯¹æ•æ„Ÿä¿¡æ¯è¿›è¡Œæ–‡æœ¬æ›¿æ¢</li></ol><h3 id="æ–‡ä»¶ç­›é€‰"><a class="header-anchor" href="#æ–‡ä»¶ç­›é€‰">#</a>æ–‡ä»¶ç­›é€‰</h3><p>æ‰€å¹¸ Google ä¸‹å¾ˆå¤šï¼Œä¸è¿‡æœ‰ä¸€äº›æœ‰é—®é¢˜ï¼Œå¤§å®¶ç›´æ¥æŠ„ä½œä¸šå³å¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">go_files=($(git diff --cached --name-only | grep <span class="string">".go$"</span>))</span><br><span class="line"><span class="keyword">if</span> [[ <span class="string">"<span class="variable">$&#123;go_files&#125;</span>"</span> = <span class="string">""</span> ]]; <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">exit</span> 0</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œæœ‰ä¸ªé—®é¢˜æ˜¯ç½‘ä¸Šçš„ç‰ˆæœ¬éƒ½æ˜¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go_files=$(git diff --cached --name-only | grep <span class="string">".go$"</span>) <span class="comment"># æ²¡æœ‰æœ€å¤–å±‚çš„æ‹¬å·ï¼Œç›¸æ¯”äºä¸Šé¢çš„ä»£ç </span></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯è¿™ä¸ªå¾—åˆ°çš„ç»“æœæ˜¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a.go</span><br><span class="line">b.go</span><br></pre></td></tr></table></figure><p>æ˜¯ä¸€ä¸ªå¸¦æ¢è¡Œçš„å­—ç¬¦ä¸²å˜é‡ï¼Œä¸æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¿™ä¸ªå¯èƒ½æ˜¯ zsh çš„é—®é¢˜ï¼Œæˆ‘ç”¨çš„æ˜¯<code> macOS</code>ï¼Œå¤§å®¶åˆ°æ—¶å€™å¯ä»¥å…ˆè‡ªå·±åœ¨å‘½ä»¤è¡Œè¯•ä¸€ä¸‹è¿™ä¸ª<code>go_files</code>æ˜¯å¦å¯è¿­ä»£ã€‚</p><h3 id="æ–‡æœ¬æ›¿æ¢"><a class="header-anchor" href="#æ–‡æœ¬æ›¿æ¢">#</a>æ–‡æœ¬æ›¿æ¢</h3><p>ä»¥å‰å†™æ­£åˆ™çš„æ—¶å€™è¿™ä¸ªåŒ¹é… 10s å†…è§£å†³ï¼Œä½†æ˜¯åœ¨ shell ä¸‹çœŸçš„èŠ±äº†åŠä¸ªå°æ—¶ã€‚</p><p>å…ˆè¯´ç»“è®ºï¼š</p><ol><li>sed çš„æ­£åˆ™æ¨¡å¼æ²¡æœ‰<code>\S</code>è¿™ç§å†™æ³•ã€‚</li><li>macOS ä¸‹å¼€å¯æ­£åˆ™éœ€è¦<code>-E</code>å‚æ•°ã€‚</li><li>macOS ä¸‹åœ¨åŸæ–‡ä»¶ä¸Šå˜æ›´éœ€è¦<code>-i</code>å‚æ•°ååŠ ä¸€ä¸ª<code>''</code>ç©ºã€‚</li><li>å¤§å¤šæ•°æ•™ç¨‹ä¸Šè¯´<code>()</code>è¿™ä¸¤ä¸ªæ‹¬å·ä¹Ÿè¦è½¬ä¹‰ï¼Œä½†æ˜¯æˆ‘æ²¡è½¬ä¹‰æ‰æˆåŠŸçš„ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œæ„Ÿè§‰è¢«è¯¯å¯¼äº†å¥½ä¹…= =ã€‚</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sed -E -i <span class="string">''</span> <span class="string">'s/var AccessKeyId = "[_A-Za-z0-9]+"/var AccessKeyId = ""/g'</span> main.go</span><br><span class="line">sed -E -i <span class="string">''</span> <span class="string">'s/var AccessKeyId = "([\S]+)"/var AccessKeyId = ""/g'</span> main.go</span><br><span class="line">sed -E -i <span class="string">''</span> <span class="string">'s/var AccessKeyId = ".*"/var AccessKeyId = ""/g'</span> main.go</span><br><span class="line">sed -i <span class="string">''</span> <span class="string">'s/var AccessKeyId = "LTAIMwxO3zIjXWiQ"/var AccessKeyId = ""/g'</span> main.go</span><br></pre></td></tr></table></figure><p>çœŸçš„è¯•äº†åŠå°æ—¶ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥è‡ªå·±å»è¯•è¯•ï¼Œè¿™é‡Œç›´æ¥ä¸Šç»“è®ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed -E -i <span class="string">''</span> <span class="string">'s/var AccessKeyId = "[_A-Za-z0-9]+"/var AccessKeyId = ""/g'</span> <span class="variable">$&#123;file&#125;</span></span><br><span class="line">sed -E -i <span class="string">''</span> <span class="string">'s/var AccessKeySecret = "[_A-Za-z0-9]+"/var AccessKeySecret = ""/g'</span> <span class="variable">$&#123;file&#125;</span></span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç å¯ä»¥æ›¿æ¢ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> AccessKeyId = <span class="string">"LTAIMwxO3zIjXWiQ"</span></span><br><span class="line"><span class="keyword">var</span> AccessKeySecret = <span class="string">"sPvzjjMMA66RaOT0OGiDSkUcAmys5W"</span></span><br></pre></td></tr></table></figure><h3 id="æ‰“åŒ…"><a class="header-anchor" href="#æ‰“åŒ…">#</a>æ‰“åŒ…</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/zsh</span></span><br><span class="line"></span><br><span class="line">go_files=($(git diff --cached --name-only | grep <span class="string">".go$"</span>))</span><br><span class="line"><span class="keyword">if</span> [[ <span class="string">"<span class="variable">$&#123;go_files&#125;</span>"</span> = <span class="string">""</span> ]]; <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">exit</span> 0</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> <span class="variable">$&#123;go_files&#125;</span>; <span class="keyword">do</span></span><br><span class="line">  <span class="comment"># tmpdate=$(date +%Y%m%d-%H%M%S%N) macOS æ²¡æœ‰æ¯«ç§’</span></span><br><span class="line">  tmpdate=$(perl -MTime::HiRes -e <span class="string">'printf("%.0f",Time::HiRes::time()*1000)'</span>)</span><br><span class="line">  cp <span class="variable">$&#123;file&#125;</span> /tmp/git-temp-<span class="variable">$&#123;tmpdate&#125;</span></span><br><span class="line">  sed -E -i <span class="string">''</span> <span class="string">'s/var AccessKeyId = "[_A-Za-z0-9]+"/var AccessKeyId = ""/g'</span> <span class="variable">$&#123;file&#125;</span></span><br><span class="line">  sed -E -i <span class="string">''</span> <span class="string">'s/var AccessKeySecret = "[_A-Za-z0-9]+"/var AccessKeySecret = ""/g'</span> <span class="variable">$&#123;file&#125;</span></span><br><span class="line">  git add <span class="variable">$&#123;file&#125;</span></span><br><span class="line">  mv /tmp/git-temp-<span class="variable">$&#123;tmpdate&#125;</span> <span class="variable">$&#123;file&#125;</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span> <span class="string">"clear access key successfully.\n"</span></span><br><span class="line"><span class="built_in">exit</span> 0</span><br></pre></td></tr></table></figure><p>æœ€åçš„ä»£ç æ·»åŠ äº†ä¿å­˜é…ç½®çš„åŠŸèƒ½ï¼Œè¿™æ ·ä¸ä¼šæ¯æ¬¡éƒ½é‡æ–°æŠŠé…ç½®åŠ å›å»ã€‚</p><p>éœ€è¦æ³¨æ„çš„é—®é¢˜æ˜¯ï¼š</p><ul><li>éœ€è¦èµ‹äºˆè¿™ä¸ª<code>pre-commit</code>æ–‡ä»¶å¯æ‰§è¡Œæƒé™ã€‚</li></ul><center><p><img src="//onns.xyz/blog/image/20211114-1.png" alt="å›¾1"></p></center><ul><li>ä¿®æ”¹çš„æ—¶å€™è¦åŠ <code>git add ${file}</code>ï¼Œä¸ç„¶ä½ ä¼šå‘ç°ä½ å˜æ›´äº†ä½†æ˜¯ commit çš„è®°å½•é‡Œæ²¡æœ‰= =ã€‚</li></ul><h2 id="æµ‹è¯•"><a class="header-anchor" href="#æµ‹è¯•">#</a>æµ‹è¯•</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> t</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">@Time : 2021/11/14 11:59</span></span><br><span class="line"><span class="comment">@Author : onns</span></span><br><span class="line"><span class="comment">@File : t/t.go</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> AccessKeyId = <span class="string">"LTAIMwxO3zIjXWiQ"</span></span><br><span class="line"><span class="keyword">var</span> AccessKeySecret = <span class="string">"sPvzjjMMA66RaOT0OGiDSkUcAmys5W"</span></span><br></pre></td></tr></table></figure><p>åœ¨å­ç›®å½•ä¸‹åˆ›å»ºäº†ä¸€ä¸ªæµ‹è¯•æ–‡ä»¶ã€‚</p><center><p><img src="//onns.xyz/blog/image/20211114-2.png" alt="æµ‹è¯•å›¾"></p></center><p>æœ‰æ•ˆï¼Œå®Œå·¥ï¼</p><h2 id="todo"><a class="header-anchor" href="#todo">#</a>TODO</h2><ul><li>~~æˆ‘æµ‹è¯•çš„æ—¶å€™ä¸è®ºæˆ‘åœ¨<strong>å½“å‰é¡¹ç›®</strong>çš„å“ªä¸ªå­ç›®å½•ä¸‹æ‰§è¡Œï¼Œå˜æ›´çš„æ–‡ä»¶åˆ—è¡¨éƒ½æ˜¯ä»æ ¹ç›®å½•ä¸‹ç®—èµ·çš„ï¼Œä¸çŸ¥é“åˆ°æ—¶å€™çš„æ–‡ä»¶åä¼šä¸ä¼šæœ‰é—®é¢˜ï¼Œå¾…æµ‹è¯•ã€‚~~æµ‹è¯•é€šè¿‡ï¼Œæ²¡é—®é¢˜ã€‚</li></ul><center><p><img src="//onns.xyz/blog/image/20211114-3.png" alt="æµ‹è¯•å­ç›®å½•"></p></center><ul><li>æ›´ä¼˜é›…çš„æ–¹æ¡ˆï¼Œæ¯•ç«Ÿå½“å‰çš„æ–¹æ¡ˆå¯èƒ½ä¼šè¯¯ä¼¤ï¼Œä¸è¿‡å¤§æ¦‚ç‡æ²¡é—®é¢˜ã€‚è¿™é‡Œä¸å¾—ä¸è¯´ï¼Œgolang çš„å¼ºåˆ¶æ ¼å¼åŒ– nbï¼</li></ul><h2 id="å‚è€ƒèµ„æ–™"><a class="header-anchor" href="#å‚è€ƒèµ„æ–™">#</a>å‚è€ƒèµ„æ–™</h2><ul><li><a href="https://medium.com/@radlinskii/writing-the-pre-commit-git-hook-for-go-files-810f8d5f1c6f" target="_blank" rel="noopener">Writing a pre-commit git hook for Go files.</a></li><li><a href="https://superuser.com/questions/599072/how-to-get-bash-execution-time-in-milliseconds-under-mac-os-x" target="_blank" rel="noopener">How to get Bash execution time in milliseconds under Mac OS X?</a></li><li><a href="https://githooks.com/" target="_blank" rel="noopener">https://githooks.com/</a></li><li><a href="https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks" target="_blank" rel="noopener">8.3 Customizing Git - Git Hooks</a></li><li><a href="https://support.gitkraken.com/working-with-repositories/githooksexample/" target="_blank" rel="noopener">Git Hooks Example</a></li></ul><h2 id="æ€»ç»“"><a class="header-anchor" href="#æ€»ç»“">#</a>æ€»ç»“</h2><ul><li>å¥½å¤šæ—¶é—´éƒ½èŠ±åœ¨äº† sed çš„æ–‡æ¡£æŸ¥è¯¢ä¸Šï¼Œç»“æœæœ€åè¿˜æ˜¯æˆ‘è‡ªå·±è¯•å‡ºæ¥çš„ã€‚</li><li>æ²¡è®°é”™çš„è¯ git å¥½åƒä¹Ÿæ˜¯ Linux çš„ä½œè€…å†™çš„ï¼Ÿ</li></ul><p>å¦‚æœ‰ä¸è§„èŒƒä¹‹å¤„ï¼Œæ¬¢è¿æ‰¹è¯„æŒ‡æ­£ï¼Œæœ›å¤§å®¶ä»¥æˆ‘ä¸ºæˆ’ã€‚</p><p>2021.11.14 13:23:22</p>]]></content>
      
      
      <categories>
          
          <category> try </category>
          
      </categories>
      
      
        <tags>
            
            <tag> zsh </tag>
            
            <tag> macos </tag>
            
            <tag> git </tag>
            
            <tag> git hook </tag>
            
            <tag> sed </tag>
            
            <tag> grep </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gitç›¸å…³ä½¿ç”¨</title>
      <link href="/blog/2021/10/07/git-doc/"/>
      <url>/blog/2021/10/07/git-doc/</url>
      
        <content type="html"><![CDATA[<p>è®°å½•é—®é¢˜</p><a id="more"></a><h2 id="ä¿®æ”¹é»˜è®¤åˆ†æ”¯åä¸º-main"><a class="header-anchor" href="#ä¿®æ”¹é»˜è®¤åˆ†æ”¯åä¸º-main">#</a>ä¿®æ”¹é»˜è®¤åˆ†æ”¯åä¸º main</h2><p>= = å†å²åŸå› </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global init.defaultBranch main</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> doc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Golangä¸€äº›é—®é¢˜è®°å½•</title>
      <link href="/blog/2021/10/07/golang-doc/"/>
      <url>/blog/2021/10/07/golang-doc/</url>
      
        <content type="html"><![CDATA[<p>ä¸€äº›é—®é¢˜çš„è§£ç­”</p><a id="more"></a><h2 id="go111module-ç”¨é€”"><a class="header-anchor" href="#go111module-ç”¨é€”">#</a>GO111MODULE ç”¨é€”</h2><p><code>golang</code>ä» 1.11 ç‰ˆæœ¬ä¹‹åå¼€å§‹ç”¨<code>go mod</code>æ¥ç®¡ç†ä¾èµ–åŒ…äº†ï¼Œæ‰€ä»¥é»˜è®¤è¿™ä¸ªæ˜¯å¼€å¯çš„ï¼Œä½†æ˜¯åƒ<code>ngrok</code>è¿™ç§å¾ˆè€çš„ï¼Œåˆä¸å†æ›´æ–°å¼€æºç‰ˆæœ¬çš„ä»£ç ï¼Œä¸æ”¯æŒè¿™ä¸ªç‰¹æ€§ï¼Œéœ€è¦å…³é—­æ¬¡åŠŸèƒ½ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go env -w GO111MODULE=off</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> doc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> golang </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLé—®é¢˜æŸ¥é˜…</title>
      <link href="/blog/2021/09/11/mysql-doc/"/>
      <url>/blog/2021/09/11/mysql-doc/</url>
      
        <content type="html"><![CDATA[<p>è®°å½•é—®é¢˜</p><a id="more"></a><h2 id="mysql-çš„count-å’Œcount-1-æœ‰ä»€ä¹ˆåŒºåˆ«"><a class="header-anchor" href="#mysql-çš„count-å’Œcount-1-æœ‰ä»€ä¹ˆåŒºåˆ«">#</a>Mysql çš„<code>COUNT(*)</code>å’Œ<code>COUNT(1)</code>æœ‰ä»€ä¹ˆåŒºåˆ«</h2><p>5.6 çš„å®˜æ–¹æ–‡æ¡£ä¸­ä»‹ç»å¦‚ä¸‹ï¼š</p><blockquote><p><code>InnoDB</code> handles SELECT <code>COUNT(*)</code> and SELECT <code>COUNT(1)</code> operations in the same way. There is no performance difference.</p></blockquote><p>æ‰€ä»¥ç­”æ¡ˆæ˜¯æ²¡åŒºåˆ«ã€‚<code>COUNT(name)</code>ä¼šç®—éç©ºçš„ä¸ªæ•°ã€‚</p><ul><li><a href="https://dev.mysql.com/doc/refman/5.6/en/aggregate-functions.html#function_count" target="_blank" rel="noopener">12.19.1 Aggregate Function Descriptions</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> doc </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Golangä¸­æ–‡æ˜¾ç¤ºé—®é¢˜</title>
      <link href="/blog/2021/09/08/golang-utf8-chinese/"/>
      <url>/blog/2021/09/08/golang-utf8-chinese/</url>
      
        <content type="html"><![CDATA[<h1 id="é—®é¢˜æè¿°"><a class="header-anchor" href="#é—®é¢˜æè¿°">#</a>é—®é¢˜æè¿°</h1><p>åœ¨ä½¿ç”¨<code>golang</code>çš„æ—¥å¿—ç³»ç»Ÿæ—¶ï¼Œæœ‰æ—¶ä¼šå‡ºç°ä¸€äº›çœ‹èµ·æ¥çŸ¥é“æ˜¯ä»€ä¹ˆç¼–ç ä½†å®é™…ä¸Šè§£æä¸å‡ºæ¥çš„å†…å®¹ï¼š</p><figure class="highlight golang"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\<span class="number">350</span>\<span class="number">277</span>\<span class="number">231</span>\<span class="number">346</span>\<span class="number">230</span>\<span class="number">257</span>\<span class="number">344</span>\<span class="number">270</span>\<span class="number">200</span>\<span class="number">346</span>\<span class="number">256</span>\<span class="number">265</span>\<span class="number">344</span>\<span class="number">270</span>\<span class="number">255</span>\<span class="number">346</span>\<span class="number">226</span>\<span class="number">207</span></span><br></pre></td></tr></table></figure><p>æ‰¾äº†å¥½ä¹…ç»ˆäºçŸ¥é“æ€ä¹ˆè¯»äº†ï½</p><h2 id="å¤ªé•¿ä¸çœ‹ç‰ˆ"><a class="header-anchor" href="#å¤ªé•¿ä¸çœ‹ç‰ˆ">#</a>å¤ªé•¿ä¸çœ‹ç‰ˆ</h2><p>ç›´æ¥ç”¨<code>python2</code>çš„<code>print</code>æ–¹æ³•å³å¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~  python2                                               [2021/09/08 23:11] </span><br><span class="line"></span><br><span class="line">WARNING: Python 2.7 is not recommended. </span><br><span class="line">This version is included <span class="keyword">in</span> macOS <span class="keyword">for</span> compatibility with legacy software. </span><br><span class="line">Future versions of macOS will not include Python 2.7. </span><br><span class="line">Instead, it is recommended that you transition to using <span class="string">'python3'</span> from within Terminal.</span><br><span class="line"></span><br><span class="line">Python 2.7.16 (default, Jun 18 2021, 03:23:52) </span><br><span class="line">[GCC Apple LLVM 12.0.5 (clang-1205.0.19.59.6) [+internal-os, ptrauth-isa=deploy on darwin</span><br><span class="line">Type <span class="string">"help"</span>, <span class="string">"copyright"</span>, <span class="string">"credits"</span> or <span class="string">"license"</span> <span class="keyword">for</span> more information.</span><br><span class="line">&gt;&gt;&gt; <span class="built_in">print</span>(<span class="string">"\350\277\231\346\230\257\344\270\200\346\256\265\344\270\255\346\226\207"</span>)</span><br><span class="line">è¿™æ˜¯ä¸€æ®µä¸­æ–‡</span><br><span class="line">&gt;&gt;&gt;</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="è½¬æ¢"><a class="header-anchor" href="#è½¬æ¢">#</a>è½¬æ¢</h2><p>ç†è®ºä¸Šæˆ‘ä»¬å¸¸ç”¨çš„ç¼–ç ç±»å‹æ— éå°±æ˜¯<code>gbk</code>ã€<code>ascii</code>ã€<code>utf-8</code>ã€‚</p><p>ç›´æ¥ä»<code>utf-8</code>å¼€å§‹ï¼ˆå› ä¸ºæˆ‘é˜´å·®é˜³é”™è¯•å‡ºæ¥äº†ç¼–ç ï¼Œæ‰€ä»¥æˆ‘ç›´æ¥é€†å‘æ¨å›å»äº†ï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; <span class="string">"è¿™æ˜¯ä¸€æ®µä¸­æ–‡"</span>.encode(<span class="string">'utf-8'</span>)</span><br><span class="line">b<span class="string">'\xe8\xbf\x99\xe6\x98\xaf\xe4\xb8\x80\xe6\xae\xb5\xe4\xb8\xad\xe6\x96\x87'</span></span><br></pre></td></tr></table></figure><p>å…¶å®å¯ä»¥å‘ç°<code>\</code>çš„ä¸ªæ•°æ˜¯ä¸€æ ·çš„ï¼Œå› æ­¤å°±æ˜¯<code>\350</code>å’Œ<code>\xe8</code>ä¹‹é—´æœ‰ä¸€ä¸ªå¯¹åº”å…³ç³»ã€‚</p><p>åŸºæœ¬ä¸Šåˆ°è¿™é‡Œå°±å¯ä»¥çŒœæµ‹ä¸€ä¸ªæ˜¯å…«è¿›åˆ¶ä¸€ä¸ªæ˜¯åå…­è¿›åˆ¶äº†= =</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; hex(int(<span class="string">"350"</span>,8))</span><br><span class="line"><span class="string">'0xe8'</span></span><br></pre></td></tr></table></figure><p>æ”¶å·¥ã€‚</p><p>æœ‰æ—¶å€™è¿æ°”ä¹Ÿå¾ˆé‡è¦ã€‚</p><p>æˆ‘ç”¨äº†<code>chardet</code>åº“ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Python 2.7.17 (default, Jul 20 2020, 15:37:01) </span><br><span class="line">[GCC 7.5.0] on linux2</span><br><span class="line">Type <span class="string">"help"</span>, <span class="string">"copyright"</span>, <span class="string">"credits"</span> or <span class="string">"license"</span> <span class="keyword">for</span> more information.</span><br><span class="line">&gt;&gt;&gt; </span><br><span class="line">&gt;&gt;&gt; import chardet</span><br><span class="line">&gt;&gt;&gt; chardet.detect(<span class="string">"\350\277\231\346\230\257\344\270\200\346\256\265\344\270\255\346\226\207"</span>)</span><br><span class="line">&#123;<span class="string">'confidence'</span>: 0.99, <span class="string">'language'</span>: <span class="string">''</span>, <span class="string">'encoding'</span>: <span class="string">'utf-8'</span>&#125;</span><br></pre></td></tr></table></figure><p>æ™šå®‰ ğŸ˜´</p>]]></content>
      
      
      <categories>
          
          <category> findout </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> linux </tag>
            
            <tag> macos </tag>
            
            <tag> golang </tag>
            
            <tag> utf8 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>bashç¯å¢ƒå˜äº†é‡è½½é—®é¢˜</title>
      <link href="/blog/2021/08/21/bash-variables-reload/"/>
      <url>/blog/2021/08/21/bash-variables-reload/</url>
      
        <content type="html"><![CDATA[<h1 id="é—®é¢˜æè¿°"><a class="header-anchor" href="#é—®é¢˜æè¿°">#</a>é—®é¢˜æè¿°</h1><p>å› ä¸ºä¼šåœ¨å¤šå°æœºå™¨é‡Œç”¨æˆ‘è‡ªå·±å†™çš„ä¸€ä¸ªè„šæœ¬åº“ï¼Œå¦‚ä½•å¿«é€Ÿçš„é…ç½®ç”Ÿæ•ˆå°±æ˜¯éœ€è¦è§£å†³çš„é—®é¢˜ï¼Œæˆ‘çš„è§£å†³æ–¹æ³•æ˜¯ç”¨ç¯å¢ƒå˜é‡åŒ…ã€‚</p><p>å®šä¹‰ä¸€ä¸ªé»˜è®¤çš„ç¯å¢ƒå˜é‡æ–‡ä»¶ï¼Œå†å®šä¹‰å„ä¸ªå¹³å°ç‹¬ç«‹çš„ç¯å¢ƒå˜é‡æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">âœ  ~/Onns/code/config/bash git:(main) âœ—  ls                                                                                                                        [2021/08/21 10:50]</span><br><span class="line">README.md       default         lab_desktop     macmini         oinit_python.py template-bashrc ubuntu</span><br><span class="line">aliyun          deploy          macbook         oinit           raspi           <span class="built_in">test</span></span><br></pre></td></tr></table></figure><p>ä¹‹å‰åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ä¸€ç›´æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œè€Œä¸”æˆ‘è¿˜åˆ¶ä½œäº†ä¸€ä¸ª python è§£æçš„è„šæœ¬ï¼Œä½¿å¾— python ä¹Ÿèƒ½å¤Ÿä½¿ç”¨åŒä¸€å¥—å®šä¹‰ã€‚</p><p>ä¸è¿‡æ˜¨å¤©åœ¨ä½¿ç”¨çš„æ—¶å€™çªç„¶æƒ³åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œæ¯”å¦‚æˆ‘åœ¨ defaultï¼ˆé»˜è®¤çš„ç¯å¢ƒå˜é‡ï¼‰é‡Œé…ç½®äº†ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ONNS_HOME=/User/onns</span><br><span class="line">document_dir=<span class="variable">$&#123;ONNS_HOME&#125;</span>/Documents</span><br></pre></td></tr></table></figure><p>ç„¶ååˆåœ¨ä¸“é—¨çš„é…ç½®æ–‡ä»¶é‡Œé…ç½®äº†ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ONNS_HOME=/User/macmini</span><br></pre></td></tr></table></figure><p>è¿™æ ·ç¡®å®å¯ä»¥åšåˆ°åœ¨ä¸åŒçš„ç”µè„‘ä¸Šåº”ç”¨ä¸“é—¨é…ç½®çš„å˜é‡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="variable">$ONNS_HOME</span></span><br><span class="line">/User/macmini</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$document_dir</span></span><br><span class="line">/User/onns/Documents</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯å­å˜é‡æ˜¯ä¸ä¼šæ”¹å˜çš„ï¼Œé™¤éä½ åœ¨ä¸“é—¨çš„é…ç½®æ–‡ä»¶é‡Œå†é…ç½®ä¸€æ¬¡ã€‚ã€‚</p><p>å®³ï¼ŒæœŸå¾…è§£å†³åŠæ³•ï½</p><h2 id="ç›¸å…³é“¾æ¥"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥">#</a>ç›¸å…³é“¾æ¥</h2><p>åœ¨ stackoverflow ä¸Šçš„æé—®ï¼š<a href="https://stackoverflow.com/questions/68869659/is-there-a-way-to-load-bash-variables-dynamically" target="_blank" rel="noopener">Is there a way to load bash variables dynamically</a></p>]]></content>
      
      
      <categories>
          
          <category> accumulate </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> bash </tag>
            
            <tag> macos </tag>
            
            <tag> environment variables </tag>
            
            <tag> question </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>csvä¹±ç é—®é¢˜è§£å†³</title>
      <link href="/blog/2021/08/18/csv-gibberish/"/>
      <url>/blog/2021/08/18/csv-gibberish/</url>
      
        <content type="html"><![CDATA[<h1 id="csv-ä¹±ç é—®é¢˜è§£å†³"><a class="header-anchor" href="#csv-ä¹±ç é—®é¢˜è§£å†³">#</a>csv ä¹±ç é—®é¢˜è§£å†³</h1><p>csv æ˜¯æ¯”è¾ƒå¥½æ•´ç†æ•°æ®çš„è¯­è¨€ï¼Œç»å¸¸å°±ç”¨å­—ç¬¦ä¸²ç›´æ¥æ‹¼æ¥äº†ï¼Œç„¶åç”¨ Excel åšåç»­å¤„ç†ï¼Œä½†æ˜¯ä¸­æ–‡ä¼šä¹±ç ã€‚</p><h2 id="è§£å†³æ–¹æ¡ˆ"><a class="header-anchor" href="#è§£å†³æ–¹æ¡ˆ">#</a>è§£å†³æ–¹æ¡ˆ</h2><p>åŠ ä¸€ä¸ª bom å¤´å³å¯ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line">f = open(<span class="string">"reply.csv"</span>, <span class="string">"r"</span>)</span><br><span class="line">data = f.read()</span><br><span class="line">f.close()</span><br><span class="line"></span><br><span class="line">f = open(<span class="string">"reply.csv"</span>, <span class="string">"r"</span>, encoding=<span class="string">"utf-8-sig"</span>)</span><br><span class="line">f.write(data)</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure><a id="more"></a>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> linux </tag>
            
            <tag> tips </tag>
            
            <tag> macos </tag>
            
            <tag> excel </tag>
            
            <tag> csv </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®‰è£…Elasticsearch</title>
      <link href="/blog/2021/06/14/install-elasticsearch/"/>
      <url>/blog/2021/06/14/install-elasticsearch/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a class="header-anchor" href="#å‰è¨€">#</a>å‰è¨€</h2><p>åšå®¢çš„æœç´¢æœ‰ç‚¹éš¾ç”¨ï¼Œç»å¸¸æ‰¾ä¸åˆ°ä¸œè¥¿ï¼Œå› ä¸ºç°åœ¨è¿˜æ˜¯åŸºäºå­—ç¬¦ä¸²åŒ¹é…çš„ï¼Œä¹Ÿæ²¡æœ‰åŠæ³•è¿›è¡Œæ¨¡ç³Šæœç´¢ï¼Œæ‰€ä»¥æŠ˜è…¾ä¸€ä¸‹ï¼Œé¡ºä¾¿å­¦ä¹ ä¸€ä¸‹<code>Elasticsearch</code>ï¼Œè®°å½•ä¹‹ã€‚</p><a id="more"></a><h2 id="å®‰è£…openjdk"><a class="header-anchor" href="#å®‰è£…openjdk">#</a>å®‰è£…OpenJDK</h2><blockquote><p>Elasticsearch is built using Java, and includes a bundled version of OpenJDK from the JDK maintainers (GPLv2+CE) within each distribution. The bundled JVM is the recommended JVM and is located within the jdk directory of the Elasticsearch home directory.</p></blockquote><p>å®˜ç½‘çš„æè¿°å¦‚ä¸Šï¼Œæ‰€ä»¥è·Ÿç€å®˜ç½‘å» <a href="https://jdk.java.net/" target="_blank" rel="noopener">https://jdk.java.net/</a> ä¸‹äº†<code>OpenJDK</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://download.java.net/java/GA/jdk16.0.1/7147401fd7354114ac51ef3e1328291f/9/GPL/openjdk-16.0.1_linux-x64_bin.tar.gz</span><br><span class="line">wget https://download.java.net/java/GA/jdk16.0.1/7147401fd7354114ac51ef3e1328291f/9/GPL/openjdk-16.0.1_linux-x64_bin.tar.gz.sha256</span><br></pre></td></tr></table></figure><p>æœ¬æ¥è¿˜æƒ³çš®ä¸€ä¸‹ï¼Œç»“æœå‘ç°éªŒè¯ä¸äº†ã€‚ã€‚ã€‚ã€‚åªèƒ½æ‰‹åŠ¨éªŒè¯äº†ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">onns@onns:~$ shasum -a 256 openjdk-16.0.1_linux-x64_bin.tar.gz</span><br><span class="line">b1198ffffb7d26a3fdedc0fa599f60a0d12aa60da1714b56c1defbce95d8b235  openjdk-16.0.1_linux-x64_bin.tar.gz</span><br><span class="line">onns@onns:~$ cat openjdk-16.0.1_linux-x64_bin.tar.gz.sha256 </span><br><span class="line">b1198ffffb7d26a3fdedc0fa599f60a0d12aa60da1714b56c1defbce95d8b235</span><br></pre></td></tr></table></figure><p>ç„¶åè§£å‹å®‰è£…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tar xvf openjdk-16.0.1_linux-x64_bin.tar.gz</span><br><span class="line">vi .bashrc</span><br><span class="line"><span class="built_in">source</span> .bashrc</span><br></pre></td></tr></table></figure><p>æ·»åŠ çš„å†…å®¹æ˜¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> JAVA_HOME=/home/onns/jdk-16.0.1</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$&#123;JAVA_HOME&#125;</span>/bin</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ä¸€ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">onns@onns:~$ javac -version</span><br><span class="line">javac 16.0.1</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…elasticsearch"><a class="header-anchor" href="#å®‰è£…elasticsearch">#</a>å®‰è£…Elasticsearch</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.13.1-linux-x86_64.tar.gz</span><br><span class="line">wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.13.1-linux-x86_64.tar.gz.sha512</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå°±èƒ½éªŒè¯æˆåŠŸ ğŸ˜‚ ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">onns@onns:~$ shasum -a 512 -c elasticsearch-7.13.1-linux-x86_64.tar.gz.sha512</span><br><span class="line">elasticsearch-7.13.1-linux-x86_64.tar.gz: OK</span><br></pre></td></tr></table></figure><p>ç„¶åæ­£å¸¸è§£å‹å³å¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar -xvf elasticsearch-7.13.1-linux-x86_64.tar.gz</span><br><span class="line"><span class="built_in">cd</span> elasticsearch-7.13.1/</span><br></pre></td></tr></table></figure><p>ç„¶åè¿è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./bin/elasticsearch</span><br></pre></td></tr></table></figure><p>å°´å°¬ï¼Œæˆ‘çš„äº‘æœåŠ¡å™¨å±…ç„¶å†…å­˜ä¸å¤Ÿå¼€å¯è¿™ä¸ªæœåŠ¡ã€‚ã€‚ã€‚æ¢äº†ä¸ªæœåŠ¡å™¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">(base) hs@hs-Z390-AORUS-PRO:~$ curl localhost:9200</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"name"</span> : <span class="string">"hs-Z390-AORUS-PRO"</span>,</span><br><span class="line">  <span class="string">"cluster_name"</span> : <span class="string">"elasticsearch"</span>,</span><br><span class="line">  <span class="string">"cluster_uuid"</span> : <span class="string">"b6FAZNuyRxG1dVoY6Gbtog"</span>,</span><br><span class="line">  <span class="string">"version"</span> : &#123;</span><br><span class="line">    <span class="string">"number"</span> : <span class="string">"7.13.1"</span>,</span><br><span class="line">    <span class="string">"build_flavor"</span> : <span class="string">"default"</span>,</span><br><span class="line">    <span class="string">"build_type"</span> : <span class="string">"tar"</span>,</span><br><span class="line">    <span class="string">"build_hash"</span> : <span class="string">"9a7758028e4ea59bcab41c12004603c5a7dd84a9"</span>,</span><br><span class="line">    <span class="string">"build_date"</span> : <span class="string">"2021-05-28T17:40:59.346932922Z"</span>,</span><br><span class="line">    <span class="string">"build_snapshot"</span> : <span class="literal">false</span>,</span><br><span class="line">    <span class="string">"lucene_version"</span> : <span class="string">"8.8.2"</span>,</span><br><span class="line">    <span class="string">"minimum_wire_compatibility_version"</span> : <span class="string">"6.8.0"</span>,</span><br><span class="line">    <span class="string">"minimum_index_compatibility_version"</span> : <span class="string">"6.0.0-beta1"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"tagline"</span> : <span class="string">"You Know, for Search"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿˜æ˜¯æˆ‘å¤ªå¤©çœŸäº†ï¼Œè¿™ä¸ªä¸œè¥¿å•¥ä¹Ÿä¸å¹²å°±<code>2G</code>å†…å­˜æ²¡äº†ï¼Œå®³ã€‚</p><h2 id="ç›¸å…³é“¾æ¥"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥">#</a>ç›¸å…³é“¾æ¥</h2><ul><li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/setup.html" target="_blank" rel="noopener">Set up Elasticsearch</a></li><li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/targz.html" target="_blank" rel="noopener">Install Elasticsearch from archive on Linux or MacOS</a></li><li><a href="https://www.ruanyifeng.com/blog/2017/08/elasticsearch.html" target="_blank" rel="noopener">å…¨æ–‡æœç´¢å¼•æ“ Elasticsearch å…¥é—¨æ•™ç¨‹</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> try </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> macos </tag>
            
            <tag> java - shasum </tag>
            
            <tag> openjdk </tag>
            
            <tag> elastic </tag>
            
            <tag> elastic search </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŠGoè¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹ç¬”è®°ï¼ˆ20ï¼‰</title>
      <link href="/blog/2021/06/12/the-go-programming-language-note-20/"/>
      <url>/blog/2021/06/12/the-go-programming-language-note-20/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šgo-è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹"><a class="header-anchor" href="#ã€Šgo-è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹">#</a>ã€ŠGo è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹</h1><a id="more"></a><h1 id="æ¥å£"><a class="header-anchor" href="#æ¥å£">#</a>æ¥å£</h1><p>æ¥å£ç±»å‹æ˜¯ä¸€ç§æŠ½è±¡çš„ç±»å‹ã€‚</p><p>ç©ºæ¥å£ç±»å‹å¯¹å®ç°å®ƒçš„ç±»å‹æ²¡æœ‰è¦æ±‚ï¼Œæ‰€ä»¥å¯ä»¥å°†ä»»æ„ä¸€ä¸ªå€¼èµ‹ç»™ç©ºæ¥å£ç±»å‹ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> any <span class="keyword">interface</span>&#123;&#125;</span><br><span class="line">any = <span class="literal">true</span></span><br><span class="line">any = <span class="number">12.34</span></span><br><span class="line">any = <span class="string">"hello"</span></span><br><span class="line">any = <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>&#123;<span class="string">"one"</span>: <span class="number">1</span>&#125;</span><br><span class="line">any = <span class="built_in">new</span>(bytes.Buffer)</span><br></pre></td></tr></table></figure><p>å› ä¸ºæ¥å£ä¸å®ç°åªä¾èµ–äºåˆ¤æ–­ä¸¤ä¸ªç±»å‹çš„æ–¹æ³•ï¼Œæ‰€ä»¥æ²¡æœ‰å¿…è¦å®šä¹‰ä¸€ä¸ªå…·ä½“ç±»å‹å’Œå®ƒå®ç°çš„æ¥å£ä¹‹é—´çš„å…³ç³»ã€‚</p><hr><p>æ„Ÿè§‰ç°åœ¨çœ‹ä¹¦å­¦ä¹ æ•ˆç‡å¥½ä½ï¼Œè¿™æœ¬ä¹¦æš‚æ—¶å…ˆå‘Šä¸€æ®µè½å§ï¼</p>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> macos </tag>
            
            <tag> golang </tag>
            
            <tag> go </tag>
            
            <tag> golang note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŠGoè¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹ç¬”è®°ï¼ˆ19ï¼‰</title>
      <link href="/blog/2021/06/10/the-go-programming-language-note-19/"/>
      <url>/blog/2021/06/10/the-go-programming-language-note-19/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šgo-è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹"><a class="header-anchor" href="#ã€Šgo-è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹">#</a>ã€ŠGo è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹</h1><a id="more"></a><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> intset</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"bytes"</span></span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">@Time : 2021/6/8 15:48</span></span><br><span class="line"><span class="comment">@Author : onns</span></span><br><span class="line"><span class="comment">@File : ch6/intset/intset.go</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> platform = <span class="number">32</span> &lt;&lt; (^<span class="keyword">uint</span>(<span class="number">0</span>) &gt;&gt; <span class="number">63</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> IntSet <span class="keyword">struct</span> &#123;</span><br><span class="line">words []<span class="keyword">uint64</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *IntSet)</span> <span class="title">Has</span><span class="params">(x <span class="keyword">int</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line">word, bit := x/<span class="number">64</span>, <span class="keyword">uint</span>(x%<span class="number">64</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">len</span>(s.words) &gt; word &amp;&amp; s.words[word]&amp;(<span class="number">1</span>&lt;&lt;bit) != <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *IntSet)</span> <span class="title">Add</span><span class="params">(x <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">word, bit := x/<span class="number">64</span>, <span class="keyword">uint</span>(x%<span class="number">64</span>)</span><br><span class="line"><span class="keyword">for</span> word &gt;= <span class="built_in">len</span>(s.words) &#123;</span><br><span class="line">s.words = <span class="built_in">append</span>(s.words, <span class="number">0</span>)</span><br><span class="line">&#125;</span><br><span class="line">s.words[word] |= <span class="number">1</span> &lt;&lt; bit</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *IntSet)</span> <span class="title">UnionWith</span><span class="params">(t *IntSet)</span></span> &#123;</span><br><span class="line"><span class="keyword">for</span> i, tword := <span class="keyword">range</span> t.words &#123;</span><br><span class="line"><span class="keyword">if</span> i &lt; <span class="built_in">len</span>(s.words) &#123;</span><br><span class="line">s.words[i] |= tword</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">s.words = <span class="built_in">append</span>(s.words, tword)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *IntSet)</span> <span class="title">String</span><span class="params">()</span> <span class="title">string</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> buf bytes.Buffer</span><br><span class="line">buf.WriteByte(<span class="string">'&#123;'</span>)</span><br><span class="line"><span class="keyword">for</span> i, word := <span class="keyword">range</span> s.words &#123;</span><br><span class="line"><span class="keyword">if</span> word == <span class="number">0</span> &#123;</span><br><span class="line"><span class="keyword">continue</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> j := <span class="number">0</span>; j &lt; <span class="number">64</span>; j++ &#123;</span><br><span class="line"><span class="keyword">if</span> word&amp;(<span class="number">1</span>&lt;&lt;<span class="keyword">uint</span>(j)) != <span class="number">0</span> &#123; <span class="comment">// è¿™é‡Œä¸ºä»€ä¹ˆè¦ç”¨ uint() ?</span></span><br><span class="line"><span class="keyword">if</span> buf.Len() &gt; <span class="built_in">len</span>(<span class="string">"&#123;"</span>) &#123;</span><br><span class="line">buf.WriteByte(<span class="string">' '</span>)</span><br><span class="line">&#125;</span><br><span class="line">fmt.Fprintf(&amp;buf, <span class="string">"%d"</span>, <span class="number">64</span>*i+j)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">buf.WriteByte(<span class="string">'&#125;'</span>)</span><br><span class="line"><span class="keyword">return</span> buf.String()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *IntSet)</span> <span class="title">Len</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line">eleNum := <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> _, word := <span class="keyword">range</span> s.words &#123;</span><br><span class="line"><span class="keyword">if</span> word == <span class="number">0</span> &#123;</span><br><span class="line"><span class="keyword">continue</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> j := <span class="number">0</span>; j &lt; <span class="number">64</span>; j++ &#123;</span><br><span class="line"><span class="keyword">if</span> word&amp;(<span class="number">1</span>&lt;&lt;j) != <span class="number">0</span> &#123;</span><br><span class="line">eleNum += <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> eleNum</span><br><span class="line">&#125; <span class="comment">// return the number of elements</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(s *IntSet)</span> <span class="title">AddAll</span><span class="params">(xList ...<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line"><span class="keyword">for</span> _, x := <span class="keyword">range</span> xList &#123;</span><br><span class="line">s.Add(x)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> intset</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"testing"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">@Time : 2021/6/10 15:00</span></span><br><span class="line"><span class="comment">@Author : onns</span></span><br><span class="line"><span class="comment">@File : ch6/intset/intset_test.go</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Test</span><span class="params">(t *testing.T)</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> x, y IntSet</span><br><span class="line">x.Add(<span class="number">1</span>)</span><br><span class="line">x.Add(<span class="number">144</span>)</span><br><span class="line">x.Add(<span class="number">9</span>)</span><br><span class="line">x.AddAll(<span class="number">5</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">fmt.Println(x.String())</span><br><span class="line">fmt.Println(x.Len())</span><br><span class="line"></span><br><span class="line">y.Add(<span class="number">9</span>)</span><br><span class="line">y.Add(<span class="number">42</span>)</span><br><span class="line">fmt.Println(y.String())</span><br><span class="line">fmt.Println(y.Len())</span><br><span class="line"></span><br><span class="line">x.UnionWith(&amp;y)</span><br><span class="line">fmt.Println(x.String())</span><br><span class="line">fmt.Println(x.Has(<span class="number">9</span>), x.Has(<span class="number">123</span>))</span><br><span class="line"></span><br><span class="line">fmt.Println(&amp;x)</span><br><span class="line">fmt.Println(x.String())</span><br><span class="line">fmt.Println(x)</span><br><span class="line"></span><br><span class="line">fmt.Println(<span class="number">32</span> &lt;&lt; (^<span class="keyword">uint</span>(<span class="number">0</span>) &gt;&gt; <span class="number">63</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;1 2 3 5 9 144&#125;</span><br><span class="line">6</span><br><span class="line">&#123;9 42&#125;</span><br><span class="line">2</span><br><span class="line">&#123;1 2 3 5 9 42 144&#125;</span><br><span class="line"><span class="literal">true</span> <span class="literal">false</span></span><br><span class="line">&#123;1 2 3 5 9 42 144&#125;</span><br><span class="line">&#123;1 2 3 5 9 42 144&#125;</span><br><span class="line">&#123;[4398046511662 0 65536]&#125;</span><br><span class="line">64</span><br></pre></td></tr></table></figure><p>æœ‰å‡ ä¸ªç–‘é—®ï¼š</p><ol><li><p><code>32</code>ä½æœºå™¨ä¸‹å¯ä»¥å®šä¹‰<code>int64</code>å—ï¼Ÿè‡ªè¡Œå®ç°è¿˜æ˜¯<code>Go</code>å¸®å¿™å®ç°å‘¢ï¼Ÿ</p></li><li><p>ç»ƒä¹  6.5ï¼š æˆ‘ä»¬è¿™ç« å®šä¹‰çš„IntSeté‡Œçš„æ¯ä¸ªå­—éƒ½æ˜¯ç”¨çš„uint64ç±»å‹ï¼Œä½†æ˜¯64ä½çš„æ•°å€¼å¯èƒ½åœ¨32ä½çš„å¹³å°ä¸Šä¸é«˜æ•ˆã€‚ä¿®æ”¹ç¨‹åºï¼Œä½¿å…¶ä½¿ç”¨uintç±»å‹ï¼Œè¿™ç§ç±»å‹å¯¹äº32ä½å¹³å°æ¥è¯´æ›´åˆé€‚ã€‚å½“ç„¶äº†ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥ä¸ç”¨ç®€å•ç²—æš´åœ°é™¤64ï¼Œå¯ä»¥å®šä¹‰ä¸€ä¸ªå¸¸é‡æ¥å†³å®šæ˜¯ç”¨32è¿˜æ˜¯64ï¼Œè¿™é‡Œä½ å¯èƒ½ä¼šç”¨åˆ°å¹³å°çš„è‡ªåŠ¨åˆ¤æ–­çš„ä¸€ä¸ªæ™ºèƒ½è¡¨è¾¾å¼ï¼š32 &lt;&lt; (^uint(0) &gt;&gt; 63)<br>é‚£å®šä¹‰ç»“æ„ä½“çš„æ—¶å€™æ€ä¹ˆæ¯”è¾ƒä¼˜é›…å‘¢ï¼Ÿ</p> <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> platform = <span class="number">32</span> &lt;&lt; (^<span class="keyword">uint</span>(<span class="number">0</span>) &gt;&gt; <span class="number">63</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> platform == <span class="number">32</span> &#123;</span><br><span class="line"><span class="keyword">type</span> IntSet <span class="keyword">struct</span> &#123;</span><br><span class="line">words []<span class="keyword">uint32</span></span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">type</span> IntSet <span class="keyword">struct</span> &#123;</span><br><span class="line">words []<span class="keyword">uint64</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç±»ä¼¼è¿™ç§åº”è¯¥ä¸åˆé€‚å§ï¼Ÿ</p></li><li><p>å…¶å®æ–¹æ³•åˆ°åº•æ˜¯å’Œ<code>å¯¹è±¡æœ¬èº«</code>è¿˜æ˜¯<code>å®ƒçš„åœ°å€</code>ç»‘å®šæˆ‘è¿˜æ˜¯æœ‰ç–‘é—®ï¼Œè¿™ç§æƒ…å†µä¸‹å¯èƒ½ä¼šå†™å‡ºæ¥<code>bug</code>æˆ‘è§‰å¾—ã€‚ã€‚ã€‚</p></li></ol><h2 id="å°è£…"><a class="header-anchor" href="#å°è£…">#</a>å°è£…</h2><p><code>Go</code>è¯­è¨€åªæœ‰ä¸€ç§æ§åˆ¶å¯è§æ€§çš„æ‰‹æ®µï¼š<strong>å¤§å†™é¦–å­—æ¯çš„æ ‡è¯†ç¬¦ä¼šä»å®šä¹‰å®ƒä»¬çš„åŒ…ä¸­è¢«å¯¼å‡ºï¼Œå°å†™å­—æ¯çš„åˆ™ä¸ä¼š</strong>ã€‚è¿™ç§é™åˆ¶åŒ…å†…æˆå‘˜çš„æ–¹å¼åŒæ ·é€‚ç”¨äº<code>struct</code>æˆ–è€…ä¸€ä¸ªç±»å‹çš„æ–¹æ³•ã€‚å› è€Œå¦‚æœæƒ³è¦å°è£…ä¸€ä¸ªå¯¹è±¡ï¼Œå¿…é¡»å°†å…¶å®šä¹‰ä¸ºä¸€ä¸ª<code>struct</code>ã€‚</p><p>è¿™ç§åŸºäºåå­—çš„æ‰‹æ®µä½¿å¾—åœ¨è¯­è¨€ä¸­æœ€å°çš„å°è£…å•å…ƒæ˜¯<code>package</code>ï¼Œè€Œä¸æ˜¯åƒå…¶å®ƒè¯­è¨€ä¸€æ ·çš„ç±»å‹ã€‚</p><p>ä¸€ä¸ª<code>struct</code>ç±»å‹çš„å­—æ®µå¯¹åŒä¸€ä¸ªåŒ…çš„æ‰€æœ‰ä»£ç éƒ½æœ‰å¯è§æ€§ï¼Œæ— è®ºä½ çš„ä»£ç æ˜¯å†™åœ¨ä¸€ä¸ªå‡½æ•°è¿˜æ˜¯ä¸€ä¸ªæ–¹æ³•é‡Œã€‚</p><p>åœ¨å‘½åä¸€ä¸ª<code>getter</code>æ–¹æ³•æ—¶ï¼Œé€šå¸¸ä¼šçœç•¥æ‰å‰é¢çš„<code>Get</code>å‰ç¼€ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> log</span><br><span class="line"><span class="keyword">type</span> Logger <span class="keyword">struct</span> &#123;</span><br><span class="line">    flags  <span class="keyword">int</span></span><br><span class="line">    prefix <span class="keyword">string</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(l *Logger)</span> <span class="title">Flags</span><span class="params">()</span> <span class="title">int</span></span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(l *Logger)</span> <span class="title">SetFlags</span><span class="params">(flag <span class="keyword">int</span>)</span></span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(l *Logger)</span> <span class="title">Prefix</span><span class="params">()</span> <span class="title">string</span></span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(l *Logger)</span> <span class="title">SetPrefix</span><span class="params">(prefix <span class="keyword">string</span>)</span></span></span><br></pre></td></tr></table></figure><p><code>Go</code>çš„ç¼–ç é£æ ¼ä¸ç¦æ­¢ç›´æ¥å¯¼å‡ºå­—æ®µã€‚<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>å¯¼å‡ºæ€ä¹ˆç†è§£ï¼Ÿ <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> macos </tag>
            
            <tag> golang </tag>
            
            <tag> go </tag>
            
            <tag> golang note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŠGoè¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹ç¬”è®°ï¼ˆ18ï¼‰</title>
      <link href="/blog/2021/06/06/the-go-programming-language-note-18/"/>
      <url>/blog/2021/06/06/the-go-programming-language-note-18/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šgo-è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹"><a class="header-anchor" href="#ã€Šgo-è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹">#</a>ã€ŠGo è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹</h1><a id="more"></a><h2 id="panic-å¼‚å¸¸"><a class="header-anchor" href="#panic-å¼‚å¸¸">#</a>Panic å¼‚å¸¸</h2><h2 id="recover-æ•è·å¼‚å¸¸"><a class="header-anchor" href="#recover-æ•è·å¼‚å¸¸">#</a>Recover æ•è·å¼‚å¸¸</h2><p>çœ‹ä¸æ‡‚ã€‚ã€‚å¾…çœ‹ã€‚<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p><h1 id="æ–¹æ³•"><a class="header-anchor" href="#æ–¹æ³•">#</a>æ–¹æ³•</h1><h2 id="æ–¹æ³•å£°æ˜"><a class="header-anchor" href="#æ–¹æ³•å£°æ˜">#</a>æ–¹æ³•å£°æ˜</h2><p>åœ¨å‡½æ•°å£°æ˜æ—¶ï¼Œåœ¨å…¶åå­—ä¹‹å‰æ”¾ä¸Šä¸€ä¸ªå˜é‡ï¼Œå³æ˜¯ä¸€ä¸ªæ–¹æ³•ã€‚è¿™ä¸ªé™„åŠ çš„å‚æ•°ä¼šå°†è¯¥å‡½æ•°é™„åŠ åˆ°è¿™ç§ç±»å‹ä¸Šï¼Œå³ç›¸å½“äºä¸ºè¿™ç§ç±»å‹å®šä¹‰äº†ä¸€ä¸ªç‹¬å çš„æ–¹æ³•ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"math"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">@Time : 2021/6/6 18:57</span></span><br><span class="line"><span class="comment">@Author : onns</span></span><br><span class="line"><span class="comment">@File : ch6/geometry/geometry.go</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Point <span class="keyword">struct</span>&#123; X, Y <span class="keyword">float64</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// traditional function</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Distance</span><span class="params">(p, q Point)</span> <span class="title">float64</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> math.Hypot(q.X-p.X, q.Y-p.Y)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// same thing, but as a method of the Point type</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Point)</span> <span class="title">Distance</span><span class="params">(q Point)</span> <span class="title">float64</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> math.Hypot(q.X-p.X, q.Y-p.Y)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span> <span class="params">()</span></span> &#123;</span><br><span class="line">p := Point&#123;<span class="number">1</span>, <span class="number">2</span>&#125;</span><br><span class="line">q := Point&#123;<span class="number">4</span>, <span class="number">6</span>&#125;</span><br><span class="line">fmt.Println(Distance(p, q))</span><br><span class="line">fmt.Println(p.Distance(q))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç é‡Œé‚£ä¸ªé™„åŠ çš„å‚æ•°<code>p</code>ï¼Œå«åšæ–¹æ³•çš„æ¥æ”¶å™¨ï¼ˆreceiverï¼‰ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[18:59:54] onns@Onns ~/Onns/code/go/go-bible/ch6 $ go run geometry/geometry.go</span><br><span class="line">5</span><br><span class="line">5</span><br></pre></td></tr></table></figure><p>åœ¨<code>Go</code>è¯­è¨€ä¸­å¯ä»¥ä»»æ„çš„é€‰æ‹©æ¥æ”¶å™¨çš„åå­—ã€‚ç”±äºæ¥æ”¶å™¨çš„åå­—ç»å¸¸ä¼šè¢«ä½¿ç”¨åˆ°ï¼Œå»ºè®®æ˜¯å¯ä»¥ä½¿ç”¨å…¶ç±»å‹çš„ç¬¬ä¸€ä¸ªå­—æ¯ã€‚</p><p>åœ¨æ–¹æ³•è°ƒç”¨è¿‡ç¨‹ä¸­ï¼Œæ¥æ”¶å™¨å‚æ•°ä¸€èˆ¬ä¼šåœ¨æ–¹æ³•åä¹‹å‰å‡ºç°ã€‚</p><p>ç¬¬ä¸€ä¸ª<code>Distance</code>çš„è°ƒç”¨å®é™…ä¸Šç”¨çš„æ˜¯åŒ…çº§åˆ«çš„å‡½æ•°<code>geometry.Distance</code>ï¼Œè€Œç¬¬äºŒä¸ªåˆ™æ˜¯ä½¿ç”¨åˆšåˆšå£°æ˜çš„<code>Point</code>ï¼Œè°ƒç”¨çš„æ˜¯<code>Point</code>ç±»ä¸‹å£°æ˜çš„<code>Point.Distance</code>æ–¹æ³•ã€‚</p><p>è¿™ç§<code>p.Distance</code>çš„è¡¨è¾¾å¼å«åšé€‰æ‹©å™¨ï¼Œå› ä¸ºä»–ä¼šé€‰æ‹©åˆé€‚çš„å¯¹åº”<code>p</code>è¿™ä¸ªå¯¹è±¡çš„<code>Distance</code>æ–¹æ³•æ¥æ‰§è¡Œã€‚é€‰æ‹©å™¨ä¹Ÿä¼šè¢«ç”¨æ¥é€‰æ‹©ä¸€ä¸ª<code>struct</code>ç±»å‹çš„å­—æ®µï¼Œæ¯”å¦‚<code>p.X</code>ã€‚ç”±äºæ–¹æ³•å’Œå­—æ®µéƒ½æ˜¯åœ¨åŒä¸€å‘½åç©ºé—´ï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬åœ¨è¿™é‡Œå£°æ˜ä¸€ä¸ª<code>X</code>æ–¹æ³•çš„è¯ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼Œå› ä¸ºåœ¨è°ƒç”¨<code>p.X</code>æ—¶ä¼šæœ‰æ­§ä¹‰ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// A Path is a journey connecting the points with straight lines.</span></span><br><span class="line"><span class="keyword">type</span> Path []Point</span><br><span class="line"><span class="comment">// Distance returns the distance traveled along the path.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(path Path)</span> <span class="title">Distance</span><span class="params">()</span> <span class="title">float64</span></span> &#123;</span><br><span class="line">sum := <span class="number">0.0</span></span><br><span class="line"><span class="keyword">for</span> i := <span class="keyword">range</span> path &#123;</span><br><span class="line"><span class="keyword">if</span> i &gt; <span class="number">0</span> &#123;</span><br><span class="line">sum += path[i<span class="number">-1</span>].Distance(path[i])</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> sum</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥ç»™åŒä¸€ä¸ªåŒ…å†…çš„ä»»æ„å‘½åç±»å‹å®šä¹‰æ–¹æ³•ï¼Œåªè¦è¿™ä¸ªå‘½åç±»å‹çš„åº•å±‚ç±»å‹ä¸æ˜¯<code>æŒ‡é’ˆ</code>æˆ–è€…<code>interface</code>ã€‚</p><p>å¯¹äºä¸€ä¸ªç»™å®šçš„ç±»å‹ï¼Œå…¶å†…éƒ¨çš„æ–¹æ³•éƒ½å¿…é¡»æœ‰å”¯ä¸€çš„æ–¹æ³•åï¼Œä½†æ˜¯ä¸åŒçš„ç±»å‹å´å¯ä»¥æœ‰åŒæ ·çš„æ–¹æ³•åã€‚</p><h2 id="åŸºäºæŒ‡é’ˆå¯¹è±¡çš„æ–¹æ³•"><a class="header-anchor" href="#åŸºäºæŒ‡é’ˆå¯¹è±¡çš„æ–¹æ³•">#</a>åŸºäºæŒ‡é’ˆå¯¹è±¡çš„æ–¹æ³•</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *Point)</span> <span class="title">ScaleBy</span><span class="params">(factor <span class="keyword">float64</span>)</span></span> &#123;</span><br><span class="line">p.X *= factor</span><br><span class="line">p.Y *= factor</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ–¹æ³•çš„åå­—æ˜¯<code>(*Point).ScaleBy</code>ï¼Œè¿™é‡Œçš„æ‹¬å·æ˜¯å¿…é¡»çš„ï¼Œæ²¡æœ‰æ‹¬å·çš„è¯è¿™ä¸ªè¡¨è¾¾å¼å¯èƒ½ä¼šè¢«ç†è§£ä¸º<code>*(Point.ScaleBy)</code>ã€‚</p><p>åœ¨ç°å®çš„ç¨‹åºé‡Œï¼Œä¸€èˆ¬ä¼šçº¦å®šå¦‚æœ<code>Point</code>è¿™ä¸ªç±»æœ‰ä¸€ä¸ªæŒ‡é’ˆä½œä¸ºæ¥æ”¶å™¨çš„æ–¹æ³•ï¼Œé‚£ä¹ˆæ‰€æœ‰<code>Point</code>çš„æ–¹æ³•éƒ½å¿…é¡»æœ‰ä¸€ä¸ªæŒ‡é’ˆæ¥æ”¶å™¨ï¼Œå³ä½¿æ˜¯é‚£äº›å¹¶ä¸éœ€è¦è¿™ä¸ªæŒ‡é’ˆæ¥æ”¶å™¨çš„å‡½æ•°ã€‚</p><p>åªæœ‰ç±»å‹<code>Point</code>å’ŒæŒ‡å‘ä»–ä»¬çš„æŒ‡é’ˆ<code>(*Point)</code>ï¼Œæ‰å¯èƒ½æ˜¯å‡ºç°åœ¨æ¥æ”¶å™¨å£°æ˜é‡Œçš„ä¸¤ç§æ¥æ”¶å™¨ã€‚</p><p>ä¸ºäº†é¿å…æ­§ä¹‰ï¼Œåœ¨å£°æ˜æ–¹æ³•æ—¶ï¼Œå¦‚æœä¸€ä¸ªç±»å‹åæœ¬èº«æ˜¯ä¸€ä¸ªæŒ‡é’ˆçš„è¯ï¼Œæ˜¯ä¸å…è®¸å…¶å‡ºç°åœ¨æ¥æ”¶å™¨ä¸­çš„ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> P *<span class="keyword">int</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(P)</span> <span class="title">f</span><span class="params">()</span></span> &#123; <span class="comment">/* ... */</span> &#125; <span class="comment">// compile error: invalid receiver type</span></span><br></pre></td></tr></table></figure><p>å¦‚æœæ¥æ”¶å™¨<code>p</code>æ˜¯ä¸€ä¸ª<code>Point</code>ç±»å‹çš„å˜é‡ï¼Œå¹¶ä¸”å…¶æ–¹æ³•éœ€è¦ä¸€ä¸ª<code>Point</code>æŒ‡é’ˆä½œä¸ºæ¥æ”¶å™¨ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢è¿™ç§ç®€çŸ­çš„å†™æ³•ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p.ScaleBy(<span class="number">2</span>)</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘å™¨ä¼šéšå¼åœ°å¸®æˆ‘ä»¬ç”¨<code>&amp;p</code>å»è°ƒç”¨<code>ScaleBy</code>è¿™ä¸ªæ–¹æ³•ã€‚</p><p>ä¸èƒ½é€šè¿‡ä¸€ä¸ªæ— æ³•å–åˆ°åœ°å€çš„æ¥æ”¶å™¨æ¥è°ƒç”¨æŒ‡é’ˆæ–¹æ³•ï¼Œæ¯”å¦‚ä¸´æ—¶å˜é‡çš„å†…å­˜åœ°å€å°±æ— æ³•è·å–å¾—åˆ°ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Point&#123;<span class="number">1</span>, <span class="number">2</span>&#125;.ScaleBy(<span class="number">2</span>) <span class="comment">// compile error: can't take address of Point literal</span></span><br></pre></td></tr></table></figure><p><strong>ä¸ç®¡ä½ çš„ method çš„ receiver æ˜¯æŒ‡é’ˆç±»å‹è¿˜æ˜¯éæŒ‡é’ˆç±»å‹ï¼Œéƒ½æ˜¯å¯ä»¥é€šè¿‡æŒ‡é’ˆ/éæŒ‡é’ˆç±»å‹è¿›è¡Œè°ƒç”¨çš„ï¼Œç¼–è¯‘å™¨ä¼šå¸®ä½ åšç±»å‹è½¬æ¢ã€‚</strong></p><p><strong>åœ¨å£°æ˜ä¸€ä¸ª method çš„ receiver è¯¥æ˜¯æŒ‡é’ˆè¿˜æ˜¯éæŒ‡é’ˆç±»å‹æ—¶ï¼Œä½ éœ€è¦è€ƒè™‘ä¸¤æ–¹é¢çš„å› ç´ ï¼Œç¬¬ä¸€æ–¹é¢æ˜¯è¿™ä¸ªå¯¹è±¡æœ¬èº«æ˜¯ä¸æ˜¯ç‰¹åˆ«å¤§ï¼Œå¦‚æœå£°æ˜ä¸ºéæŒ‡é’ˆå˜é‡æ—¶ï¼Œè°ƒç”¨ä¼šäº§ç”Ÿä¸€æ¬¡æ‹·è´ï¼›ç¬¬äºŒæ–¹é¢æ˜¯å¦‚æœä½ ç”¨æŒ‡é’ˆç±»å‹ä½œä¸º receiverï¼Œé‚£ä¹ˆä½ ä¸€å®šè¦æ³¨æ„ï¼Œè¿™ç§æŒ‡é’ˆç±»å‹æŒ‡å‘çš„å§‹ç»ˆæ˜¯ä¸€å—å†…å­˜åœ°å€ï¼Œå°±ç®—ä½ å¯¹å…¶è¿›è¡Œäº†æ‹·è´ã€‚</strong></p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="https://github.com/gopl-zh/gopl-zh.github.com/blob/master/ch5/ch5-10.md" target="_blank" rel="noopener">https://github.com/gopl-zh/gopl-zh.github.com/blob/master/ch5/ch5-10.md</a> <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> macos </tag>
            
            <tag> golang </tag>
            
            <tag> go </tag>
            
            <tag> golang note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŠGoè¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹ç¬”è®°ï¼ˆ17ï¼‰</title>
      <link href="/blog/2021/06/05/the-go-programming-language-note-17/"/>
      <url>/blog/2021/06/05/the-go-programming-language-note-17/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šgo-è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹"><a class="header-anchor" href="#ã€Šgo-è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹">#</a>ã€ŠGo è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹</h1><a id="more"></a><h2 id="å¯å˜å‚æ•°"><a class="header-anchor" href="#å¯å˜å‚æ•°">#</a>å¯å˜å‚æ•°</h2><p>åœ¨å£°æ˜å¯å˜å‚æ•°å‡½æ•°æ—¶ï¼Œéœ€è¦åœ¨å‚æ•°åˆ—è¡¨çš„æœ€åä¸€ä¸ªå‚æ•°ç±»å‹ä¹‹å‰åŠ ä¸Šçœç•¥ç¬¦å·<code>...</code>ï¼Œè¿™è¡¨ç¤ºè¯¥å‡½æ•°ä¼šæ¥æ”¶ä»»æ„æ•°é‡çš„è¯¥ç±»å‹å‚æ•°ã€‚</p><p>è°ƒç”¨è€…éšå¼çš„åˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼Œå¹¶å°†åŸå§‹å‚æ•°å¤åˆ¶åˆ°æ•°ç»„ä¸­ï¼Œå†æŠŠæ•°ç»„çš„ä¸€ä¸ªåˆ‡ç‰‡ä½œä¸ºå‚æ•°ä¼ ç»™è¢«è°ƒç”¨å‡½æ•°ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">@Time : 2021/6/5 16:04</span></span><br><span class="line"><span class="comment">@Author : onns</span></span><br><span class="line"><span class="comment">@File : ch5/sum/sum.go</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sum</span><span class="params">(vals ...<span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">total := <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> _, val := <span class="keyword">range</span> vals &#123;</span><br><span class="line">total += val</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> total</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f</span><span class="params">(...<span class="keyword">int</span>)</span></span> &#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">g</span><span class="params">([]<span class="keyword">int</span>)</span></span>  &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">fmt.Println(sum())</span><br><span class="line">fmt.Println(sum(<span class="number">3</span>))</span><br><span class="line">fmt.Println(sum(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>))</span><br><span class="line"></span><br><span class="line">values := []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line">fmt.Println(sum(values...))</span><br><span class="line"></span><br><span class="line">fmt.Printf(<span class="string">"%T\n"</span>, f)</span><br><span class="line">fmt.Printf(<span class="string">"%T\n"</span>, g)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[16:13:49] onns@Onns ~/Onns/code/go/go-bible/ch5 $ go run sum/sum.go</span><br><span class="line">0</span><br><span class="line">3</span><br><span class="line">10</span><br><span class="line">10</span><br><span class="line">func(...int)</span><br><span class="line">func([]int)</span><br></pre></td></tr></table></figure><p>å¦‚æœåŸå§‹å‚æ•°å·²ç»æ˜¯åˆ‡ç‰‡ç±»å‹ï¼Œåªéœ€åœ¨æœ€åä¸€ä¸ªå‚æ•°ååŠ ä¸Šçœç•¥ç¬¦ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">values := []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line">fmt.Println(sum(values...))</span><br></pre></td></tr></table></figure><p>è™½ç„¶åœ¨å¯å˜å‚æ•°å‡½æ•°å†…éƒ¨ï¼Œ<code>...int</code>å‹å‚æ•°çš„è¡Œä¸ºçœ‹èµ·æ¥å¾ˆåƒåˆ‡ç‰‡ç±»å‹ï¼Œä½†å®é™…ä¸Šï¼Œå¯å˜å‚æ•°å‡½æ•°å’Œä»¥åˆ‡ç‰‡ä½œä¸ºå‚æ•°çš„å‡½æ•°<code>æ˜¯ä¸åŒçš„</code>ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f</span><span class="params">(...<span class="keyword">int</span>)</span></span> &#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">g</span><span class="params">([]<span class="keyword">int</span>)</span></span> &#123;&#125;</span><br><span class="line">fmt.Printf(<span class="string">"%T\n"</span>, f) <span class="comment">// "func(...int)"</span></span><br><span class="line">fmt.Printf(<span class="string">"%T\n"</span>, g) <span class="comment">// "func([]int)"</span></span><br></pre></td></tr></table></figure><blockquote><p>è®¸å¤šæ–‡ä»¶ç³»ç»Ÿï¼Œå°¤å…¶æ˜¯NFSï¼Œå†™å…¥æ–‡ä»¶æ—¶å‘ç”Ÿçš„é”™è¯¯ä¼šè¢«å»¶è¿Ÿåˆ°æ–‡ä»¶å…³é—­æ—¶åé¦ˆã€‚å¦‚æœæ²¡æœ‰æ£€æŸ¥æ–‡ä»¶å…³é—­æ—¶çš„åé¦ˆä¿¡æ¯ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±ï¼Œè€Œæˆ‘ä»¬è¿˜è¯¯ä»¥ä¸ºå†™å…¥æ“ä½œæˆåŠŸã€‚å¦‚æœio.Copyå’Œf.closeéƒ½å¤±è´¥äº†ï¼Œæˆ‘ä»¬å€¾å‘äºå°†io.Copyçš„é”™è¯¯ä¿¡æ¯åé¦ˆç»™è°ƒç”¨è€…ï¼Œå› ä¸ºå®ƒå…ˆäºf.closeå‘ç”Ÿï¼Œæ›´æœ‰å¯èƒ½æ¥è¿‘é—®é¢˜çš„æœ¬è´¨ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> macos </tag>
            
            <tag> golang </tag>
            
            <tag> go </tag>
            
            <tag> golang note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŠGoè¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹ç¬”è®°ï¼ˆ16ï¼‰</title>
      <link href="/blog/2021/06/02/the-go-programming-language-note-16/"/>
      <url>/blog/2021/06/02/the-go-programming-language-note-16/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šgo-è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹"><a class="header-anchor" href="#ã€Šgo-è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹">#</a>ã€ŠGo è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹</h1><a id="more"></a><h2 id="åŒ¿åå‡½æ•°"><a class="header-anchor" href="#åŒ¿åå‡½æ•°">#</a>åŒ¿åå‡½æ•°</h2><p>æ‹¥æœ‰å‡½æ•°åçš„å‡½æ•°åªèƒ½åœ¨åŒ…çº§è¯­æ³•å—ä¸­è¢«å£°æ˜ï¼Œé€šè¿‡<code>å‡½æ•°å­—é¢é‡</code>ï¼ˆfunction literalï¼‰ï¼Œæˆ‘ä»¬å¯ç»•è¿‡è¿™ä¸€é™åˆ¶ï¼Œåœ¨ä»»ä½•è¡¨è¾¾å¼ä¸­è¡¨ç¤ºä¸€ä¸ªå‡½æ•°å€¼ã€‚</p><p>å‡½æ•°å€¼å­—é¢é‡æ˜¯ä¸€ç§è¡¨è¾¾å¼ï¼Œå®ƒçš„å€¼è¢«ç§°ä¸º<code>åŒ¿åå‡½æ•°</code>ï¼ˆanonymous functionï¼‰ã€‚</p><p>å‡½æ•°å­—é¢é‡å…è®¸æˆ‘ä»¬åœ¨ä½¿ç”¨å‡½æ•°æ—¶ï¼Œå†å®šä¹‰å®ƒã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">@Time : 2021/6/2 13:36</span></span><br><span class="line"><span class="comment">@Author : onns</span></span><br><span class="line"><span class="comment">@File : ch5/5.2.go</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">squares</span><span class="params">()</span> <span class="title">func</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> x <span class="keyword">int</span></span><br><span class="line"><span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">()</span> <span class="title">int</span></span> &#123;</span><br><span class="line">x += <span class="number">2</span></span><br><span class="line"><span class="keyword">return</span> x * x</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">f := squares()</span><br><span class="line">fmt.Println(f())</span><br><span class="line">fmt.Println(f())</span><br><span class="line">fmt.Println(f())</span><br><span class="line">fmt.Println(f())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[13:36:09] onns@Onns ~/Onns/code/go/go-bible/ch5 $ go run 5.2.go </span><br><span class="line">4</span><br><span class="line">16</span><br><span class="line">36</span><br><span class="line">64</span><br></pre></td></tr></table></figure><blockquote><p><code>squares</code>çš„ä¾‹å­è¯æ˜ï¼Œå‡½æ•°å€¼ä¸ä»…ä»…æ˜¯ä¸€ä¸²ä»£ç ï¼Œè¿˜è®°å½•äº†çŠ¶æ€ã€‚åœ¨<code>squares</code>ä¸­å®šä¹‰çš„åŒ¿åå†…éƒ¨å‡½æ•°å¯ä»¥è®¿é—®å’Œæ›´æ–°<code>squares</code>ä¸­çš„å±€éƒ¨å˜é‡ï¼Œè¿™æ„å‘³ç€åŒ¿åå‡½æ•°å’Œ<code>squares</code>ä¸­ï¼Œå­˜åœ¨å˜é‡å¼•ç”¨ã€‚è¿™å°±æ˜¯å‡½æ•°å€¼å±äºå¼•ç”¨ç±»å‹å’Œå‡½æ•°å€¼ä¸å¯æ¯”è¾ƒçš„åŸå› ã€‚<code>Go</code>ä½¿ç”¨é—­åŒ…ï¼ˆ<code>closures</code>ï¼‰æŠ€æœ¯å®ç°å‡½æ•°å€¼ï¼Œ<code>Go</code>ç¨‹åºå‘˜ä¹ŸæŠŠå‡½æ•°å€¼å«åšé—­åŒ…ã€‚</p></blockquote><p>å½“åŒ¿åå‡½æ•°éœ€è¦è¢«é€’å½’è°ƒç”¨æ—¶ï¼Œå¿…é¡»é¦–å…ˆå£°æ˜ä¸€ä¸ªå˜é‡ï¼Œå†å°†åŒ¿åå‡½æ•°èµ‹å€¼ç»™è¿™ä¸ªå˜é‡ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"sort"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">@Time : 2021/6/2 13:46</span></span><br><span class="line"><span class="comment">@Author : onns</span></span><br><span class="line"><span class="comment">@File : ch5/5.3.go</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// prereqsè®°å½•äº†æ¯ä¸ªè¯¾ç¨‹çš„å‰ç½®è¯¾ç¨‹</span></span><br><span class="line"><span class="keyword">var</span> prereqs = <span class="keyword">map</span>[<span class="keyword">string</span>][]<span class="keyword">string</span>&#123;</span><br><span class="line"><span class="string">"algorithms"</span>:            &#123;<span class="string">"data structures"</span>&#125;,</span><br><span class="line"><span class="string">"calculus"</span>:              &#123;<span class="string">"linear algebra"</span>&#125;,</span><br><span class="line"><span class="string">"compilers"</span>:             &#123;<span class="string">"data structures"</span>, <span class="string">"formal languages"</span>, <span class="string">"computer organization"</span>&#125;,</span><br><span class="line"><span class="string">"data structures"</span>:       &#123;<span class="string">"discrete math"</span>&#125;,</span><br><span class="line"><span class="string">"databases"</span>:             &#123;<span class="string">"data structures"</span>&#125;,</span><br><span class="line"><span class="string">"discrete math"</span>:         &#123;<span class="string">"intro to programming"</span>&#125;,</span><br><span class="line"><span class="string">"formal languages"</span>:      &#123;<span class="string">"discrete math"</span>&#125;,</span><br><span class="line"><span class="string">"networks"</span>:              &#123;<span class="string">"operating systems"</span>&#125;,</span><br><span class="line"><span class="string">"operating systems"</span>:     &#123;<span class="string">"data structures"</span>, <span class="string">"computer organization"</span>&#125;,</span><br><span class="line"><span class="string">"programming languages"</span>: &#123;<span class="string">"data structures"</span>, <span class="string">"computer organization"</span>&#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">topoSort</span><span class="params">(m <span class="keyword">map</span>[<span class="keyword">string</span>][]<span class="keyword">string</span>)</span> []<span class="title">string</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> order []<span class="keyword">string</span></span><br><span class="line">seen := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">bool</span>)</span><br><span class="line"><span class="keyword">var</span> learn <span class="function"><span class="keyword">func</span><span class="params">(items []<span class="keyword">string</span>)</span></span></span><br><span class="line">learn = <span class="function"><span class="keyword">func</span><span class="params">(items []<span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line"><span class="keyword">for</span> _, item := <span class="keyword">range</span> items &#123;</span><br><span class="line"><span class="keyword">if</span> !seen[item] &#123;</span><br><span class="line">seen[item] = <span class="literal">true</span></span><br><span class="line">learn(m[item])</span><br><span class="line">order = <span class="built_in">append</span>(order, item)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> keys []<span class="keyword">string</span></span><br><span class="line"><span class="keyword">for</span> key := <span class="keyword">range</span> m &#123;</span><br><span class="line">keys = <span class="built_in">append</span>(keys, key)</span><br><span class="line">&#125;</span><br><span class="line">sort.Strings(keys)</span><br><span class="line">learn(keys)</span><br><span class="line"><span class="keyword">return</span> order</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">for</span> i, course := <span class="keyword">range</span> topoSort(prereqs) &#123;</span><br><span class="line">fmt.Printf(<span class="string">"%d:\t%s\n"</span>, i+<span class="number">1</span>, course)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[14:45:42] onns@Onns ~/Onns/code/go/go-bible/ch5 $ go run 5.3.go</span><br><span class="line">1:      intro to programming</span><br><span class="line">2:      discrete math</span><br><span class="line">3:      data structures</span><br><span class="line">4:      algorithms</span><br><span class="line">5:      linear algebra</span><br><span class="line">6:      calculus</span><br><span class="line">7:      formal languages</span><br><span class="line">8:      computer organization</span><br><span class="line">9:      compilers</span><br><span class="line">10:     databases</span><br><span class="line">11:     operating systems</span><br><span class="line">12:     networks</span><br><span class="line">13:     programming languages</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"strconv"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">@Time : 2021/6/2 16:17</span></span><br><span class="line"><span class="comment">@Author : onns</span></span><br><span class="line"><span class="comment">@File : ch5/itertest/main.go</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">createdir</span><span class="params">(s <span class="keyword">int</span>, _ <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">fmt.Println(<span class="string">"Create "</span> + strconv.Itoa((s)))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">removedir</span><span class="params">(s <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">fmt.Println(<span class="string">"Remove "</span> + strconv.Itoa((s)))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">tempList := []<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>&#125;</span><br><span class="line"><span class="keyword">var</span> rmdirs []<span class="function"><span class="keyword">func</span><span class="params">()</span></span></span><br><span class="line"><span class="keyword">for</span> _, d := <span class="keyword">range</span> tempList &#123;</span><br><span class="line">dir := d</span><br><span class="line">createdir(dir, <span class="number">0755</span>)</span><br><span class="line">rmdirs = <span class="built_in">append</span>(rmdirs, <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">removedir(dir)</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> _, rmdir := <span class="keyword">range</span> rmdirs &#123;</span><br><span class="line">rmdir()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> _, dir := <span class="keyword">range</span> tempList &#123;</span><br><span class="line">createdir(dir, <span class="number">0755</span>)</span><br><span class="line">rmdirs = <span class="built_in">append</span>(rmdirs, <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">removedir(dir)</span><br><span class="line">&#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> _, rmdir := <span class="keyword">range</span> rmdirs &#123;</span><br><span class="line">rmdir()</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">[16:27:50] onns@Onns ~/Onns/code/go/go-bible/ch5/itertest $ ./itertest</span><br><span class="line">Create 1</span><br><span class="line">Create 2</span><br><span class="line">Create 3</span><br><span class="line">Create 4</span><br><span class="line">Create 5</span><br><span class="line">Create 6</span><br><span class="line">Create 7</span><br><span class="line">Remove 1</span><br><span class="line">Remove 2</span><br><span class="line">Remove 3</span><br><span class="line">Remove 4</span><br><span class="line">Remove 5</span><br><span class="line">Remove 6</span><br><span class="line">Remove 7</span><br><span class="line">Create 1</span><br><span class="line">Create 2</span><br><span class="line">Create 3</span><br><span class="line">Create 4</span><br><span class="line">Create 5</span><br><span class="line">Create 6</span><br><span class="line">Create 7</span><br><span class="line">Remove 1</span><br><span class="line">Remove 2</span><br><span class="line">Remove 3</span><br><span class="line">Remove 4</span><br><span class="line">Remove 5</span><br><span class="line">Remove 6</span><br><span class="line">Remove 7</span><br><span class="line">Remove 7</span><br><span class="line">Remove 7</span><br><span class="line">Remove 7</span><br><span class="line">Remove 7</span><br><span class="line">Remove 7</span><br><span class="line">Remove 7</span><br><span class="line">Remove 7</span><br></pre></td></tr></table></figure><blockquote><p>é—®é¢˜çš„åŸå› åœ¨äºå¾ªç¯å˜é‡çš„ä½œç”¨åŸŸã€‚åœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼Œforå¾ªç¯è¯­å¥å¼•å…¥äº†æ–°çš„è¯æ³•å—ï¼Œå¾ªç¯å˜é‡diråœ¨è¿™ä¸ªè¯æ³•å—ä¸­è¢«å£°æ˜ã€‚åœ¨è¯¥å¾ªç¯ä¸­ç”Ÿæˆçš„æ‰€æœ‰å‡½æ•°å€¼éƒ½å…±äº«ç›¸åŒçš„å¾ªç¯å˜é‡ã€‚éœ€è¦æ³¨æ„ï¼Œ**å‡½æ•°å€¼ä¸­è®°å½•çš„æ˜¯å¾ªç¯å˜é‡çš„å†…å­˜åœ°å€ï¼Œè€Œä¸æ˜¯å¾ªç¯å˜é‡æŸä¸€æ—¶åˆ»çš„å€¼ã€‚**ä»¥dirä¸ºä¾‹ï¼Œåç»­çš„è¿­ä»£ä¼šä¸æ–­æ›´æ–°dirçš„å€¼ï¼Œå½“åˆ é™¤æ“ä½œæ‰§è¡Œæ—¶ï¼Œforå¾ªç¯å·²å®Œæˆï¼Œdirä¸­å­˜å‚¨çš„å€¼ç­‰äºæœ€åä¸€æ¬¡è¿­ä»£çš„å€¼ã€‚è¿™æ„å‘³ç€ï¼Œæ¯æ¬¡å¯¹os.RemoveAllçš„è°ƒç”¨åˆ é™¤çš„éƒ½æ˜¯ç›¸åŒçš„ç›®å½•ã€‚<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p></blockquote><p>é€šå¸¸ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬ä¼šå¼•å…¥ä¸€ä¸ªä¸å¾ªç¯å˜é‡åŒåçš„å±€éƒ¨å˜é‡ï¼Œä½œä¸ºå¾ªç¯å˜é‡çš„å‰¯æœ¬ã€‚æ¯”å¦‚ä¸‹é¢çš„å˜é‡dirï¼Œè™½ç„¶è¿™çœ‹èµ·æ¥å¾ˆå¥‡æ€ªï¼Œä½†å´å¾ˆæœ‰ç”¨ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> _, dir := <span class="keyword">range</span> tempDirs() &#123;</span><br><span class="line">dir := dir <span class="comment">// declares inner dir, initialized to outer dir</span></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>å¥½å¥‡ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™æ ·çš„æƒ…å†µï¼Ÿ <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> macos </tag>
            
            <tag> golang </tag>
            
            <tag> go </tag>
            
            <tag> golang note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®©VLC Media Playeræ”¯æŒæ¯«ç§’</title>
      <link href="/blog/2021/05/22/vlc-millisecond-support/"/>
      <url>/blog/2021/05/22/vlc-millisecond-support/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a class="header-anchor" href="#å‰è¨€">#</a>å‰è¨€</h2><p>ä¸ºäº†åˆ¶ä½œä¸€ä¸ªè§†é¢‘æ ‡æ³¨å·¥å…·ï¼Œéœ€è¦è§†é¢‘æ’­æ”¾å™¨ï¼Œé€‰å–<code>VLC Media Player</code>ï¼Œå®ƒè™½ç„¶å¯ä»¥é€šè¿‡<code>web</code>æ§åˆ¶ä½†æ˜¯ä¸èƒ½æ˜¾ç¤ºæ¯«ç§’ï¼Œä¸ºäº†ç²¾ç»†åŒ–æ ‡æ³¨ï¼Œè‚¯å®šæ˜¯è¦è§£å†³è¿™ä¸ªé—®é¢˜çš„ï¼Œè®°å½•ä¹‹ã€‚</p><a id="more"></a><h2 id="åŠæ³•"><a class="header-anchor" href="#åŠæ³•">#</a>åŠæ³•</h2><p>å—åˆ°ä¸€ä¸ªæ’ä»¶çš„å¯å‘ï¼Œä¿®æ”¹ vlc çš„æºä»£ç å³å¯ã€‚</p><p>æ‰¾åˆ°<code>D:\Program Files\VideoLAN\VLC\lua\http\requests</code>æ–‡ä»¶å¤¹ä¸‹çš„<code>status.xml</code>æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">print('<span class="tag">&lt;<span class="name">root</span>&gt;</span>\n')</span><br><span class="line">print('<span class="tag">&lt;<span class="name">onnstime</span>&gt;</span>'..(vlc.var.get(vlc.object.input(),"time")/1000000)..'<span class="tag">&lt;/<span class="name">onnstime</span>&gt;</span>')</span><br><span class="line">print('<span class="tag">&lt;<span class="name">onnslength</span>&gt;</span>'..(vlc.var.get(vlc.object.input(),"length")/1000000)..'<span class="tag">&lt;/<span class="name">onnslength</span>&gt;</span>')</span><br><span class="line">httprequests.printTableAsXml(statusTable,0)</span><br></pre></td></tr></table></figure><p>å› ä¸ºæ–‡æ¡£ä¸å¥å…¨ï¼Œæˆ‘æ˜¯ä¸€ç‚¹ç‚¹è¯•å‡ºæ¥çš„= =ï¼Œå®Œæˆã€‚</p><h2 id="ç›¸å…³é“¾æ¥"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥">#</a>ç›¸å…³é“¾æ¥</h2><ul><li><a href="https://addons.videolan.org/p/1154013/" target="_blank" rel="noopener">Jump to time Previous frame v3</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> try </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vlc </tag>
            
            <tag> lua </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŠGoè¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹ç¬”è®°ï¼ˆ15ï¼‰</title>
      <link href="/blog/2021/05/20/the-go-programming-language-note-15/"/>
      <url>/blog/2021/05/20/the-go-programming-language-note-15/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šgo-è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹"><a class="header-anchor" href="#ã€Šgo-è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹">#</a>ã€ŠGo è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹</h1><a id="more"></a><p>è™½ç„¶<code>Go</code>çš„åƒåœ¾å›æ”¶æœºåˆ¶ä¼šå›æ”¶ä¸è¢«ä½¿ç”¨çš„å†…å­˜ï¼Œä½†æ˜¯è¿™ä¸åŒ…æ‹¬æ“ä½œç³»ç»Ÿå±‚é¢çš„èµ„æºï¼Œæ¯”å¦‚æ‰“å¼€çš„æ–‡ä»¶ã€ç½‘ç»œè¿æ¥ã€‚å› æ­¤æˆ‘ä»¬å¿…é¡»æ˜¾å¼çš„é‡Šæ”¾è¿™äº›èµ„æºã€‚</p><p>å¦‚æœä¸€ä¸ªå‡½æ•°æ‰€æœ‰çš„è¿”å›å€¼éƒ½æœ‰æ˜¾å¼çš„å˜é‡åï¼Œé‚£ä¹ˆè¯¥å‡½æ•°çš„<code>return</code>è¯­å¥å¯ä»¥çœç•¥æ“ä½œæ•°ã€‚</p><p>ä¸å®œè¿‡åº¦ä½¿ç”¨<code>bare return</code>ã€‚</p><p><code>error</code>ç±»å‹å¯èƒ½æ˜¯<code>nil</code>æˆ–è€…<code>non-nil</code>ã€‚<code>nil</code>æ„å‘³ç€å‡½æ•°è¿è¡ŒæˆåŠŸï¼Œ<code>non-nil</code>è¡¨ç¤ºå¤±è´¥ã€‚</p><p>å¯¹äº<code>non-nil</code>çš„<code>error</code>ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨<code>error</code>çš„<code>Error</code>å‡½æ•°æˆ–è€…è¾“å‡ºå‡½æ•°è·å¾—å­—ç¬¦ä¸²ç±»å‹çš„é”™è¯¯ä¿¡æ¯ã€‚</p><blockquote><p>é€šå¸¸ï¼Œå½“å‡½æ•°è¿”å› non-nil çš„ error æ—¶ï¼Œå…¶ä»–çš„è¿”å›å€¼æ˜¯æœªå®šä¹‰çš„ï¼ˆundefinedï¼‰ï¼Œè¿™äº›æœªå®šä¹‰çš„è¿”å›å€¼åº”è¯¥è¢«å¿½ç•¥ã€‚ç„¶è€Œï¼Œæœ‰å°‘éƒ¨åˆ†å‡½æ•°åœ¨å‘ç”Ÿé”™è¯¯æ—¶ï¼Œä»ç„¶ä¼šè¿”å›ä¸€äº›æœ‰ç”¨çš„è¿”å›å€¼ã€‚æ¯”å¦‚ï¼Œå½“è¯»å–æ–‡ä»¶å‘ç”Ÿé”™è¯¯æ—¶ï¼ŒRead å‡½æ•°ä¼šè¿”å›å¯ä»¥è¯»å–çš„å­—èŠ‚æ•°ä»¥åŠé”™è¯¯ä¿¡æ¯ã€‚å¯¹äºè¿™ç§æƒ…å†µï¼Œæ­£ç¡®çš„å¤„ç†æ–¹å¼åº”è¯¥æ˜¯å…ˆå¤„ç†è¿™äº›ä¸å®Œæ•´çš„æ•°æ®ï¼Œå†å¤„ç†é”™è¯¯ã€‚å› æ­¤å¯¹å‡½æ•°çš„è¿”å›å€¼è¦æœ‰æ¸…æ™°çš„è¯´æ˜ï¼Œä»¥ä¾¿äºå…¶ä»–äººä½¿ç”¨ã€‚</p></blockquote><p>å››ç§é”™è¯¯å¤„ç†æ–¹å¼ï¼š</p><ol><li><strong>ä¼ æ’­é”™è¯¯</strong>ã€‚è¿™æ„å‘³ç€å‡½æ•°ä¸­æŸä¸ªå­ç¨‹åºçš„å¤±è´¥ï¼Œä¼šå˜æˆè¯¥å‡½æ•°çš„å¤±è´¥ã€‚</li><li><strong>é‡è¯•</strong>ã€‚å¦‚æœé”™è¯¯çš„å‘ç”Ÿæ˜¯å¶ç„¶æ€§çš„ï¼Œæˆ–ç”±ä¸å¯é¢„çŸ¥çš„é—®é¢˜å¯¼è‡´çš„ã€‚ä¸€ä¸ªæ˜æ™ºçš„é€‰æ‹©æ˜¯é‡æ–°å°è¯•å¤±è´¥çš„æ“ä½œã€‚åœ¨é‡è¯•æ—¶ï¼Œæˆ‘ä»¬éœ€è¦é™åˆ¶é‡è¯•çš„æ—¶é—´é—´éš”æˆ–é‡è¯•çš„æ¬¡æ•°ï¼Œé˜²æ­¢æ— é™åˆ¶çš„é‡è¯•ã€‚</li><li><strong>è¾“å‡ºé”™è¯¯ä¿¡æ¯å¹¶ç»“æŸç¨‹åº</strong>ã€‚å¦‚æœé”™è¯¯å‘ç”Ÿåï¼Œç¨‹åºæ— æ³•ç»§ç»­è¿è¡Œï¼Œæˆ‘ä»¬å°±å¯ä»¥é‡‡ç”¨ç¬¬ä¸‰ç§ç­–ç•¥ï¼šè¾“å‡ºé”™è¯¯ä¿¡æ¯å¹¶ç»“æŸç¨‹åºã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ç§ç­–ç•¥åªåº”åœ¨ main ä¸­æ‰§è¡Œã€‚å¯¹åº“å‡½æ•°è€Œè¨€ï¼Œåº”ä»…å‘ä¸Šä¼ æ’­é”™è¯¯ï¼Œé™¤éè¯¥é”™è¯¯æ„å‘³ç€ç¨‹åºå†…éƒ¨åŒ…å«ä¸ä¸€è‡´æ€§ï¼Œå³é‡åˆ°äº† bugï¼Œæ‰èƒ½åœ¨åº“å‡½æ•°ä¸­ç»“æŸç¨‹åºã€‚</li><li><strong>è¾“å‡ºé”™è¯¯ä¿¡æ¯</strong>ã€‚ç¨‹åºç»§ç»­è¿è¡Œã€‚</li><li><strong>å¿½ç•¥é”™è¯¯</strong>ã€‚</li></ol><p><code>log</code>ä¸­çš„æ‰€æœ‰å‡½æ•°ï¼Œéƒ½é»˜è®¤ä¼šåœ¨é”™è¯¯ä¿¡æ¯ä¹‹å‰è¾“å‡ºæ—¶é—´ä¿¡æ¯ã€‚</p><p>åœ¨<code>Go</code>ä¸­ï¼Œé”™è¯¯å¤„ç†æœ‰ä¸€å¥—ç‹¬ç‰¹çš„ç¼–ç é£æ ¼ã€‚æ£€æŸ¥æŸä¸ªå­å‡½æ•°æ˜¯å¦å¤±è´¥åï¼Œæˆ‘ä»¬é€šå¸¸å°†å¤„ç†å¤±è´¥çš„é€»è¾‘ä»£ç æ”¾åœ¨å¤„ç†æˆåŠŸçš„ä»£ç ä¹‹å‰ã€‚å¦‚æœæŸä¸ªé”™è¯¯ä¼šå¯¼è‡´å‡½æ•°è¿”å›ï¼Œé‚£ä¹ˆæˆåŠŸæ—¶çš„é€»è¾‘ä»£ç ä¸åº”æ”¾åœ¨<code>else</code>è¯­å¥å—ä¸­ï¼Œè€Œåº”ç›´æ¥æ”¾åœ¨å‡½æ•°ä½“ä¸­ã€‚<code>Go</code>ä¸­å¤§éƒ¨åˆ†å‡½æ•°çš„ä»£ç ç»“æ„å‡ ä¹ç›¸åŒï¼Œé¦–å…ˆæ˜¯ä¸€ç³»åˆ—çš„åˆå§‹æ£€æŸ¥ï¼Œé˜²æ­¢é”™è¯¯å‘ç”Ÿï¼Œä¹‹åæ˜¯å‡½æ•°çš„å®é™…é€»è¾‘ã€‚</p><h2 id="å‡½æ•°å€¼"><a class="header-anchor" href="#å‡½æ•°å€¼">#</a>å‡½æ•°å€¼</h2><p>å‡½æ•°åƒå…¶ä»–å€¼ä¸€æ ·ï¼Œæ‹¥æœ‰ç±»å‹ï¼Œå¯ä»¥è¢«èµ‹å€¼ç»™å…¶ä»–å˜é‡ï¼Œä¼ é€’ç»™å‡½æ•°ï¼Œä»å‡½æ•°è¿”å›ã€‚å¯¹å‡½æ•°å€¼ï¼ˆfunction valueï¼‰çš„è°ƒç”¨ç±»ä¼¼å‡½æ•°è°ƒç”¨ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">@Time : 2021/5/20 20:29</span></span><br><span class="line"><span class="comment">@Author : onns</span></span><br><span class="line"><span class="comment">@File : ch5/5.1.go</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">square</span><span class="params">(n <span class="keyword">int</span>)</span> <span class="title">int</span></span>     &#123; <span class="keyword">return</span> n * n &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">negative</span><span class="params">(n <span class="keyword">int</span>)</span> <span class="title">int</span></span>   &#123; <span class="keyword">return</span> -n &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">product</span><span class="params">(m, n <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123; <span class="keyword">return</span> m * n &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">f := square</span><br><span class="line">fmt.Println(f(<span class="number">3</span>)) <span class="comment">// "9"</span></span><br><span class="line"></span><br><span class="line">f = negative</span><br><span class="line">fmt.Println(f(<span class="number">3</span>))     <span class="comment">// "-3"</span></span><br><span class="line">fmt.Printf(<span class="string">"%T\n"</span>, f) <span class="comment">// "func(int) int"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// f = product // compile error: can't assign func(int, int) int to func(int) int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[20:30:24] onns@Onns ~/Onns/code/go/go-bible/ch5 $ go run 5.1.go</span><br><span class="line">9</span><br><span class="line">-3</span><br><span class="line">func(int) int</span><br></pre></td></tr></table></figure><p>å‡½æ•°ç±»å‹çš„é›¶å€¼æ˜¯<code>nil</code>ã€‚è°ƒç”¨å€¼ä¸º<code>nil</code>çš„å‡½æ•°å€¼ä¼šå¼•èµ·<code>panic</code>é”™è¯¯ã€‚</p><p>å‡½æ•°å€¼å¯ä»¥ä¸<code>nil</code>æ¯”è¾ƒï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> f <span class="function"><span class="keyword">func</span><span class="params">(<span class="keyword">int</span>)</span> <span class="title">int</span></span></span><br><span class="line"><span class="keyword">if</span> f != <span class="literal">nil</span> &#123;</span><br><span class="line">f(<span class="number">3</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯å‡½æ•°å€¼ä¹‹é—´æ˜¯ä¸å¯æ¯”è¾ƒçš„ï¼Œä¹Ÿä¸èƒ½ç”¨å‡½æ•°å€¼ä½œä¸º<code>map</code>çš„<code>key</code>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> macos </tag>
            
            <tag> golang </tag>
            
            <tag> go </tag>
            
            <tag> golang note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŠGoè¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹ç¬”è®°ï¼ˆ14ï¼‰</title>
      <link href="/blog/2021/05/14/the-go-programming-language-note-14/"/>
      <url>/blog/2021/05/14/the-go-programming-language-note-14/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šgo-è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹"><a class="header-anchor" href="#ã€Šgo-è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹">#</a>ã€ŠGo è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹</h1><a id="more"></a><h2 id="å‡½æ•°å£°æ˜"><a class="header-anchor" href="#å‡½æ•°å£°æ˜">#</a>å‡½æ•°å£°æ˜</h2><p>å‡½æ•°å£°æ˜åŒ…æ‹¬å‡½æ•°åã€å½¢å¼å‚æ•°åˆ—è¡¨ã€è¿”å›å€¼åˆ—è¡¨ï¼ˆå¯çœç•¥ï¼‰ä»¥åŠå‡½æ•°ä½“ã€‚</p><p>å¦‚æœä¸€ä¸ªå‡½æ•°å£°æ˜ä¸åŒ…æ‹¬è¿”å›å€¼åˆ—è¡¨ï¼Œé‚£ä¹ˆå‡½æ•°ä½“æ‰§è¡Œå®Œæ¯•åï¼Œä¸ä¼šè¿”å›ä»»ä½•å€¼ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">name</span><span class="params">(parameter-list)</span> <span class="params">(result-list)</span></span> &#123;</span><br><span class="line">body</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿”å›å€¼ä¹Ÿå¯ä»¥åƒå½¢å¼å‚æ•°ä¸€æ ·è¢«å‘½åã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ¯ä¸ªè¿”å›å€¼è¢«å£°æ˜æˆä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œå¹¶æ ¹æ®è¯¥è¿”å›å€¼çš„ç±»å‹ï¼Œå°†å…¶åˆå§‹åŒ–ä¸ºè¯¥ç±»å‹çš„é›¶å€¼ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(x <span class="keyword">int</span>, y <span class="keyword">int</span>)</span> <span class="title">int</span></span>   &#123;<span class="keyword">return</span> x + y&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sub</span><span class="params">(x, y <span class="keyword">int</span>)</span> <span class="params">(z <span class="keyword">int</span>)</span></span>   &#123; z = x - y; <span class="keyword">return</span>&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">first</span><span class="params">(x <span class="keyword">int</span>, _ <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123; <span class="keyword">return</span> x &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">zero</span><span class="params">(<span class="keyword">int</span>, <span class="keyword">int</span>)</span> <span class="title">int</span></span>      &#123; <span class="keyword">return</span> <span class="number">0</span> &#125;</span><br><span class="line"></span><br><span class="line">fmt.Printf(<span class="string">"%T\n"</span>, add)   <span class="comment">// "func(int, int) int"</span></span><br><span class="line">fmt.Printf(<span class="string">"%T\n"</span>, sub)   <span class="comment">// "func(int, int) int"</span></span><br><span class="line">fmt.Printf(<span class="string">"%T\n"</span>, first) <span class="comment">// "func(int, int) int"</span></span><br><span class="line">fmt.Printf(<span class="string">"%T\n"</span>, zero)  <span class="comment">// "func(int, int) int"</span></span><br></pre></td></tr></table></figure><p><code>_</code>å¯ä»¥å¼ºè°ƒæŸä¸ªå‚æ•°æœªè¢«ä½¿ç”¨ã€‚</p><p>å¦‚æœä¸€ç»„å½¢å‚æˆ–è¿”å›å€¼æœ‰ç›¸åŒçš„ç±»å‹ï¼Œä¸å¿…ä¸ºæ¯ä¸ªå½¢å‚éƒ½å†™å‡ºå‚æ•°ç±»å‹ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f</span><span class="params">(i, j, k <span class="keyword">int</span>, s, t <span class="keyword">string</span>)</span></span>                 &#123; <span class="comment">/* ... */</span> &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f</span><span class="params">(i <span class="keyword">int</span>, j <span class="keyword">int</span>, k <span class="keyword">int</span>,  s <span class="keyword">string</span>, t <span class="keyword">string</span>)</span></span> &#123; <span class="comment">/* ... */</span> &#125;</span><br></pre></td></tr></table></figure><p>**å‡½æ•°çš„ç±»å‹è¢«ç§°ä¸ºå‡½æ•°çš„ç­¾åã€‚**å¦‚æœä¸¤ä¸ªå‡½æ•°å½¢å¼å‚æ•°åˆ—è¡¨å’Œè¿”å›å€¼åˆ—è¡¨ä¸­çš„å˜é‡ç±»å‹ä¸€ä¸€å¯¹åº”ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªå‡½æ•°è¢«è®¤ä¸ºæœ‰ç›¸åŒçš„ç±»å‹æˆ–ç­¾åã€‚</p><p>å½¢å‚å’Œè¿”å›å€¼çš„å˜é‡åä¸å½±å“å‡½æ•°ç­¾åï¼Œä¹Ÿä¸å½±å“å®ƒä»¬æ˜¯å¦å¯ä»¥ä»¥çœç•¥å‚æ•°ç±»å‹çš„å½¢å¼è¡¨ç¤ºã€‚<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p><p>æ¯ä¸€æ¬¡å‡½æ•°è°ƒç”¨éƒ½å¿…é¡»æŒ‰ç…§å£°æ˜é¡ºåºä¸ºæ‰€æœ‰å‚æ•°æä¾›å®å‚ï¼ˆå‚æ•°å€¼ï¼‰ã€‚</p><p>åœ¨å‡½æ•°è°ƒç”¨æ—¶ï¼Œ<code>Go</code>è¯­è¨€<strong>æ²¡æœ‰é»˜è®¤å‚æ•°å€¼</strong>ï¼Œä¹Ÿ<strong>æ²¡æœ‰ä»»ä½•æ–¹æ³•å¯ä»¥é€šè¿‡å‚æ•°åæŒ‡å®šå½¢å‚</strong>ï¼Œå› æ­¤å½¢å‚å’Œè¿”å›å€¼çš„å˜é‡åå¯¹äºå‡½æ•°è°ƒç”¨è€…è€Œè¨€æ²¡æœ‰æ„ä¹‰ã€‚</p><p>åœ¨å‡½æ•°ä½“ä¸­ï¼Œå‡½æ•°çš„å½¢å‚ä½œä¸ºå±€éƒ¨å˜é‡ï¼Œè¢«åˆå§‹åŒ–ä¸ºè°ƒç”¨è€…æä¾›çš„å€¼ã€‚å‡½æ•°çš„å½¢å‚å’Œæœ‰åè¿”å›å€¼ä½œä¸ºå‡½æ•°æœ€å¤–å±‚çš„å±€éƒ¨å˜é‡ï¼Œè¢«å­˜å‚¨åœ¨ç›¸åŒçš„è¯æ³•å—ä¸­ã€‚</p><p>å¦‚æœæ²¡æœ‰å‡½æ•°ä½“çš„å‡½æ•°å£°æ˜ï¼Œè¿™è¡¨ç¤ºè¯¥å‡½æ•°ä¸æ˜¯ä»¥<code>Go</code>å®ç°çš„ã€‚è¿™æ ·çš„å£°æ˜å®šä¹‰äº†å‡½æ•°ç­¾åï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> math</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Sin</span><span class="params">(x <span class="keyword">float64</span>)</span> <span class="title">float</span> // <span class="title">implemented</span> <span class="title">in</span> <span class="title">assembly</span> <span class="title">language</span></span></span><br></pre></td></tr></table></figure><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>åé¢è¿™åŠå¥æˆ‘æ²¡æ‡‚æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> macos </tag>
            
            <tag> golang </tag>
            
            <tag> go </tag>
            
            <tag> golang note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŠGoè¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹ç¬”è®°ï¼ˆ13ï¼‰</title>
      <link href="/blog/2021/05/13/the-go-programming-language-note-13/"/>
      <url>/blog/2021/05/13/the-go-programming-language-note-13/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šgo-è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹"><a class="header-anchor" href="#ã€Šgo-è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹">#</a>ã€ŠGo è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹</h1><a id="more"></a><p>ç¼–ç»„ï¼ˆmarshalingï¼‰å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªç¼–ç åçš„å­—èŠ‚<code>slice</code>ï¼ŒåŒ…å«å¾ˆé•¿çš„å­—ç¬¦ä¸²ï¼Œå¹¶ä¸”æ²¡æœ‰ç©ºç™½ç¼©è¿›ã€‚</p><p><code>json.MarshalIndent</code>å‡½æ•°äº§ç”Ÿæ•´é½ç¼©è¿›çš„è¾“å‡ºï¼Œè¯¥å‡½æ•°æœ‰ä¸¤ä¸ªé¢å¤–çš„å­—ç¬¦ä¸²å‚æ•°ç”¨äºè¡¨ç¤ºæ¯ä¸€è¡Œè¾“å‡ºçš„å‰ç¼€å’Œæ¯ä¸€ä¸ªå±‚çº§çš„ç¼©è¿›ã€‚<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p><p>ä¸€ä¸ªç»“æ„ä½“æˆå‘˜<code>Tag</code>æ˜¯å’Œåœ¨ç¼–è¯‘é˜¶æ®µå…³è”åˆ°è¯¥æˆå‘˜çš„å…ƒä¿¡æ¯å­—ç¬¦ä¸²ã€‚</p><p><code>omitempty</code>é€‰é¡¹è¡¨ç¤ºå½“<code>Go</code>è¯­è¨€ç»“æ„ä½“æˆå‘˜ä¸ºç©ºæˆ–é›¶å€¼æ—¶ä¸ç”Ÿæˆè¯¥<code>JSON</code>å¯¹è±¡ï¼ˆè¿™é‡Œ<code>false</code>ä¸ºé›¶å€¼ï¼‰ã€‚</p><h2 id="æ–‡æœ¬å’Œhtmlæ¨¡æ¿"><a class="header-anchor" href="#æ–‡æœ¬å’Œhtmlæ¨¡æ¿">#</a>æ–‡æœ¬å’ŒHTMLæ¨¡æ¿</h2><p>ç”Ÿæˆæ¨¡æ¿çš„è¾“å‡ºéœ€è¦ä¸¤ä¸ªå¤„ç†æ­¥éª¤ã€‚ç¬¬ä¸€æ­¥æ˜¯è¦åˆ†ææ¨¡æ¿å¹¶è½¬ä¸ºå†…éƒ¨è¡¨ç¤ºï¼Œç„¶ååŸºäºæŒ‡å®šçš„è¾“å…¥æ‰§è¡Œæ¨¡æ¿ã€‚<br>åˆ†ææ¨¡æ¿éƒ¨åˆ†ä¸€èˆ¬åªéœ€è¦æ‰§è¡Œä¸€æ¬¡ã€‚</p><ol><li>template.Newå…ˆåˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªæ¨¡æ¿ã€‚</li><li>Funcsæ–¹æ³•å°†daysAgoç­‰è‡ªå®šä¹‰å‡½æ•°æ³¨å†Œåˆ°æ¨¡æ¿ä¸­ï¼Œå¹¶è¿”å›æ¨¡æ¿ã€‚</li><li>è°ƒç”¨Parseå‡½æ•°åˆ†ææ¨¡æ¿ã€‚</li></ol><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">@Time : 2021/5/20 19:43</span></span><br><span class="line"><span class="comment">@Author : onns</span></span><br><span class="line"><span class="comment">@File : 4.10.go</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"encoding/json"</span></span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"log"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Movie <span class="keyword">struct</span> &#123;</span><br><span class="line">Title  <span class="keyword">string</span></span><br><span class="line">Year   <span class="keyword">int</span>  <span class="string">`json:"relased"`</span></span><br><span class="line">Color  <span class="keyword">bool</span> <span class="string">`json:"color,omitempty"`</span></span><br><span class="line">Actors []<span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> movies = []Movie&#123;</span><br><span class="line">&#123;Title: <span class="string">"Casablanca"</span>, Year: <span class="number">1942</span>, Color: <span class="literal">false</span>,</span><br><span class="line">Actors: []<span class="keyword">string</span>&#123;<span class="string">"Humphrey Bogart"</span>, <span class="string">"Ingrid Bergman"</span>&#125;&#125;,</span><br><span class="line">&#123;Title: <span class="string">"Cool Hand Luke"</span>, Year: <span class="number">1967</span>, Color: <span class="literal">true</span>,</span><br><span class="line">Actors: []<span class="keyword">string</span>&#123;<span class="string">"Paul Newman"</span>&#125;&#125;,</span><br><span class="line">&#123;Title: <span class="string">"Bullitt"</span>, Year: <span class="number">1968</span>, Color: <span class="literal">true</span>,</span><br><span class="line">Actors: []<span class="keyword">string</span>&#123;<span class="string">"Steve McQueen"</span>, <span class="string">"Jacqueline Bisset"</span>&#125;&#125;,</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line">data, err := json.Marshal(movies)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">"JSON marshaling failed: %s"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">fmt.Printf(<span class="string">"%s\n"</span>, data)</span><br><span class="line"></span><br><span class="line">data2, err := json.MarshalIndent(movies, <span class="string">""</span>, <span class="string">"    "</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">"JSON marshaling failed: %s"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">fmt.Printf(<span class="string">"%s\n"</span>, data2)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> titles []<span class="keyword">struct</span> &#123;</span><br><span class="line">Title <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> err = json.Unmarshal(data2, &amp;titles); err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">"JSON unmarshaling failed: %s"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(titles)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">[19:40:54] onns@Onns ~/Onns/code/go/go-bible/ch4 $ go run 4.10.go </span><br><span class="line">[&#123;<span class="string">"Title"</span>:<span class="string">"Casablanca"</span>,<span class="string">"relased"</span>:1942,<span class="string">"Actors"</span>:[<span class="string">"Humphrey Bogart"</span>,<span class="string">"Ingrid Bergman"</span>]&#125;,&#123;<span class="string">"Title"</span>:<span class="string">"Cool Hand Luke"</span>,<span class="string">"relased"</span>:1967,<span class="string">"color"</span>:<span class="literal">true</span>,<span class="string">"Actors"</span>:[<span class="string">"Paul Newman"</span>]&#125;,&#123;<span class="string">"Title"</span>:<span class="string">"Bullitt"</span>,<span class="string">"relased"</span>:1968,<span class="string">"color"</span>:<span class="literal">true</span>,<span class="string">"Actors"</span>:[<span class="string">"Steve McQueen"</span>,<span class="string">"Jacqueline Bisset"</span>]&#125;]</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">"Title"</span>: <span class="string">"Casablanca"</span>,</span><br><span class="line">        <span class="string">"relased"</span>: 1942,</span><br><span class="line">        <span class="string">"Actors"</span>: [</span><br><span class="line">            <span class="string">"Humphrey Bogart"</span>,</span><br><span class="line">            <span class="string">"Ingrid Bergman"</span></span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">"Title"</span>: <span class="string">"Cool Hand Luke"</span>,</span><br><span class="line">        <span class="string">"relased"</span>: 1967,</span><br><span class="line">        <span class="string">"color"</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">"Actors"</span>: [</span><br><span class="line">            <span class="string">"Paul Newman"</span></span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">"Title"</span>: <span class="string">"Bullitt"</span>,</span><br><span class="line">        <span class="string">"relased"</span>: 1968,</span><br><span class="line">        <span class="string">"color"</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="string">"Actors"</span>: [</span><br><span class="line">            <span class="string">"Steve McQueen"</span>,</span><br><span class="line">            <span class="string">"Jacqueline Bisset"</span></span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line">[&#123;Casablanca&#125; &#123;Cool Hand Luke&#125; &#123;Bullitt&#125;]</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> github</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">@Time : 2021/5/20 19:46</span></span><br><span class="line"><span class="comment">@Author : onns</span></span><br><span class="line"><span class="comment">@File : ch4/github/github.go</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> IssuesURL = <span class="string">"https://api.github.com/search/issues"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> IssuesSearchResult <span class="keyword">struct</span> &#123;</span><br><span class="line">TotalCount <span class="keyword">int</span> <span class="string">`json:"total_count"`</span></span><br><span class="line">Items      []*Issue</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Issue <span class="keyword">struct</span> &#123;</span><br><span class="line">Number   <span class="keyword">int</span></span><br><span class="line">HTMLURL  <span class="keyword">string</span> <span class="string">`json:"html_url"`</span></span><br><span class="line">Title    <span class="keyword">string</span></span><br><span class="line">State    <span class="keyword">string</span></span><br><span class="line">User     *User</span><br><span class="line">CreateAt time.Time <span class="string">`json:"create_at"`</span></span><br><span class="line">Body     <span class="keyword">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> User <span class="keyword">struct</span> &#123;</span><br><span class="line">Login   <span class="keyword">string</span></span><br><span class="line">HTMLURL <span class="keyword">string</span> <span class="string">`json:"html_url"`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> github</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">@Time : 2021/5/20 19:46</span></span><br><span class="line"><span class="comment">@Author : onns</span></span><br><span class="line"><span class="comment">@File : ch4/github/search.go</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"encoding/json"</span></span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"net/http"</span></span><br><span class="line"><span class="string">"net/url"</span></span><br><span class="line"><span class="string">"strings"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">SearchIssues</span><span class="params">(terms []<span class="keyword">string</span>)</span> <span class="params">(*IssuesSearchResult, error)</span></span> &#123;</span><br><span class="line">q := url.QueryEscape(strings.Join(terms, <span class="string">" "</span>))</span><br><span class="line">resp, err := http.Get(IssuesURL + <span class="string">"?q="</span> + q)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> resp.StatusCode != http.StatusOK &#123;</span><br><span class="line">resp.Body.Close()</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, fmt.Errorf(<span class="string">"search query failed: %s"</span>, resp.Status)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> result IssuesSearchResult</span><br><span class="line"><span class="keyword">if</span> err := json.NewDecoder(resp.Body).Decode(&amp;result); err != <span class="literal">nil</span> &#123;</span><br><span class="line">resp.Body.Close()</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resp.Body.Close()</span><br><span class="line"><span class="keyword">return</span> &amp;result, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">@Time : 2021/5/20 19:49</span></span><br><span class="line"><span class="comment">@Author : onns</span></span><br><span class="line"><span class="comment">@File : ch4/4.11.go</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"./github"</span></span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"log"</span></span><br><span class="line"><span class="string">"os"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">result, err := github.SearchIssues(os.Args[<span class="number">1</span>:])</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line">fmt.Printf(<span class="string">"%d issues:\n"</span>, result.TotalCount)</span><br><span class="line"><span class="keyword">for</span> _, item := <span class="keyword">range</span> result.Items &#123;</span><br><span class="line">fmt.Printf(<span class="string">"#%-5d %9.9s %.55s\n"</span>,</span><br><span class="line">item.Number, item.User.Login, item.Title)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">[19:48:17] onns@Onns ~/Onns/code/go/go-bible/ch4 $ go build 4.11.go </span><br><span class="line">[19:50:55] onns@Onns ~/Onns/code/go/go-bible/ch4 $ ./4.11 repo:golang/go is:open json decoder</span><br><span class="line">60 issues:</span><br><span class="line"><span class="comment">#33416   bserdar encoding/json: This CL adds Decoder.InternKeys</span></span><br><span class="line"><span class="comment">#45628 pgundlach encoding/xml: add Decoder.InputPos</span></span><br><span class="line"><span class="comment">#43716 ggaaooppe encoding/json: increment byte counter when using decode</span></span><br><span class="line"><span class="comment">#42571     dsnet encoding/json: clarify Decoder.InputOffset semantics</span></span><br><span class="line"><span class="comment">#32779       rsc encoding/json: memoize strings during decode</span></span><br><span class="line"><span class="comment">#11046     kurin encoding/json: Decoder internally buffers full input</span></span><br><span class="line"><span class="comment">#5901        rsc encoding/json: allow per-Encoder/per-Decoder registrati</span></span><br><span class="line"><span class="comment">#34543  maxatome encoding/json: Unmarshal &amp; json.(*Decoder).Token report</span></span><br><span class="line"><span class="comment">#36225     dsnet encoding/json: the Decoder.Decode API lends itself to m</span></span><br><span class="line"><span class="comment">#14750 cyberphon encoding/json: parser ignores the case of member names</span></span><br><span class="line"><span class="comment">#43401  opennota proposal: encoding/csv: add Reader.InputOffset method</span></span><br><span class="line"><span class="comment">#29035    jaswdr proposal: encoding/json: add error var to compare  the </span></span><br><span class="line"><span class="comment">#31701    lr1980 encoding/json: second decode after error impossible</span></span><br><span class="line"><span class="comment">#40128  rogpeppe proposal: encoding/json: garbage-free reading of tokens</span></span><br><span class="line"><span class="comment">#40127  rogpeppe encoding/json: add Encoder.EncodeToken method</span></span><br><span class="line"><span class="comment">#45512 colin-sit encoding/json: cannot unmarshal custom interface value</span></span><br><span class="line"><span class="comment">#40982   Segflow encoding/json: use different error type for unknown fie</span></span><br><span class="line"><span class="comment">#40983   Segflow encoding/json: return a different error type for unknow</span></span><br><span class="line"><span class="comment">#28923     mvdan encoding/json: speed up the decoding scanner</span></span><br><span class="line"><span class="comment">#43513 Alexander encoding/json: add line number to SyntaxError</span></span><br><span class="line"><span class="comment">#41144 alvaroale encoding/json: Unmarshaler breaks DisallowUnknownFields</span></span><br><span class="line"><span class="comment">#16212 josharian encoding/json: do all reflect work before decoding</span></span><br><span class="line"><span class="comment">#6647    btracey x/tools/cmd/godoc: display type kind of each named type</span></span><br><span class="line"><span class="comment">#29750  jacoelho cmd/vet: stdmethods check gets confused if run on a pac</span></span><br><span class="line"><span class="comment">#34564  mdempsky go/internal/gcimporter: single source of truth for deco</span></span><br><span class="line"><span class="comment">#33835     Qhesz encoding/json: unmarshalling null into non-nullable gol</span></span><br><span class="line"><span class="comment">#33854     Qhesz encoding/json: unmarshal option to treat omitted fields</span></span><br><span class="line"><span class="comment">#30301     zelch encoding/xml: option to treat unknown fields as an erro</span></span><br><span class="line"><span class="comment">#26946    deuill encoding/json: clarify what happens when unmarshaling i</span></span><br><span class="line"><span class="comment">#22752  buyology proposal: encoding/json: add access to the underlying d</span></span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">@Time : 2021/5/20 19:53</span></span><br><span class="line"><span class="comment">@Author : onns</span></span><br><span class="line"><span class="comment">@File : ch4/4.12.go</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"./github"</span></span><br><span class="line"><span class="comment">// "fmt"</span></span><br><span class="line"><span class="string">"html/template"</span></span><br><span class="line"><span class="string">"log"</span></span><br><span class="line"><span class="string">"os"</span></span><br><span class="line"><span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> templ = <span class="string">`&#123;&#123;.TotalCount&#125;&#125; issues:</span></span><br><span class="line"><span class="string">&#123;&#123;range .Items&#125;&#125;----------------------------------------</span></span><br><span class="line"><span class="string">Number: &#123;&#123;.Number&#125;&#125;</span></span><br><span class="line"><span class="string">User:   &#123;&#123;.User.Login&#125;&#125;</span></span><br><span class="line"><span class="string">Title:  &#123;&#123;.Title | printf "%.64s"&#125;&#125;</span></span><br><span class="line"><span class="string">Age:    &#123;&#123;.CreatedAt | daysAgo&#125;&#125; days</span></span><br><span class="line"><span class="string">&#123;&#123;end&#125;&#125;`</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">daysAgo</span><span class="params">(t time.Time)</span> <span class="title">int</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">int</span>(time.Since(t).Hours() / <span class="number">24</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">report, err := template.New(<span class="string">"report"</span>).</span><br><span class="line">Funcs(template.FuncMap&#123;<span class="string">"daysAgo"</span>: daysAgo&#125;).</span><br><span class="line">Parse(templ)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line">result, err := github.SearchIssues(os.Args[<span class="number">1</span>:])</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> err := report.Execute(os.Stdout, result); err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatal(err)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[19:51:47] onns@Onns ~/Onns/code/go/go-bible/ch4 $ go build 4.12.go                          </span><br><span class="line">[19:53:52] onns@Onns ~/Onns/code/go/go-bible/ch4 $ ./4.12 repo:golang/go is:open json decoder</span><br><span class="line">60 issues:</span><br><span class="line">----------------------------------------</span><br><span class="line">Number: 33416</span><br><span class="line">User:   bserdar</span><br><span class="line">Title:  encoding/json: This CL adds Decoder.InternKeys</span><br><span class="line">Age:    2021/05/20 19:54:35 template: report:6:10: executing <span class="string">"report"</span> at &lt;.CreatedAt&gt;: can<span class="string">'t evaluate field CreatedAt in type *github.Issue</span></span><br></pre></td></tr></table></figure><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>åœ¨æœ€åä¸€ä¸ªæˆå‘˜æˆ–å…ƒç´ åé¢å¹¶æ²¡æœ‰é€—å·åˆ†éš”ç¬¦ã€‚ <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> macos </tag>
            
            <tag> golang </tag>
            
            <tag> go </tag>
            
            <tag> golang note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŠGoè¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹ç¬”è®°ï¼ˆ12ï¼‰</title>
      <link href="/blog/2021/05/12/the-go-programming-language-note-12/"/>
      <url>/blog/2021/05/12/the-go-programming-language-note-12/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šgo-è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹"><a class="header-anchor" href="#ã€Šgo-è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹">#</a>ã€ŠGo è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹</h1><a id="more"></a><p>ç»“æ„ä½“å¯ä»¥ä½œä¸ºå‡½æ•°çš„å‚æ•°å’Œè¿”å›å€¼ã€‚</p><p>å¦‚æœè€ƒè™‘æ•ˆç‡çš„è¯ï¼Œè¾ƒå¤§çš„ç»“æ„ä½“é€šå¸¸ä¼šç”¨æŒ‡é’ˆçš„æ–¹å¼ä¼ å…¥å’Œè¿”å›ï¼Œ</p><p>å› ä¸ºç»“æ„ä½“é€šå¸¸é€šè¿‡æŒ‡é’ˆå¤„ç†ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„å†™æ³•æ¥åˆ›å»ºå¹¶åˆå§‹åŒ–ä¸€ä¸ªç»“æ„ä½“å˜é‡ï¼Œå¹¶è¿”å›ç»“æ„ä½“çš„åœ°å€ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pp := &amp;Point&#123;<span class="number">1</span>, <span class="number">2</span>&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœç»“æ„ä½“çš„å…¨éƒ¨æˆå‘˜éƒ½æ˜¯å¯ä»¥æ¯”è¾ƒçš„ï¼Œé‚£ä¹ˆç»“æ„ä½“ä¹Ÿæ˜¯å¯ä»¥æ¯”è¾ƒçš„ã€‚</p><p>Goè¯­è¨€æœ‰ä¸€ä¸ªç‰¹æ€§è®©æˆ‘ä»¬åªå£°æ˜ä¸€ä¸ªæˆå‘˜å¯¹åº”çš„æ•°æ®ç±»å‹è€Œä¸æŒ‡åæˆå‘˜çš„åå­—ï¼›è¿™ç±»æˆå‘˜å°±å«<strong>åŒ¿åæˆå‘˜</strong>ã€‚<br>åŒ¿åæˆå‘˜çš„æ•°æ®ç±»å‹å¿…é¡»æ˜¯<strong>å‘½åçš„ç±»å‹</strong>æˆ–<strong>æŒ‡å‘ä¸€ä¸ªå‘½åçš„ç±»å‹çš„æŒ‡é’ˆ</strong>ã€‚</p><p>å…¨ç§°è®¿é—®çš„æ–¹å¼ä¾ç„¶å¯ä»¥ã€‚</p><p>æˆ‘ä»¬åœ¨è®¿é—®å­æˆå‘˜çš„æ—¶å€™å¯ä»¥å¿½ç•¥ä»»ä½•åŒ¿åæˆå‘˜éƒ¨åˆ†ã€‚</p><p>ç»“æ„ä½“å­—é¢å€¼å¹¶æ²¡æœ‰ç®€çŸ­è¡¨ç¤ºåŒ¿åæˆå‘˜çš„è¯­æ³•ã€‚</p><p><code>Printf</code>å‡½æ•°ä¸­<code>%v</code>å‚æ•°åŒ…å«çš„<code>#</code>å‰¯è¯ï¼Œå®ƒè¡¨ç¤ºç”¨å’Œ<code>Go</code>è¯­è¨€ç±»ä¼¼çš„è¯­æ³•æ‰“å°å€¼ã€‚</p><p>æˆå‘˜çš„åå­—æ˜¯ç”±å…¶ç±»å‹éšå¼åœ°å†³å®šçš„ï¼Œæ‰€ä»¥åŒ¿åæˆå‘˜ä¹Ÿæœ‰å¯è§æ€§çš„è§„åˆ™çº¦æŸã€‚</p><p>åœ¨åŒ…å¤–éƒ¨ï¼Œå¦‚æœ<code>circle</code>å’Œ<code>point</code>æ²¡æœ‰å¯¼å‡ºï¼Œåˆ™ä¸èƒ½è®¿é—®å®ƒä»¬çš„æˆå‘˜ï¼Œå› æ­¤ç®€çŸ­çš„åŒ¿åæˆå‘˜è®¿é—®è¯­æ³•ä¹Ÿæ˜¯ç¦æ­¢çš„ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">@Time : 2021/5/20 18:53</span></span><br><span class="line"><span class="comment">@Author : onns</span></span><br><span class="line"><span class="comment">@File : 4.8.go</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Point <span class="keyword">struct</span>&#123; X, Y <span class="keyword">int</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Scale</span><span class="params">(p Point, factor <span class="keyword">int</span>)</span> <span class="title">Point</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> Point&#123;p.X * factor, p.Y * factor&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Scale2</span><span class="params">(p *Point, factor <span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">p.X *= factor</span><br><span class="line">p.Y *= factor</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">p := Point&#123;<span class="number">1</span>, <span class="number">2</span>&#125;</span><br><span class="line"><span class="comment">// pp = &amp;p</span></span><br><span class="line">fmt.Println(p)</span><br><span class="line"><span class="comment">// fmt.Println(&amp;p)</span></span><br><span class="line">p = Scale(p, <span class="number">4</span>)</span><br><span class="line">fmt.Println(p)</span><br><span class="line">Scale2(&amp;p, <span class="number">4</span>)</span><br><span class="line">fmt.Println(p)</span><br><span class="line"><span class="comment">// fmt.Println(&amp;p)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[19:26:42] onns@Onns ~/Onns/code/go/go-bible/ch4 $ go run 4.8.go </span><br><span class="line">&#123;1 2&#125;</span><br><span class="line">&#123;4 8&#125;</span><br><span class="line">&#123;16 32&#125;</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">@Time : 2021/5/20 19:35</span></span><br><span class="line"><span class="comment">@Author : onns</span></span><br><span class="line"><span class="comment">@File : 4.9.go</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Circle <span class="keyword">struct</span> &#123;</span><br><span class="line">X, Y, Radius <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Wheel <span class="keyword">struct</span> &#123;</span><br><span class="line">X, Y, Radius, Spokes <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Point <span class="keyword">struct</span> &#123;</span><br><span class="line">X, Y <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Circle2 <span class="keyword">struct</span> &#123;</span><br><span class="line">Center Point</span><br><span class="line">Radius <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Wheel2 <span class="keyword">struct</span> &#123;</span><br><span class="line">Circle Circle2</span><br><span class="line">Spokes <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Circle3 <span class="keyword">struct</span> &#123;</span><br><span class="line">Point</span><br><span class="line">Radius <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Wheel3 <span class="keyword">struct</span> &#123;</span><br><span class="line">Circle3</span><br><span class="line">Spokes <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> w Wheel</span><br><span class="line">w.X = <span class="number">8</span></span><br><span class="line">w.Y = <span class="number">8</span></span><br><span class="line">w.Radius = <span class="number">5</span></span><br><span class="line">w.Spokes = <span class="number">20</span></span><br><span class="line">fmt.Println(w)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> w2 Wheel2</span><br><span class="line">w2.Circle.Center.X = <span class="number">8</span></span><br><span class="line">w2.Circle.Center.Y = <span class="number">8</span></span><br><span class="line">w2.Circle.Radius = <span class="number">5</span></span><br><span class="line">w2.Spokes = <span class="number">20</span></span><br><span class="line">fmt.Println(w2)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> w3 Wheel3</span><br><span class="line"><span class="comment">// fmt.Println(w3)</span></span><br><span class="line">w3.X = <span class="number">8</span>      <span class="comment">// equivalent to w3.Circle3.Point.X = 8</span></span><br><span class="line">w3.Y = <span class="number">8</span>      <span class="comment">// equivalent to w3.Circle3.Point.Y = 8</span></span><br><span class="line">w3.Radius = <span class="number">5</span> <span class="comment">// equivalent to w3.Circle3.Radius = 5</span></span><br><span class="line">w3.Spokes = <span class="number">20</span></span><br><span class="line">fmt.Println(w3.Circle3.Point.X)</span><br><span class="line">fmt.Println(w3)</span><br><span class="line"></span><br><span class="line">w4 := Wheel3&#123;Circle3&#123;Point&#123;<span class="number">8</span>, <span class="number">8</span>&#125;, <span class="number">5</span>&#125;, <span class="number">20</span>&#125;</span><br><span class="line">fmt.Printf(<span class="string">"%#v\n"</span>, w4)</span><br><span class="line"></span><br><span class="line">w5 := Wheel3&#123;</span><br><span class="line">Circle3: Circle3&#123;</span><br><span class="line">Point:  Point&#123;X: <span class="number">8</span>, Y: <span class="number">8</span>&#125;,</span><br><span class="line">Radius: <span class="number">5</span>,</span><br><span class="line">&#125;,</span><br><span class="line">Spokes: <span class="number">20</span>, <span class="comment">// <span class="doctag">NOTE:</span> trailing comma necessary here (and at Radius)</span></span><br><span class="line">&#125;</span><br><span class="line">w5.X = <span class="number">42</span></span><br><span class="line">fmt.Printf(<span class="string">"%#v\n"</span>, w5)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[19:30:42] onns@Onns ~/Onns/code/go/go-bible/ch4 $ go run 4.9.go </span><br><span class="line">&#123;8 8 5 20&#125;</span><br><span class="line">&#123;&#123;&#123;8 8&#125; 5&#125; 20&#125;</span><br><span class="line">8</span><br><span class="line">&#123;&#123;&#123;8 8&#125; 5&#125; 20&#125;</span><br><span class="line">main.Wheel3&#123;Circle3:main.Circle3&#123;Point:main.Point&#123;X:8, Y:8&#125;, Radius:5&#125;, Spokes:20&#125;</span><br><span class="line">main.Wheel3&#123;Circle3:main.Circle3&#123;Point:main.Point&#123;X:42, Y:8&#125;, Radius:5&#125;, Spokes:20&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> macos </tag>
            
            <tag> golang </tag>
            
            <tag> go </tag>
            
            <tag> golang note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šå¿«ä¹çš„Linuxå‘½ä»¤è¡Œã€‹ç¬”è®°ï¼ˆ27ï¼‰</title>
      <link href="/blog/2021/05/02/the-linux-command-line-note-27/"/>
      <url>/blog/2021/05/02/the-linux-command-line-note-27/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹"><a class="header-anchor" href="#ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹">#</a>ã€Šå¿«ä¹çš„ Linux å‘½ä»¤è¡Œã€‹</h1><a id="more"></a><h2 id="for"><a class="header-anchor" href="#for">#</a>for</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> variable [<span class="keyword">in</span> words]; <span class="keyword">do</span></span><br><span class="line">commands</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>æœ€æ–°ç‰ˆæœ¬çš„<code>bash</code>å·²ç»æ·»åŠ äº†ç¬¬äºŒç§æ ¼å¼çš„<code>for</code>å‘½ä»¤è¯­æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (( expression1; expression2; expression3 )); <span class="keyword">do</span></span><br><span class="line">commands</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>ä¸‹è¿°å‘½ä»¤ç”¨æ¥è®¾ç½®é»˜è®¤å€¼ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$&#123;parameter:-word&#125;</span></span><br></pre></td></tr></table></figure><p>ä¸‹è¿°å‘½ä»¤ç”¨æ¥è®¾ç½®é»˜è®¤å€¼ï¼Œå¹¶ä¸”å°†<code>word</code>çš„å€¼èµ‹å€¼ç»™<code>parameter</code>ï¼ˆä½ç½®å‚æ•°æˆ–å…¶å®ƒçš„ç‰¹æ®Šå‚æ•°ä¸èƒ½ä»¥è¿™ç§æ–¹å¼èµ‹å€¼ï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$&#123;parameter:=word&#125;</span></span><br></pre></td></tr></table></figure><p>è‹¥<code>parameter</code>æ²¡æœ‰è®¾ç½®æˆ–ä¸ºç©ºï¼Œè¿™ç§å±•å¼€å¯¼è‡´è„šæœ¬å¸¦æœ‰é”™è¯¯é€€å‡ºï¼Œå¹¶ä¸”<code>word</code>çš„å†…å®¹ä¼šå‘é€åˆ°æ ‡å‡†é”™è¯¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$&#123;parameter:?word&#125;</span></span><br></pre></td></tr></table></figure><p>è‹¥<code>parameter</code>æ²¡æœ‰è®¾ç½®æˆ–ä¸ºç©ºï¼Œå±•å¼€ç»“æœä¸ºç©ºã€‚è‹¥<code>parameter</code>ä¸ä¸ºç©ºï¼Œå±•å¼€ç»“æœæ˜¯<code>word</code>çš„å€¼ï¼Œ<code>parameter</code>çš„å€¼ä¸ä¼šæ”¹å˜ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$&#123;parameter:+word&#125;</span></span><br></pre></td></tr></table></figure><p>è¿”å›ä»¥<code>prefix</code>å¼€å¤´çš„å·²æœ‰å˜é‡åçš„å±•å¼€ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸¤è€…ç­‰æ•ˆ</span></span><br><span class="line"><span class="variable">$&#123;!prefix*&#125;</span></span><br><span class="line"><span class="variable">$&#123;!prefix@&#125;</span></span><br></pre></td></tr></table></figure><p><code>${#parameter}</code>å±•å¼€æˆ<code>parameter</code>æ‰€åŒ…å«çš„å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚<br>å¦‚æœ<code>parameter</code>æ˜¯<code>@</code>æˆ–è€…æ˜¯<code>*</code>ï¼Œå±•å¼€ç»“æœæ˜¯ä½ç½®å‚æ•°çš„ä¸ªæ•°ã€‚</p><p><code>${parameter:offset}</code> <code>${parameter:offset:length}</code>å±•å¼€<code>parameter</code>ç¬¬<code>offset</code>ä¸ªå­—ç¬¦ï¼ˆä»å­—ç¬¦ä¸²å¼€å¤´ç®—èµ·ï¼‰ç›´åˆ°å­—ç¬¦ä¸²çš„æœ«å°¾ï¼Œé™¤éæŒ‡å®šæå–çš„é•¿åº¦ã€‚<br>è‹¥<code>offset</code>çš„å€¼ä¸ºè´Ÿæ•°ï¼Œåˆ™è®¤ä¸º<code>offset</code>å€¼æ˜¯ä»å­—ç¬¦ä¸²çš„æœ«å°¾å¼€å§‹ç®—èµ·ã€‚è´Ÿæ•°å‰é¢å¿…é¡»æœ‰ä¸€ä¸ªç©ºæ ¼ï¼Œä¸ºé˜²æ­¢ä¸<code>${parameter:-word}</code>å±•å¼€å½¢å¼æ··æ·†ã€‚<code>length</code>è‹¥å‡ºç°ï¼Œåˆ™å¿…é¡»ä¸èƒ½å°äºé›¶ã€‚<br>å¦‚æœ<code>parameter</code>æ˜¯<code>@</code>ï¼Œå±•å¼€ç»“æœæ˜¯<code>length</code>ä¸ªä½ç½®å‚æ•°ï¼Œä»ç¬¬<code>offset</code>ä¸ªä½ç½®å‚æ•°å¼€å§‹ã€‚</p><p><code>${parameter#pattern}</code> <code>${parameter##pattern}</code>ä»<code>paramter</code>æ‰€åŒ…å«çš„å­—ç¬¦ä¸²<strong>å¼€å¤´</strong>ä¸­æ¸…é™¤<code>pattern</code>åŒ¹é…çš„å­—ç¬¦ä¸²ã€‚<code>#</code>å½¢å¼æ¸…é™¤æœ€çŸ­çš„åŒ¹é…ç»“æœï¼Œ<code>##</code>æ¨¡å¼æ¸…é™¤æœ€é•¿çš„åŒ¹é…ç»“æœã€‚</p><p><code>${parameter%pattern}</code> <code>${parameter%%pattern}</code>ä»<code>paramter</code>æ‰€åŒ…å«çš„å­—ç¬¦ä¸²<strong>ç»“å°¾</strong>ä¸­æ¸…é™¤<code>pattern</code>åŒ¹é…çš„å­—ç¬¦ä¸²ã€‚</p><p><code>${parameter/pattern/string}</code> <code>${parameter//pattern/string}</code> <code>${parameter/#pattern/string}</code> <code>${parameter/%pattern/string}</code>å¯¹<code>parameter</code>çš„å†…å®¹æ‰§è¡ŒæŸ¥æ‰¾å’Œæ›¿æ¢æ“ä½œã€‚<br>åœ¨æ­£å¸¸å½¢å¼ä¸‹ï¼Œåªæœ‰ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹ä¼šè¢«æ›¿æ¢æ‰ã€‚<br><code>//</code>å½¢å¼ä¸‹ï¼Œæ‰€æœ‰çš„åŒ¹é…é¡¹éƒ½ä¼šè¢«æ›¿æ¢æ‰ã€‚<br><code>/#</code>è¦æ±‚åŒ¹é…é¡¹å‡ºç°åœ¨å­—ç¬¦ä¸²çš„<strong>å¼€å¤´</strong>ã€‚<br><code>/#</code>è¦æ±‚åŒ¹é…é¡¹å‡ºç°åœ¨å­—ç¬¦ä¸²çš„<strong>ç»“å°¾</strong>ã€‚<br><code>/string</code>å¯èƒ½ä¼šçœç•¥æ‰ï¼Œè¿™æ ·ä¼šå¯¼è‡´åˆ é™¤åŒ¹é…çš„æ–‡æœ¬ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ foo=JPG.JPG</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;foo/JPG/jpg&#125;</span></span><br><span class="line">jpg.JPG</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;foo//JPG/jpg&#125;</span></span><br><span class="line">jpg.jpg</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;foo/#JPG/jpg&#125;</span></span><br><span class="line">jpg.JPG</span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$&#123;foo/%JPG/jpg&#125;</span></span><br><span class="line">JPG.jpg</span><br></pre></td></tr></table></figure><p><code>${parameter,,}</code>æŠŠ<code>parameter</code>çš„å€¼å…¨éƒ¨å±•å¼€æˆå°å†™å­—æ¯ã€‚<br><code>${parameter,}</code>æŠŠ<code>parameter</code>çš„ç¬¬ä¸€ä¸ªå­—ç¬¦å±•å¼€æˆå°å†™å­—æ¯ã€‚<br><code>${parameter^^}</code>æŠŠ<code>parameter</code>çš„å€¼å…¨éƒ¨è½¬æ¢æˆå¤§å†™å­—æ¯ã€‚<br><code>${parameter^}</code>æŠŠ<code>parameter</code>çš„ç¬¬ä¸€ä¸ªå­—ç¬¦è½¬æ¢æˆå¤§å†™å­—æ¯ï¼ˆé¦–å­—æ¯å¤§å†™ï¼‰ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ul-param - demonstrate case conversion via parameter expansion</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$1</span> ]]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$&#123;1,,&#125;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$&#123;1,&#125;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$&#123;1^^&#125;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$&#123;1^&#125;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ vi ul-param</span><br><span class="line">$ chmod +x ul-param</span><br><span class="line">$ ./ul-param aBc</span><br><span class="line">abc</span><br><span class="line">aBc</span><br><span class="line">ABC</span><br><span class="line">ABc</span><br></pre></td></tr></table></figure><p>åœ¨ç®—æœ¯è¡¨è¾¾å¼ä¸­ï¼Œä»¥<code>0</code>å¼€å¤´çš„æ•°å­—è¢«è®¤ä¸ºæ˜¯å…«è¿›åˆ¶æ•°ï¼Œ<code>0x</code>ä»£è¡¨åå…­è¿›åˆ¶ï¼Œ<code>base#number</code>æŒ‡å®šä»»æ„è¿›åˆ¶ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(base) hs@hs-Z390-AORUS-PRO:&#x2F;mnt&#x2F;data&#x2F;onns&#x2F;Desktop$ echo $((0xff))</span><br><span class="line">255</span><br><span class="line">(base) hs@hs-Z390-AORUS-PRO:&#x2F;mnt&#x2F;data&#x2F;onns&#x2F;Desktop$ echo $((2#11111111))</span><br><span class="line">255</span><br></pre></td></tr></table></figure><h2 id="æ•°ç»„"><a class="header-anchor" href="#æ•°ç»„">#</a>æ•°ç»„</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å•ä¸ªèµ‹å€¼</span></span><br><span class="line">name[subscript]=value</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤šä¸ªèµ‹å€¼</span></span><br><span class="line">name=(value1 value2 ...)</span><br></pre></td></tr></table></figure><p>ä¸‹æ ‡<code>*</code>å’Œ<code>@</code>å¯ä»¥è¢«ç”¨æ¥è®¿é—®æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> shell </tag>
            
            <tag> bash </tag>
            
            <tag> shell note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TDN Temporal Difference Networks for Efficient Action Recognition</title>
      <link href="/blog/2021/04/28/tdn-temporal-difference-networks-for-efficient-action-recognition/"/>
      <url>/blog/2021/04/28/tdn-temporal-difference-networks-for-efficient-action-recognition/</url>
      
        <content type="html"><![CDATA[<h1 id="tdn-temporal-difference-networks-for-efficient-action-recognition"><a class="header-anchor" href="#tdn-temporal-difference-networks-for-efficient-action-recognition">#</a>TDN: Temporal Difference Networks for Efficient Action Recognition</h1><h2 id="æ‘˜è¦"><a class="header-anchor" href="#æ‘˜è¦">#</a>æ‘˜è¦</h2><p>æå‡ºäº†ä¸€ç§<code>Motion Band-pass Module</code>æ¨¡å—ã€‚</p><p>æ—¶é—´å»ºæ¨¡ä»ç„¶æ˜¯è§†é¢‘åŠ¨ä½œè¯†åˆ«çš„éš¾ç‚¹ã€‚ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œæœ¬æ–‡æå‡ºäº†ä¸€ç§æ–°çš„è§†é¢‘ä½“ç³»ç»“æ„ï¼Œå³æ—¶åŸŸå·®åˆ†ç½‘ç»œ(TDN)ï¼Œå…¶æ ¸å¿ƒæ˜¯é€šè¿‡æ˜ç¡®åœ°åˆ©ç”¨æ—¶åŸŸå·®åˆ†ç®—å­æ¥è®¾è®¡ä¸€ä¸ªæœ‰æ•ˆçš„æ—¶åŸŸæ¨¡å—(TDM)ï¼Œä»è€Œå®ç°å¯¹å¤šå°ºåº¦æ—¶åŸŸä¿¡æ¯çš„é«˜æ•ˆåŠ¨ä½œè¯†åˆ«ã€‚å¹¶ç³»ç»Ÿè¯„ä¼°å…¶å¯¹çŸ­æœŸå’Œé•¿æœŸè¿åŠ¨å»ºæ¨¡çš„å½±å“ã€‚ä¸ºäº†å……åˆ†æ•è·æ•´ä¸ªè§†é¢‘çš„æ—¶é—´ä¿¡æ¯ï¼Œæˆ‘ä»¬çš„ TDN é‡‡ç”¨äº†ä¸¤çº§å·®åˆ†å»ºæ¨¡èŒƒå¼ã€‚åœ¨å±€éƒ¨è¿åŠ¨å»ºæ¨¡ä¸­ï¼Œåˆ©ç”¨è¿ç»­å¸§é—´çš„æ—¶åŸŸå·®åˆ†ä¸ºäºŒç»´ cnn æä¾›æ›´ç²¾ç»†çš„è¿åŠ¨æ¨¡å¼;åœ¨å…¨å±€è¿åŠ¨å»ºæ¨¡ä¸­ï¼Œåˆ©ç”¨åˆ†æ®µé—´çš„æ—¶åŸŸå·®åˆ†æ•è·é•¿è·ç¦»ç»“æ„ï¼Œæ¿€å‘è¿åŠ¨ç‰¹å¾ã€‚TDN æä¾›äº†ä¸€ä¸ªç®€å•çš„ã€æœ‰åŸåˆ™çš„æ—¶é—´å»ºæ¨¡æ¡†æ¶ï¼Œå¯ä»¥ç”¨ç°æœ‰çš„ cnn å®ä¾‹åŒ–ï¼Œå¹¶ä¸”åªéœ€è¦å°‘é‡é¢å¤–çš„è®¡ç®—æˆæœ¬ã€‚æˆ‘ä»¬ TDN æå‡ºäº†ä¸€ç§æ–°çš„å…ˆè¿›çš„äº‹æƒ… VI å’Œ V2 æ•°æ®é›†,å¹¶ä¸åŠ¨åŠ›å­¦- 400 æ•°æ®é›†çš„æœ€ä½³æ€§èƒ½,æˆ‘ä»¬è¿›è¡Œæ·±å…¥æ¶ˆèç ”ç©¶å’Œ TDN plor å¯è§†åŒ–ç»“æœ,å¸Œæœ›æä¾›æœ‰è§åœ°çš„åˆ†æå»ºæ¨¡æ—¶é—´å·®å¼‚ã€‚æˆ‘ä»¬åœ¨https://github.com/MCG-NJU/TDNä¸Šå‘å¸ƒäº†ä»£ç ã€‚</p><h2 id="ç›¸å…³å·¥ä½œ"><a class="header-anchor" href="#ç›¸å…³å·¥ä½œ">#</a>ç›¸å…³å·¥ä½œ</h2><h3 id="æ—¶åºå·®åˆ†è¡¨å¾"><a class="header-anchor" href="#æ—¶åºå·®åˆ†è¡¨å¾">#</a>æ—¶åºå·®åˆ†è¡¨å¾</h3><p>ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼Œ<code>RGBå·®åˆ†</code>å’Œ<code>ç‰¹å¾å·®åˆ†</code>ã€‚</p><p>ä½œè€…è¯´è¿™äº›æ–¹æ³•åªæ˜¯ç®€å•åœ°è¿›è¡Œäº†å·®åˆ†ï¼Œç›¸æ¯”<code>3Då·ç§¯</code>è€Œè¨€ï¼Œè·å¾—çš„ç ”ç©¶å…³æ³¨æ›´å°‘ã€‚</p><blockquote><p>simply used a simple difference operator for single-level motion extraction and received less research attention than 3D convolutions.</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¡Œä¸ºè¯†åˆ« </tag>
            
            <tag> action recognition </tag>
            
            <tag> CVPR </tag>
            
            <tag> 2021 </tag>
            
            <tag> CVPR 2021 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šå¿«ä¹çš„Linuxå‘½ä»¤è¡Œã€‹ç¬”è®°ï¼ˆ26ï¼‰</title>
      <link href="/blog/2021/04/26/the-linux-command-line-note-26/"/>
      <url>/blog/2021/04/26/the-linux-command-line-note-26/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹"><a class="header-anchor" href="#ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹">#</a>ã€Šå¿«ä¹çš„ Linux å‘½ä»¤è¡Œã€‹</h1><a id="more"></a><h2 id=""><a class="header-anchor" href="#">#</a>[[]]</h2><p><code>[[string1 =~ regex]]</code>å¯ä»¥åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># test-integer2: evaluate the value of an integer.</span></span><br><span class="line"></span><br><span class="line">INT=-5</span><br><span class="line"><span class="keyword">if</span> [[ <span class="string">"<span class="variable">$INT</span>"</span> =~ ^-?[0-9]+$ ]]; <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$INT</span> -eq 0 ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"INT is zero."</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">if</span> [ <span class="variable">$INT</span> -lt 0 ]; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">"INT is negative."</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">"INT is positive."</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">        <span class="keyword">if</span> [ $((INT % 2)) -eq 0 ]; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">"INT is even."</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">"INT is odd."</span></span><br><span class="line"><span class="keyword">fi</span> <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"INT is not an integer."</span> &gt;&amp;2</span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ chmod +x <span class="built_in">test</span>-integer2.sh</span><br><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ ./<span class="built_in">test</span>-integer2.sh</span><br><span class="line">INT is negative.</span><br><span class="line">INT is odd.</span><br></pre></td></tr></table></figure><p><code>[[ ]]</code>æ·»åŠ çš„å¦ä¸€ä¸ªåŠŸèƒ½æ˜¯<code>==</code>æ“ä½œç¬¦æ”¯æŒç±»å‹åŒ¹é…ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">FILE=foo.bar</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$FILE</span> == foo.* ]]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"<span class="variable">$FILE</span> matches pattern 'foo.*'"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ chmod +x <span class="built_in">test</span>-equal.sh</span><br><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ ./<span class="built_in">test</span>-equal.sh</span><br><span class="line">foo.bar matches pattern <span class="string">'foo.*'</span></span><br></pre></td></tr></table></figure><h2 id="-2"><a class="header-anchor" href="#-2">#</a>(( ))</h2><p><code>(( ))</code>è¢«ç”¨æ¥æ‰§è¡Œç®—æœ¯çœŸæµ‹è¯•ï¼Œå¦‚æœç®—æœ¯è®¡ç®—çš„ç»“æœæ˜¯éé›¶å€¼ï¼Œåˆ™å…¶æµ‹è¯•å€¼ä¸ºçœŸã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ <span class="keyword">if</span> ((1)); <span class="keyword">then</span> <span class="built_in">echo</span> <span class="string">"It is true."</span>; <span class="keyword">fi</span></span><br><span class="line">It is <span class="literal">true</span>.</span><br><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ <span class="keyword">if</span> ((0)); <span class="keyword">then</span> <span class="built_in">echo</span> <span class="string">"It is true."</span>; f</span><br></pre></td></tr></table></figure><h2 id="read"><a class="header-anchor" href="#read">#</a>read</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">read</span> --<span class="built_in">help</span></span><br><span class="line"><span class="built_in">read</span>: <span class="built_in">read</span> [-ers] [-a array] [-d delim] [-i text] [-n nchars] [-N nchars] [-p prompt] [-t timeout] [-u fd] [name ...]</span><br><span class="line">    Read a line from the standard input and split it into fields.</span><br><span class="line"></span><br><span class="line">    Reads a single line from the standard input, or from file descriptor FD</span><br><span class="line">    <span class="keyword">if</span> the -u option is supplied.  The line is split into fields as with word</span><br><span class="line">    splitting, and the first word is assigned to the first NAME, the second</span><br><span class="line">    word to the second NAME, and so on, with any leftover words assigned to</span><br><span class="line">    the last NAME.  Only the characters found <span class="keyword">in</span> <span class="variable">$IFS</span> are recognized as word</span><br><span class="line">    delimiters.</span><br><span class="line"></span><br><span class="line">    If no NAMEs are supplied, the line <span class="built_in">read</span> is stored <span class="keyword">in</span> the REPLY variable.</span><br><span class="line"></span><br><span class="line">    Options:</span><br><span class="line">      -a arrayassign the words <span class="built_in">read</span> to sequential indices of the array</span><br><span class="line">    variable ARRAY, starting at zero</span><br><span class="line">      -d delim<span class="built_in">continue</span> until the first character of DELIM is <span class="built_in">read</span>, rather</span><br><span class="line">    than newline</span><br><span class="line">      -euse Readline to obtain the line <span class="keyword">in</span> an interactive shell</span><br><span class="line">      -i textuse TEXT as the initial text <span class="keyword">for</span> Readline</span><br><span class="line">      -n nchars<span class="built_in">return</span> after reading NCHARS characters rather than waiting</span><br><span class="line">    <span class="keyword">for</span> a newline, but honor a delimiter <span class="keyword">if</span> fewer than</span><br><span class="line">    NCHARS characters are <span class="built_in">read</span> before the delimiter</span><br><span class="line">      -N nchars<span class="built_in">return</span> only after reading exactly NCHARS characters, unless</span><br><span class="line">    EOF is encountered or <span class="built_in">read</span> <span class="built_in">times</span> out, ignoring any</span><br><span class="line">    delimiter</span><br><span class="line">      -p promptoutput the string PROMPT without a trailing newline before</span><br><span class="line">    attempting to <span class="built_in">read</span></span><br><span class="line">      -r<span class="keyword">do</span> not allow backslashes to escape any characters</span><br><span class="line">      -s<span class="keyword">do</span> not <span class="built_in">echo</span> input coming from a terminal</span><br><span class="line">      -t timeouttime out and <span class="built_in">return</span> failure <span class="keyword">if</span> a complete line of</span><br><span class="line">    input is not <span class="built_in">read</span> within TIMEOUT seconds.  The value of the</span><br><span class="line">    TMOUT variable is the default timeout.  TIMEOUT may be a</span><br><span class="line">    fractional number.  If TIMEOUT is 0, <span class="built_in">read</span> returns</span><br><span class="line">    immediately, without trying to <span class="built_in">read</span> any data, returning</span><br><span class="line">    success only <span class="keyword">if</span> input is available on the specified</span><br><span class="line">    file descriptor.  The <span class="built_in">exit</span> status is greater than 128</span><br><span class="line">    <span class="keyword">if</span> the timeout is exceeded</span><br><span class="line">      -u fd<span class="built_in">read</span> from file descriptor FD instead of the standard input</span><br><span class="line"></span><br><span class="line">    Exit Status:</span><br><span class="line">    The <span class="built_in">return</span> code is zero, unless end-of-file is encountered, <span class="built_in">read</span> <span class="built_in">times</span> out</span><br><span class="line">    (<span class="keyword">in</span> <span class="built_in">which</span> <span class="keyword">case</span> it<span class="string">'s greater than 128), a variable assignment error occurs,</span></span><br><span class="line"><span class="string">    or an invalid file descriptor is supplied as the argument to -u.</span></span><br></pre></td></tr></table></figure><p><code>read</code>å‘½ä»¤å¯ä»¥ç”¨æ¥è¯»å–é”®ç›˜è¾“å…¥ï¼Œå½“ä½¿ç”¨é‡å®šå‘çš„æ—¶å€™ï¼Œè¯»å–æ–‡ä»¶ä¸­çš„ä¸€è¡Œæ•°æ®ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># read-integer: evaluate the value of an integer.</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> -n <span class="string">"Please enter an integer -&gt; "</span></span><br><span class="line"><span class="built_in">read</span> int</span><br><span class="line"><span class="keyword">if</span> [[ <span class="string">"<span class="variable">$int</span>"</span> =~ ^-?[0-9]+$ ]]; <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$int</span> -eq 0 ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"<span class="variable">$int</span> is zero."</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">if</span> [ <span class="variable">$int</span> -lt 0 ]; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">"<span class="variable">$int</span> is negative."</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">"<span class="variable">$int</span> is positive."</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">        <span class="keyword">if</span> [ $((int % 2)) -eq 0 ]; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">"<span class="variable">$int</span> is even."</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">"<span class="variable">$int</span> is odd."</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"Input value is not an integer."</span> &gt;&amp;2</span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ chmod +x <span class="built_in">read</span>-integer.sh</span><br><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ ./<span class="built_in">read</span>-integer.sh</span><br><span class="line">Please enter an <span class="built_in">integer</span> -&gt; q</span><br><span class="line">Input value is not an <span class="built_in">integer</span>.</span><br><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ ./<span class="built_in">read</span>-integer.sh</span><br><span class="line">Please enter an <span class="built_in">integer</span> -&gt; 1</span><br><span class="line">1 is positive.</span><br><span class="line">1 is odd.</span><br><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ ./<span class="built_in">read</span>-integer.sh</span><br><span class="line">Please enter an <span class="built_in">integer</span> -&gt; 0</span><br><span class="line">0 is zero.</span><br><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ ./<span class="built_in">read</span>-integer.sh</span><br><span class="line">Please enter an <span class="built_in">integer</span> -&gt; -5</span><br><span class="line">-5 is negative.</span><br><span class="line">-5 is odd.</span><br></pre></td></tr></table></figure><p>å¦‚æœ<code>read</code>å‘½ä»¤æ¥å—åˆ°å˜é‡å€¼æ•°ç›®å°‘äºæœŸæœ›çš„æ•°å­—ï¼Œé‚£ä¹ˆé¢å¤–çš„å˜é‡å€¼ä¸ºç©ºï¼Œè€Œå¤šä½™çš„è¾“å…¥æ•°æ®åˆ™ä¼šè¢«åŒ…å«åˆ°æœ€åä¸€ä¸ªå˜é‡ä¸­ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># read-multiple: read multiple values from keyboard</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> -n <span class="string">"Enter one or more values &gt; "</span></span><br><span class="line"><span class="built_in">read</span> var1 var2 var3 var4 var5</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"var1 = '<span class="variable">$var1</span>'"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"var2 = '<span class="variable">$var2</span>'"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"var3 = '<span class="variable">$var3</span>'"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"var4 = '<span class="variable">$var4</span>'"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"var5 = '<span class="variable">$var5</span>'"</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ chmod +x <span class="built_in">read</span>-multiple.sh</span><br><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ ./<span class="built_in">read</span>-multiple.sh</span><br><span class="line">Enter one or more values &gt; a b c d e</span><br><span class="line">var1 = <span class="string">'a'</span></span><br><span class="line">var2 = <span class="string">'b'</span></span><br><span class="line">var3 = <span class="string">'c'</span></span><br><span class="line">var4 = <span class="string">'d'</span></span><br><span class="line">var5 = <span class="string">'e'</span></span><br><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ ./<span class="built_in">read</span>-multiple.sh</span><br><span class="line">Enter one or more values &gt; a</span><br><span class="line">var1 = <span class="string">'a'</span></span><br><span class="line">var2 = <span class="string">''</span></span><br><span class="line">var3 = <span class="string">''</span></span><br><span class="line">var4 = <span class="string">''</span></span><br><span class="line">var5 = <span class="string">''</span></span><br><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ ./<span class="built_in">read</span>-multiple.sh</span><br><span class="line">Enter one or more values &gt; a b c d e f g</span><br><span class="line">var1 = <span class="string">'a'</span></span><br><span class="line">var2 = <span class="string">'b'</span></span><br><span class="line">var3 = <span class="string">'c'</span></span><br><span class="line">var4 = <span class="string">'d'</span></span><br><span class="line">var5 = <span class="string">'e f g</span></span><br></pre></td></tr></table></figure><p>å¦‚æœ<code>read</code>å‘½ä»¤ä¹‹åæ²¡æœ‰åˆ—å‡ºå˜é‡åï¼Œåˆ™ä¸€ä¸ª<code>shell</code>å˜é‡<code>REPLY</code>å°†ä¼šåŒ…å«æ‰€æœ‰çš„è¾“å…¥ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># read-single: read multiple values into default variable</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> -n <span class="string">"Enter one or more values &gt; "</span></span><br><span class="line"><span class="built_in">read</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"REPLY = '<span class="variable">$REPLY</span>'"</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ chmod +x <span class="built_in">read</span>-single.sh</span><br><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ ./<span class="built_in">read</span>-single.sh</span><br><span class="line">Enter one or more values &gt; a b c d</span><br><span class="line">REPLY = <span class="string">'a b c d'</span></span><br></pre></td></tr></table></figure><p><code>-p</code>é€‰é¡¹ï¼ŒæŒ‡å®šæç¤ºä¿¡æ¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># read-single: read multiple values into default variable</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"Enter one or more values &gt; "</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"REPLY = '<span class="variable">$REPLY</span>'"</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ chmod +x <span class="built_in">read</span>-single2.sh</span><br><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ ./<span class="built_in">read</span>-single2.sh</span><br><span class="line">Enter one or more values &gt; 127309 218741</span><br><span class="line">REPLY = <span class="string">'127309 218741'</span></span><br></pre></td></tr></table></figure><p><code>-t</code>æŒ‡å®šè¶…æ—¶æ—¶é—´ã€‚<br><code>-s</code>æŒ‡å®šä¸åœ¨å±å¹•ä¸Šæ˜¾ç¤ºè¾“å…¥çš„å­—ç¬¦ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># read-secret: input a secret pass phrase</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$(date +%Y%m%d-%H%M%S)</span>"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">read</span> -t 10 -sp <span class="string">"Enter secret pass phrase &gt; "</span> secret_pass; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"\nSecret pass phrase = '<span class="variable">$secret_pass</span>'"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"<span class="variable">$(date +%Y%m%d-%H%M%S)</span>"</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"\nInput timed out"</span> &gt;&amp;2</span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ chmod +x <span class="built_in">read</span>-secret.sh</span><br><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ ./<span class="built_in">read</span>-secret.sh</span><br><span class="line">20210426-154024</span><br><span class="line">Enter secret pass phrase &gt; 20210426-154034</span><br><span class="line">\nInput timed out</span><br><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ ./<span class="built_in">read</span>-secret.sh</span><br><span class="line">20210426-154040</span><br><span class="line">Enter secret pass phrase &gt; \nSecret pass phrase = <span class="string">'qqqaqwerqwe'</span></span><br><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$</span><br></pre></td></tr></table></figure><h2 id="ifs"><a class="header-anchor" href="#ifs">#</a>IFS</h2><p>å†…éƒ¨å­—ç¬¦åˆ†éš”ç¬¦ï¼Œé»˜è®¤å€¼åŒ…å«ä¸€ä¸ª<code>ç©ºæ ¼</code>ã€ä¸€ä¸ª<code>tab</code>å’Œä¸€ä¸ª<code>æ¢è¡Œç¬¦</code>ï¼Œæ¯ä¸€ä¸ªéƒ½ä¼šæŠŠå­—æ®µåˆ†å‰²å¼€ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># read-ifs: read fields from a file</span></span><br><span class="line"></span><br><span class="line">FILE=/etc/passwd</span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"Enter a user name &gt; "</span> user_name</span><br><span class="line">file_info=$(grep <span class="string">"^<span class="variable">$user_name</span>:"</span> <span class="variable">$FILE</span>)</span><br><span class="line"><span class="keyword">if</span> [ -n <span class="string">"<span class="variable">$file_info</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">    IFS=<span class="string">":"</span> <span class="built_in">read</span> user pw uid gid name home shell &lt;&lt;&lt;<span class="string">"<span class="variable">$file_info</span>"</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"User = '<span class="variable">$user</span>'"</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"UID = '<span class="variable">$uid</span>'"</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"GID = '<span class="variable">$gid</span>'"</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"Full Name = '<span class="variable">$name</span>'"</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"Home Dir. = '<span class="variable">$home</span>'"</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"Shell = '<span class="variable">$shell</span>'"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"No such user '<span class="variable">$user_name</span>'"</span> &gt;&amp;2</span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ chmod +x <span class="built_in">read</span>-ifs.sh</span><br><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ ./<span class="built_in">read</span>-ifs.sh</span><br><span class="line">Enter a user name &gt; onns</span><br><span class="line">No such user <span class="string">'onns'</span></span><br><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ ./<span class="built_in">read</span>-ifs.sh</span><br><span class="line">Enter a user name &gt; hs</span><br><span class="line">User = <span class="string">'hs'</span></span><br><span class="line">UID = <span class="string">'1000'</span></span><br><span class="line">GID = <span class="string">'1000'</span></span><br><span class="line">Full Name = <span class="string">'hs,,,'</span></span><br><span class="line">Home Dir. = <span class="string">'/home/hs'</span></span><br><span class="line">Shell = <span class="string">'/bin/bash'</span></span><br><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ ./<span class="built_in">read</span>-ifs.sh</span><br><span class="line">Enter a user name &gt; git</span><br><span class="line">User = <span class="string">'git'</span></span><br><span class="line">UID = <span class="string">'1001'</span></span><br><span class="line">GID = <span class="string">'1001'</span></span><br><span class="line">Full Name = <span class="string">',,,'</span></span><br><span class="line">Home Dir. = <span class="string">'/home/git'</span></span><br><span class="line">Shell = <span class="string">'/usr/bin/git-shell'</span></span><br></pre></td></tr></table></figure><p><code>shell</code>å…è®¸åœ¨ä¸€ä¸ªå‘½ä»¤ä¹‹å‰ç»™ä¸€ä¸ªæˆ–å¤šä¸ªå˜é‡èµ‹å€¼ã€‚è¿™äº›èµ‹å€¼ä¼š<strong>æš‚æ—¶</strong>æ”¹å˜ä¹‹åçš„å‘½ä»¤çš„ç¯å¢ƒå˜é‡ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">IFS=<span class="string">":"</span> <span class="built_in">read</span> user pw uid gid name home shell &lt;&lt;&lt;<span class="string">"<span class="variable">$file_info</span>"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç­‰ä»·äºğŸ‘‡</span></span><br><span class="line"></span><br><span class="line">OLD_IFS=<span class="string">"<span class="variable">$IFS</span>"</span></span><br><span class="line">IFS=<span class="string">":"</span></span><br><span class="line"><span class="built_in">read</span> user pw uid gid name home shell &lt;&lt;&lt; <span class="string">"<span class="variable">$file_info</span>"</span></span><br><span class="line">IFS=<span class="string">"<span class="variable">$OLD_IFS</span>"</span></span><br></pre></td></tr></table></figure><p>ä¸èƒ½æŠŠç®¡é“ç”¨åœ¨<code>read</code>ä¸Šã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># read-validate: validate input</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">invalid_input</span></span>() &#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"Invalid input '<span class="variable">$REPLY</span>'"</span> &gt;&amp;2</span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"Enter a single item &gt; "</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># input is empty (invalid)</span></span><br><span class="line">[[ -z <span class="variable">$REPLY</span> ]] &amp;&amp; invalid_input</span><br><span class="line"></span><br><span class="line"><span class="comment"># input is multiple items (invalid)</span></span><br><span class="line">(($(<span class="built_in">echo</span> <span class="variable">$REPLY</span> | wc -w) &gt; 1)) &amp;&amp; invalid_input</span><br><span class="line"></span><br><span class="line"><span class="comment"># is input a valid filename?</span></span><br><span class="line"><span class="keyword">if</span> [[ <span class="variable">$REPLY</span> =~ ^[-[:alnum:]\._]+$ ]]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"'<span class="variable">$REPLY</span>' is a valid filename."</span></span><br><span class="line">    <span class="keyword">if</span> [[ -e <span class="variable">$REPLY</span> ]]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"And file '<span class="variable">$REPLY</span>' exists."</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"However, file '<span class="variable">$REPLY</span>' does not exist."</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># is input a floating point number?</span></span><br><span class="line">    <span class="keyword">if</span> [[ <span class="variable">$REPLY</span> =~ ^-?[[:digit:]]*\.[[:digit:]]+$ ]]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"'<span class="variable">$REPLY</span>' is a floating point number."</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"'<span class="variable">$REPLY</span>' is not a floating point number."</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># is input an integer?</span></span><br><span class="line">    <span class="keyword">if</span> [[ <span class="variable">$REPLY</span> =~ ^-?[[:digit:]]+$ ]]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"'<span class="variable">$REPLY</span>' is an integer."</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"'<span class="variable">$REPLY</span>' is not an integer."</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"The string '<span class="variable">$REPLY</span>' is not a valid filename."</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ chmod +x <span class="built_in">read</span>-validate.sh</span><br><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ ./<span class="built_in">read</span>-validate.sh</span><br><span class="line">Enter a single item &gt; <span class="built_in">read</span>-validate.sh</span><br><span class="line"><span class="string">'read-validate.sh'</span> is a valid filename.</span><br><span class="line">And file <span class="string">'read-validate.sh'</span> exists.</span><br><span class="line"><span class="string">'read-validate.sh'</span> is not a floating point number.</span><br><span class="line"><span class="string">'read-validate.sh'</span> is not an <span class="built_in">integer</span>.</span><br><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ ./<span class="built_in">read</span>-validate.sh</span><br><span class="line">Enter a single item &gt; -1.234</span><br><span class="line"><span class="string">'-1.234'</span> is a valid filename.</span><br><span class="line">However, file <span class="string">'-1.234'</span> does not exist.</span><br><span class="line"><span class="string">'-1.234'</span> is a floating point number.</span><br><span class="line"><span class="string">'-1.234'</span> is not an <span class="built_in">integer</span>.</span><br><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ ./<span class="built_in">read</span>-validate.sh</span><br><span class="line">Enter a single item &gt; -3</span><br><span class="line"><span class="string">'-3'</span> is a valid filename.</span><br><span class="line">However, file <span class="string">'-3'</span> does not exist.</span><br><span class="line"><span class="string">'-3'</span> is not a floating point number.</span><br><span class="line"><span class="string">'-3'</span> is an <span class="built_in">integer</span>.</span><br><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ ./<span class="built_in">read</span>-validate.sh</span><br><span class="line">Enter a single item &gt; ,,..eqwehu</span><br><span class="line">The string <span class="string">',,..eqwehu'</span> is not a valid filename.</span><br></pre></td></tr></table></figure><h2 id="è¿½è¸ª"><a class="header-anchor" href="#è¿½è¸ª">#</a>è¿½è¸ª</h2><p><code>set</code>å‘½ä»¤åŠ ä¸Š<code>-x</code>é€‰é¡¹æ¥å¯åŠ¨è¿½è¸ªï¼Œ<code>+x</code>é€‰é¡¹å…³é—­è¿½è¸ªã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># trouble: script to demonstrate common errors</span></span><br><span class="line"></span><br><span class="line">number=1</span><br><span class="line"><span class="built_in">set</span> -x <span class="comment"># Turn on tracing</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$number</span> = 1 ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"Number is equal to 1."</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"Number is not equal to 1."</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="built_in">set</span> +x <span class="comment"># Turn off tracing</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ chmod +x trouble.sh</span><br><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ ./trouble.sh</span><br><span class="line">+ <span class="string">'['</span> 1 = 1 <span class="string">']'</span></span><br><span class="line">+ <span class="built_in">echo</span> <span class="string">'Number is equal to 1.'</span></span><br><span class="line">Number is equal to 1.</span><br><span class="line">+ <span class="built_in">set</span> +x</span><br></pre></td></tr></table></figure><h2 id="case"><a class="header-anchor" href="#case">#</a>case</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> word <span class="keyword">in</span></span><br><span class="line">    [pattern [| pattern]...) commands ;;]...</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure><table><thead><tr><th style="text-align:left">æ¨¡å¼</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left"><code>a)</code></td><td style="text-align:left">è‹¥å•è¯ä¸º<code>a</code>ï¼Œåˆ™åŒ¹é…</td></tr><tr><td style="text-align:left"><code>[[:alpha:]])</code></td><td style="text-align:left">è‹¥å•è¯æ˜¯ä¸€ä¸ªå­—æ¯å­—ç¬¦ï¼Œåˆ™åŒ¹é…</td></tr><tr><td style="text-align:left"><code>???)</code></td><td style="text-align:left">è‹¥å•è¯åªæœ‰<code>3</code>ä¸ªå­—ç¬¦ï¼Œåˆ™åŒ¹é…</td></tr><tr><td style="text-align:left"><code>*.txt)</code></td><td style="text-align:left">è‹¥å•è¯ä»¥<code>.txt</code>å­—ç¬¦ç»“å°¾ï¼Œåˆ™åŒ¹é…</td></tr><tr><td style="text-align:left"><code>*)</code></td><td style="text-align:left">åŒ¹é…ä»»æ„å•è¯</td></tr></tbody></table><p>æ·»åŠ <code>;;&amp;</code>çš„è¯­æ³•å…è®¸<code>case</code>è¯­å¥ç»§ç»­æ‰§è¡Œä¸‹ä¸€æ¡æµ‹è¯•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># case4-2: test a character</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span> -n 1 -p <span class="string">"Type a character &gt; "</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="keyword">case</span> <span class="variable">$REPLY</span> <span class="keyword">in</span></span><br><span class="line">    [[:upper:]]) <span class="built_in">echo</span> <span class="string">"'<span class="variable">$REPLY</span>' is upper case."</span> ;;&amp;</span><br><span class="line">    [[:lower:]]) <span class="built_in">echo</span> <span class="string">"'<span class="variable">$REPLY</span>' is lower case."</span> ;;&amp;</span><br><span class="line">    [[:alpha:]]) <span class="built_in">echo</span> <span class="string">"'<span class="variable">$REPLY</span>' is alphabetic."</span> ;;&amp;</span><br><span class="line">    [[:digit:]]) <span class="built_in">echo</span> <span class="string">"'<span class="variable">$REPLY</span>' is a digit."</span> ;;&amp;</span><br><span class="line">    [[:graph:]]) <span class="built_in">echo</span> <span class="string">"'<span class="variable">$REPLY</span>' is a visible character."</span> ;;&amp;</span><br><span class="line">    [[:punct:]]) <span class="built_in">echo</span> <span class="string">"'<span class="variable">$REPLY</span>' is a punctuation symbol."</span> ;;&amp;</span><br><span class="line">    [[:space:]]) <span class="built_in">echo</span> <span class="string">"'<span class="variable">$REPLY</span>' is a whitespace character."</span> ;;&amp;</span><br><span class="line">    [[:xdigit:]]) <span class="built_in">echo</span> <span class="string">"'<span class="variable">$REPLY</span>' is a hexadecimal digit."</span> ;;&amp;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ chmod +x case4-2.sh</span><br><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ ./case4-2.sh</span><br><span class="line">Type a character &gt; a</span><br><span class="line"><span class="string">'a'</span> is lower <span class="keyword">case</span>.</span><br><span class="line"><span class="string">'a'</span> is alphabetic.</span><br><span class="line"><span class="string">'a'</span> is a visible character.</span><br><span class="line"><span class="string">'a'</span> is a hexadecimal digit.</span><br></pre></td></tr></table></figure><h2 id="è®¿é—®å‘½ä»¤è¡Œ"><a class="header-anchor" href="#è®¿é—®å‘½ä»¤è¡Œ">#</a>è®¿é—®å‘½ä»¤è¡Œ</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># posit-param: script to view command line parameters</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"\$0 = <span class="variable">$0</span></span></span><br><span class="line"><span class="string">\$1 = <span class="variable">$1</span></span></span><br><span class="line"><span class="string">\$2 = <span class="variable">$2</span></span></span><br><span class="line"><span class="string">\$3 = <span class="variable">$3</span></span></span><br><span class="line"><span class="string">\$4 = <span class="variable">$4</span></span></span><br><span class="line"><span class="string">\$5 = <span class="variable">$5</span></span></span><br><span class="line"><span class="string">\$6 = <span class="variable">$6</span></span></span><br><span class="line"><span class="string">\$7 = <span class="variable">$7</span></span></span><br><span class="line"><span class="string">\$8 = <span class="variable">$8</span></span></span><br><span class="line"><span class="string">\$9 = <span class="variable">$9</span>"</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ chmod +x posit-param.sh</span><br><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ ./posit-param.sh</span><br><span class="line"><span class="variable">$0</span> = ./posit-param.sh</span><br><span class="line"><span class="variable">$1</span> =</span><br><span class="line"><span class="variable">$2</span> =</span><br><span class="line"><span class="variable">$3</span> =</span><br><span class="line"><span class="variable">$4</span> =</span><br><span class="line"><span class="variable">$5</span> =</span><br><span class="line"><span class="variable">$6</span> =</span><br><span class="line"><span class="variable">$7</span> =</span><br><span class="line"><span class="variable">$8</span> =</span><br><span class="line"><span class="variable">$9</span> =</span><br><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ ./posit-param.sh a b c d</span><br><span class="line"><span class="variable">$0</span> = ./posit-param.sh</span><br><span class="line"><span class="variable">$1</span> = a</span><br><span class="line"><span class="variable">$2</span> = b</span><br><span class="line"><span class="variable">$3</span> = c</span><br><span class="line"><span class="variable">$4</span> = d</span><br><span class="line"><span class="variable">$5</span> =</span><br><span class="line"><span class="variable">$6</span> =</span><br><span class="line"><span class="variable">$7</span> =</span><br><span class="line"><span class="variable">$8</span> =</span><br><span class="line"><span class="variable">$9</span> =</span><br></pre></td></tr></table></figure><p>è¶…è¿‡<code>9</code>çš„å˜é‡ç”¨èŠ±æ‹¬å·åŒ…è£¹<code>${10}</code>ã€‚</p><p><code>$#</code>å¯ä»¥ç¡®å®šå‚æ•°ä¸ªæ•°ã€‚</p><p>æ‰§è¡Œä¸€æ¬¡<code>shift</code>å‘½ä»¤å¯ä»¥è®©æ‰€æœ‰çš„ä½ç½®å‚æ•°<strong>å‘ä¸‹ç§»åŠ¨ä¸€ä¸ªä½ç½®</strong>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># posit-param: script to view command line parameters</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"\$0 = <span class="variable">$0</span></span></span><br><span class="line"><span class="string">\$1 = <span class="variable">$1</span></span></span><br><span class="line"><span class="string">\$2 = <span class="variable">$2</span></span></span><br><span class="line"><span class="string">\$3 = <span class="variable">$3</span></span></span><br><span class="line"><span class="string">\$4 = <span class="variable">$4</span></span></span><br><span class="line"><span class="string">\$5 = <span class="variable">$5</span></span></span><br><span class="line"><span class="string">\$6 = <span class="variable">$6</span></span></span><br><span class="line"><span class="string">\$7 = <span class="variable">$7</span></span></span><br><span class="line"><span class="string">\$8 = <span class="variable">$8</span></span></span><br><span class="line"><span class="string">\$9 = <span class="variable">$9</span>"</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ chmod +x posit-param2.sh</span><br><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ ./posit-param2.sh</span><br><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ ./posit-param2.sh a b c d</span><br><span class="line">Argument 1 = a</span><br><span class="line">Argument 2 = b</span><br><span class="line">Argument 3 = c</span><br><span class="line">Argument 4 = d</span><br><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ ./posit-param2.sh *</span><br><span class="line">Argument 1 = case4-2.sh</span><br><span class="line">Argument 2 = dirlist-bin.txt</span><br><span class="line">Argument 3 = dirlist-sbin.txt</span><br><span class="line">Argument 4 = dirlist-usr-bin.txt</span><br><span class="line">Argument 5 = dirlist-usr-sbin.txt</span><br><span class="line">Argument 6 = distros-by-date.txt</span><br><span class="line">Argument 7 = distros-dates.txt</span><br><span class="line">Argument 8 = distros-key-names.txt</span><br><span class="line">Argument 9 = distros-key-vernums.txt</span><br><span class="line">Argument 10 = distros-names.txt</span><br><span class="line">Argument 11 = distros-vernums.txt</span><br><span class="line">Argument 12 = distros-versions.txt</span><br><span class="line">Argument 13 = distros.txt</span><br><span class="line">Argument 14 = file1.txt</span><br><span class="line">Argument 15 = file2.txt</span><br><span class="line">Argument 16 = fmt-code.txt</span><br><span class="line">Argument 17 = ngrok</span><br><span class="line">Argument 18 = onns.txt</span><br><span class="line">Argument 19 = p.tar</span><br><span class="line">Argument 20 = p2.tar</span><br><span class="line">Argument 21 = patchfile.txt</span><br><span class="line">Argument 22 = phonelist.txt</span><br><span class="line">Argument 23 = playground</span><br><span class="line">Argument 24 = posit-param.sh</span><br><span class="line">Argument 25 = posit-param2.sh</span><br><span class="line">Argument 26 = <span class="built_in">read</span>-ifs.sh</span><br><span class="line">Argument 27 = <span class="built_in">read</span>-integer.sh</span><br><span class="line">Argument 28 = <span class="built_in">read</span>-multiple.sh</span><br><span class="line">Argument 29 = <span class="built_in">read</span>-secret.sh</span><br><span class="line">Argument 30 = <span class="built_in">read</span>-single.sh</span><br><span class="line">Argument 31 = <span class="built_in">read</span>-single2.sh</span><br><span class="line">Argument 32 = <span class="built_in">read</span>-validate.sh</span><br><span class="line">Argument 33 = t.sh</span><br><span class="line">Argument 34 = <span class="built_in">test</span>-equal.sh</span><br><span class="line">Argument 35 = <span class="built_in">test</span>-file.sh</span><br><span class="line">Argument 36 = <span class="built_in">test</span>-integer.sh</span><br><span class="line">Argument 37 = <span class="built_in">test</span>-integer2.sh</span><br><span class="line">Argument 38 = <span class="built_in">test</span>-string.sh</span><br><span class="line">Argument 39 = test_local.sh</span><br><span class="line">Argument 40 = trouble.sh</span><br><span class="line">Argument 41 = vfos</span><br></pre></td></tr></table></figure><p><code>$*</code>å±•å¼€æˆä¸€ä¸ªä»<code>1</code>å¼€å§‹çš„ä½ç½®å‚æ•°åˆ—è¡¨ã€‚å½“å®ƒè¢«ç”¨åŒå¼•å·å¼•èµ·æ¥çš„æ—¶å€™ï¼Œå±•å¼€æˆä¸€ä¸ªç”±åŒå¼•å·å¼•èµ·æ¥çš„å­—ç¬¦ä¸²ï¼ŒåŒ…å«äº†æ‰€æœ‰çš„ä½ç½®å‚æ•°ï¼Œæ¯ä¸ªä½ç½®å‚æ•°ç”±<code>shell</code>å˜é‡<code>IFS</code>çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼ˆé»˜è®¤ä¸ºä¸€ä¸ªç©ºæ ¼ï¼‰åˆ†éš”å¼€ã€‚</p><p><code>%@</code>å±•å¼€æˆä¸€ä¸ªä»<code>1</code>å¼€å§‹çš„ä½ç½®å‚æ•°åˆ—è¡¨ã€‚å½“å®ƒè¢«ç”¨åŒå¼•å·å¼•èµ·æ¥çš„æ—¶å€™ï¼Œå®ƒæŠŠæ¯ä¸€ä¸ªä½ç½®å‚æ•°å±•å¼€æˆä¸€ä¸ªç”±åŒå¼•å·å¼•èµ·æ¥çš„åˆ†å¼€çš„å­—ç¬¦ä¸²ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># posit-params3 : script to demonstrate $* and $@</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">print_params</span></span>() &#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"\$1 = <span class="variable">$1</span>"</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"\$2 = <span class="variable">$2</span>"</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"\$3 = <span class="variable">$3</span>"</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"\$4 = <span class="variable">$4</span>"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">pass_params</span></span>() &#123;</span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">"\n"</span> <span class="string">'$* :'</span>; print_params $*</span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">"\n"</span> <span class="string">'"$*" :'</span>; print_params <span class="string">"$*"</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">"\n"</span> <span class="string">'$@ :'</span>; print_params <span class="variable">$@</span></span><br><span class="line">    <span class="built_in">echo</span> -e <span class="string">"\n"</span> <span class="string">'"$@" :'</span>; print_params <span class="string">"<span class="variable">$@</span>"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pass_params <span class="string">"word"</span> <span class="string">"words with spaces"</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ chmod +x posit-params3.sh</span><br><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ ./posit-params3.sh</span><br><span class="line"></span><br><span class="line"> $* :</span><br><span class="line"><span class="variable">$1</span> = word</span><br><span class="line"><span class="variable">$2</span> = words</span><br><span class="line"><span class="variable">$3</span> = with</span><br><span class="line"><span class="variable">$4</span> = spaces</span><br><span class="line"></span><br><span class="line"> <span class="string">"$*"</span> :</span><br><span class="line"><span class="variable">$1</span> = word words with spaces</span><br><span class="line"><span class="variable">$2</span> =</span><br><span class="line"><span class="variable">$3</span> =</span><br><span class="line"><span class="variable">$4</span> =</span><br><span class="line"></span><br><span class="line"> <span class="variable">$@</span> :</span><br><span class="line"><span class="variable">$1</span> = word</span><br><span class="line"><span class="variable">$2</span> = words</span><br><span class="line"><span class="variable">$3</span> = with</span><br><span class="line"><span class="variable">$4</span> = spaces</span><br><span class="line"></span><br><span class="line"> <span class="string">"<span class="variable">$@</span>"</span> :</span><br><span class="line"><span class="variable">$1</span> = word</span><br><span class="line"><span class="variable">$2</span> = words with spaces</span><br><span class="line"><span class="variable">$3</span> =</span><br><span class="line"><span class="variable">$4</span> =</span><br></pre></td></tr></table></figure><p><code>$@</code>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯æœ€æœ‰ç”¨çš„æ–¹æ³•ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># sys_info_page: program to output a system information page</span></span><br><span class="line"></span><br><span class="line">PROGNAME=$(basename <span class="variable">$0</span>)</span><br><span class="line">TITLE=<span class="string">"System Information Report For <span class="variable">$HOSTNAME</span>"</span></span><br><span class="line">CURRENT_TIME=$(date +<span class="string">"%x %r %Z"</span>)</span><br><span class="line">TIMESTAMP=<span class="string">"Generated <span class="variable">$CURRENT_TIME</span>, by <span class="variable">$USER</span>"</span></span><br><span class="line"><span class="function"><span class="title">report_uptime</span></span>() &#123;</span><br><span class="line">    cat &lt;&lt;-_EOF_</span><br><span class="line">    &lt;H2&gt;System Uptime&lt;/H2&gt;</span><br><span class="line">    &lt;PRE&gt;$(uptime)&lt;/PRE&gt;</span><br><span class="line">_EOF_</span><br><span class="line">    <span class="built_in">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">report_disk_space</span></span>() &#123;</span><br><span class="line">    cat &lt;&lt;-_EOF_</span><br><span class="line">    &lt;H2&gt;Disk Space Utilization&lt;/H2&gt;</span><br><span class="line">    &lt;PRE&gt;$(df -h)&lt;/PRE&gt;</span><br><span class="line">_EOF_</span><br><span class="line">    <span class="built_in">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">report_home_space</span></span>() &#123;</span><br><span class="line">    <span class="keyword">if</span> [[ $(id -u) -eq 0 ]]; <span class="keyword">then</span></span><br><span class="line">        cat &lt;&lt;-_EOF_</span><br><span class="line">    &lt;H2&gt;Home Space Utilization (All Users)&lt;/H2&gt;</span><br><span class="line">    &lt;PRE&gt;$(du -sh /home/*)&lt;/PRE&gt;</span><br><span class="line">_EOF_</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        cat &lt;&lt;-_EOF_</span><br><span class="line">    &lt;H2&gt;Home Space Utilization (<span class="variable">$USER</span>)&lt;/H2&gt;</span><br><span class="line">    &lt;PRE&gt;$(du -sh <span class="variable">$HOME</span>)&lt;/PRE&gt;</span><br><span class="line">_EOF_</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="built_in">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">usage</span></span>() &#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"<span class="variable">$PROGNAME</span>: usage: <span class="variable">$PROGNAME</span> [-f file | -i]"</span></span><br><span class="line">    <span class="built_in">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">write_html_page</span></span>() &#123;</span><br><span class="line">    cat &lt;&lt;-_EOF_</span><br><span class="line">    &lt;HTML&gt;</span><br><span class="line">        &lt;HEAD&gt;</span><br><span class="line">            &lt;TITLE&gt;<span class="variable">$TITLE</span>&lt;/TITLE&gt;</span><br><span class="line">        &lt;/HEAD&gt;</span><br><span class="line">        &lt;BODY&gt;</span><br><span class="line">            &lt;H1&gt;<span class="variable">$TITLE</span>&lt;/H1&gt;</span><br><span class="line">            &lt;P&gt;<span class="variable">$TIMESTAMP</span>&lt;/P&gt;</span><br><span class="line">            $(report_uptime)</span><br><span class="line">            $(report_disk_space)</span><br><span class="line">            $(report_home_space)</span><br><span class="line">        &lt;/BODY&gt;</span><br><span class="line">    &lt;/HTML&gt;</span><br><span class="line">_EOF_</span><br><span class="line">    <span class="built_in">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># process command line options</span></span><br><span class="line">interactive=</span><br><span class="line">filename=</span><br><span class="line"><span class="keyword">while</span> [[ -n <span class="variable">$1</span> ]]; <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span></span><br><span class="line">    -f | --file)</span><br><span class="line">        <span class="built_in">shift</span></span><br><span class="line">        filename=<span class="variable">$1</span></span><br><span class="line">        ;;</span><br><span class="line">    -i | --interactive)</span><br><span class="line">        interactive=1</span><br><span class="line">        ;;</span><br><span class="line">    -h | --<span class="built_in">help</span>)</span><br><span class="line">        usage</span><br><span class="line">        <span class="built_in">exit</span></span><br><span class="line">        ;;</span><br><span class="line">    *)</span><br><span class="line">        usage &gt;&amp;2</span><br><span class="line">        <span class="built_in">exit</span> 1</span><br><span class="line">        ;;</span><br><span class="line">    <span class="keyword">esac</span></span><br><span class="line">    <span class="built_in">shift</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"><span class="comment"># interactive mode</span></span><br><span class="line"><span class="keyword">if</span> [[ -n <span class="variable">$interactive</span> ]]; <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">read</span> -p <span class="string">"Enter name of output file: "</span> filename</span><br><span class="line">        <span class="keyword">if</span> [[ -e <span class="variable">$filename</span> ]]; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">read</span> -p <span class="string">"'<span class="variable">$filename</span>' exists. Overwrite? [y/n/q] &gt; "</span></span><br><span class="line">            <span class="keyword">case</span> <span class="variable">$REPLY</span> <span class="keyword">in</span></span><br><span class="line">            Y | y)</span><br><span class="line">                <span class="built_in">break</span></span><br><span class="line">                ;;</span><br><span class="line">            Q | q)</span><br><span class="line">                <span class="built_in">echo</span> <span class="string">"Program terminated."</span></span><br><span class="line">                <span class="built_in">exit</span></span><br><span class="line">                ;;</span><br><span class="line">            *)</span><br><span class="line">                <span class="built_in">continue</span></span><br><span class="line">                ;;</span><br><span class="line">            <span class="keyword">esac</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment"># output html page</span></span><br><span class="line"><span class="keyword">if</span> [[ -n <span class="variable">$filename</span> ]]; <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">if</span> touch <span class="variable">$filename</span> &amp;&amp; [[ -f <span class="variable">$filename</span> ]]; <span class="keyword">then</span></span><br><span class="line">        write_html_page &gt;<span class="variable">$filename</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"<span class="variable">$PROGNAME</span>: Cannot write file '<span class="variable">$filename</span>'"</span> &gt;&amp;2</span><br><span class="line">        <span class="built_in">exit</span> 1</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    write_html_page</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><p>17:02:15</p><p>454/505</p>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> shell </tag>
            
            <tag> bash </tag>
            
            <tag> shell note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šå¿«ä¹çš„Linuxå‘½ä»¤è¡Œã€‹ç¬”è®°ï¼ˆ25ï¼‰</title>
      <link href="/blog/2021/04/26/the-linux-command-line-note-25/"/>
      <url>/blog/2021/04/26/the-linux-command-line-note-25/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹"><a class="header-anchor" href="#ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹">#</a>ã€Šå¿«ä¹çš„ Linux å‘½ä»¤è¡Œã€‹</h1><a id="more"></a><h2 id="å­—ç¬¦ä¸²è¡¨è¾¾å¼"><a class="header-anchor" href="#å­—ç¬¦ä¸²è¡¨è¾¾å¼">#</a>å­—ç¬¦ä¸²è¡¨è¾¾å¼</h2><table><thead><tr><th style="text-align:left">è¡¨è¾¾å¼</th><th style="text-align:left">è¿”å›<code>true</code>çš„æ¡ä»¶</th></tr></thead><tbody><tr><td style="text-align:left"><code>string</code></td><td style="text-align:left"><code>string</code>ä¸ä¸º<code>null</code><sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></td></tr><tr><td style="text-align:left"><code>-n string</code></td><td style="text-align:left">å­—ç¬¦ä¸²<code>string</code>çš„é•¿åº¦å¤§äºé›¶</td></tr><tr><td style="text-align:left"><code>-z string</code></td><td style="text-align:left">å­—ç¬¦ä¸²<code>string</code>çš„é•¿åº¦ä¸ºé›¶</td></tr><tr><td style="text-align:left"><code>string1 = string2</code></td><td style="text-align:left"><code>string1</code>å’Œ<code>string2</code>ç›¸åŒ</td></tr><tr><td style="text-align:left"><code>string1 == string2</code></td><td style="text-align:left"><code>string1</code>å’Œ<code>string2</code>ç›¸åŒ</td></tr><tr><td style="text-align:left"><code>string1 != string2</code></td><td style="text-align:left"><code>string1</code>å’Œ<code>string2</code>ä¸ç›¸åŒ</td></tr><tr><td style="text-align:left"><code>string1 &gt; string2</code></td><td style="text-align:left"><code>string1</code>æ’åˆ—åœ¨<code>string2</code>ä¹‹å</td></tr><tr><td style="text-align:left"><code>string1 &lt; string2</code></td><td style="text-align:left"><code>string1</code>æ’åˆ—åœ¨<code>string2</code>ä¹‹å‰</td></tr></tbody></table><p>å½“ä¸<code>test</code>ä¸€å—ä½¿ç”¨çš„æ—¶å€™ï¼Œ<code>&gt;</code>å’Œ<code>&lt;</code>è¡¨è¾¾å¼æ“ä½œç¬¦å¿…é¡»ç”¨å¼•å·å¼•èµ·æ¥ï¼Œæˆ–è€…æ˜¯ç”¨åæ–œæ è½¬ä¹‰ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># test-string: evaluate the value of a string</span></span><br><span class="line"></span><br><span class="line">ANSWER=maybe</span><br><span class="line"><span class="keyword">if</span> [ -z <span class="string">"<span class="variable">$ANSWER</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"There is no answer."</span> &gt;&amp;2</span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">"<span class="variable">$ANSWER</span>"</span> = <span class="string">"yes"</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"The answer is YES."</span></span><br><span class="line"><span class="keyword">elif</span> [ <span class="string">"<span class="variable">$ANSWER</span>"</span> = <span class="string">"no"</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"The answer is NO."</span></span><br><span class="line"><span class="keyword">elif</span> [ <span class="string">"<span class="variable">$ANSWER</span>"</span> = <span class="string">"maybe"</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"The answer is MAYBE."</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"The answer is UNKNOWN."</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ./<span class="built_in">test</span>-string.sh</span><br><span class="line">The answer is MAYBE.</span><br></pre></td></tr></table></figure><h2 id="æ•´å‹è¡¨è¾¾å¼"><a class="header-anchor" href="#æ•´å‹è¡¨è¾¾å¼">#</a>æ•´å‹è¡¨è¾¾å¼</h2><table><thead><tr><th style="text-align:left">è¡¨è¾¾å¼</th><th style="text-align:left">è¿”å›<code>true</code>çš„æ¡ä»¶</th></tr></thead><tbody><tr><td style="text-align:left"><code>integer1 -eq integer2</code></td><td style="text-align:left"><code>integer1</code>ç­‰äº<code>integer2</code></td></tr><tr><td style="text-align:left"><code>integer1 -ne integer2</code></td><td style="text-align:left"><code>integer1</code>ä¸ç­‰äº<code>integer2</code></td></tr><tr><td style="text-align:left"><code>integer1 -le integer2</code></td><td style="text-align:left"><code>integer1</code>å°äºæˆ–ç­‰äº<code>integer2</code></td></tr><tr><td style="text-align:left"><code>integer1 -lt integer2</code></td><td style="text-align:left"><code>integer1</code>å°äº<code>integer2</code></td></tr><tr><td style="text-align:left"><code>integer1 -ge integer2</code></td><td style="text-align:left"><code>integer1</code>å¤§äºæˆ–ç­‰äº<code>integer2</code></td></tr><tr><td style="text-align:left"><code>integer1 -gt integer2</code></td><td style="text-align:left"><code>integer1</code>ç­‰äº<code>integer2</code></td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># test-integer: evaluate the value of an integer.</span></span><br><span class="line"></span><br><span class="line">INT=-5</span><br><span class="line"><span class="keyword">if</span> [ -z <span class="string">"<span class="variable">$INT</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"INT is empty."</span> &gt;&amp;2</span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$INT</span> -eq 0 ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"INT is zero."</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$INT</span> -lt 0 ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"INT is negative."</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"INT is positive."</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">if</span> [ $((INT % 2)) -eq 0 ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"INT is even."</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"INT is odd."</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ./<span class="built_in">test</span>-integer.sh</span><br><span class="line">INT is negative.</span><br><span class="line">INT is odd.</span><br></pre></td></tr></table></figure><p>å¥½åƒæ‰€æœ‰çš„<code>shell</code>å˜é‡éƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œæ‰€ä»¥ç”¨ä¸ç”¨å¼•å·å¥½åƒæ²¡åŒºåˆ«ã€‚</p><p>11:08:42</p><p>393/505</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>æ„Ÿè§‰è¿™ä¸ªæ²¡æœ‰åµç”¨ï¼Œæˆ‘ä¸ç®¡æµ‹è¯•ä»€ä¹ˆéƒ½æ˜¯çœŸã€‚ã€‚ã€‚ <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> shell </tag>
            
            <tag> bash </tag>
            
            <tag> shell note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šå¿«ä¹çš„Linuxå‘½ä»¤è¡Œã€‹ç¬”è®°ï¼ˆ24ï¼‰</title>
      <link href="/blog/2021/04/25/the-linux-command-line-note-24/"/>
      <url>/blog/2021/04/25/the-linux-command-line-note-24/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹"><a class="header-anchor" href="#ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹">#</a>ã€Šå¿«ä¹çš„ Linux å‘½ä»¤è¡Œã€‹</h1><a id="more"></a><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># Program to output a system information page</span></span><br><span class="line">TITLE=<span class="string">"System Information Report For <span class="variable">$HOSTNAME</span>"</span></span><br><span class="line">CURRENT_TIME=$(date +<span class="string">"%x %r %Z"</span>)</span><br><span class="line">TIME_STAMP=<span class="string">"Generated <span class="variable">$CURRENT_TIME</span>, by <span class="variable">$USER</span>"</span></span><br><span class="line"><span class="function"><span class="title">report_uptime</span></span> () &#123;</span><br><span class="line">    <span class="built_in">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">report_disk_space</span></span> () &#123;</span><br><span class="line">    <span class="built_in">return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">report_home_space</span></span> () &#123;</span><br><span class="line">    <span class="built_in">return</span></span><br><span class="line">&#125;</span><br><span class="line">cat &lt;&lt; _EOF_</span><br><span class="line">&lt;HTML&gt;</span><br><span class="line">    &lt;HEAD&gt;</span><br><span class="line">        &lt;TITLE&gt;<span class="variable">$TITLE</span>&lt;/TITLE&gt;</span><br><span class="line">    &lt;/HEAD&gt;</span><br><span class="line">    &lt;BODY&gt;</span><br><span class="line">        &lt;H1&gt;<span class="variable">$TITLE</span>&lt;/H1&gt;</span><br><span class="line">        &lt;P&gt;<span class="variable">$TIME_STAMP</span>&lt;/P&gt;</span><br><span class="line">        $(report_uptime)</span><br><span class="line">        $(report_disk_space)</span><br><span class="line">        $(report_home_space)</span><br><span class="line">    &lt;/BODY&gt;</span><br><span class="line">&lt;/HTML&gt;</span><br><span class="line">_EOF_</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ ./t.sh</span><br><span class="line">&lt;HTML&gt;</span><br><span class="line">    &lt;HEAD&gt;</span><br><span class="line">        &lt;TITLE&gt;System Information Report For hs-Z390-AORUS-PRO&lt;/TITLE&gt;</span><br><span class="line">    &lt;/HEAD&gt;</span><br><span class="line">    &lt;BODY&gt;</span><br><span class="line">        &lt;H1&gt;System Information Report For hs-Z390-AORUS-PRO&lt;/H1&gt;</span><br><span class="line">        &lt;P&gt;Generated 2021å¹´04æœˆ25æ—¥ ä¸‹åˆ 11æ—¶09åˆ†51ç§’ CST, by hs&lt;/P&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;/BODY&gt;</span><br><span class="line">&lt;/HTML&gt;</span><br></pre></td></tr></table></figure><h2 id="if"><a class="header-anchor" href="#if">#</a>if</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> commands; <span class="keyword">then</span></span><br><span class="line">    commands</span><br><span class="line">[<span class="keyword">elif</span> commands; <span class="keyword">then</span></span><br><span class="line">    commands...]</span><br><span class="line">[<span class="keyword">else</span></span><br><span class="line">    commands]</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><h2 id=""><a class="header-anchor" href="#">#</a>$?</h2><p>å½“å‘½ä»¤æ‰§è¡Œå®Œæ¯•åï¼Œå‘½ä»¤ä¼šç»™ç³»ç»Ÿå‘é€ä¸€ä¸ªå€¼ï¼Œå«åšé€€å‡ºçŠ¶æ€ã€‚è¿™ä¸ªå€¼æ˜¯ä¸€ä¸ª<code>0</code>åˆ°<code>255</code>ä¹‹é—´çš„æ•´æ•°ï¼Œè¯´æ˜å‘½ä»¤æ‰§è¡ŒæˆåŠŸæˆ–æ˜¯å¤±è´¥ã€‚æŒ‰ç…§æƒ¯ä¾‹ï¼Œä¸€ä¸ª<code>é›¶å€¼</code>è¯´æ˜æˆåŠŸï¼Œå…¶å®ƒæ‰€æœ‰å€¼è¯´æ˜å¤±è´¥ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ <span class="literal">true</span></span><br><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ <span class="built_in">echo</span> $?</span><br><span class="line">0</span><br><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ <span class="literal">false</span></span><br><span class="line">(base) hs@hs-Z390-AORUS-PRO:/mnt/data/onns/Desktop$ <span class="built_in">echo</span> $?</span><br><span class="line">1</span><br></pre></td></tr></table></figure><h2 id="æ–‡ä»¶è¡¨è¾¾å¼"><a class="header-anchor" href="#æ–‡ä»¶è¡¨è¾¾å¼">#</a>æ–‡ä»¶è¡¨è¾¾å¼</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ expression ]</span><br></pre></td></tr></table></figure><table><thead><tr><th style="text-align:left">è¡¨è¾¾å¼</th><th style="text-align:left">è¿”å›<code>true</code>çš„æ¡ä»¶</th></tr></thead><tbody><tr><td style="text-align:left"><code>file1 -ef file2</code></td><td style="text-align:left"><code>file1</code>å’Œ<code>file2</code>æ‹¥æœ‰ç›¸åŒçš„ç´¢å¼•å·ï¼ˆé€šè¿‡ç¡¬é“¾æ¥ä¸¤ä¸ªæ–‡ä»¶åæŒ‡å‘ç›¸åŒçš„æ–‡ä»¶ï¼‰</td></tr><tr><td style="text-align:left"><code>file1 -nt file2</code></td><td style="text-align:left"><code>file1</code>æ–°äº<code>file2</code></td></tr><tr><td style="text-align:left"><code>file1 -ot file2</code></td><td style="text-align:left"><code>file1</code>æ—©äº<code>file2</code></td></tr><tr><td style="text-align:left"><code>-b file</code></td><td style="text-align:left"><code>file</code>å­˜åœ¨å¹¶ä¸”æ˜¯ä¸€ä¸ªå—ï¼ˆè®¾å¤‡ï¼‰æ–‡ä»¶</td></tr><tr><td style="text-align:left"><code>-c file</code></td><td style="text-align:left"><code>file</code>å­˜åœ¨å¹¶ä¸”æ˜¯ä¸€ä¸ªå­—ç¬¦ï¼ˆè®¾å¤‡ï¼‰æ–‡ä»¶</td></tr><tr><td style="text-align:left"><code>-d file</code></td><td style="text-align:left"><code>file</code>å­˜åœ¨å¹¶ä¸”æ˜¯ä¸€ä¸ªç›®å½•</td></tr><tr><td style="text-align:left"><code>-e file</code></td><td style="text-align:left"><code>file</code>å­˜åœ¨</td></tr><tr><td style="text-align:left"><code>-f file</code></td><td style="text-align:left"><code>file</code>å­˜åœ¨å¹¶ä¸”æ˜¯ä¸€ä¸ªæ™®é€šæ–‡ä»¶</td></tr><tr><td style="text-align:left"><code>-g file</code></td><td style="text-align:left"><code>file</code>å­˜åœ¨å¹¶ä¸”è®¾ç½®äº†ç»„<code>ID</code></td></tr><tr><td style="text-align:left"><code>-G file</code></td><td style="text-align:left"><code>file</code>å­˜åœ¨å¹¶ä¸”ç”±æœ‰æ•ˆç»„<code>ID</code>æ‹¥æœ‰</td></tr><tr><td style="text-align:left"><code>-k file</code></td><td style="text-align:left"><code>file</code>å­˜åœ¨å¹¶ä¸”è®¾ç½®äº†å®ƒçš„<code>sticky bit</code><sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></td></tr><tr><td style="text-align:left"><code>-L file</code></td><td style="text-align:left"><code>file</code>å­˜åœ¨å¹¶ä¸”æ˜¯ä¸€ä¸ªç¬¦å·é“¾æ¥</td></tr><tr><td style="text-align:left"><code>-O file</code></td><td style="text-align:left"><code>file</code>å­˜åœ¨å¹¶ä¸”ç”±æœ‰æ•ˆç”¨æˆ·<code>ID</code>æ‹¥æœ‰</td></tr><tr><td style="text-align:left"><code>-p file</code></td><td style="text-align:left"><code>file</code>å­˜åœ¨å¹¶ä¸”æ˜¯ä¸€ä¸ªå‘½åç®¡é“</td></tr><tr><td style="text-align:left"><code>-r file</code></td><td style="text-align:left"><code>file</code>å­˜åœ¨å¹¶ä¸”å¯è¯»ï¼ˆæœ‰æ•ˆç”¨æˆ·æœ‰å¯è¯»æƒé™ï¼‰</td></tr><tr><td style="text-align:left"><code>-s file</code></td><td style="text-align:left"><code>file</code>å­˜åœ¨å¹¶ä¸”å…¶é•¿åº¦å¤§äºé›¶</td></tr><tr><td style="text-align:left"><code>-S file</code></td><td style="text-align:left"><code>file</code>å­˜åœ¨å¹¶ä¸”æ˜¯ä¸€ä¸ªç½‘ç»œ<code>socket</code></td></tr><tr><td style="text-align:left"><code>-t fd</code></td><td style="text-align:left"><code>fd</code>æ˜¯ä¸€ä¸ªå®šå‘åˆ°ç»ˆç«¯/ä»ç»ˆç«¯å®šå‘çš„æ–‡ä»¶æè¿°ç¬¦ã€‚è¿™å¯ä»¥è¢«ç”¨æ¥å†³å®šæ˜¯å¦é‡å®šå‘äº†æ ‡å‡†è¾“å…¥/è¾“å‡ºé”™è¯¯</td></tr><tr><td style="text-align:left"><code>-u file</code></td><td style="text-align:left"><code>file</code>å­˜åœ¨å¹¶ä¸”è®¾ç½®äº†<code>setuid</code>ä½</td></tr><tr><td style="text-align:left"><code>-w file</code></td><td style="text-align:left"><code>file</code>å­˜åœ¨å¹¶ä¸”å¯å†™ï¼ˆæœ‰æ•ˆç”¨æˆ·æœ‰å¯å†™æƒé™ï¼‰</td></tr><tr><td style="text-align:left"><code>-x file</code></td><td style="text-align:left"><code>file</code>å­˜åœ¨å¹¶ä¸”å¯æ‰§è¡Œï¼ˆæœ‰æ•ˆç”¨æˆ·æœ‰æ‰§è¡Œ/æœç´¢æƒé™ï¼‰</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># test-file: Evaluate the status of a file</span></span><br><span class="line">FILE=~/.bashrc</span><br><span class="line"><span class="keyword">if</span> [ -e <span class="string">"<span class="variable">$FILE</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">if</span> [ -f <span class="string">"<span class="variable">$FILE</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"<span class="variable">$FILE</span> is a regular file."</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">if</span> [ -d <span class="string">"<span class="variable">$FILE</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"<span class="variable">$FILE</span> is a directory."</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">if</span> [ -r <span class="string">"<span class="variable">$FILE</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"<span class="variable">$FILE</span> is readable."</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">if</span> [ -w <span class="string">"<span class="variable">$FILE</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"<span class="variable">$FILE</span> is writable."</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">if</span> [ -x <span class="string">"<span class="variable">$FILE</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"<span class="variable">$FILE</span> is executable/searchable."</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"<span class="variable">$FILE</span> does not exist"</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ chmod +x <span class="built_in">test</span>-file.sh</span><br><span class="line">$ ./<span class="built_in">test</span>-file.sh</span><br><span class="line">/home/hs/.bashrc is a regular file.</span><br><span class="line">/home/hs/.bashrc is readable.</span><br><span class="line">/home/hs/.bashrc is writable.</span><br></pre></td></tr></table></figure><p>å¼•å·å¹¶ä¸æ˜¯å¿…éœ€çš„ï¼Œä½†è¿™æ˜¯ä¸ºäº†é˜²èŒƒç©ºå‚æ•°ã€‚å¦‚æœ<code>$FILE</code>çš„å‚æ•°å±•å¼€æ˜¯ä¸€ä¸ªç©ºå€¼ï¼Œå°±ä¼šå¯¼è‡´ä¸€ä¸ªé”™è¯¯ï¼ˆæ“ä½œç¬¦å°†ä¼šè¢«è§£é‡Šä¸ºéç©ºçš„å­—ç¬¦ä¸²è€Œä¸æ˜¯æ“ä½œç¬¦ï¼‰<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup><sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup>ã€‚ç”¨å¼•å·æŠŠå‚æ•°å¼•èµ·æ¥å°±ç¡®ä¿äº†æ“ä½œç¬¦ä¹‹åæ€»æ˜¯è·Ÿéšç€ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå³ä½¿å­—ç¬¦ä¸²ä¸ºç©ºã€‚</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>æœ‰æœºä¼šæŸ¥ä¸€ä¸‹è¿™æ˜¯å•¥ä¸œè¥¿ã€‚ <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li><li id="fn2" class="footnote-item"><p>è¿™é‡Œä¹Ÿä¸çŸ¥é“æ˜¯ä»€ä¹ˆæ„æ€ã€‚ã€‚ã€‚è™½ç„¶æˆ‘ä¸€ç›´æ˜¯è¿™æ ·åšçš„ã€‚ <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p></li><li id="fn3" class="footnote-item"><p>å¥½çš„çŸ¥é“äº†ï¼Œæˆ‘å»æé—®äº†= =ï¼Œä¼ é€é—¨ï¼š<a href="https://unix.stackexchange.com/a/646716/458529" target="_blank" rel="noopener">Whatâ€™s the difference between using quotation with parameters and not using in a shell script</a> <a href="#fnref3" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> shell </tag>
            
            <tag> bash </tag>
            
            <tag> shell note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šå¿«ä¹çš„Linuxå‘½ä»¤è¡Œã€‹ç¬”è®°ï¼ˆ23ï¼‰</title>
      <link href="/blog/2021/04/24/the-linux-command-line-note-23/"/>
      <url>/blog/2021/04/24/the-linux-command-line-note-23/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹"><a class="header-anchor" href="#ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹">#</a>ã€Šå¿«ä¹çš„ Linux å‘½ä»¤è¡Œã€‹</h1><a id="more"></a><h2 id="fold"><a class="header-anchor" href="#fold">#</a>fold</h2><p><code>fold</code>å°†æ–‡æœ¬çš„è¡Œé™åˆ¶åˆ°ç‰¹å®šçš„å®½ï¼Œå¦‚æœæ²¡æœ‰å­—ç¬¦è®¾ç½®ï¼Œé»˜è®¤æ˜¯<code>80</code>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">"The quick brown fox jumped over the lazy dog."</span> | fold -w 12</span><br><span class="line">The quick br</span><br><span class="line">own fox jump</span><br><span class="line">ed over the</span><br><span class="line">lazy dog.</span><br></pre></td></tr></table></figure><p>å¢åŠ çš„<code>-s</code>é€‰é¡¹å°†è®©<code>fold</code>åˆ†è§£åˆ°æœ€åå¯ç”¨çš„ç©ºç™½å­—ç¬¦ï¼Œå³ä¼šè€ƒè™‘å•è¯è¾¹ç•Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">"The quick brown fox jumped over the lazy dog."</span> | fold -w 12 -s</span><br><span class="line">The quick</span><br><span class="line">brown fox</span><br><span class="line">jumped over</span><br><span class="line">the lazy</span><br><span class="line">dog.</span><br></pre></td></tr></table></figure><h2 id="fmt"><a class="header-anchor" href="#fmt">#</a>fmt</h2><p><code>-w</code>æŒ‡å®šè¡Œå®½ï¼Œ<code>-p</code>å¯ä»¥æŒ‡å®šç‰¹å®šçš„è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ vi fmt-code.txt</span><br><span class="line"><span class="comment"># This file contains code with comments.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># This line is a comment.</span></span><br><span class="line"><span class="comment"># Followed by another comment line.</span></span><br><span class="line"><span class="comment"># And another.</span></span><br><span class="line"></span><br><span class="line">This, on the other hand, is a line of code.</span><br><span class="line">And another line of code.</span><br><span class="line">And another.</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ fmt -w 50 -p <span class="string">'# '</span> fmt-code.txt</span><br><span class="line"><span class="comment"># This file contains code with comments.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># This line is a comment.  Followed by another</span></span><br><span class="line"><span class="comment"># comment line.  And another.</span></span><br><span class="line"></span><br><span class="line">This, on the other hand, is a line of code.</span><br><span class="line">And another line of code.</span><br><span class="line">And another.</span><br></pre></td></tr></table></figure><h2 id="pr"><a class="header-anchor" href="#pr">#</a>pr</h2><p><code>pr</code>ç¨‹åºç”¨æ¥æŠŠæ–‡æœ¬åˆ†é¡µã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">$ pr -l 15 -w 65 distros.txt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2021-04-12 15:14                distros.txt                Page 1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SUSE10.212/07/2006</span><br><span class="line">Fedora1011/25/2008</span><br><span class="line">SUSE11.006/18/2008</span><br><span class="line">Ubuntu8.0404/24/2008</span><br><span class="line">Fedora811/08/2007</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2021-04-12 15:14                distros.txt                Page 2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SUSE10.310/04/2007</span><br><span class="line">Ubuntu6.1010/26/2006</span><br><span class="line">Fedora705/31/2007</span><br><span class="line">Ubuntu7.1010/18/2007</span><br><span class="line">Ubuntu7.0404/19/2007</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2021-04-12 15:14                distros.txt                Page 3</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SUSE10.105/11/2006</span><br><span class="line">Fedora610/24/2006</span><br><span class="line">Fedora905/13/2008</span><br><span class="line">Ubuntu6.0606/01/2006</span><br><span class="line">Ubuntu8.1010/30/2008</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2021-04-12 15:14                distros.txt                Page 4</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Fedora503/20/2006</span><br></pre></td></tr></table></figure><h2 id="printf"><a class="header-anchor" href="#printf">#</a>printf</h2><p><code>printf</code>ä¸»è¦ç”¨åœ¨è„šæœ¬ä¸­ï¼Œç”¨äºæ ¼å¼åŒ–è¡¨æ ¼æ•°æ®ï¼Œè€Œä¸æ˜¯ç›´æ¥ç”¨äºå‘½ä»¤è¡Œã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">printf</span> <span class="string">"I formatted the string: %s\n"</span> foo</span><br><span class="line">I formatted the string: foo</span><br></pre></td></tr></table></figure><p>æ‰“å°è¿™ç« æš‚æ—¶è·³è¿‡å§ï¼Œæ„Ÿè§‰ç”¨ä¸ä¸Šå•Š= =ï¼</p><p><code>#!</code>å­—ç¬¦åºåˆ—æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç»“æ„å«åš<code>shebang</code>ï¼Œ<code>shebang</code>è¢«ç”¨æ¥å‘Šè¯‰æ“ä½œç³»ç»Ÿå°†æ‰§è¡Œæ­¤è„šæœ¬æ‰€ç”¨çš„è§£é‡Šå™¨çš„åå­—ã€‚</p><p><code>.</code>å‘½ä»¤æ˜¯<code>source</code>å‘½ä»¤çš„åŒä¹‰è¯ï¼Œä¸€ä¸ª<code>shell</code>å†…å»ºå‘½ä»¤ï¼Œç”¨æ¥è¯»å–ä¸€ä¸ªæŒ‡å®šçš„<code>shell</code>å‘½ä»¤æ–‡ä»¶ï¼Œå¹¶æŠŠå®ƒçœ‹ä½œæ˜¯ä»é”®ç›˜ä¸­è¾“å…¥çš„ä¸€æ ·ã€‚</p><p>ä¸€ä¸ªå¸¦å¼•å·çš„å­—ç¬¦ä¸²å¯èƒ½åŒ…å«æ¢è¡Œç¬¦ï¼Œå› æ­¤å¯ä»¥åŒ…å«å¤šä¸ªæ–‡æœ¬è¡Œï¼Œ<code>shell</code>ä¼šæŒç»­è¯»å–æ–‡æœ¬ç›´åˆ°å®ƒé‡åˆ°å³å¼•å·ã€‚</p><p>å½“<code>shell</code>ç¢°åˆ°ä¸€ä¸ªå˜é‡çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨åœ°åˆ›å»ºå®ƒã€‚</p><p>å˜é‡åå¯ç”±å­—æ¯æ•°å­—å­—ç¬¦ï¼ˆå­—æ¯å’Œæ•°å­—ï¼‰å’Œä¸‹åˆ’çº¿å­—ç¬¦ç»„æˆã€‚å˜é‡åçš„ç¬¬ä¸€ä¸ªå­—ç¬¦å¿…é¡»æ˜¯<code>ä¸€ä¸ªå­—æ¯</code>æˆ–<code>ä¸€ä¸ªä¸‹åˆ’çº¿</code>ã€‚å˜é‡åä¸­ä¸å…è®¸å‡ºç°ç©ºæ ¼å’Œæ ‡ç‚¹ç¬¦å·ã€‚</p><p><code>shell</code>ä¸ä¼šåœ¨ä¹å˜é‡å€¼çš„ç±»å‹ï¼Œå®ƒæŠŠå®ƒä»¬éƒ½çœ‹ä½œæ˜¯å­—ç¬¦ä¸²ã€‚</p><p><strong>åœ¨èµ‹å€¼è¿‡ç¨‹ä¸­ï¼Œå˜é‡åã€ç­‰å·å’Œå˜é‡å€¼ä¹‹é—´å¿…é¡»æ²¡æœ‰ç©ºæ ¼ã€‚</strong></p><p><code>shell</code>å‡½æ•°æœ‰ä¸¤ç§è¯­æ³•å½¢å¼ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> name &#123;</span><br><span class="line">commands</span><br><span class="line"><span class="built_in">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å’Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">name</span></span> () &#123;</span><br><span class="line">commands</span><br><span class="line"><span class="built_in">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸ºäº†ä½¿å‡½æ•°è°ƒç”¨è¢«è¯†åˆ«å‡ºæ˜¯<code>shell</code>å‡½æ•°ï¼Œè€Œä¸æ˜¯è¢«è§£é‡Šä¸ºå¤–éƒ¨ç¨‹åºçš„åå­—ï¼Œåœ¨è„šæœ¬ä¸­<code>shell</code>å‡½æ•°å®šä¹‰å¿…é¡»å‡ºç°åœ¨å‡½æ•°è°ƒç”¨ä¹‹å‰ã€‚</p><p><code>shell</code>å‡½æ•°çš„å‘½åè§„åˆ™å’Œå˜é‡ä¸€æ ·ï¼Œä¸€ä¸ªå‡½æ•°å¿…é¡»è‡³å°‘åŒ…å«ä¸€æ¡å‘½ä»¤ã€‚</p><p>é€šè¿‡åœ¨å˜é‡åä¹‹å‰åŠ ä¸Šå•è¯<code>local</code>ï¼Œæ¥å®šä¹‰å±€éƒ¨å˜é‡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$ vi test_local.sh</span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># local-vars: script to demonstrate local variables</span></span><br><span class="line">foo=0 <span class="comment"># global variable foo</span></span><br><span class="line"><span class="function"><span class="title">funct_1</span></span> () &#123;</span><br><span class="line">    <span class="built_in">local</span> foo  <span class="comment"># variable foo local to funct_1</span></span><br><span class="line">    foo=1</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"funct_1: foo = <span class="variable">$foo</span>"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">funct_2</span></span> () &#123;</span><br><span class="line">    <span class="built_in">local</span> foo  <span class="comment"># variable foo local to funct_2</span></span><br><span class="line">    foo=2</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"funct_2: foo = <span class="variable">$foo</span>"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"global: foo = <span class="variable">$foo</span>"</span></span><br><span class="line">funct_1</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"global: foo = <span class="variable">$foo</span>"</span></span><br><span class="line">funct_2</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"global: foo = <span class="variable">$foo</span>"</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ chmod +x test_local.sh</span><br><span class="line">$ ./test_local.sh</span><br><span class="line">global: foo = 0</span><br><span class="line">funct_1: foo = 1</span><br><span class="line">global: foo = 0</span><br><span class="line">funct_2: foo = 2</span><br><span class="line">global: foo = 0</span><br></pre></td></tr></table></figure><p>379/505</p>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> shell </tag>
            
            <tag> bash </tag>
            
            <tag> shell note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šå¿«ä¹çš„Linuxå‘½ä»¤è¡Œã€‹ç¬”è®°ï¼ˆ22ï¼‰</title>
      <link href="/blog/2021/04/23/the-linux-command-line-note-22/"/>
      <url>/blog/2021/04/23/the-linux-command-line-note-22/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹"><a class="header-anchor" href="#ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹">#</a>ã€Šå¿«ä¹çš„ Linux å‘½ä»¤è¡Œã€‹</h1><a id="more"></a><h2 id="sed"><a class="header-anchor" href="#sed">#</a>sed</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">"front"</span> | sed <span class="string">'s/front/back/'</span></span><br><span class="line">back</span><br></pre></td></tr></table></figure><p><code>sed</code>ä¸­çš„å‘½ä»¤å¼€å§‹äºå•ä¸ªå­—ç¬¦ï¼Œåˆ†éš”ç¬¦çš„é€‰æ‹©æ˜¯éšæ„çš„ã€‚æŒ‰ç…§æƒ¯ä¾‹ï¼Œç»å¸¸ä½¿ç”¨<code>æ–œæ </code>å­—ç¬¦ï¼Œä½†æ˜¯<code>sed</code>å°†ä¼šæ¥å—ç´§éšå‘½ä»¤ä¹‹åçš„ä»»æ„å­—ç¬¦åšä¸ºåˆ†éš”ç¬¦ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">"front"</span> | sed <span class="string">'s_front_back_'</span></span><br><span class="line">back</span><br></pre></td></tr></table></figure><p><code>sed</code>ä¸­çš„å¤§å¤šæ•°å‘½ä»¤ä¹‹å‰éƒ½ä¼šå¸¦æœ‰ä¸€ä¸ªåœ°å€ï¼Œå…¶æŒ‡å®šäº†è¾“å…¥æµä¸­è¦è¢«ç¼–è¾‘çš„æ–‡æœ¬è¡Œã€‚å¦‚æœçœç•¥äº†åœ°å€ï¼Œç„¶åä¼šå¯¹è¾“å…¥æµçš„<code>æ¯ä¸€è¡Œ</code>æ‰§è¡Œç¼–è¾‘å‘½ä»¤ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">"front"</span> | sed <span class="string">'1s/front/back/'</span></span><br><span class="line">back</span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">"front"</span> | sed <span class="string">'2s/front/back/'</span></span><br><span class="line">front</span><br><span class="line"><span class="comment"># è¾“å…¥é‡Œæ²¡æœ‰ç¬¬äºŒè¡Œ</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå‘½ä»¤å¤ªå¤šäº†ã€‚ã€‚ã€‚ä¸æƒ³å­¦äº†ï¼Œæœ‰æœºä¼šè¯¦ç»†å­¦è¿™ä¸ªå§ï¼Œåæ­£æœ‰ä¸€æœ¬ä¹¦çš„å†…å®¹å‘¢ã€‚</p><h2 id="nl"><a class="header-anchor" href="#nl">#</a>nl</h2><p><code>nl</code>å¯ä»¥æ·»åŠ æ–‡ä»¶çš„è¡Œæ•°ï¼Œç›¸å½“äº<code>cat -n</code>ï¼š</p>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> shell </tag>
            
            <tag> bash </tag>
            
            <tag> shell note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MacOSä¸­çš„æ ‡ç­¾åŠŸèƒ½</title>
      <link href="/blog/2021/04/22/tag-in-macos/"/>
      <url>/blog/2021/04/22/tag-in-macos/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a class="header-anchor" href="#å‰è¨€">#</a>å‰è¨€</h2><p>å‡†å¤‡æ¢æ–°ç”µè„‘äº†ï¼Œå¤‡ä»½æ–‡ä»¶çš„æ—¶å€™é¡ºä¾¿å­¦ä¹ ä¸€äº›æ–°çŸ¥è¯†ï¼Œæœ€è¿‘çœŸçš„æ— å¿ƒå­¦æœ¯ã€‚</p><p><code>MacOS</code>ä¸­çš„æ ‡ç­¾åŠŸèƒ½çœŸçš„æ˜¯æˆ‘è§‰å¾—æœ€å®ç”¨çš„åŠŸèƒ½ä¹‹ä¸€äº†ï¼Œå› ä¸º<code>Windows</code>é‡Œä¸€ç›´æ²¡æœ‰æ›¿ä»£çš„æˆ–è€…ç±»ä¼¼çš„åŠŸèƒ½ï¼Œæ‰€ä»¥æˆ‘ä¸æƒ³æ¢= =</p><a id="more"></a><h2 id="xattr"><a class="header-anchor" href="#xattr">#</a>xattr</h2><p><code>xattr</code>ä¸»è¦æ˜¯ç”¨æ¥å…³è”ä¸€äº›é¢å¤–çš„å±æ€§ï¼Œä¹Ÿå°±æ˜¯<code>tag</code>å­˜å‚¨çš„åœ°æ–¹ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">[20:16:32] onns@Onns ~ $ xattr --<span class="built_in">help</span></span><br><span class="line">usage: xattr [-l] [-r] [-s] [-v] [-x] file [file ...]</span><br><span class="line">       xattr -p [-l] [-r] [-s] [-v] [-x] attr_name file [file ...]</span><br><span class="line">       xattr -w [-r] [-s] [-x] attr_name attr_value file [file ...]</span><br><span class="line">       xattr -d [-r] [-s] attr_name file [file ...]</span><br><span class="line">       xattr -c [-r] [-s] file [file ...]</span><br><span class="line"></span><br><span class="line">The first form lists the names of all xattrs on the given file(s).</span><br><span class="line">The second form (-p) prints the value of the xattr attr_name.</span><br><span class="line">The third form (-w) sets the value of the xattr attr_name to the string attr_value.</span><br><span class="line">The fourth form (-d) deletes the xattr attr_name.</span><br><span class="line">The fifth form (-c) deletes (clears) all xattrs.</span><br><span class="line"></span><br><span class="line">options:</span><br><span class="line">  -h: <span class="built_in">print</span> this <span class="built_in">help</span></span><br><span class="line">  -l: <span class="built_in">print</span> long format (attr_name: attr_value and hex output has offsets and</span><br><span class="line">      ascii representation)</span><br><span class="line">  -r: act recursively</span><br><span class="line">  -s: act on the symbolic link itself rather than what the link points to</span><br><span class="line">  -v: also <span class="built_in">print</span> filename (automatic with -r and with multiple files)</span><br><span class="line">  -x: attr_value is represented as a hex string <span class="keyword">for</span> input and output</span><br><span class="line">[20:57:25] onns@Onns ~/Desktop $ xattr -l temp_tag.go</span><br><span class="line">com.apple.FinderInfo:</span><br><span class="line">00000000  00 00 00 00 00 00 00 00 00 0E 00 00 00 00 00 00  |................|</span><br><span class="line">00000010  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  |................|</span><br><span class="line">00000020</span><br><span class="line">com.apple.macl:</span><br><span class="line">00000000  03 00 D6 24 1E 6D 95 9F 4D 6B 90 BA 6F 10 BD 36  |...$.m..Mk..o..6|</span><br><span class="line">00000010  27 05 00 00 00 00 00 00 00 00 00 00 00 00 00 00  |<span class="string">'...............|</span></span><br><span class="line"><span class="string">00000020  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  |................|</span></span><br><span class="line"><span class="string">00000030  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  |................|</span></span><br><span class="line"><span class="string">00000040  00 00 00 00 00 00 00 00                          |........|</span></span><br><span class="line"><span class="string">00000048</span></span><br><span class="line"><span class="string">com.apple.metadata:_kMDItemUserTags:</span></span><br><span class="line"><span class="string">00000000  62 70 6C 69 73 74 30 30 A1 01 56 54 6F 64 6F 0A  |bplist00..VTodo.|</span></span><br><span class="line"><span class="string">00000010  37 08 0A 00 00 00 00 00 00 01 01 00 00 00 00 00  |7...............|</span></span><br><span class="line"><span class="string">00000020  00 00 02 00 00 00 00 00 00 00 00 00 00 00 00 00  |................|</span></span><br><span class="line"><span class="string">00000030  00 00 11                                         |...|</span></span><br><span class="line"><span class="string">00000033</span></span><br></pre></td></tr></table></figure><p>ç„¶è€Œéƒ½æ˜¯ä¸å¯è¯»çš„åå…­è¿›åˆ¶ï¼Œå¯ä»¥è½¬æˆ<code>xml</code>æˆ–è€…<code>json</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[21:05:50] onns@Onns ~/Desktop $ xattr -p com.apple.metadata:_kMDItemUserTags temp_tag.go</span><br><span class="line">62 70 6C 69 73 74 30 30 A1 01 56 54 6F 64 6F 0A</span><br><span class="line">37 08 0A 00 00 00 00 00 00 01 01 00 00 00 00 00</span><br><span class="line">00 00 02 00 00 00 00 00 00 00 00 00 00 00 00 00</span><br><span class="line">00 00 11</span><br><span class="line">[21:08:04] onns@Onns ~/Desktop $ xattr -p com.apple.metadata:_kMDItemUserTags temp_tag.go | xxd -r -p | plutil -convert xml1 - -o -</span><br><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&gt;</span><br><span class="line">&lt;!DOCTYPE plist PUBLIC <span class="string">"-//Apple//DTD PLIST 1.0//EN"</span> <span class="string">"http://www.apple.com/DTDs/PropertyList-1.0.dtd"</span>&gt;</span><br><span class="line">&lt;plist version=<span class="string">"1.0"</span>&gt;</span><br><span class="line">&lt;array&gt;</span><br><span class="line">&lt;string&gt;Todo</span><br><span class="line">7&lt;/string&gt;</span><br><span class="line">&lt;/array&gt;</span><br><span class="line">&lt;/plist&gt;</span><br><span class="line">[21:08:19] onns@Onns ~/Desktop $ xattr -p com.apple.metadata:_kMDItemUserTags temp_tag.go | xxd -r -p | plutil -convert json - -o -</span><br><span class="line">[<span class="string">"Todo\n7"</span>]%</span><br></pre></td></tr></table></figure><p>ä¸‹é¢çš„å‘½ä»¤å¯ä»¥ä»å‘½ä»¤è¡Œç»™æ–‡ä»¶æ·»åŠ <code>tag</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xattr -xw com.apple.metadata:_kMDItemUserTags $(<span class="built_in">echo</span> <span class="string">'["red","blue","mytag1"]'</span> | plutil -convert binary1 - -o - | xxd -p -c 256 -u) temp_tag.go</span><br></pre></td></tr></table></figure><p>ç„¶åæŸ¥çœ‹ä¸€ä¸‹ç»“æœï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[21:15:58] onns@Onns ~/Desktop $ xattr -xw com.apple.metadata:_kMDItemUserTags $(<span class="built_in">echo</span> <span class="string">'["red","blue","mytag1"]'</span> | plutil -convert binary1 - -o - | xxd -p -c 256 -u) temp_tag.go</span><br><span class="line">[21:16:43] onns@Onns ~/Desktop $ xattr -p com.apple.metadata:_kMDItemUserTags temp_tag.go | xxd -r -p | plutil -convert json - -o -</span><br><span class="line">[<span class="string">"red"</span>,<span class="string">"blue"</span>,<span class="string">"mytag1"</span>]%</span><br></pre></td></tr></table></figure><h2 id="rsync"><a class="header-anchor" href="#rsync">#</a>rsync</h2><p><code>scp</code>å‘½ä»¤å¤åˆ¶çš„æ–‡ä»¶éƒ½ä¸å¸¦é¢å¤–å±æ€§ï¼Œåªæœ‰<code>rsync</code>çš„å¯ä»¥ï¼Œæ­£å¸¸çš„å‘½ä»¤æ˜¯<code>-X</code>å‚æ•°ï¼Œä½†æ˜¯<code>MacOS</code>ä¸­çš„<code>rsync</code>æ˜¯è€ç‰ˆæœ¬çš„ï¼Œæ‰€ä»¥å‚æ•°æ˜¯<code>-E</code>ï¼Œ<code>-E = -AX</code>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br></pre></td><td class="code"><pre><span class="line">$ rsync</span><br><span class="line">rsync  version 3.1.2  protocol version 31</span><br><span class="line">Copyright (C) 1996-2015 by Andrew Tridgell, Wayne Davison, and others.</span><br><span class="line">Web site: http://rsync.samba.org/</span><br><span class="line">Capabilities:</span><br><span class="line">    64-bit files, 64-bit inums, 64-bit timestamps, 64-bit long ints,</span><br><span class="line">    socketpairs, hardlinks, symlinks, IPv6, batchfiles, inplace,</span><br><span class="line">    append, ACLs, xattrs, iconv, symtimes, prealloc</span><br><span class="line"></span><br><span class="line">rsync comes with ABSOLUTELY NO WARRANTY.  This is free software, and you</span><br><span class="line">are welcome to redistribute it under certain conditions.  See the GNU</span><br><span class="line">General Public Licence <span class="keyword">for</span> details.</span><br><span class="line"></span><br><span class="line">rsync is a file transfer program capable of efficient remote update</span><br><span class="line">via a fast differencing algorithm.</span><br><span class="line"></span><br><span class="line">Usage: rsync [OPTION]... SRC [SRC]... DEST</span><br><span class="line">  or   rsync [OPTION]... SRC [SRC]... [USER@]HOST:DEST</span><br><span class="line">  or   rsync [OPTION]... SRC [SRC]... [USER@]HOST::DEST</span><br><span class="line">  or   rsync [OPTION]... SRC [SRC]... rsync://[USER@]HOST[:PORT]/DEST</span><br><span class="line">  or   rsync [OPTION]... [USER@]HOST:SRC [DEST]</span><br><span class="line">  or   rsync [OPTION]... [USER@]HOST::SRC [DEST]</span><br><span class="line">  or   rsync [OPTION]... rsync://[USER@]HOST[:PORT]/SRC [DEST]</span><br><span class="line">The <span class="string">':'</span> usages connect via remote shell, <span class="keyword">while</span> <span class="string">'::'</span> &amp; <span class="string">'rsync://'</span> usages connect</span><br><span class="line">to an rsync daemon, and require SRC or DEST to start with a module name.</span><br><span class="line"></span><br><span class="line">Options</span><br><span class="line"> -v, --verbose               increase verbosity</span><br><span class="line">     --info=FLAGS            fine-grained informational verbosity</span><br><span class="line">     --debug=FLAGS           fine-grained debug verbosity</span><br><span class="line">     --msgs2stderr           special output handling <span class="keyword">for</span> debugging</span><br><span class="line"> -q, --quiet                 suppress non-error messages</span><br><span class="line">     --no-motd               suppress daemon-mode MOTD (see manpage caveat)</span><br><span class="line"> -c, --checksum              skip based on checksum, not mod-time &amp; size</span><br><span class="line"> -a, --archive               archive mode; equals -rlptgoD (no -H,-A,-X)</span><br><span class="line">     --no-OPTION             turn off an implied OPTION (e.g. --no-D)</span><br><span class="line"> -r, --recursive             recurse into directories</span><br><span class="line"> -R, --relative              use relative path names</span><br><span class="line">     --no-implied-dirs       don<span class="string">'t send implied dirs with --relative</span></span><br><span class="line"><span class="string"> -b, --backup                make backups (see --suffix &amp; --backup-dir)</span></span><br><span class="line"><span class="string">     --backup-dir=DIR        make backups into hierarchy based in DIR</span></span><br><span class="line"><span class="string">     --suffix=SUFFIX         set backup suffix (default ~ w/o --backup-dir)</span></span><br><span class="line"><span class="string"> -u, --update                skip files that are newer on the receiver</span></span><br><span class="line"><span class="string">     --inplace               update destination files in-place (SEE MAN PAGE)</span></span><br><span class="line"><span class="string">     --append                append data onto shorter files</span></span><br><span class="line"><span class="string">     --append-verify         like --append, but with old data in file checksum</span></span><br><span class="line"><span class="string"> -d, --dirs                  transfer directories without recursing</span></span><br><span class="line"><span class="string"> -l, --links                 copy symlinks as symlinks</span></span><br><span class="line"><span class="string"> -L, --copy-links            transform symlink into referent file/dir</span></span><br><span class="line"><span class="string">     --copy-unsafe-links     only "unsafe" symlinks are transformed</span></span><br><span class="line"><span class="string">     --safe-links            ignore symlinks that point outside the source tree</span></span><br><span class="line"><span class="string">     --munge-links           munge symlinks to make them safer (but unusable)</span></span><br><span class="line"><span class="string"> -k, --copy-dirlinks         transform symlink to a dir into referent dir</span></span><br><span class="line"><span class="string"> -K, --keep-dirlinks         treat symlinked dir on receiver as dir</span></span><br><span class="line"><span class="string"> -H, --hard-links            preserve hard links</span></span><br><span class="line"><span class="string"> -p, --perms                 preserve permissions</span></span><br><span class="line"><span class="string"> -E, --executability         preserve the file'</span>s executability</span><br><span class="line">     --chmod=CHMOD           affect file and/or directory permissions</span><br><span class="line"> -A, --acls                  preserve ACLs (implies --perms)</span><br><span class="line"> -X, --xattrs                preserve extended attributes</span><br><span class="line"> -o, --owner                 preserve owner (super-user only)</span><br><span class="line"> -g, --group                 preserve group</span><br><span class="line">     --devices               preserve device files (super-user only)</span><br><span class="line">     --copy-devices          copy device contents as regular file</span><br><span class="line">     --specials              preserve special files</span><br><span class="line"> -D                          same as --devices --specials</span><br><span class="line"> -t, --<span class="built_in">times</span>                 preserve modification <span class="built_in">times</span></span><br><span class="line"> -O, --omit-dir-times        omit directories from --<span class="built_in">times</span></span><br><span class="line"> -J, --omit-link-times       omit symlinks from --<span class="built_in">times</span></span><br><span class="line">     --super                 receiver attempts super-user activities</span><br><span class="line">     --fake-super            store/recover privileged attrs using xattrs</span><br><span class="line"> -S, --sparse                handle sparse files efficiently</span><br><span class="line">     --preallocate           allocate dest files before writing them</span><br><span class="line"> -n, --dry-run               perform a trial run with no changes made</span><br><span class="line"> -W, --whole-file            copy files whole (without delta-xfer algorithm)</span><br><span class="line"> -x, --one-file-system       don<span class="string">'t cross filesystem boundaries</span></span><br><span class="line"><span class="string"> -B, --block-size=SIZE       force a fixed checksum block-size</span></span><br><span class="line"><span class="string"> -e, --rsh=COMMAND           specify the remote shell to use</span></span><br><span class="line"><span class="string">     --rsync-path=PROGRAM    specify the rsync to run on the remote machine</span></span><br><span class="line"><span class="string">     --existing              skip creating new files on receiver</span></span><br><span class="line"><span class="string">     --ignore-existing       skip updating files that already exist on receiver</span></span><br><span class="line"><span class="string">     --remove-source-files   sender removes synchronized files (non-dirs)</span></span><br><span class="line"><span class="string">     --del                   an alias for --delete-during</span></span><br><span class="line"><span class="string">     --delete                delete extraneous files from destination dirs</span></span><br><span class="line"><span class="string">     --delete-before         receiver deletes before transfer, not during</span></span><br><span class="line"><span class="string">     --delete-during         receiver deletes during the transfer</span></span><br><span class="line"><span class="string">     --delete-delay          find deletions during, delete after</span></span><br><span class="line"><span class="string">     --delete-after          receiver deletes after transfer, not during</span></span><br><span class="line"><span class="string">     --delete-excluded       also delete excluded files from destination dirs</span></span><br><span class="line"><span class="string">     --ignore-missing-args   ignore missing source args without error</span></span><br><span class="line"><span class="string">     --delete-missing-args   delete missing source args from destination</span></span><br><span class="line"><span class="string">     --ignore-errors         delete even if there are I/O errors</span></span><br><span class="line"><span class="string">     --force                 force deletion of directories even if not empty</span></span><br><span class="line"><span class="string">     --max-delete=NUM        don'</span>t delete more than NUM files</span><br><span class="line">     --max-size=SIZE         don<span class="string">'t transfer any file larger than SIZE</span></span><br><span class="line"><span class="string">     --min-size=SIZE         don'</span>t transfer any file smaller than SIZE</span><br><span class="line">     --partial               keep partially transferred files</span><br><span class="line">     --partial-dir=DIR       put a partially transferred file into DIR</span><br><span class="line">     --delay-updates         put all updated files into place at transfer<span class="string">'s end</span></span><br><span class="line"><span class="string"> -m, --prune-empty-dirs      prune empty directory chains from the file-list</span></span><br><span class="line"><span class="string">     --numeric-ids           don'</span>t map uid/gid values by user/group name</span><br><span class="line">     --usermap=STRING        custom username mapping</span><br><span class="line">     --groupmap=STRING       custom groupname mapping</span><br><span class="line">     --chown=USER:GROUP      simple username/groupname mapping</span><br><span class="line">     --timeout=SECONDS       <span class="built_in">set</span> I/O timeout <span class="keyword">in</span> seconds</span><br><span class="line">     --contimeout=SECONDS    <span class="built_in">set</span> daemon connection timeout <span class="keyword">in</span> seconds</span><br><span class="line"> -I, --ignore-times          don<span class="string">'t skip files that match in size and mod-time</span></span><br><span class="line"><span class="string"> -M, --remote-option=OPTION  send OPTION to the remote side only</span></span><br><span class="line"><span class="string">     --size-only             skip files that match in size</span></span><br><span class="line"><span class="string">     --modify-window=NUM     compare mod-times with reduced accuracy</span></span><br><span class="line"><span class="string"> -T, --temp-dir=DIR          create temporary files in directory DIR</span></span><br><span class="line"><span class="string"> -y, --fuzzy                 find similar file for basis if no dest file</span></span><br><span class="line"><span class="string">     --compare-dest=DIR      also compare destination files relative to DIR</span></span><br><span class="line"><span class="string">     --copy-dest=DIR         ... and include copies of unchanged files</span></span><br><span class="line"><span class="string">     --link-dest=DIR         hardlink to files in DIR when unchanged</span></span><br><span class="line"><span class="string"> -z, --compress              compress file data during the transfer</span></span><br><span class="line"><span class="string">     --compress-level=NUM    explicitly set compression level</span></span><br><span class="line"><span class="string">     --skip-compress=LIST    skip compressing files with a suffix in LIST</span></span><br><span class="line"><span class="string"> -C, --cvs-exclude           auto-ignore files the same way CVS does</span></span><br><span class="line"><span class="string"> -f, --filter=RULE           add a file-filtering RULE</span></span><br><span class="line"><span class="string"> -F                          same as --filter='</span>dir-merge /.rsync-filter<span class="string">'</span></span><br><span class="line"><span class="string">                             repeated: --filter='</span>- .rsync-filter<span class="string">'</span></span><br><span class="line"><span class="string">     --exclude=PATTERN       exclude files matching PATTERN</span></span><br><span class="line"><span class="string">     --exclude-from=FILE     read exclude patterns from FILE</span></span><br><span class="line"><span class="string">     --include=PATTERN       don'</span>t exclude files matching PATTERN</span><br><span class="line">     --include-from=FILE     <span class="built_in">read</span> include patterns from FILE</span><br><span class="line">     --files-from=FILE       <span class="built_in">read</span> list of <span class="built_in">source</span>-file names from FILE</span><br><span class="line"> -0, --from0                 all *-from/filter files are delimited by 0s</span><br><span class="line"> -s, --protect-args          no space-splitting; only wildcard special-chars</span><br><span class="line">     --address=ADDRESS       <span class="built_in">bind</span> address <span class="keyword">for</span> outgoing socket to daemon</span><br><span class="line">     --port=PORT             specify double-colon alternate port number</span><br><span class="line">     --sockopts=OPTIONS      specify custom TCP options</span><br><span class="line">     --blocking-io           use blocking I/O <span class="keyword">for</span> the remote shell</span><br><span class="line">     --stats                 give some file-transfer stats</span><br><span class="line"> -8, --8-bit-output          leave high-bit chars unescaped <span class="keyword">in</span> output</span><br><span class="line"> -h, --human-readable        output numbers <span class="keyword">in</span> a human-readable format</span><br><span class="line">     --progress              show progress during transfer</span><br><span class="line"> -P                          same as --partial --progress</span><br><span class="line"> -i, --itemize-changes       output a change-summary <span class="keyword">for</span> all updates</span><br><span class="line">     --out-format=FORMAT     output updates using the specified FORMAT</span><br><span class="line">     --<span class="built_in">log</span>-file=FILE         <span class="built_in">log</span> what we<span class="string">'re doing to the specified FILE</span></span><br><span class="line"><span class="string">     --log-file-format=FMT   log updates using the specified FMT</span></span><br><span class="line"><span class="string">     --password-file=FILE    read daemon-access password from FILE</span></span><br><span class="line"><span class="string">     --list-only             list the files instead of copying them</span></span><br><span class="line"><span class="string">     --bwlimit=RATE          limit socket I/O bandwidth</span></span><br><span class="line"><span class="string">     --stop-at=y-m-dTh:m     Stop rsync at year-month-dayThour:minute</span></span><br><span class="line"><span class="string">     --time-limit=MINS       Stop rsync after MINS minutes have elapsed</span></span><br><span class="line"><span class="string">     --outbuf=N|L|B          set output buffering to None, Line, or Block</span></span><br><span class="line"><span class="string">     --write-batch=FILE      write a batched update to FILE</span></span><br><span class="line"><span class="string">     --only-write-batch=FILE like --write-batch but w/o updating destination</span></span><br><span class="line"><span class="string">     --read-batch=FILE       read a batched update from FILE</span></span><br><span class="line"><span class="string">     --protocol=NUM          force an older protocol version to be used</span></span><br><span class="line"><span class="string">     --iconv=CONVERT_SPEC    request charset conversion of filenames</span></span><br><span class="line"><span class="string">     --checksum-seed=NUM     set block/file checksum seed (advanced)</span></span><br><span class="line"><span class="string">     --noatime               do not alter atime when opening source files</span></span><br><span class="line"><span class="string"> -4, --ipv4                  prefer IPv4</span></span><br><span class="line"><span class="string"> -6, --ipv6                  prefer IPv6</span></span><br><span class="line"><span class="string">     --version               print version number</span></span><br><span class="line"><span class="string">(-h) --help                  show this help (-h is --help only if used alone)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Use "rsync --daemon --help" to see the daemon-mode command-line options.</span></span><br><span class="line"><span class="string">Please see the rsync(1) and rsyncd.conf(5) man pages for full documentation.</span></span><br><span class="line"><span class="string">See http://rsync.samba.org/ for updates, bug reports, and answers</span></span><br><span class="line"><span class="string">rsync error: syntax or usage error (code 1) at main.c(1569) [client=3.1.2]</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br></pre></td><td class="code"><pre><span class="line">[21:17:54] onns@Onns ~/Desktop $ rsync</span><br><span class="line">rsync  version 2.6.9  protocol version 29</span><br><span class="line">Copyright (C) 1996-2006 by Andrew Tridgell, Wayne Davison, and others.</span><br><span class="line">&lt;http://rsync.samba.org/&gt;</span><br><span class="line">Capabilities: 64-bit files, socketpairs, hard links, symlinks, batchfiles,</span><br><span class="line">              inplace, IPv6, 64-bit system inums, 64-bit internal inums</span><br><span class="line"></span><br><span class="line">rsync comes with ABSOLUTELY NO WARRANTY.  This is free software, and you</span><br><span class="line">are welcome to redistribute it under certain conditions.  See the GNU</span><br><span class="line">General Public Licence <span class="keyword">for</span> details.</span><br><span class="line"></span><br><span class="line">rsync is a file transfer program capable of efficient remote update</span><br><span class="line">via a fast differencing algorithm.</span><br><span class="line"></span><br><span class="line">Usage: rsync [OPTION]... SRC [SRC]... DEST</span><br><span class="line">  or   rsync [OPTION]... SRC [SRC]... [USER@]HOST:DEST</span><br><span class="line">  or   rsync [OPTION]... SRC [SRC]... [USER@]HOST::DEST</span><br><span class="line">  or   rsync [OPTION]... SRC [SRC]... rsync://[USER@]HOST[:PORT]/DEST</span><br><span class="line">  or   rsync [OPTION]... [USER@]HOST:SRC [DEST]</span><br><span class="line">  or   rsync [OPTION]... [USER@]HOST::SRC [DEST]</span><br><span class="line">  or   rsync [OPTION]... rsync://[USER@]HOST[:PORT]/SRC [DEST]</span><br><span class="line">The <span class="string">':'</span> usages connect via remote shell, <span class="keyword">while</span> <span class="string">'::'</span> &amp; <span class="string">'rsync://'</span> usages connect</span><br><span class="line">to an rsync daemon, and require SRC or DEST to start with a module name.</span><br><span class="line"></span><br><span class="line">Options</span><br><span class="line"> -v, --verbose               increase verbosity</span><br><span class="line"> -q, --quiet                 suppress non-error messages</span><br><span class="line">     --no-motd               suppress daemon-mode MOTD (see manpage caveat)</span><br><span class="line"> -c, --checksum              skip based on checksum, not mod-time &amp; size</span><br><span class="line"> -a, --archive               archive mode; same as -rlptgoD (no -H)</span><br><span class="line">     --no-OPTION             turn off an implied OPTION (e.g. --no-D)</span><br><span class="line"> -r, --recursive             recurse into directories</span><br><span class="line"> -R, --relative              use relative path names</span><br><span class="line">     --no-implied-dirs       don<span class="string">'t send implied dirs with --relative</span></span><br><span class="line"><span class="string"> -b, --backup                make backups (see --suffix &amp; --backup-dir)</span></span><br><span class="line"><span class="string">     --backup-dir=DIR        make backups into hierarchy based in DIR</span></span><br><span class="line"><span class="string">     --suffix=SUFFIX         set backup suffix (default ~ w/o --backup-dir)</span></span><br><span class="line"><span class="string"> -u, --update                skip files that are newer on the receiver</span></span><br><span class="line"><span class="string">     --inplace               update destination files in-place (SEE MAN PAGE)</span></span><br><span class="line"><span class="string">     --append                append data onto shorter files</span></span><br><span class="line"><span class="string"> -d, --dirs                  transfer directories without recursing</span></span><br><span class="line"><span class="string"> -l, --links                 copy symlinks as symlinks</span></span><br><span class="line"><span class="string"> -L, --copy-links            transform symlink into referent file/dir</span></span><br><span class="line"><span class="string">     --copy-unsafe-links     only "unsafe" symlinks are transformed</span></span><br><span class="line"><span class="string">     --safe-links            ignore symlinks that point outside the source tree</span></span><br><span class="line"><span class="string"> -k, --copy-dirlinks         transform symlink to a dir into referent dir</span></span><br><span class="line"><span class="string"> -K, --keep-dirlinks         treat symlinked dir on receiver as dir</span></span><br><span class="line"><span class="string"> -H, --hard-links            preserve hard links</span></span><br><span class="line"><span class="string"> -p, --perms                 preserve permissions</span></span><br><span class="line"><span class="string">     --executability         preserve the file'</span>s executability</span><br><span class="line">     --chmod=CHMOD           affect file and/or directory permissions</span><br><span class="line"> -o, --owner                 preserve owner (super-user only)</span><br><span class="line"> -g, --group                 preserve group</span><br><span class="line">     --devices               preserve device files (super-user only)</span><br><span class="line">     --specials              preserve special files</span><br><span class="line"> -D                          same as --devices --specials</span><br><span class="line"> -t, --<span class="built_in">times</span>                 preserve <span class="built_in">times</span></span><br><span class="line"> -O, --omit-dir-times        omit directories when preserving <span class="built_in">times</span></span><br><span class="line">     --super                 receiver attempts super-user activities</span><br><span class="line"> -S, --sparse                handle sparse files efficiently</span><br><span class="line"> -n, --dry-run               show what would have been transferred</span><br><span class="line"> -W, --whole-file            copy files whole (without rsync algorithm)</span><br><span class="line"> -x, --one-file-system       don<span class="string">'t cross filesystem boundaries</span></span><br><span class="line"><span class="string"> -B, --block-size=SIZE       force a fixed checksum block-size</span></span><br><span class="line"><span class="string"> -e, --rsh=COMMAND           specify the remote shell to use</span></span><br><span class="line"><span class="string">     --rsync-path=PROGRAM    specify the rsync to run on the remote machine</span></span><br><span class="line"><span class="string">     --existing              skip creating new files on receiver</span></span><br><span class="line"><span class="string">     --ignore-existing       skip updating files that already exist on receiver</span></span><br><span class="line"><span class="string">     --remove-source-files   sender removes synchronized files (non-dirs)</span></span><br><span class="line"><span class="string">     --del                   an alias for --delete-during</span></span><br><span class="line"><span class="string">     --delete                delete extraneous files from destination dirs</span></span><br><span class="line"><span class="string">     --delete-before         receiver deletes before transfer (default)</span></span><br><span class="line"><span class="string">     --delete-during         receiver deletes during transfer, not before</span></span><br><span class="line"><span class="string">     --delete-after          receiver deletes after transfer, not before</span></span><br><span class="line"><span class="string">     --delete-excluded       also delete excluded files from destination dirs</span></span><br><span class="line"><span class="string">     --ignore-errors         delete even if there are I/O errors</span></span><br><span class="line"><span class="string">     --force                 force deletion of directories even if not empty</span></span><br><span class="line"><span class="string">     --max-delete=NUM        don'</span>t delete more than NUM files</span><br><span class="line">     --max-size=SIZE         don<span class="string">'t transfer any file larger than SIZE</span></span><br><span class="line"><span class="string">     --min-size=SIZE         don'</span>t transfer any file smaller than SIZE</span><br><span class="line">     --partial               keep partially transferred files</span><br><span class="line">     --partial-dir=DIR       put a partially transferred file into DIR</span><br><span class="line">     --delay-updates         put all updated files into place at transfer<span class="string">'s end</span></span><br><span class="line"><span class="string"> -m, --prune-empty-dirs      prune empty directory chains from the file-list</span></span><br><span class="line"><span class="string">     --numeric-ids           don'</span>t map uid/gid values by user/group name</span><br><span class="line">     --timeout=TIME          <span class="built_in">set</span> I/O timeout <span class="keyword">in</span> seconds</span><br><span class="line"> -I, --ignore-times          don<span class="string">'t skip files that match in size and mod-time</span></span><br><span class="line"><span class="string">     --size-only             skip files that match in size</span></span><br><span class="line"><span class="string">     --modify-window=NUM     compare mod-times with reduced accuracy</span></span><br><span class="line"><span class="string"> -T, --temp-dir=DIR          create temporary files in directory DIR</span></span><br><span class="line"><span class="string"> -y, --fuzzy                 find similar file for basis if no dest file</span></span><br><span class="line"><span class="string">     --compare-dest=DIR      also compare destination files relative to DIR</span></span><br><span class="line"><span class="string">     --copy-dest=DIR         ... and include copies of unchanged files</span></span><br><span class="line"><span class="string">     --link-dest=DIR         hardlink to files in DIR when unchanged</span></span><br><span class="line"><span class="string"> -z, --compress              compress file data during the transfer</span></span><br><span class="line"><span class="string">     --compress-level=NUM    explicitly set compression level</span></span><br><span class="line"><span class="string"> -C, --cvs-exclude           auto-ignore files the same way CVS does</span></span><br><span class="line"><span class="string"> -f, --filter=RULE           add a file-filtering RULE</span></span><br><span class="line"><span class="string"> -F                          same as --filter='</span>dir-merge /.rsync-filter<span class="string">'</span></span><br><span class="line"><span class="string">                             repeated: --filter='</span>- .rsync-filter<span class="string">'</span></span><br><span class="line"><span class="string">     --exclude=PATTERN       exclude files matching PATTERN</span></span><br><span class="line"><span class="string">     --exclude-from=FILE     read exclude patterns from FILE</span></span><br><span class="line"><span class="string">     --include=PATTERN       don'</span>t exclude files matching PATTERN</span><br><span class="line">     --include-from=FILE     <span class="built_in">read</span> include patterns from FILE</span><br><span class="line">     --files-from=FILE       <span class="built_in">read</span> list of <span class="built_in">source</span>-file names from FILE</span><br><span class="line"> -0, --from0                 all *-from/filter files are delimited by 0s</span><br><span class="line">     --address=ADDRESS       <span class="built_in">bind</span> address <span class="keyword">for</span> outgoing socket to daemon</span><br><span class="line">     --port=PORT             specify double-colon alternate port number</span><br><span class="line">     --sockopts=OPTIONS      specify custom TCP options</span><br><span class="line">     --blocking-io           use blocking I/O <span class="keyword">for</span> the remote shell</span><br><span class="line">     --stats                 give some file-transfer stats</span><br><span class="line"> -8, --8-bit-output          leave high-bit chars unescaped <span class="keyword">in</span> output</span><br><span class="line"> -h, --human-readable        output numbers <span class="keyword">in</span> a human-readable format</span><br><span class="line">     --progress              show progress during transfer</span><br><span class="line"> -P                          same as --partial --progress</span><br><span class="line"> -i, --itemize-changes       output a change-summary <span class="keyword">for</span> all updates</span><br><span class="line">     --out-format=FORMAT     output updates using the specified FORMAT</span><br><span class="line">     --<span class="built_in">log</span>-file=FILE         <span class="built_in">log</span> what we<span class="string">'re doing to the specified FILE</span></span><br><span class="line"><span class="string">     --log-file-format=FMT   log updates using the specified FMT</span></span><br><span class="line"><span class="string">     --password-file=FILE    read password from FILE</span></span><br><span class="line"><span class="string">     --list-only             list the files instead of copying them</span></span><br><span class="line"><span class="string">     --bwlimit=KBPS          limit I/O bandwidth; KBytes per second</span></span><br><span class="line"><span class="string">     --write-batch=FILE      write a batched update to FILE</span></span><br><span class="line"><span class="string">     --only-write-batch=FILE like --write-batch but w/o updating destination</span></span><br><span class="line"><span class="string">     --read-batch=FILE       read a batched update from FILE</span></span><br><span class="line"><span class="string">     --protocol=NUM          force an older protocol version to be used</span></span><br><span class="line"><span class="string"> -E, --extended-attributes   copy extended attributes</span></span><br><span class="line"><span class="string">     --cache                 disable fcntl(F_NOCACHE)</span></span><br><span class="line"><span class="string"> -4, --ipv4                  prefer IPv4</span></span><br><span class="line"><span class="string"> -6, --ipv6                  prefer IPv6</span></span><br><span class="line"><span class="string">     --version               print version number</span></span><br><span class="line"><span class="string">(-h) --help                  show this help (-h works with no other options)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Use "rsync --daemon --help" to see the daemon-mode command-line options.</span></span><br><span class="line"><span class="string">Please see the rsync(1) and rsyncd.conf(5) man pages for full documentation.</span></span><br><span class="line"><span class="string">See http://rsync.samba.org/ for updates, bug reports, and answers</span></span><br><span class="line"><span class="string">rsync error: syntax or usage error (code 1) at /AppleInternal/BuildRoot/Library/Caches/com.apple.xbs/Sources/rsync/rsync-54.120.1/rsync/main.c(1322) [client=2.6.9]</span></span><br></pre></td></tr></table></figure><p>æœ‰é¢å¤–å±æ€§çš„æ–‡ä»¶åœ¨<code>ls -l</code>çš„æ—¶å€™æœ€ç»“å°¾ä¼šæœ‰ä¸ª<code>@</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">[21:24:39] onns@Onns ~/Desktop $ ls -l</span><br><span class="line">total 46544</span><br><span class="line">-rw-r--r--@  1 onns  staff  9604320 Apr 12 23:19 1618240743618.ncm</span><br><span class="line">drwxr-xr-x@  3 onns  staff       96 Apr 21 22:00 Movies</span><br><span class="line">drwxr-xr-x   4 onns  staff      128 Apr 21 22:00 Music</span><br><span class="line">drwxr-xr-x@  8 onns  staff      256 Apr 22 20:30 Pictures</span><br><span class="line">drwxr-xr-x@ 23 onns  staff      736 Feb 17 20:08 SENET</span><br><span class="line">drwxr-xr-x  12 onns  staff      384 Apr 21 22:00 backup</span><br><span class="line">drwxr-xr-x@ 32 onns  staff     1024 Feb 10 01:30 c3d</span><br><span class="line">-rw-r--r--   1 onns  staff   326656 Apr 21 21:21 database.db</span><br><span class="line">-rwxrwxrwx@  1 onns  staff  5175286 Dec  8 19:57 dense_trajectory_release_v1.2.tar.gz</span><br><span class="line">-rw-r--r--@  1 onns  staff    80298 Feb 17 17:57 fig.pdf</span><br><span class="line">drwxr-xr-x@ 22 onns  staff      704 Feb 16 02:33 group-conv</span><br><span class="line">drwxrwxr-x@  4 onns  staff      128 Mar 26 15:10 ocloud</span><br><span class="line">-rw-r--r--@  1 onns  staff       50 Apr 12 14:31 onns.txt</span><br><span class="line">drwxrwxrwx  12 onns  staff      384 Dec  2 19:51 pretrained</span><br><span class="line">drwxr-xr-x@  9 onns  staff      288 Feb 21 19:57 resnet</span><br><span class="line">-rw-rw-r--@  1 onns  staff    23517 Aug 23  2019 shift_ori_3d.pdf</span><br><span class="line">-rw-rw-r--@  1 onns  staff    32650 Aug 23  2019 shift_zero_3d.pdf</span><br><span class="line">-rw-r--r--   1 onns  staff      223 Apr 14 15:05 t.go</span><br><span class="line">drwxr-xr-x@ 11 onns  staff      352 Feb 20 20:55 tea</span><br><span class="line">drwxrwxrwx@  9 onns  staff      288 Apr 20 20:30 temp</span><br><span class="line">-rw-r--r--   1 onns  staff      233 Mar 17 19:27 temp.go</span><br><span class="line">-rw-r--r--@  1 onns  staff      233 Apr 22 20:50 temp_tag.go</span><br><span class="line">drwxr-xr-x@ 20 onns  staff      640 Feb 17 04:06 tsm</span><br><span class="line">drwxr-xr-x@ 27 onns  staff      864 Feb  9 19:51 tsn</span><br><span class="line">-rw-r--r--@  1 onns  staff       48 Apr  7 13:32 wish.txt</span><br><span class="line">-rw-r--r--@  1 onns  staff  8257851 Apr 12 23:22 è‰¾è¾° - é”™ä½æ—¶ç©º.ncm</span><br></pre></td></tr></table></figure><h2 id="ä»£ç "><a class="header-anchor" href="#ä»£ç ">#</a>ä»£ç </h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [[ ! -e <span class="variable">$1</span> ]] ; <span class="keyword">then</span></span><br><span class="line"></span><br><span class="line"> <span class="built_in">echo</span> <span class="string">'file missing or not specified'</span></span><br><span class="line"></span><br><span class="line"> <span class="built_in">exit</span> 0</span><br><span class="line"></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">JSON=<span class="string">"<span class="variable">$(xattr -p com.apple.metadata:_kMDItemUserTags $1 | xxd -r -p | plutil -convert json - -o -)</span>"</span></span><br><span class="line"></span><br><span class="line">IFS=<span class="string">","</span> tag_split=(<span class="string">"<span class="variable">$&#123;JSON:1:$&#123;#JSON&#125;</span>-2&#125;"</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"File tags for <span class="variable">$1</span>:"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="variable">$&#123;tag_split[@]&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"></span><br><span class="line"> <span class="built_in">echo</span> <span class="string">"<span class="variable">$i</span>"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [[ ! -e <span class="variable">$1</span> ]] ; <span class="keyword">then</span></span><br><span class="line"></span><br><span class="line"> <span class="built_in">echo</span> <span class="string">'file missing or not specified'</span></span><br><span class="line"></span><br><span class="line"> <span class="built_in">exit</span> 0</span><br><span class="line"></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ -z <span class="string">"<span class="variable">$2</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line"></span><br><span class="line"> <span class="built_in">echo</span> <span class="string">'file tags not specified'</span></span><br><span class="line"></span><br><span class="line"> <span class="built_in">exit</span> 0</span><br><span class="line"></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">BLOB=<span class="string">"<span class="variable">$(echo $2| plutil -convert binary1 - -o - | xxd -p -c 256 -u)</span>"</span></span><br><span class="line"></span><br><span class="line">xattr -xw com.apple.metadata:_kMDItemUserTags <span class="variable">$BLOB</span> <span class="variable">$1</span></span><br></pre></td></tr></table></figure><h2 id="ç›¸å…³é“¾æ¥"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥">#</a>ç›¸å…³é“¾æ¥</h2><ul><li><a href="https://man7.org/linux/man-pages/man7/xattr.7.html" target="_blank" rel="noopener">xattr(7) â€” Linux manual page</a></li><li><a href="https://man7.org/linux/man-pages/man1/attr.1.html" target="_blank" rel="noopener">attr(1) â€” Linux manual page</a></li><li><a href="https://github.com/jdberry/tag" target="_blank" rel="noopener">https://github.com/jdberry/tag</a></li><li><a href="https://stackoverflow.com/questions/20618492/where-are-extended-attributes-stored" target="_blank" rel="noopener">where are extended attributes stored?</a></li><li><a href="https://www.linkedin.com/pulse/getting-setting-file-tags-via-command-line-os-x-boris-herman" target="_blank" rel="noopener">Getting and setting file tags in macOS via command line</a></li><li><a href="https://brettterpstra.com/2017/08/22/tagging-files-from-the-command-line/" target="_blank" rel="noopener">Tagging files from the macOS command line</a></li><li><a href="https://stackoverflow.com/questions/19720376/how-can-i-add-os-x-tags-to-files-programmatically" target="_blank" rel="noopener">How can I add OS X â€œtagsâ€ to files programmatically?</a></li><li><a href="https://man.cx/xattr" target="_blank" rel="noopener">https://man.cx/xattr</a></li><li><a href="https://apple.stackexchange.com/questions/183430/rsync-not-copying-some-files-with-extended-attributes" target="_blank" rel="noopener">Rsync not copying some files with extended attributes</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> try </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> macos </tag>
            
            <tag> rsync </tag>
            
            <tag> tag </tag>
            
            <tag> xattr </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŠGoè¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹ç¬”è®°ï¼ˆ11ï¼‰</title>
      <link href="/blog/2021/04/19/the-go-programming-language-note-11/"/>
      <url>/blog/2021/04/19/the-go-programming-language-note-11/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šgo-è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹"><a class="header-anchor" href="#ã€Šgo-è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹">#</a>ã€ŠGo è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹</h1><a id="more"></a><h1 id="å¤åˆæ•°æ®ç±»å‹"><a class="header-anchor" href="#å¤åˆæ•°æ®ç±»å‹">#</a>å¤åˆæ•°æ®ç±»å‹</h1><h2 id="ç»“æ„ä½“"><a class="header-anchor" href="#ç»“æ„ä½“">#</a>ç»“æ„ä½“</h2><p>ç»“æ„ä½“æ˜¯ä¸€ç§èšåˆçš„æ•°æ®ç±»å‹ï¼Œæ˜¯ç”±é›¶ä¸ªæˆ–å¤šä¸ªä»»æ„ç±»å‹çš„å€¼èšåˆæˆçš„å®ä½“ï¼Œæ¯ä¸ªå€¼ç§°ä¸ºç»“æ„ä½“çš„æˆå‘˜ã€‚</p><p>ç»“æ„ä½“å˜é‡çš„æˆå‘˜å¯ä»¥é€šè¿‡ç‚¹æ“ä½œç¬¦è®¿é—®ï¼Œæˆ–è€…æ˜¯å¯¹æˆå‘˜å–åœ°å€ï¼Œç„¶åé€šè¿‡æŒ‡é’ˆè®¿é—®ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// -------------------------------------------</span></span><br><span class="line"><span class="comment">// Created By : Onns onns@onns.xyz</span></span><br><span class="line"><span class="comment">// File Name : 4.5.go</span></span><br><span class="line"><span class="comment">// Purpose :</span></span><br><span class="line"><span class="comment">// Creation Date : 2021-04-19 12:14:48</span></span><br><span class="line"><span class="comment">// Last Modified : 2021-04-19 12:18:52</span></span><br><span class="line"><span class="comment">// -------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Employee <span class="keyword">struct</span> &#123;</span><br><span class="line">ID        <span class="keyword">int</span></span><br><span class="line">Name      <span class="keyword">string</span></span><br><span class="line">Address   <span class="keyword">string</span></span><br><span class="line">DoB       time.Time</span><br><span class="line">Position  <span class="keyword">string</span></span><br><span class="line">Salary    <span class="keyword">int</span></span><br><span class="line">ManagerID <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> dilbert Employee</span><br><span class="line">dilbert.Salary -= <span class="number">5000</span></span><br><span class="line">position := &amp;dilbert.Position</span><br><span class="line">*position = <span class="string">"Senior "</span> + *position</span><br><span class="line"></span><br><span class="line">fmt.Println(dilbert)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[12:18:52] onns@Onns ~/Documents/code/go/go-bible/ch4 $ go run 4.5.go</span><br><span class="line">&#123;0   0001-01-01 00:00:00 +0000 UTC Senior  -5000 0&#125;</span><br></pre></td></tr></table></figure><p>ç‚¹æ“ä½œç¬¦ä¹Ÿå¯ä»¥å’ŒæŒ‡å‘ç»“æ„ä½“çš„æŒ‡é’ˆä¸€èµ·å·¥ä½œï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> employeeOfTheMonth *Employee = &amp;dilbert</span><br><span class="line">employeeOfTheMonth.Position += <span class="string">" (proactive team player)"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›¸å½“äºä¸‹é¢è¯­å¥</span></span><br><span class="line">(*employeeOfTheMonth).Position += <span class="string">" (proactive team player)"</span></span><br></pre></td></tr></table></figure><p>é€šå¸¸ä¸€è¡Œå¯¹åº”ä¸€ä¸ªç»“æ„ä½“æˆå‘˜ï¼Œæˆå‘˜çš„åå­—åœ¨å‰ç±»å‹åœ¨åï¼Œå¦‚æœç›¸é‚»çš„æˆå‘˜ç±»å‹å¦‚æœç›¸åŒçš„è¯å¯ä»¥è¢«åˆå¹¶åˆ°ä¸€è¡Œï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Employee <span class="keyword">struct</span> &#123;</span><br><span class="line">ID            <span class="keyword">int</span></span><br><span class="line">Name, Address <span class="keyword">string</span></span><br><span class="line">DoB           time.Time</span><br><span class="line">Position      <span class="keyword">string</span></span><br><span class="line">Salary        <span class="keyword">int</span></span><br><span class="line">ManagerID     <span class="keyword">int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœç»“æ„ä½“æˆå‘˜åå­—æ˜¯ä»¥å¤§å†™å­—æ¯å¼€å¤´çš„ï¼Œé‚£ä¹ˆè¯¥æˆå‘˜å°±æ˜¯å¯¼å‡ºçš„ã€‚ä¸€ä¸ªç»“æ„ä½“å¯èƒ½åŒæ—¶åŒ…å«å¯¼å‡ºå’Œæœªå¯¼å‡ºçš„æˆå‘˜ã€‚<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p><p>ä¸€ä¸ªå‘½åä¸º<code>S</code>çš„ç»“æ„ä½“ç±»å‹å°†ä¸èƒ½å†åŒ…å«<code>S</code>ç±»å‹çš„æˆå‘˜ï¼šå› ä¸ºä¸€ä¸ªèšåˆçš„å€¼ä¸èƒ½åŒ…å«å®ƒè‡ªèº«ï¼Œä½†æ˜¯<code>S</code>ç±»å‹çš„ç»“æ„ä½“å¯ä»¥åŒ…å«<code>*S</code>æŒ‡é’ˆç±»å‹çš„æˆå‘˜ï¼Œè¿™å¯ä»¥è®©æˆ‘ä»¬åˆ›å»ºé€’å½’çš„æ•°æ®ç»“æ„ï¼Œæ¯”å¦‚é“¾è¡¨å’Œæ ‘ç»“æ„ç­‰ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// -------------------------------------------</span></span><br><span class="line"><span class="comment">// Created By : Onns onns@onns.xyz</span></span><br><span class="line"><span class="comment">// File Name : 4.6.go</span></span><br><span class="line"><span class="comment">// Purpose :</span></span><br><span class="line"><span class="comment">// Creation Date : 2021-04-19 12:14:48</span></span><br><span class="line"><span class="comment">// Last Modified : 2021-04-20 16:53:48</span></span><br><span class="line"><span class="comment">// -------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Employee <span class="keyword">struct</span> &#123;</span><br><span class="line">ID        <span class="keyword">int</span></span><br><span class="line">Name      <span class="keyword">string</span></span><br><span class="line">Address   <span class="keyword">string</span></span><br><span class="line">DoB       time.Time</span><br><span class="line">Position  <span class="keyword">string</span></span><br><span class="line">Salary    <span class="keyword">int</span></span><br><span class="line">ManagerID <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> d Employee</span><br><span class="line">d.Salary -= <span class="number">5000</span></span><br><span class="line">position := &amp;d.Position</span><br><span class="line">*position = <span class="string">"Senior "</span> + *position</span><br><span class="line"></span><br><span class="line">fmt.Println(d)</span><br><span class="line"></span><br><span class="line">e := &amp;d</span><br><span class="line">fmt.Printf(<span class="string">"%T %T\n"</span>, e, d)</span><br><span class="line">e.Position += <span class="string">" (proactive team player)"</span></span><br><span class="line">fmt.Println(d)</span><br><span class="line"></span><br><span class="line">d.Position += <span class="string">" ?"</span></span><br><span class="line">fmt.Println(d)</span><br><span class="line"><span class="comment">// ä¸ºä»€ä¹ˆè¿™é‡Œ &amp;d å’Œ d æ˜¯ç­‰æ•ˆçš„ï¼Ÿ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‘ç°ä¸€ä¸ªé—®é¢˜ï¼šä¸ºä»€ä¹ˆè¿™é‡Œ<code>&amp;d</code>å’Œ<code>d</code>æ˜¯ç­‰æ•ˆçš„ï¼Ÿæˆ‘å¾ˆå¥½å¥‡ã€‚ã€‚ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[16:53:50] onns@Onns ~/Documents/code/go/go-bible/ch4 $ go run 4.6.go</span><br><span class="line">&#123;0   0001-01-01 00:00:00 +0000 UTC Senior  -5000 0&#125;</span><br><span class="line">*main.Employee main.Employee</span><br><span class="line">&#123;0   0001-01-01 00:00:00 +0000 UTC Senior  (proactive team player) -5000 0&#125;</span><br><span class="line">&#123;0   0001-01-01 00:00:00 +0000 UTC Senior  (proactive team player) ? -5000 0&#125;</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">EmployeeByID</span><span class="params">(id <span class="keyword">int</span>)</span> *<span class="title">Employee</span></span> &#123; <span class="comment">/* ... */</span> &#125;</span><br><span class="line"></span><br><span class="line">fmt.Println(EmployeeByID(dilbert.ManagerID).Position) <span class="comment">// "Pointy-haired boss"</span></span><br><span class="line"></span><br><span class="line">id := dilbert.ID</span><br><span class="line">EmployeeByID(id).Salary = <span class="number">0</span> <span class="comment">// fired for... no real reason</span></span><br></pre></td></tr></table></figure><blockquote><p>åé¢çš„è¯­å¥é€šè¿‡<code>EmployeeByID</code>è¿”å›çš„ç»“æ„ä½“æŒ‡é’ˆæ›´æ–°äº†<code>Employee</code>ç»“æ„ä½“çš„æˆå‘˜ã€‚å¦‚æœå°†<code>EmployeeByID</code>å‡½æ•°çš„è¿”å›å€¼ä»<code>*Employee</code>æŒ‡é’ˆç±»å‹æ”¹ä¸º<code>Employee</code>å€¼ç±»å‹ï¼Œé‚£ä¹ˆæ›´æ–°è¯­å¥å°†ä¸èƒ½ç¼–è¯‘é€šè¿‡ï¼Œå› ä¸ºåœ¨èµ‹å€¼è¯­å¥çš„å·¦è¾¹å¹¶ä¸ç¡®å®šæ˜¯ä¸€ä¸ªå˜é‡ï¼ˆè¯‘æ³¨ï¼šè°ƒç”¨å‡½æ•°è¿”å›çš„æ˜¯å€¼ï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªå¯å–åœ°å€çš„å˜é‡ï¼‰ã€‚</p></blockquote><p>ä¸Šé¢è¿™å¥è¯ï¼Œæˆ‘æ„Ÿè§‰ä¹Ÿæ²¡ç†è§£ï¼Œè‡ªå·±æµ‹è¯•äº†ä¸€ä¸‹å‘ç°å¯ä»¥é€šè¿‡ç¼–è¯‘ï¼Ÿ</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// -------------------------------------------</span></span><br><span class="line"><span class="comment">// Created By : Onns onns@onns.xyz</span></span><br><span class="line"><span class="comment">// File Name : 4.7.go</span></span><br><span class="line"><span class="comment">// Purpose :</span></span><br><span class="line"><span class="comment">// Creation Date : 2021-04-19 12:14:48</span></span><br><span class="line"><span class="comment">// Last Modified : 2021-04-20 17:13:00</span></span><br><span class="line"><span class="comment">// -------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"time"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Employee <span class="keyword">struct</span> &#123;</span><br><span class="line">ID        <span class="keyword">int</span></span><br><span class="line">Name      <span class="keyword">string</span></span><br><span class="line">Address   <span class="keyword">string</span></span><br><span class="line">DoB       time.Time</span><br><span class="line">Position  <span class="keyword">string</span></span><br><span class="line">Salary    <span class="keyword">int</span></span><br><span class="line">ManagerID <span class="keyword">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> d Employee</span><br><span class="line"><span class="keyword">var</span> e *Employee</span><br><span class="line"></span><br><span class="line"><span class="comment">// func init() &#123;</span></span><br><span class="line"><span class="comment">// d.Salary = 5000</span></span><br><span class="line"><span class="comment">// e.Salary = 2000</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">EmployeeById</span><span class="params">(id <span class="keyword">int</span>)</span> *<span class="title">Employee</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> id == <span class="number">1</span> &#123;</span><br><span class="line"><span class="keyword">return</span> &amp;d</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> id == <span class="number">2</span> &#123;</span><br><span class="line"><span class="keyword">return</span> e</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> &amp;d</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">EmployeeById2</span><span class="params">(id <span class="keyword">int</span>)</span> <span class="title">Employee</span></span> &#123;</span><br><span class="line"><span class="keyword">if</span> id == <span class="number">1</span> &#123;</span><br><span class="line"><span class="keyword">return</span> d</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> id == <span class="number">2</span> &#123;</span><br><span class="line"><span class="keyword">return</span> *e</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> d</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">d.Salary = <span class="number">5000</span></span><br><span class="line">e = <span class="built_in">new</span>(Employee)</span><br><span class="line">(*e).Salary = <span class="number">2000</span></span><br><span class="line">fmt.Printf(<span class="string">"%T "</span>, d)</span><br><span class="line">fmt.Println(d)</span><br><span class="line">fmt.Printf(<span class="string">"%T "</span>, e)</span><br><span class="line">fmt.Println(e)</span><br><span class="line"></span><br><span class="line">a := EmployeeById(<span class="number">1</span>)</span><br><span class="line">b := EmployeeById(<span class="number">2</span>)</span><br><span class="line">a.Position = <span class="string">"aaa"</span></span><br><span class="line">b.Position = <span class="string">"bbb"</span></span><br><span class="line">fmt.Printf(<span class="string">"%T "</span>, a)</span><br><span class="line">fmt.Println(a)</span><br><span class="line">fmt.Printf(<span class="string">"%T "</span>, b)</span><br><span class="line">fmt.Println(b)</span><br><span class="line"></span><br><span class="line">c := EmployeeById2(<span class="number">1</span>)</span><br><span class="line">f := EmployeeById2(<span class="number">2</span>)</span><br><span class="line">c.Name = <span class="string">"ccc"</span></span><br><span class="line">f.Name = <span class="string">"fff"</span></span><br><span class="line">fmt.Printf(<span class="string">"%T "</span>, c)</span><br><span class="line">fmt.Println(c)</span><br><span class="line">fmt.Printf(<span class="string">"%T "</span>, f)</span><br><span class="line">fmt.Println(f)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[18:58:24] onns@Onns ~/Documents/code/go/go-bible/ch4 $ go run 4.7.go</span><br><span class="line">main.Employee &#123;0   0001-01-01 00:00:00 +0000 UTC  5000 0&#125;</span><br><span class="line">*main.Employee &amp;&#123;0   0001-01-01 00:00:00 +0000 UTC  2000 0&#125;</span><br><span class="line">*main.Employee &amp;&#123;0   0001-01-01 00:00:00 +0000 UTC aaa 5000 0&#125;</span><br><span class="line">*main.Employee &amp;&#123;0   0001-01-01 00:00:00 +0000 UTC bbb 2000 0&#125;</span><br><span class="line">main.Employee &#123;0 ccc  0001-01-01 00:00:00 +0000 UTC aaa 5000 0&#125;</span><br><span class="line">main.Employee &#123;0 fff  0001-01-01 00:00:00 +0000 UTC bbb 2000 0&#125;</span><br></pre></td></tr></table></figure><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>å¯¼å‡ºæ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> macos </tag>
            
            <tag> golang </tag>
            
            <tag> go </tag>
            
            <tag> golang note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŠGoè¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹ç¬”è®°ï¼ˆ10ï¼‰</title>
      <link href="/blog/2021/04/18/the-go-programming-language-note-10/"/>
      <url>/blog/2021/04/18/the-go-programming-language-note-10/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šgo-è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹"><a class="header-anchor" href="#ã€Šgo-è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹">#</a>ã€ŠGo è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹</h1><a id="more"></a><h1 id="å¤åˆæ•°æ®ç±»å‹"><a class="header-anchor" href="#å¤åˆæ•°æ®ç±»å‹">#</a>å¤åˆæ•°æ®ç±»å‹</h1><h2 id="map"><a class="header-anchor" href="#map">#</a>Map</h2><p>å“ˆå¸Œè¡¨æ˜¯ä¸€ä¸ªæ— åºçš„<code>key/value</code>å¯¹çš„é›†åˆï¼Œå…¶ä¸­æ‰€æœ‰çš„<code>key</code>éƒ½æ˜¯ä¸åŒçš„ï¼Œç„¶åé€šè¿‡ç»™å®šçš„<code>key</code>å¯ä»¥åœ¨å¸¸æ•°æ—¶é—´å¤æ‚åº¦å†…æ£€ç´¢ã€æ›´æ–°æˆ–åˆ é™¤å¯¹åº”çš„<code>value</code>ã€‚</p><p>åœ¨<code>Go</code>è¯­è¨€ä¸­ï¼Œä¸€ä¸ª<code>map</code>å°±æ˜¯ä¸€ä¸ªå“ˆå¸Œè¡¨çš„å¼•ç”¨ï¼Œ<code>map</code>ç±»å‹å¯ä»¥å†™ä¸º<code>map[K]V</code>ï¼Œå…¶ä¸­<code>K</code>å’Œ<code>V</code>åˆ†åˆ«å¯¹åº”<code>key</code>å’Œ<code>value</code>ï¼Œ<code>map</code>ä¸­æ‰€æœ‰çš„<code>key</code>éƒ½æœ‰ç›¸åŒçš„ç±»å‹ï¼Œæ‰€æœ‰çš„<code>value</code>ä¹Ÿæœ‰ç€ç›¸åŒçš„ç±»å‹ï¼Œä½†æ˜¯<code>key</code>å’Œ<code>value</code>ä¹‹é—´å¯ä»¥æ˜¯ä¸åŒçš„æ•°æ®ç±»å‹ã€‚å…¶ä¸­<code>K</code>å¯¹åº”çš„<code>key</code>å¿…é¡»æ˜¯æ”¯æŒ<code>==</code>æ¯”è¾ƒè¿ç®—ç¬¦çš„æ•°æ®ç±»å‹ï¼Œæ‰€ä»¥<code>map</code>å¯ä»¥é€šè¿‡æµ‹è¯•<code>key</code>æ˜¯å¦ç›¸ç­‰æ¥åˆ¤æ–­æ˜¯å¦å·²ç»å­˜åœ¨ã€‚</p><p>å†…ç½®çš„<code>make</code>å‡½æ•°å¯ä»¥åˆ›å»ºä¸€ä¸ª<code>map</code>ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ages := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>)</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ç”¨<code>map</code>å­—é¢å€¼çš„è¯­æ³•åˆ›å»º<code>map</code>ï¼ŒåŒæ—¶è¿˜å¯ä»¥æŒ‡å®šä¸€äº›æœ€åˆçš„<code>key/value</code>ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ages := <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>&#123;</span><br><span class="line"><span class="string">"alice"</span>:   <span class="number">31</span>,</span><br><span class="line"><span class="string">"charlie"</span>: <span class="number">34</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// -------------------------------------------</span></span><br><span class="line"><span class="comment">// Created By : Onns onns@onns.xyz</span></span><br><span class="line"><span class="comment">// File Name : 4.3.go</span></span><br><span class="line"><span class="comment">// Purpose :</span></span><br><span class="line"><span class="comment">// Creation Date : 2021-04-19 10:35:06</span></span><br><span class="line"><span class="comment">// Last Modified : 2021-04-19 10:36:39</span></span><br><span class="line"><span class="comment">// -------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">ages := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>)</span><br><span class="line">ages[<span class="string">"alice"</span>] = <span class="number">31</span></span><br><span class="line">ages[<span class="string">"charlie"</span>] = <span class="number">34</span></span><br><span class="line">fmt.Println(ages[<span class="string">"alice"</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>map[string]int{}</code>å¯ä»¥ç”¨æ¥åˆ›å»ºç©ºçš„<code>map</code>çš„è¡¨è¾¾å¼ã€‚</p><p>ä½¿ç”¨å†…ç½®çš„<code>delete</code>å‡½æ•°å¯ä»¥åˆ é™¤å…ƒç´ ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">delete</span>(ages, <span class="string">"alice"</span>)</span><br></pre></td></tr></table></figure><p>å¦‚æœä¸€ä¸ªæŸ¥æ‰¾å¤±è´¥å°†è¿”å›<code>value</code>ç±»å‹å¯¹åº”çš„é›¶å€¼ã€‚</p><p><code>x += y</code>å’Œ<code>x++</code>ç­‰ç®€çŸ­èµ‹å€¼è¯­æ³•ä¹Ÿå¯ä»¥ç”¨åœ¨<code>map</code>ä¸Šã€‚</p><p><code>map</code>ä¸­çš„å…ƒç´ å¹¶ä¸æ˜¯ä¸€ä¸ªå˜é‡ï¼Œå› æ­¤æˆ‘ä»¬ä¸èƒ½å¯¹<code>map</code>çš„å…ƒç´ è¿›è¡Œå–å€æ“ä½œï¼ŒåŸå› æ˜¯<code>map</code>å¯èƒ½éšç€å…ƒç´ æ•°é‡çš„å¢é•¿è€Œé‡æ–°åˆ†é…æ›´å¤§çš„å†…å­˜ç©ºé—´ï¼Œä»è€Œå¯èƒ½å¯¼è‡´ä¹‹å‰çš„åœ°å€æ— æ•ˆã€‚</p><p><code>map</code>çš„è¿­ä»£é¡ºåºæ˜¯ä¸ç¡®å®šçš„ï¼Œå¹¶ä¸”ä¸åŒçš„å“ˆå¸Œå‡½æ•°å®ç°å¯èƒ½å¯¼è‡´ä¸åŒçš„éå†é¡ºåºã€‚</p><p><code>map</code>ç±»å‹çš„é›¶å€¼æ˜¯<code>nil</code>ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰å¼•ç”¨ä»»ä½•å“ˆå¸Œè¡¨ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ages <span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span></span><br><span class="line">fmt.Println(ages == <span class="literal">nil</span>)    <span class="comment">// "true"</span></span><br><span class="line">fmt.Println(<span class="built_in">len</span>(ages) == <span class="number">0</span>) <span class="comment">// "true"</span></span><br></pre></td></tr></table></figure><p><code>map</code>ä¸Šçš„å¤§éƒ¨åˆ†æ“ä½œï¼ŒåŒ…æ‹¬æŸ¥æ‰¾ã€åˆ é™¤ã€<code>len</code>å’Œ<code>range</code>å¾ªç¯éƒ½å¯ä»¥å®‰å…¨å·¥ä½œåœ¨<code>nil</code>å€¼çš„<code>map</code>ä¸Šï¼Œå®ƒä»¬çš„è¡Œä¸ºå’Œä¸€ä¸ªç©ºçš„<code>map</code>ç±»ä¼¼ã€‚ä½†æ˜¯å‘ä¸€ä¸ª<code>nil</code>å€¼çš„<code>map</code>å­˜å…¥å…ƒç´ å°†å¯¼è‡´ä¸€ä¸ª<code>panic</code>å¼‚å¸¸ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ages[<span class="string">"carol"</span>] = <span class="number">21</span> <span class="comment">// panic: assignment to entry in nil map</span></span><br></pre></td></tr></table></figure><p>åœ¨å‘<code>map</code>å­˜æ•°æ®å‰å¿…é¡»å…ˆåˆ›å»º<code>map</code>ã€‚</p><p>é€šè¿‡<code>key</code>ä½œä¸ºç´¢å¼•ä¸‹æ ‡æ¥è®¿é—®<code>map</code>å°†äº§ç”Ÿä¸€ä¸ª<code>value</code>ã€‚å¦‚æœ<code>key</code>åœ¨<code>map</code>ä¸­æ˜¯å­˜åœ¨çš„ï¼Œé‚£ä¹ˆå°†å¾—åˆ°ä¸<code>key</code>å¯¹åº”çš„<code>value</code>ï¼›å¦‚æœ<code>key</code>ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå°†å¾—åˆ°<code>value</code>å¯¹åº”ç±»å‹çš„é›¶å€¼ã€‚</p><p>ç¬¬äºŒä¸ªè¿”å›å€¼ç”¨æ¥ç¡®å®šå¯¹åº”çš„å…ƒç´ æ˜¯å¦çœŸçš„æ˜¯åœ¨<code>map</code>ä¹‹ä¸­ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">age, ok := ages[<span class="string">"bob"</span>]</span><br><span class="line"><span class="keyword">if</span> !ok &#123; <span class="comment">/* "bob" is not a key in this map; age == 0. */</span> &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> age, ok := ages[<span class="string">"bob"</span>]; !ok &#123; <span class="comment">/* ... */</span> &#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™ç§åœºæ™¯ä¸‹ï¼Œ<code>map</code>çš„ä¸‹æ ‡è¯­æ³•å°†äº§ç”Ÿä¸¤ä¸ªå€¼ï¼Œç¬¬äºŒä¸ªæ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œç”¨äºæŠ¥å‘Šå…ƒç´ æ˜¯å¦çœŸçš„å­˜åœ¨ã€‚å¸ƒå°”å˜é‡ä¸€èˆ¬å‘½åä¸º<code>ok</code>ï¼Œç‰¹åˆ«é€‚åˆé©¬ä¸Šç”¨äº<code>if</code>æ¡ä»¶åˆ¤æ–­éƒ¨åˆ†ã€‚</p><p><code>map</code>ä¹‹é—´ä¸èƒ½è¿›è¡Œç›¸ç­‰æ¯”è¾ƒï¼Œå”¯ä¸€çš„ä¾‹å¤–æ˜¯å’Œ<code>nil</code>è¿›è¡Œæ¯”è¾ƒã€‚</p><p>æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦ä¸€ä¸ª<code>map</code>æˆ–<code>set</code>çš„<code>key</code>æ˜¯<code>slice</code>ç±»å‹ï¼Œä½†æ˜¯<code>map</code>çš„<code>key</code>å¿…é¡»æ˜¯å¯æ¯”è¾ƒçš„ç±»å‹ï¼Œä½†æ˜¯<code>slice</code>å¹¶ä¸æ»¡è¶³è¿™ä¸ªæ¡ä»¶ã€‚ä¸è¿‡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸¤ä¸ªæ­¥éª¤ç»•è¿‡è¿™ä¸ªé™åˆ¶ã€‚ç¬¬ä¸€æ­¥ï¼Œå®šä¹‰ä¸€ä¸ªè¾…åŠ©å‡½æ•°<code>k</code>ï¼Œå°†<code>slice</code>è½¬ä¸º<code>map</code>å¯¹åº”çš„<code>string</code>ç±»å‹çš„<code>key</code>ï¼Œç¡®ä¿åªæœ‰<code>x</code>å’Œ<code>y</code>ç›¸ç­‰æ—¶<code>k(x) == k(y)</code>æ‰æˆç«‹ã€‚ç„¶ååˆ›å»ºä¸€ä¸ª<code>key</code>ä¸º<code>string</code>ç±»å‹çš„<code>map</code>ï¼Œåœ¨æ¯æ¬¡å¯¹<code>map</code>æ“ä½œæ—¶å…ˆç”¨<code>k</code>è¾…åŠ©å‡½æ•°å°†<code>slice</code>è½¬åŒ–ä¸º<code>string</code>ç±»å‹ã€‚</p><p><code>map</code>çš„<code>value</code>ç±»å‹ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªèšåˆç±»å‹ï¼Œæ¯”å¦‚æ˜¯ä¸€ä¸ª<code>map</code>æˆ–<code>slice</code>ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// -------------------------------------------</span></span><br><span class="line"><span class="comment">// Created By : Onns onns@onns.xyz</span></span><br><span class="line"><span class="comment">// File Name : 4.4.go</span></span><br><span class="line"><span class="comment">// Purpose :</span></span><br><span class="line"><span class="comment">// Creation Date : 2021-04-19 10:59:57</span></span><br><span class="line"><span class="comment">// Last Modified : 2021-04-19 11:05:49</span></span><br><span class="line"><span class="comment">// -------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> graph = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">bool</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">addEdge</span><span class="params">(from <span class="keyword">string</span>, to <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">edges := graph[from]</span><br><span class="line"><span class="keyword">if</span> edges == <span class="literal">nil</span> &#123;</span><br><span class="line">edges = <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">bool</span>)</span><br><span class="line">graph[from] = edges</span><br><span class="line">&#125;</span><br><span class="line">edges[to] = <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">hasEdge</span><span class="params">(from, to <span class="keyword">string</span>)</span> <span class="title">bool</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> graph[from][to]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">addEdge(<span class="string">"a"</span>, <span class="string">"b"</span>)</span><br><span class="line">fmt.Println(<span class="string">"a -&gt; b"</span>)</span><br><span class="line">addEdge(<span class="string">"c"</span>, <span class="string">"d"</span>)</span><br><span class="line">fmt.Println(<span class="string">"c -&gt; d"</span>)</span><br><span class="line">addEdge(<span class="string">"a"</span>, <span class="string">"d"</span>)</span><br><span class="line">fmt.Println(<span class="string">"a -&gt; d"</span>)</span><br><span class="line">addEdge(<span class="string">"d"</span>, <span class="string">"a"</span>)</span><br><span class="line">fmt.Println(<span class="string">"d -&gt; a"</span>)</span><br><span class="line">fmt.Println(<span class="string">"a b "</span>, hasEdge(<span class="string">"a"</span>, <span class="string">"b"</span>))</span><br><span class="line">fmt.Println(<span class="string">"c d "</span>, hasEdge(<span class="string">"c"</span>, <span class="string">"d"</span>))</span><br><span class="line">fmt.Println(<span class="string">"a d "</span>, hasEdge(<span class="string">"a"</span>, <span class="string">"d"</span>))</span><br><span class="line">fmt.Println(<span class="string">"d a "</span>, hasEdge(<span class="string">"d"</span>, <span class="string">"a"</span>))</span><br><span class="line">fmt.Println(<span class="string">"x b "</span>, hasEdge(<span class="string">"x"</span>, <span class="string">"b"</span>))</span><br><span class="line">fmt.Println(<span class="string">"c d "</span>, hasEdge(<span class="string">"c"</span>, <span class="string">"d"</span>))</span><br><span class="line">fmt.Println(<span class="string">"x d "</span>, hasEdge(<span class="string">"x"</span>, <span class="string">"d"</span>))</span><br><span class="line">fmt.Println(<span class="string">"d x "</span>, hasEdge(<span class="string">"d"</span>, <span class="string">"x"</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[11:05:51] onns@Onns ~/Documents/code/go/go-bible/ch4 $ go run 4.4.go</span><br><span class="line">a -&gt; b</span><br><span class="line">c -&gt; d</span><br><span class="line">a -&gt; d</span><br><span class="line">d -&gt; a</span><br><span class="line">a b  <span class="literal">true</span></span><br><span class="line">c d  <span class="literal">true</span></span><br><span class="line">a d  <span class="literal">true</span></span><br><span class="line">d a  <span class="literal">true</span></span><br><span class="line">x b  <span class="literal">false</span></span><br><span class="line">c d  <span class="literal">true</span></span><br><span class="line">x d  <span class="literal">false</span></span><br><span class="line">d x  <span class="literal">false</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> macos </tag>
            
            <tag> golang </tag>
            
            <tag> go </tag>
            
            <tag> golang note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŠGoè¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹ç¬”è®°ï¼ˆ9ï¼‰</title>
      <link href="/blog/2021/04/16/the-go-programming-language-note-9/"/>
      <url>/blog/2021/04/16/the-go-programming-language-note-9/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šgo-è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹"><a class="header-anchor" href="#ã€Šgo-è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹">#</a>ã€ŠGo è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹</h1><a id="more"></a><h1 id="å¤åˆæ•°æ®ç±»å‹"><a class="header-anchor" href="#å¤åˆæ•°æ®ç±»å‹">#</a>å¤åˆæ•°æ®ç±»å‹</h1><h2 id="slice"><a class="header-anchor" href="#slice">#</a>slice</h2><p><code>slice</code>ä»£è¡¨å˜é•¿çš„åºåˆ—ï¼Œåºåˆ—ä¸­æ¯ä¸ªå…ƒç´ éƒ½æœ‰ç›¸åŒçš„ç±»å‹ã€‚</p><p><code>slice</code>çš„åº•å±‚ç¡®å®å¼•ç”¨ä¸€ä¸ªæ•°ç»„å¯¹è±¡ã€‚</p><p>ä¸€ä¸ª<code>slice</code>ç”±ä¸‰ä¸ªéƒ¨åˆ†æ„æˆï¼šæŒ‡é’ˆã€é•¿åº¦å’Œå®¹é‡ã€‚æŒ‡é’ˆæŒ‡å‘ç¬¬ä¸€ä¸ª<code>slice</code>å…ƒç´ å¯¹åº”çš„åº•å±‚æ•°ç»„å…ƒç´ çš„åœ°å€<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>ï¼Œé•¿åº¦å¯¹åº”<code>slice</code>ä¸­å…ƒç´ çš„æ•°ç›®ï¼Œé•¿åº¦ä¸èƒ½è¶…è¿‡å®¹é‡ï¼Œå®¹é‡ä¸€èˆ¬æ˜¯ä»<code>slice</code>çš„å¼€å§‹ä½ç½®åˆ°åº•å±‚æ•°æ®çš„ç»“å°¾ä½ç½®ï¼Œå†…ç½®çš„<code>len</code>å’Œ<code>cap</code>å‡½æ•°åˆ†åˆ«è¿”å›<code>slice</code>çš„é•¿åº¦å’Œå®¹é‡ã€‚</p><p>å¤šä¸ª<code>slice</code>ä¹‹é—´å¯ä»¥å…±äº«åº•å±‚çš„æ•°æ®ï¼Œå¹¶ä¸”å¼•ç”¨çš„æ•°ç»„éƒ¨åˆ†åŒºé—´å¯èƒ½é‡å ã€‚</p><p>å¦‚æœåˆ‡ç‰‡æ“ä½œè¶…å‡º<code>cap(s)</code>çš„ä¸Šé™å°†å¯¼è‡´ä¸€ä¸ª<code>panic</code>å¼‚å¸¸ï¼Œä½†æ˜¯è¶…å‡º<code>len(s)</code>åˆ™æ˜¯æ„å‘³ç€æ‰©å±•äº†<code>slice</code>ï¼Œå› ä¸ºæ–°<code>slice</code>çš„é•¿åº¦ä¼šå˜å¤§ã€‚</p><p>å› ä¸º<code>slice</code>å€¼åŒ…å«æŒ‡å‘ç¬¬ä¸€ä¸ª<code>slice</code>å…ƒç´ çš„æŒ‡é’ˆï¼Œå› æ­¤å‘å‡½æ•°ä¼ é€’<code>slice</code>å°†å…è®¸åœ¨å‡½æ•°å†…éƒ¨ä¿®æ”¹åº•å±‚æ•°ç»„çš„å…ƒç´ ã€‚å¤åˆ¶ä¸€ä¸ª<code>slice</code>åªæ˜¯å¯¹åº•å±‚çš„æ•°ç»„åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„<code>slice</code>åˆ«åã€‚</p><p><code>slice</code>ä¹‹é—´ä¸èƒ½æ¯”è¾ƒï¼Œä¸èƒ½ä½¿ç”¨<code>==</code>æ“ä½œç¬¦æ¥åˆ¤æ–­ä¸¤ä¸ª<code>slice</code>æ˜¯å¦å«æœ‰å…¨éƒ¨ç›¸ç­‰å…ƒç´ ã€‚</p><p>ä¸€ä¸ª<code>slice</code>çš„å…ƒç´ æ˜¯é—´æ¥å¼•ç”¨çš„ï¼Œä¸€ä¸ª<code>slice</code>ç”šè‡³å¯ä»¥åŒ…å«è‡ªèº«ã€‚ä¸€ä¸ªå›ºå®šçš„<code>slice</code>å€¼åœ¨ä¸åŒçš„æ—¶åˆ»å¯èƒ½åŒ…å«ä¸åŒçš„å…ƒç´ ï¼Œå› ä¸ºåº•å±‚æ•°ç»„çš„å…ƒç´ å¯èƒ½ä¼šè¢«ä¿®æ”¹ã€‚</p><p><code>slice</code>å”¯ä¸€åˆæ³•çš„æ¯”è¾ƒæ“ä½œæ˜¯å’Œ<code>nil</code>æ¯”è¾ƒï¼Œä¸€ä¸ªé›¶å€¼çš„<code>slice</code>ç­‰äº<code>nil</code>ã€‚ä¸€ä¸ª<code>nil</code>å€¼çš„<code>slice</code>å¹¶æ²¡æœ‰åº•å±‚æ•°ç»„ã€‚ä¸€ä¸ª<code>nil</code>å€¼çš„<code>slice</code>çš„é•¿åº¦å’Œå®¹é‡éƒ½æ˜¯<code>0</code>ï¼Œä½†æ˜¯ä¹Ÿæœ‰<code>énil</code>å€¼çš„<code>slice</code>çš„é•¿åº¦å’Œå®¹é‡ä¹Ÿæ˜¯<code>0</code>çš„ã€‚</p><p><code>len(s) == 0</code>ç”¨æ¥æµ‹è¯•ä¸€ä¸ª<code>slice</code>æ˜¯å¦ä¸ºç©ºã€‚</p><p>é™¤äº†æ–‡æ¡£å·²ç»æ˜ç¡®è¯´æ˜çš„åœ°æ–¹ï¼Œæ‰€æœ‰çš„<code>Go</code>è¯­è¨€å‡½æ•°åº”è¯¥ä»¥ç›¸åŒçš„æ–¹å¼å¯¹å¾…<code>nil</code>å€¼çš„<code>slice</code>å’Œ<code>0</code>é•¿åº¦çš„<code>slice</code>ã€‚<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// -------------------------------------------</span></span><br><span class="line"><span class="comment">// Created By : Onns onns@onns.xyz</span></span><br><span class="line"><span class="comment">// File Name : 4.2.go</span></span><br><span class="line"><span class="comment">// Purpose :</span></span><br><span class="line"><span class="comment">// Creation Date : 2021-04-16 13:39:25</span></span><br><span class="line"><span class="comment">// Last Modified : 2021-04-16 13:45:08</span></span><br><span class="line"><span class="comment">// -------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> s []<span class="keyword">int</span></span><br><span class="line">fmt.Printf(<span class="string">"%d %t\n"</span>, <span class="built_in">len</span>(s), s == <span class="literal">nil</span>)</span><br><span class="line">s = <span class="literal">nil</span></span><br><span class="line">fmt.Printf(<span class="string">"%d %t\n"</span>, <span class="built_in">len</span>(s), s == <span class="literal">nil</span>)</span><br><span class="line">s = []<span class="keyword">int</span>(<span class="literal">nil</span>)</span><br><span class="line">fmt.Printf(<span class="string">"%d %t\n"</span>, <span class="built_in">len</span>(s), s == <span class="literal">nil</span>)</span><br><span class="line">s = []<span class="keyword">int</span>&#123;&#125;</span><br><span class="line">fmt.Printf(<span class="string">"%d %t\n"</span>, <span class="built_in">len</span>(s), s == <span class="literal">nil</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ go run 4.2.go</span><br><span class="line">0 <span class="literal">true</span></span><br><span class="line">0 <span class="literal">true</span></span><br><span class="line">0 <span class="literal">true</span></span><br><span class="line">0 <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>å†…ç½®çš„<code>make</code>å‡½æ•°åˆ›å»ºä¸€ä¸ªæŒ‡å®šå…ƒç´ ç±»å‹ã€é•¿åº¦å’Œå®¹é‡çš„<code>slice</code>ï¼Œå®¹é‡éƒ¨åˆ†å¯ä»¥çœç•¥ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®¹é‡å°†ç­‰äºé•¿åº¦ã€‚</p><p>åœ¨åº•å±‚ï¼Œ<code>make</code>åˆ›å»ºäº†ä¸€ä¸ªåŒ¿åçš„æ•°ç»„å˜é‡ï¼Œç„¶åè¿”å›ä¸€ä¸ª<code>slice</code>ã€‚åªæœ‰é€šè¿‡è¿”å›çš„<code>slice</code>æ‰èƒ½å¼•ç”¨åº•å±‚åŒ¿åçš„æ•°ç»„å˜é‡ã€‚</p><p>å†…ç½®çš„<code>append</code>å‡½æ•°ç”¨äºå‘<code>slice</code>è¿½åŠ å…ƒç´ ã€‚</p><p>è¦æ­£ç¡®åœ°ä½¿ç”¨<code>slice</code>ï¼Œéœ€è¦è®°ä½å°½ç®¡åº•å±‚æ•°ç»„çš„å…ƒç´ æ˜¯é—´æ¥è®¿é—®çš„ï¼Œä½†æ˜¯<code>slice</code>å¯¹åº”ç»“æ„ä½“æœ¬èº«çš„æŒ‡é’ˆã€é•¿åº¦å’Œå®¹é‡éƒ¨åˆ†æ˜¯ç›´æ¥è®¿é—®çš„ã€‚</p><p><code>copy</code>å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦å¤åˆ¶çš„ç›®æ ‡<code>slice</code>ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æº<code>slice</code>ï¼Œç›®æ ‡å’Œæºçš„ä½ç½®é¡ºåºå’Œ<code>dst = src</code>èµ‹å€¼è¯­å¥æ˜¯ä¸€è‡´çš„ã€‚<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup></p><p>134/483</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><code>slice</code>çš„ç¬¬ä¸€ä¸ªå…ƒç´ å¹¶ä¸ä¸€å®šå°±æ˜¯æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚ <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li><li id="fn2" class="footnote-item"><p>è¿™å¥è¯å®Œå…¨æ²¡ç†è§£ï¼Œè¿™æ˜¯å¹²å•¥çš„ï¼Ÿ <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p></li><li id="fn3" class="footnote-item"><p>å’Œå…¶å®ƒè¯­è¨€çš„<code>copy(from,to)</code>ä¸å¤ªä¸€æ ·ã€‚ <a href="#fnref3" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> macos </tag>
            
            <tag> golang </tag>
            
            <tag> go </tag>
            
            <tag> golang note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŠGoè¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹ç¬”è®°ï¼ˆ8ï¼‰</title>
      <link href="/blog/2021/04/15/the-go-programming-language-note-8/"/>
      <url>/blog/2021/04/15/the-go-programming-language-note-8/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šgo-è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹"><a class="header-anchor" href="#ã€Šgo-è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹">#</a>ã€ŠGo è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹</h1><a id="more"></a><h1 id="å¤åˆæ•°æ®ç±»å‹"><a class="header-anchor" href="#å¤åˆæ•°æ®ç±»å‹">#</a>å¤åˆæ•°æ®ç±»å‹</h1><h2 id="æ•°ç»„"><a class="header-anchor" href="#æ•°ç»„">#</a>æ•°ç»„</h2><p>æ•°ç»„æ˜¯ä¸€ä¸ªç”±å›ºå®šé•¿åº¦çš„ç‰¹å®šç±»å‹å…ƒç´ ç»„æˆçš„åºåˆ—ï¼Œä¸€ä¸ªæ•°ç»„å¯ä»¥ç”±é›¶ä¸ªæˆ–å¤šä¸ªå…ƒç´ ç»„æˆã€‚</p><p>å› ä¸ºæ•°ç»„çš„é•¿åº¦æ˜¯å›ºå®šçš„ï¼Œå› æ­¤åœ¨<code>Go</code>è¯­è¨€ä¸­å¾ˆå°‘ç›´æ¥ä½¿ç”¨æ•°ç»„ã€‚</p><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œæ•°ç»„çš„æ¯ä¸ªå…ƒç´ éƒ½è¢«åˆå§‹åŒ–ä¸ºå…ƒç´ ç±»å‹å¯¹åº”çš„é›¶å€¼ï¼Œå¯¹äºæ•°å­—ç±»å‹æ¥è¯´å°±æ˜¯<code>0</code>ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ•°ç»„å­—é¢å€¼è¯­æ³•ç”¨ä¸€ç»„å€¼æ¥åˆå§‹åŒ–æ•°ç»„ã€‚</p><p>åœ¨æ•°ç»„å­—é¢å€¼ä¸­ï¼Œå¦‚æœåœ¨æ•°ç»„çš„é•¿åº¦ä½ç½®å‡ºç°çš„æ˜¯<code>...</code>çœç•¥å·ï¼Œåˆ™è¡¨ç¤ºæ•°ç»„çš„é•¿åº¦æ˜¯æ ¹æ®åˆå§‹åŒ–å€¼çš„ä¸ªæ•°æ¥è®¡ç®—ã€‚</p><p>æ•°ç»„çš„é•¿åº¦æ˜¯æ•°ç»„ç±»å‹çš„ä¸€ä¸ªç»„æˆéƒ¨åˆ†ï¼Œå› æ­¤<code>[3]int</code>å’Œ<code>[4]int</code>æ˜¯ä¸¤ç§ä¸åŒçš„æ•°ç»„ç±»å‹ã€‚</p><p>æ•°ç»„çš„é•¿åº¦å¿…é¡»æ˜¯<strong>å¸¸é‡è¡¨è¾¾å¼</strong>ï¼Œå› ä¸ºæ•°ç»„çš„é•¿åº¦éœ€è¦åœ¨ç¼–è¯‘é˜¶æ®µç¡®å®šã€‚</p><p>åœ¨è¿™ç§å½¢å¼çš„æ•°ç»„å­—é¢å€¼å½¢å¼ä¸­ï¼Œåˆå§‹åŒ–ç´¢å¼•çš„é¡ºåºæ˜¯æ— å…³ç´§è¦çš„ï¼Œæ²¡ç”¨åˆ°çš„ç´¢å¼•å¯ä»¥çœç•¥ï¼ŒæœªæŒ‡å®šåˆå§‹å€¼çš„å…ƒç´ å°†ç”¨é›¶å€¼åˆå§‹åŒ–ã€‚</p><p>å¦‚æœä¸€ä¸ªæ•°ç»„çš„å…ƒç´ ç±»å‹æ˜¯å¯ä»¥ç›¸äº’æ¯”è¾ƒçš„ï¼Œé‚£ä¹ˆæ•°ç»„ç±»å‹ä¹Ÿæ˜¯å¯ä»¥ç›¸äº’æ¯”è¾ƒçš„ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// -------------------------------------------</span></span><br><span class="line"><span class="comment">// Created By : Onns onns@onns.xyz</span></span><br><span class="line"><span class="comment">// File Name : 4.1.go</span></span><br><span class="line"><span class="comment">// Purpose :</span></span><br><span class="line"><span class="comment">// Creation Date : 2021-04-15 13:31:53</span></span><br><span class="line"><span class="comment">// Last Modified : 2021-04-15 14:24:53</span></span><br><span class="line"><span class="comment">// -------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> q [<span class="number">3</span>]<span class="keyword">int</span> = [<span class="number">3</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line"><span class="keyword">for</span> i, v := <span class="keyword">range</span> q &#123;</span><br><span class="line">fmt.Printf(<span class="string">"%d %d\n"</span>, i, v)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> r [<span class="number">3</span>]<span class="keyword">int</span> = [<span class="number">3</span>]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>&#125;</span><br><span class="line"><span class="keyword">for</span> i, v := <span class="keyword">range</span> r &#123;</span><br><span class="line">fmt.Printf(<span class="string">"%d %d\n"</span>, i, v)</span><br><span class="line">&#125;</span><br><span class="line">s := [...]<span class="keyword">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">fmt.Printf(<span class="string">"%T\n"</span>, s)</span><br><span class="line">t := [...]<span class="keyword">int</span>&#123;<span class="number">99</span>: <span class="number">-1</span>&#125;</span><br><span class="line">fmt.Printf(<span class="string">"%T %d\n"</span>, t, t[<span class="number">99</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Currency <span class="keyword">int</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">USD Currency = <span class="literal">iota</span></span><br><span class="line">EUR</span><br><span class="line">GBP</span><br><span class="line">RMB</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">symbol := [...]<span class="keyword">string</span>&#123;USD: <span class="string">"$"</span>, EUR: <span class="string">"â‚¬"</span>, GBP: <span class="string">"Â£"</span>, RMB: <span class="string">"Â¥"</span>&#125;</span><br><span class="line">fmt.Println(RMB, symbol[RMB])</span><br><span class="line"><span class="comment">// åœ¨è¿™ç§å½¢å¼çš„æ•°ç»„å­—é¢å€¼å½¢å¼ä¸­ï¼Œåˆå§‹åŒ–ç´¢å¼•çš„é¡ºåºæ˜¯æ— å…³ç´§è¦çš„ï¼Œæ²¡ç”¨åˆ°çš„ç´¢å¼•å¯ä»¥çœç•¥ï¼ŒæœªæŒ‡å®šåˆå§‹å€¼çš„å…ƒç´ å°†ç”¨é›¶å€¼åˆå§‹åŒ–ã€‚</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ go run 4.1.go</span><br><span class="line">0 1</span><br><span class="line">1 2</span><br><span class="line">2 3</span><br><span class="line">0 1</span><br><span class="line">1 2</span><br><span class="line">2 0</span><br><span class="line">[3]int</span><br><span class="line">[100]int -1</span><br><span class="line">3 Â¥</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> macos </tag>
            
            <tag> golang </tag>
            
            <tag> go </tag>
            
            <tag> golang note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vimæ–‡ä»¶å¤´éƒ¨æ¨¡æ¿</title>
      <link href="/blog/2021/04/14/vim-header-template/"/>
      <url>/blog/2021/04/14/vim-header-template/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a class="header-anchor" href="#å‰è¨€">#</a>å‰è¨€</h2><p>åœ¨çœ‹ä¹¦çš„æ—¶å€™ï¼Œä¼šå†™ä¸€äº›ä¾‹å­çš„ä»£ç ï¼Œç„¶åé…ä¸Šè¿è¡Œç»“æœï¼Œä¸è¿‡<code>markdown</code>æ ¼å¼çš„<code>code</code>å—æ²¡æœ‰æ–‡ä»¶åä»€ä¹ˆçš„ï¼Œä¸å¥½å’Œå‘½ä»¤è¡Œç»“æœå¯¹åº”ï¼Œæ¯ä¸ªéƒ½æ‰‹åŠ¨åŠ ä¸ä¼˜é›…ï¼Œäºæ˜¯æ‰¾äº†ä¸€äº›<code>vim</code>çš„æ–‡æ¡£ï¼Œé…ç½®äº†ä¸€ä¸‹ï¼Œè®°å½•å¦‚ä¸‹ã€‚</p><a id="more"></a><h2 id="å¤´æ–‡ä»¶æ¨¡æ¿"><a class="header-anchor" href="#å¤´æ–‡ä»¶æ¨¡æ¿">#</a>å¤´æ–‡ä»¶æ¨¡æ¿</h2><p>ä»¥<code>go</code>è¯­è¨€çš„ä¸ºä¾‹ï¼Œæˆ‘è‡ªå·±çš„æ¨¡æ¿å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; -------------------------------------------</span><br><span class="line">&#x2F;&#x2F; Created By : Onns onns@onns.xyz</span><br><span class="line">&#x2F;&#x2F; File Name :</span><br><span class="line">&#x2F;&#x2F; Purpose :</span><br><span class="line">&#x2F;&#x2F; Creation Date :</span><br><span class="line">&#x2F;&#x2F; Last Modified :</span><br><span class="line">&#x2F;&#x2F; -------------------------------------------</span><br></pre></td></tr></table></figure><p>ä¿å­˜ä¸º<code>/Users/onns/Documents/code/config/vim/header_template</code>ã€‚</p><h2 id="vimrc"><a class="header-anchor" href="#vimrc">#</a>~/.vimrc</h2><p>å°±åƒ<code>bash</code>è¿è¡Œæ—¶ä¼šåŠ è½½<code>~/.bashrc</code>æ–‡ä»¶ä¸€æ ·ï¼Œ<code>vim</code>åœ¨è¿è¡Œçš„æ—¶å€™ä¼šåŠ è½½<code>~/.vimrc</code>æ–‡ä»¶ï¼Œæ²¡æœ‰çš„è¯ç›´æ¥åˆ›å»ºå³å¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ vi ~/.vimrc</span><br><span class="line">autocmd bufnewfile *.go 0r /Users/onns/Documents/code/config/vim/header_template</span><br><span class="line">autocmd bufnewfile *.go exe <span class="string">"1,"</span> . 7 . <span class="string">"g/File Name :.*/s//File Name : "</span> .expand(<span class="string">"%"</span>)</span><br><span class="line">autocmd bufnewfile *.go exe <span class="string">"1,"</span> . 7 . <span class="string">"g/Creation Date :.*/s//Creation Date : "</span> .strftime(<span class="string">"%Y-%m-%d %H:%M:%S"</span>)</span><br><span class="line">autocmd Bufwritepre,filewritepre *.go execute <span class="string">"normal ma"</span></span><br><span class="line">autocmd Bufwritepre,filewritepre *.go exe <span class="string">"1,"</span> . 7 . <span class="string">"g/Last Modified :.*/s/Last Modified :.*/Last Modified : "</span> .strftime(<span class="string">"%Y-%m-%d %H:%M:%S"</span>)</span><br><span class="line">autocmd bufwritepost,filewritepost *.go execute <span class="string">"normal `a"</span></span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€è¡Œå°±æ˜¯åŠ è½½æ¨¡æ¿æ–‡ä»¶çš„æ„æ€ï¼Œå¯¹<code>*.go</code>çš„æ–‡ä»¶éƒ½ä¼šåº”ç”¨è¿™ä¸ªè§„åˆ™ï¼Œ<code>0r</code>ä»£è¡¨ä»æ–°å»ºæ–‡ä»¶çš„ç¬¬ä¸€è¡Œå¼€å§‹è¯»å…¥ã€‚åŸæ•™ç¨‹é‡Œ<code>0r</code>çš„ä½ç½®æ˜¯<code>so</code>æˆ‘ä¹Ÿä¸çŸ¥é“ä»€ä¹ˆæ„æ€ï¼Œä¸€ç›´æŠ¥é”™ï¼Œæ‰¾äº†åˆ«çš„æ•™ç¨‹æ”¹æˆ<code>0r</code>æ‰è¿‡çš„ï¼Œæœ‰æœºä¼šå†çœ‹çœ‹è¿™ä¸ªåœ°æ–¹æ˜¯ä»€ä¹ˆæ„æ€å§ï¼<br>ç¬¬äºŒè¡Œå°±æ˜¯æŠŠæ¨¡æ¿é‡Œçš„æ–‡ä»¶åå¡«å…¥ã€‚<br>ç¬¬ä¸‰è¡Œå°±æ˜¯æŠŠæ¨¡æ¿çš„åˆ›å»ºæ—¶é—´å¡«å…¥ã€‚<br>ç¬¬å››è¡Œè®°å½•å½“å‰çš„å…‰æ ‡ä½ç½®ã€‚<br>ç¬¬äº”è¡Œä¿®æ”¹ä¿®æ”¹æ—¶é—´ã€‚<br>ç¬¬å…­è¡Œè¿˜åŸå…‰æ ‡ä½ç½®ã€‚</p><h2 id="æ•ˆæœ"><a class="header-anchor" href="#æ•ˆæœ">#</a>æ•ˆæœ</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// -------------------------------------------</span></span><br><span class="line"><span class="comment">// Created By : Onns onns@onns.xyz</span></span><br><span class="line"><span class="comment">// File Name : 3.10.go</span></span><br><span class="line"><span class="comment">// Purpose :</span></span><br><span class="line"><span class="comment">// Creation Date : 2021-04-14 15:40:40</span></span><br><span class="line"><span class="comment">// Last Modified : 2021-04-14 15:48:43</span></span><br><span class="line"><span class="comment">// -------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"strconv"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">x := <span class="number">123</span></span><br><span class="line">y := fmt.Sprintf(<span class="string">"%d"</span>, x)</span><br><span class="line">z := strconv.Itoa(x)</span><br><span class="line">fmt.Println(y, z)</span><br><span class="line"></span><br><span class="line">fmt.Println(strconv.FormatInt(<span class="keyword">int64</span>(x), <span class="number">2</span>))</span><br><span class="line"></span><br><span class="line">a, _ := strconv.Atoi(<span class="string">"123"</span>)</span><br><span class="line">fmt.Printf(<span class="string">"a type: %T\n"</span>, a)</span><br><span class="line">b, _ := strconv.ParseInt(<span class="string">"123"</span>, <span class="number">10</span>, <span class="number">64</span>)</span><br><span class="line">fmt.Printf(<span class="string">"b type: %T\n"</span>, b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‰å‰ååè¿˜æ˜¯èŠ±äº†ä¸€ä¸ªå¤šå°æ—¶çš„ï¼Œä½†æ˜¯è®°å½•ä¸‹æ¥ç¡®å®æ²¡å¤šå°‘ä¸œè¥¿ï¼Œè¿˜æœ‰å¦ä¸€ç§å‡½æ•°å¼çš„å†™æ³•æ„Ÿè§‰æ›´é€šç”¨ï¼Œæ¯•ç«Ÿè¿™ä¸ªå†™æ³•ï¼Œæ¢ä¸€ä¸ªåç¼€éƒ½è¦é‡æ–°å¼„= =ï¼Œæœ‰æœºä¼šå†æ¥è¡¥ã€‚å‚è€ƒé“¾æ¥åé¢å‡ ä¸ªå°±æ˜¯å‡½æ•°å¼çš„å†™æ³•ï¼Œå¯ä»¥å‚è€ƒä¸€ä¸‹ã€‚</p><h2 id="å‚è€ƒé“¾æ¥"><a class="header-anchor" href="#å‚è€ƒé“¾æ¥">#</a>å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://elias.rhi.hi.is/vim/cmdline.html" target="_blank" rel="noopener">Vim documentation: cmdline</a></li><li><a href="https://www.thegeekstuff.com/2008/12/vi-and-vim-autocommand-3-steps-to-add-custom-header-to-your-file/" target="_blank" rel="noopener">Vi and Vim Autocommand: 3 Steps to Add Custom Header To Your File Automatically</a></li><li><a href="https://stackoverflow.com/questions/13279520/automatically-inserting-a-header-in-vim" target="_blank" rel="noopener">Automatically inserting a header in vim</a></li><li><a href="https://vimawesome.com/plugin/vim-header-hard-things" target="_blank" rel="noopener">VIM-HEADER</a></li><li><a href="https://github.com/TJRoger/header.vim" target="_blank" rel="noopener">https://github.com/TJRoger/header.vim</a></li><li><a href="https://sauravomar01.medium.com/configure-custom-header-template-in-vim-editor-6d578e440da3" target="_blank" rel="noopener">Configure Custom Header Template in Vim editor:</a></li><li><a href="https://blog.csdn.net/qq_42103512/article/details/108587533" target="_blank" rel="noopener">shell è„šæœ¬æ‰¹é‡åœ¨æŒ‡å®šçš„åç¼€æ–‡ä»¶å¤´éƒ¨ä¸­æ’å…¥å†…å®¹</a></li><li><a href="https://www.cnblogs.com/betterquan/p/11747830.html" target="_blank" rel="noopener">è‡ªåŠ¨æ·»åŠ  shell è„šæœ¬å¤´éƒ¨ä¿¡æ¯</a></li><li><a href="https://blog.csdn.net/luzhenrong45/article/details/53021748/" target="_blank" rel="noopener">vim åˆ›å»ºç¨‹åºæ–‡ä»¶è‡ªåŠ¨æ·»åŠ å¤´éƒ¨æ³¨é‡Š</a></li><li><a href="https://www.cnblogs.com/black-mamba/p/9280316.html" target="_blank" rel="noopener">vim åˆ›å»ºæ–‡ä»¶è‡ªåŠ¨ç”Ÿæˆå¤´éƒ¨æ³¨é‡Š</a></li></ul><h2 id="todo"><a class="header-anchor" href="#todo">#</a>TODO</h2><ul><li><code>so</code>çš„æ„æ€ã€‚</li><li>é€šç”¨çš„å‡½æ•°å¼å†™æ³•ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> try </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> macos </tag>
            
            <tag> vim </tag>
            
            <tag> vi </tag>
            
            <tag> header template </tag>
            
            <tag> autocommand </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŠGoè¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹ç¬”è®°ï¼ˆ7ï¼‰</title>
      <link href="/blog/2021/04/14/the-go-programming-language-note-7/"/>
      <url>/blog/2021/04/14/the-go-programming-language-note-7/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šgo-è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹"><a class="header-anchor" href="#ã€Šgo-è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹">#</a>ã€ŠGo è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹</h1><a id="more"></a><h1 id="åŸºç¡€æ•°æ®ç±»å‹"><a class="header-anchor" href="#åŸºç¡€æ•°æ®ç±»å‹">#</a>åŸºç¡€æ•°æ®ç±»å‹</h1><h2 id="å¤æ•°"><a class="header-anchor" href="#å¤æ•°">#</a>å¤æ•°</h2><p><code>Go</code>è¯­è¨€æä¾›äº†ä¸¤ç§ç²¾åº¦çš„å¤æ•°ç±»å‹ï¼š<code>complex64</code>å’Œ<code>complex128</code>ï¼Œåˆ†åˆ«å¯¹åº”<code>float32</code>å’Œ<code>float64</code>ä¸¤ç§æµ®ç‚¹æ•°ç²¾åº¦ã€‚</p><p>å†…ç½®çš„<code>complex</code>å‡½æ•°ç”¨äºæ„å»ºå¤æ•°ï¼Œå†…å»ºçš„<code>real</code>å’Œ<code>imag</code>å‡½æ•°åˆ†åˆ«è¿”å›å¤æ•°çš„å®éƒ¨å’Œè™šéƒ¨ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"math/cmplx"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> x <span class="keyword">complex128</span> = <span class="built_in">complex</span>(<span class="number">1</span>, <span class="number">2</span>) <span class="comment">// ç­‰ä»·äºï¼š x := 1 + 2i</span></span><br><span class="line"><span class="keyword">var</span> y <span class="keyword">complex128</span> = <span class="built_in">complex</span>(<span class="number">3</span>, <span class="number">4</span>) <span class="comment">// ç­‰ä»·äºï¼š y := 3 + 4i</span></span><br><span class="line">fmt.Println(x * y)</span><br><span class="line">fmt.Println(<span class="built_in">real</span>(x * y))</span><br><span class="line">fmt.Println(<span class="built_in">imag</span>(x * y))</span><br><span class="line">fmt.Println(<span class="number">1i</span> * <span class="number">1i</span>)</span><br><span class="line">fmt.Println(cmplx.Sqrt(<span class="number">-1</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[12:26:47] onns@Onns ~/Documents/code/go/go-bible/ch3 $ go run 3.7.go</span><br><span class="line">(-5+10i)</span><br><span class="line">-5</span><br><span class="line">10</span><br><span class="line">(-1+0i)</span><br><span class="line">(0+1i)</span><br></pre></td></tr></table></figure><p>å¤æ•°ä¹Ÿå¯ä»¥ç”¨<code>==</code>å’Œ<code>!=</code>è¿›è¡Œç›¸ç­‰æ¯”è¾ƒï¼Œåªæœ‰ä¸¤ä¸ªå¤æ•°çš„å®éƒ¨å’Œè™šéƒ¨éƒ½ç›¸ç­‰çš„æ—¶å€™å®ƒä»¬æ‰æ˜¯ç›¸ç­‰çš„ã€‚<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p><p><code>math/cmplx</code>åŒ…æä¾›äº†å¤æ•°å¤„ç†çš„è®¸å¤šå‡½æ•°ï¼Œä¾‹å¦‚æ±‚å¤æ•°çš„å¹³æ–¹æ ¹å‡½æ•°å’Œæ±‚å¹‚å‡½æ•°ã€‚</p><h2 id="å¸ƒå°”å‹"><a class="header-anchor" href="#å¸ƒå°”å‹">#</a>å¸ƒå°”å‹</h2><p>å¸ƒå°”å€¼å¹¶ä¸ä¼šéšå¼è½¬æ¢ä¸ºæ•°å­—å€¼<code>0</code>æˆ–<code>1</code>ï¼Œå¿…é¡»ä½¿ç”¨ä¸€ä¸ªæ˜¾å¼çš„<code>if</code>è¯­å¥è¾…åŠ©è½¬æ¢ã€‚</p><h2 id="å­—ç¬¦ä¸²"><a class="header-anchor" href="#å­—ç¬¦ä¸²">#</a>å­—ç¬¦ä¸²</h2><p>ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªä¸å¯æ”¹å˜çš„å­—èŠ‚åºåˆ—ã€‚å­—ç¬¦ä¸²å¯ä»¥åŒ…å«ä»»æ„çš„æ•°æ®ï¼ŒåŒ…æ‹¬<code>byte</code>å€¼<code>0</code>ï¼Œä½†æ˜¯é€šå¸¸æ˜¯ç”¨æ¥åŒ…å«äººç±»å¯è¯»çš„æ–‡æœ¬ã€‚</p><p>æ–‡æœ¬å­—ç¬¦ä¸²é€šå¸¸è¢«è§£é‡Šä¸ºé‡‡ç”¨<code>UTF8</code>ç¼–ç çš„<code>Unicode</code>ç ç‚¹ï¼ˆ<code>rune</code>ï¼‰åºåˆ—ã€‚</p><p>å†…ç½®çš„<code>len</code>å‡½æ•°å¯ä»¥è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„å­—èŠ‚æ•°ç›®ï¼Œç´¢å¼•æ“ä½œ<code>s[i]</code>è¿”å›ç¬¬<code>i</code>ä¸ªå­—èŠ‚çš„å­—èŠ‚å€¼ã€‚</p><p>å­—ç¬¦ä¸²å¯ä»¥ç”¨<code>==</code>å’Œ<code>&lt;</code>è¿›è¡Œæ¯”è¾ƒï¼Œæ¯”è¾ƒé€šè¿‡é€ä¸ªå­—èŠ‚æ¯”è¾ƒå®Œæˆçš„ï¼Œå› æ­¤æ¯”è¾ƒçš„ç»“æœæ˜¯<strong>å­—ç¬¦ä¸²è‡ªç„¶ç¼–ç </strong>çš„é¡ºåºã€‚</p><p>ä¸å˜æ€§æ„å‘³å¦‚æœä¸¤ä¸ªå­—ç¬¦ä¸²å…±äº«ç›¸åŒçš„åº•å±‚æ•°æ®çš„è¯ä¹Ÿæ˜¯å®‰å…¨çš„ï¼Œè¿™ä½¿å¾—å¤åˆ¶ä»»ä½•é•¿åº¦çš„å­—ç¬¦ä¸²ä»£ä»·æ˜¯ä½å»‰çš„ã€‚ä¸€ä¸ªå­—ç¬¦ä¸²<code>s</code>å’Œå¯¹åº”çš„å­å­—ç¬¦ä¸²åˆ‡ç‰‡<code>s[7:]</code>çš„æ“ä½œä¹Ÿå¯ä»¥å®‰å…¨åœ°å…±äº«ç›¸åŒçš„å†…å­˜ï¼Œå› æ­¤å­—ç¬¦ä¸²åˆ‡ç‰‡æ“ä½œä»£ä»·ä¹Ÿæ˜¯ä½å»‰çš„ã€‚</p><p>ä¸€ä¸ªåŸç”Ÿçš„å­—ç¬¦ä¸²é¢å€¼å½¢å¼æ˜¯`â€¦`ï¼Œä½¿ç”¨åå¼•å·ä»£æ›¿åŒå¼•å·ã€‚</p><p><code>Unicode</code>ç ç‚¹å¯¹åº”<code>Go</code>è¯­è¨€ä¸­çš„<code>rune</code>æ•´æ•°ç±»å‹ï¼ˆ<code>rune</code>æ˜¯<code>int32</code>ç­‰ä»·ç±»å‹ï¼‰ã€‚</p><p><code>UTF8</code>ç¼–ç ä½¿ç”¨<code>1</code>åˆ°<code>4</code>ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºæ¯ä¸ª<code>Unicode</code>ç ç‚¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">0xxxxxxx</span><br><span class="line">110xxxxx 10xxxxxx</span><br><span class="line">1110xxxx 10xxxxxx 10xxxxxx</span><br><span class="line">11110xxx 10xxxxxx 10xxxxxx 10xxxxxx</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"unicode/utf8"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">s := <span class="string">"Hello, ä¸–ç•Œ"</span></span><br><span class="line">fmt.Println(<span class="built_in">len</span>(s))</span><br><span class="line">fmt.Println(utf8.RuneCountInString(s))</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; <span class="built_in">len</span>(s); &#123;</span><br><span class="line">r, size := utf8.DecodeRuneInString(s[i:])</span><br><span class="line">fmt.Printf(<span class="string">"%d\t%c\n"</span>, i, r)</span><br><span class="line">i += size</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> i, r := <span class="keyword">range</span> <span class="string">"Hello, ä¸–ç•Œ"</span> &#123;</span><br><span class="line">fmt.Printf(<span class="string">"%d\t%q\t%d\n"</span>, i, r, r)</span><br><span class="line">&#125;</span><br><span class="line">n := <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> _, _ = <span class="keyword">range</span> s &#123;</span><br><span class="line">n++</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(n)</span><br><span class="line">n = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> <span class="keyword">range</span> s &#123;</span><br><span class="line">n++</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(n)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">$ go run 3.8.go</span><br><span class="line">13</span><br><span class="line">9</span><br><span class="line">0H</span><br><span class="line">1e</span><br><span class="line">2l</span><br><span class="line">3l</span><br><span class="line">4o</span><br><span class="line">5,</span><br><span class="line">6</span><br><span class="line">7ä¸–</span><br><span class="line">10ç•Œ</span><br><span class="line">0<span class="string">'H'</span>72</span><br><span class="line">1<span class="string">'e'</span>101</span><br><span class="line">2<span class="string">'l'</span>108</span><br><span class="line">3<span class="string">'l'</span>108</span><br><span class="line">4<span class="string">'o'</span>111</span><br><span class="line">5<span class="string">','</span>44</span><br><span class="line">6<span class="string">' '</span>32</span><br><span class="line">7<span class="string">'ä¸–'</span>19990</span><br><span class="line">10<span class="string">'ç•Œ'</span>30028</span><br><span class="line">9</span><br><span class="line">9</span><br></pre></td></tr></table></figure><p><code>\uhhhh</code>å¯¹åº”<code>16bit</code>çš„ç ç‚¹å€¼ï¼Œ<code>\Uhhhhhhhh</code>å¯¹åº”<code>32bit</code>çš„ç ç‚¹å€¼ï¼Œå…¶ä¸­<code>h</code>æ˜¯ä¸€ä¸ªåå…­è¿›åˆ¶æ•°å­—ã€‚</p><p><code>Go</code>è¯­è¨€çš„<code>range</code>å¾ªç¯åœ¨å¤„ç†å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨éšå¼è§£ç <code>UTF8</code>å­—ç¬¦ä¸²ã€‚</p><p><code>UTF8</code>å­—ç¬¦è§£ç å¦‚æœé‡åˆ°ä¸€ä¸ªé”™è¯¯çš„<code>UTF8</code>ç¼–ç è¾“å…¥ï¼Œå°†ç”Ÿæˆä¸€ä¸ªç‰¹åˆ«çš„<code>Unicode</code>å­—ç¬¦<code>\uFFFD</code>ã€‚</p><p><code>UTF8</code>å­—ç¬¦ä¸²ä½œä¸ºäº¤æ¢æ ¼å¼æ˜¯éå¸¸æ–¹ä¾¿çš„ï¼Œä½†æ˜¯åœ¨ç¨‹åºå†…éƒ¨é‡‡ç”¨<code>rune</code>åºåˆ—å¯èƒ½æ›´æ–¹ä¾¿ï¼Œå› ä¸º<code>rune</code>å¤§å°ä¸€è‡´ï¼Œæ”¯æŒæ•°ç»„ç´¢å¼•å’Œæ–¹ä¾¿åˆ‡å‰²ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// -------------------------------------------</span></span><br><span class="line"><span class="comment">// Created By : Onns onns@onns.xyz</span></span><br><span class="line"><span class="comment">// File Name : 3.9.go</span></span><br><span class="line"><span class="comment">// Purpose :</span></span><br><span class="line"><span class="comment">// Creation Date : 2021-04-14 15:24:14</span></span><br><span class="line"><span class="comment">// Last Modified : 2021-04-14 15:24:18</span></span><br><span class="line"><span class="comment">// -------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">s := <span class="string">"ãƒ—ãƒ­ã‚°ãƒ©ãƒ "</span></span><br><span class="line">fmt.Printf(<span class="string">"% x\n"</span>, s)</span><br><span class="line">r := []<span class="keyword">rune</span>(s)</span><br><span class="line">fmt.Printf(<span class="string">"%x\n"</span>, r)</span><br><span class="line">fmt.Println(<span class="keyword">string</span>(r))</span><br><span class="line"></span><br><span class="line">s = <span class="string">"program ãƒ—ãƒ­ã‚°ãƒ©ãƒ "</span></span><br><span class="line">fmt.Printf(<span class="string">"% x\n"</span>, s)</span><br><span class="line">r = []<span class="keyword">rune</span>(s)</span><br><span class="line">fmt.Printf(<span class="string">"%x\n"</span>, r)</span><br><span class="line">fmt.Println(<span class="keyword">string</span>(r))</span><br><span class="line"></span><br><span class="line">fmt.Println(<span class="keyword">string</span>(<span class="number">65</span>))</span><br><span class="line">fmt.Println(<span class="keyword">string</span>(<span class="number">0x4eac</span>))</span><br><span class="line">fmt.Println(<span class="keyword">string</span>(<span class="number">1234567</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ go run 3.9.go</span><br><span class="line">e3 83 97 e3 83 ad e3 82 b0 e3 83 a9 e3 83 a0</span><br><span class="line">[30d7 30ed 30b0 30e9 30e0]</span><br><span class="line">ãƒ—ãƒ­ã‚°ãƒ©ãƒ </span><br><span class="line">70 72 6f 67 72 61 6d 20 e3 83 97 e3 83 ad e3 82 b0 e3 83 a9 e3 83 a0</span><br><span class="line">[70 72 6f 67 72 61 6d 20 30d7 30ed 30b0 30e9 30e0]</span><br><span class="line">program ãƒ—ãƒ­ã‚°ãƒ©ãƒ </span><br><span class="line">A</span><br><span class="line">äº¬</span><br><span class="line">ï¿½</span><br></pre></td></tr></table></figure><p><code>% x</code>å‚æ•°ç”¨äºåœ¨æ¯ä¸ªåå…­è¿›åˆ¶æ•°å­—å‰æ’å…¥ä¸€ä¸ªç©ºæ ¼ã€‚</p><p>å°†ä¸€ä¸ªæ•´æ•°è½¬å‹ä¸ºå­—ç¬¦ä¸²æ„æ€æ˜¯ç”Ÿæˆä»¥åªåŒ…å«å¯¹åº”<code>Unicode</code>ç ç‚¹å­—ç¬¦çš„<code>UTF8</code>å­—ç¬¦ä¸²ï¼Œå¦‚æœå¯¹åº”ç ç‚¹çš„å­—ç¬¦æ˜¯æ— æ•ˆçš„ï¼Œåˆ™ç”¨<code>\uFFFD</code>æ— æ•ˆå­—ç¬¦ä½œä¸ºæ›¿æ¢ã€‚</p><h3 id="å­—ç¬¦ä¸²å’Œæ•°å­—çš„è½¬æ¢"><a class="header-anchor" href="#å­—ç¬¦ä¸²å’Œæ•°å­—çš„è½¬æ¢">#</a>å­—ç¬¦ä¸²å’Œæ•°å­—çš„è½¬æ¢</h3><ol><li>ç”¨<code>fmt.Sprintf</code>è¿”å›ä¸€ä¸ªæ ¼å¼åŒ–çš„å­—ç¬¦ä¸²ã€‚</li><li>ç”¨<code>strconv.Itoa()</code>å°†æ•°å­—è½¬ä¸ºå­—ç¬¦ä¸²ã€‚</li></ol><p><code>fmt.Printf</code>å‡½æ•°çš„<code>%b</code>ã€<code>%d</code>ã€<code>%o</code>å’Œ<code>%x</code>ç­‰å‚æ•°æä¾›åŠŸèƒ½å¾€å¾€æ¯”<code>strconv</code>åŒ…çš„<code>Format</code>å‡½æ•°æ–¹ä¾¿å¾ˆå¤šï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦åŒ…å«é™„åŠ é¢å¤–ä¿¡æ¯çš„æ—¶å€™ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// -------------------------------------------</span></span><br><span class="line"><span class="comment">// Created By : Onns onns@onns.xyz</span></span><br><span class="line"><span class="comment">// File Name : 3.10.go</span></span><br><span class="line"><span class="comment">// Purpose :</span></span><br><span class="line"><span class="comment">// Creation Date : 2021-04-14 15:40:40</span></span><br><span class="line"><span class="comment">// Last Modified : 2021-04-14 15:48:43</span></span><br><span class="line"><span class="comment">// -------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"strconv"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">x := <span class="number">123</span></span><br><span class="line">y := fmt.Sprintf(<span class="string">"%d"</span>, x)</span><br><span class="line">z := strconv.Itoa(x)</span><br><span class="line">fmt.Println(y, z)</span><br><span class="line"></span><br><span class="line">fmt.Println(strconv.FormatInt(<span class="keyword">int64</span>(x), <span class="number">2</span>))</span><br><span class="line"></span><br><span class="line">a, _ := strconv.Atoi(<span class="string">"123"</span>)</span><br><span class="line">fmt.Printf(<span class="string">"a type: %T\n"</span>, a)</span><br><span class="line">b, _ := strconv.ParseInt(<span class="string">"123"</span>, <span class="number">10</span>, <span class="number">64</span>)</span><br><span class="line">fmt.Printf(<span class="string">"b type: %T\n"</span>, b)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ go run 3.10.go</span><br><span class="line">123 123</span><br><span class="line">1111011</span><br><span class="line">a <span class="built_in">type</span>: int</span><br><span class="line">b <span class="built_in">type</span>: int64</span><br></pre></td></tr></table></figure><p><code>ParseInt</code>å‡½æ•°çš„ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ç”¨äºæŒ‡å®šæ•´å‹æ•°çš„å¤§å°ï¼Œä¾‹å¦‚<code>16</code>è¡¨ç¤º<code>int16</code>ï¼Œ<code>0</code>åˆ™è¡¨ç¤º<code>int</code>ã€‚åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼Œè¿”å›çš„ç»“æœæ€»æ˜¯<code>int64</code>ç±»å‹ï¼Œå¯ä»¥é€šè¿‡å¼ºåˆ¶ç±»å‹è½¬æ¢å°†å®ƒè½¬ä¸ºæ›´å°çš„æ•´æ•°ç±»å‹ã€‚</p><h2 id="å¸¸é‡"><a class="header-anchor" href="#å¸¸é‡">#</a>å¸¸é‡</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> pi = <span class="number">3.14159</span></span><br><span class="line"><span class="comment">// å¯ä»¥æ‰¹é‡å£°æ˜å¤šä¸ªå¸¸é‡</span></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">e = <span class="number">2.71828182845904523536028747135266249775724709369995957496696763</span></span><br><span class="line">pi = <span class="number">3.14159265358979323846264338327950288419716939937510582097494459</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>æ‰€æœ‰å¸¸é‡çš„è¿ç®—éƒ½å¯ä»¥åœ¨ç¼–è¯‘æœŸå®Œæˆã€‚</p><p>å¦‚æœæ˜¯æ‰¹é‡å£°æ˜çš„å¸¸é‡ï¼Œé™¤äº†ç¬¬ä¸€ä¸ªå¤–å…¶å®ƒçš„å¸¸é‡å³è¾¹çš„åˆå§‹åŒ–è¡¨è¾¾å¼éƒ½å¯ä»¥çœç•¥ï¼Œå¦‚æœçœç•¥åˆå§‹åŒ–è¡¨è¾¾å¼åˆ™è¡¨ç¤ºä½¿ç”¨å‰é¢å¸¸é‡çš„åˆå§‹åŒ–è¡¨è¾¾å¼å†™æ³•ï¼Œå¯¹åº”çš„å¸¸é‡ç±»å‹ä¹Ÿä¸€æ ·çš„ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// -------------------------------------------</span></span><br><span class="line"><span class="comment">// Created By : Onns onns@onns.xyz</span></span><br><span class="line"><span class="comment">// File Name : 3.11.go</span></span><br><span class="line"><span class="comment">// Purpose :</span></span><br><span class="line"><span class="comment">// Creation Date : 2021-04-14 15:56:50</span></span><br><span class="line"><span class="comment">// Last Modified : 2021-04-14 15:57:37</span></span><br><span class="line"><span class="comment">// -------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">a = <span class="number">1</span></span><br><span class="line">b</span><br><span class="line">c = <span class="number">2</span></span><br><span class="line">d</span><br><span class="line">)</span><br><span class="line">fmt.Println(a, b, c, d)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ go run 3.11.go</span><br><span class="line">1 1 2 2</span><br></pre></td></tr></table></figure><p>å¸¸é‡å£°æ˜å¯ä»¥ä½¿ç”¨<code>iota</code>å¸¸é‡ç”Ÿæˆå™¨åˆå§‹åŒ–ï¼Œåœ¨ä¸€ä¸ª<code>const</code>å£°æ˜è¯­å¥ä¸­ï¼Œåœ¨ç¬¬ä¸€ä¸ªå£°æ˜çš„å¸¸é‡æ‰€åœ¨çš„è¡Œï¼Œ<code>iota</code>å°†ä¼šè¢«ç½®ä¸º<code>0</code>ï¼Œç„¶ååœ¨æ¯ä¸€ä¸ªæœ‰å¸¸é‡å£°æ˜çš„è¡ŒåŠ ä¸€ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// -------------------------------------------</span></span><br><span class="line"><span class="comment">// Created By : Onns onns@onns.xyz</span></span><br><span class="line"><span class="comment">// File Name : 3.12.go</span></span><br><span class="line"><span class="comment">// Purpose :</span></span><br><span class="line"><span class="comment">// Creation Date : 2021-04-14 16:00:53</span></span><br><span class="line"><span class="comment">// Last Modified : 2021-04-14 16:01:55</span></span><br><span class="line"><span class="comment">// -------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Weekday <span class="keyword">int</span></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">Sunday Weekday = <span class="literal">iota</span></span><br><span class="line">Monday</span><br><span class="line">Tuesday</span><br><span class="line">Wednesday</span><br><span class="line">Thursday</span><br><span class="line">Friday</span><br><span class="line">Saturday</span><br><span class="line">)</span><br><span class="line">fmt.Println(Sunday, Monday, Tuesday, Wednesday, Thursday, Friday, Saturday)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ go run 3.12.go</span><br><span class="line">0 1 2 3 4 5 6</span><br></pre></td></tr></table></figure><p>æœ‰å…­ç§æœªæ˜ç¡®ç±»å‹çš„å¸¸é‡ç±»å‹ï¼Œåˆ†åˆ«æ˜¯æ— ç±»å‹çš„å¸ƒå°”å‹ã€æ— ç±»å‹çš„æ•´æ•°ã€æ— ç±»å‹çš„å­—ç¬¦ã€æ— ç±»å‹çš„æµ®ç‚¹æ•°ã€æ— ç±»å‹çš„å¤æ•°ã€æ— ç±»å‹çš„å­—ç¬¦ä¸²ã€‚</p><p>ç¼–è¯‘å™¨ä¸ºè¿™äº›æ²¡æœ‰æ˜ç¡®çš„åŸºç¡€ç±»å‹çš„æ•°å­—å¸¸é‡æä¾›æ¯”åŸºç¡€ç±»å‹æ›´é«˜ç²¾åº¦çš„ç®—æœ¯è¿ç®—ï¼Œå¯ä»¥è®¤ä¸ºè‡³å°‘æœ‰<code>256bit</code>çš„è¿ç®—ç²¾åº¦ã€‚</p><p>é€šè¿‡å»¶è¿Ÿæ˜ç¡®å¸¸é‡çš„å…·ä½“ç±»å‹ï¼Œæ— ç±»å‹çš„å¸¸é‡ä¸ä»…å¯ä»¥æä¾›æ›´é«˜çš„è¿ç®—ç²¾åº¦ï¼Œè€Œä¸”å¯ä»¥ç›´æ¥ç”¨äºæ›´å¤šçš„è¡¨è¾¾å¼è€Œä¸éœ€è¦æ˜¾å¼çš„ç±»å‹è½¬æ¢ã€‚<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup></p><p>åªæœ‰å¸¸é‡å¯ä»¥æ˜¯æ— ç±»å‹çš„ã€‚</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>æµ®ç‚¹æ•°çš„ç›¸ç­‰æ¯”è¾ƒæ˜¯å±é™©çš„ï¼Œéœ€è¦ç‰¹åˆ«å°å¿ƒå¤„ç†ç²¾åº¦é—®é¢˜ã€‚ <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li><li id="fn2" class="footnote-item"><p>è¿™é‡Œæˆ‘æ˜¯æ‡µé€¼çš„ï¼Œæœ‰æœºä¼šå†çœ‹çœ‹ã€‚ <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> macos </tag>
            
            <tag> golang </tag>
            
            <tag> go </tag>
            
            <tag> golang note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šå¿«ä¹çš„Linuxå‘½ä»¤è¡Œã€‹ç¬”è®°ï¼ˆ21ï¼‰</title>
      <link href="/blog/2021/04/13/the-linux-command-line-note-21/"/>
      <url>/blog/2021/04/13/the-linux-command-line-note-21/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹"><a class="header-anchor" href="#ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹">#</a>ã€Šå¿«ä¹çš„ Linux å‘½ä»¤è¡Œã€‹</h1><a id="more"></a><h2 id="diff"><a class="header-anchor" href="#diff">#</a>diff</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line">$ diff --<span class="built_in">help</span></span><br><span class="line">Usage: diff [OPTION]... FILES</span><br><span class="line">Compare FILES line by line.</span><br><span class="line"></span><br><span class="line">Mandatory arguments to long options are mandatory <span class="keyword">for</span> short options too.</span><br><span class="line">      --normal                  output a normal diff (the default)</span><br><span class="line">  -q, --brief                   report only when files differ</span><br><span class="line">  -s, --report-identical-files  report when two files are the same</span><br><span class="line">  -c, -C NUM, --context[=NUM]   output NUM (default 3) lines of copied context</span><br><span class="line">  -u, -U NUM, --unified[=NUM]   output NUM (default 3) lines of unified context</span><br><span class="line">  -e, --ed                      output an ed script</span><br><span class="line">  -n, --rcs                     output an RCS format diff</span><br><span class="line">  -y, --side-by-side            output <span class="keyword">in</span> two columns</span><br><span class="line">  -W, --width=NUM               output at most NUM (default 130) <span class="built_in">print</span> columns</span><br><span class="line">      --left-column             output only the left column of common lines</span><br><span class="line">      --suppress-common-lines   <span class="keyword">do</span> not output common lines</span><br><span class="line"></span><br><span class="line">  -p, --show-c-function         show <span class="built_in">which</span> C <span class="keyword">function</span> each change is <span class="keyword">in</span></span><br><span class="line">  -F, --show-function-line=RE   show the most recent line matching RE</span><br><span class="line">      --label LABEL             use LABEL instead of file name and timestamp</span><br><span class="line">                                  (can be repeated)</span><br><span class="line"></span><br><span class="line">  -t, --expand-tabs             expand tabs to spaces <span class="keyword">in</span> output</span><br><span class="line">  -T, --initial-tab             make tabs line up by prepending a tab</span><br><span class="line">      --tabsize=NUM             tab stops every NUM (default 8) <span class="built_in">print</span> columns</span><br><span class="line">      --suppress-blank-empty    suppress space or tab before empty output lines</span><br><span class="line">  -l, --paginate                pass output through <span class="string">'pr'</span> to paginate it</span><br><span class="line"></span><br><span class="line">  -r, --recursive                 recursively compare any subdirectories found</span><br><span class="line">      --no-dereference            don<span class="string">'t follow symbolic links</span></span><br><span class="line"><span class="string">  -N, --new-file                  treat absent files as empty</span></span><br><span class="line"><span class="string">      --unidirectional-new-file   treat absent first files as empty</span></span><br><span class="line"><span class="string">      --ignore-file-name-case     ignore case when comparing file names</span></span><br><span class="line"><span class="string">      --no-ignore-file-name-case  consider case when comparing file names</span></span><br><span class="line"><span class="string">  -x, --exclude=PAT               exclude files that match PAT</span></span><br><span class="line"><span class="string">  -X, --exclude-from=FILE         exclude files that match any pattern in FILE</span></span><br><span class="line"><span class="string">  -S, --starting-file=FILE        start with FILE when comparing directories</span></span><br><span class="line"><span class="string">      --from-file=FILE1           compare FILE1 to all operands;</span></span><br><span class="line"><span class="string">                                    FILE1 can be a directory</span></span><br><span class="line"><span class="string">      --to-file=FILE2             compare all operands to FILE2;</span></span><br><span class="line"><span class="string">                                    FILE2 can be a directory</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  -i, --ignore-case               ignore case differences in file contents</span></span><br><span class="line"><span class="string">  -E, --ignore-tab-expansion      ignore changes due to tab expansion</span></span><br><span class="line"><span class="string">  -Z, --ignore-trailing-space     ignore white space at line end</span></span><br><span class="line"><span class="string">  -b, --ignore-space-change       ignore changes in the amount of white space</span></span><br><span class="line"><span class="string">  -w, --ignore-all-space          ignore all white space</span></span><br><span class="line"><span class="string">  -B, --ignore-blank-lines        ignore changes where lines are all blank</span></span><br><span class="line"><span class="string">  -I, --ignore-matching-lines=RE  ignore changes where all lines match RE</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  -a, --text                      treat all files as text</span></span><br><span class="line"><span class="string">      --strip-trailing-cr         strip trailing carriage return on input</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  -D, --ifdef=NAME                output merged file with '</span><span class="comment">#ifdef NAME' diffs</span></span><br><span class="line">      --GTYPE-group-format=GFMT   format GTYPE input groups with GFMT</span><br><span class="line">      --line-format=LFMT          format all input lines with LFMT</span><br><span class="line">      --LTYPE-line-format=LFMT    format LTYPE input lines with LFMT</span><br><span class="line">    These format options provide fine-grained control over the output</span><br><span class="line">      of diff, generalizing -D/--ifdef.</span><br><span class="line">    LTYPE is <span class="string">'old'</span>, <span class="string">'new'</span>, or <span class="string">'unchanged'</span>.  GTYPE is LTYPE or <span class="string">'changed'</span>.</span><br><span class="line">    GFMT (only) may contain:</span><br><span class="line">      %&lt;  lines from FILE1</span><br><span class="line">      %&gt;  lines from FILE2</span><br><span class="line">      %=  lines common to FILE1 and FILE2</span><br><span class="line">      %[-][WIDTH][.[PREC]]&#123;doxX&#125;LETTER  <span class="built_in">printf</span>-style spec <span class="keyword">for</span> LETTER</span><br><span class="line">        LETTERs are as follows <span class="keyword">for</span> new group, lower <span class="keyword">case</span> <span class="keyword">for</span> old group:</span><br><span class="line">          F  first line number</span><br><span class="line">          L  last line number</span><br><span class="line">          N  number of lines = L-F+1</span><br><span class="line">          E  F-1</span><br><span class="line">          M  L+1</span><br><span class="line">      %(A=B?T:E)  <span class="keyword">if</span> A equals B <span class="keyword">then</span> T <span class="keyword">else</span> E</span><br><span class="line">    LFMT (only) may contain:</span><br><span class="line">      %L  contents of line</span><br><span class="line">      %l  contents of line, excluding any trailing newline</span><br><span class="line">      %[-][WIDTH][.[PREC]]&#123;doxX&#125;n  <span class="built_in">printf</span>-style spec <span class="keyword">for</span> input line number</span><br><span class="line">    Both GFMT and LFMT may contain:</span><br><span class="line">      %%  %</span><br><span class="line">      %c<span class="string">'C'</span>  the single character C</span><br><span class="line">      %c<span class="string">'\OOO'</span>  the character with octal code OOO</span><br><span class="line">      C    the character C (other characters represent themselves)</span><br><span class="line"></span><br><span class="line">  -d, --minimal            try hard to find a smaller <span class="built_in">set</span> of changes</span><br><span class="line">      --horizon-lines=NUM  keep NUM lines of the common prefix and suffix</span><br><span class="line">      --speed-large-files  assume large files and many scattered small changes</span><br><span class="line">      --color[=WHEN]       colorize the output; WHEN can be <span class="string">'never'</span>, <span class="string">'always'</span>,</span><br><span class="line">                             or <span class="string">'auto'</span> (the default)</span><br><span class="line">      --palette=PALETTE    the colors to use when --color is active; PALETTE is</span><br><span class="line">                             a colon-separated list of terminfo capabilities</span><br><span class="line"></span><br><span class="line">      --<span class="built_in">help</span>               display this <span class="built_in">help</span> and <span class="built_in">exit</span></span><br><span class="line">  -v, --version            output version information and <span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line">FILES are <span class="string">'FILE1 FILE2'</span> or <span class="string">'DIR1 DIR2'</span> or <span class="string">'DIR FILE'</span> or <span class="string">'FILE DIR'</span>.</span><br><span class="line">If --from-file or --to-file is given, there are no restrictions on FILE(s).</span><br><span class="line">If a FILE is <span class="string">'-'</span>, <span class="built_in">read</span> standard input.</span><br><span class="line">Exit status is 0 <span class="keyword">if</span> inputs are the same, 1 <span class="keyword">if</span> different, 2 <span class="keyword">if</span> trouble.</span><br><span class="line"></span><br><span class="line">Report bugs to: bug-diffutils@gnu.org</span><br><span class="line">GNU diffutils home page: &lt;http://www.gnu.org/software/diffutils/&gt;</span><br><span class="line">General <span class="built_in">help</span> using GNU software: &lt;http://www.gnu.org/gethelp/&gt;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ diff file1.txt file2.txt</span><br><span class="line">1d0</span><br><span class="line">&lt; a</span><br><span class="line">4a4</span><br><span class="line">&gt; e</span><br></pre></td></tr></table></figure><p>åœ¨é»˜è®¤æ ¼å¼ä¸­ï¼Œæ¯ç»„çš„æ›´æ”¹ä¹‹å‰éƒ½æ˜¯ä¸€ä¸ªæ›´æ”¹å‘½ä»¤ï¼Œå…¶å½¢å¼ä¸º<code>range operation range</code>ï¼Œç”¨æ¥æè¿°è¦æ±‚æ›´æ”¹çš„ä½ç½®å’Œç±»å‹ï¼Œä»è€ŒæŠŠç¬¬ä¸€ä¸ªæ–‡ä»¶è½¬å˜ä¸ºç¬¬äºŒä¸ªæ–‡ä»¶ã€‚</p><table><thead><tr><th style="text-align:left">æ”¹å˜</th><th style="text-align:left">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:left"><code>[r1]a[r2]</code></td><td style="text-align:left">æŠŠç¬¬äºŒä¸ªæ–‡ä»¶ä¸­ä½ç½®<code>r2</code>å¤„çš„æ–‡ä»¶è¡Œæ·»åŠ åˆ°ç¬¬ä¸€ä¸ªæ–‡ä»¶ä¸­çš„<code>r1</code>å¤„</td></tr><tr><td style="text-align:left"><code>[r1]c[r2]</code></td><td style="text-align:left">ç”¨ç¬¬äºŒä¸ªæ–‡ä»¶ä¸­ä½ç½®<code>r2</code>å¤„çš„æ–‡æœ¬è¡Œæ›´æ”¹ï¼ˆæ›¿ä»£ï¼‰ä½ç½®<code>r1</code>å¤„çš„æ–‡æœ¬è¡Œ</td></tr><tr><td style="text-align:left"><code>[r1]d[r2]</code></td><td style="text-align:left">åˆ é™¤ç¬¬ä¸€ä¸ªæ–‡ä»¶ä¸­ä½ç½®<code>r1</code>å¤„çš„æ–‡æœ¬è¡Œï¼Œè¿™äº›æ–‡æœ¬è¡Œå°†ä¼šå‡ºç°åœ¨ç¬¬äºŒä¸ªæ–‡ä»¶ä¸­ä½ç½®<code>r2</code>å¤„</td></tr></tbody></table><p>ä¸Šä¸‹æ–‡æ¨¡å¼ï¼ˆ<code>-c</code>ï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ diff -c file1.txt file2.txt</span><br><span class="line">*** file1.txt2021-04-13 15:27:36.644626792 +0800</span><br><span class="line">--- file2.txt2021-04-12 15:34:30.758408526 +0800</span><br><span class="line">***************</span><br><span class="line">*** 1,4 ****</span><br><span class="line">- a</span><br><span class="line">  b</span><br><span class="line">  c</span><br><span class="line">  d</span><br><span class="line">--- 1,4 ----</span><br><span class="line">  b</span><br><span class="line">  c</span><br><span class="line">  d</span><br><span class="line">+ e</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªè¾“å‡ºç»“æœä»¥ä¸¤ä¸ªæ–‡ä»¶åå’Œå®ƒä»¬çš„æ—¶é—´æˆ³å¼€å¤´ã€‚ç¬¬ä¸€ä¸ªæ–‡ä»¶ç”¨æ˜Ÿå·åšæ ‡è®°ï¼Œç¬¬äºŒä¸ªæ–‡ä»¶ç”¨çŸ­æ¨ªçº¿åšæ ‡è®°ã€‚</p><p><code>*** 1,4 ****</code>è¡¨ç¤ºç¬¬ä¸€ä¸ªæ–‡ä»¶ä¸­ä»ç¬¬ä¸€è¡Œåˆ°ç¬¬å››è¡Œçš„æ–‡æœ¬è¡Œã€‚<br><code>--- 1,4 ----</code>è¡¨ç¤ºç¬¬äºŒä¸ªæ–‡ä»¶ä¸­ä»ç¬¬ä¸€è¡Œåˆ°ç¬¬å››è¡Œçš„æ–‡æœ¬è¡Œã€‚<br><code> </code>è¡¨ç¤º<strong>ä¸Šä¸‹æ–‡æ˜¾ç¤ºè¡Œ</strong>ã€‚å®ƒå¹¶ä¸è¡¨ç¤ºä¸¤ä¸ªæ–‡ä»¶ä¹‹é—´çš„å·®å¼‚ã€‚<br><code>-</code>è¡¨ç¤º<strong>åˆ é™¤è¡Œ</strong>ï¼Œè¿™ä¸€è¡Œå°†ä¼šå‡ºç°åœ¨ç¬¬ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚<br><code>+</code>è¡¨ç¤º<strong>æ·»åŠ è¡Œ</strong>ï¼Œè¿™ä¸€è¡Œå°†ä¼šå‡ºç°åœ¨ç¬¬äºŒä¸ªæ–‡ä»¶å†…ã€‚<br><code>!</code>è¡¨ç¤º<strong>æ›´æ”¹è¡Œ</strong>ï¼Œå°†ä¼šæ˜¾ç¤ºæŸä¸ªæ–‡æœ¬è¡Œçš„ä¸¤ä¸ªç‰ˆæœ¬ï¼Œæ¯ä¸ªç‰ˆæœ¬ä¼šå‡ºç°åœ¨æ›´æ”¹ç»„çš„å„è‡ªéƒ¨åˆ†ã€‚</p><p>ç»Ÿä¸€æ¨¡å¼ï¼ˆ<code>-u</code>ï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ diff -u file1.txt file2.txt</span><br><span class="line">--- file1.txt2021-04-13 15:27:36.644626792 +0800</span><br><span class="line">+++ file2.txt2021-04-12 15:34:30.758408526 +0800</span><br><span class="line">@@ -1,4 +1,4 @@</span><br><span class="line">-a</span><br><span class="line"> b</span><br><span class="line"> c</span><br><span class="line"> d</span><br><span class="line">+e</span><br></pre></td></tr></table></figure><h2 id="patch"><a class="header-anchor" href="#patch">#</a>patch</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">$ patch --<span class="built_in">help</span></span><br><span class="line">Usage: patch [OPTION]... [ORIGFILE [PATCHFILE]]</span><br><span class="line"></span><br><span class="line">Input options:</span><br><span class="line"></span><br><span class="line">  -p NUM  --strip=NUM  Strip NUM leading components from file names.</span><br><span class="line">  -F LINES  --fuzz LINES  Set the fuzz factor to LINES <span class="keyword">for</span> inexact matching.</span><br><span class="line">  -l  --ignore-whitespace  Ignore white space changes between patch and input.</span><br><span class="line"></span><br><span class="line">  -c  --context  Interpret the patch as a context difference.</span><br><span class="line">  -e  --ed  Interpret the patch as an ed script.</span><br><span class="line">  -n  --normal  Interpret the patch as a normal difference.</span><br><span class="line">  -u  --unified  Interpret the patch as a unified difference.</span><br><span class="line"></span><br><span class="line">  -N  --forward  Ignore patches that appear to be reversed or already applied.</span><br><span class="line">  -R  --reverse  Assume patches were created with old and new files swapped.</span><br><span class="line"></span><br><span class="line">  -i PATCHFILE  --input=PATCHFILE  Read patch from PATCHFILE instead of stdin.</span><br><span class="line"></span><br><span class="line">Output options:</span><br><span class="line"></span><br><span class="line">  -o FILE  --output=FILE  Output patched files to FILE.</span><br><span class="line">  -r FILE  --reject-file=FILE  Output rejects to FILE.</span><br><span class="line"></span><br><span class="line">  -D NAME  --ifdef=NAME  Make merged <span class="keyword">if</span>-then-else output using NAME.</span><br><span class="line">  --merge  Merge using conflict markers instead of creating reject files.</span><br><span class="line">  -E  --remove-empty-files  Remove output files that are empty after patching.</span><br><span class="line"></span><br><span class="line">  -Z  --<span class="built_in">set</span>-utc  Set <span class="built_in">times</span> of patched files, assuming diff uses UTC (GMT).</span><br><span class="line">  -T  --<span class="built_in">set</span>-time  Likewise, assuming <span class="built_in">local</span> time.</span><br><span class="line"></span><br><span class="line">  --quoting-style=WORD   output file names using quoting style WORD.</span><br><span class="line">    Valid WORDs are: literal, shell, shell-always, c, escape.</span><br><span class="line">    Default is taken from QUOTING_STYLE env variable, or <span class="string">'shell'</span> <span class="keyword">if</span> <span class="built_in">unset</span>.</span><br><span class="line"></span><br><span class="line">Backup and version control options:</span><br><span class="line"></span><br><span class="line">  -b  --backup  Back up the original contents of each file.</span><br><span class="line">  --backup-if-mismatch  Back up <span class="keyword">if</span> the patch does not match exactly.</span><br><span class="line">  --no-backup-if-mismatch  Back up mismatches only <span class="keyword">if</span> otherwise requested.</span><br><span class="line"></span><br><span class="line">  -V STYLE  --version-control=STYLE  Use STYLE version control.</span><br><span class="line">STYLE is either <span class="string">'simple'</span>, <span class="string">'numbered'</span>, or <span class="string">'existing'</span>.</span><br><span class="line">  -B PREFIX  --prefix=PREFIX  Prepend PREFIX to backup file names.</span><br><span class="line">  -Y PREFIX  --basename-prefix=PREFIX  Prepend PREFIX to backup file basenames.</span><br><span class="line">  -z SUFFIX  --suffix=SUFFIX  Append SUFFIX to backup file names.</span><br><span class="line"></span><br><span class="line">  -g NUM  --get=NUM  Get files from RCS etc. <span class="keyword">if</span> positive; ask <span class="keyword">if</span> negative.</span><br><span class="line"></span><br><span class="line">Miscellaneous options:</span><br><span class="line"></span><br><span class="line">  -t  --batch  Ask no questions; skip bad-Prereq patches; assume reversed.</span><br><span class="line">  -f  --force  Like -t, but ignore bad-Prereq patches, and assume unreversed.</span><br><span class="line">  -s  --quiet  --silent  Work silently unless an error occurs.</span><br><span class="line">  --verbose  Output extra information about the work being <span class="keyword">done</span>.</span><br><span class="line">  --dry-run  Do not actually change any files; just <span class="built_in">print</span> what would happen.</span><br><span class="line">  --posix  Conform to the POSIX standard.</span><br><span class="line"></span><br><span class="line">  -d DIR  --directory=DIR  Change the working directory to DIR first.</span><br><span class="line">  --reject-format=FORMAT  Create <span class="string">'context'</span> or <span class="string">'unified'</span> rejects.</span><br><span class="line">  --binary  Read and write data <span class="keyword">in</span> binary mode.</span><br><span class="line">  --<span class="built_in">read</span>-only=BEHAVIOR  How to handle <span class="built_in">read</span>-only input files: <span class="string">'ignore'</span> that they</span><br><span class="line">                        are <span class="built_in">read</span>-only, <span class="string">'warn'</span> (default), or <span class="string">'fail'</span>.</span><br><span class="line"></span><br><span class="line">  -v  --version  Output version info.</span><br><span class="line">  --<span class="built_in">help</span>  Output this <span class="built_in">help</span>.</span><br><span class="line"></span><br><span class="line">Report bugs to &lt;bug-patch@gnu.org&gt;.</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ diff -Naur file1.txt file2.txt &gt; patchfile.txt</span><br><span class="line">$ cat patchfile.txt</span><br><span class="line">--- file1.txt2021-04-13 15:27:36.644626792 +0800</span><br><span class="line">+++ file2.txt2021-04-12 15:34:30.758408526 +0800</span><br><span class="line">@@ -1,4 +1,4 @@</span><br><span class="line">-a</span><br><span class="line"> b</span><br><span class="line"> c</span><br><span class="line"> d</span><br><span class="line">+e</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ cat file1.txt</span><br><span class="line">a</span><br><span class="line">b</span><br><span class="line">c</span><br><span class="line">d</span><br><span class="line">$ patch &lt; patchfile.txt</span><br><span class="line">patching file file1.txt</span><br><span class="line">$ cat file1.txt</span><br><span class="line">b</span><br><span class="line">c</span><br><span class="line">d</span><br><span class="line">e</span><br></pre></td></tr></table></figure><p>æ²¡æœ‰å¿…è¦æŒ‡å®šä¸€ä¸ªè¦ä¿®è¡¥çš„ç›®æ ‡æ–‡ä»¶ï¼Œå› ä¸º<code>diff</code>æ–‡ä»¶ï¼ˆåœ¨ç»Ÿä¸€æ¨¡å¼ä¸­ï¼‰å·²ç»åœ¨æ ‡é¢˜è¡Œä¸­åŒ…å«äº†æ–‡ä»¶åã€‚</p><h2 id="tr"><a class="header-anchor" href="#tr">#</a>tr</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">$ tr --<span class="built_in">help</span></span><br><span class="line">Usage: tr [OPTION]... SET1 [SET2]</span><br><span class="line">Translate, squeeze, and/or delete characters from standard input,</span><br><span class="line">writing to standard output.</span><br><span class="line"></span><br><span class="line">  -c, -C, --complement    use the complement of SET1</span><br><span class="line">  -d, --delete            delete characters <span class="keyword">in</span> SET1, <span class="keyword">do</span> not translate</span><br><span class="line">  -s, --squeeze-repeats   replace each sequence of a repeated character</span><br><span class="line">                            that is listed <span class="keyword">in</span> the last specified SET,</span><br><span class="line">                            with a single occurrence of that character</span><br><span class="line">  -t, --truncate-set1     first truncate SET1 to length of SET2</span><br><span class="line">      --<span class="built_in">help</span>     display this <span class="built_in">help</span> and <span class="built_in">exit</span></span><br><span class="line">      --version  output version information and <span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line">SETs are specified as strings of characters.  Most represent themselves.</span><br><span class="line">Interpreted sequences are:</span><br><span class="line"></span><br><span class="line">  \NNN            character with octal value NNN (1 to 3 octal digits)</span><br><span class="line">  \\              backslash</span><br><span class="line">  \a              audible BEL</span><br><span class="line">  \b              backspace</span><br><span class="line">  \f              form feed</span><br><span class="line">  \n              new line</span><br><span class="line">  \r              <span class="built_in">return</span></span><br><span class="line">  \t              horizontal tab</span><br><span class="line">  \v              vertical tab</span><br><span class="line">  CHAR1-CHAR2     all characters from CHAR1 to CHAR2 <span class="keyword">in</span> ascending order</span><br><span class="line">  [CHAR*]         <span class="keyword">in</span> SET2, copies of CHAR until length of SET1</span><br><span class="line">  [CHAR*REPEAT]   REPEAT copies of CHAR, REPEAT octal <span class="keyword">if</span> starting with 0</span><br><span class="line">  [:alnum:]       all letters and digits</span><br><span class="line">  [:alpha:]       all letters</span><br><span class="line">  [:blank:]       all horizontal whitespace</span><br><span class="line">  [:cntrl:]       all control characters</span><br><span class="line">  [:digit:]       all digits</span><br><span class="line">  [:graph:]       all printable characters, not including space</span><br><span class="line">  [:lower:]       all lower <span class="keyword">case</span> letters</span><br><span class="line">  [:<span class="built_in">print</span>:]       all printable characters, including space</span><br><span class="line">  [:punct:]       all punctuation characters</span><br><span class="line">  [:space:]       all horizontal or vertical whitespace</span><br><span class="line">  [:upper:]       all upper <span class="keyword">case</span> letters</span><br><span class="line">  [:xdigit:]      all hexadecimal digits</span><br><span class="line">  [=CHAR=]        all characters <span class="built_in">which</span> are equivalent to CHAR</span><br><span class="line"></span><br><span class="line">Translation occurs <span class="keyword">if</span> -d is not given and both SET1 and SET2 appear.</span><br><span class="line">-t may be used only when translating.  SET2 is extended to length of</span><br><span class="line">SET1 by repeating its last character as necessary.  Excess characters</span><br><span class="line">of SET2 are ignored.  Only [:lower:] and [:upper:] are guaranteed to</span><br><span class="line">expand <span class="keyword">in</span> ascending order; used <span class="keyword">in</span> SET2 <span class="keyword">while</span> translating, they may</span><br><span class="line">only be used <span class="keyword">in</span> pairs to specify <span class="keyword">case</span> conversion.  -s uses the last</span><br><span class="line">specified SET, and occurs after translation or deletion.</span><br><span class="line"></span><br><span class="line">GNU coreutils online <span class="built_in">help</span>: &lt;http://www.gnu.org/software/coreutils/&gt;</span><br><span class="line">Report tr translation bugs to &lt;http://translationproject.org/team/&gt;</span><br><span class="line">Full documentation at: &lt;http://www.gnu.org/software/coreutils/tr&gt;</span><br><span class="line">or available locally via: info <span class="string">'(coreutils) tr invocation'</span></span><br></pre></td></tr></table></figure><p><code>tr</code>ç¨‹åºè¢«ç”¨æ¥æ›´æ”¹å­—ç¬¦ï¼Œå¯ä»¥æŠŠå®ƒçœ‹ä½œæ˜¯ä¸€ç§åŸºäºå­—ç¬¦çš„æŸ¥æ‰¾å’Œæ›¿æ¢æ“ä½œã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">"lowercase letters"</span> | tr a-z A-Z</span><br><span class="line">LOWERCASE LETTERS</span><br></pre></td></tr></table></figure><p><code>tr</code>å‘½ä»¤æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šè¦è¢«è½¬æ¢çš„å­—ç¬¦é›†ä»¥åŠç›¸å¯¹åº”çš„è½¬æ¢åçš„å­—ç¬¦é›†ã€‚æ¯”å¦‚ï¼š<code>ä¸€ä¸ªæšä¸¾åˆ—è¡¨</code>ã€<code>ä¸€ä¸ªå­—ç¬¦åŸŸ</code>æˆ–è€…<code>POSIX å­—ç¬¦ç±»</code>ã€‚</p><p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä¸¤ä¸ªå­—ç¬¦é›†åº”è¯¥é•¿åº¦ç›¸åŒï¼›ç„¶è€Œï¼Œæœ‰å¯èƒ½ç¬¬ä¸€ä¸ªé›†åˆå¤§äºç¬¬äºŒä¸ªï¼Œå°¤å…¶å¦‚æœæˆ‘ä»¬æƒ³è¦æŠŠå¤šä¸ªå­—ç¬¦è½¬æ¢ä¸ºå•ä¸ªå­—ç¬¦ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">"lowercase letters"</span> | tr [:lower:] A</span><br><span class="line">AAAAAAAAA AAAAAAA</span><br></pre></td></tr></table></figure><p><code>tr</code>å‘½ä»¤èƒ½å…è®¸å­—ç¬¦ä»è¾“å…¥æµä¸­ç®€å•åœ°è¢«åˆ é™¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tr -d <span class="string">'\r'</span> &lt; dos_file &gt; unix_file</span><br></pre></td></tr></table></figure><p><code>-s</code>é€‰é¡¹èƒ½åˆ é™¤é‡å¤çš„å­—ç¬¦å®ä¾‹ï¼ˆéœ€è¦é‡å¤å­—ç¬¦ç›¸é‚»ï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">"aaabbbccc"</span> | tr -s ab</span><br><span class="line">abccc</span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">"abcabcabc"</span> | tr -s ab</span><br><span class="line">abcabcabc</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> shell </tag>
            
            <tag> bash </tag>
            
            <tag> shell note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šå¿«ä¹çš„Linuxå‘½ä»¤è¡Œã€‹ç¬”è®°ï¼ˆ20ï¼‰</title>
      <link href="/blog/2021/04/12/the-linux-command-line-note-20/"/>
      <url>/blog/2021/04/12/the-linux-command-line-note-20/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹"><a class="header-anchor" href="#ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹">#</a>ã€Šå¿«ä¹çš„ Linux å‘½ä»¤è¡Œã€‹</h1><a id="more"></a><h2 id="cat"><a class="header-anchor" href="#cat">#</a>cat</h2><p><code>Ctrl-d</code>å¯ä»¥å‘Šè¯‰<code>cat</code>åˆ°è¾¾æ–‡ä»¶æœ«å°¾ã€‚<br><code>-A</code>é€‰é¡¹å¯ä»¥æ˜¾ç¤ºä¸å¯è§å­—ç¬¦ï¼Œæ¯”å¦‚åˆ¶è¡¨ç¬¦ç­‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ cat &gt; onns.txt</span><br><span class="line">The quick brown fox jumped over the lazy dog.</span><br><span class="line"></span><br><span class="line">$  cat -A onns.txt</span><br><span class="line">^IThe quick brown fox jumped over the lazy dog.$</span><br><span class="line">^I^I$</span><br></pre></td></tr></table></figure><p><code>-n</code>é€‰é¡¹ç»™æ–‡æœ¬è¡Œæ·»åŠ è¡Œå·ã€‚<br><code>-s</code>é€‰é¡¹ç¦æ­¢è¾“å‡ºå¤šä¸ªç©ºç™½è¡Œã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$ cat &gt; onns.txt</span><br><span class="line">The quick brown fox</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">jumped over the lazy dog.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ cat onns.txt</span><br><span class="line">The quick brown fox</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">jumped over the lazy dog.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ cat -ns onns.txt</span><br><span class="line">     1The quick brown fox</span><br><span class="line">     2</span><br><span class="line">     3jumped over the lazy dog.</span><br><span class="line">     4</span><br></pre></td></tr></table></figure><p>ä¸çŸ¥é“ä¸ºä»€ä¹ˆè¿™ä¸ª<code>cat</code>ä¹‹åä¼šåœ¨æœ€å‰é¢<strong>å¢åŠ äº”ä¸ªç©ºæ ¼</strong>ï¼Œä¹‹å‰æˆ‘åœ¨<code>MacOS</code>ä¸Šçš„<code>wc</code>ä¹‹ç±»çš„å‘½ä»¤ä¹Ÿä¼šï¼Œæœ‰æœºä¼šæŸ¥ä¸€ä¸‹ï¼ä¸‹é¢æ˜¯æˆ‘åœ¨<code>Mac</code>ä¸Šçš„è¿è¡Œç»“æœï¼Œä¹Ÿæ˜¯æœ‰ç©ºæ ¼ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[14:30:49] onns@Onns ~/Desktop $ cat &gt; onns.txt</span><br><span class="line">The quick brown fox</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">jumped over the lazy dog.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[14:31:04] onns@Onns ~/Desktop $ cat onns.txt</span><br><span class="line">The quick brown fox</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">jumped over the lazy dog.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[14:31:08] onns@Onns ~/Desktop $ cat -ns onns.txt</span><br><span class="line">     1The quick brown fox</span><br><span class="line">     2</span><br><span class="line">     3jumped over the lazy dog.</span><br><span class="line">     4</span><br></pre></td></tr></table></figure><h3 id="todo"><a class="header-anchor" href="#todo">#</a>TODO</h3><ul><li>æŸ¥ä¸€ä¸‹ä¸ºä»€ä¹ˆ<code>cat</code>ä¼šæœ‰å¤šä½™çš„ç©ºæ ¼ã€‚</li></ul><h2 id="sort"><a class="header-anchor" href="#sort">#</a>sort</h2><p><code>sort</code>ç¨‹åºå¯¹æ ‡å‡†è¾“å…¥çš„å†…å®¹ï¼Œæˆ–å‘½ä»¤è¡Œä¸­æŒ‡å®šçš„ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶è¿›è¡Œæ’åºï¼Œç„¶åæŠŠæ’åºç»“æœå‘é€åˆ°æ ‡å‡†è¾“å‡ºã€‚</p><p>ä¹‹å‰å·²ç»åˆ—ä¸¾è¿‡å‚æ•°äº†ï¼Œä¸é‡å¤äº†ï¼Œå…·ä½“å¯ä»¥å‚è€ƒï¼š<a href="https://onns.xyz/blog/2020/08/21/ip-records-top-3/#%E5%86%8D%E6%8E%92%E5%BA%8F">ip è®¿é—®è®°å½•æŸ¥è¯¢ top3</a>ã€‚</p><p>æ˜¾ç¤º<code>10</code>ä¸ªæœ€å¤§çš„ç©ºé—´æ¶ˆè´¹è€…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$ du -s /usr/share/* | head</span><br><span class="line">112/usr/share/GConf</span><br><span class="line">6824/usr/share/GeoIP</span><br><span class="line">108/usr/share/ImageMagick-6</span><br><span class="line">28/usr/share/PackageKit</span><br><span class="line">5848/usr/share/X11</span><br><span class="line">676/usr/share/aclocal</span><br><span class="line">160/usr/share/aclocal-1.15</span><br><span class="line">8/usr/share/acpi-support</span><br><span class="line">8/usr/share/adduser</span><br><span class="line">612/usr/share/adium</span><br><span class="line">$ du -s /usr/share/* | sort -nr | head</span><br><span class="line">166684/usr/share/fonts</span><br><span class="line">122520/usr/share/sogouimebs</span><br><span class="line">81468/usr/share/doc</span><br><span class="line">68532/usr/share/icons</span><br><span class="line">44384/usr/share/man</span><br><span class="line">40920/usr/share/ibus</span><br><span class="line">38372/usr/share/locale</span><br><span class="line">37360/usr/share/backgrounds</span><br><span class="line">32064/usr/share/vim</span><br><span class="line">29984/usr/share/<span class="built_in">help</span></span><br></pre></td></tr></table></figure><p><code>-n</code>å¯ä»¥æŒ‰ç…§æ•°å€¼æ’åºï¼Œä½†æ˜¯è¿™æ˜¯å› ä¸ºè¿™ä¸ªæ•°å­—åœ¨æœ€å¼€å¤´ï¼Œ<code>ls</code>çš„å°±ä¸åœ¨æœ€å¼€å§‹ï¼Œæ‰€ä»¥éœ€è¦<code>-k</code>å‚æ•°ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$ ls -l /usr/bin | head</span><br><span class="line">total 174060</span><br><span class="line">-rwxr-xr-x 1 root root          96 2æœˆ  27 23:10 2to3-2.7</span><br><span class="line">-rwxr-xr-x 1 root root       10104 4æœˆ  23  2016 411toppm</span><br><span class="line">lrwxrwxrwx 1 root root          11 9æœˆ  25  2020 GET -&gt; lwp-request</span><br><span class="line">lrwxrwxrwx 1 root root          11 9æœˆ  25  2020 HEAD -&gt; lwp-request</span><br><span class="line">lrwxrwxrwx 1 root root          11 9æœˆ  25  2020 POST -&gt; lwp-request</span><br><span class="line">lrwxrwxrwx 1 root root           4 12æœˆ  1 01:57 X -&gt; Xorg</span><br><span class="line">lrwxrwxrwx 1 root root           1 9æœˆ  25  2020 X11 -&gt; .</span><br><span class="line">-rwxr-xr-x 1 root root     2438904 12æœˆ  1 01:57 Xephyr</span><br><span class="line">-rwxr-xr-x 1 root root         274 12æœˆ  1 01:57 Xorg</span><br><span class="line">$ ls -l /usr/bin | sort -nr -k 5 | head</span><br><span class="line">-rwxr-xr-x 1 root root    19428040 2æœˆ   2 16:21 snap</span><br><span class="line">-rwxr-xr-x 1 root root     7619056 10æœˆ 30 19:45 gdb</span><br><span class="line">-rwxr-xr-x 1 root root     5893648 6æœˆ  24  2019 ubuntu-report</span><br><span class="line">-rwxr-xr-x 1 root root     4551912 1æœˆ  13  2020 gnome-control-center</span><br><span class="line">-rwxr-xr-x 2 root root     4526456 1æœˆ  26 23:33 python3.6m</span><br><span class="line">-rwxr-xr-x 2 root root     4526456 1æœˆ  26 23:33 python3.6</span><br><span class="line">-rwxr-xr-x 1 root root     3633000 2æœˆ  27 23:10 python2.7</span><br><span class="line">-rwxr-xr-x 1 root root     3111952 2æœˆ  12 16:45 x86_64-linux-gnu-ld.gold</span><br><span class="line">-rwxr-xr-x 1 root root     2886928 2æœˆ  12 16:45 x86_64-linux-gnu-dwp</span><br><span class="line">-rwxr-xr-x 1 root root     2675336 10æœˆ 13 23:49 vim.basic</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">$ vi distros.txt</span><br><span class="line">SUSE10.212/07/2006</span><br><span class="line">Fedora1011/25/2008</span><br><span class="line">SUSE11.006/18/2008</span><br><span class="line">Ubuntu8.0404/24/2008</span><br><span class="line">Fedora811/08/2007</span><br><span class="line">SUSE10.310/04/2007</span><br><span class="line">Ubuntu6.1010/26/2006</span><br><span class="line">Fedora705/31/2007</span><br><span class="line">Ubuntu7.1010/18/2007</span><br><span class="line">Ubuntu7.0404/19/2007</span><br><span class="line">SUSE10.105/11/2006</span><br><span class="line">Fedora610/24/2006</span><br><span class="line">Fedora905/13/2008</span><br><span class="line">Ubuntu6.0606/01/2006</span><br><span class="line">Ubuntu8.1010/30/2008</span><br><span class="line">Fedora503/20/2006</span><br><span class="line">$ sort distros.txt</span><br><span class="line">Fedora1011/25/2008</span><br><span class="line">Fedora503/20/2006</span><br><span class="line">Fedora610/24/2006</span><br><span class="line">Fedora705/31/2007</span><br><span class="line">Fedora811/08/2007</span><br><span class="line">Fedora905/13/2008</span><br><span class="line">SUSE10.105/11/2006</span><br><span class="line">SUSE10.212/07/2006</span><br><span class="line">SUSE10.310/04/2007</span><br><span class="line">SUSE11.006/18/2008</span><br><span class="line">Ubuntu6.0606/01/2006</span><br><span class="line">Ubuntu6.1010/26/2006</span><br><span class="line">Ubuntu7.0404/19/2007</span><br><span class="line">Ubuntu7.1010/18/2007</span><br><span class="line">Ubuntu8.0404/24/2008</span><br><span class="line">Ubuntu8.1010/30/2008</span><br></pre></td></tr></table></figure><p><code>sort</code>ä¸­ä¸€ä¸ªå…³é”®å€¼å¯èƒ½åŒ…æ‹¬ä¸€ä¸ªå­—æ®µåŒºåŸŸï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šåŒºåŸŸï¼Œ<code>sort</code>ç¨‹åºä¼šä½¿ç”¨ä¸€ä¸ªé”®å€¼ï¼Œå…¶å§‹äºæŒ‡å®šçš„å­—æ®µï¼Œä¸€ç›´æ‰©å±•åˆ°è¡Œå°¾ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ sort -k 1,1 -k 2n distros.txt</span><br><span class="line">Fedora503/20/2006</span><br><span class="line">Fedora610/24/2006</span><br><span class="line">Fedora705/31/2007</span><br><span class="line">Fedora811/08/2007</span><br><span class="line">Fedora905/13/2008</span><br><span class="line">Fedora1011/25/2008</span><br><span class="line">SUSE10.105/11/2006</span><br><span class="line">SUSE10.212/07/2006</span><br><span class="line">SUSE10.310/04/2007</span><br><span class="line">SUSE11.006/18/2008</span><br><span class="line">Ubuntu6.0606/01/2006</span><br><span class="line">Ubuntu6.1010/26/2006</span><br><span class="line">Ubuntu7.0404/19/2007</span><br><span class="line">Ubuntu7.1010/18/2007</span><br><span class="line">Ubuntu8.0404/24/2008</span><br><span class="line">Ubuntu8.1010/30/2008</span><br></pre></td></tr></table></figure><p><code>1,1</code>çš„æ„æ€æ˜¯<strong>æ’åºå§‹äºå¹¶ä¸”ç»“æŸäºç¬¬ä¸€ä¸ªå­—æ®µ</strong>ã€‚<br><code>2n</code>ä¸­<code>2</code>æ˜¯æ’åºçš„é”®å€¼ï¼Œå¹¶ä¸”æŒ‰ç…§æ•°å€¼æ’åºï¼ˆ<code>n</code>ï¼‰ã€‚ä¸€ä¸ªé€‰é¡¹å­—æ¯å¯èƒ½è¢«åŒ…å«åœ¨ä¸€ä¸ªé”®å€¼è¯´æ˜ç¬¦çš„æœ«å°¾ï¼Œå…¶ç”¨æ¥æŒ‡å®šæ’åºçš„ç§ç±»ï¼Œè¿™äº›é€‰é¡¹å­—æ¯å’Œ<code>sort</code>ç¨‹åºçš„å…¨å±€é€‰é¡¹ä¸€æ ·ã€‚<br><code>key</code>é€‰é¡¹å…è®¸åœ¨å­—æ®µä¸­æŒ‡å®šåç§»é‡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ sort -k 3.7nbr -k 3.1nbr -k 3.4nbr distros.txt</span><br><span class="line">Fedora1011/25/2008</span><br><span class="line">Ubuntu8.1010/30/2008</span><br><span class="line">SUSE11.006/18/2008</span><br><span class="line">Fedora905/13/2008</span><br><span class="line">Ubuntu8.0404/24/2008</span><br><span class="line">Fedora811/08/2007</span><br><span class="line">Ubuntu7.1010/18/2007</span><br><span class="line">SUSE10.310/04/2007</span><br><span class="line">Fedora705/31/2007</span><br><span class="line">Ubuntu7.0404/19/2007</span><br><span class="line">SUSE10.212/07/2006</span><br><span class="line">Ubuntu6.1010/26/2006</span><br><span class="line">Fedora610/24/2006</span><br><span class="line">Ubuntu6.0606/01/2006</span><br><span class="line">SUSE10.105/11/2006</span><br><span class="line">Fedora503/20/2006</span><br></pre></td></tr></table></figure><p><code>3.7nbr</code>ä»£è¡¨ç¬¬ä¸‰ä¸ªå­—æ®µä¸­çš„ç¬¬ä¸ƒä¸ªå­—ç¬¦å¼€å§‹ã€‚</p><p><code>-t</code>æŒ‡å®šåˆ†éš”ç¬¦ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ sort -t <span class="string">':'</span> -k 7 /etc/passwd | head</span><br><span class="line">hs:x:1000:1000:hs,,,:/home/hs:/bin/bash</span><br><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">gdm:x:121:125:Gnome Display Manager:/var/lib/gdm3:/bin/<span class="literal">false</span></span><br><span class="line">gnome-initial-setup:x:120:65534::/run/gnome-initial-setup/:/bin/<span class="literal">false</span></span><br><span class="line">hplip:x:117:7:HPLIP system user,,,:/var/run/hplip:/bin/<span class="literal">false</span></span><br><span class="line">speech-dispatcher:x:111:29:Speech Dispatcher,,,:/var/run/speech-dispatcher:/bin/<span class="literal">false</span></span><br><span class="line">whoopsie:x:112:117::/nonexistent:/bin/<span class="literal">false</span></span><br><span class="line">sync:x:4:65534:sync:/bin:/bin/sync</span><br><span class="line">_apt:x:104:65534::/nonexistent:/usr/sbin/nologin</span><br><span class="line">avahi-autoipd:x:106:112:Avahi autoip daemon,,,:/var/lib/avahi-autoipd:/usr/sbin/nologin</span><br></pre></td></tr></table></figure><h2 id="uniq"><a class="header-anchor" href="#uniq">#</a>uniq</h2><p><code>uniq</code>ç¨‹åºèƒ½å®Œæˆä»»åŠ¡ï¼Œå…¶è¾“å…¥å¿…é¡»æ˜¯æ’å¥½åºçš„æ•°æ®ã€‚</p><p>å¯ä»¥å‚è€ƒï¼š<a href="https://onns.xyz/blog/2020/08/21/ip-records-top-3/#%E5%86%8D%E6%8E%92%E5%BA%8F">ip è®¿é—®è®°å½•æŸ¥è¯¢ top3</a>ã€‚</p><h2 id="cut"><a class="header-anchor" href="#cut">#</a>cut</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">$ cut --<span class="built_in">help</span></span><br><span class="line">Usage: cut OPTION... [FILE]...</span><br><span class="line">Print selected parts of lines from each FILE to standard output.</span><br><span class="line"></span><br><span class="line">With no FILE, or when FILE is -, <span class="built_in">read</span> standard input.</span><br><span class="line"></span><br><span class="line">Mandatory arguments to long options are mandatory <span class="keyword">for</span> short options too.</span><br><span class="line">  -b, --bytes=LIST        select only these bytes</span><br><span class="line">  -c, --characters=LIST   select only these characters</span><br><span class="line">  -d, --delimiter=DELIM   use DELIM instead of TAB <span class="keyword">for</span> field delimiter</span><br><span class="line">  -f, --fields=LIST       select only these fields;  also <span class="built_in">print</span> any line</span><br><span class="line">                            that contains no delimiter character, unless</span><br><span class="line">                            the -s option is specified</span><br><span class="line">  -n                      (ignored)</span><br><span class="line">      --complement        complement the <span class="built_in">set</span> of selected bytes, characters</span><br><span class="line">                            or fields</span><br><span class="line">  -s, --only-delimited    <span class="keyword">do</span> not <span class="built_in">print</span> lines not containing delimiters</span><br><span class="line">      --output-delimiter=STRING  use STRING as the output delimiter</span><br><span class="line">                            the default is to use the input delimiter</span><br><span class="line">  -z, --zero-terminated    line delimiter is NUL, not newline</span><br><span class="line">      --<span class="built_in">help</span>     display this <span class="built_in">help</span> and <span class="built_in">exit</span></span><br><span class="line">      --version  output version information and <span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line">Use one, and only one of -b, -c or -f.  Each LIST is made up of one</span><br><span class="line">range, or many ranges separated by commas.  Selected input is written</span><br><span class="line"><span class="keyword">in</span> the same order that it is <span class="built_in">read</span>, and is written exactly once.</span><br><span class="line">Each range is one of:</span><br><span class="line"></span><br><span class="line">  N     N<span class="string">'th byte, character or field, counted from 1</span></span><br><span class="line"><span class="string">  N-    from N'</span>th byte, character or field, to end of line</span><br><span class="line">  N-M   from N<span class="string">'th to M'</span>th (included) byte, character or field</span><br><span class="line">  -M    from first to M<span class="string">'th (included) byte, character or field</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">GNU coreutils online help: &lt;http://www.gnu.org/software/coreutils/&gt;</span></span><br><span class="line"><span class="string">Report cut translation bugs to &lt;http://translationproject.org/team/&gt;</span></span><br><span class="line"><span class="string">Full documentation at: &lt;http://www.gnu.org/software/coreutils/cut&gt;</span></span><br><span class="line"><span class="string">or available locally via: info '</span>(coreutils) cut invocation<span class="string">'</span></span><br></pre></td></tr></table></figure><p>ä¸€ä¸ªç”±<code>tab</code>åˆ†ç¦»çš„æ–‡ä»¶ï¼Œæ¯è¡Œä¸å¤ªå¯èƒ½åŒ…å«ç›¸åŒçš„å­—ç¬¦æ•°ï¼Œè¿™å°±ä½¿è®¡ç®—æ¯è¡Œä¸­å­—ç¬¦çš„ä½ç½®å˜å¾—å›°éš¾æˆ–è€…æ˜¯ä¸å¯èƒ½ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">$ cut -f 3 distros.txt</span><br><span class="line">12/07/2006</span><br><span class="line">11/25/2008</span><br><span class="line">06/18/2008</span><br><span class="line">04/24/2008</span><br><span class="line">11/08/2007</span><br><span class="line">10/04/2007</span><br><span class="line">10/26/2006</span><br><span class="line">05/31/2007</span><br><span class="line">10/18/2007</span><br><span class="line">04/19/2007</span><br><span class="line">05/11/2006</span><br><span class="line">10/24/2006</span><br><span class="line">05/13/2008</span><br><span class="line">06/01/2006</span><br><span class="line">10/30/2008</span><br><span class="line">03/20/2006</span><br><span class="line">$ cut -f 3 distros.txt | cut -c 7-10</span><br><span class="line">2006</span><br><span class="line">2008</span><br><span class="line">2008</span><br><span class="line">2008</span><br><span class="line">2007</span><br><span class="line">2007</span><br><span class="line">2006</span><br><span class="line">2007</span><br><span class="line">2007</span><br><span class="line">2007</span><br><span class="line">2006</span><br><span class="line">2006</span><br><span class="line">2008</span><br><span class="line">2006</span><br><span class="line">2008</span><br><span class="line">2006</span><br></pre></td></tr></table></figure><p><code>expand</code>å‘½ä»¤å¯ä»¥æŠŠ<code>tab</code>å±•å¼€æˆç©ºæ ¼ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ expand distros.txt | cut -c 23-</span><br><span class="line">2006</span><br><span class="line">2008</span><br><span class="line">2008</span><br><span class="line">2008</span><br><span class="line">2007</span><br><span class="line">2007</span><br><span class="line">2006</span><br><span class="line">2007</span><br><span class="line">2007</span><br><span class="line">2007</span><br><span class="line">2006</span><br><span class="line">2006</span><br><span class="line">2008</span><br><span class="line">2006</span><br><span class="line">2008</span><br><span class="line">2006</span><br></pre></td></tr></table></figure><p><code>-d</code>æŒ‡å®šåˆ†éš”ç¬¦ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ cut -d <span class="string">':'</span> -f 1 /etc/passwd | head</span><br><span class="line">root</span><br><span class="line">daemon</span><br><span class="line">bin</span><br><span class="line">sys</span><br><span class="line">sync</span><br><span class="line">games</span><br><span class="line">man</span><br><span class="line">lp</span><br><span class="line">mail</span><br><span class="line">news</span><br></pre></td></tr></table></figure><h2 id="paste"><a class="header-anchor" href="#paste">#</a>paste</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ paste --<span class="built_in">help</span></span><br><span class="line">Usage: paste [OPTION]... [FILE]...</span><br><span class="line">Write lines consisting of the sequentially corresponding lines from</span><br><span class="line">each FILE, separated by TABs, to standard output.</span><br><span class="line"></span><br><span class="line">With no FILE, or when FILE is -, <span class="built_in">read</span> standard input.</span><br><span class="line"></span><br><span class="line">Mandatory arguments to long options are mandatory <span class="keyword">for</span> short options too.</span><br><span class="line">  -d, --delimiters=LIST   reuse characters from LIST instead of TABs</span><br><span class="line">  -s, --serial            paste one file at a time instead of <span class="keyword">in</span> parallel</span><br><span class="line">  -z, --zero-terminated    line delimiter is NUL, not newline</span><br><span class="line">      --<span class="built_in">help</span>     display this <span class="built_in">help</span> and <span class="built_in">exit</span></span><br><span class="line">      --version  output version information and <span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line">GNU coreutils online <span class="built_in">help</span>: &lt;http://www.gnu.org/software/coreutils/&gt;</span><br><span class="line">Report paste translation bugs to &lt;http://translationproject.org/team/&gt;</span><br><span class="line">Full documentation at: &lt;http://www.gnu.org/software/coreutils/paste&gt;</span><br><span class="line">or available locally via: info <span class="string">'(coreutils) paste invocation'</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">$ sort -k 3.7nbr -k 3.1nbr -k 3.4nbr distros.txt &gt; distros-by-date.txt</span><br><span class="line">$ cat distros-by-date.txt</span><br><span class="line">Fedora1011/25/2008</span><br><span class="line">Ubuntu8.1010/30/2008</span><br><span class="line">SUSE11.006/18/2008</span><br><span class="line">Fedora905/13/2008</span><br><span class="line">Ubuntu8.0404/24/2008</span><br><span class="line">Fedora811/08/2007</span><br><span class="line">Ubuntu7.1010/18/2007</span><br><span class="line">SUSE10.310/04/2007</span><br><span class="line">Fedora705/31/2007</span><br><span class="line">Ubuntu7.0404/19/2007</span><br><span class="line">SUSE10.212/07/2006</span><br><span class="line">Ubuntu6.1010/26/2006</span><br><span class="line">Fedora610/24/2006</span><br><span class="line">Ubuntu6.0606/01/2006</span><br><span class="line">SUSE10.105/11/2006</span><br><span class="line">Fedora503/20/2006</span><br><span class="line">$ cut -f 1,2 distros-by-date.txt &gt; distros-versions.txt</span><br><span class="line">$ cat distros-versions.txt</span><br><span class="line">Fedora10</span><br><span class="line">Ubuntu8.10</span><br><span class="line">SUSE11.0</span><br><span class="line">Fedora9</span><br><span class="line">Ubuntu8.04</span><br><span class="line">Fedora8</span><br><span class="line">Ubuntu7.10</span><br><span class="line">SUSE10.3</span><br><span class="line">Fedora7</span><br><span class="line">Ubuntu7.04</span><br><span class="line">SUSE10.2</span><br><span class="line">Ubuntu6.10</span><br><span class="line">Fedora6</span><br><span class="line">Ubuntu6.06</span><br><span class="line">SUSE10.1</span><br><span class="line">Fedora5</span><br><span class="line">$ cut -f 3 distros-by-date.txt &gt; distros-dates.txt</span><br><span class="line">$ cat distros-dates.txt</span><br><span class="line">11/25/2008</span><br><span class="line">10/30/2008</span><br><span class="line">06/18/2008</span><br><span class="line">05/13/2008</span><br><span class="line">04/24/2008</span><br><span class="line">11/08/2007</span><br><span class="line">10/18/2007</span><br><span class="line">10/04/2007</span><br><span class="line">05/31/2007</span><br><span class="line">04/19/2007</span><br><span class="line">12/07/2006</span><br><span class="line">10/26/2006</span><br><span class="line">10/24/2006</span><br><span class="line">06/01/2006</span><br><span class="line">05/11/2006</span><br><span class="line">03/20/2006</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ paste distros-dates.txt distros-versions.txt</span><br><span class="line">11/25/2008Fedora10</span><br><span class="line">10/30/2008Ubuntu8.10</span><br><span class="line">06/18/2008SUSE11.0</span><br><span class="line">05/13/2008Fedora9</span><br><span class="line">04/24/2008Ubuntu8.04</span><br><span class="line">11/08/2007Fedora8</span><br><span class="line">10/18/2007Ubuntu7.10</span><br><span class="line">10/04/2007SUSE10.3</span><br><span class="line">05/31/2007Fedora7</span><br><span class="line">04/19/2007Ubuntu7.04</span><br><span class="line">12/07/2006SUSE10.2</span><br><span class="line">10/26/2006Ubuntu6.10</span><br><span class="line">10/24/2006Fedora6</span><br><span class="line">06/01/2006Ubuntu6.06</span><br><span class="line">05/11/2006SUSE10.1</span><br><span class="line">03/20/2006Fedora5</span><br></pre></td></tr></table></figure><h2 id="join"><a class="header-anchor" href="#join">#</a>join</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">$ join --<span class="built_in">help</span></span><br><span class="line">Usage: join [OPTION]... FILE1 FILE2</span><br><span class="line">For each pair of input lines with identical join fields, write a line to</span><br><span class="line">standard output.  The default join field is the first, delimited by blanks.</span><br><span class="line"></span><br><span class="line">When FILE1 or FILE2 (not both) is -, <span class="built_in">read</span> standard input.</span><br><span class="line"></span><br><span class="line">  -a FILENUM        also <span class="built_in">print</span> unpairable lines from file FILENUM, <span class="built_in">where</span></span><br><span class="line">                      FILENUM is 1 or 2, corresponding to FILE1 or FILE2</span><br><span class="line">  -e EMPTY          replace missing input fields with EMPTY</span><br><span class="line">  -i, --ignore-case  ignore differences <span class="keyword">in</span> <span class="keyword">case</span> when comparing fields</span><br><span class="line">  -j FIELD          equivalent to <span class="string">'-1 FIELD -2 FIELD'</span></span><br><span class="line">  -o FORMAT         obey FORMAT <span class="keyword">while</span> constructing output line</span><br><span class="line">  -t CHAR           use CHAR as input and output field separator</span><br><span class="line">  -v FILENUM        like -a FILENUM, but suppress joined output lines</span><br><span class="line">  -1 FIELD          join on this FIELD of file 1</span><br><span class="line">  -2 FIELD          join on this FIELD of file 2</span><br><span class="line">  --check-order     check that the input is correctly sorted, even</span><br><span class="line">                      <span class="keyword">if</span> all input lines are pairable</span><br><span class="line">  --nocheck-order   <span class="keyword">do</span> not check that the input is correctly sorted</span><br><span class="line">  --header          treat the first line <span class="keyword">in</span> each file as field headers,</span><br><span class="line">                      <span class="built_in">print</span> them without trying to pair them</span><br><span class="line">  -z, --zero-terminated     line delimiter is NUL, not newline</span><br><span class="line">      --<span class="built_in">help</span>     display this <span class="built_in">help</span> and <span class="built_in">exit</span></span><br><span class="line">      --version  output version information and <span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line">Unless -t CHAR is given, leading blanks separate fields and are ignored,</span><br><span class="line"><span class="keyword">else</span> fields are separated by CHAR.  Any FIELD is a field number counted</span><br><span class="line">from 1.  FORMAT is one or more comma or blank separated specifications,</span><br><span class="line">each being <span class="string">'FILENUM.FIELD'</span> or <span class="string">'0'</span>.  Default FORMAT outputs the join field,</span><br><span class="line">the remaining fields from FILE1, the remaining fields from FILE2, all</span><br><span class="line">separated by CHAR.  If FORMAT is the keyword <span class="string">'auto'</span>, <span class="keyword">then</span> the first</span><br><span class="line">line of each file determines the number of fields output <span class="keyword">for</span> each line.</span><br><span class="line"></span><br><span class="line">Important: FILE1 and FILE2 must be sorted on the join fields.</span><br><span class="line">E.g., use <span class="string">"sort -k 1b,1"</span> <span class="keyword">if</span> <span class="string">'join'</span> has no options,</span><br><span class="line">or use <span class="string">"join -t ''"</span> <span class="keyword">if</span> <span class="string">'sort'</span> has no options.</span><br><span class="line">Note, comparisons honor the rules specified by <span class="string">'LC_COLLATE'</span>.</span><br><span class="line">If the input is not sorted and some lines cannot be joined, a</span><br><span class="line">warning message will be given.</span><br><span class="line"></span><br><span class="line">GNU coreutils online <span class="built_in">help</span>: &lt;http://www.gnu.org/software/coreutils/&gt;</span><br><span class="line">Report join translation bugs to &lt;http://translationproject.org/team/&gt;</span><br><span class="line">Full documentation at: &lt;http://www.gnu.org/software/coreutils/join&gt;</span><br><span class="line">or available locally via: info <span class="string">'(coreutils) join invocation'</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">$ cut -f 1,1 distros-by-date.txt &gt; distros-names.txt</span><br><span class="line">$ paste distros-dates.txt distros-names.txt &gt; distros-key-names.txt</span><br><span class="line">$ cat distros-key-names.txt</span><br><span class="line">11/25/2008Fedora</span><br><span class="line">10/30/2008Ubuntu</span><br><span class="line">06/18/2008SUSE</span><br><span class="line">05/13/2008Fedora</span><br><span class="line">04/24/2008Ubuntu</span><br><span class="line">11/08/2007Fedora</span><br><span class="line">10/18/2007Ubuntu</span><br><span class="line">10/04/2007SUSE</span><br><span class="line">05/31/2007Fedora</span><br><span class="line">04/19/2007Ubuntu</span><br><span class="line">12/07/2006SUSE</span><br><span class="line">10/26/2006Ubuntu</span><br><span class="line">10/24/2006Fedora</span><br><span class="line">06/01/2006Ubuntu</span><br><span class="line">05/11/2006SUSE</span><br><span class="line">03/20/2006Fedora</span><br><span class="line">$ cut -f 2,2 distros-by-date.txt &gt; distros-vernums.txt</span><br><span class="line">$ paste distros-dates.txt distros-vernums.txt &gt; distros-key-vernums.txt</span><br><span class="line">$ cat distros-key-vernums.txt</span><br><span class="line">11/25/200810</span><br><span class="line">10/30/20088.10</span><br><span class="line">06/18/200811.0</span><br><span class="line">05/13/20089</span><br><span class="line">04/24/20088.04</span><br><span class="line">11/08/20078</span><br><span class="line">10/18/20077.10</span><br><span class="line">10/04/200710.3</span><br><span class="line">05/31/20077</span><br><span class="line">04/19/20077.04</span><br><span class="line">12/07/200610.2</span><br><span class="line">10/26/20066.10</span><br><span class="line">10/24/20066</span><br><span class="line">06/01/20066.06</span><br><span class="line">05/11/200610.1</span><br><span class="line">03/20/20065</span><br></pre></td></tr></table></figure><p>ä¸ºäº†ä½¿<code>join</code>å‘½ä»¤èƒ½æ­£å¸¸å·¥ä½œï¼Œæ‰€æœ‰æ–‡ä»¶å¿…é¡»æŒ‰ç…§å…³é”®æ•°æ®åŸŸæ’åºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ join distros-key-names.txt distros-key-vernums.txt</span><br><span class="line">11/25/2008 Fedora 10</span><br><span class="line">10/30/2008 Ubuntu 8.10</span><br><span class="line">06/18/2008 SUSE 11.0</span><br><span class="line">05/13/2008 Fedora 9</span><br><span class="line">04/24/2008 Ubuntu 8.04</span><br><span class="line">11/08/2007 Fedora 8</span><br><span class="line">10/18/2007 Ubuntu 7.10</span><br><span class="line">10/04/2007 SUSE 10.3</span><br><span class="line">05/31/2007 Fedora 7</span><br><span class="line">04/19/2007 Ubuntu 7.04</span><br><span class="line">12/07/2006 SUSE 10.2</span><br><span class="line">10/26/2006 Ubuntu 6.10</span><br><span class="line">10/24/2006 Fedora 6</span><br><span class="line">06/01/2006 Ubuntu 6.06</span><br><span class="line">05/11/2006 SUSE 10.1</span><br><span class="line">03/20/2006 Fedora 5</span><br></pre></td></tr></table></figure><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>join</code>å‘½ä»¤ä½¿ç”¨ç©ºç™½å­—ç¬¦åšä¸ºè¾“å…¥å­—æ®µçš„ç•Œå®šç¬¦ï¼Œä¸€ä¸ªç©ºæ ¼ä½œä¸ºè¾“å‡ºå­—æ®µçš„ç•Œå®šç¬¦ã€‚<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p><h2 id="comm"><a class="header-anchor" href="#comm">#</a>comm</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">$ comm --<span class="built_in">help</span></span><br><span class="line">Usage: comm [OPTION]... FILE1 FILE2</span><br><span class="line">Compare sorted files FILE1 and FILE2 line by line.</span><br><span class="line"></span><br><span class="line">When FILE1 or FILE2 (not both) is -, <span class="built_in">read</span> standard input.</span><br><span class="line"></span><br><span class="line">With no options, produce three-column output.  Column one contains</span><br><span class="line">lines unique to FILE1, column two contains lines unique to FILE2,</span><br><span class="line">and column three contains lines common to both files.</span><br><span class="line"></span><br><span class="line">  -1              suppress column 1 (lines unique to FILE1)</span><br><span class="line">  -2              suppress column 2 (lines unique to FILE2)</span><br><span class="line">  -3              suppress column 3 (lines that appear <span class="keyword">in</span> both files)</span><br><span class="line"></span><br><span class="line">  --check-order     check that the input is correctly sorted, even</span><br><span class="line">                      <span class="keyword">if</span> all input lines are pairable</span><br><span class="line">  --nocheck-order   <span class="keyword">do</span> not check that the input is correctly sorted</span><br><span class="line">  --output-delimiter=STR  separate columns with STR</span><br><span class="line">  --total           output a summary</span><br><span class="line">  -z, --zero-terminated    line delimiter is NUL, not newline</span><br><span class="line">      --<span class="built_in">help</span>     display this <span class="built_in">help</span> and <span class="built_in">exit</span></span><br><span class="line">      --version  output version information and <span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line">Note, comparisons honor the rules specified by <span class="string">'LC_COLLATE'</span>.</span><br><span class="line"></span><br><span class="line">Examples:</span><br><span class="line">  comm -12 file1 file2  Print only lines present <span class="keyword">in</span> both file1 and file2.</span><br><span class="line">  comm -3 file1 file2  Print lines <span class="keyword">in</span> file1 not <span class="keyword">in</span> file2, and vice versa.</span><br><span class="line"></span><br><span class="line">GNU coreutils online <span class="built_in">help</span>: &lt;http://www.gnu.org/software/coreutils/&gt;</span><br><span class="line">Report comm translation bugs to &lt;http://translationproject.org/team/&gt;</span><br><span class="line">Full documentation at: &lt;http://www.gnu.org/software/coreutils/comm&gt;</span><br><span class="line">or available locally via: info <span class="string">'(coreutils) comm invocation'</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ vi file1.txt</span><br><span class="line">a</span><br><span class="line">b</span><br><span class="line">c</span><br><span class="line">d</span><br><span class="line">$ vi file2.txt</span><br><span class="line">b</span><br><span class="line">c</span><br><span class="line">d</span><br><span class="line">e</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ comm file1.txt file2.txt</span><br><span class="line">a</span><br><span class="line">b</span><br><span class="line">c</span><br><span class="line">d</span><br><span class="line">e</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€åˆ—åŒ…å«ç¬¬ä¸€ä¸ªæ–‡ä»¶ç‹¬æœ‰çš„æ–‡æœ¬è¡Œï¼›ç¬¬äºŒåˆ—æ–‡æœ¬è¡Œæ˜¯ç¬¬äºŒåˆ—ç‹¬æœ‰çš„ï¼›ç¬¬ä¸‰åˆ—åŒ…å«ä¸¤ä¸ªæ–‡ä»¶å…±æœ‰çš„æ–‡æœ¬è¡Œã€‚</p><p><code>comm</code>æ”¯æŒ<code>-n</code>å½¢å¼çš„é€‰é¡¹ï¼Œè¿™é‡Œ<code>n</code>ä»£è¡¨<code>1</code>ã€<code>2</code>æˆ–<code>3</code>ã€‚è¿™äº›é€‰é¡¹ä½¿ç”¨çš„æ—¶å€™ï¼ŒæŒ‡å®šäº†è¦éšè—çš„åˆ—ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ comm -12 file1.txt file2.txt</span><br><span class="line">b</span><br><span class="line">c</span><br><span class="line">d</span><br></pre></td></tr></table></figure><p>ä»Šå¤©å…ˆåˆ°è¿™é‡Œã€‚</p><p>292/505</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>æ„Ÿè§‰å’Œ<code>MySQL</code>çš„<code>join</code>ä¸€æ ·çš„ï¼Œä¹Ÿä¸çŸ¥é“æ˜¯è°å­¦è°ğŸ˜‚ã€‚ <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> shell </tag>
            
            <tag> bash </tag>
            
            <tag> shell note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŠGoè¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹ç¬”è®°ï¼ˆ6ï¼‰</title>
      <link href="/blog/2021/04/11/the-go-programming-language-note-6/"/>
      <url>/blog/2021/04/11/the-go-programming-language-note-6/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šgo-è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹"><a class="header-anchor" href="#ã€Šgo-è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹">#</a>ã€ŠGo è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹</h1><a id="more"></a><h1 id="åŸºç¡€æ•°æ®ç±»å‹"><a class="header-anchor" href="#åŸºç¡€æ•°æ®ç±»å‹">#</a>åŸºç¡€æ•°æ®ç±»å‹</h1><p><code>Go</code>è¯­è¨€å°†æ•°æ®ç±»å‹åˆ†ä¸ºå››ç±»ï¼š<strong>åŸºç¡€ç±»å‹</strong>ã€<strong>å¤åˆç±»å‹</strong>ã€<strong>å¼•ç”¨ç±»å‹</strong>å’Œ<strong>æ¥å£ç±»å‹</strong>ã€‚</p><h2 id="æ•´å‹"><a class="header-anchor" href="#æ•´å‹">#</a>æ•´å‹</h2><p>æœ‰<code>int8</code>ã€<code>int16</code>ã€<code>int32</code>å’Œ<code>int64</code>å››ç§ä¸åŒå¤§å°çš„æœ‰ç¬¦å·æ•´æ•°ç±»å‹ï¼Œåˆ†åˆ«å¯¹åº”<code>8</code>ã€<code>16</code>ã€<code>32</code>ã€<code>64</code>bit å¤§å°çš„æœ‰ç¬¦å·æ•´æ•°ï¼Œä¸æ­¤å¯¹åº”çš„æ˜¯<code>uint8</code>ã€<code>uint16</code>ã€<code>uint32</code>å’Œ<code>uint64</code>å››ç§æ— ç¬¦å·æ•´æ•°ç±»å‹ã€‚</p><p>è¿˜æœ‰ä¸¤ç§ä¸€èˆ¬å¯¹åº”ç‰¹å®š CPU å¹³å°æœºå™¨å­—å¤§å°çš„æœ‰ç¬¦å·å’Œæ— ç¬¦å·æ•´æ•°<code>int</code>å’Œ<code>uint</code>ã€‚å…¶ä¸­<code>int</code>æ˜¯åº”ç”¨æœ€å¹¿æ³›çš„æ•°å€¼ç±»å‹ã€‚è¿™ä¸¤ç§ç±»å‹éƒ½æœ‰åŒæ ·çš„å¤§å°ï¼Œ<code>32</code>æˆ–<code>64</code>bitï¼Œä½†æ˜¯æˆ‘ä»¬ä¸èƒ½å¯¹æ­¤åšä»»ä½•çš„å‡è®¾ï¼Œå› ä¸º<strong>ä¸åŒçš„ç¼–è¯‘å™¨å³ä½¿åœ¨ç›¸åŒçš„ç¡¬ä»¶å¹³å°ä¸Šå¯èƒ½äº§ç”Ÿä¸åŒçš„å¤§å°</strong>ã€‚</p><p>Unicode å­—ç¬¦<code>rune</code>ç±»å‹æ˜¯å’Œ<code>int32</code>ç­‰ä»·çš„ç±»å‹ï¼Œé€šå¸¸ç”¨äºè¡¨ç¤ºä¸€ä¸ª Unicode ç ç‚¹ã€‚è¿™ä¸¤ä¸ªåç§°å¯ä»¥äº’æ¢ä½¿ç”¨ã€‚åŒæ ·<code>byte</code>ä¹Ÿæ˜¯<code>uint8</code>ç±»å‹çš„ç­‰ä»·ç±»å‹ï¼Œ<code>byte</code>ç±»å‹ä¸€èˆ¬ç”¨äºå¼ºè°ƒæ•°å€¼æ˜¯ä¸€ä¸ªåŸå§‹çš„æ•°æ®è€Œä¸æ˜¯ä¸€ä¸ªå°çš„æ•´æ•°ã€‚</p><p>è¿˜æœ‰ä¸€ç§æ— ç¬¦å·çš„æ•´æ•°ç±»å‹<code>uintptr</code>ï¼Œæ²¡æœ‰æŒ‡å®šå…·ä½“çš„ bit å¤§å°ä½†æ˜¯è¶³ä»¥å®¹çº³æŒ‡é’ˆã€‚<code>uintptr</code>ç±»å‹åªæœ‰åœ¨åº•å±‚ç¼–ç¨‹æ—¶æ‰éœ€è¦ï¼Œç‰¹åˆ«æ˜¯<code>Go</code>è¯­è¨€å’Œ<code>C</code>è¯­è¨€å‡½æ•°åº“æˆ–æ“ä½œç³»ç»Ÿæ¥å£ç›¸äº¤äº’çš„åœ° æ–¹ã€‚</p><p>äºŒå…ƒè¿ç®—ç¬¦åŠä¼˜å…ˆçº§ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">*/%&lt;&lt;&gt;&gt;&amp;&amp;^</span><br><span class="line">+-|^</span><br><span class="line">==!=&lt;&lt;=&gt;&gt;=</span><br><span class="line">&amp;&amp;</span><br><span class="line">||</span><br></pre></td></tr></table></figure><p>äºŒå…ƒè¿ç®—ç¬¦æœ‰äº”ç§ä¼˜å…ˆçº§ã€‚åœ¨åŒä¸€ä¸ªä¼˜å…ˆçº§ï¼Œä½¿ç”¨å·¦ä¼˜å…ˆç»“åˆè§„åˆ™ï¼Œä½†æ˜¯ä½¿ç”¨æ‹¬å·å¯ä»¥æ˜ç¡®ä¼˜å…ˆé¡ºåºï¼Œä½¿ç”¨æ‹¬å·ä¹Ÿå¯ä»¥ç”¨äºæå‡ä¼˜å…ˆçº§ã€‚</p><p>åœ¨<code>Go</code>è¯­è¨€ä¸­ï¼Œ<code>%</code>å–æ¨¡è¿ç®—ç¬¦çš„ç¬¦å·å’Œè¢«å–æ¨¡æ•°çš„ç¬¦å·æ€»æ˜¯ä¸€è‡´çš„ï¼Œå› æ­¤<code>-5%3</code>å’Œ<code>-5%-3</code>ç»“æœéƒ½æ˜¯<code>-2</code>ã€‚</p><p>æ•´æ•°é™¤æ³•ä¼šå‘ç€<code>0</code>æ–¹å‘æˆªæ–­ä½™æ•°ã€‚</p><p><code>å¸ƒå°”å‹</code>ã€<code>æ•°å­—ç±»å‹</code>å’Œ<code>å­—ç¬¦ä¸²</code>ç­‰åŸºæœ¬ç±»å‹éƒ½æ˜¯å¯æ¯”è¾ƒçš„ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&amp;ä½è¿ç®— AND</span><br><span class="line">|ä½è¿ç®— OR</span><br><span class="line">^ä½è¿ç®— XOR</span><br><span class="line">&amp;^ä½æ¸…ç©º (AND NOT)</span><br><span class="line">&lt;&lt;å·¦ç§»</span><br><span class="line">&gt;&gt;å³ç§»</span><br></pre></td></tr></table></figure><p>å‰é¢å››ä¸ªæ“ä½œè¿ç®—ç¬¦å¹¶ä¸åŒºåˆ†æ˜¯æœ‰ç¬¦å·è¿˜æ˜¯æ— ç¬¦å·æ•°ã€‚</p><p>ä½æ“ä½œè¿ç®—ç¬¦<code>&amp;^</code>ç”¨äºæŒ‰ä½ç½®é›¶ï¼šå¦‚æœå¯¹åº”<code>y</code>ä¸­<code>bit</code>ä½ä¸º<code>1</code>çš„è¯ï¼Œè¡¨è¾¾å¼<code>z = x &amp;^ y</code>ç»“æœ<code>z</code>çš„å¯¹åº”çš„<code>bit</code>ä½ä¸º<code>0</code>ï¼Œå¦åˆ™<code>z</code>å¯¹åº”çš„<code>bit</code>ä½ç­‰äº<code>x</code>ç›¸åº”çš„<code>bit</code>ä½çš„å€¼ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> x <span class="keyword">uint8</span> = <span class="number">1</span>&lt;&lt;<span class="number">1</span> | <span class="number">1</span>&lt;&lt;<span class="number">5</span></span><br><span class="line"><span class="keyword">var</span> y <span class="keyword">uint8</span> = <span class="number">1</span>&lt;&lt;<span class="number">1</span> | <span class="number">1</span>&lt;&lt;<span class="number">2</span></span><br><span class="line"><span class="keyword">var</span> z <span class="keyword">int8</span> = <span class="number">1</span>&lt;&lt;<span class="number">1</span> | <span class="number">1</span>&lt;&lt;<span class="number">5</span></span><br><span class="line"></span><br><span class="line">fmt.Println(x, y, z)</span><br><span class="line">fmt.Printf(<span class="string">"%08b\n"</span>, x)</span><br><span class="line">fmt.Printf(<span class="string">"%08b\n"</span>, y)</span><br><span class="line">fmt.Printf(<span class="string">"%08b\n"</span>, z)</span><br><span class="line"></span><br><span class="line">fmt.Printf(<span class="string">"%08b\n"</span>, x&amp;y)</span><br><span class="line">fmt.Printf(<span class="string">"%08b\n"</span>, x|y)</span><br><span class="line">fmt.Printf(<span class="string">"%08b\n"</span>, x^y)</span><br><span class="line">fmt.Printf(<span class="string">"%08b\n"</span>, x&amp;^y)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i := <span class="keyword">uint</span>(<span class="number">0</span>); i &lt; <span class="number">8</span>; i++ &#123;</span><br><span class="line"><span class="keyword">if</span> x&amp;(<span class="number">1</span>&lt;&lt;i) != <span class="number">0</span> &#123;</span><br><span class="line">fmt.Println(i)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fmt.Printf(<span class="string">"%08b\n"</span>, x&lt;&lt;<span class="number">1</span>)</span><br><span class="line">fmt.Printf(<span class="string">"%08b\n"</span>, x&gt;&gt;<span class="number">1</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">34 6 34</span><br><span class="line">00100010</span><br><span class="line">00000110</span><br><span class="line">00100010</span><br><span class="line">00000010</span><br><span class="line">00100110</span><br><span class="line">00100100</span><br><span class="line">00100000</span><br><span class="line">1</span><br><span class="line">5</span><br><span class="line">01000100</span><br><span class="line">00010001</span><br></pre></td></tr></table></figure><p>å·¦ç§»è¿ç®—ç”¨é›¶å¡«å……å³è¾¹ç©ºç¼ºçš„ bit ä½ï¼Œæ— ç¬¦å·æ•°çš„å³ç§»è¿ç®—ä¹Ÿæ˜¯ç”¨ 0 å¡«å……å·¦è¾¹ç©ºç¼ºçš„ bit ä½ï¼Œä½†æ˜¯æœ‰ç¬¦å·æ•°çš„å³ç§»è¿ç®—ä¼šç”¨ç¬¦å·ä½çš„å€¼å¡«å……å·¦è¾¹ç©ºç¼ºçš„ bit ä½ã€‚</p><p>æµ®ç‚¹æ•°åˆ°æ•´æ•°çš„è½¬æ¢å°†ä¸¢å¤±ä»»ä½•å°æ•°éƒ¨åˆ†ï¼Œç„¶åå‘<strong>æ•°è½´é›¶æ–¹å‘</strong>æˆªæ–­ã€‚</p><p>é€šå¸¸<code>Printf</code>æ ¼å¼åŒ–å­—ç¬¦ä¸²åŒ…å«å¤šä¸ª<code>%</code>å‚æ•°æ—¶å°†ä¼šåŒ…å«å¯¹åº”ç›¸åŒæ•°é‡çš„é¢å¤–æ“ä½œæ•°ï¼Œä½†æ˜¯<code>%</code>ä¹‹åçš„<code>[1]</code>å‰¯è¯å‘Šè¯‰<code>Printf</code>å‡½æ•°å†æ¬¡ä½¿ç”¨ç¬¬ä¸€ä¸ªæ“ä½œæ•°ã€‚<code>%</code>å<br>çš„<code>#</code>å‰¯è¯å‘Šè¯‰<code>Printf</code>åœ¨ç”¨<code>%o</code>ã€<code>%x</code>æˆ–<code>%X</code>è¾“å‡ºæ—¶ç”Ÿæˆ<code>0</code>ã€<code>0x</code>æˆ–<code>0X</code>å‰ç¼€ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">o := <span class="number">0666</span></span><br><span class="line">fmt.Printf(<span class="string">"%d %[1]o %#[1]o\n"</span>, o)</span><br><span class="line">x := <span class="keyword">int64</span>(<span class="number">0xdeadbeef</span>)</span><br><span class="line">fmt.Printf(<span class="string">"%d %[1]x %#[1]x %#[1]X\n"</span>, x)</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">438 666 0666</span><br><span class="line">3735928559 deadbeef 0xdeadbeef 0XDEADBEEF</span><br></pre></td></tr></table></figure><p>å­—ç¬¦ä½¿ç”¨<code>%c</code>å‚æ•°æ‰“å°ï¼Œæˆ–è€…æ˜¯ç”¨<code>%q</code>å‚æ•°æ‰“å°å¸¦å•å¼•å·çš„å­—ç¬¦ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">ascii := <span class="string">'a'</span></span><br><span class="line">unicode := <span class="string">'å›½'</span></span><br><span class="line">newline := <span class="string">'\n'</span></span><br><span class="line">fmt.Printf(<span class="string">"%d %[1]c %[1]q\n"</span>, ascii)   <span class="comment">// "97 a 'a'"</span></span><br><span class="line">fmt.Printf(<span class="string">"%d %[1]c %[1]q\n"</span>, unicode) <span class="comment">// "22269 å›½ 'å›½'"</span></span><br><span class="line">fmt.Printf(<span class="string">"%d %[1]q\n"</span>, newline)       <span class="comment">// "10 '\n'"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">97 a <span class="string">'a'</span></span><br><span class="line">22269 å›½ <span class="string">'å›½'</span></span><br><span class="line">10 <span class="string">'\n'</span></span><br></pre></td></tr></table></figure><h2 id="æµ®ç‚¹æ•°"><a class="header-anchor" href="#æµ®ç‚¹æ•°">#</a>æµ®ç‚¹æ•°</h2><p>ä¸€ä¸ª<code>float32</code>ç±»å‹çš„æµ®ç‚¹æ•°å¯ä»¥æä¾›å¤§çº¦<code>6</code>ä¸ªåè¿›åˆ¶æ•°çš„ç²¾åº¦ï¼Œè€Œ<code>float64</code>åˆ™å¯ä»¥æä¾›çº¦<code>15</code>ä¸ªåè¿›åˆ¶æ•°çš„ç²¾åº¦ã€‚</p><p>å°æ•°ç‚¹å‰é¢æˆ–åé¢çš„æ•°å­—éƒ½å¯èƒ½è¢«çœç•¥ï¼Œä¾‹å¦‚<code>.707</code>æˆ–<code>1.</code>ã€‚å¾ˆå°æˆ–å¾ˆå¤§çš„æ•°æœ€å¥½ç”¨ç§‘å­¦è®¡æ•°æ³•ä¹¦å†™ï¼Œé€šè¿‡<code>e</code>æˆ–<code>E</code>æ¥æŒ‡å®šæŒ‡æ•°éƒ¨åˆ†ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Avogadro = <span class="number">6.02214129e23</span><span class="comment">// é˜¿ä¼ä¼½å¾·ç½—å¸¸æ•°</span></span><br><span class="line"><span class="keyword">const</span> Planck = <span class="number">6.62606957e-34</span><span class="comment">// æ™®æœ—å…‹å¸¸æ•°</span></span><br></pre></td></tr></table></figure><p>ç”¨<code>Printf</code>å‡½æ•°çš„<code>%g</code>å‚æ•°æ‰“å°æµ®ç‚¹æ•°ï¼Œå°†é‡‡ç”¨æ›´ç´§å‡‘çš„è¡¨ç¤ºå½¢å¼æ‰“å°ï¼Œå¹¶æä¾›è¶³å¤Ÿçš„ç²¾åº¦ï¼Œä½†æ˜¯å¯¹åº”è¡¨æ ¼çš„æ•°æ®ï¼Œä½¿ç”¨<code>%e</code>ï¼ˆå¸¦æŒ‡æ•°ï¼‰æˆ–<code>%f</code>çš„å½¢å¼æ‰“å°å¯èƒ½æ›´åˆé€‚ã€‚æ‰€æœ‰çš„è¿™ä¸‰ä¸ªæ‰“å°å½¢å¼éƒ½å¯ä»¥æŒ‡å®šæ‰“å°çš„å®½åº¦å’Œæ§åˆ¶æ‰“å°ç²¾åº¦ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"math"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">for</span> x := <span class="number">0</span>; x &lt; <span class="number">8</span>; x++ &#123;</span><br><span class="line">fmt.Printf(<span class="string">"x = %d e^x = %8.3f %8.3[2]e\n"</span>, x, math.Exp(<span class="keyword">float64</span>(x)))</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰“å°ç²¾åº¦æ˜¯å°æ•°ç‚¹åä¸‰ä¸ªå°æ•°ç²¾åº¦å’Œ<code>8</code>ä¸ªå­—ç¬¦å®½åº¦ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">x = 0 e^x =    1.000 1.000e+00</span><br><span class="line">x = 1 e^x =    2.718 2.718e+00</span><br><span class="line">x = 2 e^x =    7.389 7.389e+00</span><br><span class="line">x = 3 e^x =   20.086 2.009e+01</span><br><span class="line">x = 4 e^x =   54.598 5.460e+01</span><br><span class="line">x = 5 e^x =  148.413 1.484e+02</span><br><span class="line">x = 6 e^x =  403.429 4.034e+02</span><br><span class="line">x = 7 e^x = 1096.633 1.097e+03</span><br></pre></td></tr></table></figure><p><code>æ­£æ— ç©·å¤§</code>ï¼šè¡¨ç¤ºå¤ªå¤§æº¢å‡ºçš„æ•°å­—ã€‚<br><code>è´Ÿæ— ç©·å¤§</code>ï¼šè¡¨ç¤ºé™¤é›¶çš„ç»“æœã€‚<br><code>NAN</code>ï¼šéæ•°ï¼Œä¸€èˆ¬ç”¨äºè¡¨ç¤ºæ— æ•ˆçš„é™¤æ³•æ“ä½œç»“æœ<code>0/0</code>æˆ–<code>Sqrt(-1)</code>ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> z <span class="keyword">float64</span></span><br><span class="line">fmt.Println(z, -z, <span class="number">1</span>/z, <span class="number">-1</span>/z, z/z)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">0 -0 +Inf -Inf NaN</span><br></pre></td></tr></table></figure><p>å‡½æ•°<code>math.IsNaN</code>ç”¨äºæµ‹è¯•ä¸€ä¸ªæ•°æ˜¯å¦æ˜¯éæ•°<code>NaN</code>ã€‚</p><p>æµ‹è¯•ä¸€ä¸ªç»“æœæ˜¯å¦æ˜¯éæ•°<code>NaN</code>åˆ™æ˜¯å……æ»¡é£é™©çš„ï¼Œå› ä¸º<code>NaN</code>å’Œä»»ä½•æ•°éƒ½æ˜¯ä¸ç›¸ç­‰çš„ã€‚<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p><p>å¦‚æœä¸€ä¸ªå‡½æ•°è¿”å›çš„æµ®ç‚¹æ•°ç»“æœå¯èƒ½å¤±è´¥ï¼Œæœ€å¥½çš„åšæ³•æ˜¯ç”¨å•ç‹¬çš„æ ‡å¿—æŠ¥å‘Šå¤±è´¥ï¼Œåƒè¿™æ ·ï¼š<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup></p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">compute</span><span class="params">()</span> <span class="params">(value <span class="keyword">float64</span>, ok <span class="keyword">bool</span>)</span></span> &#123;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">    <span class="keyword">if</span> failed &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>, <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line">    <span class="keyword">return</span> result, <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Copyright Â© 2016 Alan A. A. Donovan &amp; Brian W. Kernighan.</span></span><br><span class="line"><span class="comment">// License: https://creativecommons.org/licenses/by-nc-sa/4.0/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// See page 58.</span></span><br><span class="line"><span class="comment">//!+</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Surface computes an SVG rendering of a 3-D surface function.</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"math"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">width, height = <span class="number">600</span>, <span class="number">320</span>            <span class="comment">// canvas size in pixels</span></span><br><span class="line">cells         = <span class="number">100</span>                 <span class="comment">// number of grid cells</span></span><br><span class="line">xyrange       = <span class="number">30.0</span>                <span class="comment">// axis ranges (-xyrange..+xyrange)</span></span><br><span class="line">xyscale       = width / <span class="number">2</span> / xyrange <span class="comment">// pixels per x or y unit</span></span><br><span class="line">zscale        = height * <span class="number">0.4</span>        <span class="comment">// pixels per z unit</span></span><br><span class="line">angle         = math.Pi / <span class="number">6</span>         <span class="comment">// angle of x, y axes (=30Â°)</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> sin30, cos30 = math.Sin(angle), math.Cos(angle) <span class="comment">// sin(30Â°), cos(30Â°)</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">fmt.Printf(<span class="string">"&lt;svg xmlns='http://www.w3.org/2000/svg' "</span>+</span><br><span class="line"><span class="string">"style='stroke: grey; fill: white; stroke-width: 0.7' "</span>+</span><br><span class="line"><span class="string">"width='%d' height='%d'&gt;"</span>, width, height)</span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; cells; i++ &#123;</span><br><span class="line"><span class="keyword">for</span> j := <span class="number">0</span>; j &lt; cells; j++ &#123;</span><br><span class="line">ax, ay := corner(i+<span class="number">1</span>, j)</span><br><span class="line">bx, by := corner(i, j)</span><br><span class="line">cx, cy := corner(i, j+<span class="number">1</span>)</span><br><span class="line">dx, dy := corner(i+<span class="number">1</span>, j+<span class="number">1</span>)</span><br><span class="line">fmt.Printf(<span class="string">"&lt;polygon points='%g,%g %g,%g %g,%g %g,%g'/&gt;\n"</span>,</span><br><span class="line">ax, ay, bx, by, cx, cy, dx, dy)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(<span class="string">"&lt;/svg&gt;"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">corner</span><span class="params">(i, j <span class="keyword">int</span>)</span> <span class="params">(<span class="keyword">float64</span>, <span class="keyword">float64</span>)</span></span> &#123;</span><br><span class="line"><span class="comment">// Find point (x,y) at corner of cell (i,j).</span></span><br><span class="line">x := xyrange * (<span class="keyword">float64</span>(i)/cells - <span class="number">0.5</span>)</span><br><span class="line">y := xyrange * (<span class="keyword">float64</span>(j)/cells - <span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Compute surface height z.</span></span><br><span class="line">z := f(x, y)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Project (x,y,z) isometrically onto 2-D SVG canvas (sx,sy).</span></span><br><span class="line">sx := width/<span class="number">2</span> + (x-y)*cos30*xyscale</span><br><span class="line">sy := height/<span class="number">2</span> + (x+y)*sin30*xyscale - z*zscale</span><br><span class="line"><span class="keyword">return</span> sx, sy</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f</span><span class="params">(x, y <span class="keyword">float64</span>)</span> <span class="title">float64</span></span> &#123;</span><br><span class="line">r := math.Hypot(x, y) <span class="comment">// distance from (0,0)</span></span><br><span class="line"><span class="keyword">return</span> math.Sin(r) / r</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//!-</span></span><br></pre></td></tr></table></figure><center><p><img src="//onns.xyz/blog/image/20210411-3.6.svg" alt="æ¸²æŸ“ç»“æœå›¾"></p></center><p>94/483</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>åœ¨æµ®ç‚¹æ•°ä¸­ï¼Œ<code>NaN</code>ã€æ­£æ— ç©·å¤§å’Œè´Ÿæ— ç©·å¤§éƒ½ä¸æ˜¯å”¯ä¸€ çš„ï¼Œæ¯ä¸ªéƒ½æœ‰éå¸¸å¤šç§çš„<code>bit</code>æ¨¡å¼è¡¨ç¤ºã€‚ <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li><li id="fn2" class="footnote-item"><p>ä¼¼æ‡‚éæ‡‚ï¼Œæœ‰æœºä¼šå†è¡¥è¿™ä¸ªçš„ä¾‹å­å§ï¼ <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> macos </tag>
            
            <tag> golang </tag>
            
            <tag> go </tag>
            
            <tag> golang note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šå¿«ä¹çš„Linuxå‘½ä»¤è¡Œã€‹ç¬”è®°ï¼ˆ19ï¼‰</title>
      <link href="/blog/2021/04/11/the-linux-command-line-note-19/"/>
      <url>/blog/2021/04/11/the-linux-command-line-note-19/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹"><a class="header-anchor" href="#ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹">#</a>ã€Šå¿«ä¹çš„ Linux å‘½ä»¤è¡Œã€‹</h1><a id="more"></a><h2 id="grep"><a class="header-anchor" href="#grep">#</a>grep</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep [options] regex [file...]</span><br></pre></td></tr></table></figure><p>é€‰é¡¹åˆ—è¡¨ï¼š</p><table><thead><tr><th style="text-align:left">é€‰é¡¹</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left"><code>-i</code></td><td style="text-align:left">å¿½ç•¥å¤§å°å†™ï¼Œä¸ä¼šåŒºåˆ†å¤§å°å†™å­—ç¬¦ã€‚ä¹Ÿå¯ç”¨<code>--ignore-case</code>æ¥æŒ‡å®šã€‚</td></tr><tr><td style="text-align:left"><code>-v</code></td><td style="text-align:left">ä¸åŒ¹é…ã€‚é€šå¸¸ï¼Œ<code>grep</code>ç¨‹åºä¼šæ‰“å°åŒ…å«åŒ¹é…é¡¹çš„æ–‡æœ¬è¡Œã€‚è¿™ä¸ªé€‰é¡¹å¯¼è‡´<code>grep</code>ç¨‹åºåªä¼šæ‰“å°ä¸åŒ…å«åŒ¹é…é¡¹çš„æ–‡æœ¬è¡Œã€‚ä¹Ÿå¯ç”¨<code>--invert-match</code>æ¥æŒ‡å®šã€‚</td></tr><tr><td style="text-align:left"><code>-c</code></td><td style="text-align:left">æ‰“å°åŒ¹é…çš„æ•°é‡ï¼ˆæˆ–è€…æ˜¯ä¸åŒ¹é…çš„æ•°ç›®ï¼Œè‹¥æŒ‡å®šäº†<code>-v</code>é€‰é¡¹ï¼‰ï¼Œè€Œä¸æ˜¯æ–‡æœ¬è¡Œæœ¬èº«ã€‚ä¹Ÿå¯ç”¨<code>--count</code>é€‰é¡¹æ¥æŒ‡å®šã€‚</td></tr><tr><td style="text-align:left"><code>-l</code></td><td style="text-align:left">æ‰“å°åŒ…å«åŒ¹é…é¡¹çš„æ–‡ä»¶åï¼Œè€Œä¸æ˜¯æ–‡æœ¬è¡Œæœ¬èº«ï¼Œä¹Ÿå¯ç”¨<code>--files-with-matches</code>é€‰é¡¹æ¥æŒ‡å®šã€‚</td></tr><tr><td style="text-align:left"><code>-L</code></td><td style="text-align:left">ç›¸ä¼¼äº<code>-l</code>é€‰é¡¹ï¼Œä½†æ˜¯åªæ˜¯æ‰“å°ä¸åŒ…å«åŒ¹é…é¡¹çš„æ–‡ä»¶åã€‚ä¹Ÿå¯ç”¨<code>--files-without-match</code>æ¥æŒ‡å®šã€‚</td></tr><tr><td style="text-align:left"><code>-n</code></td><td style="text-align:left">åœ¨æ¯ä¸ªåŒ¹é…è¡Œä¹‹å‰æ‰“å°å‡ºå…¶ä½äºæ–‡ä»¶ä¸­çš„ç›¸åº”è¡Œå·ã€‚ä¹Ÿå¯ç”¨<code>--line-number</code>é€‰é¡¹æ¥æŒ‡å®šã€‚</td></tr><tr><td style="text-align:left"><code>-h</code></td><td style="text-align:left">åº”ç”¨äºå¤šæ–‡ä»¶æœç´¢ï¼Œä¸è¾“å‡ºæ–‡ä»¶åã€‚ä¹Ÿå¯ç”¨<code>--no-filename</code>é€‰é¡¹æ¥æŒ‡å®šã€‚</td></tr></tbody></table><h3 id="æµ‹è¯•"><a class="header-anchor" href="#æµ‹è¯•">#</a>æµ‹è¯•</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ ls /bin &gt; dirlist-bin.txt</span><br><span class="line">$ ls /usr/bin &gt; dirlist-usr-bin.txt</span><br><span class="line">$ ls /sbin &gt; dirlist-sbin.txt</span><br><span class="line">$ ls /usr/sbin &gt; dirlist-usr-sbin.txt</span><br><span class="line">$ ls dirlist*.txt</span><br><span class="line">dirlist-bin.txt  dirlist-sbin.txt  dirlist-usr-bin.txt  dirlist-usr-sbin.txt</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æœç´¢ bzip</span></span><br><span class="line">$ grep bzip dirlist*.txt</span><br><span class="line">dirlist-bin.txt:bzip2</span><br><span class="line">dirlist-bin.txt:bzip2recover</span><br><span class="line"></span><br><span class="line"><span class="comment"># æœç´¢ bzip å¯¹åº”çš„æ–‡ä»¶</span></span><br><span class="line">$ grep -l bzip dirlist*.txt</span><br><span class="line">dirlist-bin.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># æœç´¢ä¸åŒ…å« bzip çš„æ–‡ä»¶</span></span><br><span class="line">$ grep -L bzip dirlist*.txt</span><br><span class="line">dirlist-sbin.txt</span><br><span class="line">dirlist-usr-bin.txt</span><br><span class="line">dirlist-usr-sbin.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ†ç‚¹ . åŒ¹é…ä»»æ„å­—ç¬¦</span></span><br><span class="line">$ grep -h <span class="string">'.zip'</span> dirlist*.txt</span><br><span class="line">bunzip2</span><br><span class="line">bzip2</span><br><span class="line">bzip2recover</span><br><span class="line">gunzip</span><br><span class="line">gzip</span><br><span class="line">funzip</span><br><span class="line">gpg-zip</span><br><span class="line">mzip</span><br><span class="line">preunzip</span><br><span class="line">prezip</span><br><span class="line">prezip-bin</span><br><span class="line">unzip</span><br><span class="line">unzipsfx</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ’å…¥ç¬¦åˆ ^ é”šç‚¹å¼€å¤´</span></span><br><span class="line">$ grep -h <span class="string">'^zip'</span> dirlist*.txt</span><br><span class="line">zip</span><br><span class="line">zipcloak</span><br><span class="line">zipdetails</span><br><span class="line">zipgrep</span><br><span class="line">zipinfo</span><br><span class="line">zipnote</span><br><span class="line">zipsplit</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¾å…ƒç¬¦åˆ $ é”šç‚¹ç»“å°¾</span></span><br><span class="line">$ grep -h <span class="string">'zip$'</span> dirlist*.txt</span><br><span class="line">gunzip</span><br><span class="line">gzip</span><br><span class="line">funzip</span><br><span class="line">gpg-zip</span><br><span class="line">mzip</span><br><span class="line">preunzip</span><br><span class="line">prezip</span><br><span class="line">unzip</span><br><span class="line">zip</span><br><span class="line"></span><br><span class="line">$ grep -h <span class="string">'^zip$'</span> dirlist*.txt</span><br><span class="line">zip</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¬¬ä¸‰ä¸ªå­—æ¯æ˜¯j ç¬¬äº”ä¸ªå­—æ¯æ˜¯r ä¸€å…±äº”ä¸ªå­—æ¯</span></span><br><span class="line">grep -i <span class="string">'^..j.r$'</span> /usr/share/dict/words</span><br><span class="line">Major</span><br><span class="line">major</span><br></pre></td></tr></table></figure><p><code>/usr/share/dict/</code>ç›®å½•ä¸‹æœ‰ä¸ªè‹±æ–‡å­—å…¸ã€‚</p><p>ä¸­æ‹¬å·è¡¨è¾¾å¼ä¸­ä½¿ç”¨å…ƒå­—ç¬¦ï¼Œæ’å…¥å­—ç¬¦<code>^</code>è¢«ç”¨æ¥è¡¨ç¤ºå¦å®šï¼Œè¿å­—ç¬¦å­—ç¬¦<code>-</code>è¢«ç”¨æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦èŒƒå›´ã€‚</p><p>ä¸€ä¸ªå¦å®šçš„å­—ç¬¦é›†ä»ç„¶åœ¨ç»™å®šä½ç½®è¦æ±‚ä¸€ä¸ªå­—ç¬¦ï¼Œä½†æ˜¯è¿™ä¸ªå­—ç¬¦å¿…é¡»ä¸æ˜¯å¦å®šå­—ç¬¦é›†çš„æˆå‘˜ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ grep -h <span class="string">'.zip'</span> dirlist*.txt | wc -l</span><br><span class="line">13</span><br><span class="line">$ grep -h <span class="string">'[bg]zip'</span> dirlist*.txt | wc -l</span><br><span class="line">3</span><br><span class="line">$ grep -h <span class="string">'[^bg]zip'</span> dirlist*.txt | wc -l</span><br><span class="line">10</span><br><span class="line">$ grep -h <span class="string">'[^bg]zip'</span> dirlist*.txt</span><br><span class="line">bunzip2</span><br><span class="line">gunzip</span><br><span class="line">funzip</span><br><span class="line">gpg-zip</span><br><span class="line">mzip</span><br><span class="line">preunzip</span><br><span class="line">prezip</span><br><span class="line">prezip-bin</span><br><span class="line">unzip</span><br><span class="line">unzipsfx</span><br><span class="line"><span class="comment"># å¯ä»¥çœ‹åˆ° zip è¿™ä¸ªæ–‡ä»¶æ²¡åœ¨é‡Œé¢ï¼Œå› ä¸ºå‰é¢è¦æœ‰ä¸€ä¸ªå­—ç¬¦ï¼Œä½†è¿™ä¸ªå­—ç¬¦ä¸èƒ½æ˜¯ b æˆ– g</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">$ grep -h <span class="string">'^[ABCDEFGHIJKLMNOPQRSTUVWXZY]'</span> dirlist*.txt</span><br><span class="line">GET</span><br><span class="line">HEAD</span><br><span class="line">POST</span><br><span class="line">X</span><br><span class="line">X11</span><br><span class="line">Xephyr</span><br><span class="line">Xorg</span><br><span class="line">Xwayland</span><br><span class="line">ModemManager</span><br><span class="line">NetworkManager</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç­‰ä»·äºğŸ‘‡</span></span><br><span class="line">$ grep -h <span class="string">'^[A-Z]'</span> dirlist*.txt</span><br><span class="line">GET</span><br><span class="line">HEAD</span><br><span class="line">POST</span><br><span class="line">X</span><br><span class="line">X11</span><br><span class="line">Xephyr</span><br><span class="line">Xorg</span><br><span class="line">Xwayland</span><br><span class="line">ModemManager</span><br><span class="line">NetworkManager</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯ä»¥åŒ¹é…å¤šä¸ªèŒƒå›´</span></span><br><span class="line">$ grep -h <span class="string">'^[A-Za-z0-9]'</span> dirlist*.txt | wc -l</span><br><span class="line">2344</span><br></pre></td></tr></table></figure><p>å¦‚æœæ­£åˆ™è¡¨è¾¾å¼ä¸­éœ€è¦åŒ…å«è¿å­—ç¬¦<code>-</code>ï¼Œè®©å®ƒæˆä¸ºè¡¨è¾¾å¼çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¼šåŒ¹é…åŒ…å«ä¸€ä¸ªè¿å­—ç¬¦â€œ-â€ï¼Œæˆ–ä¸€ä¸ªå¤§å†™å­—æ¯â€œAâ€ï¼Œæˆ–ä¸€ä¸ªå¤§å†™å­—æ¯â€œZâ€çš„æ–‡ä»¶åã€‚</span></span><br><span class="line">grep -h <span class="string">'[-AZ]'</span> dirlist*.txt</span><br></pre></td></tr></table></figure><p><code>POSIX</code>æŠŠæ­£åˆ™è¡¨è¾¾å¼çš„å®ç°åˆ†æˆäº†ä¸¤ç±»ï¼š<code>åŸºæœ¬æ­£åˆ™è¡¨è¾¾å¼</code>ï¼ˆBREï¼‰å’Œ<code>æ‰©å±•çš„æ­£åˆ™è¡¨è¾¾å¼</code>ï¼ˆEREï¼‰ã€‚</p><p><code>BRE</code>çš„å…ƒç´ é›†åˆï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">^ $ . [ ] *</span><br></pre></td></tr></table></figure><p><code>ERE</code>é¢å¤–æ·»åŠ çš„å…ƒå­—ç¬¦ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">( ) &#123; &#125; ? + |</span><br></pre></td></tr></table></figure><p><code>|</code>ä»£è¡¨äº¤æ›¿ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">"AAA"</span> | grep -E <span class="string">'AAA|BBB'</span></span><br><span class="line">AAA</span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">"BBB"</span> | grep -E <span class="string">'AAA|BBB'</span></span><br><span class="line">BBB</span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">"CCC"</span> | grep -E <span class="string">'AAA|BBB'</span></span><br></pre></td></tr></table></figure><p><code>?</code>åŒ¹é…é›¶ä¸ªæˆ–ä¸€ä¸ªå…ƒç´ ï¼Œè¡¨ç¤ºå‰é¢çš„å­—ç¬¦å¯æœ‰å¯æ— ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">"(555) 123-4567"</span> | grep -E <span class="string">'^\(?[0-9][0-9][0-9]\)? [0-9][0-9][0-9]-[0-9][0-9][0-9][0-9]$'</span></span><br><span class="line">(555) 123-4567</span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">"555 123-4567"</span> | grep -E <span class="string">'^\(?[0-9][0-9][0-9]\)? [0-9][0-9][0-9]-[0-9][0-9][0-9][0-9]$'</span></span><br><span class="line">555 123-4567</span><br></pre></td></tr></table></figure><p><code>*</code>åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªå…ƒç´ ã€‚<br><code>+</code>åŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ã€‚<br><code>{}</code>åŒ¹é…ç‰¹å®šä¸ªæ•°çš„å…ƒç´ ï¼š</p><table><thead><tr><th style="text-align:left">é€‰é¡¹</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left"><code>n</code></td><td style="text-align:left">åŒ¹é…å‰é¢çš„å…ƒç´ ï¼Œå¦‚æœå®ƒç¡®åˆ‡åœ°å‡ºç°äº†<code>n</code>æ¬¡</td></tr><tr><td style="text-align:left"><code>n,m</code></td><td style="text-align:left">åŒ¹é…å‰é¢çš„å…ƒç´ ï¼Œå¦‚æœå®ƒè‡³å°‘å‡ºç°äº†<code>n</code>æ¬¡ï¼Œä½†æ˜¯ä¸å¤šäº<code>m</code>æ¬¡</td></tr><tr><td style="text-align:left"><code>n,</code></td><td style="text-align:left">åŒ¹é…å‰é¢çš„å…ƒç´ ï¼Œå¦‚æœå®ƒå‡ºç°äº†<code>n</code>æ¬¡æˆ–å¤šäº<code>n</code>æ¬¡</td></tr><tr><td style="text-align:left"><code>,m</code></td><td style="text-align:left">åŒ¹é…å‰é¢çš„å…ƒç´ ï¼Œå¦‚æœå®ƒå‡ºç°çš„æ¬¡æ•°ä¸å¤šäº<code>m</code>æ¬¡</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">"(555) 123-4567"</span> | grep -E <span class="string">'^\(?[0-9]&#123;3&#125;\)? [0-9]&#123;3&#125;-[0-9]&#123;4&#125;$'</span></span><br><span class="line">(555) 123-4567</span><br></pre></td></tr></table></figure><p>ç”Ÿæˆç”µè¯å·ç æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;1..10&#125;; <span class="keyword">do</span> <span class="built_in">echo</span> <span class="string">"(<span class="variable">$&#123;RANDOM:0:3&#125;</span>) <span class="variable">$&#123;RANDOM:0:3&#125;</span>-<span class="variable">$&#123;RANDOM:0:4&#125;</span>"</span> &gt;&gt; phonelist.txt; <span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>æŸ¥æ‰¾æœ‰é—®é¢˜çš„é¡¹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ cat phonelist.txt</span><br><span class="line">(156) 891-573</span><br><span class="line">(551) 310-2301</span><br><span class="line">(197) 501-1688</span><br><span class="line">(108) 737-3818</span><br><span class="line">(822) 225-1332</span><br><span class="line">(13) 200-1923</span><br><span class="line">(137) 105-1455</span><br><span class="line">(391) 180-2722</span><br><span class="line">(317) 546-2211</span><br><span class="line">(172) 279-9606</span><br><span class="line">$ grep -Ev <span class="string">'^\([0-9]&#123;3&#125;\) [0-9]&#123;3&#125;-[0-9]&#123;4&#125;$'</span> phonelist.txt</span><br><span class="line">(156) 891-573</span><br><span class="line">(13) 200-1923</span><br></pre></td></tr></table></figure><p>273/505</p>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> shell </tag>
            
            <tag> bash </tag>
            
            <tag> shell note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŠGoè¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹ç¬”è®°ï¼ˆ5ï¼‰</title>
      <link href="/blog/2021/04/09/the-go-programming-language-note-5/"/>
      <url>/blog/2021/04/09/the-go-programming-language-note-5/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šgo-è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹"><a class="header-anchor" href="#ã€Šgo-è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹">#</a>ã€ŠGo è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹</h1><a id="more"></a><h1 id="ç¨‹åºç»“æ„"><a class="header-anchor" href="#ç¨‹åºç»“æ„">#</a>ç¨‹åºç»“æ„</h1><h2 id="åŒ…å’Œæ–‡ä»¶"><a class="header-anchor" href="#åŒ…å’Œæ–‡ä»¶">#</a>åŒ…å’Œæ–‡ä»¶</h2><p>åŒ…çº§åˆ«çš„åå­—ï¼Œä¾‹å¦‚åœ¨ä¸€ä¸ªæ–‡ä»¶å£°æ˜çš„ç±»å‹å’Œå¸¸é‡ï¼Œåœ¨åŒä¸€ä¸ªåŒ…çš„å…¶ä»–æºæ–‡ä»¶ä¹Ÿæ˜¯å¯ä»¥ç›´æ¥è®¿é—®çš„ï¼Œå°±å¥½åƒæ‰€æœ‰ä»£ç éƒ½åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸€æ ·ã€‚</p><p>åŒ…çš„åˆå§‹åŒ–é¦–å…ˆæ˜¯è§£å†³åŒ…çº§å˜é‡çš„ä¾èµ–é¡ºåºï¼Œç„¶åæŒ‰ç…§åŒ…çº§å˜é‡å£°æ˜å‡ºç°çš„é¡ºåºä¾æ¬¡åˆå§‹åŒ–ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = b + c <span class="comment">// a ç¬¬ä¸‰ä¸ªåˆå§‹åŒ–, ä¸º 3</span></span><br><span class="line"><span class="keyword">var</span> b = f() <span class="comment">// b ç¬¬äºŒä¸ªåˆå§‹åŒ–, ä¸º 2, é€šè¿‡è°ƒç”¨ f (ä¾èµ–c)</span></span><br><span class="line"><span class="keyword">var</span> c = <span class="number">1</span> <span class="comment">// c ç¬¬ä¸€ä¸ªåˆå§‹åŒ–, ä¸º 1</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f</span><span class="params">()</span> <span class="title">int</span></span> &#123; <span class="keyword">return</span> c + <span class="number">1</span> &#125;</span><br></pre></td></tr></table></figure><p><code>Go</code>è¯­è¨€çš„ä¹ æƒ¯æ˜¯åœ¨<code>if</code>ä¸­å¤„ç†é”™è¯¯ç„¶åç›´æ¥è¿”å›ï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿æ­£å¸¸æ‰§è¡Œçš„è¯­å¥ä¸éœ€è¦ä»£ç ç¼©è¿›ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> cwd <span class="keyword">string</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line">cwd, err := os.Getwd() <span class="comment">// <span class="doctag">NOTE:</span> wrong!</span></span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">"os.Getwd failed: %v"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">log.Printf(<span class="string">"Working directory = %s"</span>, cwd)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢æ˜¯é”™è¯¯çš„å†™æ³•ï¼Œä¸ä¼šæ›´æ–°å…¨å±€çš„<code>cwd</code>å˜é‡ï¼Œè€Œä¸”å±€éƒ¨çš„<code>cwd</code>å˜é‡è¢«<code>log.Printf</code>è°ƒç”¨ä¹Ÿä½¿å¾—å®šä¹‰å˜é‡æœªä½¿ç”¨å¤±æ•ˆäº†ã€‚æ­£ç¡®åšæ³•ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> cwd <span class="keyword">string</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">init</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> err error</span><br><span class="line">cwd, err = os.Getwd() <span class="comment">// é¿å…ä½¿ç”¨ := çš„ç®€çŸ­å£°æ˜æ–¹å¼</span></span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">log.Fatalf(<span class="string">"os.Getwd failed: %v"</span>, err)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> macos </tag>
            
            <tag> golang </tag>
            
            <tag> go </tag>
            
            <tag> golang note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šå¿«ä¹çš„Linuxå‘½ä»¤è¡Œã€‹ç¬”è®°ï¼ˆ18ï¼‰</title>
      <link href="/blog/2021/04/09/the-linux-command-line-note-18/"/>
      <url>/blog/2021/04/09/the-linux-command-line-note-18/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹"><a class="header-anchor" href="#ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹">#</a>ã€Šå¿«ä¹çš„ Linux å‘½ä»¤è¡Œã€‹</h1><a id="more"></a><h2 id="tar"><a class="header-anchor" href="#tar">#</a>tar</h2><p>å› ä¸ºæˆ‘ç°åœ¨ç”¨çš„å‘½ä»¤éƒ½æ˜¯<code>tar</code>ï¼Œåœ¨å½’æ¡£çš„æ—¶å€™ä¼šè‡ªåŠ¨è°ƒç”¨<code>gzip</code>æˆ–è€…<code>bzip2</code>ï¼Œæ‰€ä»¥æˆ‘å°±ä¸çœ‹è¿™ä¿©å‘½ä»¤äº†ã€‚</p><p>é™¤éä½ æ˜¯è¶…çº§ç”¨æˆ·ï¼Œè¦ä¸ç„¶ä»å½’æ¡£æ–‡ä»¶ä¸­æŠ½å–çš„æ–‡ä»¶å’Œç›®å½•çš„æ‰€æœ‰æƒ<strong>ç”±æ‰§è¡Œæ­¤å¤åŸæ“ä½œçš„ç”¨æˆ·æ‰€æ‹¥æœ‰</strong>ï¼Œè€Œä¸å±äºåŸå§‹æ‰€æœ‰è€…ã€‚</p><p><code>tar</code>å‘½ä»¤é»˜è®¤æƒ…å†µä¸‹ï¼Œè·¯å¾„åæ˜¯ç›¸å¯¹çš„ï¼Œè€Œä¸æ˜¯ç»å¯¹è·¯å¾„ã€‚</p><p>é€šè¿‡ç»™å‘½ä»¤æ·»åŠ æœ«å°¾çš„è·¯å¾„åï¼Œ<code>tar</code>å‘½ä»¤å°±åªä¼šæ¢å¤æŒ‡å®šçš„æ–‡ä»¶ã€‚å¯ä»¥æŒ‡å®šå¤šä¸ªè·¯å¾„åã€‚æ³¨æ„è·¯å¾„åå¿…é¡»æ˜¯å®Œå…¨çš„ï¼Œç²¾å‡†çš„ç›¸å¯¹è·¯å¾„åï¼Œå°±å¦‚å­˜å‚¨åœ¨å½’æ¡£æ–‡ä»¶ä¸­çš„ä¸€æ ·ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar xf archive.tar pathname</span><br></pre></td></tr></table></figure><p><code>tar</code>å‘½ä»¤ç»å¸¸ç»“åˆ<code>find</code>å‘½ä»¤ä¸€èµ·æ¥åˆ¶ä½œå½’æ¡£æ–‡ä»¶ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find playground -name <span class="string">'file-A'</span> -<span class="built_in">exec</span> tar rf playground.tar <span class="string">'&#123;&#125;'</span> <span class="string">'+'</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">find playground -name <span class="string">'file-A'</span> | tar cf - --files-from=- | gzip &gt; playground.tgz</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç­‰ä»·äº</span></span><br><span class="line">find playground -name <span class="string">'file-A'</span> | tar czf playground.tgz -T -</span><br></pre></td></tr></table></figure><p>å¦‚æœæŒ‡å®šäº†æ–‡ä»¶å<code>-</code>ï¼Œåˆ™å…¶è¢«çœ‹ä½œæ˜¯æ ‡å‡†è¾“å…¥æˆ–è¾“å‡ºã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh onns@remote-sys <span class="string">'tar cf - Documents'</span> | tar xf -</span><br></pre></td></tr></table></figure><p><code>ssh</code>å…è®¸æˆ‘ä»¬åœ¨è¿œç¨‹è”ç½‘çš„è®¡ç®—æœºä¸Šæ‰§è¡Œç¨‹åºï¼Œå¹¶ä¸”åœ¨æœ¬åœ°ç³»ç»Ÿä¸­çœ‹åˆ°æ‰§è¡Œç»“æœã€‚</p><p>æœ¬ä¹¦è¿‡åŠï¼ˆ250/505ï¼‰</p>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> shell </tag>
            
            <tag> bash </tag>
            
            <tag> shell note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šå¿«ä¹çš„Linuxå‘½ä»¤è¡Œã€‹ç¬”è®°ï¼ˆ17ï¼‰</title>
      <link href="/blog/2021/04/08/the-linux-command-line-note-17/"/>
      <url>/blog/2021/04/08/the-linux-command-line-note-17/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹"><a class="header-anchor" href="#ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹">#</a>ã€Šå¿«ä¹çš„ Linux å‘½ä»¤è¡Œã€‹</h1><a id="more"></a><h2 id="find"><a class="header-anchor" href="#find">#</a>find</h2><p><code>find</code>å‘½ä»¤æ¥æ”¶ä¸€ä¸ªæˆ–å¤šä¸ªç›®å½•åæ¥æ‰§è¡Œæœç´¢ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ find Documents/ | wc -l</span><br><span class="line">17905</span><br></pre></td></tr></table></figure><p><code>-type d</code>é™åˆ¶äº†åªæœç´¢ç›®å½•ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ find Documents/ -<span class="built_in">type</span> d | wc -l</span><br><span class="line">1741</span><br></pre></td></tr></table></figure><p><code>find</code>å‘½ä»¤æ”¯æŒçš„å¸¸è§æ–‡ä»¶ç±»å‹æµ‹è¯•æ¡ä»¶ï¼š</p><table><thead><tr><th style="text-align:left">æ–‡ä»¶ç±»å‹</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left"><code>b</code></td><td style="text-align:left">å—ç‰¹æ®Šè®¾å¤‡æ–‡ä»¶</td></tr><tr><td style="text-align:left"><code>c</code></td><td style="text-align:left">å­—ç¬¦ç‰¹æ®Šè®¾å¤‡æ–‡ä»¶</td></tr><tr><td style="text-align:left"><code>d</code></td><td style="text-align:left">ç›®å½•</td></tr><tr><td style="text-align:left"><code>f</code></td><td style="text-align:left">æ™®é€šæ–‡ä»¶</td></tr><tr><td style="text-align:left"><code>l</code></td><td style="text-align:left">ç¬¦å·é“¾æ¥</td></tr></tbody></table><p><code>-name</code>å‚æ•°åé¢è·Ÿé€šé…ç¬¦æ¥æ ¹æ®æ–‡ä»¶åæŸ¥æ‰¾ï¼Œç”¨<code>åŒå¼•å·</code>å¼•èµ·æ¥ï¼Œä»è€Œé˜»æ­¢<code>shell</code>å±•å¼€è·¯å¾„åã€‚</p><p><code>-size +1M</code>ä»£è¡¨æ–‡ä»¶å¤§å°å¤§äº<code>1M</code>çš„æ–‡ä»¶ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ find Documents/ -<span class="built_in">type</span> f -name <span class="string">"*.png"</span> | wc -l</span><br><span class="line">512</span><br><span class="line">$ find Documents/ -<span class="built_in">type</span> f -name <span class="string">"*.png"</span> -size +1M | wc -l</span><br><span class="line">55</span><br></pre></td></tr></table></figure><p><code>-size</code>çš„å¸¸è§å•ä½ï¼š</p><table><thead><tr><th style="text-align:left">å­—ç¬¦</th><th style="text-align:left">å•ä½</th></tr></thead><tbody><tr><td style="text-align:left"><code>b</code></td><td style="text-align:left"><code>512</code>ä¸ªå­—èŠ‚å—<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></td></tr><tr><td style="text-align:left"><code>c</code></td><td style="text-align:left">å­—èŠ‚</td></tr><tr><td style="text-align:left"><code>w</code></td><td style="text-align:left">ä¸¤ä¸ªå­—èŠ‚çš„å­—</td></tr><tr><td style="text-align:left"><code>k</code></td><td style="text-align:left">åƒå­—èŠ‚ï¼ˆ<code>1024</code>ä¸ªå­—èŠ‚å•ä½ï¼‰</td></tr><tr><td style="text-align:left"><code>M</code></td><td style="text-align:left">å…†å­—èŠ‚ï¼ˆ<code>1048576</code>ä¸ªå­—èŠ‚å•ä½ï¼‰</td></tr><tr><td style="text-align:left"><code>G</code></td><td style="text-align:left">åƒå…†å­—èŠ‚ï¼ˆ<code>1073741824</code>ä¸ªå­—èŠ‚å•ä½ï¼‰</td></tr></tbody></table><table><thead><tr><th style="text-align:left">æµ‹è¯•æ¡ä»¶</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left"><code>-cmin n</code></td><td style="text-align:left">åŒ¹é…å†…å®¹æˆ–å±æ€§<strong>æœ€åä¿®æ”¹æ—¶é—´</strong>æ­£å¥½åœ¨<code>n</code>åˆ†é’Ÿä¹‹å‰çš„æ–‡ä»¶æˆ–ç›®å½•ï¼ŒæŒ‡å®šå°‘äº<code>n</code>åˆ†é’Ÿä¹‹å‰ï¼Œä½¿ç”¨<code>-n</code>ï¼ŒæŒ‡å®šå¤šäº<code>n</code>åˆ†é’Ÿä¹‹å‰ï¼Œä½¿ç”¨<code>+n</code></td></tr><tr><td style="text-align:left"><code>-cnewer file</code></td><td style="text-align:left">åŒ¹é…å†…å®¹æˆ–å±æ€§<strong>æœ€åä¿®æ”¹æ—¶é—´</strong>æ™šäº<code>file</code>çš„æ–‡ä»¶æˆ–ç›®å½•</td></tr><tr><td style="text-align:left"><code>-ctime n</code></td><td style="text-align:left">åŒ¹é…å†…å®¹å’Œå±æ€§<strong>æœ€åä¿®æ”¹æ—¶é—´</strong>åœ¨<code>n*24</code>å°æ—¶ä¹‹å‰çš„æ–‡ä»¶å’Œç›®å½•</td></tr><tr><td style="text-align:left"><code>-empty</code></td><td style="text-align:left">åŒ¹é…<strong>ç©ºæ–‡ä»¶å’Œç›®å½•</strong></td></tr><tr><td style="text-align:left"><code>-group name</code></td><td style="text-align:left">åŒ¹é…<strong>å±äºä¸€ä¸ªç»„</strong>çš„æ–‡ä»¶æˆ–ç›®å½•ï¼Œç»„å¯ä»¥ç”¨<code>ç»„å</code>æˆ–<code>ç»„ID</code>æ¥è¡¨ç¤º</td></tr><tr><td style="text-align:left"><code>-iname pattern</code></td><td style="text-align:left">å°±åƒ<code>-name</code>æµ‹è¯•æ¡ä»¶ï¼Œä½†æ˜¯<strong>ä¸åŒºåˆ†å¤§å°å†™</strong></td></tr><tr><td style="text-align:left"><code>-inum n</code></td><td style="text-align:left">åŒ¹é…<code>inode</code>å·æ˜¯<code>n</code>çš„æ–‡ä»¶<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup></td></tr><tr><td style="text-align:left"><code>-mmin n</code></td><td style="text-align:left">åŒ¹é…<strong>å†…å®¹è¢«ä¿®æ”¹</strong>äº<code>n</code>åˆ†é’Ÿä¹‹å‰çš„æ–‡ä»¶æˆ–ç›®å½•</td></tr><tr><td style="text-align:left"><code>-mtime n</code></td><td style="text-align:left">åŒ¹é…çš„æ–‡ä»¶æˆ–ç›®å½•çš„<code>å†…å®¹è¢«ä¿®æ”¹</code>äº<code>n*24</code>å°æ—¶ä¹‹å‰</td></tr><tr><td style="text-align:left"><code>-name pattern</code></td><td style="text-align:left">ç”¨æŒ‡å®šçš„<strong>é€šé…ç¬¦æ¨¡å¼</strong>åŒ¹é…çš„æ–‡ä»¶å’Œç›®å½•</td></tr><tr><td style="text-align:left"><code>-newer file</code></td><td style="text-align:left">åŒ¹é…<strong>å†…å®¹æ™šäº</strong>æŒ‡å®šçš„æ–‡ä»¶çš„æ–‡ä»¶å’Œç›®å½•<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup></td></tr><tr><td style="text-align:left"><code>-nouser</code></td><td style="text-align:left">åŒ¹é…<strong>ä¸å±äºä¸€ä¸ªæœ‰æ•ˆç”¨æˆ·</strong>çš„æ–‡ä»¶å’Œç›®å½•<sup class="footnote-ref"><a href="#fn4" id="fnref4">[4]</a></sup></td></tr><tr><td style="text-align:left"><code>-nogroup</code></td><td style="text-align:left">åŒ¹é…<strong>ä¸å±äºä¸€ä¸ªæœ‰æ•ˆçš„ç»„</strong>çš„æ–‡ä»¶å’Œç›®å½•</td></tr><tr><td style="text-align:left"><code>-perm mode</code></td><td style="text-align:left">åŒ¹é…<strong>æƒé™å·²ç»è®¾ç½®ä¸º</strong>æŒ‡å®šçš„<code>mode</code>çš„æ–‡ä»¶æˆ–ç›®å½•ï¼Œ<code>mode </code>å¯ä»¥ç”¨<code>å…«è¿›åˆ¶</code>æˆ–<code>ç¬¦å·è¡¨ç¤ºæ³•</code></td></tr><tr><td style="text-align:left"><code>-samefile name</code></td><td style="text-align:left">ç±»ä¼¼äº<code>-inum</code>æµ‹è¯•æ¡ä»¶ï¼ŒåŒ¹é…å’Œæ–‡ä»¶<code>name</code>äº«æœ‰åŒæ ·<code>inode</code>å·çš„æ–‡ä»¶</td></tr><tr><td style="text-align:left"><code>-size n</code></td><td style="text-align:left">åŒ¹é…<strong>å¤§å°</strong>ä¸º<code>n</code>çš„æ–‡ä»¶</td></tr><tr><td style="text-align:left"><code>-type c</code></td><td style="text-align:left">åŒ¹é…<strong>æ–‡ä»¶ç±»å‹</strong>æ˜¯<code>c</code>çš„æ–‡ä»¶</td></tr><tr><td style="text-align:left"><code>-user name</code></td><td style="text-align:left">åŒ¹é…<strong>å±äºæŸä¸ªç”¨æˆ·</strong>çš„æ–‡ä»¶æˆ–ç›®å½•ï¼Œè¿™ä¸ªç”¨æˆ·å¯ä»¥é€šè¿‡<code>ç”¨æˆ·å</code>æˆ–<code>ç”¨æˆ·ID</code>æ¥è¡¨ç¤º</td></tr></tbody></table><p>å¤šä¸ªæµ‹è¯•æ¡ä»¶çš„è¿æ¥ç¬¦å·ï¼š</p><table><thead><tr><th style="text-align:left">æ“ä½œç¬¦</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left"><code>-and</code></td><td style="text-align:left">å¦‚æœæ“ä½œç¬¦ä¸¤è¾¹çš„æµ‹è¯•æ¡ä»¶éƒ½æ˜¯çœŸï¼Œåˆ™åŒ¹é…ã€‚å¯ä»¥ç®€å†™ä¸º<code>-a</code>ï¼Œ<strong>è‹¥æ²¡æœ‰ä½¿ç”¨æ“ä½œç¬¦ï¼Œåˆ™é»˜è®¤ä½¿ç”¨<code>-and</code></strong></td></tr><tr><td style="text-align:left"><code>-or</code></td><td style="text-align:left">è‹¥æ“ä½œç¬¦ä¸¤è¾¹çš„ä»»ä¸€ä¸ªæµ‹è¯•æ¡ä»¶ä¸ºçœŸï¼Œåˆ™åŒ¹é…ã€‚å¯ä»¥ç®€å†™ä¸º<code>-o</code></td></tr><tr><td style="text-align:left"><code>-or</code></td><td style="text-align:left">è‹¥æ“ä½œç¬¦ä¸¤è¾¹çš„ä»»ä¸€ä¸ªæµ‹è¯•æ¡ä»¶ä¸ºçœŸï¼Œåˆ™åŒ¹é…ã€‚å¯ä»¥ç®€å†™ä¸º<code>-o</code></td></tr><tr><td style="text-align:left"><code>-not</code></td><td style="text-align:left">è‹¥æ“ä½œç¬¦åé¢çš„æµ‹è¯•æ¡ä»¶æ˜¯å‡ï¼Œåˆ™åŒ¹é…ã€‚å¯ä»¥ç®€å†™ä¸ºä¸€ä¸ªæ„Ÿå¹å·<code>!</code></td></tr><tr><td style="text-align:left"><code>()</code></td><td style="text-align:left">æŠŠæµ‹è¯•æ¡ä»¶å’Œæ“ä½œç¬¦ç»„åˆèµ·æ¥å½¢æˆæ›´å¤§çš„è¡¨è¾¾å¼</td></tr></tbody></table><p><code>find</code>å‘½ä»¤å…è®¸åŸºäºæœç´¢ç»“æœæ¥æ‰§è¡Œæ“ä½œï¼š</p><table><thead><tr><th style="text-align:left">æ“ä½œ</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left"><code>-delete</code></td><td style="text-align:left">åˆ é™¤å½“å‰åŒ¹é…çš„æ–‡ä»¶</td></tr><tr><td style="text-align:left"><code>-ls</code></td><td style="text-align:left">å¯¹åŒ¹é…çš„æ–‡ä»¶æ‰§è¡Œç­‰åŒçš„<code>ls -dils</code>å‘½ä»¤</td></tr><tr><td style="text-align:left"><code>-print</code></td><td style="text-align:left">æŠŠåŒ¹é…æ–‡ä»¶çš„å…¨è·¯å¾„åè¾“é€åˆ°æ ‡å‡†è¾“å‡ºã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šå…¶å®ƒæ“ä½œï¼Œè¿™æ˜¯é»˜è®¤æ“ä½œ</td></tr><tr><td style="text-align:left"><code>-quit</code></td><td style="text-align:left">ä¸€æ—¦æ‰¾åˆ°ä¸€ä¸ªåŒ¹é…ï¼Œé€€å‡º</td></tr></tbody></table><p><code>find</code>å‘½ä»¤ä¹Ÿå¯ä»¥è°ƒç”¨ä»»æ„å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-<span class="built_in">exec</span> <span class="built_in">command</span> &#123;&#125; ;</span><br></pre></td></tr></table></figure><p><code>{}</code>æ˜¯å½“å‰è·¯å¾„åçš„ç¬¦å·è¡¨ç¤ºã€‚</p><p>å› ä¸ºèŠ±æ‹¬å·å’Œåˆ†å·å¯¹äº<code>shell</code>æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œæ‰€ä»¥å®ƒä»¬å¿…é¡»è¢«å¼•èµ·æ¥æˆ–è¢«è½¬ä¹‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-<span class="built_in">exec</span> rm <span class="string">'&#123;&#125;'</span> <span class="string">';'</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡ä½¿ç”¨<code>-ok</code>è¡Œä¸ºæ¥ä»£æ›¿<code>-exec</code>ï¼Œåœ¨æ‰§è¡Œæ¯ä¸ªæŒ‡å®šçš„å‘½ä»¤ä¹‹å‰ï¼Œä¼šæç¤ºç”¨æˆ·ã€‚</p><p>é€šè¿‡æŠŠæœ«å°¾çš„åˆ†å·æ”¹ä¸ºåŠ å·ï¼Œå°±æ¿€æ´»äº†<code>find</code>å‘½ä»¤çš„ä¸€ä¸ªåŠŸèƒ½ï¼ŒæŠŠæœç´¢ç»“æœç»“åˆä¸ºä¸€ä¸ªå‚æ•°åˆ—è¡¨ï¼Œç„¶åç”¨äºæ‰€æœŸæœ›çš„å‘½ä»¤çš„ä¸€æ¬¡æ‰§è¡Œã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">find Documents/ -<span class="built_in">type</span> f -name <span class="string">'*.bak'</span> -<span class="built_in">exec</span> ls -l <span class="string">'&#123;&#125;'</span> <span class="string">';'</span></span><br><span class="line"><span class="comment"># æ›¿æ¢ä¸º</span></span><br><span class="line">find Documents/ -<span class="built_in">type</span> f -name <span class="string">'*.bak'</span> -<span class="built_in">exec</span> ls -l <span class="string">'&#123;&#125;'</span> <span class="string">'+'</span></span><br></pre></td></tr></table></figure><h3 id="æµ‹è¯•"><a class="header-anchor" href="#æµ‹è¯•">#</a>æµ‹è¯•</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p playground/dir-&#123;00&#123;1..9&#125;,0&#123;10..99&#125;,100&#125;</span><br><span class="line">touch playground/dir-&#123;00&#123;1..9&#125;,0&#123;10..99&#125;,100&#125;/file-&#123;A..Z&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find playground -<span class="built_in">type</span> f -name <span class="string">'file-A'</span></span><br></pre></td></tr></table></figure><p>ä¸åŒäº<code>ls</code>å‘½ä»¤ï¼Œ<code>find</code>å‘½ä»¤çš„è¾“å‡ºç»“æœæ˜¯<strong>æ— åºçš„</strong>ï¼Œå…¶é¡ºåºç”±å­˜å‚¨è®¾å¤‡çš„å¸ƒå±€å†³å®šã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$ touch playground/timestamp</span><br><span class="line">$ <span class="built_in">stat</span> playground/timestamp</span><br><span class="line">  File: playground/timestamp</span><br><span class="line">  Size: 0         Blocks: 0          IO Block: 4096   regular empty file</span><br><span class="line">Device: 811h/2065dInode: 106302168   Links: 1</span><br><span class="line">Access: (0664/-rw-rw-r--)  Uid: ( 1000/      hs)   Gid: ( 1000/      hs)</span><br><span class="line">Access: 2021-04-08 22:33:03.175222042 +0800</span><br><span class="line">Modify: 2021-04-08 22:33:03.175222042 +0800</span><br><span class="line">Change: 2021-04-08 22:33:03.175222042 +0800</span><br><span class="line"> Birth: -</span><br><span class="line"></span><br><span class="line"><span class="comment"># touch å‘½ä»¤ä¼šä¿®æ”¹æ—¶é—´ä¿¡æ¯</span></span><br><span class="line">$ touch playground/timestamp</span><br><span class="line">$ <span class="built_in">stat</span> playground/timestamp</span><br><span class="line">  File: playground/timestamp</span><br><span class="line">  Size: 0         Blocks: 0          IO Block: 4096   regular empty file</span><br><span class="line">Device: 811h/2065dInode: 106302168   Links: 1</span><br><span class="line">Access: (0664/-rw-rw-r--)  Uid: ( 1000/      hs)   Gid: ( 1000/      hs)</span><br><span class="line">Access: 2021-04-08 22:36:02.113310036 +0800</span><br><span class="line">Modify: 2021-04-08 22:36:02.113310036 +0800</span><br><span class="line">Change: 2021-04-08 22:36:02.113310036 +0800</span><br><span class="line"> Birth: -</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find playground -<span class="built_in">type</span> f -name <span class="string">'file-B'</span> -<span class="built_in">exec</span> touch <span class="string">'&#123;&#125;'</span> <span class="string">';'</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find playground -<span class="built_in">type</span> f -newer playground/timestamp</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find playground \( -<span class="built_in">type</span> f -not -perm 0600 \) -or \( -<span class="built_in">type</span> d -not -perm 0700 \) | sort</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find playground \( -<span class="built_in">type</span> f -not -perm 0600 -<span class="built_in">exec</span> chmod 0600 <span class="string">'&#123;&#125;'</span> <span class="string">';'</span> \) -or \( -<span class="built_in">type</span> d -not -perm 0711 -<span class="built_in">exec</span> chmod 0700 <span class="string">'&#123;&#125;'</span> <span class="string">';'</span> \)</span><br></pre></td></tr></table></figure><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>å¦‚æœæ²¡æœ‰æŒ‡å®šå•ä½ï¼Œåˆ™è¿™æ˜¯é»˜è®¤å€¼ã€‚ <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li><li id="fn2" class="footnote-item"><p>ä¸æ‡‚å•¥æ„æ€ï¼Œä»¥åå›æ¥å¯ä»¥è¡¥ä¸Šæµ‹è¯•ä¾‹å­ï¼Œç¿»è¯‘æ˜¯<code>è¿™å¯¹äºæ‰¾åˆ°æŸä¸ªç‰¹æ®Š inode çš„æ‰€æœ‰ç¡¬é“¾æ¥å¾ˆæœ‰å¸®åŠ©</code>ã€‚ <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p></li><li id="fn3" class="footnote-item"><p>è¿™åœ¨ç¼–å†™æ‰§è¡Œå¤‡ä»½çš„<code>shell</code>è„šæœ¬çš„æ—¶å€™å¾ˆæœ‰å¸®åŠ©ã€‚æ¯æ¬¡ä½ åˆ¶ä½œä¸€ä¸ªå¤‡ä»½ï¼Œæ›´æ–°æ–‡ä»¶ï¼ˆæ¯”å¦‚è¯´æ—¥å¿—ï¼‰ï¼Œç„¶åä½¿ç”¨<code>find</code>å‘½ä»¤æ¥åˆ¤æ–­å“ªäº›æ–‡ä»¶è‡ªä»ä¸Šä¸€æ¬¡æ›´æ–°ä¹‹åè¢«æ›´æ”¹äº†ã€‚ <a href="#fnref3" class="footnote-backref">â†©ï¸</a></p></li><li id="fn4" class="footnote-item"><p>è¿™å¯ä»¥ç”¨æ¥æŸ¥æ‰¾å±äºè¢«åˆ é™¤çš„å¸æˆ·çš„æ–‡ä»¶æˆ–ç›‘æµ‹æ”»å‡»è¡Œä¸º <a href="#fnref4" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> shell </tag>
            
            <tag> bash </tag>
            
            <tag> shell note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šå¿«ä¹çš„Linuxå‘½ä»¤è¡Œã€‹ç¬”è®°ï¼ˆ16ï¼‰</title>
      <link href="/blog/2021/04/06/the-linux-command-line-note-16/"/>
      <url>/blog/2021/04/06/the-linux-command-line-note-16/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹"><a class="header-anchor" href="#ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹">#</a>ã€Šå¿«ä¹çš„ Linux å‘½ä»¤è¡Œã€‹</h1><a id="more"></a><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä½¿å¾— shell çš„å†å²è®°å½•åŠŸèƒ½å¿½ç•¥ä¸€ä¸ªå‘½ä»¤ï¼Œå¦‚æœç›¸åŒçš„å‘½ä»¤å·²è¢«è®°å½•ã€‚</span></span><br><span class="line"><span class="built_in">export</span> HISTCONTROL=ignoredups</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¢åŠ å‘½ä»¤å†å²çš„å¤§å°ï¼Œä»é»˜è®¤çš„ 500 è¡Œæ‰©å¤§åˆ° 1000 è¡Œã€‚</span></span><br><span class="line"><span class="built_in">export</span> HISTSIZE=1000</span><br></pre></td></tr></table></figure><p>ä¸è¿‡<code>MacOS</code>çš„<code>zsh</code>é»˜è®¤å†å²å¤§å°æ˜¯<code>2000</code>ï¼Œæ‰€ä»¥ç¬¬äºŒä¸ªä¸ç”¨æ”¹äº†ã€‚ç¬¬ä¸€ä¸ªå¥½åƒä¹Ÿæ²¡ç”¨ï¼Œæ”¹äº†ä¸€æ™šä¸Šéƒ½æ²¡å•¥æ•ˆæœã€‚ã€‚ã€‚ã€‚</p><h2 id="vi"><a class="header-anchor" href="#vi">#</a>vi</h2><table><thead><tr><th style="text-align:left">æŒ‰é”®</th><th style="text-align:left">ç§»åŠ¨å…‰æ ‡</th></tr></thead><tbody><tr><td style="text-align:left"><code>l</code> or <code>å³ç®­å¤´</code></td><td style="text-align:left">å‘å³ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td style="text-align:left"><code>h</code> or <code>å·¦ç®­å¤´</code></td><td style="text-align:left">å‘å·¦ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td style="text-align:left"><code>j</code> or <code>ä¸‹ç®­å¤´</code></td><td style="text-align:left">å‘ä¸‹ç§»åŠ¨ä¸€è¡Œ</td></tr><tr><td style="text-align:left"><code>k</code> or <code>ä¸Šç®­å¤´</code></td><td style="text-align:left">å‘ä¸Šç§»åŠ¨ä¸€è¡Œ</td></tr><tr><td style="text-align:left"><code>0</code> (é›¶æŒ‰é”®)</td><td style="text-align:left">ç§»åŠ¨åˆ°å½“å‰è¡Œçš„è¡Œé¦–</td></tr><tr><td style="text-align:left"><code>^</code></td><td style="text-align:left">ç§»åŠ¨åˆ°å½“å‰è¡Œçš„ç¬¬ä¸€ä¸ªéç©ºå­—ç¬¦</td></tr><tr><td style="text-align:left"><code>$</code></td><td style="text-align:left">ç§»åŠ¨åˆ°å½“å‰è¡Œçš„æœ«å°¾</td></tr><tr><td style="text-align:left"><code>w</code></td><td style="text-align:left">ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå•è¯æˆ–æ ‡ç‚¹ç¬¦å·çš„å¼€å¤´</td></tr><tr><td style="text-align:left"><code>W</code></td><td style="text-align:left">ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå•è¯çš„å¼€å¤´ï¼Œå¿½ç•¥æ ‡ç‚¹ç¬¦å·</td></tr><tr><td style="text-align:left"><code>b</code></td><td style="text-align:left">ç§»åŠ¨åˆ°ä¸Šä¸€ä¸ªå•è¯æˆ–æ ‡ç‚¹ç¬¦å·çš„å¼€å¤´</td></tr><tr><td style="text-align:left"><code>B</code></td><td style="text-align:left">ç§»åŠ¨åˆ°ä¸Šä¸€ä¸ªå•è¯çš„å¼€å¤´ï¼Œå¿½ç•¥æ ‡ç‚¹ç¬¦å·</td></tr><tr><td style="text-align:left"><code>Ctrl-f</code> or <code>Page Down</code></td><td style="text-align:left">å‘ä¸‹ç¿»ä¸€é¡µ</td></tr><tr><td style="text-align:left"><code>Ctrl-b</code> or <code>Page Up</code></td><td style="text-align:left">å‘ä¸Šç¿»ä¸€é¡µ</td></tr><tr><td style="text-align:left"><code>numberG</code></td><td style="text-align:left">ç§»åŠ¨åˆ°ç¬¬ <code>number</code> è¡Œ</td></tr><tr><td style="text-align:left"><code>G</code></td><td style="text-align:left">ç§»åŠ¨åˆ°æ–‡ä»¶æœ«å°¾</td></tr></tbody></table><p><code>a</code>å‘½ä»¤ï¼š<code>vi</code>æä¾›çš„è¿½åŠ æ–‡æœ¬çš„å‘½ä»¤ï¼Œå¦‚æœæŠŠå…‰æ ‡ç§»åŠ¨åˆ°è¡Œå°¾ï¼Œè¾“å…¥<code>a</code>, å…‰æ ‡å°±ä¼šè¶Šè¿‡è¡Œå°¾ï¼ŒåŒæ—¶<code>vi</code>ä¼šè¿›å…¥æ’å…¥æ¨¡å¼ã€‚<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p><p><code>A</code>å‘½ä»¤ï¼šå…‰æ ‡ç§»åŠ¨åˆ°è¡Œå°¾ï¼ŒåŒæ—¶<code>vi</code>è¿›å…¥è¾“å…¥æ¨¡å¼ã€‚<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup></p><table><thead><tr><th style="text-align:left">å‘½ä»¤</th><th style="text-align:left">æ•ˆæœ</th></tr></thead><tbody><tr><td style="text-align:left"><code>o</code></td><td style="text-align:left">å½“å‰è¡Œçš„ä¸‹æ–¹æ‰“å¼€ä¸€è¡Œ</td></tr><tr><td style="text-align:left"><code>O</code></td><td style="text-align:left">å½“å‰è¡Œçš„ä¸Šæ–¹æ‰“å¼€ä¸€è¡Œ</td></tr></tbody></table><p><code>u</code>å‘½ä»¤ï¼šå½“åœ¨å‘½ä»¤æ¨¡å¼ä¸‹ï¼Œ<code>vi</code>å°†ä¼šæ’¤é”€æœ€åä¸€æ¬¡ä¿®æ”¹ã€‚</p><table><thead><tr><th style="text-align:left">å‘½ä»¤</th><th style="text-align:left">åˆ é™¤çš„æ–‡æœ¬</th></tr></thead><tbody><tr><td style="text-align:left"><code>x</code></td><td style="text-align:left">å½“å‰å­—ç¬¦</td></tr><tr><td style="text-align:left"><code>3x</code></td><td style="text-align:left">å½“å‰å­—ç¬¦åŠå…¶åçš„ä¸¤ä¸ªå­—ç¬¦</td></tr><tr><td style="text-align:left"><code>dd</code></td><td style="text-align:left">å½“å‰è¡Œ</td></tr><tr><td style="text-align:left"><code>5dd</code></td><td style="text-align:left">å½“å‰è¡ŒåŠéšåçš„å››è¡Œæ–‡æœ¬</td></tr><tr><td style="text-align:left"><code>dW</code></td><td style="text-align:left">ä»å…‰æ ‡ä½ç½®å¼€å§‹åˆ°ä¸‹ä¸€ä¸ªå•è¯çš„å¼€å¤´</td></tr><tr><td style="text-align:left"><code>d$</code></td><td style="text-align:left">ä»å…‰æ ‡ä½ç½®å¼€å§‹åˆ°å½“å‰è¡Œçš„è¡Œå°¾</td></tr><tr><td style="text-align:left"><code>d0</code></td><td style="text-align:left">ä»å…‰æ ‡ä½ç½®å¼€å§‹åˆ°å½“å‰è¡Œçš„è¡Œé¦–</td></tr><tr><td style="text-align:left"><code>d^</code></td><td style="text-align:left">ä»å…‰æ ‡ä½ç½®å¼€å§‹åˆ°æ–‡æœ¬è¡Œçš„ç¬¬ä¸€ä¸ªéç©ºå­—ç¬¦</td></tr><tr><td style="text-align:left"><code>dG</code></td><td style="text-align:left">ä»å½“å‰è¡Œåˆ°æ–‡ä»¶çš„æœ«å°¾</td></tr><tr><td style="text-align:left"><code>d20G</code></td><td style="text-align:left">ä»å½“å‰è¡Œåˆ°æ–‡ä»¶çš„ç¬¬ <code>20</code> è¡Œ</td></tr></tbody></table><p>çœŸæ­£çš„<code>vi</code>åªæ˜¯æ”¯æŒå•å±‚é¢çš„<code>undo</code>å‘½ä»¤ã€‚<code>vim</code>åˆ™æ”¯æŒå¤šä¸ªå±‚é¢çš„ã€‚</p><h2 id="å‚è€ƒé“¾æ¥"><a class="header-anchor" href="#å‚è€ƒé“¾æ¥">#</a>å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://blog.csdn.net/testcs_dn/article/details/79970635" target="_blank" rel="noopener">mac ä¸­ history å‘½ä»¤ä½¿ç”¨ä¸é…ç½®</a></li><li><a href="http://zsh.sourceforge.net/Doc/Release/Options.html" target="_blank" rel="noopener">Zsh Options</a></li><li><a href="https://stackoverflow.com/questions/842338/how-do-i-tell-zsh-to-write-the-current-shells-history-to-my-history-file/842366" target="_blank" rel="noopener">How do I tell Zsh to write the current shellâ€™s history to my history file?</a></li><li><a href="https://www.reddit.com/r/zsh/comments/2aoy2i/history_deduplication/" target="_blank" rel="noopener">History deduplication?</a></li><li><a href="http://zsh.sourceforge.net/Guide/zshguide02.html#l18" target="_blank" rel="noopener">History options</a></li><li><a href="https://unix.stackexchange.com/questions/6094/is-there-any-way-to-keep-a-command-from-being-added-to-your-history" target="_blank" rel="noopener">Is there any way to keep a command from being added to your history?</a></li><li><a href="https://unix.stackexchange.com/questions/103398/how-to-view-datetime-stamp-for-history-command-in-zsh-shell" target="_blank" rel="noopener">How to view datetime stamp for history command in Zsh shell</a></li><li><a href="https://superuser.com/questions/735660/whats-the-zsh-equivalent-of-bashs-prompt-command" target="_blank" rel="noopener">Whatâ€™s the ZSH equivalent of BASHâ€™s $PROMPT_COMMAND?</a></li><li><a href="https://unix.stackexchange.com/questions/121802/zsh-how-to-check-if-an-option-is-enabled" target="_blank" rel="noopener">zsh: How to check if an option is enabled</a></li></ul><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>ç„¶è€Œå¥½åƒæ²¡å•¥ç”¨ï¼Œ<code>i</code>ç¼–è¾‘æ¨¡å¼ä¸‹å‘å³ç§»åŠ¨ä¸€ä¸ªå­—ç¬¦å°±å¯ä»¥è¿½åŠ äº†ã€‚ <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li><li id="fn2" class="footnote-item"><p>è¿™ä¸ªå°±æ¯”è¾ƒæ–¹ä¾¿äº†ï¼Œå¯ä»¥è®°ä½ï¼ŒæŒºå¥½ç”¨çš„å¿«æ·é”®ã€‚ <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> shell </tag>
            
            <tag> bash </tag>
            
            <tag> shell note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šå¿«ä¹çš„Linuxå‘½ä»¤è¡Œã€‹ç¬”è®°ï¼ˆæ±‡æ€»ï¼‰</title>
      <link href="/blog/2021/04/06/the-linux-command-line-note-all/"/>
      <url>/blog/2021/04/06/the-linux-command-line-note-all/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹"><a class="header-anchor" href="#ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹">#</a>ã€Šå¿«ä¹çš„ Linux å‘½ä»¤è¡Œã€‹</h1><a id="more"></a><p>å¦‚æœæç¤ºç¬¦çš„æœ€åä¸€ä¸ªå­—ç¬¦æ˜¯<code>#</code>, è€Œä¸æ˜¯<code>$</code>, é‚£ä¹ˆè¿™ä¸ªç»ˆç«¯ä¼šè¯å°±æœ‰è¶…çº§ç”¨æˆ·æƒé™<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>ã€‚</p><p>è®¸å¤š<code>Linux</code>å‘è¡Œç‰ˆé»˜è®¤ä¿å­˜æœ€åè¾“å…¥çš„<code>500</code>ä¸ªå‘½ä»¤ï¼ˆå°±æ˜¯ä¸Šä¸‹é”®æ˜¾ç¤ºçš„é‚£äº›ï¼‰ã€‚</p><p>æ—¥å†å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ cal</span><br><span class="line">    October 2020</span><br><span class="line">Su Mo Tu We Th Fr Sa</span><br><span class="line">             1  2  3</span><br><span class="line"> 4  5  6  7  8  9 10</span><br><span class="line">11 12 13 14 15 16 17</span><br><span class="line">18 19 20 21 22 23 24</span><br><span class="line">25 26 27 28 29 30 31</span><br></pre></td></tr></table></figure><p><code>cd -</code>å‘½ä»¤å¯ä»¥æ›´æ”¹åˆ°ä¸Šä¸€ä¸ªå·¥ä½œè·¯å¾„ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">% <span class="built_in">cd</span> Documents/common/PAN-PyTorch</span><br><span class="line">onns@liupans-MacBook-Air PAN-PyTorch % <span class="built_in">pwd</span></span><br><span class="line">/Users/onns/Documents/common/PAN-PyTorch</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">onns@liupans-MacBook-Air PAN-PyTorch % <span class="built_in">cd</span> ~/Downloads/GitHub/blog</span><br><span class="line">onns@liupans-MacBook-Air blog % <span class="built_in">pwd</span></span><br><span class="line">/Users/onns/Downloads/GitHub/blog</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">onns@liupans-MacBook-Air blog % <span class="built_in">cd</span> -</span><br><span class="line">~/Documents/common/PAN-PyTorch</span><br><span class="line">onns@liupans-MacBook-Air PAN-PyTorch % <span class="built_in">pwd</span></span><br><span class="line">/Users/onns/Documents/common/PAN-PyTorch</span><br></pre></td></tr></table></figure><p>Linux æ–‡ä»¶å‘½åçš„ç‰¹æ®Šç¬¦å·ä»…æ”¯æŒ<code>.</code>ï¼Œ<code>-</code>å’Œ<code>_</code>ã€‚</p><p>ä¸è¦åœ¨æ–‡ä»¶åä¸­ä½¿ç”¨ç©ºæ ¼ã€‚</p><p><code>ls</code>çš„å‚æ•°ï¼š</p><table><thead><tr><th style="text-align:center">é€‰é¡¹</th><th style="text-align:left">é•¿é€‰é¡¹</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:center"><code>-r</code></td><td style="text-align:left"><code>--reverse</code></td><td style="text-align:left">é€†åºè¾“å‡º</td></tr><tr><td style="text-align:center"><code>-t</code></td><td style="text-align:left"></td><td style="text-align:left">æŒ‰ç…§ä¿®æ”¹æ—¶é—´æ¥æ’åº</td></tr><tr><td style="text-align:center"><code>-l</code></td><td style="text-align:left"></td><td style="text-align:left">ä»¥é•¿æ ¼å¼æ˜¾ç¤ºç»“æœ</td></tr></tbody></table><p>æ„Ÿè§‰<code>-l</code>å‚æ•°æ˜¯æœ€å¸¸ç”¨çš„äº†ï¼Œä¼šè¾“å‡ºä¸€äº›æœ‰ç”¨çš„ä¿¡æ¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">onns@liupans-MacBook-Air blog % ls -l</span><br><span class="line">total 12304</span><br><span class="line">-rw-r--r--    1 onns  staff     2586 Aug 11 20:20 _config.yml</span><br><span class="line">-rw-r--r--    1 onns  staff  6097875 Nov  2 11:15 db.json</span><br><span class="line">drwxr-xr-x  450 onns  staff    14400 Oct 17 13:47 node_modules</span><br><span class="line">-rw-r--r--    1 onns  staff   189013 Oct 17 13:47 package-lock.json</span><br><span class="line">-rw-r--r--    1 onns  staff      833 Oct 17 13:47 package.json</span><br><span class="line">drwxr-xr-x   26 onns  staff      832 Oct 17 14:01 public</span><br><span class="line">drwxr-xr-x    5 onns  staff      160 Jun 14 20:08 scaffolds</span><br><span class="line">drwxr-xr-x   13 onns  staff      416 Aug 10 00:29 <span class="built_in">source</span></span><br><span class="line">drwxr-xr-x    4 onns  staff      128 Aug 11 19:24 themes</span><br></pre></td></tr></table></figure><p><code>-rw-r--r--</code>è¡¨ç¤ºå¯¹æ–‡ä»¶çš„æƒé™ï¼Œç¬¬ä¸€ä¸ªå­—ç¬¦ä»£è¡¨<code>æ–‡ä»¶ç±»å‹</code>ï¼š</p><ul><li><code>-</code>ä»£è¡¨æ˜¯ä¸€ä¸ªæ™®é€šæ–‡ä»¶ã€‚</li><li><code>d</code>ä»£è¡¨æ˜¯ä¸€ä¸ªç›®å½•ã€‚</li></ul><p>åé¢çš„æ˜¯æƒé™å­—ç¬¦ï¼Œåé¢ä¼šè®²ã€‚</p><p><code>1</code> ä»£è¡¨<code>ç¡¬é“¾æ¥</code>çš„æ•°ç›®ã€‚</p><p><code>onns</code>ä»£è¡¨æ–‡ä»¶æ‰€æœ‰è€…çš„ç”¨æˆ·åã€‚</p><p><code>staff</code>ä»£è¡¨æ‰€å±ç”¨æˆ·ç»„çš„ç»„åã€‚</p><p><code>2586</code>æ˜¯ä»¥å­—èŠ‚æ•°è¡¨ç¤ºçš„æ–‡ä»¶å¤§å°ã€‚</p><p>æœ€åæ˜¯<code>ä¸Šæ¬¡ä¿®æ”¹æ—¶é—´</code>å’Œ<code>æ–‡ä»¶å</code>ã€‚</p><hr><p><code>file</code>å‘½ä»¤ç”¨æ¥æŸ¥çœ‹æ–‡ä»¶çš„ç±»å‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">onns@liupans-MacBook-Air image % file draw-20200207.jpg</span><br><span class="line">draw-20200207.jpg: JPEG image data, Exif standard: [TIFF image data, big-endian, direntries=7, orientation=upper-left, xresolution=98, yresolution=106, resolutionunit=2, software=Adobe Photoshop 21.0 (Macintosh), datetime=2020:02:07 19:32:03], baseline, precision 8, 3508x2480, components 3</span><br></pre></td></tr></table></figure><hr><p><code>less</code>å‘½ä»¤ç”¨æ¥æµè§ˆæ–‡æœ¬æ–‡ä»¶ï¼Œæ˜¯<code>more</code>å‘½ä»¤çš„å‡çº§ç‰ˆï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">less filename</span><br></pre></td></tr></table></figure><table><thead><tr><th style="text-align:center">é€‰é¡¹</th><th style="text-align:center">æè¿°</th></tr></thead><tbody><tr><td style="text-align:center">Page UP or b</td><td style="text-align:center">å‘ä¸Šç¿»æ»šä¸€é¡µ</td></tr><tr><td style="text-align:center">Page Down or space</td><td style="text-align:center">å‘ä¸‹ç¿»æ»šä¸€é¡µ</td></tr><tr><td style="text-align:center">UP Arrow</td><td style="text-align:center">å‘ä¸Šç¿»æ»šä¸€è¡Œ</td></tr><tr><td style="text-align:center">Down Arrow</td><td style="text-align:center">å‘ä¸‹ç¿»æ»šä¸€è¡Œ</td></tr><tr><td style="text-align:center">G</td><td style="text-align:center">ç§»åŠ¨åˆ°æœ€åä¸€è¡Œ</td></tr><tr><td style="text-align:center">1G or g</td><td style="text-align:center">ç§»åŠ¨åˆ°å¼€å¤´ä¸€è¡Œ</td></tr><tr><td style="text-align:center">/charaters</td><td style="text-align:center">å‘å‰æŸ¥æ‰¾æŒ‡å®šçš„å­—ç¬¦ä¸²</td></tr><tr><td style="text-align:center">n</td><td style="text-align:center">å‘å‰æŸ¥æ‰¾ä¸‹ä¸€ä¸ªå‡ºç°çš„å­—ç¬¦ä¸²ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²æ˜¯ä¹‹å‰æ‰€æŒ‡å®šæŸ¥æ‰¾çš„</td></tr><tr><td style="text-align:center">h</td><td style="text-align:center">æ˜¾ç¤ºå¸®åŠ©å±å¹•</td></tr><tr><td style="text-align:center">q</td><td style="text-align:center">é€€å‡º less ç¨‹åº</td></tr></tbody></table><hr><p>åœ¨ <code>ls -l</code>çš„æ—¶å€™ï¼Œå¦‚æœæœ€å‰é¢çš„å­—ç¬¦ä¸æ˜¯<code>-</code>ä¹Ÿä¸æ˜¯<code>d</code>è€Œæ˜¯<code>l</code>ï¼Œä»£è¡¨æ˜¯ä¸€ä¸ª<code>ç¬¦å·é“¾æ¥</code>ã€‚</p><h2 id="é€šé…ç¬¦"><a class="header-anchor" href="#é€šé…ç¬¦">#</a>é€šé…ç¬¦</h2><ul><li><code>*</code> åŒ¹é…ä»»æ„å¤šä¸ªå­—ç¬¦ï¼ˆåŒ…æ‹¬é›¶ä¸ªæˆ–ä¸€ä¸ªï¼‰</li><li><code>?</code> åŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼ˆä¸åŒ…æ‹¬é›¶ä¸ªï¼‰</li><li><code>[characters]</code> åŒ¹é…ä»»æ„ä¸€ä¸ªå±äº<code>å­—ç¬¦é›†</code>ä¸­çš„å­—ç¬¦</li><li><code>[!characters]</code> åŒ¹é…ä»»æ„ä¸€ä¸ªä¸æ˜¯<code>å­—ç¬¦é›†</code>ä¸­çš„å­—ç¬¦</li><li><code>[[:class:]]</code> åŒ¹é…ä»»æ„ä¸€ä¸ªå±äºæŒ‡å®š<code>å­—ç¬¦ç±»</code>ä¸­çš„å­—ç¬¦</li></ul><p>å­—ç¬¦ç±»</p><ul><li><code>[:alnum:]</code> åŒ¹é…ä»»æ„ä¸€ä¸ªå­—æ¯æˆ–æ•°å­—</li><li><code>[:alpha:]</code> åŒ¹é…ä»»æ„ä¸€ä¸ªå­—æ¯</li><li><code>[:digit:]</code> åŒ¹é…ä»»æ„ä¸€ä¸ªæ•°å­—</li><li><code>[:lower:]</code> åŒ¹é…ä»»æ„ä¸€ä¸ªå°å†™å­—æ¯</li><li><code>[:upper:]</code> åŒ¹é…ä»»æ„ä¸€ä¸ªå¤§å†™å­—æ¯</li></ul><p>ä¸€äº›ç¤ºä¾‹ï¼š</p><ul><li><code>*</code> æ‰€æœ‰æ–‡ä»¶</li><li><code>g*</code> æ–‡ä»¶åä»¥â€œgâ€å¼€å¤´çš„æ–‡ä»¶</li><li><code>b*.txt</code> ä»¥â€œbâ€ å¼€å¤´ï¼Œä¸­é—´æœ‰é›¶ä¸ªæˆ–ä»»æ„å¤šä¸ªå­—ç¬¦ï¼Œå¹¶ä»¥â€.txtâ€ç»“å°¾çš„æ–‡ä»¶</li><li><code>Data???</code> ä»¥<code>Data</code>å¼€å¤´ï¼Œå…¶åç´§æ¥ç€<code>3</code>ä¸ªå­—ç¬¦çš„æ–‡ä»¶</li><li><code>[abc]*</code> æ–‡ä»¶åä»¥<code>a</code>ã€<code>b</code>æˆ–<code>c</code>å¼€å¤´çš„æ–‡ä»¶</li><li><code>BACKUP.[0-9][0-9][0-9]</code> ä»¥<code>BACKUP.</code>å¼€å¤´ï¼Œå¹¶ç´§æ¥ç€<code>3</code>ä¸ªæ•°å­—çš„æ–‡ä»¶</li><li><code>[[:upper:]]*</code> ä»¥<code>å¤§å†™å­—æ¯</code>å¼€å¤´çš„æ–‡ä»¶</li><li><code>[![:digit:]]*</code> <code>ä¸ä»¥æ•°å­—</code>å¼€å¤´çš„æ–‡ä»¶</li><li><code>*[[:lower:]123]</code> æ–‡ä»¶åä»¥<code>å°å†™å­—æ¯</code>ç»“å°¾ï¼Œæˆ–ä»¥<code>1</code>ã€<code>2</code>æˆ–<code>3</code>ç»“å°¾çš„æ–‡ä»¶</li></ul><p>ä¹‹å‰å†™æ­£åˆ™æ—¶å€™çš„<code>[A-Z]</code>å’Œ<code>[a-z]</code>è™½ç„¶éƒ½æœ‰æ•ˆæœï¼Œä½†æ˜¯å·²ç»å¾ˆè€äº†ï¼Œä¸ä¸€å®šä¼šæœ‰æœŸæœ›çš„æ•ˆæœï¼Œå¯ä»¥å¼ƒç”¨äº†ã€‚</p><blockquote><p>è™½ç„¶å®ƒä»¬ä»ç„¶èµ·ä½œç”¨ï¼Œä½†æ˜¯ä½ å¿…é¡»å°å¿ƒåœ°ä½¿ç”¨å®ƒä»¬ï¼Œå› ä¸ºå®ƒä»¬ä¸ä¼šäº§ç”Ÿä½ æœŸæœ›çš„è¾“å‡ºç»“æœï¼Œé™¤éä½ åˆç†åœ°é…ç½®å®ƒä»¬ã€‚ä»ç°åœ¨å¼€å§‹ï¼Œä½ åº”è¯¥é¿å…ä½¿ç”¨å®ƒä»¬ï¼Œå¹¶ä¸”ç”¨å­—ç¬¦ç±»æ¥ä»£æ›¿å®ƒä»¬ã€‚</p></blockquote><h2 id="åˆ›å»ºç›®å½•"><a class="header-anchor" href="#åˆ›å»ºç›®å½•">#</a>åˆ›å»ºç›®å½•</h2><p>å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir directory...</span><br></pre></td></tr></table></figure><p>ä¸Šé¢å‘½ä»¤çš„<code>...</code>ä»£è¡¨é‚£ä¸ªå‚æ•°å¯ä»¥é‡å¤ï¼Œå³å¯ä»¥ä¸€æ¬¡æ€§åˆ›å»ºå¤šä¸ªæ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir dir1 dir2 dir3</span><br></pre></td></tr></table></figure><p>ä¼šåˆ›å»ºä¸‰ä¸ªç›®å½•ã€‚</p><h2 id="å¤åˆ¶æ–‡ä»¶å’Œç›®å½•"><a class="header-anchor" href="#å¤åˆ¶æ–‡ä»¶å’Œç›®å½•">#</a>å¤åˆ¶æ–‡ä»¶å’Œç›®å½•</h2><p>ä¸¤ç§ç”¨æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp item1 item2</span><br></pre></td></tr></table></figure><p>å¤åˆ¶å•ä¸ªæ–‡ä»¶æˆ–ç›®å½•<code>item1</code>åˆ°æ–‡ä»¶æˆ–ç›®å½•<code>item2</code>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp item1... directory</span><br></pre></td></tr></table></figure><p>å¤åˆ¶å¤šä¸ªé¡¹ç›®ï¼ˆæ–‡ä»¶æˆ–ç›®å½•ï¼‰åˆ°ä¸€ä¸ªç›®å½•ä¸‹ã€‚</p><p><code>cp</code>å‘½ä»¤çš„ä¸€äº›å‚æ•°é€‰é¡¹ï¼š</p><table><thead><tr><th style="text-align:center">é€‰é¡¹</th><th style="text-align:left">é•¿é€‰é¡¹</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:center"><code>-a</code></td><td style="text-align:left"><code>--archive</code></td><td style="text-align:left">å¤åˆ¶æ–‡ä»¶å’Œç›®å½•ï¼Œä»¥åŠå®ƒä»¬çš„å±æ€§ï¼ŒåŒ…æ‹¬æ‰€æœ‰æƒå’Œæƒé™ã€‚é€šå¸¸ï¼Œå‰¯æœ¬å…·æœ‰ç”¨æˆ·æ‰€æ“ä½œæ–‡ä»¶çš„é»˜è®¤å±æ€§ã€‚</td></tr><tr><td style="text-align:center"><code>-i</code></td><td style="text-align:left"><code>--interactive</code></td><td style="text-align:left">åœ¨é‡å†™å·²å­˜åœ¨æ–‡ä»¶ä¹‹å‰ï¼Œæç¤ºç”¨æˆ·ç¡®è®¤ã€‚å¦‚æœè¿™ä¸ªé€‰é¡¹ä¸æŒ‡å®šï¼Œcp å‘½ä»¤ä¼šé»˜è®¤é‡å†™æ–‡ä»¶ã€‚</td></tr><tr><td style="text-align:center"><code>-r</code></td><td style="text-align:left"><code>--recursive</code></td><td style="text-align:left">é€’å½’åœ°å¤åˆ¶ç›®å½•åŠç›®å½•ä¸­çš„å†…å®¹ã€‚å½“å¤åˆ¶ç›®å½•æ—¶ï¼Œéœ€è¦è¿™ä¸ªé€‰é¡¹ï¼ˆæˆ–è€…-a é€‰é¡¹ï¼‰ã€‚</td></tr><tr><td style="text-align:center"><code>-u</code></td><td style="text-align:left"><code>--update</code></td><td style="text-align:left">å½“æŠŠæ–‡ä»¶ä»ä¸€ä¸ªç›®å½•å¤åˆ¶åˆ°å¦ä¸€ä¸ªç›®å½•æ—¶ï¼Œä»…å¤åˆ¶ç›®æ ‡ç›®å½•ä¸­ä¸å­˜åœ¨çš„æ–‡ä»¶ï¼Œæˆ–è€…æ˜¯æ–‡ä»¶å†…å®¹æ–°äºç›®æ ‡ç›®å½•ä¸­å·²ç»å­˜åœ¨çš„æ–‡ä»¶ã€‚</td></tr><tr><td style="text-align:center"><code>-v</code></td><td style="text-align:left"><code>--verbose</code></td><td style="text-align:left">æ˜¾ç¤ºè¯¦ç»†çš„å‘½ä»¤æ“ä½œä¿¡æ¯</td></tr></tbody></table><p>ç¤ºä¾‹ï¼š</p><ul><li><code>cp file1 file2</code> å¤åˆ¶æ–‡ä»¶ file1 å†…å®¹åˆ°æ–‡ä»¶ file2ã€‚å¦‚æœ file2 å·²ç»å­˜åœ¨ï¼Œfile2 çš„å†…å®¹ä¼šè¢« file1 çš„å†…å®¹é‡å†™ã€‚å¦‚æœ file2 ä¸å­˜åœ¨ï¼Œåˆ™ä¼šåˆ›å»º file2ã€‚</li><li><code>cp -i file1 file2</code> è¿™æ¡å‘½ä»¤å’Œä¸Šé¢çš„å‘½ä»¤ä¸€æ ·ï¼Œé™¤äº†å¦‚æœæ–‡ä»¶ file2 å­˜åœ¨çš„è¯ï¼Œåœ¨æ–‡ä»¶ file2 è¢«é‡å†™ä¹‹å‰ï¼Œä¼šæç¤ºç”¨æˆ·ç¡®è®¤ä¿¡æ¯ã€‚</li><li><code>cp file1 file2 dir1</code> å¤åˆ¶æ–‡ä»¶ file1 å’Œæ–‡ä»¶ file2 åˆ°ç›®å½• dir1ã€‚ç›®å½• dir1 å¿…é¡»å­˜åœ¨ã€‚</li><li><code>cp dir1/* dir2</code> ä½¿ç”¨ä¸€ä¸ªé€šé…ç¬¦ï¼Œåœ¨ç›®å½• dir1 ä¸­çš„æ‰€æœ‰æ–‡ä»¶éƒ½è¢«å¤åˆ¶åˆ°ç›®å½• dir2 ä¸­ã€‚dir2 å¿…é¡»å·²ç»å­˜åœ¨ã€‚</li><li><code>cp -r dir1 dir2</code> å¤åˆ¶ç›®å½• dir1 ä¸­çš„å†…å®¹åˆ°ç›®å½• dir2ã€‚å¦‚æœç›®å½• dir2 ä¸å­˜åœ¨ï¼Œåˆ›å»ºç›®å½• dir2ï¼Œæ“ä½œå®Œæˆåï¼Œç›®å½• dir2 ä¸­çš„å†…å®¹å’Œ dir1 ä¸­çš„ä¸€æ ·ã€‚å¦‚æœç›®å½• dir2 å­˜åœ¨ï¼Œåˆ™ç›®å½•<code>dir1</code>å’Œ<code>ç›®å½•ä¸­çš„å†…å®¹</code>å°†ä¼šè¢«å¤åˆ¶åˆ°<code>dir2</code>ä¸­ã€‚</li></ul><p>æœ€åä¸€ä¸ªæ¯”è¾ƒéš¾ç†è§£ï¼Œåšä¸ªä¾‹å­è‡ªå·±è¯•ä¸€ä¸‹ï¼</p><h3 id="ç¤ºä¾‹"><a class="header-anchor" href="#ç¤ºä¾‹">#</a>ç¤ºä¾‹</h3><p>é¦–å…ˆåˆ›å»ºä¸€ä¸‹æµ‹è¯•çš„ç¯å¢ƒï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">onns@DESKTOP-5JJP7PL:~$ ls</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ mkdir dir1</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ mkdir dir2</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ vi dir1/text1</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ vi dir2/text2</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ vi dir1/text3</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ ls dir1/ dir2/</span><br><span class="line">dir1/:</span><br><span class="line">text1  text3</span><br><span class="line"></span><br><span class="line">dir2/:</span><br><span class="line">text2</span><br></pre></td></tr></table></figure><p>ç„¶åæ‰§è¡Œä¸€ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">onns@DESKTOP-5JJP7PL:~$ cp -r dir1 dir2</span><br></pre></td></tr></table></figure><p>ç„¶åæŸ¥çœ‹ç»“æœï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">onns@DESKTOP-5JJP7PL:~$ ls dir1 dir2</span><br><span class="line">dir1:</span><br><span class="line">text1  text3</span><br><span class="line"></span><br><span class="line">dir2:</span><br><span class="line">dir1  text2</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ ls dir1 dir2 dir2/dir1</span><br><span class="line">dir1:</span><br><span class="line">text1  text3</span><br><span class="line"></span><br><span class="line">dir2:</span><br><span class="line">dir1  text2</span><br><span class="line"></span><br><span class="line">dir2/dir1:</span><br><span class="line">text1  text3</span><br></pre></td></tr></table></figure><h2 id="ç§»åŠ¨æ–‡ä»¶"><a class="header-anchor" href="#ç§»åŠ¨æ–‡ä»¶">#</a>ç§»åŠ¨æ–‡ä»¶</h2><p>æ„Ÿè§‰<code>mv</code>å’Œ<code>cp</code>æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯ä¸åŒçš„åœ¨äºï¼Œ<code>mv</code>ç§»åŠ¨æ–‡ä»¶å¤¹çš„æ—¶å€™ä¸éœ€è¦<code>-r</code>ï¼Œè‡ªåŠ¨å®Œæˆçš„ã€‚</p><p>ä¸¤ç§ç”¨æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv item1 item2</span><br></pre></td></tr></table></figure><p>æŠŠæ–‡ä»¶æˆ–ç›®å½•<code>item1</code>ç§»åŠ¨æˆ–é‡å‘½åä¸º<code>item2</code>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv item1... directory</span><br></pre></td></tr></table></figure><p>æŠŠä¸€ä¸ªæˆ–å¤šä¸ªæ¡ç›®ä»ä¸€ä¸ªç›®å½•ç§»åŠ¨åˆ°å¦ä¸€ä¸ªç›®å½•ä¸­ã€‚</p><p><code>mv</code>å‘½ä»¤çš„ä¸€äº›å‚æ•°é€‰é¡¹ï¼š</p><table><thead><tr><th style="text-align:center">é€‰é¡¹</th><th style="text-align:left">é•¿é€‰é¡¹</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:center"><code>-i</code></td><td style="text-align:left"><code>--interactive</code></td><td style="text-align:left">åœ¨é‡å†™ä¸€ä¸ªå·²ç»å­˜åœ¨çš„æ–‡ä»¶ä¹‹å‰ï¼Œæç¤ºç”¨æˆ·ç¡®è®¤ä¿¡æ¯ã€‚å¦‚æœä¸æŒ‡å®šè¿™ä¸ªé€‰é¡¹ï¼Œmv å‘½ä»¤ä¼šé»˜è®¤é‡å†™æ–‡ä»¶å†…å®¹ã€‚</td></tr><tr><td style="text-align:center"><code>-u</code></td><td style="text-align:left"><code>--update</code></td><td style="text-align:left">å½“æŠŠæ–‡ä»¶ä»ä¸€ä¸ªç›®å½•ç§»åŠ¨å¦ä¸€ä¸ªç›®å½•æ—¶ï¼Œåªæ˜¯ç§»åŠ¨ä¸å­˜åœ¨çš„æ–‡ä»¶ï¼Œæˆ–è€…æ–‡ä»¶å†…å®¹æ–°äºç›®æ ‡ç›®å½•ç›¸å¯¹åº”æ–‡ä»¶çš„å†…å®¹ã€‚</td></tr><tr><td style="text-align:center"><code>-v</code></td><td style="text-align:left"><code>--verbose</code></td><td style="text-align:left">æ˜¾ç¤ºè¯¦ç»†çš„å‘½ä»¤æ“ä½œä¿¡æ¯</td></tr></tbody></table><p>ç¤ºä¾‹ï¼š</p><ul><li><code>mv file1 file2</code> ç§»åŠ¨ file1 åˆ° file2ã€‚å¦‚æœ file2 å­˜åœ¨ï¼Œå®ƒçš„å†…å®¹ä¼šè¢« file1 çš„å†…å®¹é‡å†™ã€‚å¦‚æœ file2 ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»º file2ã€‚è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œfile1 éƒ½ä¸å†å­˜åœ¨ã€‚</li><li><code>mv -i file1 file2</code> é™¤äº†å¦‚æœ file2 å­˜åœ¨çš„è¯ï¼Œåœ¨ file2 è¢«é‡å†™ä¹‹å‰ï¼Œç”¨æˆ·ä¼šå¾—åˆ°æç¤ºä¿¡æ¯å¤–ï¼Œè¿™ä¸ªå’Œä¸Šé¢çš„é€‰é¡¹ä¸€æ ·ã€‚</li><li><code>mv file1 file2 dir1</code> ç§»åŠ¨ file1 å’Œ file2 åˆ°ç›®å½• dir1 ä¸­ã€‚dir1 å¿…é¡»å·²ç»å­˜åœ¨ã€‚</li><li><code>mv dir1 dir2</code> å¦‚æœç›®å½• dir2 ä¸å­˜åœ¨ï¼Œåˆ›å»ºç›®å½• dir2ï¼Œå¹¶ä¸”ç§»åŠ¨ç›®å½• dir1 çš„å†…å®¹åˆ°ç›®å½• dir2 ä¸­ï¼ŒåŒæ—¶åˆ é™¤ç›®å½• dir1ã€‚å¦‚æœç›®å½• dir2 å­˜åœ¨ï¼Œç§»åŠ¨ç›®å½•<code>dir1</code>åŠ<code>å®ƒçš„å†…å®¹</code>åˆ°ç›®å½•<code>dir2</code>ã€‚</li></ul><h2 id="åˆ é™¤æ–‡ä»¶"><a class="header-anchor" href="#åˆ é™¤æ–‡ä»¶">#</a>åˆ é™¤æ–‡ä»¶</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm item...</span><br></pre></td></tr></table></figure><p>æ„Ÿè§‰åœ¨ linux ä¸‹ç¬¬ä¸€ä¸ªçŸ¥é“çš„å‘½ä»¤å¤§æ¦‚å°±æ˜¯<code>rm -rf /*</code>å§â€¦</p><p>ä¸€äº›é€‰é¡¹ï¼š</p><table><thead><tr><th style="text-align:center">é€‰é¡¹</th><th style="text-align:left">é•¿é€‰é¡¹</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:center"><code>-i</code></td><td style="text-align:left"><code>--interactive</code></td><td style="text-align:left">åœ¨åˆ é™¤å·²å­˜åœ¨çš„æ–‡ä»¶å‰ï¼Œæç¤ºç”¨æˆ·ç¡®è®¤ä¿¡æ¯ã€‚å¦‚æœä¸æŒ‡å®šè¿™ä¸ªé€‰é¡¹ï¼Œrm ä¼šé»˜é»˜åœ°åˆ é™¤æ–‡ä»¶</td></tr><tr><td style="text-align:center"><code>-r</code></td><td style="text-align:left"><code>--recursive</code></td><td style="text-align:left">é€’å½’åœ°åˆ é™¤æ–‡ä»¶ï¼Œè¿™æ„å‘³ç€ï¼Œå¦‚æœè¦åˆ é™¤ä¸€ä¸ªç›®å½•ï¼Œè€Œæ­¤ç›®å½•åˆåŒ…å«å­ç›®å½•ï¼Œé‚£ä¹ˆå­ç›®å½•ä¹Ÿä¼šè¢«åˆ é™¤ã€‚è¦åˆ é™¤ä¸€ä¸ªç›®å½•ï¼Œå¿…é¡»æŒ‡å®šè¿™ä¸ªé€‰é¡¹ã€‚</td></tr><tr><td style="text-align:center"><code>-f</code></td><td style="text-align:left"><code>--force</code></td><td style="text-align:left">å¿½è§†ä¸å­˜åœ¨çš„æ–‡ä»¶ï¼Œä¸æ˜¾ç¤ºæç¤ºä¿¡æ¯ã€‚è¿™é€‰é¡¹è¦†ç›–äº†<code>--interactive</code>é€‰é¡¹ã€‚</td></tr><tr><td style="text-align:center"><code>-v</code></td><td style="text-align:left"><code>--verbose</code></td><td style="text-align:left">æ˜¾ç¤ºè¯¦ç»†çš„å‘½ä»¤æ“ä½œä¿¡æ¯</td></tr></tbody></table><p><strong>ç±» Unix ç³»ç»Ÿï¼Œæ˜¯æ²¡æœ‰å¤åŸå‘½ä»¤çš„</strong></p><p>å½“ä½ ä½¿ç”¨å¸¦æœ‰é€šé…ç¬¦çš„<code>rm</code>å‘½ä»¤æ—¶ï¼Œé™¤äº†ä»”ç»†æ£€æŸ¥è¾“å…¥çš„å†…å®¹å¤–ï¼Œå…ˆç”¨<code>ls</code>å‘½ä»¤æ¥æµ‹è¯•é€šé…ã€‚<br>å½“ä½ ä½¿ç”¨å¸¦æœ‰é€šé…ç¬¦çš„<code>rm</code>å‘½ä»¤æ—¶ï¼Œé™¤äº†ä»”ç»†æ£€æŸ¥è¾“å…¥çš„å†…å®¹å¤–ï¼Œå…ˆç”¨<code>ls</code>å‘½ä»¤æ¥æµ‹è¯•é€šé…ã€‚<br>å½“ä½ ä½¿ç”¨å¸¦æœ‰é€šé…ç¬¦çš„<code>rm</code>å‘½ä»¤æ—¶ï¼Œé™¤äº†ä»”ç»†æ£€æŸ¥è¾“å…¥çš„å†…å®¹å¤–ï¼Œå…ˆç”¨<code>ls</code>å‘½ä»¤æ¥æµ‹è¯•é€šé…ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rm *.html <span class="comment"># åˆ é™¤æ‰€æœ‰htmlæ–‡ä»¶</span></span><br><span class="line">rm * .html <span class="comment"># ä¼šåˆ é™¤ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå¹¶æç¤ºæ²¡æœ‰â€œ.htmlâ€æ–‡ä»¶</span></span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºé“¾æ¥"><a class="header-anchor" href="#åˆ›å»ºé“¾æ¥">#</a>åˆ›å»ºé“¾æ¥</h2><p>ç¡¬é“¾æ¥ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln file link</span><br></pre></td></tr></table></figure><p>ç¬¦å·é“¾æ¥ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s item link</span><br></pre></td></tr></table></figure><p><code>item</code>å¯ä»¥æ˜¯ä¸€ä¸ªæ–‡ä»¶æˆ–æ˜¯ä¸€ä¸ªç›®å½•ã€‚</p><p><code>ç¡¬é“¾æ¥</code>çš„ç¼ºç‚¹ï¼š</p><ul><li>ä¸€ä¸ªç¡¬é“¾æ¥ä¸èƒ½å…³è”å®ƒæ‰€åœ¨æ–‡ä»¶ç³»ç»Ÿä¹‹å¤–çš„æ–‡ä»¶ã€‚è¿™æ˜¯è¯´ä¸€ä¸ªé“¾æ¥ä¸èƒ½å…³è”ä¸é“¾æ¥æœ¬èº«ä¸åœ¨åŒä¸€ä¸ªç£ç›˜åˆ†åŒºä¸Šçš„æ–‡ä»¶ã€‚</li><li>ä¸€ä¸ªç¡¬é“¾æ¥ä¸èƒ½å…³è”ä¸€ä¸ªç›®å½•ã€‚</li></ul><p>ä¸€ä¸ªç¡¬é“¾æ¥å’Œæ–‡ä»¶æœ¬èº«æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚</p><p>å½“ä¸€ä¸ªç¡¬é“¾æ¥è¢«åˆ é™¤æ—¶ï¼Œè¿™ä¸ªé“¾æ¥è¢«åˆ é™¤ï¼Œä½†æ˜¯æ–‡ä»¶æœ¬èº«çš„å†…å®¹ä»ç„¶å­˜åœ¨ï¼Œç›´åˆ°æ‰€æœ‰å…³è”è¿™ä¸ªæ–‡ä»¶çš„é“¾æ¥éƒ½åˆ é™¤æ‰ã€‚</p><p>å½“ä½ åˆ é™¤ä¸€ä¸ªç¬¦å·é“¾æ¥æ—¶ï¼Œåªæœ‰è¿™ä¸ªé“¾æ¥è¢«åˆ é™¤ï¼Œè€Œä¸æ˜¯æ–‡ä»¶è‡ªèº«ã€‚</p><p>å¦‚æœå…ˆäºç¬¦å·é“¾æ¥åˆ é™¤æ–‡ä»¶ï¼Œè¿™ä¸ªé“¾æ¥<code>ä»ç„¶å­˜åœ¨</code>ï¼Œä½†æ˜¯ä¸æŒ‡å‘ä»»ä½•ä¸œè¥¿ã€‚ï¼ˆä¼šè¢« ls å‘½ä»¤æ ‡çº¢ï¼Œè¡¨ç¤º<code>åé“¾æ¥</code>ï¼‰</p><h3 id="æµ‹è¯•"><a class="header-anchor" href="#æµ‹è¯•">#</a>æµ‹è¯•</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">onns@DESKTOP-5JJP7PL:~$ vi fun</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ ln fun fun-hard</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ ls</span><br><span class="line">fun  fun-hard</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ ls -l</span><br><span class="line">total 0</span><br><span class="line">-rw-r--r-- 2 onns onns 19 Nov  6 14:23 fun</span><br><span class="line">-rw-r--r-- 2 onns onns 19 Nov  6 14:23 fun-hard</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ ls -li</span><br><span class="line">total 0</span><br><span class="line">35465847065606899 -rw-r--r-- 2 onns onns 19 Nov  6 14:23 fun</span><br><span class="line">35465847065606899 -rw-r--r-- 2 onns onns 19 Nov  6 14:23 fun-hard</span><br></pre></td></tr></table></figure><p>å¯ä»¥é€šè¿‡<code>-i</code>å‚æ•°æ¥å±•ç¤ºæ–‡ä»¶ç´¢å¼•èŠ‚ç‚¹çš„ä¿¡æ¯ï¼Œå¯ä»¥çœ‹å‡ºè¿™å®é™…ä¸Šæ˜¯ç´¢å¼•çš„åŒä¸€ä¸ªæ–‡ä»¶ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">onns@DESKTOP-5JJP7PL:~$ ln -s fun fun-sym</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ ls -l</span><br><span class="line">total 0</span><br><span class="line">-rw-r--r-- 2 onns onns 19 Nov  6 14:23 fun</span><br><span class="line">-rw-r--r-- 2 onns onns 19 Nov  6 14:23 fun-hard</span><br><span class="line">lrwxrwxrwx 1 onns onns  3 Nov  6 14:25 fun-sym -&gt; fun</span><br></pre></td></tr></table></figure><p><code>ç¬¦å·é“¾æ¥</code>çš„å¤§å°æ˜¯æŒ‡å‘æ–‡ä»¶å­—ç¬¦çš„å¤§å°ï¼Œè€Œä¸æ˜¯å®é™…å¤§å°ï¼Œå› ä¸º<code>fun-sym</code>æŒ‡å‘çš„æ˜¯<code>fun</code>ï¼Œ<code>fun</code>æœ‰<code>ä¸‰ä¸ªå­—ç¬¦</code>ï¼Œæ‰€ä»¥å¤§å°æ˜¯<code>3</code>ã€‚</p><p>å¯¹äºç¬¦å·é“¾æ¥ï¼Œæœ‰ä¸€ç‚¹å€¼å¾—è®°ä½ï¼Œæ‰§è¡Œçš„å¤§å¤šæ•°æ–‡ä»¶æ“ä½œæ˜¯é’ˆå¯¹é“¾æ¥çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯é“¾æ¥æœ¬èº«ã€‚</p><p>è€Œ<code>rm</code>å‘½ä»¤æ˜¯ä¸ªç‰¹ä¾‹ã€‚å½“ä½ åˆ é™¤é“¾æ¥çš„æ—¶å€™ï¼Œ<strong>åˆ é™¤é“¾æ¥æœ¬èº«</strong>ï¼Œè€Œä¸æ˜¯é“¾æ¥çš„å¯¹è±¡ã€‚</p><h2 id="å‘½ä»¤"><a class="header-anchor" href="#å‘½ä»¤">#</a>å‘½ä»¤</h2><p>å››ç§å‘½ä»¤çš„å½¢å¼ï¼š</p><ol><li>ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åº</li><li>ä¸€ä¸ªå†…å»ºäº<code>shell</code>è‡ªèº«çš„å‘½ä»¤ï¼Œå†…éƒ¨å‘½ä»¤</li><li>ä¸€ä¸ª<code>shell</code>å‡½æ•°</li><li>ä¸€ä¸ªå‘½ä»¤åˆ«å</li></ol><h2 id="type"><a class="header-anchor" href="#type">#</a>type</h2><p><code>type</code>å‘½ä»¤æ˜¯<code>shell</code>å†…éƒ¨å‘½ä»¤ï¼Œå®ƒä¼šæ˜¾ç¤ºå‘½ä»¤çš„ç±»åˆ«ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">type</span> <span class="built_in">command</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">onns@DESKTOP-5JJP7PL:~$ <span class="built_in">type</span> <span class="built_in">type</span></span><br><span class="line"><span class="built_in">type</span> is a shell <span class="built_in">builtin</span></span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ <span class="built_in">type</span> ls</span><br><span class="line">ls is aliased to `ls --color=auto`</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ <span class="built_in">type</span> cp</span><br><span class="line">cp is /bin/cp</span><br></pre></td></tr></table></figure><h2 id="which"><a class="header-anchor" href="#which">#</a>which</h2><p><code>which</code>ç”¨æ¥æŸ¥æ‰¾ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºçš„ä½ç½®ï¼Œå› ä¸ºä¸€ä¸ªç¨‹åºå¯èƒ½æœ‰å¾ˆå¤šä¸ªç‰ˆæœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">which</span> <span class="built_in">command</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">onns@DESKTOP-5JJP7PL:~$ <span class="built_in">which</span> ls</span><br><span class="line">/bin/ls</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ <span class="built_in">which</span> win-lab406</span><br><span class="line">/mnt/d/weiyun/Code/bash/win-lab406</span><br></pre></td></tr></table></figure><p><strong>è¿™ä¸ªå‘½ä»¤åªå¯¹å¯æ‰§è¡Œç¨‹åºæœ‰æ•ˆï¼Œä¸åŒ…æ‹¬å†…å»ºå‘½ä»¤å’Œå‘½ä»¤åˆ«åã€‚</strong></p><p>ç¬¬äºŒä¸ªå‘½ä»¤æ˜¯æˆ‘è‡ªå·±å†™çš„ã€‚</p><p>å½“æˆ‘ä¼å›¾æŸ¥æ‰¾å†…éƒ¨å‘½ä»¤çš„æ—¶å€™ï¼Œæ ¹æœ¬æ‰¾ä¸åˆ°= =ï¼Œä»€ä¹ˆæç¤ºéƒ½æ²¡æœ‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">onns@DESKTOP-5JJP7PL:~$ <span class="built_in">which</span> <span class="built_in">cd</span></span><br><span class="line">onns@DESKTOP-5JJP7PL:~$</span><br></pre></td></tr></table></figure><h2 id="help"><a class="header-anchor" href="#help">#</a>help</h2><p><code>help</code>å‘½ä»¤å¤§æ¦‚å°±æ˜¯ç”¨æ¥æç¤ºä½ è¿™ä¸ªå‘½ä»¤æ€ä¹ˆç”¨çš„å§â€¦</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">help</span> <span class="built_in">command</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">onns@DESKTOP-5JJP7PL:~$ <span class="built_in">help</span> <span class="built_in">cd</span></span><br><span class="line"><span class="built_in">cd</span>: <span class="built_in">cd</span> [-L|[-P [-e]] [-@]] [dir]</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>å‡ºç°åœ¨å‘½ä»¤è¯­æ³•è¯´æ˜ä¸­çš„æ–¹æ‹¬å·ï¼Œè¡¨ç¤º<code>å¯é€‰çš„</code>é¡¹ç›®ã€‚<br><code>ä¸€ä¸ªç«–æ å­—ç¬¦</code>è¡¨ç¤ºäº’æ–¥é€‰é¡¹ã€‚</p><blockquote><p>è™½<code>cd</code>å‘½ä»¤çš„å¸®åŠ©æ–‡æ¡£å¾ˆç®€æ´å‡†ç¡®ï¼Œä½†å®ƒå†³ä¸æ˜¯æ•™ç¨‹ã€‚<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup></p></blockquote><p><code>--help</code>æ˜¯ä¸€ä¸ªå¾ˆå¤šç¨‹åºæ”¯æŒçš„é€‰é¡¹ï¼Œä½œç”¨æ˜¯ï¼š<strong>æ˜¾ç¤ºå‘½ä»¤æ‰€æ”¯æŒçš„è¯­æ³•å’Œé€‰é¡¹è¯´æ˜</strong>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">onns@DESKTOP-5JJP7PL:~$ mkdir --<span class="built_in">help</span></span><br><span class="line">Usage: mkdir [OPTION]... DIRECTORY...</span><br><span class="line">Create the DIRECTORY(ies), <span class="keyword">if</span> they <span class="keyword">do</span> not already exist.</span><br><span class="line"></span><br><span class="line">Mandatory arguments to long options are mandatory <span class="keyword">for</span> short options too.</span><br><span class="line">  -m, --mode=MODE   <span class="built_in">set</span> file mode (as <span class="keyword">in</span> chmod), not a=rwx - <span class="built_in">umask</span></span><br><span class="line">  -p, --parents     no error <span class="keyword">if</span> existing, make parent directories as needed</span><br><span class="line">  -v, --verbose     <span class="built_in">print</span> a message <span class="keyword">for</span> each created directory</span><br><span class="line">  -Z                   <span class="built_in">set</span> SELinux security context of each created directory</span><br><span class="line">                         to the default <span class="built_in">type</span></span><br><span class="line">      --context[=CTX]  like -Z, or <span class="keyword">if</span> CTX is specified <span class="keyword">then</span> <span class="built_in">set</span> the SELinux</span><br><span class="line">                         or SMACK security context to CTX</span><br><span class="line">      --<span class="built_in">help</span>     display this <span class="built_in">help</span> and <span class="built_in">exit</span></span><br><span class="line">      --version  output version information and <span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line">GNU coreutils online <span class="built_in">help</span>: &lt;http://www.gnu.org/software/coreutils/&gt;</span><br><span class="line">Report mkdir translation bugs to &lt;http://translationproject.org/team/&gt;</span><br><span class="line">Full documentation at: &lt;http://www.gnu.org/software/coreutils/mkdir&gt;</span><br><span class="line">or available locally via: info <span class="string">'(coreutils) mkdir invocation'</span></span><br></pre></td></tr></table></figure><h2 id="man"><a class="header-anchor" href="#man">#</a>man</h2><p><code>man</code>å‘½ä»¤ç”¨æ¥æŸ¥çœ‹ä¸€äº›ç¨‹åºçš„æ–‡æ¡£æ‰‹å†Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">man program</span><br></pre></td></tr></table></figure><p>æ‰‹å†Œæ–‡æ¡£çš„æ ¼å¼æœ‰ç‚¹ä¸åŒï¼Œä¸€èˆ¬åœ°åŒ…å«<code>ä¸€ä¸ªæ ‡é¢˜</code>ã€<code>å‘½ä»¤è¯­æ³•çš„çº²è¦</code>ã€<code>å‘½ä»¤ç”¨é€”çš„è¯´æ˜</code>ã€ä»¥åŠ<code>æ¯ä¸ªå‘½ä»¤é€‰é¡¹</code>çš„åˆ—è¡¨å’Œè¯´æ˜ã€‚<strong>æ‰‹å†Œæ–‡æ¡£é€šå¸¸å¹¶ä¸åŒ…å«å®ä¾‹ã€‚</strong></p><p>åœ¨å¤§å¤š<code>Linux</code>ç³»ç»Ÿä¸­ï¼Œ<code>man</code>ä½¿<code>less</code>å·¥å…·æ¥æ˜¾ç¤ºå‚è€ƒæ‰‹å†Œï¼Œæ‰€ä»¥å½“æµè§ˆæ–‡æ¡£æ—¶ï¼Œä½ æ‰€ç†Ÿ<code>less</code>æ‚‰å‘½ä»¤éƒ½èƒ½æœ‰æ•ˆã€‚<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup></p><p>å‚è€ƒæ‰‹å†Œæœ‰å¾ˆå¤šä¸åŒçš„ç« èŠ‚ï¼š</p><table><thead><tr><th style="text-align:center">ç« èŠ‚</th><th style="text-align:left">å†…å®¹</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:left">ç”¨æˆ·å‘½ä»¤</td></tr><tr><td style="text-align:center">2</td><td style="text-align:left">ç¨‹åºæ¥å£å†…æ ¸ç³»ç»Ÿè°ƒç”¨</td></tr><tr><td style="text-align:center">3</td><td style="text-align:left">C åº“å‡½æ•°ç¨‹åºæ¥å£</td></tr><tr><td style="text-align:center">4</td><td style="text-align:left">ç‰¹æ®Šæ–‡ä»¶ï¼Œæ¯”å¦‚è¯´è®¾å¤‡ç»“ç‚¹å’Œé©±åŠ¨ç¨‹åº</td></tr><tr><td style="text-align:center">5</td><td style="text-align:left">æ–‡ä»¶æ ¼å¼</td></tr><tr><td style="text-align:center">6</td><td style="text-align:left">æ¸¸æˆå¨±ä¹ï¼Œå¦‚å±å¹•ä¿æŠ¤ç¨‹åº</td></tr><tr><td style="text-align:center">7</td><td style="text-align:left">å…¶ä»–æ–¹é¢</td></tr><tr><td style="text-align:center">8</td><td style="text-align:left">ç³»ç»Ÿç®¡ç†å‘˜å‘½ä»¤</td></tr></tbody></table><p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æŸ¥çœ‹å‚è€ƒæ‰‹å†Œçš„ç‰¹å®šç« èŠ‚ï¼Œä»è€Œæ‰¾åˆ°æˆ‘ä»¬éœ€è¦çš„ä¿¡æ¯ã€‚å¦‚æœæˆ‘ä»¬è¦æŸ¥æ‰¾ä¸€ç§æ–‡ä»¶æ ¼å¼ï¼Œè€ŒåŒæ—¶å®ƒä¹Ÿæ˜¯ä¸€ä¸ªå‘½ä»¤åæ—¶, è¿™ç§æƒ…å†µå°¤å…¶æ­£ç¡®ã€‚æ²¡æœ‰æŒ‡å®šç« èŠ‚å·ï¼Œæˆ‘ä»¬æ€»æ˜¯å¾—åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹ï¼Œå¯èƒ½åœ¨ç¬¬ä¸€ç« èŠ‚ã€‚æˆ‘ä»¬è¿™æ ·ä½¿ç”¨<code>man</code>å‘½ä»¤ï¼Œæ¥æŒ‡å®šç« èŠ‚å·ï¼š<sup class="footnote-ref"><a href="#fn4" id="fnref4">[4]</a></sup></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">man section search_term</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">onns@DESKTOP-5JJP7PL:~$ man 5 passwd</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$</span><br></pre></td></tr></table></figure><h2 id="alias"><a class="header-anchor" href="#alias">#</a>alias</h2><p><code>alias</code>ç”¨æ¥åˆ›å»ºåˆ«åï¼Œå¯ä»¥æŠŠå¤šä¸ªå‘½ä»¤æ”¾åœ¨åŒä¸€è¡Œï¼Œå‘½ä»¤ä¹‹é—´ç”¨<code>;</code>åˆ†éš”ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">alias</span> name=<span class="string">'command1; command2; command3...'</span></span><br></pre></td></tr></table></figure><p>åœ¨åˆ›å»ºåˆ«åçš„æ—¶å€™ï¼Œåº”è¯¥ç”¨<code>type</code>æ¥æµ‹è¯•ä¸€ä¸‹è¿™ä¸ª<code>åˆ«å</code>æœ‰æ²¡æœ‰è¢«ç”¨è¿‡ã€‚</p><p>åˆ é™¤åˆ«åï¼Œä½¿ç”¨<code>unalias</code>å‘½ä»¤ã€‚</p><p>åœ¨å‘½ä»¤è¡Œé‡Œå®šä¹‰çš„åˆ«åï¼Œ<code>shellå…³é—­</code>ä¹‹åå°±ä¼šæ¶ˆå¤±ã€‚</p><h2 id="æ ‡å‡†è¾“å…¥ã€è¾“å‡ºå’Œé”™è¯¯"><a class="header-anchor" href="#æ ‡å‡†è¾“å…¥ã€è¾“å‡ºå’Œé”™è¯¯">#</a>æ ‡å‡†è¾“å…¥ã€è¾“å‡ºå’Œé”™è¯¯</h2><p><code>Unix</code>ä¸‹ä¸‡ç‰©çš†æ–‡ä»¶ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>æ ‡å‡†è¾“å‡º</code>å’Œ<code>æ ‡å‡†é”™è¯¯</code>éƒ½è¿æ¥åˆ°å±å¹•ï¼Œå³<code>stdout</code>å’Œ<code>stderr</code>ã€‚<code>æ ‡å‡†è¾“å…¥</code>è¿æ¥åˆ°é”®ç›˜ä¸Šï¼Œå³<code>stdin</code>ã€‚</p><h2 id="æ ‡å‡†è¾“å‡ºé‡å®šå‘"><a class="header-anchor" href="#æ ‡å‡†è¾“å‡ºé‡å®šå‘">#</a>æ ‡å‡†è¾“å‡ºé‡å®šå‘</h2><p>ä½¿ç”¨<code>&gt;</code>é‡å®šå‘ç¬¦åæ¥æ–‡ä»¶åå°†æ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°é™¤å±å¹•ä»¥å¤–çš„å¦ä¸€ä¸ªæ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">command</span> &gt; filename</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">onns@DESKTOP-5JJP7PL:~$ ls -l /usr/bin &gt; ls-output.txt</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ ls -l ls-output.txt</span><br><span class="line">-rw-r--r-- 1 onns onns 44260 Nov  9 12:56 ls-output.txt</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">onns@DESKTOP-5JJP7PL:~$ ls -l /bin/usr &gt; ls-output.txt</span><br><span class="line">ls: cannot access <span class="string">'/bin/usr'</span>: No such file or directory</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ ls -l ls-output.txt</span><br><span class="line">-rw-r--r-- 1 onns onns 0 Nov  9 12:59 ls-output.txt</span><br></pre></td></tr></table></figure><p><code>ls</code>ç¨‹åºä¸æŠŠå®ƒçš„<code>é”™è¯¯ä¿¡æ¯</code>è¾“é€åˆ°<code>æ ‡å‡†è¾“å‡º</code>ã€‚</p><p>è€Œä¸”ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨<code>&gt;</code>é‡å®šå‘ç¬¦æ¥é‡å®šå‘è¾“å‡ºç»“æœæ—¶ï¼Œç›®æ ‡æ–‡ä»¶æ€»æ˜¯ä»<code>å¼€å¤´è¢«é‡å†™</code>ã€‚</p><p>å¿«é€Ÿ<code>æ¸…ç©ºä¸€ä¸ªæ–‡ä»¶å†…å®¹</code>æˆ–è€…<code>åˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºæ–‡ä»¶</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; ls-output.txt</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>&gt;&gt;</code>æ“ä½œç¬¦ï¼Œå°†å¯¼è‡´è¾“å‡ºç»“æœæ·»åŠ åˆ°æ–‡ä»¶å†…å®¹ä¹‹åï¼Œå³<code>è¿½åŠ </code>ã€‚å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œæ–‡ä»¶ä¼šè¢«åˆ›å»ºã€‚</p><h2 id="æ ‡å‡†é”™è¯¯é‡å®šå‘"><a class="header-anchor" href="#æ ‡å‡†é”™è¯¯é‡å®šå‘">#</a>æ ‡å‡†é”™è¯¯é‡å®šå‘</h2><p><code>stdin</code>ã€<code>stdout</code>å’Œ<code>stderr</code>åœ¨<code>shell</code>å†…éƒ¨è¢«ç§°ä¸º<strong>æ–‡ä»¶æè¿°ç¬¦</strong><code>0</code>ã€<code>1</code>å’Œ<code>2</code>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -l /bin/usr 2&gt; ls-error.txt</span><br></pre></td></tr></table></figure><p><code>2</code>å’Œ<code>&gt;</code>è¦ç´§æŒ¨ç€ï¼Œä¸ç„¶ä¼šæŠ¥é”™ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">onns@DESKTOP-5JJP7PL:~$ ls -l /bin/usr 2 &gt; ls-error.txt</span><br><span class="line">ls: cannot access <span class="string">'/bin/usr'</span>: No such file or directory</span><br><span class="line">ls: cannot access <span class="string">'2'</span>: No such file or directory</span><br></pre></td></tr></table></figure><p>å¦‚æœæƒ³è¦æŠŠæ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯ä¸€èµ·é‡å®šå‘ï¼Œæœ‰ä¸¤ç§æ–¹æ³•ï¼Œè€æ–¹æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -l /bin/usr &gt; ls-output.txt 2&gt;&amp;1</span><br></pre></td></tr></table></figure><p><strong>æ ‡å‡†é”™è¯¯çš„é‡å®šå‘å¿…é¡»æ€»æ˜¯å‡ºç°åœ¨æ ‡å‡†è¾“å‡ºé‡å®šå‘ä¹‹åã€‚</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">onns@DESKTOP-5JJP7PL:~$ ls -l /bin/usr &gt; ls-output.txt <span class="comment"># é”™è¯¯è¿˜æ˜¯ä¼šè¾“å‡ºåˆ°æ ‡å‡†è¾“å‡º</span></span><br><span class="line">ls: cannot access <span class="string">'/bin/usr'</span>: No such file or directory</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ cat ls-output.txt <span class="comment"># æ–‡ä»¶é‡Œæ²¡æœ‰ä¸œè¥¿</span></span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ ls -l /bin/usr &gt; ls-output.txt 2&gt;&amp;1 <span class="comment"># æ­£ç¡®å†™æ³•</span></span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ cat ls-output.txt <span class="comment"># æ–‡ä»¶å†…å®¹æ­£å¸¸</span></span><br><span class="line">ls: cannot access <span class="string">'/bin/usr'</span>: No such file or directory</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ ls -l /bin/usr 2&gt;&amp;1 &gt; ls-output.txt <span class="comment"># æ ‡å‡†é”™è¯¯çš„é‡å®šå‘å¿…é¡»æ€»æ˜¯å‡ºç°åœ¨æ ‡å‡†è¾“å‡ºé‡å®šå‘ä¹‹å</span></span><br><span class="line">ls: cannot access <span class="string">'/bin/usr'</span>: No such file or directory</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ cat ls-output.txt</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒç§æ–¹æ³•æ˜¯<code>&amp;&gt;</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">onns@DESKTOP-5JJP7PL:~$ cat ls-output.txt</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ ls -l /bin/usr &amp;&gt; ls-output.txt</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ cat ls-output.txt</span><br><span class="line">ls: cannot access <span class="string">'/bin/usr'</span>: No such file or directory</span><br></pre></td></tr></table></figure><p><code>/dev/null</code>æ–‡ä»¶æ˜¯ç³»ç»Ÿè®¾å¤‡ï¼Œå«åš<code>ä½å­˜å‚¨æ¡¶</code>ï¼Œå®ƒå¯ä»¥æ¥å—è¾“å…¥ï¼Œå¹¶ä¸”å¯¹è¾“å…¥ä¸åšä»»ä½•å¤„ç†ã€‚<br>å¯ä»¥æŠŠä¸éœ€è¦çš„ä¸œè¥¿è¾“å‡ºç»™åƒåœ¾æ¡¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -l /bin/usr 2&gt; /dev/null</span><br></pre></td></tr></table></figure><h2 id="cat"><a class="header-anchor" href="#cat">#</a>cat</h2><p><code>cat</code>å‘½ä»¤è¯»å–ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ï¼Œç„¶åå¤åˆ¶å®ƒä»¬åˆ°æ ‡å‡†è¾“å‡ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat [file]</span><br></pre></td></tr></table></figure><p><code>cat</code>ç»å¸¸è¢«ç”¨æ¥æ˜¾ç¤ºç®€çŸ­çš„æ–‡æœ¬æ–‡ä»¶ã€‚</p><p><code>cat</code>å¯ä»¥æŠŠå¤šä¸ªåˆ†ç‰‡çš„æ–‡ä»¶è¿åœ¨ä¸€èµ·ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat movie.mpeg.0* &gt; movie.mpeg</span><br></pre></td></tr></table></figure><p>å› ä¸ºé€šé…ç¬¦æ€»æ˜¯ä»¥æœ‰åºçš„æ–¹å¼å±•å¼€ï¼Œæ‰€ä»¥è¿™äº›å‚æ•°ä¼šä»¥æ­£ç¡®é¡ºåºå®‰æ’ã€‚</p><p><code>cat</code>å¦‚æœä¸åŠ å‚æ•°ç›´æ¥è¿è¡Œï¼Œå°†é»˜è®¤è¿æ¥<code>æ ‡å‡†è¾“å…¥</code>å’Œ<code>æ ‡å‡†è¾“å‡º</code>ã€‚å¯ä»¥ä½¿ç”¨è¿™ç§è¡Œä¸ºæ¥åˆ›å»ºç®€çŸ­çš„æ–‡æœ¬æ–‡ä»¶ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">onns@liupans-MacBook-Air ~ % cat &gt; lazy_dog.txt</span><br><span class="line">The quick brown fox jumped over the lazy dog.%</span><br><span class="line">onns@liupans-MacBook-Air ~ % cat lazy_dog.txt</span><br><span class="line">The quick brown fox jumped over the lazy dog.%</span><br></pre></td></tr></table></figure><p>è¾“å…¥<code>Ctrl-d</code>å¯ä»¥å‘Šè¯‰<code>cat</code>å·²ç»åˆ°è¾¾æ–‡ä»¶æœ«å°¾<code>EOF</code>ã€‚</p><h2 id="åŒ¿åç®¡é“"><a class="header-anchor" href="#åŒ¿åç®¡é“">#</a>åŒ¿åç®¡é“</h2><p><code>|</code>å¯ä»¥è®©ä¸€ä¸ªå‘½ä»¤çš„æ ‡å‡†è¾“å‡ºé€šè¿‡ç®¡é“é€è‡³å¦ä¸€ä¸ªå‘½ä»¤çš„æ ‡å‡†è¾“å…¥ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">command1 | command2</span><br></pre></td></tr></table></figure><h2 id="sort"><a class="header-anchor" href="#sort">#</a>sort</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">$ sort --<span class="built_in">help</span></span><br><span class="line">Usage: sort [OPTION]... [FILE]...</span><br><span class="line">  or:  sort [OPTION]... --files0-from=F</span><br><span class="line">Write sorted concatenation of all FILE(s) to standard output.</span><br><span class="line"></span><br><span class="line">Mandatory arguments to long options are mandatory <span class="keyword">for</span> short options too.</span><br><span class="line">Ordering options:</span><br><span class="line"></span><br><span class="line">  -b, --ignore-leading-blanks  ignore leading blanks</span><br><span class="line">  -d, --dictionary-order      consider only blanks and alphanumeric characters</span><br><span class="line">  -f, --ignore-case           fold lower <span class="keyword">case</span> to upper <span class="keyword">case</span> characters</span><br><span class="line">  -g, --general-numeric-sort  compare according to general numerical value</span><br><span class="line">  -i, --ignore-nonprinting    consider only printable characters</span><br><span class="line">  -M, --month-sort            compare (unknown) &lt; <span class="string">'JAN'</span> &lt; ... &lt; <span class="string">'DEC'</span></span><br><span class="line">  -h, --human-numeric-sort    compare human readable numbers (e.g., 2K 1G)</span><br><span class="line">  -n, --numeric-sort          compare according to string numerical value</span><br><span class="line">  -R, --random-sort           sort by random <span class="built_in">hash</span> of keys</span><br><span class="line">      --random-source=FILE    get random bytes from FILE</span><br><span class="line">  -r, --reverse               reverse the result of comparisons</span><br><span class="line">      --sort=WORD             sort according to WORD:</span><br><span class="line">                                general-numeric -g, human-numeric -h, month -M,</span><br><span class="line">                                numeric -n, random -R, version -V</span><br><span class="line">  -V, --version-sort          natural sort of (version) numbers within text</span><br><span class="line"></span><br><span class="line">Other options:</span><br><span class="line"></span><br><span class="line">      --batch-size=NMERGE   merge at most NMERGE inputs at once;</span><br><span class="line">                            <span class="keyword">for</span> more use temp files</span><br><span class="line">  -c, --check, --check=diagnose-first  check <span class="keyword">for</span> sorted input; <span class="keyword">do</span> not sort</span><br><span class="line">  -C, --check=quiet, --check=silent  like -c, but <span class="keyword">do</span> not report first bad line</span><br><span class="line">      --compress-program=PROG  compress temporaries with PROG;</span><br><span class="line">                              decompress them with PROG -d</span><br><span class="line">      --debug               annotate the part of the line used to sort,</span><br><span class="line">                              and warn about questionable usage to stderr</span><br><span class="line">      --files0-from=F       <span class="built_in">read</span> input from the files specified by</span><br><span class="line">                            NUL-terminated names <span class="keyword">in</span> file F;</span><br><span class="line">                            If F is - <span class="keyword">then</span> <span class="built_in">read</span> names from standard input</span><br><span class="line">  -k, --key=KEYDEF          sort via a key; KEYDEF gives location and <span class="built_in">type</span></span><br><span class="line">  -m, --merge               merge already sorted files; <span class="keyword">do</span> not sort</span><br><span class="line">  -o, --output=FILE         write result to FILE instead of standard output</span><br><span class="line">  -s, --stable              stabilize sort by disabling last-resort comparison</span><br><span class="line">  -S, --buffer-size=SIZE    use SIZE <span class="keyword">for</span> main memory buffer</span><br><span class="line">  -t, --field-separator=SEP  use SEP instead of non-blank to blank transition</span><br><span class="line">  -T, --temporary-directory=DIR  use DIR <span class="keyword">for</span> temporaries, not <span class="variable">$TMPDIR</span> or /tmp;</span><br><span class="line">                              multiple options specify multiple directories</span><br><span class="line">      --parallel=N          change the number of sorts run concurrently to N</span><br><span class="line">  -u, --unique              with -c, check <span class="keyword">for</span> strict ordering;</span><br><span class="line">                              without -c, output only the first of an equal run</span><br><span class="line">  -z, --zero-terminated     end lines with 0 byte, not newline</span><br><span class="line">      --<span class="built_in">help</span>     display this <span class="built_in">help</span> and <span class="built_in">exit</span></span><br><span class="line">      --version  output version information and <span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line">KEYDEF is F[.C][OPTS][,F[.C][OPTS]] <span class="keyword">for</span> start and stop position, <span class="built_in">where</span> F is a</span><br><span class="line">field number and C a character position <span class="keyword">in</span> the field; both are origin 1, and</span><br><span class="line">the stop position defaults to the line<span class="string">'s end.  If neither -t nor -b is in</span></span><br><span class="line"><span class="string">effect, characters in a field are counted from the beginning of the preceding</span></span><br><span class="line"><span class="string">whitespace.  OPTS is one or more single-letter ordering options [bdfgiMhnRrV],</span></span><br><span class="line"><span class="string">which override global ordering options for that key.  If no key is given, use</span></span><br><span class="line"><span class="string">the entire line as the key.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">SIZE may be followed by the following multiplicative suffixes:</span></span><br><span class="line"><span class="string">% 1% of memory, b 1, K 1024 (default), and so on for M, G, T, P, E, Z, Y.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">With no FILE, or when FILE is -, read standard input.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">*** WARNING ***</span></span><br><span class="line"><span class="string">The locale specified by the environment affects sort order.</span></span><br><span class="line"><span class="string">Set LC_ALL=C to get the traditional sort order that uses</span></span><br><span class="line"><span class="string">native byte values.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">GNU coreutils online help: &lt;http://www.gnu.org/software/coreutils/&gt;</span></span><br><span class="line"><span class="string">Report sort translation bugs to &lt;http://translationproject.org/team/&gt;</span></span><br><span class="line"><span class="string">For complete documentation, run: info coreutils '</span>sort invocation<span class="string">'</span></span><br></pre></td></tr></table></figure><ul><li><code>-b</code> å¿½ç•¥æ¯è¡Œå‰é¢å¼€å§‹å‡ºçš„ç©ºæ ¼å­—ç¬¦ã€‚</li><li><code>-c</code> æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å·²ç»æŒ‰ç…§é¡ºåºæ’åºã€‚</li><li><code>-d</code> æ’åºæ—¶ï¼Œå¤„ç†è‹±æ–‡å­—æ¯ã€æ•°å­—åŠç©ºæ ¼å­—ç¬¦å¤–ï¼Œå¿½ç•¥å…¶ä»–çš„å­—ç¬¦ã€‚</li><li><code>-f</code> æ’åºæ—¶ï¼Œå°†å°å†™å­—æ¯è§†ä¸ºå¤§å†™å­—æ¯ã€‚</li><li><code>-i</code> æ’åºæ—¶ï¼Œé™¤äº† 040 è‡³ 176 ä¹‹é—´çš„ ASCII å­—ç¬¦å¤–ï¼Œå¿½ç•¥å…¶ä»–çš„å­—ç¬¦ã€‚</li><li><code>-m</code> å°†å‡ ä¸ªæ’åºå¥½çš„æ–‡ä»¶è¿›è¡Œåˆå¹¶ã€‚</li><li><code>-M</code> å°†å‰é¢ 3 ä¸ªå­—æ¯ä¾ç…§æœˆä»½çš„ç¼©å†™è¿›è¡Œæ’åºã€‚</li><li><code>-n</code> ä¾ç…§æ•°å€¼çš„å¤§å°æ’åºã€‚</li><li><code>-u</code> æ„å‘³ç€æ˜¯å”¯ä¸€çš„(unique)ï¼Œè¾“å‡ºçš„ç»“æœæ˜¯å»å®Œé‡äº†çš„ã€‚</li><li><code>-o</code>&lt;è¾“å‡ºæ–‡ä»¶&gt; å°†æ’åºåçš„ç»“æœå­˜å…¥æŒ‡å®šçš„æ–‡ä»¶ã€‚</li><li><code>-r</code> ä»¥ç›¸åçš„é¡ºåºæ¥æ’åºã€‚</li><li><code>-t&lt;åˆ†éš”å­—ç¬¦&gt;</code> æŒ‡å®šæ’åºæ—¶æ‰€ç”¨çš„æ ä½åˆ†éš”å­—ç¬¦ã€‚</li><li><code>+&lt;èµ·å§‹æ ä½&gt;-&lt;ç»“æŸæ ä½&gt;</code> ä»¥æŒ‡å®šçš„æ ä½æ¥æ’åºï¼ŒèŒƒå›´ç”±èµ·å§‹æ ä½åˆ°ç»“æŸæ ä½çš„å‰ä¸€æ ä½ã€‚</li><li><code>--help</code> æ˜¾ç¤ºå¸®åŠ©ã€‚</li><li><code>--version</code> æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ã€‚</li></ul><p>æ’åºå‘½ä»¤ï¼Œé»˜è®¤æ˜¯æŒ‰ç…§å­—å…¸åºæ’åºã€‚</p><h2 id="uniq"><a class="header-anchor" href="#uniq">#</a>uniq</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">$ uniq --<span class="built_in">help</span></span><br><span class="line">Usage: uniq [OPTION]... [INPUT [OUTPUT]]</span><br><span class="line">Filter adjacent matching lines from INPUT (or standard input),</span><br><span class="line">writing to OUTPUT (or standard output).</span><br><span class="line"></span><br><span class="line">With no options, matching lines are merged to the first occurrence.</span><br><span class="line"></span><br><span class="line">Mandatory arguments to long options are mandatory <span class="keyword">for</span> short options too.</span><br><span class="line">  -c, --count           prefix lines by the number of occurrences</span><br><span class="line">  -d, --repeated        only <span class="built_in">print</span> duplicate lines, one <span class="keyword">for</span> each group</span><br><span class="line">  -D, --all-repeated[=METHOD]  <span class="built_in">print</span> all duplicate lines</span><br><span class="line">                          groups can be delimited with an empty line</span><br><span class="line">                          METHOD=&#123;none(default),prepend,separate&#125;</span><br><span class="line">  -f, --skip-fields=N   avoid comparing the first N fields</span><br><span class="line">      --group[=METHOD]  show all items, separating groups with an empty line</span><br><span class="line">                          METHOD=&#123;separate(default),prepend,append,both&#125;</span><br><span class="line">  -i, --ignore-case     ignore differences <span class="keyword">in</span> <span class="keyword">case</span> when comparing</span><br><span class="line">  -s, --skip-chars=N    avoid comparing the first N characters</span><br><span class="line">  -u, --unique          only <span class="built_in">print</span> unique lines</span><br><span class="line">  -z, --zero-terminated  end lines with 0 byte, not newline</span><br><span class="line">  -w, --check-chars=N   compare no more than N characters <span class="keyword">in</span> lines</span><br><span class="line">      --<span class="built_in">help</span>     display this <span class="built_in">help</span> and <span class="built_in">exit</span></span><br><span class="line">      --version  output version information and <span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line">A field is a run of blanks (usually spaces and/or TABs), <span class="keyword">then</span> non-blank</span><br><span class="line">characters.  Fields are skipped before chars.</span><br><span class="line"></span><br><span class="line">Note: <span class="string">'uniq'</span> does not detect repeated lines unless they are adjacent.</span><br><span class="line">You may want to sort the input first, or use <span class="string">'sort -u'</span> without <span class="string">'uniq'</span>.</span><br><span class="line">Also, comparisons honor the rules specified by <span class="string">'LC_COLLATE'</span>.</span><br><span class="line"></span><br><span class="line">GNU coreutils online <span class="built_in">help</span>: &lt;http://www.gnu.org/software/coreutils/&gt;</span><br><span class="line">Report uniq translation bugs to &lt;http://translationproject.org/team/&gt;</span><br><span class="line">For complete documentation, run: info coreutils <span class="string">'uniq invocation'</span></span><br></pre></td></tr></table></figure><ul><li><code>-cæˆ–--count</code> åœ¨æ¯åˆ—æ—è¾¹æ˜¾ç¤ºè¯¥è¡Œé‡å¤å‡ºç°çš„æ¬¡æ•°ã€‚</li><li><code>-dæˆ–--repeated</code> ä»…æ˜¾ç¤ºé‡å¤å‡ºç°çš„è¡Œåˆ—ã€‚</li><li><code>-f&lt;æ ä½&gt;æˆ–--skip-fields=&lt;æ ä½&gt;</code> å¿½ç•¥æ¯”è¾ƒæŒ‡å®šçš„æ ä½ã€‚</li><li><code>-s&lt;å­—ç¬¦ä½ç½®&gt;æˆ–--skip-chars=&lt;å­—ç¬¦ä½ç½®&gt;</code> å¿½ç•¥æ¯”è¾ƒæŒ‡å®šçš„å­—ç¬¦ã€‚</li><li><code>-uæˆ–--unique</code> ä»…æ˜¾ç¤ºå‡ºä¸€æ¬¡çš„è¡Œåˆ—ã€‚</li><li><code>-w&lt;å­—ç¬¦ä½ç½®&gt;æˆ–--check-chars=&lt;å­—ç¬¦ä½ç½®&gt;</code> æŒ‡å®šè¦æ¯”è¾ƒçš„å­—ç¬¦ã€‚</li><li><code>--help</code> æ˜¾ç¤ºå¸®åŠ©ã€‚</li><li><code>--version</code> æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ã€‚</li><li><code>[è¾“å…¥æ–‡ä»¶]</code> æŒ‡å®šå·²æ’åºå¥½çš„æ–‡æœ¬æ–‡ä»¶ã€‚å¦‚æœä¸æŒ‡å®šæ­¤é¡¹ï¼Œåˆ™ä»æ ‡å‡†è¯»å–æ•°æ®ï¼›</li><li><code>[è¾“å‡ºæ–‡ä»¶]</code> æŒ‡å®šè¾“å‡ºçš„æ–‡ä»¶ã€‚å¦‚æœä¸æŒ‡å®šæ­¤é€‰é¡¹ï¼Œåˆ™å°†å†…å®¹æ˜¾ç¤ºåˆ°æ ‡å‡†è¾“å‡ºè®¾å¤‡ï¼ˆæ˜¾ç¤ºç»ˆç«¯ï¼‰ã€‚</li></ul><p><code>uniq</code>ä»æ•°æ®åˆ—è¡¨ä¸­åˆ é™¤ä»»ä½•é‡å¤è¡Œã€‚</p><p>å‡è®¾æœ‰å¦‚ä¸‹æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ vi uniq-test</span><br><span class="line">A</span><br><span class="line">A</span><br><span class="line">A</span><br><span class="line">B</span><br><span class="line">B</span><br><span class="line">B</span><br><span class="line">B</span><br><span class="line">B</span><br><span class="line">C</span><br><span class="line">C</span><br><span class="line">C</span><br><span class="line">C</span><br><span class="line">C</span><br><span class="line">D</span><br><span class="line">D</span><br><span class="line">D</span><br><span class="line">C</span><br><span class="line">B</span><br><span class="line">A</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œ<code>uniq</code>å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ uniq uniq-test</span><br><span class="line">A</span><br><span class="line">B</span><br><span class="line">C</span><br><span class="line">D</span><br><span class="line">C</span><br><span class="line">B</span><br><span class="line">A</span><br></pre></td></tr></table></figure><p><strong>å½“é‡å¤çš„è¡Œå¹¶ä¸ç›¸é‚»æ—¶ï¼Œ<code>uniq</code>å‘½ä»¤æ˜¯ä¸èµ·ä½œç”¨çš„ã€‚</strong></p><p><strong>æ‰€ä»¥ä¸€èˆ¬<code>uniq</code>ä¹‹å‰å…ˆ<code>sort</code>ä¸€ä¸‹ï¼Œè¿™ä¸¤ä¸ªå‘½ä»¤ç»å¸¸ä¸€èµ·ç”¨ã€‚</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sort uniq-test | uniq</span><br><span class="line">A</span><br><span class="line">B</span><br><span class="line">C</span><br><span class="line">D</span><br></pre></td></tr></table></figure><h2 id="wc"><a class="header-anchor" href="#wc">#</a>wc</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">$ wc --<span class="built_in">help</span></span><br><span class="line">Usage: wc [OPTION]... [FILE]...</span><br><span class="line">  or:  wc [OPTION]... --files0-from=F</span><br><span class="line">Print newline, word, and byte counts <span class="keyword">for</span> each FILE, and a total line <span class="keyword">if</span></span><br><span class="line">more than one FILE is specified.  With no FILE, or when FILE is -,</span><br><span class="line"><span class="built_in">read</span> standard input.  A word is a non-zero-length sequence of characters</span><br><span class="line">delimited by white space.</span><br><span class="line">The options below may be used to select <span class="built_in">which</span> counts are printed, always <span class="keyword">in</span></span><br><span class="line">the following order: newline, word, character, byte, maximum line length.</span><br><span class="line">  -c, --bytes            <span class="built_in">print</span> the byte counts</span><br><span class="line">  -m, --chars            <span class="built_in">print</span> the character counts</span><br><span class="line">  -l, --lines            <span class="built_in">print</span> the newline counts</span><br><span class="line">      --files0-from=F    <span class="built_in">read</span> input from the files specified by</span><br><span class="line">                           NUL-terminated names <span class="keyword">in</span> file F;</span><br><span class="line">                           If F is - <span class="keyword">then</span> <span class="built_in">read</span> names from standard input</span><br><span class="line">  -L, --max-line-length  <span class="built_in">print</span> the length of the longest line</span><br><span class="line">  -w, --words            <span class="built_in">print</span> the word counts</span><br><span class="line">      --<span class="built_in">help</span>     display this <span class="built_in">help</span> and <span class="built_in">exit</span></span><br><span class="line">      --version  output version information and <span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line">GNU coreutils online <span class="built_in">help</span>: &lt;http://www.gnu.org/software/coreutils/&gt;</span><br><span class="line">Report wc translation bugs to &lt;http://translationproject.org/team/&gt;</span><br><span class="line">For complete documentation, run: info coreutils <span class="string">'wc invocation'</span></span><br></pre></td></tr></table></figure><ul><li><code>-cæˆ–--bytesæˆ–--chars</code> åªæ˜¾ç¤º Bytes æ•°ã€‚</li><li><code>-læˆ–--lines</code> æ˜¾ç¤ºè¡Œæ•°ã€‚</li><li><code>-wæˆ–--words</code> åªæ˜¾ç¤ºå­—æ•°ã€‚</li><li><code>--help</code> åœ¨çº¿å¸®åŠ©ã€‚</li><li><code>--version</code> æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ã€‚</li></ul><p><code>wc</code>å‘½ä»¤æ˜¯ç”¨æ¥æ˜¾ç¤ºæ–‡ä»¶æ‰€åŒ…å«çš„è¡Œæ•°ã€å­—æ•°å’Œå­—èŠ‚æ•°ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ wc ls-output.txt</span><br><span class="line"> 1873  1872 17825 ls-output.txt</span><br></pre></td></tr></table></figure><h2 id="grep"><a class="header-anchor" href="#grep">#</a>grep</h2><p><code>grep</code>ç”¨æ¥æ‰¾åˆ°æ–‡ä»¶ä¸­çš„åŒ¹é…æ–‡æœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep pattern [file...]</span><br></pre></td></tr></table></figure><p>æ¯”å¦‚ç”¨æ¥æŸ¥æ‰¾åå­—é‡ŒåŒ…å«<code>zip</code>çš„å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ ls /bin /usr/bin | sort | uniq | grep zip</span><br><span class="line">gpg-zip</span><br><span class="line">gunzip</span><br><span class="line">gzip</span><br><span class="line">zip</span><br><span class="line">zipcloak</span><br><span class="line">zipnote</span><br><span class="line">zipsplit</span><br></pre></td></tr></table></figure><p><code>-i</code>ä½¿å¾— <code>grep</code> åœ¨æ‰§è¡Œæœç´¢æ—¶å¿½ç•¥å¤§å°å†™ï¼Œ<code>-v</code>é€‰é¡¹ä¼šå‘Šè¯‰ <code>grep</code> åªæ‰“å°ä¸åŒ¹é…çš„è¡Œã€‚</p><h2 id="head-tail"><a class="header-anchor" href="#head-tail">#</a>head / tail</h2><p>æŸ¥çœ‹æ–‡ä»¶çš„å¤´éƒ¨/å°¾éƒ¨ã€‚</p><p><code>-n</code>æ¥è°ƒæ•´æ˜¾ç¤ºå¤šå°‘è¡Œã€‚</p><p>å› ä¸ºæœ‰ä¸€äº›æ—¥å¿—æ–‡ä»¶çš„å°¾éƒ¨å¯èƒ½ä¸€ç›´æœ‰æ›´æ–°ï¼Œæ‰€ä»¥å¯ä»¥ç”¨<code>-f</code>é€‰é¡¹ä¸€ç›´æŠŠæœ€æ–°çš„å°¾éƒ¨æ–‡ä»¶æ˜¾ç¤ºåˆ°å±å¹•ä¸Šï¼Œç”¨<code>ctrl+c</code>æ¥åœæ­¢ç›‘å¬ã€‚</p><h2 id="tee"><a class="header-anchor" href="#tee">#</a>tee</h2><p><code>tee</code>ç¨‹åºä»æ ‡å‡†è¾“å…¥è¯»å…¥æ•°æ®ï¼Œå¹¶ä¸”åŒæ—¶å¤åˆ¶æ•°æ®åˆ°æ ‡å‡†è¾“å‡ºï¼ˆå…è®¸æ•°æ®ç»§ç»­éšç€ç®¡é“çº¿æµåŠ¨ï¼‰å’Œä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ã€‚</p><p>ç”¨å¤„æ˜¯å¯ä»¥ä»ä¸€ç³»åˆ—çš„ç®¡é“ä¸­é—´è¯»å–æ•°æ®åˆ°åˆ«çš„åœ°æ–¹ã€‚ï¼ˆç›´è§‚çš„æƒ³æ³•å°±æ˜¯ï¼Œåœ¨ç®¡é“ä¸Šæ·»åŠ ä¸€ä¸ªåˆ†æ”¯ï¼Œ<s>ç§æ¥æ°´ç®¡ï¼ˆä¸æ˜¯</s>ï¼‰</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ ls /usr/bin | tee ls.txt | grep zip</span><br><span class="line">bunzip2</span><br><span class="line">bzip2</span><br><span class="line">bzip2recover</span><br><span class="line">funzip</span><br><span class="line">gunzip</span><br><span class="line">gzip</span><br><span class="line">unzip</span><br><span class="line">unzipsfx</span><br><span class="line">zip</span><br><span class="line">zipcloak</span><br><span class="line">zipdetails</span><br><span class="line">zipdetails5.18</span><br><span class="line">zipdetails5.28</span><br><span class="line">zipgrep</span><br><span class="line">zipinfo</span><br><span class="line">zipnote</span><br><span class="line">zipsplit</span><br></pre></td></tr></table></figure><p><code>ls.txt</code>é‡Œä¹Ÿæœ‰<code>ls /usr.bin</code>çš„æ•°æ®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cat ls.txt | wc -l</span><br><span class="line">    1012</span><br></pre></td></tr></table></figure><h2 id="å­—ç¬¦å±•å¼€"><a class="header-anchor" href="#å­—ç¬¦å±•å¼€">#</a>å­—ç¬¦å±•å¼€</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> *</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> *</span><br><span class="line">anaconda-ks.cfg certbot-auto ls-output.txt uniq-test</span><br></pre></td></tr></table></figure><p><code>shell</code>åœ¨<code>echo</code>å‘½ä»¤è¢«æ‰§è¡Œå‰æŠŠ<code>*</code>å±•å¼€æˆäº†å¦å¤–çš„ä¸œè¥¿ã€‚</p><p>å½“å›è½¦é”®è¢«æŒ‰ä¸‹æ—¶ï¼Œ<code>shell</code>åœ¨å‘½ä»¤è¢«æ‰§è¡Œå‰åœ¨å‘½ä»¤è¡Œä¸Šè‡ªåŠ¨å±•å¼€ä»»ä½•ç¬¦åˆæ¡ä»¶çš„å­—ç¬¦ï¼Œæ‰€ä»¥<code>echo</code>å‘½ä»¤çš„å®é™…å‚æ•°å¹¶ä¸æ˜¯<code>*</code>ï¼Œè€Œæ˜¯å®ƒ<code>å±•å¼€åçš„ç»“æœ</code>ã€‚</p><h2 id="è·¯å¾„åå±•å¼€"><a class="header-anchor" href="#è·¯å¾„åå±•å¼€">#</a>è·¯å¾„åå±•å¼€</h2><p>é€šé…ç¬¦æ‰€ä¾èµ–çš„å·¥ä½œæœºåˆ¶å«åš<code>è·¯å¾„åå±•å¼€</code>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> D*</span><br><span class="line">Desktop Documents Downloads</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> *s</span><br><span class="line">Applications Documents Downloads Movies Pictures sensors</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> [[:upper:]]*</span><br><span class="line">Applications Desktop Documents Downloads Library Movies Music Pictures Postman Public</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> /usr/*/share</span><br><span class="line">/usr/<span class="built_in">local</span>/share</span><br></pre></td></tr></table></figure><p>ä»¥åœ†ç‚¹å­—ç¬¦å¼€å¤´çš„æ–‡ä»¶åæ˜¯éšè—æ–‡ä»¶ï¼Œè·¯å¾„åå±•å¼€ä¹Ÿå°Šé‡è¿™ç§è¡Œä¸ºï¼Œ<code>echo *</code>ä¸ä¼šæ˜¾ç¤ºéšè—æ–‡ä»¶ã€‚</p><p><code>~</code>å½“å®ƒç”¨åœ¨ä¸€ä¸ªå•è¯çš„å¼€å¤´æ—¶ï¼Œå®ƒä¼šå±•å¼€æˆæŒ‡å®šç”¨æˆ·çš„å®¶ç›®å½•åï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šç”¨æˆ·åï¼Œåˆ™å±•å¼€æˆå½“å‰ç”¨æˆ·çš„å®¶ç›®å½•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> ~</span><br><span class="line">/Users/onns</span><br></pre></td></tr></table></figure><p>å¦‚æœæœ‰ç”¨æˆ·<code>foo</code>è¿™ä¸ªå¸å·ï¼Œé‚£ä¹ˆï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> ~foo</span><br><span class="line">/home/foo</span><br></pre></td></tr></table></figure><h2 id="ç®—æœ¯è¡¨è¾¾å¼å±•å¼€"><a class="header-anchor" href="#ç®—æœ¯è¡¨è¾¾å¼å±•å¼€">#</a>ç®—æœ¯è¡¨è¾¾å¼å±•å¼€</h2><p><code>shell</code>åœ¨å±•å¼€ä¸­æ‰§è¡Œç®—æ•°è¡¨è¾¾å¼ï¼Œè¿™å…è®¸æˆ‘ä»¬æŠŠ<code>shell</code>æç¤ºå½“ä½œè®¡ç®—å™¨æ¥ä½¿ç”¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$((expression))</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> $((2*3))</span><br><span class="line">6</span><br></pre></td></tr></table></figure><p><strong>ç®—æœ¯è¡¨è¾¾å¼åªæ”¯æŒæ•´æ•°ã€‚</strong></p><p>ç„¶è€Œæˆ‘å¥½åƒç”¨äº†ä¸æ˜¯æ•´æ•°çš„æ•°ï¼Œä¹Ÿç®—å‡ºæ¥ç»“æœäº†ï¼Œå¯èƒ½å’Œ<code>Linux</code>ç‰ˆæœ¬æœ‰å…³ç³»ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> $((5.2423/2))</span><br><span class="line">2.6211500000000001</span><br></pre></td></tr></table></figure><p>æ”¯æŒçš„è¿ç®—ç¬¦ï¼š<code>+</code> <code>-</code> <code>*</code> <code>/</code> <code>%</code> <code>**</code>ã€‚</p><p>å› ä¸ºåªæ”¯æŒæ•´æ•°ï¼Œæ‰€ä»¥<code>é™¤æ³•çš„ç»“æœä¹Ÿæ˜¯æ•´æ•°</code>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> $((5/2))</span><br><span class="line">2</span><br></pre></td></tr></table></figure><p><strong>åœ¨ç®—æœ¯è¡¨è¾¾å¼ä¸­ç©ºæ ¼å¹¶ä¸é‡è¦ï¼Œå¹¶ä¸”è¡¨è¾¾å¼å¯ä»¥åµŒå¥—ã€‚</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> $(($((5**2)) * 3))</span><br><span class="line">75</span><br></pre></td></tr></table></figure><h2 id="èŠ±æ‹¬å·å±•å¼€"><a class="header-anchor" href="#èŠ±æ‹¬å·å±•å¼€">#</a>èŠ±æ‹¬å·å±•å¼€</h2><p>å¯ä»¥ä»ä¸€ä¸ªåŒ…å«èŠ±æ‹¬å·çš„æ¨¡å¼ä¸­åˆ›å»ºå¤šä¸ªæ–‡æœ¬å­—ç¬¦ä¸²ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> Front-&#123;A,B,C&#125;-Back</span><br><span class="line">Front-A-Back Front-B-Back Front-C-Back</span><br></pre></td></tr></table></figure><p>èŠ±æ‹¬å·å±•å¼€æ¨¡å¼å¯èƒ½åŒ…å«ä¸€ä¸ªå¼€å¤´éƒ¨åˆ†å«åš<code>æŠ¥å¤´</code>ï¼Œä¸€ä¸ªç»“å°¾éƒ¨åˆ†å«åš<code>é™„è¨€</code>ã€‚</p><p><code>èŠ±æ‹¬å·è¡¨è¾¾å¼</code>æœ¬èº«å¯èƒ½åŒ…å«ä¸€ä¸ªç”±<code>é€—å·åˆ†å¼€çš„å­—ç¬¦ä¸²åˆ—è¡¨</code>ï¼Œæˆ–è€…ä¸€ä¸ª<code>æ•´æ•°åŒºé—´</code>ï¼Œæˆ–è€…<code>å•ä¸ªçš„å­—ç¬¦çš„åŒºé—´</code>ã€‚</p><p><strong>è¿™ç§æ¨¡å¼ä¸èƒ½åµŒå…¥ç©ºç™½å­—ç¬¦ã€‚</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> Number_&#123;1..5&#125;</span><br><span class="line">Number_1 Number_2 Number_3 Number_4 Number_5</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> &#123;Z..A&#125;</span><br><span class="line">Z Y X W V U T S R Q P O N M L K J I H G F E D C B A</span><br></pre></td></tr></table></figure><p><strong>èŠ±æ‹¬å·å±•å¼€å¯ä»¥åµŒå¥—ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> a&#123;A&#123;1,2&#125;,B&#123;3,4&#125;&#125;b</span><br><span class="line">aA1b aA2b aB3b aB4b</span><br></pre></td></tr></table></figure><p>è¿˜æœ‰ä¸€äº›<code>å‚æ•°å˜é‡</code>å±•å¼€ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$USER</span></span><br><span class="line">onns</span><br></pre></td></tr></table></figure><p>ä½†åœ¨å‚æ•°å±•å¼€ä¸­ï¼Œå¦‚æœä½ æ‹¼å†™é”™äº†ä¸€ä¸ªå˜é‡åï¼Œ<strong>å±•å¼€ä»ç„¶ä¼šè¿›è¡Œ</strong>ï¼Œåªæ˜¯å±•å¼€çš„ç»“æœæ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$SUER</span></span><br></pre></td></tr></table></figure><h2 id="å‘½ä»¤æ›¿æ¢"><a class="header-anchor" href="#å‘½ä»¤æ›¿æ¢">#</a>å‘½ä»¤æ›¿æ¢</h2><p>å‘½ä»¤æ›¿æ¢å…è®¸æˆ‘ä»¬æŠŠä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºä½œä¸ºä¸€ä¸ªå±•å¼€æ¨¡å¼æ¥ä½¿ç”¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> $(ls)</span><br><span class="line">Applications Desktop Documents Downloads Library Movies Music Pictures Postman Public go node sensors</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ls -l $(<span class="built_in">which</span> cp)</span><br><span class="line">-rwxr-xr-x  1 root  wheel  42272 May 28 07:37 /bin/cp</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ file $(ls /usr/bin/* | grep zip)</span><br><span class="line">/usr/bin/bunzip2:        Mach-O 64-bit executable x86_64</span><br><span class="line">/usr/bin/bzip2:          Mach-O 64-bit executable x86_64</span><br><span class="line">/usr/bin/bzip2recover:   Mach-O 64-bit executable x86_64</span><br><span class="line">/usr/bin/funzip:         Mach-O 64-bit executable x86_64</span><br><span class="line">/usr/bin/gunzip:         Mach-O 64-bit executable x86_64</span><br><span class="line">/usr/bin/gzip:           Mach-O 64-bit executable x86_64</span><br><span class="line">/usr/bin/unzip:          Mach-O 64-bit executable x86_64</span><br><span class="line">/usr/bin/unzipsfx:       Mach-O 64-bit executable x86_64</span><br><span class="line">/usr/bin/zip:            Mach-O 64-bit executable x86_64</span><br><span class="line">/usr/bin/zipcloak:       Mach-O 64-bit executable x86_64</span><br><span class="line">/usr/bin/zipdetails:     Perl script text executable</span><br><span class="line">/usr/bin/zipdetails5.18: Perl script text executable</span><br><span class="line">/usr/bin/zipdetails5.28: Perl script text executable</span><br><span class="line">/usr/bin/zipgrep:        POSIX shell script text executable, ASCII text</span><br><span class="line">/usr/bin/zipinfo:        Mach-O 64-bit executable x86_64</span><br><span class="line">/usr/bin/zipnote:        Mach-O 64-bit executable x86_64</span><br><span class="line">/usr/bin/zipsplit:       Mach-O 64-bit executable x86_64</span><br></pre></td></tr></table></figure><p>åœ¨æ—§ç‰ˆ<code>shell</code>ç¨‹åºä¸­ï¼Œæœ‰å¦ä¸€ç§è¯­æ³•ä¹Ÿæ”¯æŒå‘½ä»¤æ›¿æ¢ï¼Œä½¿ç”¨<code>å€’å¼•å·</code>æ¥ä»£æ›¿ç¾å…ƒç¬¦å·å’Œæ‹¬å·ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ls -l `<span class="built_in">which</span> cp`</span><br><span class="line">-rwxr-xr-x  1 root  wheel  42272 May 28 07:37 /bin/cp</span><br></pre></td></tr></table></figure><h2 id="å¼•ç”¨"><a class="header-anchor" href="#å¼•ç”¨">#</a>å¼•ç”¨</h2><p>ç”¨<code>åŒå¼•å·</code>åŒ…è£¹çš„å­—ç¬¦ä¸²ï¼Œ<code>å•è¯åˆ†å‰²</code>ã€<code>è·¯å¾„åå±•å¼€</code>ã€<code>æ³¢æµªçº¿å±•å¼€</code>å’Œ<code>èŠ±æ‹¬å·å±•å¼€</code>ä¼šå¤±æ•ˆï¼Œ<code>å‚æ•°å±•å¼€</code>ã€ <code>ç®—æœ¯å±•å¼€</code>å’Œ<code>å‘½ä»¤æ›¿æ¢</code>ä»ç„¶æ‰§è¡Œã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">"<span class="variable">$USER</span> <span class="variable">$((2+2)</span>) <span class="variable">$(cal)</span>"</span></span><br><span class="line">onns 4    November 2020      </span><br><span class="line">Su Mo Tu We Th Fr Sa  </span><br><span class="line"> 1  2  3  4  5  6  7  </span><br><span class="line"> 8  9 10 11 12 13 14  </span><br><span class="line">15 16 17 18 19 20 21  </span><br><span class="line">22 23 24 25 26 27 28  </span><br><span class="line">29 30</span><br></pre></td></tr></table></figure><p>ä¾‹å¤–çš„æ˜¯<code>$</code> <code>\</code> <code>`</code>ã€‚</p><p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œå•è¯åˆ†å‰²æœºåˆ¶ä¼šåœ¨å•è¯ä¸­å¯»æ‰¾<code>ç©ºæ ¼</code>ï¼Œ<code>åˆ¶è¡¨ç¬¦</code>ï¼Œå’Œ<code>æ¢è¡Œç¬¦</code>ï¼Œå¹¶æŠŠå®ƒä»¬çœ‹ä½œå•è¯ä¹‹é—´çš„ç•Œå®šç¬¦ã€‚è¿™æ„å‘³ç€æ— å¼•ç”¨çš„ç©ºæ ¼ï¼Œåˆ¶è¡¨ç¬¦å’Œæ¢è¡Œç¬¦éƒ½ä¸æ˜¯æ–‡æœ¬çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒä»¬åªä½œä¸º<code>åˆ†éš”ç¬¦</code>ä½¿ç”¨ã€‚</p><p>è™½ç„¶å‘½ä»¤æ›¿æ¢è¿˜æœ‰æ•ˆæœï¼Œä½†æ˜¯æœ‰æ—¶å€™å¯èƒ½ä¼šæœ‰ç”¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> $(cal)</span><br><span class="line">November 2020 Su Mo Tu We Th Fr Sa 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30</span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">"<span class="variable">$(cal)</span>"</span></span><br><span class="line">   November 2020      </span><br><span class="line">Su Mo Tu We Th Fr Sa  </span><br><span class="line"> 1  2  3  4  5  6  7  </span><br><span class="line"> 8  9 10 11 12 13 14  </span><br><span class="line">15 16 17 18 19 20 21  </span><br><span class="line">22 23 24 25 26 27 28  </span><br><span class="line">29 30</span><br></pre></td></tr></table></figure><p>å¦‚æœéœ€è¦ç¦æ­¢æ‰€æœ‰çš„å±•å¼€ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨<code>å•å¼•å·</code>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">'$USER $((2+2)) $(cal)'</span></span><br><span class="line"><span class="variable">$USER</span> $((2+2)) $(cal)</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ç”¨å•ä¸ªçš„è½¬ä¹‰å­—ç¬¦åæ–œæ <code>\</code>ã€‚</p><p><strong>æ³¨æ„åœ¨å•å¼•å·ä¸­ï¼Œåæ–œæ å¤±å»å®ƒçš„ç‰¹æ®Šå«ä¹‰ï¼Œå®ƒè¢«çœ‹ä½œæ™®é€šå­—ç¬¦ã€‚</strong></p><h2 id="æ¢å¤-alt-é”®åŠŸèƒ½"><a class="header-anchor" href="#æ¢å¤-alt-é”®åŠŸèƒ½">#</a>æ¢å¤ alt é”®åŠŸèƒ½</h2><p>åœ¨<code>MacOS</code>çš„<code>Terminal</code>é‡Œï¼Œç”¨<code>alt</code>ç»„åˆé”®æ€»æ˜¯ä¸å¥½ä½¿ï¼Œè¿™æ¬¡æŸ¥äº†ä¸€ä¸‹ï¼Œé—®é¢˜è§£å†³ã€‚</p><p><code>Terminal</code> -&gt; <code>Preferences</code>ï¼ˆå¿«æ·é”®<code>cmd + ,</code>ï¼‰ -&gt; <code>Profiles</code> -&gt; <code>Keyboard</code> -&gt; <code>Use Option as Meta key</code></p><center><!-- //onns.xyz/blog/image --><p><img src="//onns.xyz/blog/image/20201117-1.jpg" alt="Use Option as Meta key"></p></center><h3 id="å‚è€ƒé“¾æ¥"><a class="header-anchor" href="#å‚è€ƒé“¾æ¥">#</a>å‚è€ƒé“¾æ¥</h3><ul><li><a href="https://superuser.com/questions/496090/how-to-use-alt-commands-in-a-terminal-on-os-x" target="_blank" rel="noopener">How to use ALT commands in a terminal on OS X?</a></li></ul><h2 id="ç§»åŠ¨å…‰æ ‡"><a class="header-anchor" href="#ç§»åŠ¨å…‰æ ‡">#</a>ç§»åŠ¨å…‰æ ‡</h2><table><thead><tr><th style="text-align:center">æŒ‰é”®</th><th style="text-align:left">æ•ˆæœ</th></tr></thead><tbody><tr><td style="text-align:center"><code>Ctrl-a</code></td><td style="text-align:left">ç§»åŠ¨å…‰æ ‡åˆ°è¡Œé¦–ã€‚</td></tr><tr><td style="text-align:center"><code>Ctrl-e</code></td><td style="text-align:left">ç§»åŠ¨å…‰æ ‡åˆ°è¡Œå°¾ã€‚</td></tr><tr><td style="text-align:center"><code>Ctrl-f</code></td><td style="text-align:left">å…‰æ ‡åç§»ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td style="text-align:center"><code>Ctrl-b</code></td><td style="text-align:left">å…‰æ ‡å‰ç§»ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td style="text-align:center"><code>Alt-f</code></td><td style="text-align:left">å…‰æ ‡åç§»ä¸€ä¸ªå­—ã€‚</td></tr><tr><td style="text-align:center"><code>Alt-b</code></td><td style="text-align:left">å…‰æ ‡å‰ç§»ä¸€ä¸ªå­—ã€‚</td></tr><tr><td style="text-align:center"><code>Ctrl-l</code></td><td style="text-align:left">æ¸…ç©ºå±å¹•ï¼Œç§»åŠ¨å…‰æ ‡åˆ°å·¦ä¸Šè§’ã€‚</td></tr></tbody></table><h2 id="ä¿®æ”¹æ–‡æœ¬"><a class="header-anchor" href="#ä¿®æ”¹æ–‡æœ¬">#</a>ä¿®æ”¹æ–‡æœ¬</h2><table><thead><tr><th style="text-align:center">æŒ‰é”®</th><th style="text-align:left">æ•ˆæœ</th></tr></thead><tbody><tr><td style="text-align:center"><code>Ctrl-d</code></td><td style="text-align:left">åˆ é™¤å…‰æ ‡ä½ç½®çš„å­—ç¬¦ã€‚</td></tr><tr><td style="text-align:center"><code>Ctrl-t</code></td><td style="text-align:left">å…‰æ ‡ä½ç½®çš„å­—ç¬¦å’Œå…‰æ ‡å‰é¢çš„å­—ç¬¦äº’æ¢ä½ç½®ã€‚</td></tr><tr><td style="text-align:center"><code>Alt-t</code></td><td style="text-align:left">å…‰æ ‡ä½ç½®çš„å­—å’Œå…¶å‰é¢çš„å­—äº’æ¢ä½ç½®ã€‚</td></tr><tr><td style="text-align:center"><code>Alt-l</code></td><td style="text-align:left">æŠŠä»å…‰æ ‡ä½ç½®åˆ°å­—å°¾çš„å­—ç¬¦è½¬æ¢æˆå°å†™å­—æ¯ã€‚</td></tr><tr><td style="text-align:center"><code>Alt-u</code></td><td style="text-align:left">æŠŠä»å…‰æ ‡ä½ç½®åˆ°å­—å°¾çš„å­—ç¬¦è½¬æ¢æˆå¤§å†™å­—æ¯ã€‚</td></tr></tbody></table><p><code>ctrl + t</code>è¿™ä¸ªå¾ˆæœ‰ç”¨ï¼Œå› ä¸ºå…¶å®ç»å¸¸éƒ½æ˜¯æ‰“åä¸¤ä¸ªå­—æ¯ï¼Œæ¯”å¦‚æˆ‘ï¼Œç»å¸¸æŠŠ<code>conda activate</code>æ‰“æˆ<code>conda acitvate</code>ã€‚ä½†æ˜¯æˆ‘åœ¨<code>macOS</code>ä¸Šæµ‹è¯•çš„æ—¶å€™ï¼Œç¡®å®æ˜¯<strong>å…‰æ ‡ä½ç½®çš„å­—ç¬¦å’Œå…‰æ ‡å‰é¢çš„å­—ç¬¦äº’æ¢ä½ç½®</strong>ï¼Œä½†æ˜¯æ¢ä½å®Œä¹‹åï¼Œ<strong>å…‰æ ‡å¾€åæŒªäº†ä¸€ä¸ªä½ç½®</strong>ï¼ˆå¦‚æœåé¢è¿˜æœ‰æ–‡æœ¬çš„è¯ï¼‰ã€‚</p><h2 id="å‰ªåˆ‡ç²˜è´´"><a class="header-anchor" href="#å‰ªåˆ‡ç²˜è´´">#</a>å‰ªåˆ‡ç²˜è´´</h2><p><code>Readline</code>çš„æ–‡æ¡£ä½¿ç”¨æœ¯è¯­ <code>killing</code> å’Œ <code>yanking</code> æ¥æŒ‡æˆ‘ä»¬å¹³å¸¸æ‰€è¯´çš„å‰ªåˆ‡å’Œç²˜è´´ã€‚å‰ªåˆ‡ä¸‹æ¥çš„æœ¬æ–‡è¢«å­˜å‚¨åœ¨ä¸€ä¸ªå«åš<code>å‰ªåˆ‡ç¯</code>ï¼ˆkill-ringï¼‰çš„ç¼“å†²åŒºä¸­ã€‚</p><table><thead><tr><th style="text-align:center">æŒ‰é”®</th><th style="text-align:left">æ•ˆæœ</th></tr></thead><tbody><tr><td style="text-align:center"><code>Ctrl-k</code></td><td style="text-align:left">å‰ªåˆ‡ä»å…‰æ ‡ä½ç½®åˆ°è¡Œå°¾çš„æ–‡æœ¬ã€‚</td></tr><tr><td style="text-align:center"><code>Ctrl-u</code></td><td style="text-align:left">å‰ªåˆ‡ä»å…‰æ ‡ä½ç½®åˆ°è¡Œé¦–çš„æ–‡æœ¬ã€‚</td></tr><tr><td style="text-align:center"><code>Alt-d</code></td><td style="text-align:left">å‰ªåˆ‡ä»å…‰æ ‡ä½ç½®åˆ°è¯å°¾çš„æ–‡æœ¬ã€‚</td></tr><tr><td style="text-align:center"><code>Alt-Backspace</code></td><td style="text-align:left">å‰ªåˆ‡ä»å…‰æ ‡ä½ç½®åˆ°è¯å¤´çš„æ–‡æœ¬ã€‚å¦‚æœå…‰æ ‡åœ¨ä¸€ä¸ªå•è¯çš„å¼€å¤´ï¼Œå‰ªåˆ‡å‰ä¸€ä¸ªå•è¯ã€‚</td></tr><tr><td style="text-align:center"><code>Ctrl-y</code></td><td style="text-align:left">æŠŠå‰ªåˆ‡ç¯ä¸­çš„æ–‡æœ¬ç²˜è´´åˆ°å…‰æ ‡ä½ç½®ã€‚</td></tr></tbody></table><p><code>Alt-Backspace</code>å¦‚æœå…‰æ ‡åœ¨ä¸€ä¸ªå•è¯çš„å¼€å¤´ï¼Œå‰ªåˆ‡å‰ä¸€ä¸ªå•è¯ï¼Œ<strong>åŒæ—¶ä¼šæŠŠä¸¤ä¸ªè¯ä¹‹é—´çš„ç©ºæ ¼ä¹Ÿä¸€èµ·</strong>å‰ªåˆ‡æ‰å¹¶ä¸”å­˜åœ¨å‰ªåˆ‡ç¯é‡Œã€‚</p><h2 id="è‡ªåŠ¨è¡¥å…¨"><a class="header-anchor" href="#è‡ªåŠ¨è¡¥å…¨">#</a>è‡ªåŠ¨è¡¥å…¨</h2><table><thead><tr><th style="text-align:center">æŒ‰é”®</th><th style="text-align:left">æ•ˆæœ</th></tr></thead><tbody><tr><td style="text-align:center"><code>Alt-?</code></td><td style="text-align:left">æ˜¾ç¤ºå¯èƒ½çš„è‡ªåŠ¨è¡¥å…¨åˆ—è¡¨ã€‚</td></tr><tr><td style="text-align:center"><code>Alt-*</code></td><td style="text-align:left">æ’å…¥æ‰€æœ‰å¯èƒ½çš„è‡ªåŠ¨è¡¥å…¨ã€‚</td></tr></tbody></table><p><code>alt + ?</code>ç­‰æ•ˆäº<code>tab</code>ä¸¤æ¬¡ã€‚</p><p>è¿™ä¿©å‘½ä»¤æˆ‘è¯•ä¸å‡ºæ¥ã€‚ã€‚å¥½åœ¨ç›®å‰ä¹Ÿæ²¡ä»€ä¹ˆç”¨= =ï¼</p><h2 id="å†å²å‘½ä»¤"><a class="header-anchor" href="#å†å²å‘½ä»¤">#</a>å†å²å‘½ä»¤</h2><p><code>bash</code>ç»´æŠ¤ç€ä¸€ä¸ªå·²ç»æ‰§è¡Œè¿‡çš„å‘½ä»¤çš„å†å²åˆ—è¡¨ã€‚è¿™ä¸ªå‘½ä»¤åˆ—è¡¨è¢«ä¿å­˜åœ¨ä½ å®¶ç›®å½•ä¸‹ï¼Œä¸€ä¸ªå«åš<code>.bash_history</code>çš„æ–‡ä»¶é‡Œã€‚</p><p><strong>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œbash ä¼šå­˜å‚¨ä½ æ‰€è¾“å…¥çš„æœ€å <code>500</code> ä¸ªå‘½ä»¤ã€‚</strong></p><p>æ¯ä¸ªå†å²è®°å½•éƒ½æœ‰è¡Œå·ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ç§å«åš<code>å†å²å‘½ä»¤å±•å¼€</code>çš„æ–¹å¼ï¼Œæ¥è°ƒç”¨è¡Œå·æ‰€ä»£è¡¨çš„è¿™ä¸€è¡Œå‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!line-number</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">history</span></span><br><span class="line">  995  uniq --<span class="built_in">help</span></span><br><span class="line">  996  uniq</span><br><span class="line">  997  ls /bin /usr/bin | sort | uniq -d | less</span><br><span class="line">  998  ssh root@xiaoxia.onns.xyz</span><br><span class="line">  999  blog</span><br><span class="line"> 1000  cpblog</span><br><span class="line"> 1001  ssh root@xiaoxia.onns.xyz</span><br><span class="line"> 1002  clear</span><br><span class="line"> 1003  ashdasda  adad</span><br><span class="line"> 1004  askdhakdjah akjsdhakjdhakjd akdjhakjdhajdk</span><br><span class="line"> 1005  hkasdhakjsdha ahdsaksjdhktttttt[</span><br><span class="line"> 1006  abcd123456abcd123456abcd12abcd123456abcd123456abcd123456 3456 ahskdasdjha</span><br><span class="line"> 1007  <span class="built_in">which</span>-command ls</span><br><span class="line"> 1008  ls D</span><br><span class="line"> 1009  <span class="built_in">history</span></span><br><span class="line"> 1010  ls /bin /usr/bin | sort | uniq -d | less</span><br><span class="line">$ !995</span><br><span class="line">uniq --<span class="built_in">help</span></span><br><span class="line">uniq: illegal option -- -</span><br><span class="line">usage: uniq [-c | -d | -u] [-i] [-f fields] [-s chars] [input [output]]</span><br></pre></td></tr></table></figure><p><strong><code>bash</code>ä¹Ÿå…·æœ‰å¢é‡æœç´¢å†å²åˆ—è¡¨çš„èƒ½åŠ›ã€‚</strong><br>è¾“å…¥ <code>Ctrl-r</code> æ¥å¯åŠ¨å¢é‡æœç´¢ï¼Œæ¥ç€è¾“å…¥ä½ è¦å¯»æ‰¾çš„å­—ã€‚å½“ä½ æ‰¾åˆ°å®ƒä»¥åï¼Œä½ å¯ä»¥æ•²å…¥ <code>Enter</code> æ¥æ‰§è¡Œå‘½ä»¤ï¼Œæˆ–è€…è¾“å…¥ <code>Ctrl-j</code>ï¼Œä»å†å²åˆ—è¡¨ä¸­å¤åˆ¶è¿™ä¸€è¡Œåˆ°å½“å‰å‘½ä»¤è¡Œã€‚å†æ¬¡è¾“å…¥ <code>Ctrl-r</code>ï¼Œæ¥æ‰¾åˆ°ä¸‹ä¸€ä¸ªåŒ¹é…é¡¹(å†å²åˆ—è¡¨ä¸­å‘ä¸Šç§»åŠ¨)ã€‚è¾“å…¥ <code>Ctrl-g</code> æˆ–è€… <code>Ctrl-c</code>ï¼Œé€€å‡ºæœç´¢ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$</span><br><span class="line">bck-i-search: _</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ uniq --<span class="built_in">help</span></span><br><span class="line">bck-i-search: un_</span><br></pre></td></tr></table></figure><p>è¯´å®è¯ï¼Œå¥½éº»çƒ¦ï¼Œæˆ‘è¿˜æ˜¯å–œæ¬¢ç”¨<code>grep + ç®¡é“</code>ã€‚</p><table><thead><tr><th style="text-align:center">æŒ‰é”®</th><th style="text-align:left">æ•ˆæœ</th></tr></thead><tbody><tr><td style="text-align:center"><code>Ctrl-p</code></td><td style="text-align:left">ç§»åŠ¨åˆ°ä¸Šä¸€ä¸ªå†å²æ¡ç›®ã€‚ç±»ä¼¼äºä¸Šç®­å¤´æŒ‰é”®ã€‚</td></tr><tr><td style="text-align:center"><code>Ctrl-n</code></td><td style="text-align:left">ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå†å²æ¡ç›®ã€‚ç±»ä¼¼äºä¸‹ç®­å¤´æŒ‰é”®ã€‚</td></tr><tr><td style="text-align:center"><code>Alt-&lt;</code></td><td style="text-align:left">ç§»åŠ¨åˆ°å†å²åˆ—è¡¨å¼€å¤´ã€‚</td></tr><tr><td style="text-align:center"><code>Alt-&gt;</code></td><td style="text-align:left">ç§»åŠ¨åˆ°å†å²åˆ—è¡¨ç»“å°¾ï¼Œå³å½“å‰å‘½ä»¤è¡Œã€‚</td></tr><tr><td style="text-align:center"><code>Ctrl-r</code></td><td style="text-align:left">åå‘å¢é‡æœç´¢ã€‚ä»å½“å‰å‘½ä»¤è¡Œå¼€å§‹ï¼Œå‘ä¸Šå¢é‡æœç´¢ã€‚</td></tr><tr><td style="text-align:center"><code>Alt-p</code></td><td style="text-align:left">åå‘æœç´¢ï¼Œéå¢é‡æœç´¢ã€‚(è¾“å…¥è¦æŸ¥æ‰¾çš„å­—ç¬¦ä¸²ï¼ŒæŒ‰ä¸‹ Enter æ¥æ‰§è¡Œæœç´¢)ã€‚</td></tr><tr><td style="text-align:center"><code>Alt-n</code></td><td style="text-align:left">å‘å‰æœç´¢ï¼Œéå¢é‡ã€‚</td></tr><tr><td style="text-align:center"><code>Ctrl-o</code></td><td style="text-align:left">æ‰§è¡Œå†å²åˆ—è¡¨ä¸­çš„å½“å‰é¡¹ï¼Œå¹¶ç§»åˆ°ä¸‹ä¸€ä¸ªã€‚å¦‚æœä½ æƒ³è¦æ‰§è¡Œ å†å²åˆ—è¡¨ä¸­ä¸€ç³»åˆ—çš„å‘½ä»¤ï¼Œè¿™å¾ˆæ–¹ä¾¿ã€‚</td></tr></tbody></table><p>å†å²å‘½ä»¤å±•å¼€ï¼š</p><table><thead><tr><th style="text-align:center">æŒ‰é”®</th><th style="text-align:left">æ•ˆæœ</th></tr></thead><tbody><tr><td style="text-align:center"><code>!!</code></td><td style="text-align:left">é‡å¤æœ€åä¸€æ¬¡æ‰§è¡Œçš„å‘½ä»¤ã€‚å¯èƒ½æŒ‰ä¸‹ä¸Šç®­å¤´æŒ‰é”®å’Œ enter é”® æ›´å®¹æ˜“äº›ã€‚</td></tr><tr><td style="text-align:center"><code>!number</code></td><td style="text-align:left">é‡å¤å†å²åˆ—è¡¨ä¸­ç¬¬ number è¡Œçš„å‘½ä»¤ã€‚</td></tr><tr><td style="text-align:center"><code>!string</code></td><td style="text-align:left">é‡å¤æœ€è¿‘å†å²åˆ—è¡¨ä¸­ï¼Œä»¥è¿™ä¸ªå­—ç¬¦ä¸²å¼€å¤´çš„å‘½ä»¤ã€‚</td></tr><tr><td style="text-align:center"><code>!?string</code></td><td style="text-align:left">é‡å¤æœ€è¿‘å†å²åˆ—è¡¨ä¸­ï¼ŒåŒ…å«è¿™ä¸ªå­—ç¬¦ä¸²çš„å‘½ä»¤ã€‚</td></tr></tbody></table><p><strong>åº”è¯¥å°å¿ƒè°¨æ…åœ°ä½¿ç”¨ <code>!string</code> å’Œ <code>!?string</code> æ ¼å¼ï¼Œé™¤éä½ å®Œå…¨ç¡®ä¿¡å†å²åˆ—è¡¨æ¡ç›®çš„å†…å®¹ã€‚</strong></p><h2 id="ç”¨æˆ·"><a class="header-anchor" href="#ç”¨æˆ·">#</a>ç”¨æˆ·</h2><p>å½“ä¸€ä¸ªç”¨æˆ·æ‹¥æœ‰ä¸€ä¸ªæ–‡ä»¶æˆ–ç›®å½•æ—¶ï¼Œç”¨æˆ·å¯¹è¿™ä¸ªæ–‡ä»¶æˆ–ç›®å½•çš„è®¿é—®æƒé™æ‹¥æœ‰æ§åˆ¶æƒã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ id</span><br><span class="line">uid=501(onns) gid=20(staff) groups=20(staff),12(everyone),61(localaccounts),79(_appserverusr),80(admin),81(_appserveradm),98(_lpadmin),33(_appstore),100(_lpoperator),204(_developer),250(_analyticsusers),395(com.apple.access_ftp),398(com.apple.access_screensharing),399(com.apple.access_ssh),400(com.apple.access_remote_ae),701(com.apple.sharepoint.group.1)</span><br></pre></td></tr></table></figure><p>å¯¹äºæ–‡ä»¶å’Œç›®å½•çš„è®¿é—®æƒåŠ›æ˜¯æ ¹æ®è¯»è®¿é—®ã€å†™è®¿é—®å’Œæ‰§è¡Œè®¿é—®æ¥å®šä¹‰çš„ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ &gt; foo.txt</span><br><span class="line">$ ls -l foo.txt</span><br><span class="line">-rw-r--r--@ 1 onns  staff  12 Nov 20 20:36 foo.txt</span><br></pre></td></tr></table></figure><p><strong>åˆ—è¡¨çš„å‰åä¸ªå­—ç¬¦æ˜¯æ–‡ä»¶çš„å±æ€§ï¼Œç¬¬ä¸€ä¸ªå­—ç¬¦è¡¨æ˜æ–‡ä»¶ç±»å‹ã€‚</strong></p><table><thead><tr><th style="text-align:center">æŒ‰é”®</th><th style="text-align:left">æ•ˆæœ</th></tr></thead><tbody><tr><td style="text-align:center"><code>-</code></td><td style="text-align:left">ä¸€ä¸ªæ™®é€šæ–‡ä»¶</td></tr><tr><td style="text-align:center"><code>d</code></td><td style="text-align:left">ä¸€ä¸ªç›®å½•</td></tr><tr><td style="text-align:center"><code>l</code></td><td style="text-align:left">ä¸€ä¸ªç¬¦å·é“¾æ¥<sup class="footnote-ref"><a href="#fn5" id="fnref5">[5]</a></sup></td></tr><tr><td style="text-align:center"><code>c</code></td><td style="text-align:left">ä¸€ä¸ªå­—ç¬¦è®¾å¤‡æ–‡ä»¶<sup class="footnote-ref"><a href="#fn6" id="fnref6">[6]</a></sup></td></tr><tr><td style="text-align:center"><code>b</code></td><td style="text-align:left">ä¸€ä¸ªå—è®¾å¤‡æ–‡ä»¶<sup class="footnote-ref"><a href="#fn7" id="fnref7">[7]</a></sup></td></tr></tbody></table><p>å‰©ä¸‹çš„ä¹ä¸ªå­—ç¬¦å«åšæ–‡ä»¶æ¨¡å¼ï¼Œä»£è¡¨ç€<code>æ–‡ä»¶æ‰€æœ‰è€…</code>ã€<code>æ–‡ä»¶ç»„æ‰€æœ‰è€…</code>å’Œ<code>å…¶ä»–äºº</code>çš„<code>è¯»</code>ã€<code>å†™</code>å’Œ<code>æ‰§è¡Œ</code>æƒé™ã€‚</p><p>æ–‡ä»¶ï¼š</p><ul><li><code>r</code>ï¼šå…è®¸æ‰“å¼€å¹¶è¯»å–æ–‡ä»¶å†…å®¹ã€‚</li><li><code>w</code>ï¼šå…è®¸å†™å…¥æ–‡ä»¶å†…å®¹æˆ–æˆªæ–­æ–‡ä»¶ã€‚ä½†æ˜¯<code>ä¸å…è®¸</code>å¯¹æ–‡ä»¶è¿›è¡Œ<code>é‡å‘½å</code>æˆ–<code>åˆ é™¤</code>ï¼Œ<strong>é‡å‘½åæˆ–åˆ é™¤æ˜¯ç”±ç›®å½•çš„å±æ€§å†³å®šçš„</strong>ã€‚</li><li><code>x</code>ï¼šå…è®¸å°†æ–‡ä»¶ä½œä¸ºç¨‹åºæ¥æ‰§è¡Œï¼Œä½¿ç”¨è„šæœ¬è¯­è¨€ç¼–å†™çš„ç¨‹åºå¿…é¡»è®¾ç½®ä¸ºå¯è¯»æ‰èƒ½è¢«æ‰§è¡Œã€‚</li></ul><p>ç›®å½•ï¼š</p><ul><li><code>r</code>ï¼šå…è®¸åˆ—å‡ºç›®å½•ä¸­çš„å†…å®¹ï¼Œå‰ææ˜¯ç›®å½•å¿…é¡»è®¾ç½®äº†<code>å¯æ‰§è¡Œå±æ€§(x)</code>ã€‚</li><li><code>w</code>ï¼šå…è®¸åœ¨ç›®å½•ä¸‹æ–°å»ºã€åˆ é™¤æˆ–é‡å‘½åæ–‡ä»¶ï¼Œå‰ææ˜¯ç›®å½•å¿…é¡»è®¾ç½®äº†<code>å¯æ‰§è¡Œå±æ€§(x)</code>ã€‚</li><li><code>x</code>ï¼šå…è®¸è¿›å…¥ç›®å½•ï¼Œä¾‹å¦‚ï¼š<code>cd directory</code>ã€‚</li></ul><h2 id="chmod"><a class="header-anchor" href="#chmod">#</a>chmod</h2><p><strong>åªæœ‰æ–‡ä»¶çš„æ‰€æœ‰è€…æˆ–è€…è¶…çº§ç”¨æˆ·æ‰èƒ½æ›´æ”¹æ–‡ä»¶æˆ–ç›®å½•çš„æ¨¡å¼ã€‚</strong></p><p><code>chmod</code>å‘½ä»¤æ”¯æŒä¸¤ç§ä¸åŒçš„æ–¹æ³•æ¥æ”¹å˜æ–‡ä»¶æ¨¡å¼ï¼š<code>å…«è¿›åˆ¶æ•°å­—è¡¨ç¤ºæ³•</code>æˆ–<code>ç¬¦å·è¡¨ç¤ºæ³•</code>ã€‚</p><table><thead><tr><th style="text-align:center">å…«è¿›åˆ¶</th><th style="text-align:center">äºŒè¿›åˆ¶</th><th style="text-align:center">æ–‡ä»¶æ¨¡å¼</th></tr></thead><tbody><tr><td style="text-align:center"><code>0</code></td><td style="text-align:center"><code>000</code></td><td style="text-align:center"><code>---</code></td></tr><tr><td style="text-align:center"><code>1</code></td><td style="text-align:center"><code>001</code></td><td style="text-align:center"><code>--x</code></td></tr><tr><td style="text-align:center"><code>2</code></td><td style="text-align:center"><code>010</code></td><td style="text-align:center"><code>-w-</code></td></tr><tr><td style="text-align:center"><code>3</code></td><td style="text-align:center"><code>011</code></td><td style="text-align:center"><code>-wx</code></td></tr><tr><td style="text-align:center"><code>4</code></td><td style="text-align:center"><code>100</code></td><td style="text-align:center"><code>r--</code></td></tr><tr><td style="text-align:center"><code>5</code></td><td style="text-align:center"><code>101</code></td><td style="text-align:center"><code>r-x</code></td></tr><tr><td style="text-align:center"><code>6</code></td><td style="text-align:center"><code>110</code></td><td style="text-align:center"><code>rw-</code></td></tr><tr><td style="text-align:center"><code>7</code></td><td style="text-align:center"><code>111</code></td><td style="text-align:center"><code>rwx</code></td></tr></tbody></table><p>å¸¸ç”¨æƒé™ï¼š<code>7 (rwx)</code>ï¼Œ<code>6 (rw-)</code>ï¼Œ<code>5 (r-x)</code>ï¼Œ<code>4 (r--)</code>ï¼Œå’Œ <code>0 (-â€“)</code>ã€‚</p><table><thead><tr><th style="text-align:center">ç¬¦å·</th><th style="text-align:left">è§£é‡Š</th></tr></thead><tbody><tr><td style="text-align:center"><code>u</code></td><td style="text-align:left"><code>user</code>çš„ç®€å†™ï¼Œæ„æ€æ˜¯æ–‡ä»¶æˆ–ç›®å½•çš„æ‰€æœ‰è€…ã€‚</td></tr><tr><td style="text-align:center"><code>g</code></td><td style="text-align:left"><code>groups</code>çš„ç®€å†™ï¼Œç”¨æˆ·ç»„ã€‚</td></tr><tr><td style="text-align:center"><code>o</code></td><td style="text-align:left"><code>others</code>çš„ç®€å†™ï¼Œæ„æ€æ˜¯å…¶ä»–æ‰€æœ‰çš„äººã€‚</td></tr><tr><td style="text-align:center"><code>a</code></td><td style="text-align:left"><code>all</code>çš„ç®€å†™ï¼Œæ˜¯<code>u</code>ã€<code>g</code>å’Œ<code>o</code>ä¸‰è€…çš„è”åˆã€‚</td></tr></tbody></table><p><strong>å¦‚æœæ²¡æœ‰æŒ‡å®šå­—ç¬¦ï¼Œåˆ™å‡å®šä½¿ç”¨<code>all</code>ã€‚</strong></p><p>æƒé™æ“ä½œï¼š</p><ul><li><code>+</code>ï¼šåŠ ä¸Šä¸€ä¸ªæƒé™ã€‚</li><li><code>-</code>ï¼šåˆ æ‰ä¸€ä¸ªæƒé™ã€‚</li><li><code>=</code>ï¼šåªæœ‰æŒ‡å®šçš„æƒé™å¯ç”¨ï¼Œå…¶å®ƒæ‰€æœ‰çš„æƒé™è¢«åˆ é™¤ã€‚</li></ul><p><strong>å¤šç§è®¾å®šå¯ä»¥ç”¨é€—å·åˆ†å¼€ã€‚</strong></p><p><code>u+x,go=rw</code>ï¼šç»™æ–‡ä»¶æ‹¥æœ‰è€…æ‰§è¡Œæƒé™å¹¶ç»™ç»„å’Œå…¶ä»–äººè¯»å’Œæ‰§è¡Œçš„æƒé™ã€‚</p><h2 id="umask"><a class="header-anchor" href="#umask">#</a>umask</h2><p>å½“åˆ›å»ºä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œ<code>umask</code>å‘½ä»¤æ§åˆ¶ç€æ–‡ä»¶çš„é»˜è®¤æƒé™ã€‚<br><code>umask</code>ä»¥æ©ç çš„å½¢å¼æ¥å·¥ä½œï¼Œå’Œç½‘å…³é‚£é‡Œå·®ä¸å¤šï¼Œä¸€èˆ¬æ˜¯<code>022</code>å’Œ<code>002</code>ã€‚</p><p>æ¯”å¦‚è¯´æ­£å¸¸ä¸€ä¸ªæƒé™æ˜¯<code>666</code>ï¼ˆ<code>110 110 110</code>ï¼‰ï¼Œå³<code>rw-rw-rw-</code>ï¼Œè¢«<code>022</code>ï¼ˆ<code>000 010 010</code>ï¼‰çš„<code>umask</code>åä¼šå˜æˆ<code>110 100 100</code>ï¼Œå³<code>644</code>ï¼Œ<code>rw-r--r--</code>ã€‚</p><blockquote><p>è™½ç„¶æˆ‘ä»¬é€šå¸¸çœ‹åˆ°ä¸€ä¸ªå…«è¿›åˆ¶çš„æƒé™æ©ç ç”¨ä¸‰ä½æ•°å­—æ¥è¡¨ç¤ºï¼Œä½†æ˜¯ä»æŠ€æœ¯å±‚é¢ä¸Šæ¥è®²ï¼Œç”¨å››ä½æ•°å­—æ¥è¡¨ç¤ºå®ƒæ›´ç¡®åˆ‡äº›ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºé™¤äº†è¯»å–ã€å†™å…¥å’Œæ‰§è¡Œæƒé™ä¹‹å¤–ï¼Œè¿˜æœ‰å…¶å®ƒè¾ƒå°‘ç”¨åˆ°çš„æƒé™è®¾ç½®ã€‚</p></blockquote><blockquote><p>å…¶ä¸­ä¹‹ä¸€æ˜¯ setuid ä½(å…«è¿›åˆ¶ 4000)ã€‚å½“åº”ç”¨åˆ°ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶æ—¶ï¼Œå®ƒæŠŠæœ‰æ•ˆç”¨æˆ· ID ä»çœŸæ­£çš„ç”¨æˆ·(å®é™…è¿è¡Œç¨‹åºçš„ç”¨æˆ·)è®¾ç½®æˆç¨‹åºæ‰€æœ‰è€…çš„ IDã€‚è¿™ç§æ“ä½œé€šå¸¸ä¼šåº”ç”¨åˆ°ä¸€äº›ç”±è¶…çº§ç”¨æˆ·æ‰€æ‹¥æœ‰çš„ç¨‹åºã€‚å½“ä¸€ä¸ªæ™®é€šç”¨æˆ·è¿è¡Œä¸€ä¸ªç¨‹åºï¼Œè¿™ä¸ªç¨‹åºç”±æ ¹ç”¨æˆ· (root) æ‰€æœ‰ï¼Œå¹¶ä¸”è®¾ç½®äº† setuid ä½ï¼Œè¿™ä¸ªç¨‹åºè¿è¡Œæ—¶å…·æœ‰è¶…çº§ç”¨æˆ·çš„ç‰¹æƒï¼Œè¿™æ ·ç¨‹åºå°±å¯ä»¥è®¿é—®æ™®é€šç”¨æˆ·ç¦æ­¢è®¿é—®çš„æ–‡ä»¶å’Œç›®å½•ã€‚å¾ˆæ˜æ˜¾ï¼Œå› ä¸ºè¿™ä¼šå¼•èµ·å®‰å…¨æ–¹é¢çš„é—®é¢˜ï¼Œæ‰€æœ‰å¯ä»¥è®¾ç½® setuid ä½çš„ç¨‹åºä¸ªæ•°ï¼Œå¿…é¡»æ§åˆ¶åœ¨ç»å¯¹å°çš„èŒƒå›´å†…ã€‚</p></blockquote><blockquote><p>ç¬¬äºŒä¸ªæ˜¯ setgid ä½(å…«è¿›åˆ¶ 2000)ï¼Œè¿™ä¸ªç›¸ä¼¼äº setuid ä½ï¼ŒæŠŠæœ‰æ•ˆç”¨æˆ·ç»„ ID ä»çœŸæ­£çš„ç”¨æˆ·ç»„ ID æ›´æ”¹ä¸ºæ–‡ä»¶æ‰€æœ‰è€…çš„ç»„ IDã€‚å¦‚æœè®¾ç½®äº†ä¸€ä¸ªç›®å½•çš„ setgid ä½ï¼Œåˆ™ç›®å½•ä¸­æ–°åˆ›å»ºçš„æ–‡ä»¶å…·æœ‰è¿™ä¸ªç›®å½•ç”¨æˆ·ç»„çš„æ‰€æœ‰æƒï¼Œè€Œä¸æ˜¯æ–‡ä»¶åˆ›å»ºè€…æ‰€å±ç”¨æˆ·ç»„çš„æ‰€æœ‰æƒã€‚å¯¹äºå…±äº«ç›®å½•æ¥è¯´ï¼Œå½“ä¸€ä¸ªæ™®é€šç”¨æˆ·ç»„ä¸­çš„æˆå‘˜ï¼Œéœ€è¦è®¿é—®å…±äº«ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶ï¼Œè€Œä¸ç®¡æ–‡ä»¶æ‰€æœ‰è€…çš„ä¸»ç”¨æˆ·ç»„æ—¶ï¼Œé‚£ä¹ˆè®¾ç½® setgid ä½å¾ˆæœ‰ç”¨å¤„ã€‚</p></blockquote><blockquote><p>ç¬¬ä¸‰ä¸ªæ˜¯ sticky ä½(å…«è¿›åˆ¶ 1000)ã€‚è¿™ä¸ªç»§æ‰¿äº Unixï¼Œåœ¨ Unix ä¸­ï¼Œå®ƒå¯èƒ½æŠŠä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶æ ‡å¿—ä¸ºâ€œä¸å¯äº¤æ¢çš„â€ã€‚åœ¨ Linux ä¸­ï¼Œä¼šå¿½ç•¥æ–‡ä»¶çš„ sticky ä½ï¼Œä½†æ˜¯å¦‚æœä¸€ä¸ªç›®å½•è®¾ç½®äº† sticky ä½ï¼Œé‚£ä¹ˆå®ƒèƒ½é˜»æ­¢ç”¨æˆ·åˆ é™¤æˆ–é‡å‘½åæ–‡ä»¶ï¼Œé™¤éç”¨æˆ·æ˜¯è¿™ä¸ªç›®å½•çš„æ‰€æœ‰è€…ï¼Œæˆ–è€…æ˜¯æ–‡ä»¶æ‰€æœ‰è€…ï¼Œæˆ–æ˜¯è¶…çº§ç”¨æˆ·ã€‚è¿™ä¸ªç»å¸¸ç”¨æ¥æ§åˆ¶è®¿é—®å…±äº«ç›®å½•ï¼Œæ¯”æ–¹è¯´/tmpã€‚</p></blockquote><p>æ¯ä¸ªå‘½ä»¤è¿˜æ˜¯è¦ç»™ä¸ªä¾‹å­ï¼Œæˆ‘<code>tee</code>å‘½ä»¤è™½ç„¶çŸ¥é“æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Œä½†æ˜¯ç”¨çš„æ—¶å€™è¿˜æ˜¯è‡ªç„¶è€Œç„¶çš„åŠ äº†ä¸€ä¸ª<code>&gt;</code>ï¼Œé”™äº†= =ã€‚</p><h2 id="su"><a class="header-anchor" href="#su">#</a>su</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su [-[l]] [user]</span><br></pre></td></tr></table></figure><p>å¦‚æœåŒ…å«<code>-l</code>é€‰é¡¹ï¼Œé‚£ä¹ˆä¼šä¸ºæŒ‡å®šç”¨æˆ·å¯åŠ¨ä¸€ä¸ªéœ€è¦ç™»å½•çš„<code>shell</code>ï¼Œå¦‚æœä¸æŒ‡å®šç”¨æˆ·ï¼Œé‚£ä¹ˆå°±å‡å®šæ˜¯<strong>è¶…çº§ç”¨æˆ·</strong>ã€‚</p><p><code>-l</code>å¯ä»¥ç¼©å†™ä¸º<code>-</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">deploy@iZwz96txzmeg2f5wu9eqigZ:~$ su -</span><br><span class="line">Password:</span><br><span class="line">root@iZwz96txzmeg2f5wu9eqigZ:~<span class="comment">#</span></span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥åªæ‰§è¡Œå•ä¸ªå‘½ä»¤ï¼Œè€Œä¸æ˜¯å¯åŠ¨ä¸€ä¸ªæ–°çš„å¯äº¤äº’çš„ shellï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su -c <span class="string">'command'</span></span><br></pre></td></tr></table></figure><p><code>å•å¼•å·</code>ä¿è¯äº†ä¸ä¼šæœ‰ä»»ä½•å±•å¼€ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ su -c <span class="string">'ls -l /root/*'</span></span><br><span class="line">Password:</span><br><span class="line">-rw------- 1 root root 200604 Sep 17 21:43 /root/nohup.out</span><br><span class="line">-rw-r--r-- 1 root root     22 Sep 18 12:24 /root/py.log</span><br><span class="line">-rw-r--r-- 1 root root   1579 Sep  9 16:14 /root/sync.log</span><br><span class="line"></span><br><span class="line">/root/go:</span><br><span class="line">total 4</span><br><span class="line">drwxr-xr-x 3 root root 4096 Sep  9 16:16 src</span><br></pre></td></tr></table></figure><h2 id="sudo"><a class="header-anchor" href="#sudo">#</a>sudo</h2><p>ç®¡ç†å‘˜èƒ½å¤Ÿé…ç½®<code>sudo</code>å‘½ä»¤ï¼Œä»è€Œå…è®¸ä¸€ä¸ªæ™®é€šç”¨æˆ·ä»¥ä¸åŒçš„èº«ä»½ï¼ˆé€šå¸¸æ˜¯è¶…çº§ç”¨æˆ·ï¼‰ï¼Œé€šè¿‡ä¸€ç§éå¸¸å¯æ§çš„æ–¹å¼æ¥æ‰§è¡Œå‘½ä»¤ã€‚<strong>å°¤å…¶æ˜¯ï¼Œåªæœ‰ä¸€ä¸ªç”¨æˆ·å¯ä»¥æ‰§è¡Œä¸€ä¸ªæˆ–å¤šä¸ªç‰¹æ®Šå‘½ä»¤æ—¶ã€‚</strong></p><p><code>sudo</code>å‘½ä»¤ä¸è¦æ±‚è¶…çº§ç”¨æˆ·çš„å¯†ç ï¼Œè€Œæ˜¯ä½¿ç”¨è‡ªå·±çš„å¯†ç æ¥è®¤è¯ã€‚</p><p><code>su</code> å’Œ <code>sudo</code> ä¹‹é—´çš„ä¸€ä¸ªé‡è¦åŒºåˆ«æ˜¯ <code>sudo</code> ä¸ä¼šé‡æ–°å¯åŠ¨ä¸€ä¸ª <code>shell</code>ï¼Œä¹Ÿä¸ä¼šåŠ è½½å¦ä¸€ä¸ªç”¨æˆ·çš„ <code>shell</code> è¿è¡Œç¯å¢ƒã€‚è¿™æ„å‘³è€…å‘½ä»¤ä¸å¿…ç”¨å•å¼•å·å¼•èµ·æ¥ã€‚</p><blockquote><p>å‡ å¹´å‰ï¼Œå¤§å¤šæ•°çš„ Linux å‘è¡Œç‰ˆéƒ½ä¾èµ–äº su å‘½ä»¤ï¼Œæ¥è¾¾åˆ°ç›®çš„ã€‚su å‘½ä»¤ä¸éœ€è¦ sudo å‘½ä»¤æ‰€è¦æ±‚çš„é…ç½®ï¼Œsu å‘½ä»¤æ‹¥æœ‰ä¸€ä¸ª root å¸å·ï¼Œæ˜¯ Unix ä¸­çš„ä¼ ç»Ÿã€‚ä½†è¿™ä¼šå¼•èµ·é—®é¢˜ã€‚æ‰€æœ‰ç”¨æˆ·ä¼šä¼å›¾ä»¥ root ç”¨æˆ·å¸å·æ¥æ“çºµç³»ç»Ÿã€‚äº‹å®ä¸Šï¼Œä¸€äº›ç”¨æˆ·ä¸“é—¨ä»¥ root ç”¨æˆ·å¸å·æ¥æ“ä½œç³»ç»Ÿï¼Œå› ä¸ºè¿™æ ·åšï¼Œçš„ç¡®æ¶ˆé™¤äº†æ‰€æœ‰é‚£äº›è®¨åŒçš„â€œæƒé™è¢«æ‹’ç»â€ çš„æ¶ˆæ¯ã€‚ä½ è¿™æ ·åšå°±ä¼šä½¿å¾— Linux ç³»ç»Ÿçš„å®‰å…¨æ€§èƒ½è¢«é™ä½åˆ°å’Œ Windows ç³»ç»Ÿç›¸åŒ çš„çº§åˆ«ã€‚ä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚<br>å½“å¼•è¿› Ubuntu çš„æ—¶å€™ï¼Œå®ƒçš„åˆ›ä½œè€…ä»¬é‡‡å–äº†ä¸åŒçš„ç­–ç•¥ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒUbuntu ä¸å…è®¸ç”¨æˆ·ç™»å½•åˆ° root å¸å·(å› ä¸ºä¸èƒ½ä¸º root å¸å·è®¾ç½®å¯†ç )ï¼Œè€Œæ˜¯ä½¿ç”¨ sudo å‘½ ä»¤æˆäºˆæ™®é€šç”¨æˆ·è¶…çº§ç”¨æˆ·æƒé™ã€‚é€šè¿‡ sudo å‘½ä»¤ï¼Œæœ€åˆçš„ç”¨æˆ·å¯ä»¥æ‹¥æœ‰è¶…çº§ç”¨æˆ·æƒ é™ï¼Œä¹Ÿå¯ä»¥æˆäºˆéšåçš„ç”¨æˆ·å¸å·ç›¸ä¼¼çš„æƒåŠ›ã€‚</p></blockquote><h2 id="chown"><a class="header-anchor" href="#chown">#</a>chown</h2><p><code>chown</code>å‘½ä»¤è¢«ç”¨æ¥æ›´æ”¹æ–‡ä»¶æˆ–ç›®å½•çš„æ‰€æœ‰è€…å’Œç”¨æˆ·ç»„ã€‚ä½¿ç”¨è¿™ä¸ªå‘½ä»¤éœ€è¦è¶…çº§ç”¨æˆ·æƒé™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown [owner][:[group]] file...</span><br></pre></td></tr></table></figure><p><code>bob</code>ï¼š æŠŠæ–‡ä»¶æ‰€æœ‰è€…ä»å½“å‰å±ä¸»æ›´æ”¹ä¸ºç”¨æˆ· bobã€‚<br><code>bob:users</code>ï¼š æŠŠæ–‡ä»¶æ‰€æœ‰è€…æ”¹ä¸ºç”¨æˆ· bobï¼Œæ–‡ä»¶ç”¨æˆ·ç»„æ”¹ä¸ºç”¨æˆ·ç»„ usersã€‚<br><code>:admins</code>ï¼š æŠŠæ–‡ä»¶ç”¨æˆ·ç»„æ”¹ä¸ºç»„ adminsï¼Œæ–‡ä»¶æ‰€æœ‰è€…ä¸å˜ã€‚<br><code>bob:</code>ï¼š æ–‡ä»¶æ‰€æœ‰è€…æ”¹ä¸ºç”¨æˆ· bobï¼Œæ–‡ä»¶ç”¨æˆ·ç»„æ”¹ä¸ºç”¨æˆ· bob ç™»å½• ç³»ç»Ÿæ—¶æ‰€å±çš„ç”¨æˆ·ç»„ã€‚</p><p><strong>åœ¨å¤§å¤šæ•°çš„é…ç½®ä¸­ï¼Œsudo å‘½ä»¤ä¼šç›¸ä¿¡ä½ å‡ åˆ†é’Ÿï¼Œç›´åˆ°è®¡æ—¶ç»“æŸã€‚</strong></p><h2 id="chgrp"><a class="header-anchor" href="#chgrp">#</a>chgrp</h2><blockquote><p>åœ¨æ—§ç‰ˆ Unix ç³»ç»Ÿä¸­ï¼Œchown å‘½ä»¤åªèƒ½æ›´æ”¹æ–‡ä»¶æ‰€æœ‰æƒï¼Œè€Œä¸æ˜¯ç”¨æˆ·ç»„æ‰€æœ‰æƒã€‚ä¸ºäº†è¾¾åˆ°ç›®çš„ï¼Œ ä½¿ç”¨ä¸€ä¸ªç‹¬ç«‹çš„å‘½ä»¤ï¼Œchgrp æ¥å®Œæˆã€‚é™¤äº†é™åˆ¶å¤šä¸€ç‚¹ä¹‹å¤–ï¼Œchgrp å‘½ä»¤ä¸ chown å‘½ä»¤ä½¿ç”¨èµ· æ¥å¾ˆç›¸ä¼¼ã€‚</p></blockquote><h2 id="passwd"><a class="header-anchor" href="#passwd">#</a>passwd</h2><p>è®¾ç½®æˆ–æ›´æ”¹ç”¨æˆ·å¯†ç ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd [user]</span><br></pre></td></tr></table></figure><blockquote><p>å½“ç³»ç»Ÿå¯åŠ¨çš„æ—¶å€™ï¼Œå†…æ ¸å…ˆæŠŠä¸€äº›å®ƒè‡ªå·±çš„æ´»åŠ¨åˆå§‹åŒ–ä¸ºè¿›ç¨‹ï¼Œç„¶åè¿è¡Œä¸€ä¸ªå«åš init çš„ç¨‹ åºã€‚initï¼Œä¾æ¬¡åœ°ï¼Œå†è¿è¡Œä¸€ç³»åˆ—çš„ç§°ä¸º init è„šæœ¬çš„ shell è„šæœ¬(ä½äº/etc)ï¼Œå®ƒä»¬å¯ä»¥å¯åŠ¨æ‰€æœ‰ çš„ç³»ç»ŸæœåŠ¡ã€‚å…¶ä¸­è®¸å¤šç³»ç»ŸæœåŠ¡ä»¥å®ˆæŠ¤(daemon)ç¨‹åºçš„å½¢å¼å®ç°ï¼Œå®ˆæŠ¤ç¨‹åºä»…åœ¨åå°è¿è¡Œï¼Œæ²¡æœ‰ä»»ä½•ç”¨æˆ·æ¥å£ (User Interface)ã€‚è¿™æ ·ï¼Œå³ä½¿æˆ‘ä»¬æ²¡æœ‰ç™»å½•ç³»ç»Ÿï¼Œè‡³å°‘ç³»ç»Ÿä¹Ÿåœ¨å¿™äºæ‰§è¡Œä¸€ äº›ä¾‹è¡Œäº‹åŠ¡ã€‚<sup class="footnote-ref"><a href="#fn8" id="fnref8">[8]</a></sup></p></blockquote><p>åœ¨è¿›ç¨‹æ–¹æ¡ˆä¸­ï¼Œä¸€ä¸ªç¨‹åºå¯ä»¥å‘åŠ¨å¦ä¸€ä¸ªç¨‹åºè¢«è¡¨è¿°ä¸ºä¸€ä¸ªçˆ¶è¿›ç¨‹å¯ä»¥äº§ç”Ÿä¸€ä¸ªå­è¿›ç¨‹ã€‚</p><blockquote><p>å†…æ ¸ç»´æŠ¤æ¯ä¸ªè¿›ç¨‹çš„ä¿¡æ¯ï¼Œä»¥æ­¤æ¥ä¿æŒäº‹æƒ…æœ‰åºã€‚ä¾‹å¦‚ï¼Œç³»ç»Ÿåˆ†é…ç»™æ¯ä¸ªè¿›ç¨‹ä¸€ä¸ªæ•°å­—ï¼Œè¿™ ä¸ªæ•°å­—å«åšè¿›ç¨‹ (process) ID æˆ– PIDã€‚PID å·æŒ‰å‡åºåˆ†é…ï¼Œinit è¿›ç¨‹çš„ PID æ€»æ˜¯ 1ã€‚å†…æ ¸ä¹Ÿå¯¹ åˆ†é…ç»™æ¯ä¸ªè¿›ç¨‹çš„å†…å­˜å’Œå°±ç»ªçŠ¶æ€è¿›è¡Œè·Ÿè¸ªä»¥ä¾¿ç»§ç»­æ‰§è¡Œè¿™ä¸ªè¿›ç¨‹ã€‚</p></blockquote><h2 id="ps"><a class="header-anchor" href="#ps">#</a>ps</h2><p><code>ps</code>å…¨ç§°<code>process status</code>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ ps</span><br><span class="line">  PID TTY          TIME CMD</span><br><span class="line">11583 pts/0    00:00:00 bash</span><br><span class="line">11600 pts/0    00:00:00 ps</span><br></pre></td></tr></table></figure><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œps ä¸ä¼šæ˜¾ç¤ºå¾ˆå¤šè¿›ç¨‹ä¿¡æ¯ï¼Œåªæ˜¯åˆ—å‡ºä¸å½“å‰ç»ˆç«¯ä¼šè¯ç›¸å…³çš„è¿›ç¨‹ã€‚</p><p><code>TTY</code> æ˜¯ â€œTeletypeâ€(ç›´è¯‘ç”µä¼ æ‰“å­—æœº) çš„ç®€å†™ï¼Œæ˜¯æŒ‡è¿›ç¨‹çš„æ§åˆ¶ç»ˆç«¯ã€‚<br><code>TIME</code> å­—æ®µè¡¨ç¤ºè¿›ç¨‹æ‰€æ¶ˆè€—çš„ CPU æ—¶é—´æ•°é‡ã€‚</p><p>åŠ ä¸Š <code>x</code> é€‰é¡¹ï¼Œå‘Šè¯‰ <code>ps</code> å‘½ä»¤ï¼Œå±•ç¤ºæ‰€æœ‰è¿›ç¨‹ï¼Œä¸ç®¡å®ƒä»¬ç”±ä»€ä¹ˆç»ˆç«¯ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰æ§åˆ¶ã€‚</p><p>åœ¨ TTY ä¸€æ ä¸­å‡ºç°çš„<code>?</code>ï¼Œè¡¨ç¤ºæ²¡æœ‰æ§åˆ¶ç»ˆç«¯ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ ps x</span><br><span class="line">  PID TTY      STAT   TIME COMMAND</span><br><span class="line">  784 ?        Ss     0:00 /lib/systemd/systemd --user</span><br><span class="line">  785 ?        S      0:00 (sd-pam)</span><br><span class="line">12071 ?        S      0:00 sshd: deploy@pts/0</span><br><span class="line">12072 pts/0    Ss     0:00 -bash</span><br><span class="line">12082 pts/0    R+     0:00 ps x</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœä¸­ï¼Œæ–°æ·»åŠ äº†ä¸€æ ï¼Œæ ‡é¢˜ä¸º <code>STAT</code>ã€‚ <code>STAT</code> æ˜¯ â€œstateâ€ çš„ç®€å†™ï¼Œå®ƒæ­ç¤ºäº†è¿›ç¨‹å½“å‰çŠ¶æ€ï¼š</p><p><code>R</code>ï¼š è¿è¡Œä¸­ã€‚è¿™æ„å‘³ç€ï¼Œè¿›ç¨‹æ­£åœ¨è¿è¡Œæˆ–å‡†å¤‡è¿è¡Œã€‚<br><code>S</code>ï¼š æ­£åœ¨ç¡çœ ã€‚è¿›ç¨‹æ²¡æœ‰è¿è¡Œï¼Œè€Œæ˜¯ï¼Œæ­£åœ¨ç­‰å¾…ä¸€ä¸ªäº‹ä»¶ï¼Œæ¯”å¦‚ è¯´ï¼Œä¸€ä¸ªæŒ‰é”®æˆ–è€…ç½‘ç»œåˆ†ç»„ã€‚<br><code>D</code>ï¼š ä¸å¯ä¸­æ–­ç¡çœ ã€‚è¿›ç¨‹æ­£åœ¨ç­‰å¾… I/Oï¼Œæ¯”æ–¹è¯´ï¼Œä¸€ä¸ªç£ç›˜é©±åŠ¨ å™¨çš„ I/Oã€‚<br><code>T</code>ï¼š å·²åœæ­¢. å·²ç»æŒ‡ç¤ºè¿›ç¨‹åœæ­¢è¿è¡Œã€‚ç¨åä»‹ç»æ›´å¤šã€‚<br><code>Z</code>ï¼š ä¸€ä¸ªæ­»è¿›ç¨‹æˆ–â€œåƒµå°¸â€è¿›ç¨‹ã€‚è¿™æ˜¯ä¸€ä¸ªå·²ç»ç»ˆæ­¢çš„å­è¿›ç¨‹ï¼Œ ä½†æ˜¯å®ƒçš„çˆ¶è¿›ç¨‹è¿˜æ²¡æœ‰æ¸…ç©ºå®ƒã€‚(çˆ¶è¿›ç¨‹æ²¡æœ‰æŠŠå­è¿›ç¨‹ä»è¿›ç¨‹è¡¨ä¸­åˆ é™¤)<br><code>&lt;</code>ï¼š ä¸€ä¸ªé«˜ä¼˜å…ˆçº§è¿›ç¨‹ã€‚è¿™å¯èƒ½ä¼šæˆäºˆä¸€ä¸ªè¿›ç¨‹æ›´å¤šé‡è¦çš„èµ„ æºï¼Œç»™å®ƒæ›´å¤šçš„ CPU æ—¶é—´ã€‚è¿›ç¨‹çš„è¿™ç§å±æ€§å«åš nicenessã€‚ å…·æœ‰é«˜ä¼˜å…ˆçº§çš„è¿›ç¨‹æ®è¯´æ˜¯ä¸å¥½çš„(less nice)ï¼Œå› ä¸ºå®ƒå ç”¨äº†æ¯”è¾ƒå¤šçš„ CPU æ—¶é—´ï¼Œè¿™æ ·å°±ç»™å…¶å®ƒè¿›ç¨‹ç•™ä¸‹å¾ˆå°‘æ—¶é—´ã€‚<br><code>N</code>ï¼š ä½ä¼˜å…ˆçº§è¿›ç¨‹ã€‚ä¸€ä¸ªä½ä¼˜å…ˆçº§è¿›ç¨‹(ä¸€ä¸ªâ€œniceâ€è¿›ç¨‹)åªæœ‰ å½“å…¶å®ƒé«˜ä¼˜å…ˆçº§è¿›ç¨‹è¢«æœåŠ¡äº†ä¹‹åï¼Œæ‰ä¼šå¾—åˆ°å¤„ç†å™¨æ—¶é—´ã€‚</p><p>ä¸è¿‡æˆ‘çš„ç³»ç»Ÿé‡Œæœ‰<code>Ss</code>å’Œ<code>R+</code>ä¹‹ç±»çš„ï¼Œåœ¨ä¹¦é‡Œæ²¡æœ‰ã€‚</p><p>è¿˜æœ‰ä¸€ä¸ªé€‰é¡¹<code>aux</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span><br><span class="line">root         1  0.0  0.4 225444  8820 ?        Ss   Jun12   7:55 /lib/systemd/systemd --system --deserialize 19</span><br><span class="line">root         2  0.0  0.0      0     0 ?        S    Jun12   0:00 [kthreadd]</span><br><span class="line">root         4  0.0  0.0      0     0 ?        I&lt;   Jun12   0:00 [kworker/0:0H]</span><br><span class="line">root         6  0.0  0.0      0     0 ?        I&lt;   Jun12   0:00 [mm_percpu_wq]</span><br></pre></td></tr></table></figure><p><code>USER</code>ï¼š ç”¨æˆ· ID. è¿›ç¨‹çš„æ‰€æœ‰è€…ã€‚<br><code>%CPU</code>ï¼š ä»¥ç™¾åˆ†æ¯”è¡¨ç¤ºçš„ CPU ä½¿ç”¨ç‡ã€‚<br><code>%MEM</code>ï¼š ä»¥ç™¾åˆ†æ¯”è¡¨ç¤ºçš„å†…å­˜ä½¿ç”¨ç‡ã€‚<br><code>VSZ</code>ï¼š è™šæ‹Ÿå†…å­˜å¤§å°ã€‚<br><code>RSS</code>ï¼š è¿›ç¨‹å ç”¨çš„ç‰©ç†å†…å­˜çš„å¤§å°ï¼Œä»¥åƒå­—èŠ‚ä¸ºå•ä½ã€‚<br><code>START</code>ï¼š è¿›ç¨‹å¯åŠ¨çš„æ—¶é—´ã€‚è‹¥å®ƒçš„å€¼è¶…è¿‡ 24 å°æ—¶ï¼Œåˆ™ç”¨å¤©è¡¨ç¤ºã€‚</p><h2 id="top"><a class="header-anchor" href="#top">#</a>top</h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>top</code>æ¯ä¸‰ç§’é’Ÿæ›´æ–°ä¸€æ¬¡ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">top - 19:25:51 up 170 days,  1:13,  1 user,  load average: 0.00, 0.00, 0.00</span><br><span class="line">Tasks:  89 total,   1 running,  57 sleeping,   0 stopped,   0 zombie</span><br><span class="line">%Cpu(s):  0.3 us,  0.7 sy,  0.0 ni, 99.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st</span><br><span class="line">KiB Mem :  2041216 total,   143632 free,   672572 used,  1225012 buff/cache</span><br><span class="line">KiB Swap:   969964 total,   969964 free,        0 used.  1157724 avail Mem</span><br><span class="line"></span><br><span class="line">  PID USER      PR  NI    VIRT    RES    SHR S %CPU %MEM     TIME+ COMMAND</span><br></pre></td></tr></table></figure><p><code>top</code>ï¼šç¨‹åºåã€‚<br><code>19:25:51</code>ï¼šå½“å‰æ—¶é—´ã€‚<br><code>up 170 days, 1:13</code>ï¼šè¿™æ˜¯æ­£å¸¸è¿è¡Œæ—¶é—´ã€‚å®ƒæ˜¯è®¡ç®—æœºä»ä¸Šæ¬¡å¯åŠ¨åˆ°ç°åœ¨æ‰€è¿è¡Œçš„æ—¶é—´ã€‚<br><code>1 user</code>ï¼šç™»å½•ç³»ç»Ÿç”¨æˆ·æ•°ã€‚<br><code>load average: 0.00, 0.00, 0.00</code>ï¼šåŠ è½½å¹³å‡å€¼ã€‚ç­‰å¾…è¿è¡Œçš„è¿›ç¨‹æ•°ç›®ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¤„äºå¯ä»¥è¿è¡ŒçŠ¶æ€å¹¶å…±äº« CPU çš„è¿›ç¨‹ä¸ªæ•°ã€‚ç¬¬ä¸€ä¸ªæ˜¯<code>æœ€å 60 ç§’çš„å¹³å‡å€¼</code>ï¼Œä¸‹ä¸€ä¸ªæ˜¯<code>å‰ 5 åˆ†é’Ÿçš„å¹³å‡å€¼</code>ï¼Œæœ€åä¸€ä¸ªæ˜¯<code>å‰ 15 åˆ†é’Ÿçš„å¹³å‡å€¼</code>ã€‚è‹¥å¹³å‡å€¼ä½äº<code>1.0</code>ï¼Œåˆ™æŒ‡ç¤ºè®¡ç®—æœºå·¥ä½œä¸å¿™ç¢Œã€‚<br><code>Tasks</code>ï¼šæ€»ç»“äº†è¿›ç¨‹æ•°ç›®å’Œè¿™äº›è¿›ç¨‹çš„å„ç§çŠ¶æ€ã€‚<br><code>Cpu(s)</code>ï¼šæè¿°äº† CPU æ­£åœ¨è¿›è¡Œçš„æ´»åŠ¨çš„ç‰¹æ€§ã€‚<br><code>us</code>ï¼šç”¨æˆ·è¿›ç¨‹ã€‚<br><code>sy</code>ï¼šç³»ç»Ÿï¼ˆå†…æ ¸ï¼‰è¿›ç¨‹ã€‚<br><code>ni</code>ï¼š<code>nice</code>ï¼ˆä½ä¼˜å…ˆçº§ï¼‰è¿›ç¨‹ã€‚<br><code>id</code>ï¼š<code>CPU</code>ç©ºé—²ç‡ã€‚<br><code>wa</code>ï¼šç­‰å¾…<code>I/O</code>ã€‚<br><code>hi</code>ï¼šç¡¬ä»¶ä¸­æ–­ã€‚<br><code>si</code>ï¼šè½¯ä»¶ä¸­æ–­ã€‚<br><code>st</code>ï¼šcpu cycle è¢«è™šæ‹ŸåŒ–å·èµ°çš„æ¯”ä¾‹ã€‚<br><code>Mem</code>ï¼šç‰©ç†å†…å­˜çš„ä½¿ç”¨æƒ…å†µã€‚<br><code>Swap</code>ï¼šäº¤æ¢åˆ†åŒºï¼ˆè™šæ‹Ÿå†…å­˜ï¼‰çš„ä½¿ç”¨æƒ…å†µã€‚</p><p><code>h</code>å‘½ä»¤æ˜¾ç¤ºå¸®åŠ©ã€‚<br><code>q</code>é€€å‡º<code>top</code>å‘½ä»¤ã€‚</p><h2 id=""><a class="header-anchor" href="#">#</a>&amp;</h2><p>åœ¨å‘½ä»¤ååŠ <code>&amp;</code>åå°æ‰§è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">command</span> &amp;</span><br></pre></td></tr></table></figure><center><!-- //onns.xyz/blog/image --><p><img src="//onns.xyz/blog/image/20201202-1.png" alt="xlogo"></p></center><p>è¿™ä¸ª<code>xlogo</code>å‘½ä»¤å¯ä»¥åœ¨æ˜¾ç¤ºå±ä¸Šæ˜¾ç¤ºä¸€ä¸ª<code>X</code>ï¼Œå¯ä»¥éšç€æ‹–åŠ¨å˜å¤§å°ï¼Œå¿…é¡»è¦æœ‰æ˜¾ç¤ºå™¨æ‰è¡Œã€‚</p><h2 id="-2"><a class="header-anchor" href="#-2">#</a>&amp;</h2><p>åœ¨å‘½ä»¤ååŠ <code>&amp;</code>åå°æ‰§è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">command</span> &amp;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">onns@onns-desktop:~$ xlogo &amp;</span><br><span class="line">[1] 3642</span><br></pre></td></tr></table></figure><p><code>[1] 3642</code>æ˜¯ <code>shell</code> ç‰¹æ€§çš„ä¸€éƒ¨åˆ†ï¼Œå«åš<code>ä»»åŠ¡æ§åˆ¶</code>ï¼ˆjob controlï¼‰ã€‚</p><p><code>ä»»åŠ¡å·</code>ï¼ˆjob numberï¼‰ä¸º<strong>1</strong>ï¼ŒPID ä¸º<strong>3642</strong>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">onns@onns-desktop:~$ ps</span><br><span class="line">    PID TTY          TIME CMD</span><br><span class="line">   2306 pts/0    00:00:00 bash</span><br><span class="line">   3642 pts/0    00:00:00 xlogo</span><br><span class="line">   4229 pts/0    00:00:00 ps</span><br></pre></td></tr></table></figure><p><code>jobs</code>å‘½ä»¤åˆ—å‡ºä»ç»ˆç«¯ä¸­å¯åŠ¨äº†çš„ä»»åŠ¡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">onns@onns-desktop:~$ <span class="built_in">jobs</span></span><br><span class="line">[1]+  Running                 xlogo &amp;</span><br></pre></td></tr></table></figure><h2 id="fg"><a class="header-anchor" href="#fg">#</a>fg</h2><p><code>fg</code>å‘½ä»¤è®©ä¸€ä¸ªè¿›ç¨‹è¿”å›å‰å°ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">fg</span> %jobspec</span><br></pre></td></tr></table></figure><p><code>fg</code>å‘½ä»¤ä¹‹åæ¥ä¸€ä¸ªç™¾åˆ†å·å’Œä»»åŠ¡åºå·ï¼ˆjobspecï¼‰ã€‚</p><p>å¦‚æœåªæœ‰ä¸€ä¸ªåå°ä»»åŠ¡ï¼Œé‚£ä¹ˆ<code>jobspec</code>ï¼ˆjob specificationï¼‰æ˜¯å¯æœ‰å¯æ— çš„ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">onns@onns-desktop:~$ <span class="built_in">jobs</span></span><br><span class="line">[1]+  Running                 xlogo &amp;</span><br><span class="line">onns@onns-desktop:~$ <span class="built_in">fg</span> %1</span><br><span class="line">xlogo</span><br></pre></td></tr></table></figure><h2 id="ctrl-z"><a class="header-anchor" href="#ctrl-z">#</a>ctrl z</h2><p>åœæ­¢è¿›ç¨‹ï¼Œè¿™ä¹ˆåšé€šå¸¸æ˜¯ä¸ºäº†å…è®¸å‰å°è¿›ç¨‹è¢«ç§»åŠ¨åˆ°åå°ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">onns@onns-desktop:~$ xlogo</span><br><span class="line">^Z</span><br><span class="line">[2]+  Stopped                 xlogo</span><br><span class="line"></span><br><span class="line">onns@onns-desktop:~$ <span class="built_in">jobs</span></span><br><span class="line">[1]-  Stopped                 xlogo</span><br><span class="line">[2]+  Stopped                 xlogo</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>fg</code> å‘½ä»¤ï¼Œå¯ä»¥æ¢å¤ç¨‹åºåˆ°å‰å°è¿è¡Œï¼Œæˆ–è€…ç”¨ <code>bg</code> å‘½ä»¤æŠŠç¨‹åºç§»åˆ°åå°ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">onns@onns-desktop:~$ <span class="built_in">bg</span> %2</span><br><span class="line">[2]+ xlogo &amp;</span><br><span class="line">onns@onns-desktop:~$ <span class="built_in">jobs</span></span><br><span class="line">[1]+  Stopped                 xlogo</span><br><span class="line">[2]-  Running                 xlogo &amp;</span><br></pre></td></tr></table></figure><h2 id="kill"><a class="header-anchor" href="#kill">#</a>kill</h2><p><code>kill</code>å‘½ä»¤ç”¨æ¥ç»ˆæ­¢ç¨‹åºã€‚</p><blockquote><p>è¿™ä¸ª <code>kill</code> å‘½ä»¤ä¸æ˜¯çœŸçš„â€œæ€æ­»â€ç¨‹åºï¼Œè€Œæ˜¯ç»™ç¨‹åºå‘é€ä¿¡å·ã€‚ä¿¡å·æ˜¯æ“ä½œç³»ç»Ÿä¸ç¨‹åºä¹‹é—´è¿›è¡Œé€šä¿¡æ—¶æ‰€é‡‡ç”¨çš„å‡ ç§æ–¹å¼ä¸­çš„ä¸€ç§ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">kill</span> [-signal] PID...</span><br></pre></td></tr></table></figure><p>å¦‚æœåœ¨å‘½ä»¤è¡Œä¸­æ²¡æœ‰æŒ‡å®šä¿¡å·ï¼Œé‚£ä¹ˆé»˜è®¤æƒ…å†µä¸‹ï¼Œå‘é€<code>TERM</code>ï¼ˆTerminateï¼Œç»ˆæ­¢ï¼‰ä¿¡å·ã€‚</p><ul><li>ç¼–å·<code>1</code>ä»£è¡¨<code>HUP</code>ï¼ŒæŒ‚èµ·(Hangup)ã€‚è¿™æ˜¯ç¾å¥½å¾€æ˜”çš„æ®‹ç•™éƒ¨åˆ†ï¼Œé‚£æ—¶å€™ç»ˆç«¯æœºé€šè¿‡ç”µè¯çº¿å’Œè°ƒåˆ¶è§£è°ƒå™¨è¿æ¥åˆ°è¿œç«¯çš„è®¡ç®—æœºã€‚è¿™ä¸ªä¿¡å·è¢«ç”¨æ¥å‘Šè¯‰ç¨‹åºï¼Œæ§åˆ¶çš„ç»ˆç«¯æœºå·²ç»â€œæŒ‚æ–­â€ã€‚é€šè¿‡å…³é—­ä¸€ä¸ªç»ˆç«¯ä¼šè¯ï¼Œå¯ä»¥å±•ç¤ºè¿™ä¸ªä¿¡å·çš„ä½œç”¨ã€‚åœ¨å½“å‰ç»ˆç«¯è¿è¡Œçš„å‰å°ç¨‹åºå°†ä¼šæ”¶åˆ°è¿™ä¸ªä¿¡å·å¹¶ç»ˆæ­¢ã€‚è®¸å¤šå®ˆæŠ¤è¿›ç¨‹ä¹Ÿä½¿ç”¨è¿™ä¸ªä¿¡å·ï¼Œæ¥é‡æ–°åˆå§‹åŒ–ã€‚è¿™æ„å‘³ç€ï¼Œå½“ä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹æ”¶åˆ°è¿™ä¸ªä¿¡å·åï¼Œè¿™ä¸ªè¿› ç¨‹ä¼šé‡æ–°å¯åŠ¨ï¼Œå¹¶ä¸”é‡æ–°è¯»å–å®ƒçš„é…ç½®æ–‡ä»¶ã€‚Apache ç½‘ç»œæœåŠ¡å™¨å®ˆæŠ¤è¿›ç¨‹å°±æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</li><li>ç¼–å·<code>2</code>ä»£è¡¨<code>INT</code>ï¼Œä¸­æ–­ã€‚å®ç°å’Œ Ctrl-c ä¸€æ ·çš„åŠŸèƒ½ï¼Œç”±ç»ˆç«¯å‘é€ã€‚é€šå¸¸ï¼Œ å®ƒä¼šç»ˆæ­¢ä¸€ä¸ªç¨‹åºã€‚</li><li>ç¼–å·<code>9</code>ä»£è¡¨<code>KILL</code>ï¼Œæ€æ­»ã€‚è¿™ä¸ªä¿¡å·å¾ˆç‰¹åˆ«ã€‚å°½ç®¡ç¨‹åºå¯èƒ½ä¼šé€‰æ‹©ä¸åŒçš„ æ–¹å¼æ¥å¤„ç†å‘é€ç»™å®ƒçš„ä¿¡å·ï¼Œå…¶ä¸­ä¹ŸåŒ…å«å¿½ç•¥ä¿¡å·ï¼Œ ä½†æ˜¯ KILL ä¿¡å·ä»ä¸è¢«å‘é€åˆ°ç›®æ ‡ç¨‹åºã€‚è€Œæ˜¯å†…æ ¸ç«‹ å³ç»ˆæ­¢è¿™ä¸ªè¿›ç¨‹ã€‚å½“ä¸€ä¸ªè¿›ç¨‹ä»¥è¿™ç§æ–¹å¼ç»ˆæ­¢çš„æ—¶å€™ï¼Œ å®ƒæ²¡æœ‰æœºä¼šå»åšäº›â€œæ¸…ç†â€å·¥ä½œï¼Œæˆ–è€…æ˜¯ä¿å­˜å·¥ä½œã€‚ å› ä¸ºè¿™ä¸ªåŸå› ï¼ŒæŠŠ KILL ä¿¡å·çœ‹ä½œæœ€åä¸€æ‹›ï¼Œå½“å…¶å®ƒ ç»ˆæ­¢ä¿¡å·å¤±è´¥åï¼Œå†ä½¿ç”¨å®ƒã€‚</li><li>ç¼–å·<code>15</code>ä»£è¡¨<code>TERM</code>ï¼Œç»ˆæ­¢ã€‚è¿™æ˜¯ kill å‘½ä»¤å‘é€çš„é»˜è®¤ä¿¡å·ã€‚å¦‚æœç¨‹åºä»ç„¶ â€œæ´»ç€â€ï¼Œå¯ä»¥æ¥å—ä¿¡å·ï¼Œé‚£ä¹ˆè¿™ä¸ªå®ƒä¼šç»ˆæ­¢ã€‚</li><li>ç¼–å·<code>18</code>ä»£è¡¨<code>CONT</code>ï¼Œç»§ç»­ã€‚åœ¨ä¸€ä¸ªåœæ­¢ä¿¡å·åï¼Œè¿™ä¸ªä¿¡å·ä¼šæ¢å¤è¿›ç¨‹çš„è¿ è¡Œã€‚</li><li>ç¼–å·<code>19</code>ä»£è¡¨<code>STOP</code>ï¼Œåœæ­¢ã€‚è¿™ä¸ªä¿¡å·å¯¼è‡´è¿›ç¨‹åœæ­¢è¿è¡Œï¼Œè€Œä¸æ˜¯ç»ˆæ­¢ã€‚åƒ KILL ä¿¡å·ï¼Œå®ƒä¸è¢«å‘é€åˆ°ç›®æ ‡è¿›ç¨‹ï¼Œå› æ­¤å®ƒä¸èƒ½è¢«å¿½ç•¥ã€‚</li></ul><p><strong>è¿›ç¨‹ï¼Œå’Œæ–‡ä»¶ä¸€æ ·ï¼Œæ‹¥æœ‰æ‰€æœ‰è€…ï¼Œæ‰€ä»¥ä¸ºäº†èƒ½å¤Ÿé€šè¿‡ <code>kill</code> å‘½ä»¤æ¥ç»™è¿›ç¨‹å‘é€ä¿¡å·ï¼Œä½ å¿…é¡»æ˜¯ è¿›ç¨‹çš„æ‰€æœ‰è€…(æˆ–è€…æ˜¯è¶…çº§ç”¨æˆ·)ã€‚</strong></p><p><code>kill -l</code>å¯ä»¥å¾—åˆ°ä¸€ä¸ªå®Œæ•´çš„ä¿¡å·åˆ—è¡¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">onns@onns-desktop:~$ <span class="built_in">kill</span> -l</span><br><span class="line"> 1) SIGHUP 2) SIGINT 3) SIGQUIT 4) SIGILL 5) SIGTRAP</span><br><span class="line"> 6) SIGABRT 7) SIGBUS 8) SIGFPE 9) SIGKILL10) SIGUSR1</span><br><span class="line">11) SIGSEGV12) SIGUSR213) SIGPIPE14) SIGALRM15) SIGTERM</span><br><span class="line">16) SIGSTKFLT17) SIGCHLD18) SIGCONT19) SIGSTOP20) SIGTSTP</span><br><span class="line">21) SIGTTIN22) SIGTTOU23) SIGURG24) SIGXCPU25) SIGXFSZ</span><br><span class="line">26) SIGVTALRM27) SIGPROF28) SIGWINCH29) SIGIO30) SIGPWR</span><br><span class="line">31) SIGSYS34) SIGRTMIN35) SIGRTMIN+136) SIGRTMIN+237) SIGRTMIN+3</span><br><span class="line">38) SIGRTMIN+439) SIGRTMIN+540) SIGRTMIN+641) SIGRTMIN+742) SIGRTMIN+8</span><br><span class="line">43) SIGRTMIN+944) SIGRTMIN+1045) SIGRTMIN+1146) SIGRTMIN+1247) SIGRTMIN+13</span><br><span class="line">48) SIGRTMIN+1449) SIGRTMIN+1550) SIGRTMAX-1451) SIGRTMAX-1352) SIGRTMAX-12</span><br><span class="line">53) SIGRTMAX-1154) SIGRTMAX-1055) SIGRTMAX-956) SIGRTMAX-857) SIGRTMAX-7</span><br><span class="line">58) SIGRTMAX-659) SIGRTMAX-560) SIGRTMAX-461) SIGRTMAX-362) SIGRTMAX-2</span><br><span class="line">63) SIGRTMAX-164) SIGRTMAX</span><br></pre></td></tr></table></figure><p>ä¸æ˜¯å¾ˆå¸¸ç”¨ï¼Œè›®çœ‹ä¸€ä¸‹ç½¢äº†ã€‚</p><h2 id="printenv"><a class="header-anchor" href="#printenv">#</a>printenv</h2><p><code>printenv</code>ç¨‹åºç”¨æ¥æŸ¥çœ‹ç¯å¢ƒå˜é‡ã€‚<br>ä¸çŸ¥é“ä¸ºä»€ä¹ˆæˆ‘çš„<code>set</code>å‘½ä»¤è¾“å‡ºçš„æ˜¯ä¸€å †å¥‡æ€ªçš„ä¸œè¥¿= =ã€‚<br>åˆ«åæ— æ³•é€šè¿‡ä½¿ç”¨<code>set</code>æˆ–<code>printenv</code>æ¥æŸ¥çœ‹ã€‚<br>ç”¨ä¸å¸¦å‚æ•°çš„`alias æ¥æŸ¥çœ‹åˆ«åï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">alias</span></span><br><span class="line"><span class="built_in">alias</span> alert=<span class="string">'notify-send --urgency=low -i "$([ $? = 0 ] &amp;&amp; echo terminal || echo error)" "$(history|tail -n1|sed -e '</span>\<span class="string">''</span>s/^\s*[0-9]\+\s*//;s/[;&amp;|]\s*alert$//<span class="string">'\'</span><span class="string">')"'</span></span><br><span class="line"><span class="built_in">alias</span> egrep=<span class="string">'egrep --color=auto'</span></span><br><span class="line"><span class="built_in">alias</span> fgrep=<span class="string">'fgrep --color=auto'</span></span><br><span class="line"><span class="built_in">alias</span> grep=<span class="string">'grep --color=auto'</span></span><br><span class="line"><span class="built_in">alias</span> l=<span class="string">'ls -CF'</span></span><br><span class="line"><span class="built_in">alias</span> la=<span class="string">'ls -A'</span></span><br><span class="line"><span class="built_in">alias</span> ll=<span class="string">'ls -alF'</span></span><br><span class="line"><span class="built_in">alias</span> ls=<span class="string">'ls --color=auto'</span></span><br></pre></td></tr></table></figure><h2 id="vi"><a class="header-anchor" href="#vi">#</a>vi</h2><p><code>vi</code>å¯åŠ¨åä¼šç›´æ¥è¿›å…¥å‘½ä»¤æ¨¡å¼ã€‚</p><p>æŒ‰ä¸‹<code>i</code>é”®è¿›å…¥æ’å…¥æ¨¡å¼ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-- INSERT --</span><br></pre></td></tr></table></figure><p>æŒ‰ä¸‹<code>w</code>é”®ä¿å­˜ä¿®æ”¹å†…å®¹ã€‚</p><p>æŒ‰ä¸‹<code>q</code>é”®é€€å‡ºã€‚</p><p><code>vi</code>ä¸­çš„è®¸å¤šå‘½ä»¤éƒ½å¯ä»¥åœ¨å‰é¢åŠ ä¸Šä¸€ä¸ªæ•°å­—ã€‚</p><p>19:16ï¼Œä»Šå¤©å…ˆçœ‹åˆ°è¿™é‡Œå§ï¼çœ‹äº†å¾ˆå¤šä½†å€¼å¾—æ•´ç†çš„è›®å°‘çš„ã€‚</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>è¿™ä¸ªä»¥å‰è¿˜çœŸæ²¡æ³¨æ„ã€‚ã€‚ã€‚ <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li><li id="fn2" class="footnote-item"><p>è€å®è¯´ï¼Œæ²¡çœ‹æ‡‚è¿™å¥è¯å•¥æ„æ€ã€‚ <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p></li><li id="fn3" class="footnote-item"><p>çœ‹åˆ°è¿™é‡Œçš„æ—¶å€™ï¼Œæˆ‘å¤§æ¦‚å·²ç»å¿˜äº†<code>less</code>æ€ä¹ˆç”¨äº†ï¼Œä¸æ„§æ˜¯æˆ‘ã€‚ <a href="#fnref3" class="footnote-backref">â†©ï¸</a></p></li><li id="fn4" class="footnote-item"><p>æ²¡çœ‹æ‡‚è¿™å¥è¯ã€‚ <a href="#fnref4" class="footnote-backref">â†©ï¸</a></p></li><li id="fn5" class="footnote-item"><p>æ³¨æ„å¯¹äºç¬¦å·é“¾æ¥æ–‡ä»¶ï¼Œå‰©ä½™çš„æ–‡ä»¶å±æ€§æ€»æ˜¯<code>rwxrwxrwx</code>ï¼Œè€Œä¸”éƒ½æ˜¯è™šæ‹Ÿå€¼ã€‚çœŸæ­£çš„æ–‡ä»¶å±æ€§æ˜¯æŒ‡ç¬¦å·é“¾æ¥<code>æ‰€æŒ‡å‘çš„æ–‡ä»¶çš„å±æ€§</code>ã€‚ <a href="#fnref5" class="footnote-backref">â†©ï¸</a></p></li><li id="fn6" class="footnote-item"><p>è¿™ç§æ–‡ä»¶ç±»å‹æ˜¯æŒ‡æŒ‰ç…§å­—èŠ‚æµæ¥å¤„ç†æ•°æ®çš„è®¾å¤‡ã€‚æ¯”å¦‚è¯´ç»ˆç«¯æœºæˆ–è€…è°ƒåˆ¶è§£è°ƒå™¨ã€‚ <a href="#fnref6" class="footnote-backref">â†©ï¸</a></p></li><li id="fn7" class="footnote-item"><p>è¿™ç§æ–‡ä»¶ç±»å‹æ˜¯æŒ‡æŒ‰ç…§æ•°æ®å—æ¥å¤„ç†æ•°æ®çš„è®¾å¤‡ï¼Œä¾‹å¦‚ä¸€ä¸ªç¡¬ç›˜æˆ–è€… CD-ROM ç›˜ã€‚ <a href="#fnref7" class="footnote-backref">â†©ï¸</a></p></li><li id="fn8" class="footnote-item"><p><code>init</code>è¿›ç¨‹çš„è¿›ç¨‹å·æ˜¯<code>1</code>ï¼Œä½†å¥½åƒ<code>Ubuntu 18.04</code>ä¹‹åå¼€å§‹ç”¨<code>systemd</code>ä½œä¸ºåˆå§‹è¿›ç¨‹äº†ã€‚ <a href="#fnref8" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> shell </tag>
            
            <tag> bash </tag>
            
            <tag> shell note </tag>
            
            <tag> summary </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Video Classification with FineCoarse Networks</title>
      <link href="/blog/2021/04/06/video-classification-with-finecoarse-networks/"/>
      <url>/blog/2021/04/06/video-classification-with-finecoarse-networks/</url>
      
        <content type="html"><![CDATA[<h1 id="video-classification-with-finecoarse-networks"><a class="header-anchor" href="#video-classification-with-finecoarse-networks">#</a>Video Classification with FineCoarse Networks</h1><h2 id="ç›¸å…³ä¿¡æ¯"><a class="header-anchor" href="#ç›¸å…³ä¿¡æ¯">#</a>ç›¸å…³ä¿¡æ¯</h2><ul><li><a href="https://arxiv.org/abs/2103.15584" target="_blank" rel="noopener">https://arxiv.org/abs/2103.15584</a></li><li><code>SS1</code>å‡†ç¡®ç‡<code>57.0%</code></li></ul><h2 id="æ‘˜è¦"><a class="header-anchor" href="#æ‘˜è¦">#</a>æ‘˜è¦</h2><p>æå‡ºäº†ä¸€ç§<code>Motion Band-pass Module</code>æ¨¡å—ã€‚</p><h2 id=""><a class="header-anchor" href="#">#</a></h2>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¡Œä¸ºè¯†åˆ« </tag>
            
            <tag> action recognition </tag>
            
            <tag> 2021 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŠGoè¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹ç¬”è®°ï¼ˆ4ï¼‰</title>
      <link href="/blog/2021/03/17/the-go-programming-language-note-4/"/>
      <url>/blog/2021/03/17/the-go-programming-language-note-4/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šgo-è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹"><a class="header-anchor" href="#ã€Šgo-è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹">#</a>ã€ŠGo è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹</h1><a id="more"></a><h1 id="ç¨‹åºç»“æ„"><a class="header-anchor" href="#ç¨‹åºç»“æ„">#</a>ç¨‹åºç»“æ„</h1><h2 id="æŒ‡é’ˆ"><a class="header-anchor" href="#æŒ‡é’ˆ">#</a>æŒ‡é’ˆ</h2><p>ä»»ä½•ç±»å‹çš„æŒ‡é’ˆçš„é›¶å€¼éƒ½æ˜¯<code>nil</code>ã€‚</p><p>å¦‚æœ<code>p</code>æŒ‡å‘æŸä¸ªæœ‰æ•ˆå˜é‡ï¼Œé‚£ä¹ˆ<code>p != nil</code>æµ‹è¯•ä¸ºçœŸã€‚</p><p>æŒ‡é’ˆä¹‹é—´ä¹Ÿæ˜¯å¯ä»¥è¿›è¡Œç›¸ç­‰æµ‹è¯•çš„ï¼Œåªæœ‰å½“å®ƒä»¬æŒ‡å‘åŒä¸€ä¸ªå˜é‡æˆ–å…¨éƒ¨æ˜¯<code>nil</code>æ—¶æ‰ç›¸ç­‰ã€‚</p><p>å¦ä¸€ä¸ªåˆ›å»ºå˜é‡çš„æ–¹æ³•æ˜¯è°ƒç”¨ç”¨å†…å»ºçš„<code>new</code>å‡½æ•°ã€‚è¡¨è¾¾å¼<code>new(T)</code>å°†åˆ›å»ºä¸€ä¸ª<code>T</code>ç±»å‹çš„åŒ¿åå˜é‡ï¼Œåˆå§‹åŒ–ä¸º<code>T</code>ç±»å‹çš„é›¶å€¼ï¼Œ<strong>ç„¶åè¿”å›å˜é‡åœ°å€</strong>ï¼Œè¿”å›çš„æŒ‡é’ˆç±»å‹ä¸º<code>*T</code>ã€‚</p><p>å¯¹äºåœ¨åŒ…ä¸€çº§å£°æ˜çš„å˜é‡æ¥è¯´ï¼Œå®ƒä»¬çš„ç”Ÿå‘½å‘¨æœŸå’Œæ•´ä¸ªç¨‹åºçš„è¿è¡Œå‘¨æœŸæ˜¯ä¸€è‡´çš„ã€‚</p><p>å±€éƒ¨å˜é‡çš„å£°æ˜å‘¨æœŸåˆ™æ˜¯åŠ¨æ€çš„ï¼šæ¯æ¬¡ä»åˆ›å»ºä¸€ä¸ªæ–°å˜é‡çš„å£°æ˜è¯­å¥å¼€å§‹ï¼Œç›´åˆ°è¯¥å˜é‡ä¸å†è¢«å¼•ç”¨ä¸ºæ­¢ï¼Œç„¶åå˜é‡çš„å­˜å‚¨ç©ºé—´å¯èƒ½è¢«å›æ”¶ã€‚</p><p>å‡½æ•°çš„å³å°æ‹¬å¼§ä¹Ÿå¯ä»¥å¦èµ·ä¸€è¡Œç¼©è¿›ï¼ŒåŒæ—¶ä¸ºäº†é˜²æ­¢ç¼–è¯‘å™¨åœ¨è¡Œå°¾è‡ªåŠ¨æ’å…¥åˆ†å·è€Œå¯¼è‡´çš„ç¼–è¯‘é”™è¯¯ï¼Œå¯ä»¥åœ¨æœ«å°¾çš„å‚æ•°å˜é‡åé¢æ˜¾å¼æ’å…¥é€—å·ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> t := <span class="number">0.0</span>; t &lt; cycles*<span class="number">2</span>*math.Pi; t += res &#123;</span><br><span class="line">x := math.Sin(t)</span><br><span class="line">y := math.Sin(t*freq + phase)</span><br><span class="line">img.SetColorIndex(size+<span class="keyword">int</span>(x*size+<span class="number">0.5</span>), size+<span class="keyword">int</span>(y*size+<span class="number">0.5</span>),</span><br><span class="line">blackIndex)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> t := <span class="number">0.0</span>; t &lt; cycles*<span class="number">2</span>*math.Pi; t += res &#123;</span><br><span class="line">x := math.Sin(t)</span><br><span class="line">y := math.Sin(t*freq + phase) </span><br><span class="line">img.SetColorIndex(</span><br><span class="line">size+<span class="keyword">int</span>(x*size+<span class="number">0.5</span>), size+<span class="keyword">int</span>(y*size+<span class="number">0.5</span>),</span><br><span class="line">blackIndex,<span class="comment">// æœ€åæ’å…¥çš„é€—å·ä¸ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ï¼Œè¿™æ˜¯Goç¼–è¯‘å™¨çš„ä¸€ä¸ªç‰¹æ€§ </span></span><br><span class="line">) <span class="comment">// å°æ‹¬å¼§å¦èµ·ä¸€è¡Œç¼©è¿›ï¼Œå’Œå¤§æ‹¬å¼§çš„é£æ ¼ä¿å­˜ä¸€è‡´</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨é€‰æ‹©åœ¨æ ˆä¸Šè¿˜æ˜¯åœ¨å †ä¸Šåˆ†é…å±€éƒ¨å˜é‡çš„å­˜å‚¨ç©ºé—´ã€‚</p><h2 id="èµ‹å€¼"><a class="header-anchor" href="#èµ‹å€¼">#</a>èµ‹å€¼</h2><p>è‡ªå¢å’Œè‡ªå‡æ˜¯è¯­å¥ï¼Œè€Œä¸æ˜¯è¡¨è¾¾å¼ï¼Œå› æ­¤<code>x = i++</code>ä¹‹ç±»çš„è¡¨è¾¾å¼æ˜¯é”™è¯¯çš„ã€‚</p><h2 id="ç±»å‹"><a class="header-anchor" href="#ç±»å‹">#</a>ç±»å‹</h2><p>ä¸€ä¸ªç±»å‹å£°æ˜è¯­å¥åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ç±»å‹åç§°ï¼Œå’Œç°æœ‰ç±»å‹å…·æœ‰ç›¸åŒçš„åº•å±‚ç»“æ„ã€‚æ–°å‘½åçš„ç±»å‹æä¾›äº†ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨æ¥åˆ†éš”ä¸åŒæ¦‚å¿µçš„ç±»å‹ï¼Œè¿™æ ·å³ä½¿å®ƒä»¬åº•å±‚ç±»å‹ç›¸åŒä¹Ÿæ˜¯ä¸å…¼å®¹çš„ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> ç±»å‹åå­— åº•å±‚ç±»å‹</span><br><span class="line"><span class="keyword">type</span> Celsius <span class="keyword">float64</span></span><br></pre></td></tr></table></figure><p>ç±»å‹å£°æ˜è¯­å¥ä¸€èˆ¬å‡ºç°åœ¨åŒ…ä¸€çº§ï¼Œå› æ­¤å¦‚æœæ–°åˆ›å»ºçš„ç±»å‹åå­—çš„é¦–å­—ç¬¦å¤§å†™ï¼Œåˆ™åœ¨å¤–éƒ¨åŒ…ä¹Ÿå¯ä»¥ä½¿ç”¨ã€‚</p><p>å¯¹äºæ¯ä¸€ä¸ªç±»å‹<code>T</code>ï¼Œéƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„ç±»å‹è½¬æ¢æ“ä½œ<code>T(x)</code>ï¼Œç”¨äºå°†<code>x</code>è½¬ä¸º<code>T</code>ç±»å‹ï¼Œå¦‚æœ<code>T</code>æ˜¯æŒ‡é’ˆç±»å‹ï¼Œå¯èƒ½ä¼šéœ€è¦ç”¨å°æ‹¬å¼§åŒ…è£…<code>T</code>ï¼Œæ¯”å¦‚<code>(*int)(0)</code>ã€‚</p><p>åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼Œè¿è¡Œæ—¶ä¸ä¼šå‘ç”Ÿè½¬æ¢å¤±è´¥çš„é”™è¯¯ï¼Œé”™è¯¯åªä¼šå‘ç”Ÿåœ¨ç¼–è¯‘é˜¶æ®µã€‚</p><p>åº•å±‚æ•°æ®ç±»å‹å†³å®šäº†å†…éƒ¨ç»“æ„å’Œè¡¨è¾¾æ–¹å¼ï¼Œä¹Ÿå†³å®šæ˜¯å¦å¯ä»¥åƒåº•å±‚ç±»å‹ä¸€æ ·å¯¹å†…ç½®è¿ç®—ç¬¦çš„æ”¯æŒã€‚</p>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> macos </tag>
            
            <tag> golang </tag>
            
            <tag> go </tag>
            
            <tag> golang note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŠGoè¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹ç¬”è®°ï¼ˆ3ï¼‰</title>
      <link href="/blog/2021/03/14/the-go-programming-language-note-3/"/>
      <url>/blog/2021/03/14/the-go-programming-language-note-3/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šgo-è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹"><a class="header-anchor" href="#ã€Šgo-è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹">#</a>ã€ŠGo è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹</h1><a id="more"></a><h1 id="ç¨‹åºç»“æ„"><a class="header-anchor" href="#ç¨‹åºç»“æ„">#</a>ç¨‹åºç»“æ„</h1><h2 id="å‘½å"><a class="header-anchor" href="#å‘½å">#</a>å‘½å</h2><p><code>Go</code>è¯­è¨€ä¸­çš„å‡½æ•°åã€å˜é‡åã€å¸¸é‡åã€ç±»å‹åã€è¯­å¥æ ‡å·å’ŒåŒ…åç­‰æ‰€æœ‰çš„å‘½åï¼Œéƒ½éµå¾ªä¸€ä¸ªç®€å•çš„å‘½åè§„åˆ™ï¼š<strong>ä¸€ä¸ªåå­—å¿…é¡»ä»¥ä¸€ä¸ªå­—æ¯ï¼ˆ<code>Unicode</code>å­—æ¯ï¼‰æˆ–ä¸‹åˆ’çº¿å¼€å¤´ï¼Œåé¢å¯ä»¥è·Ÿä»»æ„æ•°é‡çš„å­—æ¯ã€æ•°å­—æˆ–ä¸‹åˆ’çº¿</strong>ã€‚å¤§å†™å­—æ¯å’Œå°å†™å­—æ¯æ˜¯ä¸åŒçš„ã€‚</p><p>Goè¯­è¨€çš„25ä¸ªå…³é”®å­—ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">break</span></span><br><span class="line"><span class="keyword">case</span></span><br><span class="line"><span class="keyword">chan</span></span><br><span class="line"><span class="keyword">const</span></span><br><span class="line"><span class="keyword">continue</span></span><br><span class="line"><span class="keyword">default</span></span><br><span class="line"><span class="keyword">defer</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="keyword">fallthrough</span></span><br><span class="line"><span class="keyword">for</span></span><br><span class="line"><span class="function"><span class="keyword">func</span></span></span><br><span class="line"><span class="keyword">go</span></span><br><span class="line"><span class="keyword">goto</span></span><br><span class="line"><span class="keyword">if</span></span><br><span class="line"><span class="keyword">import</span></span><br><span class="line"><span class="keyword">interface</span></span><br><span class="line"><span class="keyword">map</span></span><br><span class="line"><span class="keyword">package</span></span><br><span class="line"><span class="keyword">range</span></span><br><span class="line"><span class="keyword">return</span></span><br><span class="line"><span class="keyword">select</span></span><br><span class="line"><span class="keyword">struct</span></span><br><span class="line"><span class="keyword">switch</span></span><br><span class="line"><span class="keyword">type</span></span><br><span class="line"><span class="keyword">var</span></span><br></pre></td></tr></table></figure><p>é¢„å®šä¹‰çš„åå­—<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å†…å»ºå¸¸é‡: </span></span><br><span class="line"><span class="literal">true</span> <span class="literal">false</span> <span class="literal">iota</span> <span class="literal">nil</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å†…å»ºç±»å‹: </span></span><br><span class="line"><span class="keyword">int</span> <span class="keyword">int8</span> <span class="keyword">int16</span> <span class="keyword">int32</span> <span class="keyword">int64</span></span><br><span class="line"><span class="keyword">uint</span> <span class="keyword">uint8</span> <span class="keyword">uint16</span> <span class="keyword">uint32</span> <span class="keyword">uint64</span> <span class="keyword">uintptr</span></span><br><span class="line"><span class="keyword">float32</span> <span class="keyword">float64</span> <span class="keyword">complex128</span> <span class="keyword">complex64</span></span><br><span class="line"><span class="keyword">bool</span> <span class="keyword">byte</span> <span class="keyword">rune</span> <span class="keyword">string</span> error</span><br><span class="line"></span><br><span class="line"><span class="comment">// å†…å»ºå‡½æ•°: </span></span><br><span class="line"><span class="built_in">make</span> <span class="built_in">len</span> <span class="built_in">cap</span> <span class="built_in">new</span> <span class="built_in">append</span> <span class="built_in">copy</span> <span class="built_in">close</span> <span class="built_in">delete</span> </span><br><span class="line"><span class="built_in">complex</span> <span class="built_in">real</span> <span class="built_in">imag</span></span><br><span class="line"><span class="built_in">panic</span> <span class="built_in">recover</span></span><br></pre></td></tr></table></figure><p>å¦‚æœä¸€ä¸ªåå­—æ˜¯åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰ï¼Œé‚£ä¹ˆå®ƒçš„å°±åªåœ¨å‡½æ•°å†…éƒ¨æœ‰æ•ˆã€‚</p><p>å¦‚æœæ˜¯åœ¨å‡½æ•°å¤–éƒ¨å®šä¹‰ï¼Œé‚£ä¹ˆå°†åœ¨å½“å‰åŒ…çš„æ‰€æœ‰æ–‡ä»¶ä¸­éƒ½å¯ä»¥è®¿é—®ã€‚</p><p>åå­—çš„å¼€å¤´å­—æ¯çš„å¤§å°å†™å†³å®šäº†åå­—åœ¨åŒ…å¤–çš„å¯è§æ€§ã€‚å¦‚æœä¸€ä¸ªåå­—æ˜¯å¤§å†™å­—æ¯å¼€å¤´çš„ï¼ˆåŒ…çº§å‡½æ•°åæœ¬èº«ä¹Ÿæ˜¯åŒ…çº§åå­—ï¼Œä¾‹å¦‚ï¼š<code>fmt.Printf</code>ï¼‰ï¼Œé‚£ä¹ˆå®ƒå°†æ˜¯å¯¼å‡ºçš„ï¼Œå¯ä»¥è¢«å¤–éƒ¨çš„åŒ…è®¿é—®ï¼ŒåŒ…æœ¬èº«çš„åå­—ä¸€èˆ¬æ€»æ˜¯ç”¨å°å†™å­—æ¯ã€‚</p><p><strong>å¦‚æœä¸€ä¸ªåå­—çš„ä½œç”¨åŸŸæ¯”è¾ƒå¤§ï¼Œç”Ÿå‘½å‘¨æœŸä¹Ÿæ¯”è¾ƒé•¿ï¼Œé‚£ä¹ˆç”¨é•¿çš„åå­—å°†ä¼šæ›´æœ‰æ„ä¹‰ã€‚</strong></p><p>Goè¯­è¨€ç¨‹åºå‘˜æ¨èä½¿ç”¨<code>é©¼å³°å¼</code>å‘½åï¼Œå½“åå­—æœ‰å‡ ä¸ªå•è¯ç»„æˆçš„æ—¶<strong>ä¼˜å…ˆä½¿ç”¨å¤§å°å†™åˆ†éš”</strong>ï¼Œè€Œä¸æ˜¯ä¼˜å…ˆç”¨ä¸‹åˆ’çº¿åˆ†éš”ã€‚</p><h2 id="å£°æ˜"><a class="header-anchor" href="#å£°æ˜">#</a>å£°æ˜</h2><p>å£°æ˜è¯­å¥å®šä¹‰äº†ç¨‹åºçš„å„ç§å®ä½“å¯¹è±¡ä»¥åŠéƒ¨åˆ†æˆ–å…¨éƒ¨çš„å±æ€§ã€‚</p><p><code>Go</code>è¯­è¨€ä¸»è¦æœ‰å››ç§ç±»å‹çš„å£°æ˜ è¯­å¥ï¼š<code>var</code>ã€<code>const</code>ã€<code>type</code>å’Œ<code>func</code>ï¼Œåˆ†åˆ«å¯¹åº”<code>å˜é‡</code>ã€<code>å¸¸é‡</code>ã€<code>ç±»å‹</code>å’Œ<code>å‡½æ•°å®ä½“å¯¹è±¡</code>çš„å£°æ˜ã€‚</p><p>æ¯ä¸ªæºæ–‡ä»¶ä»¥åŒ…çš„å£°æ˜è¯­å¥å¼€å§‹ï¼Œè¯´æ˜è¯¥æºæ–‡ä»¶æ˜¯å±äºå“ªä¸ªåŒ…ã€‚åŒ…å£°æ˜è¯­å¥ä¹‹åæ˜¯<code>import</code>è¯­å¥å¯¼å…¥ä¾èµ–çš„å…¶å®ƒåŒ…ï¼Œç„¶åæ˜¯åŒ…ä¸€çº§çš„ç±»å‹ã€å˜é‡ã€å¸¸é‡ã€å‡½æ•°çš„å£°æ˜è¯­å¥ï¼ŒåŒ…ä¸€çº§çš„å„ç§ç±»å‹çš„å£°æ˜è¯­å¥çš„é¡ºåºæ— å…³ç´§è¦ï¼ˆå‡½æ•°å†…éƒ¨çš„åå­—åˆ™å¿…é¡»å…ˆå£°æ˜ä¹‹åæ‰èƒ½ä½¿ç”¨ï¼‰ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Boiling prints the boiling point of water.</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> f = boilingF</span><br><span class="line"><span class="keyword">var</span> c = (f - <span class="number">32</span>) * <span class="number">5</span> / <span class="number">9</span></span><br><span class="line">fmt.Printf(<span class="string">"boiling point = %gÂ°F or %gÂ°C\n"</span>, f, c)</span><br><span class="line"><span class="comment">// Output:</span></span><br><span class="line"><span class="comment">// boiling point = 212Â°F or 100Â°C</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> boilingF = <span class="number">212.0</span></span><br></pre></td></tr></table></figure><p>åœ¨åŒ…ä¸€çº§å£°æ˜è¯­å¥å£°æ˜çš„åå­—ï¼ˆ<code>boilingF</code>ï¼‰å¯åœ¨æ•´ä¸ªåŒ…å¯¹åº”çš„æ¯ä¸ªæºæ–‡ä»¶ä¸­è®¿é—®ï¼Œè€Œä¸æ˜¯ä»…ä»…åœ¨å…¶å£°æ˜è¯­å¥æ‰€åœ¨çš„æºæ–‡ä»¶ä¸­è®¿é—®ã€‚</p><p>ä¸€ä¸ªå‡½æ•°çš„å£°æ˜ç”±ä¸€ä¸ªå‡½æ•°åå­—ã€å‚æ•°åˆ—è¡¨ã€ä¸€ä¸ªå¯é€‰çš„è¿”å›å€¼åˆ—è¡¨å’ŒåŒ…å«å‡½æ•°å®šä¹‰çš„å‡½æ•°ä½“ç»„æˆã€‚å¦‚æœå‡½æ•°æ²¡æœ‰è¿”å›å€¼ï¼Œé‚£ä¹ˆè¿”å›å€¼åˆ—è¡¨æ˜¯çœç•¥çš„ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Ftoc prints two Fahrenheit-to-Celsius conversions.</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">const</span> freezingF, boilingF = <span class="number">32.0</span>, <span class="number">212.0</span></span><br><span class="line">fmt.Printf(<span class="string">"%gÂ°F = %gÂ°C\n"</span>, freezingF, fToC(freezingF)) <span class="comment">// "32Â°F = 0Â°C"</span></span><br><span class="line">fmt.Printf(<span class="string">"%gÂ°F = %gÂ°C\n"</span>, boilingF, fToC(boilingF))   <span class="comment">// "212Â°F = 100Â°C"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fToC</span><span class="params">(f <span class="keyword">float64</span>)</span> <span class="title">float64</span></span> &#123;</span><br><span class="line"><span class="keyword">return</span> (f - <span class="number">32</span>) * <span class="number">5</span> / <span class="number">9</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å˜é‡"><a class="header-anchor" href="#å˜é‡">#</a>å˜é‡</h2><p><code>var</code>å£°æ˜è¯­å¥å¯ä»¥åˆ›å»ºä¸€ä¸ªç‰¹å®šç±»å‹çš„å˜é‡ï¼Œç„¶åç»™å˜é‡é™„åŠ ä¸€ä¸ªåå­—ï¼Œå¹¶ä¸”è®¾ç½®å˜é‡çš„åˆå§‹å€¼ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> å˜é‡åå­— ç±»å‹ = è¡¨è¾¾å¼</span><br></pre></td></tr></table></figure><p>å…¶ä¸­<code>ç±»å‹</code>æˆ–<code>= è¡¨è¾¾å¼</code>ä¸¤ä¸ªéƒ¨åˆ†å¯ä»¥çœç•¥å…¶ä¸­çš„ä¸€ä¸ªã€‚å¦‚æœçœç•¥çš„æ˜¯ç±»å‹ä¿¡æ¯ï¼Œé‚£ä¹ˆå°†æ ¹æ®åˆå§‹åŒ–è¡¨è¾¾å¼æ¥æ¨å¯¼å˜é‡çš„ç±»å‹ä¿¡æ¯ã€‚å¦‚æœåˆå§‹åŒ–è¡¨è¾¾å¼è¢«çœç•¥ï¼Œé‚£ä¹ˆå°†ç”¨é›¶å€¼åˆå§‹åŒ–è¯¥å˜é‡ã€‚</p><p>å¯ä»¥åœ¨ä¸€ä¸ªå£°æ˜è¯­å¥ä¸­åŒæ—¶å£°æ˜ä¸€ç»„å˜é‡ã€‚ä¹Ÿå¯ä»¥ç”¨ä¸€ç»„åˆå§‹åŒ–è¡¨è¾¾å¼å£°æ˜å¹¶åˆå§‹åŒ–ä¸€ç»„å˜é‡ï¼Œå¦‚æœçœç•¥æ¯ä¸ªå˜é‡çš„ç±»å‹ï¼Œå°†å¯ä»¥å£°æ˜å¤šä¸ªç±»å‹ä¸åŒçš„å˜é‡ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// int, int, int</span></span><br><span class="line"><span class="keyword">var</span> i, j, k <span class="keyword">int</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// bool, float64, string</span></span><br><span class="line"><span class="keyword">var</span> b, f, s = <span class="literal">true</span>, <span class="number">2.3</span>, <span class="string">"four"</span></span><br></pre></td></tr></table></figure><p>åœ¨åŒ…çº§åˆ«å£°æ˜çš„å˜é‡ä¼šåœ¨<code>main</code>å…¥å£å‡½æ•°æ‰§è¡Œå‰å®Œæˆåˆå§‹åŒ–ã€‚å±€éƒ¨å˜é‡å°†åœ¨å£°æ˜è¯­å¥è¢«æ‰§è¡Œåˆ°çš„æ—¶å€™å®Œæˆåˆå§‹åŒ–ã€‚</p><p>åœ¨å‡½æ•°å†…éƒ¨ï¼Œæœ‰ä¸€ç§ç§°ä¸º<code>ç®€çŸ­å˜é‡å£°æ˜è¯­å¥</code>çš„å½¢å¼å¯ç”¨äºå£°æ˜å’Œåˆå§‹åŒ–å±€éƒ¨å˜é‡ã€‚å®ƒä»¥<code>åå­— := è¡¨è¾¾å¼</code>å½¢å¼å£°æ˜å˜é‡ï¼Œå˜é‡çš„ç±»å‹æ ¹æ®è¡¨è¾¾å¼æ¥è‡ªåŠ¨æ¨å¯¼ã€‚</p><p>ç®€çŸ­å˜é‡å£°æ˜è¯­å¥ä¹Ÿå¯ä»¥ç”¨æ¥å£°æ˜å’Œåˆå§‹åŒ–ä¸€ç»„å˜é‡ã€‚</p><p>ç®€çŸ­å˜é‡å£°æ˜è¯­å¥ä¸­å¿…é¡»è‡³å°‘è¦å£°æ˜ä¸€ä¸ªæ–°çš„å˜é‡ã€‚<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup></p><p>ç®€çŸ­å˜é‡å£°æ˜è¯­å¥åªæœ‰å¯¹å·²ç»åœ¨åŒçº§è¯æ³•åŸŸå£°æ˜è¿‡çš„å˜é‡æ‰å’Œèµ‹å€¼æ“ä½œè¯­å¥ç­‰ä»·ï¼Œå¦‚æœå˜é‡æ˜¯åœ¨å¤–éƒ¨è¯æ³•åŸŸå£°æ˜çš„ï¼Œé‚£ä¹ˆç®€çŸ­å˜é‡å£°æ˜è¯­å¥å°†ä¼šåœ¨å½“å‰è¯æ³•åŸŸé‡æ–°å£°æ˜ä¸€ä¸ªæ–°çš„å˜é‡ã€‚</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>å¯ä»¥åœ¨å®šä¹‰ä¸­é‡æ–°ä½¿ç”¨å®ƒä»¬ã€‚ <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li><li id="fn2" class="footnote-item"><p>å¦‚æœéƒ½æ˜¯æ—§çš„ï¼Œèµ‹å€¼æ“ä½œå°±å¥½ã€‚ <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> macos </tag>
            
            <tag> golang </tag>
            
            <tag> go </tag>
            
            <tag> golang note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç½‘ç»œé™„å±å­˜å‚¨</title>
      <link href="/blog/2021/03/11/nas/"/>
      <url>/blog/2021/03/11/nas/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a class="header-anchor" href="#å‰è¨€">#</a>å‰è¨€</h2><p>ç»§<code>sftp/scp</code>ä¼ è¾“ã€<code>rsync</code>åŒæ­¥åï¼Œ<code>nas</code>ç»ˆäºè¶‹è¿‘äºå®Œç¾åœ°è§£å†³äº†æˆ‘çš„é—®é¢˜ï¼</p><p>åœ¨å„ç§æœåŠ¡å™¨ä¹‹é—´æ¥å›ä¼ è¾“æ–‡ä»¶ä¹Ÿæ˜¯å¾ˆéº»çƒ¦ï¼Œç»ˆææ–¹æ³•å°±æ˜¯ç”¨ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿã€‚</p><p>å½“ç„¶å®ç°è¿™ä¸ªçš„æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œå…·ä½“è¦çœ‹å®¢æˆ·ç«¯ç¯å¢ƒã€‚</p><a id="more"></a><h2 id="nfs"><a class="header-anchor" href="#nfs">#</a>NFS</h2><h3 id="æœåŠ¡ç«¯"><a class="header-anchor" href="#æœåŠ¡ç«¯">#</a>æœåŠ¡ç«¯</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install nfs-kernel-server -y</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/exports</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;mnt&#x2F;data&#x2F;onns *(rw,sync,no_root_squash)</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo exportfs -a</span><br><span class="line">sudo systemctl restart nfs-kernel-server</span><br></pre></td></tr></table></figure><h3 id="å®¢æˆ·ç«¯"><a class="header-anchor" href="#å®¢æˆ·ç«¯">#</a>å®¢æˆ·ç«¯</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install nfs-common -y</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mount -t nfs 192.168.1.119:/mnt/data/onns/Documents ~/Documents</span><br></pre></td></tr></table></figure><h4 id="å¼€æœºé…ç½®"><a class="header-anchor" href="#å¼€æœºé…ç½®">#</a>å¼€æœºé…ç½®</h4><ul><li><a href="https://blog.csdn.net/youmatterhsp/article/details/83933158" target="_blank" rel="noopener">/etc/fstabæ–‡ä»¶çš„è¯¦è§£</a></li><li><a href="https://blog.csdn.net/weixin_34235371/article/details/92323317" target="_blank" rel="noopener">NFSç¯å¢ƒæ­å»ºæµ‹è¯• ä¿è¯æŒ‚è½½é‡å¯åä¸ä¸¢å¤±</a></li></ul><h3 id="å­˜åœ¨é—®é¢˜"><a class="header-anchor" href="#å­˜åœ¨é—®é¢˜">#</a>å­˜åœ¨é—®é¢˜</h3><p><code>windows</code>ä¸‹ç”¨<code>nfsv4</code>å°±æ˜¯ä¼šå‡ºé—®é¢˜ï¼Œé»˜è®¤çš„<code>utf-8</code>ç¼–ç çš„ä¸­æ–‡æ–‡ä»¶å¤¹æˆ–è€…æ–‡ä»¶ä¼šä¹±ç ï¼Œè§£å†³æ–¹æ³•ä¸å¤ªå‹å¥½ï¼Œå®¹æ˜“æŠŠå…¶å®ƒçš„è½¯ä»¶éƒ½æå´©ï¼Œæ¯•ç«Ÿæ‰€æœ‰åš<code>windows</code>è½¯ä»¶çš„äººåº”è¯¥éƒ½æ²¡æœ‰åšå¥½å‡†å¤‡å§ğŸ˜‚ï¼</p><blockquote><p>å…¨ä¸–ç•Œçš„è½¯ä»¶éƒ½æ²¡æœ‰ä¸ºwindowsçš„utf-8ç¼–ç åšå¥½å‡†å¤‡ï¼Œæˆ‘ä¸€ä¸ªç¬”è®°è½¯ä»¶åœ¨åˆ‡æ¢åç¬”è®°å†…å®¹å˜æˆä¹±ç ï¼Œå†åˆ‡æ¢å›æ¥ä¹Ÿæ²¡æœ‰å˜å›æ¥ï¼ŒæŸå¤±æƒ¨é‡ã€‚</p></blockquote><h3 id="ç›¸å…³é“¾æ¥"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥">#</a>ç›¸å…³é“¾æ¥</h3><ul><li><a href="https://zhuanlan.zhihu.com/p/46254792" target="_blank" rel="noopener">ä¸€ä¸ªå°è®¾ç½®ï¼Œè®©Win10 NFSæ­£å¸¸æ˜¾ç¤ºä¸­æ–‡UTF-8</a></li></ul><h2 id="smb"><a class="header-anchor" href="#smb">#</a>SMB</h2><h3 id="æœåŠ¡ç«¯-2"><a class="header-anchor" href="#æœåŠ¡ç«¯-2">#</a>æœåŠ¡ç«¯</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install samba -y</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/samba/smb.conf</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[onns]</span><br><span class="line">path &#x3D; &#x2F;mnt&#x2F;data&#x2F;onns</span><br><span class="line">browseable &#x3D; no</span><br><span class="line">read only &#x3D; no</span><br><span class="line">writable &#x3D; yes</span><br><span class="line">available &#x3D; yes</span><br><span class="line">create mask &#x3D; 0700</span><br><span class="line">directory mask &#x3D; 0700</span><br><span class="line">valid users &#x3D; hs</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo smbpasswd -a hs</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart smbd</span><br></pre></td></tr></table></figure><h3 id="å®¢æˆ·ç«¯-2"><a class="header-anchor" href="#å®¢æˆ·ç«¯-2">#</a>å®¢æˆ·ç«¯</h3><p><code>/192.168.1.119/onns</code></p>]]></content>
      
      
      <categories>
          
          <category> try </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> tips </tag>
            
            <tag> macos </tag>
            
            <tag> windows </tag>
            
            <tag> nas </tag>
            
            <tag> nfs </tag>
            
            <tag> smb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŠGoè¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹ç¬”è®°ï¼ˆ2ï¼‰</title>
      <link href="/blog/2021/03/11/the-go-programming-language-note-2/"/>
      <url>/blog/2021/03/11/the-go-programming-language-note-2/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šgo-è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹"><a class="header-anchor" href="#ã€Šgo-è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹">#</a>ã€ŠGo è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹</h1><a id="more"></a><h1 id="å…¥é—¨"><a class="header-anchor" href="#å…¥é—¨">#</a>å…¥é—¨</h1><h2 id="æŸ¥æ‰¾é‡å¤çš„è¡Œ"><a class="header-anchor" href="#æŸ¥æ‰¾é‡å¤çš„è¡Œ">#</a>æŸ¥æ‰¾é‡å¤çš„è¡Œ</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"bufio"</span></span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"os"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">counts := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">string</span>]<span class="keyword">int</span>)</span><br><span class="line">input := bufio.NewScanner(os.Stdin)</span><br><span class="line"><span class="keyword">for</span> input.Scan() &#123;</span><br><span class="line">counts[input.Text()]++</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> line, n := <span class="keyword">range</span> counts &#123;</span><br><span class="line"><span class="keyword">if</span> n &gt; <span class="number">1</span> &#123;</span><br><span class="line">fmt.Printf(<span class="string">"%d\t%s\n"</span>, n, line)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>if</code>è¯­å¥æ¡ä»¶ä¸¤è¾¹ä¹Ÿä¸åŠ æ‹¬å·ï¼Œä½†æ˜¯ä¸»ä½“éƒ¨åˆ†éœ€è¦åŠ ã€‚</p><p><code>map</code>å­˜å‚¨äº†<code>é”®/å€¼</code>ï¼ˆ<code>key/value</code>ï¼‰çš„é›†åˆï¼Œå¯¹é›†åˆå…ƒç´ ï¼Œæä¾›å¸¸æ•°æ—¶é—´çš„å­˜ã€å–æˆ–æµ‹è¯•æ“ä½œã€‚</p><p><code>é”®</code>å¯ä»¥æ˜¯<strong>ä»»æ„ç±»å‹</strong>ï¼Œåªè¦å…¶å€¼èƒ½ç”¨<code>==</code>è¿ç®—ç¬¦æ¯”è¾ƒã€‚<code>å€¼</code>åˆ™å¯ä»¥æ˜¯ä»»æ„ç±»å‹ã€‚</p><p><code>map</code>ä¸­ä¸å«æŸä¸ªé”®æ—¶ä¼šè‡ªåŠ¨åˆ›å»ºé”®å¹¶èµ‹å€¼<code>é›¶å€¼</code>ã€‚</p><p><code>map</code>çš„<strong>è¿­ä»£é¡ºåºå¹¶ä¸ç¡®å®š</strong>ï¼Œä»å®è·µæ¥çœ‹ï¼Œè¯¥é¡ºåºéšæœºï¼Œæ¯æ¬¡è¿è¡Œéƒ½ä¼šå˜åŒ–ã€‚<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p><p><code>bufio</code>åŒ…çš„<code>Scanner</code>ç±»å‹è¯»å–è¾“å…¥å¹¶å°†å…¶æ‹†æˆè¡Œæˆ–å•è¯ã€‚</p><p>æ¯æ¬¡è°ƒç”¨<code>input.Scan()</code>ï¼Œå³è¯»å…¥ä¸‹ä¸€è¡Œï¼Œå¹¶ç§»é™¤è¡Œæœ«çš„æ¢è¡Œç¬¦ã€‚</p><p><code>Scan</code>å‡½æ•°åœ¨è¯»åˆ°ä¸€è¡Œæ—¶è¿”å›<code>true</code>ï¼Œä¸å†æœ‰è¾“å…¥æ—¶è¿”å›<code>false</code>ã€‚</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="https://stackoverflow.com/questions/11853396/google-go-lang-assignment-order" target="_blank" rel="noopener">Google Go Lang Assignment Order</a> <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> macos </tag>
            
            <tag> golang </tag>
            
            <tag> go </tag>
            
            <tag> golang note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€ŠGoè¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹ç¬”è®°ï¼ˆ1ï¼‰</title>
      <link href="/blog/2021/03/10/the-go-programming-language-note-1/"/>
      <url>/blog/2021/03/10/the-go-programming-language-note-1/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šgo-è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹"><a class="header-anchor" href="#ã€Šgo-è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹">#</a>ã€ŠGo è¯­éŸ³åœ£ç»ï¼ˆä¸­æ–‡ç‰ˆï¼‰ã€‹</h1><p>é¡ºä¾¿ç†Ÿæ‚‰ä¸€ä¸‹<code>vim</code>çš„æŠ€å·§å§ï¼</p><a id="more"></a><h1 id="å…¥é—¨"><a class="header-anchor" href="#å…¥é—¨">#</a>å…¥é—¨</h1><h2 id="hello-world"><a class="header-anchor" href="#hello-world">#</a>Hello World</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// go-bible/ch1/helloworld.go</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">fmt.Println(<span class="string">"Hello, ä¸–ç•Œ"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[10:58:11] onns@Onns ~/Documents/code/go/go-bible/ch1 $ go run helloworld.go</span><br><span class="line">Hello, ä¸–ç•Œ</span><br></pre></td></tr></table></figure><p><code>Go</code>è¯­è¨€åŸç”Ÿæ”¯æŒ<code>Unicode</code>ï¼Œå®ƒå¯ä»¥å¤„ç†å…¨ä¸–ç•Œä»»ä½•è¯­è¨€çš„æ–‡æœ¬ã€‚</p><p><code>go run</code>ä¼šç¼–è¯‘<code>.go</code>æ–‡ä»¶å¹¶ä¸”ç›´æ¥è¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶ç»“æœï¼Œå¦‚æœè¦ä¿å­˜ç¼–è¯‘ç»“æœï¼Œä½¿ç”¨<code>go build</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[10:58:53] onns@Onns ~/Documents/code/go/go-bible/ch1 $ go build helloworld.go</span><br><span class="line">[10:59:17] onns@Onns ~/Documents/code/go/go-bible/ch1 $ ./helloworld</span><br><span class="line">Hello, ä¸–ç•Œ</span><br></pre></td></tr></table></figure><p>æ¯ä¸ªæºæ–‡ä»¶éƒ½ä»¥ä¸€æ¡<code>package</code>å£°æ˜è¯­å¥å¼€å§‹ï¼Œè¿™ä¸ªä¾‹å­é‡Œå°±æ˜¯<code>package main</code>ï¼Œè¡¨ç¤ºè¯¥æ–‡ä»¶å±äºå“ªä¸ªåŒ…ã€‚</p><p><code>main</code>åŒ…æ¯”è¾ƒç‰¹æ®Šã€‚å®ƒå®šä¹‰äº†ä¸€ä¸ªç‹¬ç«‹å¯æ‰§è¡Œçš„ç¨‹åºï¼Œè€Œä¸æ˜¯ä¸€ä¸ªåº“ã€‚</p><p>å¿…é¡»æ°å½“å¯¼å…¥éœ€è¦çš„åŒ…ï¼Œç¼ºå°‘äº†å¿…è¦çš„åŒ…æˆ–è€…å¯¼å…¥äº†ä¸éœ€è¦çš„åŒ…ï¼Œç¨‹åºéƒ½æ— æ³•ç¼–è¯‘é€šè¿‡ã€‚</p><p><code>Go</code>è¯­è¨€ç¼–è¯‘è¿‡ç¨‹æ²¡æœ‰è­¦å‘Šä¿¡æ¯ï¼Œäº‰è®®ç‰¹æ€§ä¹‹ä¸€ã€‚</p><p><code>import</code>å£°æ˜å¿…é¡»è·Ÿåœ¨æ–‡ä»¶çš„<code>package</code>å£°æ˜ä¹‹åã€‚</p><p>ä¸€ä¸ªå‡½æ•°çš„å£°æ˜ç”±<code>func</code>å…³é”®å­—ã€å‡½æ•°åã€å‚æ•°åˆ—è¡¨ã€è¿”å›å€¼åˆ—è¡¨ä»¥åŠåŒ…å«åœ¨å¤§æ‹¬å·é‡Œçš„å‡½æ•°ä½“ç»„æˆã€‚</p><p><code>Go</code>è¯­è¨€ä¸éœ€è¦åœ¨è¯­å¥æˆ–è€…å£°æ˜çš„æœ«å°¾æ·»åŠ åˆ†å·ï¼Œé™¤éä¸€è¡Œä¸Šæœ‰å¤šæ¡è¯­å¥ã€‚</p><p>ç¼–è¯‘å™¨ä¼šä¸»åŠ¨æŠŠç‰¹å®šç¬¦å·åçš„æ¢è¡Œç¬¦è½¬æ¢ä¸ºåˆ†å·ï¼Œå› æ­¤æ¢è¡Œç¬¦æ·»åŠ çš„ä½ç½®ä¼šå½±å“<code>Go</code>ä»£ç çš„æ­£ç¡®è§£æã€‚</p><p>å‡½æ•°çš„å·¦æ‹¬å·<code>{</code>å¿…é¡»å’Œ<code>func</code>å‡½æ•°å£°æ˜åœ¨åŒä¸€è¡Œä¸Šï¼Œä¸”ä½äºæœ«å°¾ï¼Œä¸èƒ½ç‹¬å ä¸€è¡Œï¼Œè€Œåœ¨è¡¨è¾¾å¼<code>x + y</code>ä¸­ï¼Œå¯åœ¨<code>+</code>åæ¢è¡Œï¼Œä¸èƒ½åœ¨<code>+</code>å‰æ¢è¡Œã€‚</p><p>Go è¯­è¨€åœ¨ä»£ç æ ¼å¼ä¸Šé‡‡å–äº†å¾ˆå¼ºç¡¬çš„æ€åº¦ã€‚<code>gofmt</code>å·¥å…·æŠŠä»£ç æ ¼å¼åŒ–ä¸ºæ ‡å‡†æ ¼å¼ï¼ˆè¿™ä¸ªæ ¼å¼åŒ–å·¥å…·æ²¡æœ‰ä»»ä½•å¯ä»¥è°ƒæ•´ä»£ç æ ¼å¼çš„å‚æ•°ï¼‰ã€‚</p><p><code>go</code>å·¥å…·ä¸­çš„<code>fmt</code>å­å‘½ä»¤ä¼šå¯¹æŒ‡å®šåŒ…ï¼ˆå¦åˆ™é»˜è®¤ä¸ºå½“å‰ç›®å½•ï¼‰ä¸­æ‰€æœ‰<code>.go</code>æºæ–‡ä»¶åº”ç”¨<code>gofmt</code>å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[10:57:14] onns@Onns ~/Documents/code/go/go-bible/ch1 $ go fmt</span><br><span class="line">helloworld.go</span><br><span class="line">[10:58:10] onns@Onns ~/Documents/code/go/go-bible/ch1 $ go fmt</span><br></pre></td></tr></table></figure><p>åªæœ‰é‚£äº›ä¸è§„èŒƒçš„æ–‡ä»¶ä¼šè¢«åˆ—å‡ºï¼Œç¬¬äºŒæ¬¡å†è¿è¡Œå°±ä¸ä¼šæ ¼å¼åŒ–å·²ç»ç¬¦åˆè§„åˆ™çš„æ–‡ä»¶ã€‚</p><h2 id="å‘½ä»¤è¡Œå‚æ•°"><a class="header-anchor" href="#å‘½ä»¤è¡Œå‚æ•°">#</a>å‘½ä»¤è¡Œå‚æ•°</h2><p>åŒºé—´ç´¢å¼•æ—¶ï¼Œ<code>Go</code>è¨€é‡Œä¹Ÿé‡‡ç”¨å·¦é—­å³å¼€å½¢å¼ï¼Œå³ï¼ŒåŒºé—´åŒ…æ‹¬ç¬¬ä¸€ä¸ªç´¢å¼•å…ƒç´ ï¼Œä¸åŒ…æ‹¬æœ€åä¸€ä¸ªã€‚</p><p>ç¨‹åºå¯¼å…¥åŒ…æ—¶å¯ä»¥<strong>ç”¨æ‹¬å·æŠŠå®ƒä»¬æ‹¬èµ·æ¥å†™æˆåˆ—è¡¨å½¢å¼</strong>ï¼Œä¹Ÿå¯ä»¥<strong>åˆ†å¼€å†™æˆç‹¬ç«‹çš„<code>import</code>å£°æ˜</strong>ï¼Œä¸¤ç§å½¢å¼éƒ½åˆæ³•ï¼Œåˆ—è¡¨å½¢å¼ä¹ æƒ¯ä¸Šç”¨å¾—å¤šã€‚</p><p>åŒ…å¯¼å…¥é¡ºåºå¹¶ä¸é‡è¦ï¼Œ<code>gofmt</code>å·¥å…·æ ¼å¼åŒ–æ—¶æŒ‰ç…§å­—æ¯é¡ºåºå¯¹åŒ…åæ’åºã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// go-bible/ch1/echo1.go</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"os"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="keyword">var</span> sï¼Œsep <span class="keyword">string</span></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">1</span>; i &lt; <span class="built_in">len</span>(os.Args); i++ &#123;</span><br><span class="line">s += sep + os.Args[i]</span><br><span class="line">sep = <span class="string">" "</span></span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(s)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å˜é‡ä¼šåœ¨å£°æ˜æ—¶ç›´æ¥åˆå§‹åŒ–ã€‚å¦‚æœå˜é‡æ²¡æœ‰æ˜¾å¼åˆå§‹åŒ–ï¼Œåˆ™è¢«éšå¼åœ°èµ‹äºˆå…¶ç±»å‹çš„é›¶å€¼ï¼ˆzero valueï¼‰ï¼Œæ•°å€¼ç±»å‹æ˜¯<code>0</code>ï¼Œå­—ç¬¦ä¸²ç±»å‹æ˜¯ç©ºå­—ç¬¦ä¸²<code>&quot;&quot;</code>ã€‚</p><p><code>:=</code>æ˜¯çŸ­å˜é‡å£°æ˜ï¼ˆshort variable declarationï¼‰çš„ä¸€éƒ¨åˆ†ï¼Œè¿™æ˜¯å®šä¹‰ä¸€ä¸ªæˆ–å¤šä¸ªå˜é‡å¹¶æ ¹æ®å®ƒä»¬çš„åˆå§‹å€¼ä¸ºè¿™äº›å˜é‡èµ‹äºˆé€‚å½“ç±»å‹çš„è¯­å¥ã€‚</p><p><code>i++/i--</code>æ˜¯è¯­å¥ï¼Œè€Œä¸åƒ C ç³»çš„å…¶å®ƒè¯­è¨€é‚£æ ·æ˜¯è¡¨è¾¾å¼ã€‚æ‰€ä»¥<code>j = i++</code>éæ³•ã€‚</p><p><code>++</code>å’Œ<code>--</code>éƒ½åªèƒ½æ”¾åœ¨å˜é‡ååé¢ï¼Œå› æ­¤<code>--i</code>ä¹Ÿéæ³•ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> initialization; condition; post &#123;</span><br><span class="line"><span class="comment">// zero or more statements</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>for</code>å¾ªç¯ä¸‰ä¸ªéƒ¨åˆ†ä¸éœ€æ‹¬å·åŒ…å›´ã€‚</p><p>å¤§æ‹¬å·å¼ºåˆ¶è¦æ±‚ï¼Œå·¦å¤§æ‹¬å·å¿…é¡»å’Œ<code>post</code>è¯­å¥åœ¨åŒä¸€è¡Œã€‚</p><p><code>initialization</code>è¯­å¥æ˜¯å¯é€‰çš„ï¼Œåœ¨å¾ªç¯å¼€å§‹å‰æ‰§è¡Œã€‚</p><p><code>initalization</code>å¦‚æœå­˜åœ¨ï¼Œå¿…é¡»æ˜¯ä¸€æ¡ç®€å•è¯­å¥ï¼ˆsimple statementï¼‰ï¼Œå³<code>çŸ­å˜é‡å£°æ˜</code>ã€<code>è‡ªå¢è¯­å¥</code>ã€<code>èµ‹å€¼è¯­å¥</code>æˆ–<code>å‡½æ•°è°ƒç”¨</code>ã€‚</p><p><code>condition</code>æ˜¯ä¸€ä¸ªå¸ƒå°”è¡¨è¾¾å¼ï¼ˆboolean expressionï¼‰ã€‚</p><p><code>for</code>å¾ªç¯çš„è¿™ä¸‰ä¸ªéƒ¨åˆ†æ¯ä¸ªéƒ½å¯ä»¥çœç•¥ï¼Œå¦‚æœçœç•¥<code>initialization</code>å’Œ<code>post</code>ï¼Œåˆ†å·ä¹Ÿå¯ä»¥çœç•¥ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// a traditional "while" loop</span></span><br><span class="line"><span class="keyword">for</span> condition &#123;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¨çœç•¥ï¼š</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// a traditional infinite loop</span></span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// go-bible/ch1/echo2.go</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"os"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">sï¼Œsep := <span class="string">""</span>ï¼Œ<span class="string">""</span></span><br><span class="line"><span class="keyword">for</span> _ï¼Œarg := <span class="keyword">range</span> os.Args[<span class="number">1</span>:] &#123;</span><br><span class="line">s += sep + arg</span><br><span class="line">sep = <span class="string">" "</span></span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(s)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¯æ¬¡å¾ªç¯è¿­ä»£ï¼Œ<code>range</code>äº§ç”Ÿä¸€å¯¹å€¼ï¼š<code>ç´¢å¼•</code>ä»¥åŠ<code>åœ¨è¯¥ç´¢å¼•å¤„çš„å…ƒç´ å€¼</code>ã€‚</p><p><code>Go</code>è¯­è¨€ä¸å…è®¸ä½¿ç”¨æ— ç”¨çš„å±€éƒ¨å˜é‡ï¼ˆlocal variablesï¼‰ï¼Œå› ä¸ºè¿™ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚è§£å†³æ–¹æ³•æ˜¯ç”¨<code>ç©ºæ ‡è¯†ç¬¦</code>ï¼ˆblank identifierï¼‰ï¼Œå³<code>_</code>ï¼ˆä¹Ÿå°±æ˜¯ä¸‹åˆ’çº¿ï¼‰ã€‚</p><p><code>s := &quot;&quot;</code>æ˜¯ä¸€æ¡<code>çŸ­å˜é‡å£°æ˜</code>ï¼Œæœ€ç®€æ´ï¼Œä½†åªèƒ½ç”¨åœ¨å‡½æ•°å†…éƒ¨ï¼Œè€Œä¸èƒ½ç”¨äºåŒ…å˜é‡ã€‚</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// go-bible/ch1/echo3.go</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"os"</span></span><br><span class="line"><span class="string">"strings"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">fmt.Println(strings.Join(os.Args[<span class="number">1</span>:], <span class="string">" "</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// go-bible/ch1/echo4.go</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line"><span class="string">"fmt"</span></span><br><span class="line"><span class="string">"os"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">fmt.Println(os.Args[<span class="number">1</span>:])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[14:50:04] onns@Onns ~/Documents/code/go/go-bible/ch1 $ ./echo2 123 456</span><br><span class="line">123 456</span><br><span class="line">[14:58:44] onns@Onns ~/Documents/code/go/go-bible/ch1 $ ./echo3 123 4 5 6</span><br><span class="line">123 4 5 6</span><br><span class="line">[14:58:58] onns@Onns ~/Documents/code/go/go-bible/ch1 $ ./echo4 123 4 5 6</span><br><span class="line">[123 4 5 6]</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> macos </tag>
            
            <tag> golang </tag>
            
            <tag> go </tag>
            
            <tag> golang note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>zshé—®é¢˜è®°å½•</title>
      <link href="/blog/2021/03/10/zsh-usage/"/>
      <url>/blog/2021/03/10/zsh-usage/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a class="header-anchor" href="#å‰è¨€">#</a>å‰è¨€</h2><p>ä¹‹å‰è‡ªå·±å†™è¿‡ä¸€äº›å®šæ—¶è„šæœ¬ï¼Œæ¯”å¦‚æ•´ç†ç…§ç‰‡å•Šã€åŠ å¯†å¤‡ä»½å•¥çš„ï¼Œä¹‹å‰ä¸€ç›´æ²¡æœ‰æŠŠ<code>cron</code>çš„è¿è¡Œæ—¥å¿—è®°å½•ä¸‹æ¥ï¼Œæœ€è¿‘è®°å½•ä¹‹åå‘ç°å†™çš„æœ‰å¥½å¤šé—®é¢˜ï¼Œä¹‹åæœ‰å…³<code>zsh</code>çš„é—®é¢˜ä¹Ÿä¼šåœ¨è¿™é‡Œè¿›è¡Œè®°å½•æ€»ç»“ã€‚</p><a id="more"></a><h2 id="no-matches-found"><a class="header-anchor" href="#no-matches-found">#</a>no matches found</h2><p>åœ¨ç”¨é€šé…ç¬¦<code>*</code>çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™å¦‚æœæ²¡æœ‰æ–‡ä»¶ï¼Œå°±ä¼šæŠ¥é”™ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ mv /Users/onns/Desktop/temp/* <span class="variable">$&#123;another_dir&#125;</span></span><br><span class="line">no matches found: /Users/onns/Desktop/temp/*</span><br></pre></td></tr></table></figure><p>åŸå› æ”¹å¤©å†è¡¥å§ï¼</p><h3 id="è§£å†³æ–¹æ³•"><a class="header-anchor" href="#è§£å†³æ–¹æ³•">#</a>è§£å†³æ–¹æ³•</h3><p>è§£å†³æ–¹æ³•æ˜¯åœ¨è¿è¡Œè„šæœ¬ä¹‹å‰å…ˆè¿è¡Œä¸€ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setopt</span> +o nomatch</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯å¿…é¡»è¦å†™åœ¨è„šæœ¬æ–‡ä»¶é‡Œï¼Œæˆ‘å†™åœ¨<code>.zshrc</code>é‡Œç»“æœæ²¡ç”¨ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œå¦‚æœæœ‰äººçŸ¥é“å¯ä»¥å‘ŠçŸ¥ä¸€ä¸‹ã€‚</p><h3 id="ç›¸å…³é“¾æ¥"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥">#</a>ç›¸å…³é“¾æ¥</h3><ul><li><a href="https://unix.stackexchange.com/questions/310540/how-to-get-rid-of-no-match-found-when-running-rm" target="_blank" rel="noopener">How to get rid of â€œNo match foundâ€ when running â€œrm *â€</a></li></ul><h2 id="tar-removing-leading-â€˜-â€™-from-member-names"><a class="header-anchor" href="#tar-removing-leading-â€˜-â€™-from-member-names">#</a>tar: Removing leading â€˜/â€™ from member names</h2><p>è¿™ä¸ªå°±æ¯”è¾ƒå¥½è§£å†³äº†ï¼Œä¸€æœå°±æœ‰ï¼Œæ²¡æƒ³åˆ°<code>tar</code>é»˜è®¤æ˜¯ç”¨ç›¸å¯¹åœ°å€çš„= =</p><p>ä¸è¿‡æˆ‘æ¯”è¾ƒå¥½å¥‡çš„æ˜¯ï¼Œä¸ºä»€ä¹ˆåœ¨å‹ç¼©è¿‡ç¨‹çš„è¾“å‡ºæ˜¯è¾“å‡ºåˆ°<code>stderr</code>é‡Œè€Œä¸æ˜¯<code>stdout</code>é‡Œï¼Œä¹Ÿæ˜¯<code>TODO</code>ï¼Œæ”¹æ—¥å†è¯´ã€‚</p><h3 id="è§£å†³æ–¹æ³•-2"><a class="header-anchor" href="#è§£å†³æ–¹æ³•-2">#</a>è§£å†³æ–¹æ³•</h3><p>æ·»åŠ <code>-P</code>å‚æ•°ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zcvPf  - <span class="string">"<span class="variable">$&#123;imgdir&#125;</span>"</span> | openssl des3 -salt -k <span class="variable">$img_password</span> | dd of=<span class="variable">$&#123;bakdir&#125;</span>img-<span class="variable">$&#123;now_date&#125;</span>-<span class="variable">$&#123;now_time&#125;</span>.bak</span><br></pre></td></tr></table></figure><h3 id="ç›¸å…³é“¾æ¥-2"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥-2">#</a>ç›¸å…³é“¾æ¥</h3><ul><li><a href="https://unix.stackexchange.com/questions/545984/how-to-overcome-tar-removing-leading-from-member-names" target="_blank" rel="noopener">How to overcome tar: Removing leading `/â€™ from member names [duplicate]</a></li><li><a href="https://unix.stackexchange.com/questions/59243/tar-removing-leading-from-member-names/59244" target="_blank" rel="noopener">tar: Removing leading `/â€™ from member names</a></li></ul><h2 id="prompt"><a class="header-anchor" href="#prompt">#</a>Prompt</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PROMPT=<span class="string">'%F&#123;green&#125;[%*] %n@%m%f %F&#123;blue&#125;%~%f $ '</span></span><br></pre></td></tr></table></figure><h3 id="ç›¸å…³é“¾æ¥-3"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥-3">#</a>ç›¸å…³é“¾æ¥</h3><ul><li><a href="https://medium.com/dev-genius/customize-the-macos-terminal-zsh-4cb387e4f447" target="_blank" rel="noopener">Customize the MacOS Terminal</a></li><li><a href="https://scriptingosx.com/2019/07/moving-to-zsh-06-customizing-the-zsh-prompt/" target="_blank" rel="noopener">Moving to zsh, part 6 â€“ Customizing the zsh Prompt</a></li></ul><h2 id="todo"><a class="header-anchor" href="#todo">#</a>TODO</h2><ul><li>[ ] <code>setopt +o nomatch</code>çš„ä½œç”¨</li><li>[ ] <code>tar</code>è¾“å‡ºé—®é¢˜</li></ul>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> shell </tag>
            
            <tag> bash </tag>
            
            <tag> zsh </tag>
            
            <tag> shell note </tag>
            
            <tag> cron </tag>
            
            <tag> crontab </tag>
            
            <tag> tips </tag>
            
            <tag> macos </tag>
            
            <tag> zsh note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®šæ—¶ä»»åŠ¡ç›¸å…³é—®é¢˜</title>
      <link href="/blog/2021/03/01/cron-usage/"/>
      <url>/blog/2021/03/01/cron-usage/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a class="header-anchor" href="#å‰è¨€">#</a>å‰è¨€</h2><p>æ™šä¸Šç¡ä¸ç€ï¼Œé‡æ„äº†ä¸€å †<code>shell</code>ï¼Œæ²¡æƒ³åˆ°å‡ºäº‹äº†ï¼Œè®°å½•ä¸‹ã€‚</p><a id="more"></a><h3 id="cronä¸è¯†åˆ«"><a class="header-anchor" href="#cronä¸è¯†åˆ«">#</a><code>cron</code>ä¸è¯†åˆ«<code>~</code></h3><p><code>~</code>æ˜¯<code>bash</code>é‡Œçš„ï¼Œ<code>cron</code>ä¸è¯†åˆ«ï¼Œè¦ç”¨<code>$HOME</code>ä»£æ›¿ã€‚</p><h4 id="ç›¸å…³é“¾æ¥"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥">#</a>ç›¸å…³é“¾æ¥</h4><ul><li><a href="https://www.gnu.org/software/bash/manual/html_node/Tilde-Expansion.html" target="_blank" rel="noopener">3.5.2 Tilde Expansion</a></li><li><a href="https://stackoverflow.com/questions/50296898/can-i-use-a-tilde-in-a-mysqldump-cronjob-linux-cron-is-not-running/50297010" target="_blank" rel="noopener">Can I use a tilde ( ~ ) in a mysqldump cronjob? Linux Cron is not running</a></li><li><a href="https://stackoverflow.com/questions/45401001/why-is-a-valid-path-with-a-tilde-not-expanding-in-this-cron-job" target="_blank" rel="noopener">Why is a valid path with a tilde not expanding in this cron job? [duplicate]</a></li></ul><h3 id="cronåœ¨ç¯å¢ƒå˜é‡ä¹‹å‰"><a class="header-anchor" href="#cronåœ¨ç¯å¢ƒå˜é‡ä¹‹å‰">#</a><code>cron</code>åœ¨ç¯å¢ƒå˜é‡ä¹‹å‰</h3><p><code>cron</code>ä¼šåœ¨å‘½ä»¤è¡ŒåŠ è½½<code>.bashrc</code>ä¹‹ç±»çš„æ–‡ä»¶ä¹‹å‰ï¼Œæ‰€ä»¥ä½ å†™åœ¨é‡Œé¢çš„å˜é‡å®ƒè¯»ä¸åˆ°ï¼Œè§£å†³åŠæ³•æ˜¯ç›´æ¥ç”¨<code>crontab -e</code>æŠŠç¯å¢ƒå˜é‡å†™è¿›å»ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ONNS_CONFIG_DIR=/Users/onns/Documents/code/config/bash/</span><br><span class="line">ONNS_PLATFORM=macbook</span><br><span class="line">30 * * * * zsh /Users/onns/Documents/code/bash/oclear &gt;&gt;/Users/onns/cron.log 2&gt;&gt;/Users/onns/cron.log</span><br></pre></td></tr></table></figure><p>ä¹Ÿæ˜¯ä¼šè¯†åˆ«çš„ï¼Œäº²æµ‹æœ‰æ•ˆï¼Œå…¶å®ƒçš„æ–¹æ¡ˆå¯èƒ½éƒ½å¤±æ•ˆäº†ï¼Œå»ºè®®åˆ«ç”¨ã€‚</p><p>ä¸‹é¢ç¬¬ä¸€ä¸ªé“¾æ¥çš„é‚£ç§æ–¹æ³•<code>. $HOME/.profile</code>ï¼Œ<code>Ubuntu 18.04</code>äº²æµ‹æ— æ•ˆï¼Œè€Œä¸”å¦‚æœä½ åœ¨<code>.profile</code>é‡Œå†™ç‚¹<code>shell</code>å‘½ä»¤ï¼Œä¹Ÿä¼šå¤±æ•ˆï¼Œæˆ‘çš„<code>google-cloud-sdk</code>å°±æ˜¯ã€‚</p><h4 id="ç›¸å…³é“¾æ¥-2"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥-2">#</a>ç›¸å…³é“¾æ¥</h4><ul><li><a href="https://unix.stackexchange.com/questions/27289/how-can-i-run-a-cron-command-with-existing-environmental-variables" target="_blank" rel="noopener">How can I run a cron command with existing environmental variables?</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> shell </tag>
            
            <tag> bash </tag>
            
            <tag> zsh </tag>
            
            <tag> shell note </tag>
            
            <tag> cron </tag>
            
            <tag> crontab </tag>
            
            <tag> tips </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>A Closer Look at Spatiotemporal Convolutions for Action Recognition</title>
      <link href="/blog/2021/02/10/a-closer-look-at-spatiotemporal-convolutions-for-action-recognition/"/>
      <url>/blog/2021/02/10/a-closer-look-at-spatiotemporal-convolutions-for-action-recognition/</url>
      
        <content type="html"><![CDATA[<h1 id="a-closer-look-at-spatiotemporal-convolutions-for-action-recognition"><a class="header-anchor" href="#a-closer-look-at-spatiotemporal-convolutions-for-action-recognition">#</a>A Closer Look at Spatiotemporal Convolutions for Action Recognition</h1><h2 id="æ‘˜è¦"><a class="header-anchor" href="#æ‘˜è¦">#</a>æ‘˜è¦</h2><ul><li>è¯æ˜äº†3Då·ç§¯æ¯”2Då·ç§¯æ›´æœ‰æ•ˆæœã€‚</li><li>å°†3Då·ç§¯åˆ†è§£æˆç©ºé—´å·ç§¯å’Œæ—¶é—´å·ç§¯èƒ½å¤Ÿè·å¾—å‡†ç¡®ç‡ä¸Šçš„æå‡ã€‚</li></ul><h2 id=""><a class="header-anchor" href="#">#</a></h2>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¡Œä¸ºè¯†åˆ« </tag>
            
            <tag> action recognition </tag>
            
            <tag> CVPR </tag>
            
            <tag> CVPR 2018 </tag>
            
            <tag> 2018 </tag>
            
            <tag> R(2+1)D </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Learning Spatiotemporal Features with 3D Convolutional Networks</title>
      <link href="/blog/2021/02/09/learning-spatiotemporal-features-with-3d-convolutional-networks/"/>
      <url>/blog/2021/02/09/learning-spatiotemporal-features-with-3d-convolutional-networks/</url>
      
        <content type="html"><![CDATA[<h1 id="learning-spatiotemporal-features-with-3d-convolutional-networks"><a class="header-anchor" href="#learning-spatiotemporal-features-with-3d-convolutional-networks">#</a>Learning Spatiotemporal Features with 3D Convolutional Networks</h1>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¡Œä¸ºè¯†åˆ« </tag>
            
            <tag> action recognition </tag>
            
            <tag> 2018 </tag>
            
            <tag> å…‰æµ </tag>
            
            <tag> optical flow </tag>
            
            <tag> GCPR </tag>
            
            <tag> GCPR 2018 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gitç›¸å…³æ–‡æ¡£</title>
      <link href="/blog/2021/02/08/git-usage/"/>
      <url>/blog/2021/02/08/git-usage/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a class="header-anchor" href="#å‰è¨€">#</a>å‰è¨€</h2><p>ä¸€äº›<code>git</code>çš„æ“ä½œè®°å½•ï¼Œæ–¹ä¾¿è‡ªå·±å¿˜è®°ä¹‹åæŸ¥æ‰¾ï½</p><a id="more"></a><p><code>git</code>æ·»åŠ å¤šä¸ªè¿œç¨‹ä»“åº“</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote <span class="built_in">set</span>-url --add origin git@xm.onns.xyz:/home/git/paper.git</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒé“¾æ¥"><a class="header-anchor" href="#å‚è€ƒé“¾æ¥">#</a>å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://www.cnblogs.com/morethink/p/8700003.html" target="_blank" rel="noopener">Git åŒæ—¶ push åˆ°å¤šä¸ªè¿œç¨‹ä»“åº“</a></li></ul><h2 id="push-å’Œ-pull-é“¾æ¥ä¸åŒ"><a class="header-anchor" href="#push-å’Œ-pull-é“¾æ¥ä¸åŒ">#</a>push å’Œ pull é“¾æ¥ä¸åŒ</h2><p>ä½ æƒ³ä»åˆ«äººçš„åˆ†æ”¯å…‹éš†ä»£ç ï¼Œä½†æ˜¯ä½ æ²¡æœ‰ä¿®æ”¹æƒé™ï¼Œä½ æœ‰å¦ä¸€ä¸ªåˆ†æ”¯çš„ä¿®æ”¹æƒé™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://engagementhub.caixamagica.pt/virtual-factory-operating-system/vf-os-platform-environment-vf-p.git</span><br></pre></td></tr></table></figure><p>ç„¶åä½ çš„<code>.git/config</code>é•¿è¿™æ ·ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ cat .git/config</span><br><span class="line">[core]</span><br><span class="line">repositoryformatversion = 0</span><br><span class="line">filemode = <span class="literal">true</span></span><br><span class="line">bare = <span class="literal">false</span></span><br><span class="line">logallrefupdates = <span class="literal">true</span></span><br><span class="line">[remote <span class="string">"origin"</span>]</span><br><span class="line">url = https://engagementhub.caixamagica.pt/virtual-factory-operating-system/vf-os-platform-environment-vf-p.git</span><br><span class="line">fetch = +refs/heads/*:refs/remotes/origin/*</span><br><span class="line">[branch <span class="string">"master"</span>]</span><br><span class="line">remote = origin</span><br><span class="line">merge = refs/heads/master</span><br></pre></td></tr></table></figure><p>ç„¶åå¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤å¢åŠ <code>push</code>çš„ä»“åº“ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote <span class="built_in">set</span>-url --push origin git@git119:/home/git/vfos.git</span><br></pre></td></tr></table></figure><p>å†æ¬¡æŸ¥çœ‹<code>.git/config</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ cat .git/config</span><br><span class="line">[core]</span><br><span class="line">repositoryformatversion = 0</span><br><span class="line">filemode = <span class="literal">true</span></span><br><span class="line">bare = <span class="literal">false</span></span><br><span class="line">logallrefupdates = <span class="literal">true</span></span><br><span class="line">[remote <span class="string">"origin"</span>]</span><br><span class="line">url = https://engagementhub.caixamagica.pt/virtual-factory-operating-system/vf-os-platform-environment-vf-p.git</span><br><span class="line">fetch = +refs/heads/*:refs/remotes/origin/*</span><br><span class="line">pushurl = git@git119:/home/git/vfos.git</span><br><span class="line">[branch <span class="string">"master"</span>]</span><br><span class="line">remote = origin</span><br><span class="line">merge = refs/heads/master</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥å…¶å®ä½ æ‰‹åŠ¨æ·»åŠ ä¸€é¡¹<code>pushurl</code>ä¹Ÿæ˜¯å¯ä»¥çš„ï¼</p><h3 id="å‚è€ƒé“¾æ¥-2"><a class="header-anchor" href="#å‚è€ƒé“¾æ¥-2">#</a>å‚è€ƒé“¾æ¥</h3><ul><li><a href="https://stackoverflow.com/questions/2916845/different-default-remote-tracking-branch-for-git-pull-and-git-push" target="_blank" rel="noopener">Different default remote (tracking branch) for git pull and git push</a></li></ul><h2 id="åˆ é™¤-ds-store"><a class="header-anchor" href="#åˆ é™¤-ds-store">#</a>åˆ é™¤ .DS_Store</h2><p>ç”¨<code>.gitignore</code>æ’é™¤å³å¯ï¼Œå®˜æ–¹æ–‡æ¡£è¯´<code>**/</code>ä»£è¡¨æ‰€æœ‰çš„ç›®å½•ä¸‹ï¼Œæ‰€ä»¥åªéœ€è¦åŠ ä¸‹é¢ä¸¤è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">**/.DS_Store</span><br><span class="line">**/._.DS_Store</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒè¡Œä¹Ÿå¯ä»¥ä¸ç”¨åŠ ï¼Œå¬è¯´é‚£ä¸ªæ˜¯åˆ«åï¼Œä½†æ˜¯æˆ‘ç›®å‰æ²¡é‡åˆ°è¿‡ã€‚</p><h3 id="å‚è€ƒé“¾æ¥-3"><a class="header-anchor" href="#å‚è€ƒé“¾æ¥-3">#</a>å‚è€ƒé“¾æ¥</h3><ul><li><a href="https://git-scm.com/docs/gitignore" target="_blank" rel="noopener">Git - gitignore Documentation</a></li><li><a href="https://gist.github.com/lohenyumnam/2b127b9c3d1435dc12a33613c44e6308" target="_blank" rel="noopener">Add DS_Store into .gitignore for the sub directory.md</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> doc </tag>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gitç§æœ‰ä»“åº“</title>
      <link href="/blog/2021/02/07/private-git-repository/"/>
      <url>/blog/2021/02/07/private-git-repository/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a class="header-anchor" href="#å‰è¨€">#</a>å‰è¨€</h2><p>å¥½ä¹…æ²¡å†™ç¬”è®°äº†ï¼Œæœ€è¿‘ä¸€ç›´åœ¨å¿™æ¯•ä¸šè®ºæ–‡ï¼Œä»Šå¤©è¶ç€è£…<code>Tex Live 2020</code>çš„åŠŸå¤«å¿™é‡Œå·é—²ï¼ŒæŠ˜è…¾ç‚¹ä¸œè¥¿ã€‚</p><p>å› ä¸ºè‡ªå·±æ—¥å¸¸ç”¨çš„ä¸œè¥¿é‡Œæœ‰ä¸€å †è‡ªå·±å†™çš„ä»£ç ä»€ä¹ˆçš„ï¼Œæ„Ÿè§‰éœ€è¦ç”¨<code>git</code>è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ï¼Œä½†æ˜¯æ„Ÿè§‰ä¼ åˆ°<code>github</code>ä¸Šåˆä¸å¤ªå¥½ï¼Œè™½ç„¶è™½ç„¶å¯ä»¥è®¾ç½®æˆç§å¯†çš„ï¼Œä½†æ˜¯æ€»æ„Ÿè§‰ä¸å®‰å…¨ï¼Œè‡ªå·±å¼„ä¸ªç§æœ‰ä»“åº“å§ã€‚</p><a id="more"></a><h2 id="æœåŠ¡ç«¯"><a class="header-anchor" href="#æœåŠ¡ç«¯">#</a>æœåŠ¡ç«¯</h2><p>è¿˜æ˜¯åœ¨æˆ‘å°ç±³çš„<code>Centos</code>ç³»ç»Ÿä¸Šæ¶çš„æœåŠ¡å™¨ï¼Œè£…ä¸ª<code>git</code>å°±å¥½ï¼Œè¿™æ­¥çœç•¥äº†ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum install git -y</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">apt-get install git -y</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»º-git-ç”¨æˆ·"><a class="header-anchor" href="#åˆ›å»º-git-ç”¨æˆ·">#</a>åˆ›å»º git ç”¨æˆ·</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo adduser git</span><br></pre></td></tr></table></figure><h3 id="åˆ‡æ¢åˆ°-git-ç”¨æˆ·"><a class="header-anchor" href="#åˆ‡æ¢åˆ°-git-ç”¨æˆ·">#</a>åˆ‡æ¢åˆ° git ç”¨æˆ·</h3><p>git å…¶å®ä¸ç”¨å¯†ç å•¥çš„ï¼Œä¸éœ€è¦ä»€ä¹ˆæ“ä½œï¼Œåªéœ€è¦ç”Ÿæˆä¸€ä¸‹å¯†é’¥å°±è¡Œã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su git</span><br></pre></td></tr></table></figure><h3 id="ç”Ÿæˆ-ssh-å¯†é’¥"><a class="header-anchor" href="#ç”Ÿæˆ-ssh-å¯†é’¥">#</a>ç”Ÿæˆ ssh å¯†é’¥</h3><p>ä¸ä¼šçš„çœ‹è¿™é‡Œï¼š<a href="https://onns.xyz/blog/2020/09/07/ssh-key-in-linux/">Linux ä¸‹å¯†é’¥ç™»å½•</a></p><p>ç„¶åæŠŠ<code>ç§é’¥</code>å‘ç»™è‡ªå·±å³å¯ã€‚</p><h3 id="ç¦æ­¢-ssh-ç™»å½•"><a class="header-anchor" href="#ç¦æ­¢-ssh-ç™»å½•">#</a>ç¦æ­¢ SSH ç™»å½•</h3><p>ä¸ºäº†ä¿è¯å®‰å…¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å…ˆé€€å‡ºgitç”¨æˆ·</span></span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line">sudo vi /etc/passwd</span><br></pre></td></tr></table></figure><p>æŠŠ<code>git:x:1001:1001:,,,:/home/git:/bin/bash</code>ä¹‹ç±»çš„æ”¹æˆ<code>git:x:1001:1001:,,,:/home/git:/usr/bin/git-shell</code>ã€‚<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p><h3 id="åˆ›å»ºä»“åº“"><a class="header-anchor" href="#åˆ›å»ºä»“åº“">#</a>åˆ›å»ºä»“åº“</h3><p>æ¥åˆ°è‡ªå·±çš„æ ¹ç›®å½•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span></span><br></pre></td></tr></table></figure><p>ç„¶ååˆ›å»ºä»“åº“ï¼Œåå­—è‡ªå·±éšä¾¿èµ·å’¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git init --bare code.git</span><br></pre></td></tr></table></figure><p>è‡³æ­¤æœåŠ¡å™¨ç«¯å°±éƒ½ ok äº†ã€‚</p><h3 id="å¤šè¯´ä¸€å¥"><a class="header-anchor" href="#å¤šè¯´ä¸€å¥">#</a>å¤šè¯´ä¸€å¥</h3><p>ä»–ä»¬è¯´<code>git</code>è¿™ä¸ªç”¨æˆ·åº”è¯¥ç¦ç”¨<code>shell</code>ä»€ä¹ˆçš„ï¼Œå¦‚æœçœŸçš„æ‹…å¿ƒçš„äººå¯ä»¥å‚è€ƒä¸‹é¢çš„å‚è€ƒé“¾æ¥ï¼Œæˆ‘è‡ªå·±æ˜¯è§‰å¾—æ²¡å¿…è¦ã€‚</p><h2 id="å®¢æˆ·ç«¯"><a class="header-anchor" href="#å®¢æˆ·ç«¯">#</a>å®¢æˆ·ç«¯</h2><h3 id="åˆ›å»º-git-ç¯å¢ƒ"><a class="header-anchor" href="#åˆ›å»º-git-ç¯å¢ƒ">#</a>åˆ›å»º git ç¯å¢ƒ</h3><p>é¦–å…ˆåœ¨éœ€è¦æ•´ç†çš„æ–‡ä»¶å¤¹é‡Œåˆ›å»ºä¸€ä¸ªæ–°çš„ä»“åº“ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git init</span><br><span class="line">Initialized empty Git repository <span class="keyword">in</span> /Users/onns/Documents/code/.git/</span><br></pre></td></tr></table></figure><h3 id="è®¾ç½®è¿œç«¯åœ°å€"><a class="header-anchor" href="#è®¾ç½®è¿œç«¯åœ°å€">#</a>è®¾ç½®è¿œç«¯åœ°å€</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin git@xm.onns.xyz:/home/git/code.git</span><br></pre></td></tr></table></figure><h3 id="æ¨é€ä»£ç "><a class="header-anchor" href="#æ¨é€ä»£ç ">#</a>æ¨é€ä»£ç </h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">"init"</span></span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure><h3 id="å­˜åœ¨é—®é¢˜"><a class="header-anchor" href="#å­˜åœ¨é—®é¢˜">#</a>å­˜åœ¨é—®é¢˜</h3><p>ä¸æ˜¯å› ä¸ºäººæƒä¹‹ç±»çš„é—®é¢˜å˜›ï¼Œgit çš„é»˜è®¤åˆ†æ”¯è¦ä»<code>master</code>å˜æˆ<code>main</code>äº†ï¼Œä½†æ˜¯æˆ‘ä¸çŸ¥é“ä¸ºä»€ä¹ˆå‡ºé”™äº†ï¼Œåˆ°æ—¶å€™å†çœ‹çœ‹å§ï¼Œç›®å‰å…ˆè¿™æ ·ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git push -u origin main</span><br><span class="line">error: src refspec main does not match any</span><br><span class="line">error: failed to push some refs to <span class="string">'git@xm.onns.xyz:/home/git/code.git'</span></span><br></pre></td></tr></table></figure><h2 id="ssh-é…ç½®"><a class="header-anchor" href="#ssh-é…ç½®">#</a>ssh é…ç½®</h2><p>æˆ‘ä¹‹å‰ç”¨<code>ssh</code>å¯†é’¥ç™»å½•çš„æ—¶å€™ï¼Œéƒ½æ˜¯è¦ç”¨<code>-i</code>å‚æ•°çš„ï¼Œè¿™æ¬¡æ‰¾äº†å¾ˆä¹…éƒ½æ²¡æ‰¾åˆ°<code>git</code>å¦‚ä½•æŒ‡å®šå¯†é’¥æ–‡ä»¶ï¼Œç„¶åå‘ç°å¤§å®¶çš„æ–¹æ³•éƒ½æ˜¯é…ç½®<code>.ssh/config</code>ï¼Œå“‡æˆ‘å¤´ä¸€æ¬¡çŸ¥é“åŸæ¥æœ‰è¿™ä¹ˆä¸ªç©æ„å„¿ï¼ŒğŸ‚ğŸº å•Šï¼</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi ~/.ssh/config</span><br></pre></td></tr></table></figure><p>ç„¶åæŠŠä¸‹é¢è¿™æ®µåŠ è¿›å»ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Host xm.onns.xyz</span><br><span class="line">Hostname xm.onns.xyz</span><br><span class="line">User git</span><br><span class="line">Port 22</span><br><span class="line">PreferredAuthentications publickey</span><br><span class="line">IdentityFile ~/Documents/common/key/git</span><br></pre></td></tr></table></figure><p>ç„¶åå°± ok äº†ã€‚</p><h2 id="å‚è€ƒé“¾æ¥"><a class="header-anchor" href="#å‚è€ƒé“¾æ¥">#</a>å‚è€ƒé“¾æ¥</h2><p>å¤§å®¶çš„å¥½åƒéƒ½æ˜¯äº’ç›¸æŠ„ï¼Œå¤§åŒå°å¼‚ï¼Œåªåˆ—ä¸¾ä¸€éƒ¨åˆ†äº†ï¼š</p><ul><li><a href="https://www.cnblogs.com/zhoug2020/p/5789041.html" target="_blank" rel="noopener">git æœåŠ¡å™¨æ­å»ºï¼Œåœ¨è‡ªå·±æœåŠ¡å™¨ä¸Šæ­å»ºç§æœ‰ä»“åº“</a></li><li><a href="https://www.liaoxuefeng.com/article/895923490127776" target="_blank" rel="noopener">åˆ›å»º git ç§æœ‰ä»“åº“</a></li><li><a href="https://www.cnblogs.com/jiangxiaobo/p/13846438.html" target="_blank" rel="noopener">ç°æœ‰æ–‡ä»¶å¤¹æ·»åŠ åˆ° git ä»“åº“çš„æ­¥éª¤</a></li><li><a href="https://www.cnblogs.com/cidgur/p/12432280.html" target="_blank" rel="noopener">git åœ¨ pull/push æŒ‡å®šå¯†é’¥æ–‡ä»¶</a></li><li><a href="https://thucnc.medium.com/how-to-specify-different-ssh-keys-for-git-push-for-a-given-domain-bef56639dc02" target="_blank" rel="noopener">How to specify different SSH keys for git push for a given domain</a></li><li><a href="https://www.cnblogs.com/hangj/p/11506686.html" target="_blank" rel="noopener">.ssh/config å¸¸ç”¨é…ç½®</a></li><li><a href="https://www.cyberciti.biz/faq/create-ssh-config-file-on-linux-unix/" target="_blank" rel="noopener">OpenSSH Config File Examples</a></li><li><a href="https://linuxize.com/post/using-the-ssh-config-file/" target="_blank" rel="noopener">Using the SSH Config File</a></li></ul><p>02:23 æ™šå®‰ï½</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>è¿™ä¸ª<code>/usr/bin/git-shell</code>å…¶å®ç›®å½•ä¸‹æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œä½†æ˜¯ç¡®å®å¯ä»¥å·¥ä½œï¼Œæœ‰ç©ºå†æŸ¥æŸ¥ã€‚ <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> try </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> github </tag>
            
            <tag> git </tag>
            
            <tag> ssh </tag>
            
            <tag> private repository </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Res2Net A New Multi-scale Backbone Architecture</title>
      <link href="/blog/2021/01/22/res2net-a-new-multi-scale-backbone-architecture/"/>
      <url>/blog/2021/01/22/res2net-a-new-multi-scale-backbone-architecture/</url>
      
        <content type="html"><![CDATA[<h1 id="res2net-a-new-multi-scale-backbone-architecture"><a class="header-anchor" href="#res2net-a-new-multi-scale-backbone-architecture">#</a>Res2Net: A New Multi-scale Backbone Architecture</h1><p>åœ¨ç°å®åœºæ™¯ä¸­çš„å¤šå°ºåº¦è§†è§‰æ¨¡å¼æ˜¯å¾ˆå¸¸è§çš„ï¼š</p><ol><li>åœ¨åŒä¸€ä¸ªåœºæ™¯ä¸­ï¼Œä¸åŒçš„ç‰©ä½“å¯èƒ½åŒ…å«ä¸åŒå°ºå¯¸å¤§å°ã€‚</li><li>å¯¹è±¡çš„åŸºæœ¬ä¸Šä¸‹æ–‡ä¿¡æ¯å¯èƒ½å æ®æ¯”å¯¹è±¡æœ¬èº«æ›´å¤§çš„åŒºåŸŸã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¡Œä¸ºè¯†åˆ« </tag>
            
            <tag> action recognition </tag>
            
            <tag> 2019 </tag>
            
            <tag> res2net </tag>
            
            <tag> IEEE </tag>
            
            <tag> IEEE 2019 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2020-2021å¹´æ˜¥å­£æœŸæœ«æ€»ç»“</title>
      <link href="/blog/2021/01/22/2021-spring-lab-summary/"/>
      <url>/blog/2021/01/22/2021-spring-lab-summary/</url>
      
        <content type="html"><![CDATA[<center ondblclick="javascript:document.getElementsByTagName('header')[0].remove();document.getElementsByTagName('header')[0].remove();document.getElementsByTagName('footer')[0].remove();document.getElementsByTagName('footer')[0].remove();document.getElementById('comments').remove();document.getElementById('back-to-top').remove();document.getElementById('post-toc').remove();"><table><thead><tr><th style="text-align:center">2021-01-22</th><th style="text-align:center">æœŸæœ«æ€»ç»“</th><th style="text-align:center">åˆ˜æ½˜</th></tr></thead><tbody></tbody></table></center><a id="more"></a><p style="page-break-before: always"></p><h2 id="æ‰¾å·¥ä½œ"><a class="header-anchor" href="#æ‰¾å·¥ä½œ">#</a>æ‰¾å·¥ä½œ</h2><p>å› ä¸ºæˆ‘æ‰€æ‰¾çš„æ˜¯åå°å¼€å‘å²—ä½ï¼Œæ‹›çš„æœ€å¤šçš„è¯­è¨€æ˜¯<code>java</code>å’Œ<code>c++</code>ï¼Œæ‰€ä»¥åˆé‡æ–°æ¡èµ·æ¥äº†ä¸€äº›ç›¸å…³çš„åŸºç¡€çŸ¥è¯†ï¼Œå¹¶ä¸”æ¯å¤©éƒ½ä¼šåˆ·<code>leetcode</code>ï¼Œå¶å°”å’ŒåŒå­¦åˆ†äº«ä¸€äº›é¢è¯•ä¸­é‡åˆ°çš„é¢˜ç›®ï¼Œæˆ–è€…æ˜¯åœ¨åšé¢˜è¿‡ç¨‹ä¸­é‡åˆ°çš„ååˆ†å…·æœ‰ä»£è¡¨æ€§çš„é—®é¢˜ã€‚</p><center><!-- //onns.xyz/blog/image --><!-- ../image --><p><img src="//onns.xyz/blog/image/20210122-1.png" alt="java"></p></center><p style="page-break-before: always"></p><h2 id="æ ¡æ‹›é¢è¯•"><a class="header-anchor" href="#æ ¡æ‹›é¢è¯•">#</a>æ ¡æ‹›é¢è¯•</h2><p>å› ä¸ºéƒ½æ˜¯åœ¨çº¿ç¬”è¯•é¢è¯•ï¼Œå› æ­¤æ— å½¢ä¸­å¤§å®¶éƒ½å¤šäº†å¾ˆå¤šæœºä¼šï¼ˆä¸ç”¨é£å»å…¨å›½å„åœ°ï¼‰ï¼Œæ‰€ä»¥å°±ä¼šæœ‰éå¸¸å¤šçš„é¢è¯•ç»å†å’Œæ¬¡æ•°ï¼Œå¯¹ç»å¸¸é—®åˆ°çš„é—®é¢˜å’Œç¬”è¯•ä¸­çš„ä¸€äº›é—®é¢˜ï¼Œè¿›è¡Œäº†æ•´ç†å’Œæ€»ç»“ã€‚</p><center><!-- //onns.xyz/blog/image --><!-- ../image --><p><img src="//onns.xyz/blog/image/20210122-2.png" alt="é¢è¯•æ•´ç†"></p></center><p>è™½ç„¶æœ€åéƒ½æ²¡æœ‰ç”¨ä¸Šï¼Œä½†æ˜¯ä¹Ÿéƒ½æ˜¯ç›¸é€šçš„æŠŠã€‚</p><p style="page-break-before: always"></p><h2 id="è¡Œä¸ºè¯†åˆ«"><a class="header-anchor" href="#è¡Œä¸ºè¯†åˆ«">#</a>è¡Œä¸ºè¯†åˆ«</h2><p>ç ”ç©¶çš„æ–¹å‘åå‘äºè½»é‡åŒ–çš„é«˜æ•ˆè¡Œä¸ºè¯†åˆ«ï¼Œé¦–å…ˆå¯¹å¤§é‡çš„ç›¸å…³æ–‡çŒ®è¿›è¡Œäº†ç²¾è¯»ã€æ•´ç†å’Œæ€»ç»“ã€‚</p><center><!-- //onns.xyz/blog/image --><!-- ../image --><p><img src="//onns.xyz/blog/image/20210122-3.png" alt="æ–‡çŒ®é˜…è¯»"><br><img src="//onns.xyz/blog/image/20210122-4.png" alt="æ–‡çŒ®é˜…è¯»"><br><img src="//onns.xyz/blog/image/20210122-5.png" alt="æ–‡çŒ®é˜…è¯»"></p></center><p>é€‰æ‹©äº†ä¸€ç§ç”¨è¾¹ç¼˜è¡¨å¾æ¥å¯¹å…‰æµè¿›è¡Œæ›¿ä»£çš„è¡Œä¸ºè¯†åˆ«æ–¹æ³•ä½œä¸ºåŸºç¡€ï¼Œå¹¶åœ¨ä¹‹ä¸Šè¿›è¡Œæ”¹è¿›åˆ›æ–°ã€‚</p><p style="page-break-before: always"></p><h2 id="åšå®éªŒ"><a class="header-anchor" href="#åšå®éªŒ">#</a>åšå®éªŒ</h2><p>ç”±äºè¡Œä¸ºè¯†åˆ«å·¥ä½œçš„å¤æ‚æ€§ï¼Œå“ªæ€•æ˜¯æœ€è½»é‡åŒ–çš„æ–¹æ³•ï¼Œä¹Ÿéœ€è¦3-5å¤©çš„æ—¶é—´æ¥éªŒè¯å®éªŒç»“æœï¼Œæ‰€ä»¥ä¸€ç›´åœ¨æµ‹è¯•å®éªŒï¼Œå¹¶åœ¨å®éªŒè¿è¡Œçš„è¿‡ç¨‹ä¸­æ€è€ƒé—®é¢˜åŸå› ã€æ•´ç†å®éªŒç»“æœç­‰</p><center><!-- //onns.xyz/blog/image --><!-- ../image --><p><img src="//onns.xyz/blog/image/20210122-6.png" alt="å®éªŒç»“æœ"></p></center><p style="page-break-before: always"></p><h2 id="å†™è®ºæ–‡"><a class="header-anchor" href="#å†™è®ºæ–‡">#</a>å†™è®ºæ–‡</h2><p>æ¯å¤©æŒ‰ç…§è‡ªå·±çš„è®¡åˆ’ï¼Œæ’°å†™æ¯•ä¸šè®ºæ–‡ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> final report </tag>
            
            <tag> report </tag>
            
            <tag> lab406 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šå¿«ä¹çš„Linuxå‘½ä»¤è¡Œã€‹ç¬”è®°ï¼ˆ15ï¼‰</title>
      <link href="/blog/2021/01/10/the-linux-command-line-note-15/"/>
      <url>/blog/2021/01/10/the-linux-command-line-note-15/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹"><a class="header-anchor" href="#ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹">#</a>ã€Šå¿«ä¹çš„ Linux å‘½ä»¤è¡Œã€‹</h1><a id="more"></a><h2 id="printenv"><a class="header-anchor" href="#printenv">#</a>printenv</h2><p><code>printenv</code>ç¨‹åºç”¨æ¥æŸ¥çœ‹ç¯å¢ƒå˜é‡ã€‚<br>ä¸çŸ¥é“ä¸ºä»€ä¹ˆæˆ‘çš„<code>set</code>å‘½ä»¤è¾“å‡ºçš„æ˜¯ä¸€å †å¥‡æ€ªçš„ä¸œè¥¿= =ã€‚<br>åˆ«åæ— æ³•é€šè¿‡ä½¿ç”¨<code>set</code>æˆ–<code>printenv</code>æ¥æŸ¥çœ‹ã€‚<br>ç”¨ä¸å¸¦å‚æ•°çš„`alias æ¥æŸ¥çœ‹åˆ«åï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">alias</span></span><br><span class="line"><span class="built_in">alias</span> alert=<span class="string">'notify-send --urgency=low -i "$([ $? = 0 ] &amp;&amp; echo terminal || echo error)" "$(history|tail -n1|sed -e '</span>\<span class="string">''</span>s/^\s*[0-9]\+\s*//;s/[;&amp;|]\s*alert$//<span class="string">'\'</span><span class="string">')"'</span></span><br><span class="line"><span class="built_in">alias</span> egrep=<span class="string">'egrep --color=auto'</span></span><br><span class="line"><span class="built_in">alias</span> fgrep=<span class="string">'fgrep --color=auto'</span></span><br><span class="line"><span class="built_in">alias</span> grep=<span class="string">'grep --color=auto'</span></span><br><span class="line"><span class="built_in">alias</span> l=<span class="string">'ls -CF'</span></span><br><span class="line"><span class="built_in">alias</span> la=<span class="string">'ls -A'</span></span><br><span class="line"><span class="built_in">alias</span> ll=<span class="string">'ls -alF'</span></span><br><span class="line"><span class="built_in">alias</span> ls=<span class="string">'ls --color=auto'</span></span><br></pre></td></tr></table></figure><h2 id="vi"><a class="header-anchor" href="#vi">#</a>vi</h2><p><code>vi</code>å¯åŠ¨åä¼šç›´æ¥è¿›å…¥å‘½ä»¤æ¨¡å¼ã€‚</p><p>æŒ‰ä¸‹<code>i</code>é”®è¿›å…¥æ’å…¥æ¨¡å¼ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-- INSERT --</span><br></pre></td></tr></table></figure><p>æŒ‰ä¸‹<code>w</code>é”®ä¿å­˜ä¿®æ”¹å†…å®¹ã€‚</p><p>æŒ‰ä¸‹<code>q</code>é”®é€€å‡ºã€‚</p><p><code>vi</code>ä¸­çš„è®¸å¤šå‘½ä»¤éƒ½å¯ä»¥åœ¨å‰é¢åŠ ä¸Šä¸€ä¸ªæ•°å­—ã€‚</p><p>19:16ï¼Œä»Šå¤©å…ˆçœ‹åˆ°è¿™é‡Œå§ï¼çœ‹äº†å¾ˆå¤šä½†å€¼å¾—æ•´ç†çš„è›®å°‘çš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> shell </tag>
            
            <tag> bash </tag>
            
            <tag> shell note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¼–ç¨‹å°è®°</title>
      <link href="/blog/2021/01/06/programming-tips/"/>
      <url>/blog/2021/01/06/programming-tips/</url>
      
        <content type="html"><![CDATA[<p>ä¸€äº›æŠ€å·§ï¼Œè®°ä¸‹æ¥ï¼Œä¹‹åå¯èƒ½ä¼šç”¨åˆ°ï¼Œçœçš„å»ç™¾åº¦æœäº†</p><a id="more"></a><h2 id="python"><a class="header-anchor" href="#python">#</a>python</h2><ol><li><p>å‘½ä»¤è¡ŒæŒ‡å®šæ˜¾å¡<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>ï¼š</p><ul><li><code>CUDA_VISIBLE_DEVICES=gpu_ids</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CUDA_VISIBLE_DEVICES=1 python -u main.py</span><br></pre></td></tr></table></figure></li></ol><h2 id="vscode"><a class="header-anchor" href="#vscode">#</a>vscode</h2><ol><li>æŒ‡å®š<code>vscode</code>çš„æ–‡ä»¶æ¢è¡Œç¬¦ä¸º<code>LF</code><sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>ï¼š<ul><li>è®¾ç½®é‡Œæœç´¢ï¼š<code>files:eol</code>ã€‚</li></ul></li></ol><h2 id="chrome"><a class="header-anchor" href="#chrome">#</a>chrome</h2><ol><li><p>æ‰“å°åˆ†é¡µï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"page-break-before: always"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="https://zhuanlan.zhihu.com/p/166161217" target="_blank" rel="noopener">åœ¨ pytorch ä¸­æŒ‡å®šæ˜¾å¡</a> <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li><li id="fn2" class="footnote-item"><p><a href="https://blog.csdn.net/sdujava2011/article/details/83827343" target="_blank" rel="noopener">IDEA å’Œ VS code è®¾ç½®é»˜è®¤æ¢è¡Œç¬¦ä¸º LF</a> <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tips </tag>
            
            <tag> programming </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PANæ•°æ®å¢å¼ºæ–¹æ³•â€”â€”GroupMultiScaleCrop</title>
      <link href="/blog/2021/01/03/pan-data-augmentation/"/>
      <url>/blog/2021/01/03/pan-data-augmentation/</url>
      
        <content type="html"><![CDATA[<p><code>PAN</code>æˆ–è€…è¯´<code>TEA</code>ã€<code>TSM</code>ã€<code>TSN</code>è¿™ä¸€ç³»åˆ—ç½‘ç»œæ‰€ç”¨çš„å”¯ä¸€çš„æ•°æ®å¢å¼ºæ–¹æ³•ï¼š<code>GroupMultiScaleCrop</code>ã€‚</p><a id="more"></a><p>ä»¥<code>something-something</code>çš„æ•°æ®é›†ä¸ºä¾‹ï¼Œå› ä¸ºè¿™æ˜¯æˆ‘åœ¨ç”¨çš„æ•°æ®é›†ï¼Œå…¶å®ƒåœºæ™¯å‹æ•°æ®é›†å¤šäº†ä¸€ä¸ªæ°´å¹³ç¿»è½¬ï¼Œå› ä¸º<code>something-something</code>æœ‰å·¦å³åŒºåˆ†ï¼Œæ‰€ä»¥ä¸è¡Œã€‚</p><p><code>model.py</code>çš„æœ€åï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> torchvision.transforms.Compose([GroupMultiScaleCrop(self.input_size, [<span class="number">1</span>, <span class="number">.875</span>, <span class="number">.75</span>, <span class="number">.66</span>])])</span><br></pre></td></tr></table></figure><p>å…·ä½“è°ƒç”¨çš„ä»£ç åœ¨<code>transforms.py</code>ï¼ŒåŠ äº†äº›æ³¨é‡Šï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GroupMultiScaleCrop</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, input_size, scales=None, max_distort=<span class="number">1</span>, fix_crop=True, more_fix_crop=True)</span>:</span></span><br><span class="line">self.scales = scales <span class="keyword">if</span> scales <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">else</span> [<span class="number">1</span>, <span class="number">.875</span>, <span class="number">.75</span>, <span class="number">.66</span>]</span><br><span class="line">self.max_distort = max_distort</span><br><span class="line">self.fix_crop = fix_crop</span><br><span class="line">self.more_fix_crop = more_fix_crop</span><br><span class="line">self.input_size = input_size <span class="keyword">if</span> <span class="keyword">not</span> isinstance(input_size, int) <span class="keyword">else</span> [input_size, input_size]</span><br><span class="line">self.interpolation = Image.BILINEAR</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__call__</span><span class="params">(self, img_group)</span>:</span></span><br><span class="line"></span><br><span class="line">im_size = img_group[<span class="number">0</span>].size <span class="comment"># å› ä¸ºä¸€ç»„å›¾éƒ½æ˜¯ä¸€æ ·å¤§çš„ï¼Œä»ç¬¬ä¸€å¼ å›¾å°±èƒ½è·å–åˆ°å¤§å°</span></span><br><span class="line"></span><br><span class="line">crop_w, crop_h, offset_w, offset_h = self._sample_crop_size(im_size) <span class="comment"># éšæœºé€‰æ‹©ä¸€ç§å‰ªåˆ‡æ–¹å¼</span></span><br><span class="line">crop_img_group = [img.crop((offset_w, offset_h, offset_w + crop_w, offset_h + crop_h)) <span class="keyword">for</span> img <span class="keyword">in</span> img_group] <span class="comment"># åˆ‡å›¾</span></span><br><span class="line">ret_img_group = [img.resize((self.input_size[<span class="number">0</span>], self.input_size[<span class="number">1</span>]), self.interpolation) <span class="comment"># ç„¶åæ¢å¤æˆç½‘ç»œè¾“å…¥çš„å¤§å°ï¼Œ224*224ï¼Œç”¨åŒçº¿æ€§æ’å€¼çš„æ–¹æ³•</span></span><br><span class="line"><span class="keyword">for</span> img <span class="keyword">in</span> crop_img_group]</span><br><span class="line"><span class="keyword">return</span> ret_img_group</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_sample_crop_size</span><span class="params">(self, im_size)</span>:</span></span><br><span class="line">image_w, image_h = im_size[<span class="number">0</span>], im_size[<span class="number">1</span>] <span class="comment"># è·å–å›¾åƒå¤§å°</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># find a crop size</span></span><br><span class="line">base_size = min(image_w, image_h)</span><br><span class="line">crop_sizes = [int(base_size * x) <span class="keyword">for</span> x <span class="keyword">in</span> self.scales] <span class="comment"># æŒ‰ç…§å®½é«˜æ¯”è¾ƒçª„çš„é‚£ä¸€è¾¹ï¼Œä¹˜ä¸Šå¤šä¸ªå°ºåº¦ï¼Œå°±æ˜¯è¦ä¿®å‰ªçš„å¤§å°</span></span><br><span class="line">crop_h = [self.input_size[<span class="number">1</span>] <span class="keyword">if</span> abs(x - self.input_size[<span class="number">1</span>]) &lt; <span class="number">3</span> <span class="keyword">else</span> x <span class="keyword">for</span> x <span class="keyword">in</span> crop_sizes] <span class="comment"># input_sizeæ˜¯224ï¼Œå¦‚æœå¤§å°ç­‰äº224+-3é‚£å°±224ï¼Œä¸ç„¶å°±æ˜¯ä¿®å‰ªä¹‹åçš„å¤§å°</span></span><br><span class="line">crop_w = [self.input_size[<span class="number">0</span>] <span class="keyword">if</span> abs(x - self.input_size[<span class="number">0</span>]) &lt; <span class="number">3</span> <span class="keyword">else</span> x <span class="keyword">for</span> x <span class="keyword">in</span> crop_sizes]</span><br><span class="line"></span><br><span class="line">pairs = []</span><br><span class="line"><span class="keyword">for</span> i, h <span class="keyword">in</span> enumerate(crop_h):</span><br><span class="line"><span class="keyword">for</span> j, w <span class="keyword">in</span> enumerate(crop_w):</span><br><span class="line"><span class="keyword">if</span> abs(i - j) &lt;= self.max_distort: <span class="comment"># max_distort=1ï¼Œç›¸å½“äºå…è®¸iå’Œjä¹‹é—´å·®ä¸€ï¼Œå°±[1, .875, .75, .66]ä¹‹é—´</span></span><br><span class="line">pairs.append((w, h))</span><br><span class="line"></span><br><span class="line">crop_pair = random.choice(pairs) <span class="comment"># éšæœºé€‰ä¸€ä¸ªåˆ‡æ³•</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> self.fix_crop:</span><br><span class="line">w_offset = random.randint(<span class="number">0</span>, image_w - crop_pair[<span class="number">0</span>])</span><br><span class="line">h_offset = random.randint(<span class="number">0</span>, image_h - crop_pair[<span class="number">1</span>])</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">w_offset, h_offset = self._sample_fix_offset(image_w, image_h, crop_pair[<span class="number">0</span>], crop_pair[<span class="number">1</span>]) <span class="comment"># é»˜è®¤èµ°è¿™é‡Œ</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> crop_pair[<span class="number">0</span>], crop_pair[<span class="number">1</span>], w_offset, h_offset</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_sample_fix_offset</span><span class="params">(self, image_w, image_h, crop_w, crop_h)</span>:</span></span><br><span class="line">offsets = self.fill_fix_offset(self.more_fix_crop, image_w, image_h, crop_w, crop_h) <span class="comment"># ä¼ è¿›å»çš„æ˜¯åŸå§‹çš„å›¾åƒå¤§å°å’Œè¦åˆ‡æˆçš„å›¾åƒé«˜å’Œå®½</span></span><br><span class="line"><span class="keyword">return</span> random.choice(offsets) <span class="comment"># 13ç§åç§»é‡Œé€‰ä¸€ç§ï¼Œè€Œä¸æ˜¯ä¸Šé¢é‚£ç§å…¨é€‰çš„æ–¹å¼</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@staticmethod</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fill_fix_offset</span><span class="params">(more_fix_crop, image_w, image_h, crop_w, crop_h)</span>:</span></span><br><span class="line">w_step = (image_w - crop_w) // <span class="number">4</span></span><br><span class="line">h_step = (image_h - crop_h) // <span class="number">4</span></span><br><span class="line"></span><br><span class="line">ret = list()</span><br><span class="line">ret.append((<span class="number">0</span>, <span class="number">0</span>))  <span class="comment"># upper left</span></span><br><span class="line">ret.append((<span class="number">4</span> * w_step, <span class="number">0</span>))  <span class="comment"># upper right</span></span><br><span class="line">ret.append((<span class="number">0</span>, <span class="number">4</span> * h_step))  <span class="comment"># lower left</span></span><br><span class="line">ret.append((<span class="number">4</span> * w_step, <span class="number">4</span> * h_step))  <span class="comment"># lower right</span></span><br><span class="line">ret.append((<span class="number">2</span> * w_step, <span class="number">2</span> * h_step))  <span class="comment"># center</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> more_fix_crop:</span><br><span class="line">ret.append((<span class="number">0</span>, <span class="number">2</span> * h_step))  <span class="comment"># center left</span></span><br><span class="line">ret.append((<span class="number">4</span> * w_step, <span class="number">2</span> * h_step))  <span class="comment"># center right</span></span><br><span class="line">ret.append((<span class="number">2</span> * w_step, <span class="number">4</span> * h_step))  <span class="comment"># lower center</span></span><br><span class="line">ret.append((<span class="number">2</span> * w_step, <span class="number">0</span> * h_step))  <span class="comment"># upper center</span></span><br><span class="line"></span><br><span class="line">ret.append((<span class="number">1</span> * w_step, <span class="number">1</span> * h_step))  <span class="comment"># upper left quarter</span></span><br><span class="line">ret.append((<span class="number">3</span> * w_step, <span class="number">1</span> * h_step))  <span class="comment"># upper right quarter</span></span><br><span class="line">ret.append((<span class="number">1</span> * w_step, <span class="number">3</span> * h_step))  <span class="comment"># lower left quarter</span></span><br><span class="line">ret.append((<span class="number">3</span> * w_step, <span class="number">3</span> * h_step))  <span class="comment"># lower righ quarter</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> ret</span><br></pre></td></tr></table></figure><p>å…¥å£éƒ½æ˜¯<code>__call__</code>æ–¹æ³•ï¼Œ<code>Image.BILINEAR</code>åŒçº¿æ€§æ’å€¼ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¡Œä¸ºè¯†åˆ« </tag>
            
            <tag> action recognition </tag>
            
            <tag> pan </tag>
            
            <tag> data augmentation </tag>
            
            <tag> something something </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>inotifyä½¿ç”¨</title>
      <link href="/blog/2021/01/03/inotify-usage/"/>
      <url>/blog/2021/01/03/inotify-usage/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a class="header-anchor" href="#å‰è¨€">#</a>å‰è¨€</h2><p>æ‡’çœŸçš„æ˜¯äººç±»è¿›æ­¥çš„ç©¶æåŠ¨åŠ›= =<br>å› ä¸ºä»£ç è¦åœ¨æ— æ•°å°æœºå™¨ä¸Šæ¥å›åˆ‡æ¢ï¼Œæˆ‘æœ€å¼€å§‹ç”¨çš„æ˜¯<code>github</code>ï¼Œä½†æ˜¯é¢‘ç¹æ”¹çš„æ—¶å€™<code>github</code>ä¹Ÿå¤ªéš¾ç”¨äº†ã€‚<br>åæ¥ç”¨å¾®äº‘åŒæ­¥åŠ©æ‰‹ï¼Œä¸è¿‡è¿™ä¸ªåªèƒ½æˆ‘çš„<code>windows</code>å’Œ<code>mac</code>ä¹‹é—´åŒæ­¥ï¼Œ<code>linux</code>æ²¡æœ‰å®¢æˆ·ç«¯ã€‚<br>å†åæ¥çŸ¥é“äº†<code>rsync</code>è¿™ä¹ˆä¸€ä¸ªå·¥å…·ï¼Œ<code>windows</code>ä¸‹ä¹Ÿæœ‰ï¼Œå°±ä¸‰ç«¯åŒæ­¥ç‰¹åˆ«æ–¹ä¾¿ï¼Œå†™ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·è¿™è¾¹ç‚¹ä¸€ä¸‹åŒæ­¥åˆ°äº‘ï¼Œé‚£è¾¹ç‚¹ä¸€ä¸‹ä»äº‘ä¸Šæ‹‰ä¸‹æ¥ï¼Œå®Œç¾ã€‚<br>å†åæ¥ï¼Œä¹Ÿå°±æ˜¯æ˜¨å¤©ï¼Œæˆ‘å®åœ¨æ‡’å¾—ç‚¹é‚£ä¸€ä¸‹äº†ï¼Œ<code>Linux</code>å†…æ ¸æ”¯æŒæ–‡ä»¶çš„ç»†ç²’åº¦ç›‘æ§ï¼Œç”¨<code>inotify</code>å®ç°ï¼Œæ‰€ä»¥ä¸€ä¸‹æ–‡ä»¶ä¿®æ”¹å¢åŠ ä»€ä¹ˆçš„éƒ½å¯ä»¥è¢«ç›‘æ§åˆ°ï¼Œç„¶åè‡ªåŠ¨ç›‘æ§ï¼Œç„¶åä¼ ä¸Šäº‘ï¼Œé…åˆä¸Š<code>vscode</code>ä¹‹ç±»çš„ç¼–è¾‘å™¨çš„è‡ªåŠ¨ä¿å­˜ï¼Œæ„Ÿè§‰è§£æ”¾äº†è‡ªå·±ï¼</p><p>æœ¬æ¥æƒ³æ˜¨æ™šæ•´ç†çš„ï¼Œç»“æœå·äº†ä¸ªæ‡’ï¼Œå°±ä»Šå¤©äº†= =ï¼</p><a id="more"></a><h2 id="inotify-æ˜¯ä¸ªå•¥"><a class="header-anchor" href="#inotify-æ˜¯ä¸ªå•¥">#</a>inotify æ˜¯ä¸ªå•¥</h2><p>ä¸€å¥è¯æ¦‚æ‹¬å°±æ˜¯ï¼š<strong>Inotify æ˜¯ä¸€ä¸ª Linux ç‰¹æ€§ï¼Œå®ƒç›‘æ§æ–‡ä»¶ç³»ç»Ÿæ“ä½œï¼Œæ¯”å¦‚è¯»å–ã€å†™å…¥å’Œåˆ›å»ºã€‚</strong></p><p>å®ƒç›¸æ¯”äº<code>cron</code>æ¥è®²çš„å¥½å¤„å°±æ˜¯äº‹ä»¶è§¦å‘ï¼Œä¸ä¼šå ç”¨å¤§é‡çš„è®¡ç®—æœºèµ„æºå’Œæ—¶é—´æ¥æ‰«æï¼Œä¸€æ—¦æœ‰ä¿®æ”¹ä¹‹ç±»çš„æ“ä½œï¼Œä¼šé€šçŸ¥ç»™ç”¨æˆ·ï¼Œç„¶åä»¥æ­¤æ¥å“åº”æ“ä½œã€‚</p><p>è€Œä¸”<code>inotify</code>æ˜¯å†…æ ¸æ”¯æŒçš„ã€‚</p><h2 id="å®‰è£…-inotify-tools"><a class="header-anchor" href="#å®‰è£…-inotify-tools">#</a>å®‰è£… inotify-tools</h2><p>æˆ‘æ˜¯åœ¨<code>Windows</code>çš„å­ç³»ç»Ÿé‡Œè£…çš„<code>Ubuntu</code>ï¼Œå¬è¯´æ˜¯ä¸ªå…·æœ‰å®Œå¤‡åŠŸèƒ½çš„<code>Linux</code>ç‰ˆæœ¬ï¼Œæ‰€ä»¥åƒè¿™ç§åŠŸèƒ½åº”è¯¥éƒ½æœ‰çš„ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ inotifywait</span><br><span class="line">Command <span class="string">'inotifywait'</span> not found, but can be installed with:</span><br><span class="line">sudo apt install inotify-tools</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥å…¶å®å®‰è£…å¾ˆç®€å•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install inotify-tools -y</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨-inotify-tools"><a class="header-anchor" href="#ä½¿ç”¨-inotify-tools">#</a>ä½¿ç”¨ inotify-tools</h2><p><code>inotify-tools</code>é‡Œé™„å¸¦ä¸¤ä¸ªå·¥å…·ï¼š<code>inotifywait</code>å’Œ<code>inotifywatch</code>ã€‚</p><p>å‰è€…ç”¨æ¥<strong>ç›‘æ§æ–‡ä»¶æˆ–ç›®å½•çš„å˜åŒ–</strong>ï¼Œåè€…ç”¨æ¥<strong>ç»Ÿè®¡æ–‡ä»¶ç³»ç»Ÿè®¿é—®çš„æ¬¡æ•°</strong>ã€‚<br>åè€…ä»Šå¤©æš‚æ—¶ç”¨ä¸ä¸Šï¼Œè´´ä¸ªå‚æ•°ï¼Œç•™å¾…æœ‰ç¼˜äººè¡¥å‘ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">$ inotifywatch --<span class="built_in">help</span></span><br><span class="line">inotifywatch 3.14</span><br><span class="line">Gather filesystem usage statistics using inotify.</span><br><span class="line">Usage: inotifywatch [ options ] file1 [ file2 ] [ ... ]</span><br><span class="line">Options:</span><br><span class="line">        -h|--<span class="built_in">help</span>       Show this <span class="built_in">help</span> text.</span><br><span class="line">        -v|--verbose    Be verbose.</span><br><span class="line">        @&lt;file&gt;         Exclude the specified file from being watched.</span><br><span class="line">        --fromfile &lt;file&gt;</span><br><span class="line">                Read files to watch from &lt;file&gt; or `-<span class="string">' for stdin.</span></span><br><span class="line"><span class="string">        --exclude &lt;pattern&gt;</span></span><br><span class="line"><span class="string">                Exclude all events on files matching the extended regular</span></span><br><span class="line"><span class="string">                expression &lt;pattern&gt;.</span></span><br><span class="line"><span class="string">        --excludei &lt;pattern&gt;</span></span><br><span class="line"><span class="string">                Like --exclude but case insensitive.</span></span><br><span class="line"><span class="string">        -z|--zero</span></span><br><span class="line"><span class="string">                In the final table of results, output rows and columns even</span></span><br><span class="line"><span class="string">                if they consist only of zeros (the default is to not output</span></span><br><span class="line"><span class="string">                these rows and columns).</span></span><br><span class="line"><span class="string">        -r|--recursive  Watch directories recursively.</span></span><br><span class="line"><span class="string">        -t|--timeout &lt;seconds&gt;</span></span><br><span class="line"><span class="string">                Listen only for specified amount of time in seconds; if</span></span><br><span class="line"><span class="string">                omitted or 0, inotifywatch will execute until receiving an</span></span><br><span class="line"><span class="string">                interrupt signal.</span></span><br><span class="line"><span class="string">        -e|--event &lt;event1&gt; [ -e|--event &lt;event2&gt; ... ]</span></span><br><span class="line"><span class="string">                Listen for specific event(s).  If omitted, all events are</span></span><br><span class="line"><span class="string">                listened for.</span></span><br><span class="line"><span class="string">        -a|--ascending &lt;event&gt;</span></span><br><span class="line"><span class="string">                Sort ascending by a particular event, or `total'</span>.</span><br><span class="line">        -d|--descending &lt;event&gt;</span><br><span class="line">                Sort descending by a particular event, or `total<span class="string">'.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Exit status:</span></span><br><span class="line"><span class="string">        0  -  Exited normally.</span></span><br><span class="line"><span class="string">        1  -  Some error occurred.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Events:</span></span><br><span class="line"><span class="string">        access          file or directory contents were read</span></span><br><span class="line"><span class="string">        modify          file or directory contents were written</span></span><br><span class="line"><span class="string">        attrib          file or directory attributes changed</span></span><br><span class="line"><span class="string">        close_write     file or directory closed, after being opened in</span></span><br><span class="line"><span class="string">                        writable mode</span></span><br><span class="line"><span class="string">        close_nowrite   file or directory closed, after being opened in</span></span><br><span class="line"><span class="string">                        read-only mode</span></span><br><span class="line"><span class="string">        close           file or directory closed, regardless of read/write mode</span></span><br><span class="line"><span class="string">        open            file or directory opened</span></span><br><span class="line"><span class="string">        moved_to        file or directory moved to watched directory</span></span><br><span class="line"><span class="string">        moved_from      file or directory moved from watched directory</span></span><br><span class="line"><span class="string">        move            file or directory moved to or from watched directory</span></span><br><span class="line"><span class="string">        create          file or directory created within watched directory</span></span><br><span class="line"><span class="string">        delete          file or directory deleted within watched directory</span></span><br><span class="line"><span class="string">        delete_self     file or directory was deleted</span></span><br><span class="line"><span class="string">        unmount         file system containing file or directory unmounted</span></span><br></pre></td></tr></table></figure><p><code>inotifywait</code>ä¹Ÿå…ˆè´´ä¸€ä¸ª<code>help</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">$ inotifywait --<span class="built_in">help</span></span><br><span class="line">inotifywait 3.14</span><br><span class="line">Wait <span class="keyword">for</span> a particular event on a file or <span class="built_in">set</span> of files.</span><br><span class="line">Usage: inotifywait [ options ] file1 [ file2 ] [ file3 ] [ ... ]</span><br><span class="line">Options:</span><br><span class="line">        -h|--<span class="built_in">help</span>       Show this <span class="built_in">help</span> text.</span><br><span class="line">        @&lt;file&gt;         Exclude the specified file from being watched.</span><br><span class="line">        --exclude &lt;pattern&gt;</span><br><span class="line">                        Exclude all events on files matching the</span><br><span class="line">                        extended regular expression &lt;pattern&gt;.</span><br><span class="line">        --excludei &lt;pattern&gt;</span><br><span class="line">                        Like --exclude but <span class="keyword">case</span> insensitive.</span><br><span class="line">        -m|--monitor    Keep listening <span class="keyword">for</span> events forever.  Without</span><br><span class="line">                        this option, inotifywait will <span class="built_in">exit</span> after one</span><br><span class="line">                        event is received.</span><br><span class="line">        -d|--daemon     Same as --monitor, except run <span class="keyword">in</span> the background</span><br><span class="line">                        logging events to a file specified by --outfile.</span><br><span class="line">                        Implies --syslog.</span><br><span class="line">        -r|--recursive  Watch directories recursively.</span><br><span class="line">        --fromfile &lt;file&gt;</span><br><span class="line">                        Read files to watch from &lt;file&gt; or `-<span class="string">' for stdin.</span></span><br><span class="line"><span class="string">        -o|--outfile &lt;file&gt;</span></span><br><span class="line"><span class="string">                        Print events to &lt;file&gt; rather than stdout.</span></span><br><span class="line"><span class="string">        -s|--syslog     Send errors to syslog rather than stderr.</span></span><br><span class="line"><span class="string">        -q|--quiet      Print less (only print events).</span></span><br><span class="line"><span class="string">        -qq             Print nothing (not even events).</span></span><br><span class="line"><span class="string">        --format &lt;fmt&gt;  Print using a specified printf-like format</span></span><br><span class="line"><span class="string">                        string; read the man page for more details.</span></span><br><span class="line"><span class="string">        --timefmt &lt;fmt&gt; strftime-compatible format string for use with</span></span><br><span class="line"><span class="string">                        %T in --format string.</span></span><br><span class="line"><span class="string">        -c|--csv        Print events in CSV format.</span></span><br><span class="line"><span class="string">        -t|--timeout &lt;seconds&gt;</span></span><br><span class="line"><span class="string">                        When listening for a single event, time out after</span></span><br><span class="line"><span class="string">                        waiting for an event for &lt;seconds&gt; seconds.</span></span><br><span class="line"><span class="string">                        If &lt;seconds&gt; is 0, inotifywait will never time out.</span></span><br><span class="line"><span class="string">        -e|--event &lt;event1&gt; [ -e|--event &lt;event2&gt; ... ]</span></span><br><span class="line"><span class="string">                Listen for specific event(s).  If omitted, all events are</span></span><br><span class="line"><span class="string">                listened for.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Exit status:</span></span><br><span class="line"><span class="string">        0  -  An event you asked to watch for was received.</span></span><br><span class="line"><span class="string">        1  -  An event you did not ask to watch for was received</span></span><br><span class="line"><span class="string">              (usually delete_self or unmount), or some error occurred.</span></span><br><span class="line"><span class="string">        2  -  The --timeout option was given and no events occurred</span></span><br><span class="line"><span class="string">              in the specified interval of time.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Events:</span></span><br><span class="line"><span class="string">        access          file or directory contents were read</span></span><br><span class="line"><span class="string">        modify          file or directory contents were written</span></span><br><span class="line"><span class="string">        attrib          file or directory attributes changed</span></span><br><span class="line"><span class="string">        close_write     file or directory closed, after being opened in</span></span><br><span class="line"><span class="string">                        writable mode</span></span><br><span class="line"><span class="string">        close_nowrite   file or directory closed, after being opened in</span></span><br><span class="line"><span class="string">                        read-only mode</span></span><br><span class="line"><span class="string">        close           file or directory closed, regardless of read/write mode</span></span><br><span class="line"><span class="string">        open            file or directory opened</span></span><br><span class="line"><span class="string">        moved_to        file or directory moved to watched directory</span></span><br><span class="line"><span class="string">        moved_from      file or directory moved from watched directory</span></span><br><span class="line"><span class="string">        move            file or directory moved to or from watched directory</span></span><br><span class="line"><span class="string">        create          file or directory created within watched directory</span></span><br><span class="line"><span class="string">        delete          file or directory deleted within watched directory</span></span><br><span class="line"><span class="string">        delete_self     file or directory was deleted</span></span><br><span class="line"><span class="string">        unmount         file system containing file or directory unmounted</span></span><br></pre></td></tr></table></figure><p>ä¸»è¦ç”¨åˆ°çš„å‚æ•°æ˜¯ï¼š</p><ul><li><code>r</code>ï¼šå³<code>recursive</code>ï¼Œé€’å½’æŸ¥è¯¢ç›®å½•ã€‚</li><li><code>m</code>ï¼šå³<code>monitor</code>ï¼Œå§‹ç»ˆä¿æŒç›‘å¬ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªå‚æ•°ï¼Œ<code>inotifywait</code>åœ¨æ¥æ”¶ä¸€æ¬¡äº‹ä»¶ä¹‹åå°±ä¼šé€€å‡ºã€‚</li><li><code>q</code>ï¼šå³<code>quiet</code>ï¼Œå°±æ˜¯åªæ‰“å°äº‹ä»¶ï¼Œæœ€å°åŒ–è¾“å‡ºã€‚</li><li><code>e</code>ï¼šå³<code>event</code>ï¼Œæˆ‘ä»¬è¦ç›‘å¬çš„äº‹ä»¶ç±»å‹ï¼Œå¤šä¸ªäº‹ä»¶ç”¨<code>,</code>åˆ†éš”ã€‚</li></ul><p><code>--format</code>å‚æ•°ä¹Ÿä¼šç”¨åˆ°ï¼Œæ˜¯æ§åˆ¶è¾“å‡ºæ ¼å¼çš„ï¼Œè‡ªå·±çœ‹<code>man</code>æ‰‹å†Œå§å¦‚æœæ„Ÿå…´è¶£ã€‚</p><p>é¦–å…ˆæµ‹è¯•ä¸€ä¸‹ç›‘æ§äº‹ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">inotifywait -mrq --format <span class="string">'%Xe %w%f'</span> -e modify,create,delete,attrib Desktop/</span><br></pre></td></tr></table></figure><p>ç„¶åå†å¼€ä¸€ä¸ª<code>shell</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch Desktop/&#123;1..5&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åå°±ä¼šè§‚å¯Ÿåˆ°é‚£è¾¹çš„è¾“å‡ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">CREATE Desktop/1</span><br><span class="line">ATTRIB Desktop/1</span><br><span class="line">CREATE Desktop/2</span><br><span class="line">ATTRIB Desktop/2</span><br><span class="line">CREATE Desktop/3</span><br><span class="line">ATTRIB Desktop/3</span><br><span class="line">CREATE Desktop/4</span><br><span class="line">ATTRIB Desktop/4</span><br><span class="line">CREATE Desktop/5</span><br><span class="line">ATTRIB Desktop/5</span><br></pre></td></tr></table></figure><p>åˆ›å»ºæ–‡ä»¶å¹¶ä¿®æ”¹äº†å±æ€§ï¼Œæ²¡æ¯›ç—…ï¼Œå†æ”¹ä¸€ä¸‹æ–‡ä»¶è¯•è¯•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$PATH</span> &gt;&gt; Desktop/1</span><br></pre></td></tr></table></figure><p>å†æ¬¡è§‚å¯Ÿåˆ°è¾“å‡ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MODIFY Desktop/1</span><br></pre></td></tr></table></figure><p>å®Œç¾ï¼</p><p>ç„¶åå°±å¯ä»¥åˆ¶ä½œä¸€ä¸ªè„šæœ¬äº†ï¼Œå‘ç°æ£€æµ‹åˆ°äº†æ›´æ–°ï¼Œå°±åŒæ­¥åˆ°äº‘ç«¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">inotifywait -mrq --format  <span class="string">'%Xe %w%f'</span> -e modify,create,delete,attrib,close_write,move ~/Documents/common/PAN-PyTorch/ | <span class="keyword">while</span> <span class="built_in">read</span> file</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">mi</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸ª<code>mi</code>æ˜¯æˆ‘è‡ªå·±å†™çš„<code>shell</code>ï¼Œå°è£…äº†åŒæ­¥çš„ä¸€ç³»åˆ—å‘½ä»¤ï¼Œè¯¸ä½æ„Ÿå…´è¶£å¯ä»¥è‡ªå·±é€šè¿‡<code>rsync</code>æ¥å†™ï¼š<a href="https://onns.xyz/blog/2020/09/08/rsync-usage/">rsync å®ç°æ–‡ä»¶åŒæ­¥</a>ã€‚</p><p>ç„¶åè®©è¿™ä¸ªè„šæœ¬åå°è¿è¡Œå°±è¡Œäº†ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup osync &amp;</span><br></pre></td></tr></table></figure><p>å½“ç„¶ä¹Ÿå¯ä»¥åšæˆ<code>service</code>ï¼š<a href="https://onns.xyz/blog/2020/12/14/run-ngrok-as-a-service/">æŠŠ ngrok æœåŠ¡é…ç½®æˆ service</a>ã€‚</p><p>æ”¶å·¥ï¼</p><h2 id="todo"><a class="header-anchor" href="#todo">#</a>TODO</h2><p>åˆšåˆšå…¶å®æµ‹è¯•æ˜¯åœ¨æˆ‘æ ‘è“æ´¾çš„<code>Ubuntu</code>ç³»ç»Ÿä¸‹åšçš„ï¼Œåœ¨<code>Windows</code>çš„å­ç³»ç»Ÿé‡Œï¼Œæˆ‘å‘ç°ä¸€ä¸ªä¿®æ”¹äº‹ä»¶ä¼šè§¦å‘å››æ¬¡<code>inotify</code>çš„ç›‘æ§äº‹ä»¶ï¼Œæ‰€ä»¥å…¶å®å¦‚æœè¿è¡Œä¸‹æ¥ï¼Œä¿®æ”¹ä¸€æ¬¡å°±ä¼šè¿›è¡Œå››æ¬¡çš„åŒæ­¥æ“ä½œï¼Œæ„Ÿè§‰å¾ˆæ¶ˆè€—èµ„æºï¼Œä¸è¿‡æ‰€å¹¸è‡ªå·±ç”¨ï¼Œåˆ°æ—¶å€™å†æ¥å¡«å‘å§ï¼</p><p>ç¬¬äºŒä¸ªä¹Ÿæ˜¯ä¸‹é¢<strong>å‚è€ƒé“¾æ¥ä¸€</strong>é‡Œæåˆ°çš„é—®é¢˜ï¼Œå…¶å®æˆ‘æ¯æ¬¡åŒæ­¥éƒ½æ˜¯å…¨é‡åŒæ­¥ï¼Œå› ä¸ºæˆ‘åŒæ­¥å†…å®¹å°‘ï¼Œæ‰€ä»¥å°±ä¸éº»çƒ¦çš„å»å¼„è¿™äº›äº†ï¼Œå¦‚æœè¦çœŸå®çš„åº”ç”¨åœºæ™¯ï¼Œè¿˜æ˜¯è¦åƒä»–é‚£æ ·<strong>æŒ‰éœ€åŒæ­¥</strong>ï¼Œæœ‰ç©ºæ¥çœ‹çœ‹ä»–æ€ä¹ˆå†™çš„ï¼Œ<code>shell</code>å¥½ä¹…æ²¡å­¦äº†ï¼Œå­¦ä¸šå‹åŠ›å¥½å¤§ï¼Œæ²¡æ—¶é—´å†åšåˆ«çš„äº†ï¼Œå“­äº†ã€‚</p><p>10:19ï¼Œæ”¶å·¥ã€‚</p><h2 id="å‚è€ƒé“¾æ¥"><a class="header-anchor" href="#å‚è€ƒé“¾æ¥">#</a>å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://www.cnblogs.com/ginvip/p/6430986.html" target="_blank" rel="noopener">çœŸæ­£çš„ inotify+rsync å®æ—¶åŒæ­¥ å½»åº•å‘Šåˆ«åŒæ­¥æ…¢</a></li><li><a href="https://blog.51cto.com/13858192/2159200" target="_blank" rel="noopener">rsync+ Notify é…ç½®è§£æåŠæ­¥éª¤è¯¦è§£</a></li><li><a href="https://blog.csdn.net/lijun_work/article/details/106260406" target="_blank" rel="noopener">notify+rsync å®æ—¶åŒæ­¥è„šæœ¬</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> inotify </tag>
            
            <tag> rsync </tag>
            
            <tag> sync </tag>
            
            <tag> windows </tag>
            
            <tag> inotifywait </tag>
            
            <tag> inotifywatch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>On the Integration of Optical Flow and Action Recognition</title>
      <link href="/blog/2020/12/29/on-the-integration-of-optical-flow-and-action-recognition/"/>
      <url>/blog/2020/12/29/on-the-integration-of-optical-flow-and-action-recognition/</url>
      
        <content type="html"><![CDATA[<h1 id="on-the-integration-of-optical-flow-and-action-recognition"><a class="header-anchor" href="#on-the-integration-of-optical-flow-and-action-recognition">#</a>On the Integration of Optical Flow and Action Recognition</h1><p><code>PAN</code>çš„å‚è€ƒæ–‡çŒ®ä¹‹ä¸€ï¼Œä»‹ç»äº†ä¸€äº›ç ”ç©¶æ€è·¯ï¼Œä»¥åŠå…‰æµå¯¹è¡Œä¸ºè¯†åˆ«å‡†ç¡®ç‡å½±å“æœ€å¤§çš„éƒ¨åˆ†æ˜¯è¾¹ç¼˜ä¿¡æ¯ã€‚</p><a id="more"></a><h2 id="æ‘˜è¦"><a class="header-anchor" href="#æ‘˜è¦">#</a>æ‘˜è¦</h2><p>æ–‡ç« æ·±å…¥ç ”ç©¶äº†<code>ä¸ºä»€ä¹ˆå…‰æµå¯¹è¡Œä¸ºè¯†åˆ«æ˜¯æœ‰å¸®åŠ©çš„</code>ã€<code>å…‰æµæ–¹æ³•çš„ä»€ä¹ˆå› ç´ å½±å“åˆ°äº†è¡Œä¸ºè¯†åˆ«çš„å‡†ç¡®ç‡</code>ä»¥åŠ<code>å¦‚ä½•åšå¾—æ›´å¥½</code><sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>ã€‚</p><p>è®ºæ–‡é€šè¿‡<code>ä¸åŒçš„å…‰æµç®—æ³•</code>å’Œ<code>è¾“å…¥å˜æ¢</code>æ¥æ¢ç´¢ä¸Šè¿°é—®é¢˜ï¼Œå¾—åˆ°ä»¥ä¸‹ç»“è®ºï¼š</p><ol><li>å…‰æµå¯¹äºè¡Œä¸ºè¯†åˆ«çš„å¸®åŠ©åœ¨äºå®ƒçš„å¤–è§‚ä¸å˜æ€§ï¼Œä¸ä¼šå¯¹é¢œè‰²æ•æ„Ÿã€‚</li><li>å…‰æµæœ¬èº«çš„ç²¾åº¦ä¸è¡Œä¸ºè¯†åˆ«åˆ†ç±»çš„å‡†ç¡®æ€§ä¹‹é—´æ²¡æœ‰ç›¸å…³æ€§ã€‚</li><li>å…‰æµçš„è¾¹ç¼˜ä¿¡æ¯å’Œå°ä½ç§»å¯¹è¡Œä¸ºè¯†åˆ«çš„åˆ†ç±»ç›¸å…³ã€‚</li><li>é€šè¿‡åˆ†ç±»æŸå¤±æ¥ï¼ˆä¼˜åŒ–ï¼‰è®­ç»ƒå…‰æµå¯ä»¥æé«˜è¡Œä¸ºè¯†åˆ«åˆ†ç±»å‡†ç¡®æ€§ã€‚</li><li>ä½¿ç”¨è¡Œä¸ºè¯†åˆ«åˆ†ç±»è¯¯å·®æ¥è®­ç»ƒå¾—åˆ°çš„å…‰æµï¼Œä¸æ™®é€šçš„å…‰æµçš„å·®å¼‚ä¸»è¦é›†ä¸­åœ¨äººä½“çš„å†…éƒ¨ä¸è¾¹ç¼˜åŒºåŸŸã€‚</li></ol><center><!-- //onns.xyz/blog/image --><!-- ../image --><p><img src="//onns.xyz/blog/image/20201229-1.jpg" alt="è¾¹ç¼˜1"><br><img src="//onns.xyz/blog/image/20201229-2.jpg" alt="è¾¹ç¼˜2"><br><img src="//onns.xyz/blog/image/20201229-3.jpg" alt="è¾¹ç¼˜3"></p></center><h2 id="å‡è®¾ä¸€ï¼šä¸¤å¸§ä¹‹é—´çš„å…‰æµæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è§†é¢‘åˆ†ç±»ç‰¹å¾"><a class="header-anchor" href="#å‡è®¾ä¸€ï¼šä¸¤å¸§ä¹‹é—´çš„å…‰æµæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è§†é¢‘åˆ†ç±»ç‰¹å¾">#</a>å‡è®¾ä¸€ï¼šä¸¤å¸§ä¹‹é—´çš„å…‰æµæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è§†é¢‘åˆ†ç±»ç‰¹å¾</h2><blockquote><p>What makes motion such a useful feature for video classification?</p></blockquote><p>é€šè¿‡<code>éšæœºæ‰“ä¹±å…‰æµå¸§</code>æ¥è§‚å¯Ÿå‡†ç¡®ç‡å‘ç°å…‰æµçš„è½¨è¿¹ä¸æ˜¯ä¸»è¦çš„å½±å“å› ç´ ï¼Œå› ä¸ºä¸€äº›é™æ€çš„è¿åŠ¨ä¿¡æ¯å·²ç»ç¼–ç åœ¨é‡Œé¢äº†ã€‚</p><p>äºæ˜¯è®ºæ–‡åˆåšäº†ä¸€ä¸ªå®éªŒï¼Œå°†è®¡ç®—å…‰æµçš„å¸§åºä¹Ÿæ‰“ä¹±ï¼Œå¾—åˆ°çš„ç»“æœæ˜¯å‡†ç¡®ç‡ä¸‹é™çš„å¾ˆå¤šä½†ä»ç„¶æ¯”æ²¡ç”¨å…‰æµæ¥çš„å·®ã€‚</p><p>åœ¨å°†å¤–è§‚ä¿¡æ¯è¿›è¡Œæ”¹å˜åï¼Œå…‰æµåªä¸‹é™äº†<code>1%</code>ä½†ä¼ ç»Ÿçš„å›¾åƒä¸‹é™äº†<code>50%</code>ï¼Œå¾—å‡ºçš„ç»“è®ºæ˜¯ï¼Œå…‰æµçš„æ•ˆæœæ¥æºäºä»–çš„å¤–è§‚ä¸å˜æ€§ã€‚</p><h2 id="ä¸ªäººè§‚ç‚¹"><a class="header-anchor" href="#ä¸ªäººè§‚ç‚¹">#</a>ä¸ªäººè§‚ç‚¹</h2><p>è®ºæ–‡ä¸­ä¼šå¼•ç”¨è¿™ç¯‡æ–‡ç« çš„å¯¹äºå…‰æµçš„ä¸€ä¸ªç»“è®ºï¼Œä½†æ˜¯è¿™äº”ä¸ªç»“è®ºå¯èƒ½å¹¶ä¸é€‚ç”¨äºç°åœ¨çš„æƒ…å†µï¼Œåé¢æœ‰ç”¨åˆ°å†æ¥è¡¥ï¼Œä¸ç„¶åº”è¯¥ä¸ä¼šè¯¦ç»†çœ‹äº†ï¼Œé‡ç‚¹å…¨åœ¨è¿™äº”ä¸ªç»“è®ºé‡Œï¼Œè¿™ä¸ªæ‘˜è¦å†™çš„æ„Ÿè§‰å°±å¾ˆæ£’ã€‚</p><h2 id="ç›¸å…³é“¾æ¥"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥">#</a>ç›¸å…³é“¾æ¥</h2><ul><li><a href="https://arxiv.org/abs/1712.08416" target="_blank" rel="noopener">https://arxiv.org/abs/1712.08416</a></li><li><a href="https://blog.csdn.net/qq_18644873/article/details/87805517" target="_blank" rel="noopener">è®ºæ–‡ç¬”è®°ã€ŠOn the Integration of Optical Flow and Action Recognitionã€‹:å…‰æµçš„ä½œç”¨</a></li><li><a href="https://zhuanlan.zhihu.com/p/32443212" target="_blank" rel="noopener">[GCPR 2018 è®ºæ–‡ç¬”è®°] å…‰æµä¸è¡Œä¸ºè¯†åˆ«çš„ç»“åˆç ”ç©¶</a></li><li><a href="https://blog.csdn.net/elaine_bao/article/details/80891173" target="_blank" rel="noopener">ã€è®ºæ–‡ç¬”è®°ã€‘å…‰æµåœ¨è§†é¢‘è¡Œä¸ºè¯†åˆ«ä¸­çš„ä½œç”¨</a></li></ul><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>æ„Ÿè§‰ç¬¬ä¸‰ç‚¹å…¶å®å¥½åƒæ²¡æ€ä¹ˆæã€‚çœ‹äº†åˆ«äººçš„ç¬”è®°ï¼Œå¤§å®¶è§‰å¾—æ˜¯ä¼˜åŒ–å…‰æµã€‚ <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¡Œä¸ºè¯†åˆ« </tag>
            
            <tag> action recognition </tag>
            
            <tag> 2018 </tag>
            
            <tag> å…‰æµ </tag>
            
            <tag> optical flow </tag>
            
            <tag> GCPR </tag>
            
            <tag> GCPR 2018 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å½“å‰å·¥ä½œè¿›åº¦æŠ¥å‘Š</title>
      <link href="/blog/2020/12/27/interim-report/"/>
      <url>/blog/2020/12/27/interim-report/</url>
      
        <content type="html"><![CDATA[<center ondblclick="javascript:document.getElementsByTagName('header')[0].remove();document.getElementsByTagName('header')[0].remove();document.getElementsByTagName('footer')[0].remove();document.getElementsByTagName('footer')[0].remove();document.getElementById('comments').remove();document.getElementById('back-to-top').remove();document.getElementById('post-toc').remove();"><table><thead><tr><th style="text-align:center">2020-12-27</th><th style="text-align:center">ä¸­æœŸè¿›å±•æŠ¥å‘Š</th><th style="text-align:center">åˆ˜æ½˜</th></tr></thead><tbody></tbody></table></center><a id="more"></a><h2 id="ç»¼è¿°"><a class="header-anchor" href="#ç»¼è¿°">#</a>ç»¼è¿°</h2><p>å½“å‰è¡Œä¸ºè¯†åˆ«çš„ä¸»æµæ–¹å‘æœ‰ä¸¤ä¸ªï¼Œåˆ†åˆ«æ˜¯åŒæµäºŒç»´å·ç§¯ç¥ç»ç½‘ç»œå’Œä¸‰ç»´å·ç§¯ç¥ç»ç½‘ç»œã€‚</p><p>éšç€æ•°æ®é›†å¤§å°çš„å¢åŠ å’Œéƒ¨ç½²éœ€æ±‚çš„å¢åŠ ï¼Œæ•ˆç‡æˆä¸ºä¸€ä¸ªé‡è¦çš„å…³æ³¨ç‚¹ã€‚</p><p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨åŸºäºåŒæµç½‘ç»œçš„æ–¹æ³•ï¼Œæˆ‘ä»¬éœ€è¦é¢„å…ˆè®¡ç®—å…‰æµå¹¶å­˜å‚¨åœ¨æœ¬åœ°ç£ç›˜ä¸Šã€‚ä»¥<code>Kinetics-400</code>æ•°æ®é›†ä¸ºä¾‹ï¼Œå­˜å‚¨æ‰€æœ‰å…‰æµå›¾åƒéœ€è¦ <code>4.5TB</code> çš„ç£ç›˜ç©ºé—´ã€‚å¦‚æ­¤åºå¤§çš„æ•°æ®é‡å°†ä½¿ <code>I/O</code> æˆä¸ºè®­ç»ƒè¿‡ç¨‹ä¸­æœ€ç´§å¼ çš„ç“¶é¢ˆï¼Œå¯¼è‡´ <code>GPU</code> èµ„æºçš„æµªè´¹å’Œå®éªŒå‘¨æœŸçš„å»¶é•¿ã€‚æ­¤å¤–ï¼Œé¢„è®¡ç®—å…‰æµå¹¶ä¸ä¾¿å®œï¼Œè¿™æ„å‘³ç€æ‰€æœ‰çš„åŒæµç½‘ç»œæ–¹æ³•éƒ½ä¸æ˜¯å®æ—¶çš„ã€‚</p><p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨åŸºäº 3D cnn çš„æ–¹æ³•ï¼Œäººä»¬ä»ç„¶å‘ç° 3D cnn è®­ç»ƒå›°éš¾ï¼Œéƒ¨ç½²å…·æœ‰æŒ‘æˆ˜æ€§ã€‚åœ¨è®­ç»ƒæ–¹é¢ï¼Œä½¿ç”¨é«˜ç«¯ 8-GPU æœºå™¨åœ¨ Kinetics400 æ•°æ®é›†ä¸Šè®­ç»ƒä¸€ä¸ªæ ‡å‡†çš„<code>Slow-Fast</code>ç½‘ç»œéœ€è¦ 10 å¤©æ‰èƒ½å®Œæˆã€‚å¦‚æ­¤æ¼«é•¿çš„å®éªŒå‘¨æœŸå’Œå·¨å¤§çš„è®¡ç®—æˆæœ¬ï¼Œä½¿å¾—è§†é¢‘ç†è§£ç ”ç©¶åªèƒ½é¢å‘æ‹¥æœ‰ä¸°å¯Œè®¡ç®—èµ„æºçš„å¤§å…¬å¸/å®éªŒå®¤ã€‚æœ€è¿‘æœ‰å‡ é¡¹ç§‘ç ”æˆæœå°è¯•åŠ é€Ÿæ·±åº¦è§†é¢‘æ¨¡å‹çš„è®­ç»ƒï¼Œä½†ä¸å¤§å¤šæ•°åŸºäºå›¾åƒçš„è®¡ç®—æœºè§†è§‰ä»»åŠ¡ç›¸æ¯”ï¼Œè¿™äº›ä»ç„¶æ˜¯æ˜‚è´µçš„ã€‚åœ¨éƒ¨ç½²æ–¹é¢ï¼Œ3D å·ç§¯åœ¨ä¸åŒå¹³å°ä¸Šçš„æ”¯æŒä¸å¦‚ 2D å·ç§¯ï¼Œ3D cnn éœ€è¦æ›´å¤šçš„è§†é¢‘å¸§ä½œä¸ºè¾“å…¥ï¼Œå¢åŠ äº†é¢å¤–çš„ IO æˆæœ¬ã€‚</p><p>ä¸Šè¿°é—®é¢˜çš„ä¸€ä¸ªå¯è¡Œçš„è§£å†³æ–¹æ¡ˆæ˜¯ç”¨ä¸€ç§<code>è¿‘ä¼¼å…‰æµ</code>çš„æ‰‹æ®µæ¥ä»£æ›¿å…‰æµï¼Œä»è€Œè®©æ¨¡å‹æœ‰èƒ½å¤Ÿå…·å¤‡é«˜æ•ˆæ¨ç†çš„æ½œåŠ›æ¥åº”ç”¨åˆ°å®æ—¶æ£€æµ‹é¢†åŸŸä¸­ã€‚</p><h2 id="å¤šå°ºåº¦è¾¹ç¼˜è¡¨å¾åŒæµç½‘ç»œ"><a class="header-anchor" href="#å¤šå°ºåº¦è¾¹ç¼˜è¡¨å¾åŒæµç½‘ç»œ">#</a>å¤šå°ºåº¦è¾¹ç¼˜è¡¨å¾åŒæµç½‘ç»œ</h2><center><!-- //onns.xyz/blog/image --><!-- ../image --><p><img src="//onns.xyz/blog/image/20201227-1.png" alt="è¾¹ç¼˜"></p></center><p>å›¾ B æ˜¯é€šè¿‡ EPE loss å¾—åˆ°çš„å…‰æµå›¾åƒ<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>ï¼Œå›¾ C æ˜¯é€šè¿‡å°†å…‰æµç½‘ç»œå’Œåˆ†ç±»ç½‘ç»œèåˆåè®­ç»ƒå¾—åˆ°çš„å¾®è°ƒå…‰æµå›¾åƒï¼Œåè€…åœ¨åˆ†ç±»å‡†ç¡®ç‡ä¸Šå…·æœ‰æ›´å¥½çš„æ•ˆæœã€‚</p><p>é€šè¿‡å¯è§†åŒ–å›¾ B å’Œå›¾ C ä¹‹é—´çš„å·®è·ï¼Œå¯ä»¥çœ‹å‡º<strong>è¿åŠ¨çš„è¾¹ç•Œ</strong>å¯¹äºè¿åŠ¨çš„è¡¨ç¤ºèµ·åˆ°äº†å¾ˆé‡è¦çš„ä½œç”¨ï¼Œæ•…<strong>å¯ä»¥ç”¨å›¾åƒè¾¹ç¼˜çš„è¿åŠ¨</strong>æ¥ä½œä¸ºå…‰æµçš„ä¸€ç§æ›¿ä»£æ–¹æ¡ˆã€‚</p><center><!-- //onns.xyz/blog/image --><!-- ../image --><p><img src="//onns.xyz/blog/image/20201227-2.png" alt="è¾¹ç¼˜è®¡ç®—"></p></center><p>ç»™å®šç›¸é‚»å¸§çš„è¾“å…¥ï¼Œé¦–å…ˆé€šè¿‡ä¸€ä¸ªå·ç§¯ç¥ç»ç½‘ç»œæ¥æå–è¾¹ç¼˜ç‰¹å¾ï¼Œç„¶åé€šè¿‡è®¡ç®—è¾¹ç¼˜çš„å·®å¼‚æ¥è¡¨å¾è¿åŠ¨ä¿¡æ¯ï¼Œä½œä¸ºåŒæµè¾“å…¥ä¸­çš„â€œå…‰æµâ€åˆ†æ”¯ã€‚</p><h3 id="å¤šå°ºåº¦è¿åŠ¨è¾¹ç¼˜è¡¨å¾"><a class="header-anchor" href="#å¤šå°ºåº¦è¿åŠ¨è¾¹ç¼˜è¡¨å¾">#</a>å¤šå°ºåº¦è¿åŠ¨è¾¹ç¼˜è¡¨å¾</h3><center><!-- //onns.xyz/blog/image --><!-- ../image --><p><img src="//onns.xyz/blog/image/20201227-4.jpeg" alt="å¤šå°ºåº¦è¿åŠ¨è¾¹ç¼˜è¡¨å¾"></p></center><p>åœ¨å®é™…çš„è¿åŠ¨è¡¨å¾ä¸­ï¼Œä¼šå‡ºç°ç›¸é‚»ä¸¤å¸§ä¹‹é—´çš„è¿åŠ¨å¹…åº¦éå¸¸å°çš„æƒ…å†µï¼Œè€Œå•çº¯å¢åŠ é‡‡æ ·é—´éš”ä¹Ÿä¼šå¯¹é‚£äº›ç›¸é‚»ä¸¤å¸§ä¹‹é—´å˜åŒ–å¤§çš„è§†é¢‘é€ æˆå½±å“ï¼ŒåŒæ—¶ä¹Ÿéš¾ä»¥å¯¹å¸§æ•°è¾ƒå°‘çš„è§†é¢‘è¿›è¡Œæè¿°ï¼Œæ•…é‡‡ç”¨ä¸€ç§å¤šå°ºåº¦çš„è¿åŠ¨è¾¹ç¼˜è¡¨å¾ä½œä¸ºç½‘ç»œçš„è¾“å…¥ã€‚</p><h3 id="å¤šé€šé“ä¿¡æ¯èåˆ"><a class="header-anchor" href="#å¤šé€šé“ä¿¡æ¯èåˆ">#</a>å¤šé€šé“ä¿¡æ¯èåˆ</h3><center><!-- //onns.xyz/blog/image --><!-- ../image --><p><img src="//onns.xyz/blog/image/20201227-5.jpeg" alt="å¤šé€šé“ä¿¡æ¯èåˆ"></p></center><h3 id="æ•°æ®å¢å¼º"><a class="header-anchor" href="#æ•°æ®å¢å¼º">#</a>æ•°æ®å¢å¼º</h3><p>ç”±äºè§†é¢‘æ•°æ®çš„ç‰¹æ®Šæ€§ï¼Œä¸€äº›å¸¸ç”¨çš„å¯¹äºå›¾åƒè¾“å…¥çš„æ•°æ®å¢å¼ºæ“ä½œéƒ½éš¾ä»¥åº”ç”¨åˆ°è§†é¢‘è¾“å…¥ä¸­ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œå¯¹äºå®šä¹‰â€œå–æ°´â€ã€â€œéª‘è‡ªè¡Œè½¦â€ç­‰ç‰¹å®šåŠ¨ä½œçš„æ•°æ®é›†è€Œè¨€ï¼Œä¾ç„¶å¯ä»¥é€šè¿‡<strong>æ°´å¹³ç¿»è½¬</strong>è¿™ç±»å‹çš„æ•°æ®å¢å¼ºæ‰‹æ®µï¼Œä½†å¯¹äº<code>Something-Something</code>è¿™ç±»æ•°æ®é›†è€Œè¨€ï¼Œâ€œæŠŠç‰©ä½“ä»å·¦ä¾§æ‹¿åˆ°å³ä¾§â€çš„æ°´å¹³ç¿»è½¬å°±ä¼šå½±å“åˆ°æœ€ç»ˆçš„å®éªŒç»“æœã€‚æ•…åœ¨æ­¤æ•°æ®é›†ä¸Šèƒ½å¤ŸåŠ å…¥çš„æ•°æ®å¢å¼ºæ“ä½œä»…ä»…åªæœ‰<strong>å°ºåº¦æŠ–åŠ¨</strong>ï¼Œå³ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GroupMultiScaleCrop(self.input_size, [<span class="number">1</span>, <span class="number">.875</span>, <span class="number">.75</span>, <span class="number">.66</span>])</span><br></pre></td></tr></table></figure><p>æ—¢ç„¶æ—¶åºä¿¡æ¯åœ¨è¡Œä¸ºè¯†åˆ«çš„åˆ†ç±»ä¸Šèµ·åˆ°äº†éå¸¸é‡è¦çš„ä½œç”¨ï¼Œä¸€ä¸ªå¯èƒ½çš„æ•°æ®å¢å¼ºæ‰‹æ®µæ˜¯å°†è§†é¢‘çš„å¸§é€†åºè¾“å…¥ä½œä¸ºä¸€ä¸ªæ–°çš„åˆ†æ”¯ï¼Œæœ€ååŒæµåˆ†æ”¯ä¸­çš„åŠ¨ä½œåˆ†æ”¯ç»“æœç”±ä¸¤ä¸ªæ—¶åºåˆ†æ”¯ç»“æœåŠ æƒå¾—åˆ°ã€‚</p><table><thead><tr><th style="text-align:center">No</th><th style="text-align:center">Method</th><th style="text-align:center">Backbone</th><th style="text-align:center">Frame</th><th style="text-align:center">FLOPs Ã— views</th><th style="text-align:center">Val Top1</th><th style="text-align:center">Val Top5</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">Baseline</td><td style="text-align:center">-</td><td style="text-align:center">8+8Ã—4</td><td style="text-align:center">67.7G Ã— 1</td><td style="text-align:center">50.5</td><td style="text-align:center">79.2</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center"><strong>+ reverse</strong></td><td style="text-align:center">-</td><td style="text-align:center">8+8Ã—4</td><td style="text-align:center">-</td><td style="text-align:center"><strong>51.54</strong></td><td style="text-align:center"><strong>79.86</strong></td></tr></tbody></table><h3 id="å®éªŒç»“æœ"><a class="header-anchor" href="#å®éªŒç»“æœ">#</a>å®éªŒç»“æœ</h3><table><thead><tr><th style="text-align:center">No</th><th style="text-align:center">Method</th><th style="text-align:center">Backbone</th><th style="text-align:center">Frame</th><th style="text-align:center">FLOPs Ã— views</th><th style="text-align:center">Val Top1</th><th style="text-align:center">Val Top5</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">Baseline</td><td style="text-align:center">-</td><td style="text-align:center">8+8Ã—4</td><td style="text-align:center">67.7G Ã— 1</td><td style="text-align:center">50.5</td><td style="text-align:center">79.2</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">+ ms</td><td style="text-align:center">-</td><td style="text-align:center">8+8Ã—4</td><td style="text-align:center">-</td><td style="text-align:center">50.72</td><td style="text-align:center">79.48</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center">+ mc</td><td style="text-align:center">-</td><td style="text-align:center">8+8Ã—4</td><td style="text-align:center">-</td><td style="text-align:center">51.93</td><td style="text-align:center">80.15</td></tr><tr><td style="text-align:center">4</td><td style="text-align:center"><strong>+ ms + mc</strong></td><td style="text-align:center">-</td><td style="text-align:center">8+8Ã—4</td><td style="text-align:center">-</td><td style="text-align:center"><strong>52.44</strong></td><td style="text-align:center"><strong>80.35</strong></td></tr><tr><td style="text-align:center">5</td><td style="text-align:center">Baseline</td><td style="text-align:center">-</td><td style="text-align:center">(8+8Ã—4)x2</td><td style="text-align:center">(46.6G+88.4G) x 2</td><td style="text-align:center">53.4</td><td style="text-align:center">81.1</td></tr><tr><td style="text-align:center">6</td><td style="text-align:center">+ ms</td><td style="text-align:center">-</td><td style="text-align:center">(8+8Ã—4)x2</td><td style="text-align:center">-</td><td style="text-align:center">53.77</td><td style="text-align:center">81.43</td></tr><tr><td style="text-align:center">7</td><td style="text-align:center"><strong>+ ms + mc</strong></td><td style="text-align:center">-</td><td style="text-align:center">(8+8Ã—4)x2</td><td style="text-align:center">-</td><td style="text-align:center"><strong>54.80</strong></td><td style="text-align:center"><strong>82.55</strong></td></tr></tbody></table><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>EPE æ˜¯ä¸€ç§å¯¹å…‰æµé¢„æµ‹é”™è¯¯ç‡çš„ä¸€ç§è¯„ä¼°æ–¹å¼ã€‚æŒ‡æ‰€æœ‰åƒç´ ç‚¹çš„ gound truth å’Œé¢„æµ‹å‡ºæ¥çš„å…‰æµä¹‹é—´å·®åˆ«è·ç¦»ï¼ˆæ¬§æ°è·ç¦»ï¼‰çš„å¹³å‡å€¼ã€‚ <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> report </tag>
            
            <tag> lab406 </tag>
            
            <tag> è¡Œä¸ºè¯†åˆ« </tag>
            
            <tag> action recognition </tag>
            
            <tag> interim report </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>A Comprehensive Study of Deep Video Action Recognition</title>
      <link href="/blog/2020/12/26/a-comprehensive-study-of-deep-video-action-recognition/"/>
      <url>/blog/2020/12/26/a-comprehensive-study-of-deep-video-action-recognition/</url>
      
        <content type="html"><![CDATA[<h1 id="a-comprehensive-study-of-deep-video-action-recognition"><a class="header-anchor" href="#a-comprehensive-study-of-deep-video-action-recognition">#</a>A Comprehensive Study of Deep Video Action Recognition</h1><p>2020 å¹´ 12 æœˆçš„æ–°è®ºæ–‡ï¼Œäºšé©¬é€Šææ²å›¢é˜Ÿæå‡ºï¼Œè¡Œä¸ºè¯†åˆ«çš„å…¨é¢è°ƒç ”ï¼ˆ2014-2020ï¼‰ã€‚</p><a id="more"></a><p>æœ€è¿‘åå¹´çš„æ•°æ®é›†ï¼š</p><center><!-- //onns.xyz/blog/image --><!-- ../image --><p><img src="//onns.xyz/blog/image/20201226-1.png" alt="æ•°æ®é›†"></p></center><p>è¡Œä¸ºè¯†åˆ«ç ”ç©¶åˆ†ä¸ºä¸‰ä¸ªå¤§ä½“çš„è¶‹åŠ¿ï¼š</p><center><!-- //onns.xyz/blog/image --><!-- ../image --><p><img src="//onns.xyz/blog/image/20201226-2.png" alt="æ—¶é—´çº¿"></p></center><p>ä¸Šæ–¹çš„åŒæµ/2D å·ç§¯å’Œä¸‹æ–¹çš„ 3D å·ç§¯ã€‚</p><p>è¿˜æœ‰ä¸€æ¡éšè—çš„çº¿æ˜¯æé«˜è®¡ç®—æ•ˆç‡ï¼Œä½¿ä¹‹é€‚ç”¨äºæ›´å¤§çš„æ•°æ®é›†ï¼Œä»è€Œåœ¨å®é™…åº”ç”¨ä¸­å¾—åˆ°åº”ç”¨ã€‚</p><p><code>UCF101</code>å’Œ<code>Kinetics400</code>åŸºæœ¬ä¸Šå¯ä»¥é€šè¿‡åœºæ™¯å’Œå†…å®¹æ¥æ¨æ–­å‡ºåˆ†ç±»ç»“æœã€‚</p><p><code>Something-Something</code>æ•°æ®é›†éœ€è¦å¼ºå¤§çš„æ—¶é—´å»ºæ¨¡ï¼Œå› ä¸ºå¤§å¤šæ•°æ´»åŠ¨ä¸èƒ½ä»…åŸºäºç©ºé—´ç‰¹å¾æ¥æ¨æ–­ã€‚è¯¥æ•°æ®é›†ä¸­äºäººä¸å¯¹è±¡çš„äº¤äº’ï¼Œå› æ­¤å®ƒæ›´ç»†ç²’åº¦ï¼Œéœ€è¦å¼ºå¤§çš„æ—¶é—´å»ºæ¨¡ã€‚</p><h2 id="æŒ‘æˆ˜"><a class="header-anchor" href="#æŒ‘æˆ˜">#</a>æŒ‘æˆ˜</h2><p>ä»æ•°æ®é›†è§’åº¦ï¼Œä¸ºè®­ç»ƒè¡Œä¸ºè¯†åˆ«çš„æ¨¡å‹å®šä¹‰æ ‡ç­¾ç©ºé—´æ˜¯ä¸€é¡¹å¾ˆå¤§çš„æŒ‘æˆ˜ï¼Œå› ä¸ºä¸€é¡¹åŠ¨ä½œå¯èƒ½ç”±ä¸åŒçš„äººä¼šç”±ä¸åŒçš„å®šä¹‰ï¼ˆæ¯”å¦‚æ‹¿èµ·æ¯å­å’Œå–æ°´ï¼‰ã€‚é™¤æ­¤ä¹‹å‰ï¼Œå¯¹è§†é¢‘è¿›è¡Œçš„è¡Œä¸ºè¿›è¡Œæ ‡æ³¨æ˜¯<code>è´¹åŠ›çš„</code>ï¼ˆä½ å¿…é¡»è§‚çœ‹æ‰€æœ‰çš„å¸§ï¼‰å’Œ<code>æ¨¡ç³Šçš„</code>ï¼ˆä¸€ä¸ªåŠ¨ä½œä»€ä¹ˆæ—¶å€™é…¸ç»“æŸï¼Œè¿™ä¸ªæ˜¯å¾ˆéš¾å®šä¹‰çš„ï¼‰ã€‚è¿˜æœ‰ä¸€ä¸ªåŸå› ï¼Œåƒ<code>Kinetics</code>æ•°æ®é›†åªç»™äº†è§†é¢‘é“¾æ¥ï¼Œå…¶ä¸­å¾ˆå¤§ä¸€éƒ¨åˆ†çš„æ•°æ®å·²ç»è¢«åˆ é™¤æˆ–è€…ä¸å¯è®¿é—®ï¼Œå¤§å®¶å¾ˆéš¾åœ¨åŒä¸€ä¸ªåŸºå‡†ä¸Šåšå®éªŒã€‚</p><p>ä»å»ºæ¨¡è§’åº¦ï¼Œäººç±»çš„è¡Œä¸ºåŠ¨ä½œå…·æœ‰å¾ˆå¼ºçš„ç±»å†…å’Œç±»é—´å·®å¼‚ï¼Œç¬¬äºŒï¼Œè¯†åˆ«äººç±»è¡Œä¸ºéœ€è¦åŒæ—¶ç†è§£çŸ­æœŸç‰¹å®šåŠ¨ä½œçš„è¿åŠ¨ä¿¡æ¯å’Œé•¿æœŸæ—¶é—´ä¿¡æ¯ã€‚ç¬¬ä¸‰ï¼Œè®­ç»ƒå’Œæ¨ç†çš„è®¡ç®—æˆæœ¬éƒ½å¾ˆé«˜ï¼Œé˜»ç¢äº†åŠ¨ä½œè¯†åˆ«æ¨¡å‹çš„å¼€å‘å’Œéƒ¨ç½²ã€‚</p><h2 id="å²è¯—"><a class="header-anchor" href="#å²è¯—">#</a>å²è¯—</h2><p>æ‰€æœ‰çš„æ•…äº‹éƒ½ä¼šæ˜¯ä»<code>DT</code>å’Œ<code>iDT</code>å¼€å§‹è®²ï¼Œä½†æ˜¯å®ƒçš„ç¼ºç‚¹ï¼šæ‰‹å·¥åˆ¶ä½œçš„ç‰¹æ€§è®¡ç®—æˆæœ¬å¾ˆé«˜ï¼Œè€Œä¸”éš¾ä»¥æ‰©å±•å’Œéƒ¨ç½²ã€‚</p><p><code>DeepVideo</code>ç®—æ˜¯è¿™ä¸€æ´¾çš„å¼€å±±ç¥–å¸ˆï¼Œä¸è¿‡æ•ˆæœå¹¶ä¸å¦‚ä¸Šé¢è¯´çš„æ‰‹å·¥è®¾è®¡çš„ç‰¹å¾ï¼ˆåœ¨<code>UCF101</code>æ•°æ®é›†ä¸Š <strong>65.4%</strong> vs <strong>87.9%</strong>ï¼‰ã€‚ä¸è¿‡<code>DeepVideo</code>å‘ç°ï¼Œä¸€ä¸ªç”±å•ä¸ªè§†é¢‘å¸§æ‰€è®­ç»ƒçš„ç½‘ç»œï¼Œåœ¨è¾“å…¥è¢«æ”¹å˜ä¸ºä¸€ç»„å¸§æ—¶ï¼ŒåŒæ ·è¡¨ç°è‰¯å¥½ã€‚è¿™å…¶å®è¡¨æ˜å…¶å®ç½‘ç»œå¹¶æ²¡æœ‰å¾ˆå¥½å¾—æ•æ‰åŠ¨ä½œä¿¡æ¯ã€‚è¿™å…¶å®ä¹Ÿé¼“åŠ±äººä»¬æ€è€ƒï¼Œä¸ºä»€ä¹ˆå·ç§¯ç¥ç»ç½‘ç»œæ¨¡å‹ä¸åƒå…¶ä»–è®¡ç®—æœºè§†è§‰ä»»åŠ¡ä¸€æ ·ï¼Œåœ¨è§†é¢‘é¢†åŸŸçš„è¡¨ç°æ²¡æœ‰è¶…è¿‡ä¼ ç»Ÿæ‰‹å·¥åˆ¶ä½œçš„ç‰¹å¾ã€‚</p><h3 id="two-stream-networks"><a class="header-anchor" href="#two-stream-networks">#</a>Two-stream networks</h3><p>ç”±äºè§†é¢‘çš„ç›´è§‚ç†è§£éœ€è¦è¿åŠ¨ä¿¡æ¯ï¼Œå¯»æ‰¾åˆé€‚çš„æ–¹å¼æ¥æè¿°å¸§é—´çš„æ—¶é—´å…³ç³»å¯¹äºæé«˜åŸºäºå·ç§¯ç¥ç»ç½‘ç»œçš„è§†é¢‘åŠ¨ä½œè¯†åˆ«çš„æ€§èƒ½è‡³å…³é‡è¦ã€‚</p><p>ä¸ä½¿ç”¨åŸå§‹ RGB å›¾åƒä½œä¸ºè¾“å…¥ç›¸æ¯”ï¼Œå…‰æµå¯ä»¥æœ‰æ•ˆåœ°å»é™¤é™æ­¢èƒŒæ™¯ï¼Œä»è€Œä½¿å­¦ä¹ é—®é¢˜æ›´åŠ ç®€å•ã€‚</p><p>åŒæµæ³•å¾—å‡ºäº†ä¸¤ä¸ªé‡è¦çš„ç»“è®ºï¼š</p><ol><li>è¿åŠ¨ä¿¡æ¯æ˜¯è§†é¢‘åŠ¨ä½œè¯†åˆ«çš„é‡è¦å†…å®¹ã€‚</li><li>å¯¹äº CNN æ¥è¯´ï¼Œç›´æ¥ä»åŸå§‹è§†é¢‘å¸§ä¸­å­¦ä¹ æ—¶é—´ä¿¡æ¯ä»ç„¶å…·æœ‰æŒ‘æˆ˜æ€§ã€‚</li></ol><p>å› ä¸ºåœ¨ä¸€ä¸ªåŒæµç½‘ç»œä¸­æœ‰ä¸¤ä¸ªæµã€‚å°†ä¼šæœ‰ä¸€ä¸ªé˜¶æ®µï¼Œéœ€è¦åˆå¹¶ä¸¤ä¸ªç½‘ç»œçš„ç»“æœï¼Œä»¥è·å¾—æœ€ç»ˆçš„é¢„æµ‹ã€‚è¿™ä¸€é˜¶æ®µé€šå¸¸ç§°ä¸ºæ—¶ç©ºèåˆæ­¥éª¤ã€‚</p><p>æœ€ç®€å•ã€æœ€ç›´æ¥çš„æ–¹æ³•æ˜¯<code>late fusion</code>ã€‚å®ƒå¯¹æ¥è‡ªä¸¤ä¸ªä¿¡æ¯æµçš„é¢„æµ‹è¿›è¡ŒåŠ æƒå¹³å‡ã€‚å°½ç®¡åæœŸèåˆè¢«å¹¿æ³›é‡‡ç”¨ï¼Œä½†è®¸å¤šç ”ç©¶äººå‘˜è®¤ä¸ºï¼Œè¿™å¯èƒ½ä¸æ˜¯èåˆç©ºé—´å¤–è§‚æµå’Œæ—¶é—´è¿åŠ¨æµä¿¡æ¯çš„æœ€ä½³æ–¹å¼ã€‚ä»–ä»¬ç›¸ä¿¡ï¼Œåœ¨æ¨¡å‹å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œä¸¤ä¸ªç½‘ç»œä¹‹é—´æ—©æœŸçš„äº’åŠ¨å¯ä»¥ä½¿ä¸¤ä¸ªæµéƒ½å—ç›Šï¼Œè¿™è¢«ç§°ä¸ºæ—©æœŸèåˆï¼Œå³<code>early fusion</code>ã€‚</p><p>ï¼ˆ20201227 æ›´æ–°ï¼šLSTM æˆ‘ä¸€çªä¸é€šï¼Œæ‰€ä»¥çœç•¥ï¼‰</p><h4 id="åŸºäºåˆ†æ®µçš„æ–¹æ³•"><a class="header-anchor" href="#åŸºäºåˆ†æ®µçš„æ–¹æ³•">#</a>åŸºäºåˆ†æ®µçš„æ–¹æ³•</h4><p><code>TSN</code>åœ¨æ¯ä¸ªç‰‡æ®µä¸­éšæœºé€‰æ‹©ä¸€ä¸ªè§†é¢‘å¸§ï¼Œæœ€åï¼Œåˆ†æ®µä¸€è‡´æ€§è¢«æ‰§è¡Œä»¥èšåˆæ¥è‡ªé‡‡æ ·è§†é¢‘å¸§çš„ä¿¡æ¯ã€‚<code>TSN</code>èƒ½å¤Ÿå¯¹é•¿æœŸæ—¶é—´ç»“æ„è¿›è¡Œå»ºæ¨¡ï¼Œå› ä¸ºæ¨¡å‹å¯ä»¥çœ‹åˆ°æ•´ä¸ªè§†é¢‘çš„å†…å®¹ã€‚æ­¤å¤–ï¼Œè¿™ç§ç¨€ç–é‡‡æ ·ç­–ç•¥é™ä½äº†é•¿è§†é¢‘åºåˆ—çš„è®­ç»ƒæˆæœ¬ï¼Œä½†ä¿ç•™äº†ç›¸å…³ä¿¡æ¯ã€‚</p><h4 id="å¤šæµç½‘ç»œ"><a class="header-anchor" href="#å¤šæµç½‘ç»œ">#</a>å¤šæµç½‘ç»œ</h4><p>åŒæµç½‘ç»œä¹‹æ‰€ä»¥æˆåŠŸï¼Œæ˜¯å› ä¸ºè§†é¢‘çš„<code>å¤–è§‚</code>å’Œ<code>è¿åŠ¨ä¿¡æ¯</code>æ˜¯ä¸¤ä¸ªæœ€é‡è¦çš„å±æ€§ã€‚ä½†è¿˜æœ‰ä¸€äº›å…¶å®ƒçš„å¯¹è¡Œä¸ºè¯†åˆ«æœ‰å¸®åŠ©çš„ä¿¡æ¯ï¼Œæ¯”å¦‚<code>å§¿æ€</code>ã€<code>ç‰©ä½“</code>ã€<code>å£°éŸ³</code>æˆ–è€…<code>æ·±åº¦ä¿¡æ¯</code>ç­‰ã€‚</p><h3 id="ä¸‰ç»´å·ç§¯ç¥ç»ç½‘ç»œ"><a class="header-anchor" href="#ä¸‰ç»´å·ç§¯ç¥ç»ç½‘ç»œ">#</a>ä¸‰ç»´å·ç§¯ç¥ç»ç½‘ç»œ</h3><p><code>C3D</code>åœ¨æ ‡å‡†åŸºå‡†ä¸Šçš„æ€§èƒ½å¹¶ä¸ä»¤äººæ»¡æ„ï¼Œä½†æ˜¾ç¤ºå‡ºå¾ˆå¼ºçš„æ³›åŒ–èƒ½åŠ›ï¼Œå¯ä»¥ä½œä¸ºå„ç§è§†é¢‘ä»»åŠ¡çš„é€šç”¨ç‰¹å¾æå–å™¨ã€‚</p><p>ç„¶è€Œï¼Œ3D ç½‘ç»œå¾ˆéš¾ä¼˜åŒ–ã€‚ä¸ºäº†æ›´å¥½åœ°è®­ç»ƒä¸€ä¸ª 3D å·ç§¯æ»¤æ³¢å™¨ï¼Œäººä»¬éœ€è¦ä¸€ä¸ªåŒ…å«ä¸åŒè§†é¢‘å†…å®¹å’ŒåŠ¨ä½œç±»åˆ«çš„å¤§è§„æ¨¡æ•°æ®é›†ã€‚</p><p>ç„¶è€Œï¼ŒC3D çš„è®­ç»ƒéœ€è¦å‡ å‘¨çš„æ—¶é—´æ¥æ”¶æ•›ã€‚å°½ç®¡ C3D å¾ˆå—æ¬¢è¿ï¼Œä½†å¤§å¤šæ•°ç”¨æˆ·åªæ˜¯å°†å…¶ä½œä¸ºä¸åŒç”¨ä¾‹çš„ç‰¹å¾æå–å™¨ï¼Œè€Œä¸æ˜¯ä¿®æ”¹/å¾®è°ƒç½‘ç»œã€‚</p><p><code>I3D</code>æ”¹å˜äº†è¿™ä¸€ç°è±¡ï¼Œå®ƒçš„ä¸»è¦è´¡çŒ®ç‚¹æœ‰ä¸¤ä¸ªï¼š</p><ol><li>ç”¨æˆç†Ÿçš„å›¾åƒåˆ†ç±»ä½“ç³»ç”¨äº 3D CNNã€‚</li><li>å¯¹äºæ¨¡å‹æƒå€¼ï¼Œé‡‡ç”¨ã€Towards Good Practices for Very Deep Two-Stream ConvNetsã€‘ä¸­åˆå§‹åŒ–å…‰æµç½‘ç»œçš„æ–¹æ³•ï¼Œå°† ImageNet é¢„å…ˆè®­ç»ƒå¥½çš„ 2D æ¨¡å‹æƒå€¼è†¨èƒ€åˆ° 3D æ¨¡å‹ä¸­çš„å¯¹åº”æ¨¡å‹ã€‚</li></ol><p>ä¸‰ç»´å·ç§¯ç¥ç»ç½‘ç»œå¹¶ä¸ä¼šå–ä»£åŒæµç½‘ç»œï¼Œå®ƒä»¬ä¹Ÿä¸æ˜¯ç›¸äº’æ’æ–¥çš„ã€‚</p><h4 id="ç»Ÿä¸€äºŒç»´å’Œä¸‰ç»´å·ç§¯ç¥ç»ç½‘ç»œ"><a class="header-anchor" href="#ç»Ÿä¸€äºŒç»´å’Œä¸‰ç»´å·ç§¯ç¥ç»ç½‘ç»œ">#</a>ç»Ÿä¸€äºŒç»´å’Œä¸‰ç»´å·ç§¯ç¥ç»ç½‘ç»œ</h4><p><code>P3D</code>å’Œ<code>R2+1D</code> éƒ½æ˜¯æŠŠ<code>3x3x3</code>çš„å·ç§¯æ ¸æ›¿æ¢æˆäº†<code>3x1x1</code>å’Œ<code>1x3x3</code>çš„å·ç§¯æ ¸æ¥å‡å°‘è®¡ç®—é‡ã€‚</p><p>é™¤æ­¤ä¹‹å¤–è¿˜æœ‰åˆ«çš„æ–¹æ³•ç›´æ¥å°†<code>2D</code>å’Œ<code>3D</code>å·ç§¯åœ¨ä¸€ä¸ªç½‘ç»œé‡Œè¿›è¡Œäº†æ··åˆã€‚</p><p>åœ¨ç½‘ç»œçš„åº•éƒ¨ä½¿ç”¨äºŒç»´å·ç§¯æ ¸æ›¿ä»£ä¸‰ç»´å·ç§¯æ ¸ï¼Œå‘ç°è¿™ç§å¤´é‡è„šè½»çš„ç½‘ç»œå…·æœ‰æ›´é«˜çš„è¯†åˆ«ç²¾åº¦ã€‚</p><p>ï¼ˆ<code>non-local</code>æ˜¯åŒºåˆ«äºå·ç§¯æ ¸å·å±€éƒ¨çš„æ¦‚å¿µè€Œæå‡ºçš„ï¼Œä½†æ˜¯è¿™ä¸ªæ–¹å‘æˆ‘æ²¡æœ‰ç ”ç©¶ï¼Œæ‰€ä»¥ä¹Ÿç•¥è¿‡ã€‚ï¼‰</p><h4 id="æå‡ä¸‰ç»´å·ç§¯çš„æ•ˆç‡"><a class="header-anchor" href="#æå‡ä¸‰ç»´å·ç§¯çš„æ•ˆç‡">#</a>æå‡ä¸‰ç»´å·ç§¯çš„æ•ˆç‡</h4><p>éšç€é«˜æ•ˆ 2D ç½‘ç»œçš„å‘å±•ï¼Œç ”ç©¶è€…ä»¬å¼€å§‹é‡‡ç”¨<code>åŸºäºä¿¡é“çš„å¯åˆ†å·ç§¯</code>ï¼Œå¹¶å°†å…¶æ‰©å±•åˆ°è§†é¢‘åˆ†ç±»ä¸­ã€‚</p><h3 id="é«˜æ•ˆè§†é¢‘å»ºæ¨¡"><a class="header-anchor" href="#é«˜æ•ˆè§†é¢‘å»ºæ¨¡">#</a>é«˜æ•ˆè§†é¢‘å»ºæ¨¡</h3><p>éšç€æ•°æ®é›†å¤§å°çš„å¢åŠ å’Œéƒ¨ç½²éœ€æ±‚çš„å¢åŠ ï¼Œæ•ˆç‡æˆä¸ºä¸€ä¸ªé‡è¦çš„å…³æ³¨ç‚¹ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨åŸºäºåŒæµç½‘ç»œçš„æ–¹æ³•ï¼Œæˆ‘ä»¬éœ€è¦é¢„å…ˆè®¡ç®—å…‰æµå¹¶å­˜å‚¨åœ¨æœ¬åœ°ç£ç›˜ä¸Šã€‚ä»¥<code>Kinetics-400</code>æ•°æ®é›†ä¸ºä¾‹ï¼Œå­˜å‚¨æ‰€æœ‰å…‰æµå›¾åƒéœ€è¦ 4.5TB çš„ç£ç›˜ç©ºé—´ã€‚å¦‚æ­¤åºå¤§çš„æ•°æ®é‡å°†ä½¿ I/O æˆä¸ºè®­ç»ƒè¿‡ç¨‹ä¸­æœ€ç´§å¼ çš„ç“¶é¢ˆï¼Œå¯¼è‡´ GPU èµ„æºçš„æµªè´¹å’Œå®éªŒå‘¨æœŸçš„å»¶é•¿ã€‚æ­¤å¤–ã€‚é¢„è®¡ç®—å…‰æµå¹¶ä¸ä¾¿å®œï¼Œè¿™æ„å‘³ç€æ‰€æœ‰çš„åŒæµç½‘ç»œæ–¹æ³•éƒ½ä¸æ˜¯å®æ—¶çš„ã€‚</p><p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨åŸºäº 3D cnn çš„æ–¹æ³•ï¼Œäººä»¬ä»ç„¶å‘ç° 3D cnn è®­ç»ƒå›°éš¾ï¼Œéƒ¨ç½²å…·æœ‰æŒ‘æˆ˜æ€§ã€‚åœ¨è®­ç»ƒæ–¹é¢ï¼Œä½¿ç”¨é«˜ç«¯ 8-GPU æœºå™¨åœ¨ Kinetics400 æ•°æ®é›†ä¸Šè®­ç»ƒä¸€ä¸ªæ ‡å‡†çš„<code>Slow-Fast</code>ç½‘ç»œéœ€è¦ 10 å¤©æ‰èƒ½å®Œæˆã€‚å¦‚æ­¤æ¼«é•¿çš„å®éªŒå‘¨æœŸå’Œå·¨å¤§çš„è®¡ç®—æˆæœ¬ï¼Œä½¿å¾—è§†é¢‘ç†è§£ç ”ç©¶åªèƒ½é¢å‘æ‹¥æœ‰ä¸°å¯Œè®¡ç®—èµ„æºçš„å¤§å…¬å¸/å®éªŒå®¤ã€‚æœ€è¿‘æœ‰å‡ æ¬¡å°è¯•åŠ é€Ÿæ·±åº¦è§†é¢‘æ¨¡å‹çš„è®­ç»ƒï¼Œä½†ä¸å¤§å¤šæ•°åŸºäºå›¾åƒçš„è®¡ç®—æœºè§†è§‰ä»»åŠ¡ç›¸æ¯”ï¼Œè¿™äº›ä»ç„¶æ˜¯æ˜‚è´µçš„ã€‚</p><p>åœ¨éƒ¨ç½²æ–¹é¢ï¼Œ3D å·ç§¯åœ¨ä¸åŒå¹³å°ä¸Šçš„æ”¯æŒä¸å¦‚ 2D å·ç§¯ï¼Œ3D cnn éœ€è¦æ›´å¤šçš„è§†é¢‘å¸§ä½œä¸ºè¾“å…¥ï¼Œå¢åŠ äº†é¢å¤–çš„ IO æˆæœ¬ã€‚</p><h4 id="ç±»å…‰æµç®—æ³•"><a class="header-anchor" href="#ç±»å…‰æµç®—æ³•">#</a>ç±»å…‰æµç®—æ³•</h4><p>åŒæµç½‘ç»œçš„ä¸€ä¸ªä¸»è¦ç¼ºç‚¹æ˜¯å¯¹å…‰æµçš„éœ€æ±‚ã€‚é¢„è®¡ç®—å…‰æµçš„è®¡ç®—æˆæœ¬é«˜ï¼Œå­˜å‚¨è¦æ±‚é«˜ï¼Œè€Œä¸”ä¸èƒ½å¯¹è§†é¢‘åŠ¨ä½œè¯†åˆ«è¿›è¡Œç«¯åˆ°ç«¯è®­ç»ƒã€‚å¦‚æœæˆ‘ä»¬èƒ½æ‰¾åˆ°ä¸€ç§ä¸ç”¨å…‰æµæ¥ç¼–ç è¿åŠ¨ä¿¡æ¯çš„æ–¹æ³•ï¼Œé‚£å°†æ˜¯å¾ˆæœ‰å¸å¼•åŠ›çš„ã€‚è‡³å°‘åœ¨æ¨ç†æ—¶é—´ã€‚</p><p><code>PAN</code>é€šè¿‡è®¡ç®—è¿ç»­ç‰¹å¾å›¾ä¹‹é—´çš„å·®å¼‚ã€‚</p><h2 id="æœªæ¥ç ”ç©¶æ–¹å‘"><a class="header-anchor" href="#æœªæ¥ç ”ç©¶æ–¹å‘">#</a>æœªæ¥ç ”ç©¶æ–¹å‘</h2><ol><li>æ¨¡å‹åˆ†æå’Œå¯è§†åŒ–</li><li><strong>æ•°æ®å¢å¼º</strong></li><li>è§†é¢‘é¢†åŸŸè‡ªé€‚åº”ï¼ˆè¿ç§»å­¦ä¹ ï¼‰</li><li>ç¥ç»ç»“æ„æœç´¢</li><li><strong>é«˜æ•ˆçš„æ¨¡å‹å¼€å‘</strong></li><li>æ–°æ•°æ®é›†</li><li><strong>è§†é¢‘å¯¹æŠ—æ”»å‡»</strong></li><li><strong>é›¶æ ·æœ¬åŠ¨ä½œè¯†åˆ«</strong></li><li>å¼±ç›‘ç£çš„è§†é¢‘åŠ¨ä½œè¯†åˆ«</li><li>ç»†ç²’åº¦è§†é¢‘åŠ¨ä½œè¯†åˆ«</li><li>ä»¥è‡ªæˆ‘ä¸ºä¸­å¿ƒçš„è¡Œä¸ºè¯†åˆ«</li><li>å¤šæ¨¡æ€</li><li><strong>è‡ªç›‘ç£è§†é¢‘è¡¨ç¤ºå­¦ä¹ </strong></li></ol>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¡Œä¸ºè¯†åˆ« </tag>
            
            <tag> action recognition </tag>
            
            <tag> review </tag>
            
            <tag> survey </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Diverse Temporal Aggregation and Depthwise Spatiotemporal Factorization for Efficient Video Classification</title>
      <link href="/blog/2020/12/19/diverse-temporal-aggregation-and-depthwise-spatiotemporal-factorization-for-efficient-video-classification/"/>
      <url>/blog/2020/12/19/diverse-temporal-aggregation-and-depthwise-spatiotemporal-factorization-for-efficient-video-classification/</url>
      
        <content type="html"><![CDATA[<h1 id="diverse-temporal-aggregation-and-depthwise-spatiotemporal-factorization-for-efficient-video-classification"><a class="header-anchor" href="#diverse-temporal-aggregation-and-depthwise-spatiotemporal-factorization-for-efficient-video-classification">#</a>Diverse Temporal Aggregation and Depthwise Spatiotemporal Factorization for Efficient Video Classification</h1><p>2020å¹´12æœˆçš„æ–°è®ºæ–‡ï¼Œå¯ä»¥å½“ä½œæ˜¯å½“å‰çš„ä¸€ç¯‡ç»¼è¿°ã€‚</p><a id="more"></a><h2 id="ä»‹ç»"><a class="header-anchor" href="#ä»‹ç»">#</a>ä»‹ç»</h2><p>æœ€è¿‘çš„å·¥ä½œå¤§è‡´ä¸Šæœ‰STMã€TEAã€TSMç­‰ï¼Œéƒ½æ˜¯åœ¨2D ResNetä¸Šæ·»åŠ æ¨¡å—ã€‚</p><p>ç”±äºä»¥å¾€çš„å·¥ä½œéƒ½æ˜¯åœ¨éª¨å¹²ç½‘ä¹‹ä¸Šçš„æ’ä»¶å¼æ¨¡å—ï¼Œå› æ­¤å—åˆ°éª¨å¹²ç½‘çš„çº¦æŸã€‚</p><blockquote><p>In short, since previous works are add on style modules on top of the backbone network, they are<br>constrained under the backbone.</p></blockquote><p>è¿™äº›ä¸‰ç»´é«˜æ•ˆç½‘ç»œåªå…³æ³¨äºç½‘ç»œç»“æ„ï¼ˆä¸Šå‡å°‘è®¡ç®—ï¼‰ï¼Œè€Œæ²¡æœ‰è€ƒè™‘æ—¶é—´å»ºæ¨¡ã€‚</p><blockquote><p>these 3D efficient networks only focus on building architectures and do not consider the temporal modeling.</p></blockquote><h2 id="ç›¸å…³å·¥ä½œ"><a class="header-anchor" href="#ç›¸å…³å·¥ä½œ">#</a>ç›¸å…³å·¥ä½œ</h2><h2 id="vov3d"><a class="header-anchor" href="#vov3d">#</a>VoV3D</h2><p>æ—¶é—´å»ºæ¨¡åœ¨åŠ¨ä½œè¯†åˆ«ä¸­èµ·ç€é‡è¦çš„ä½œç”¨ã€‚ç‰¹åˆ«æ˜¯åœ¨ç¼ºä¹ç‰¹å¾è¯­ä¹‰å˜åŒ–çš„è§†é¢‘æƒ…å†µä¸‹ï¼Œè§†é¢‘åˆ†ç±»ç½‘ç»œåº”è¯¥ä¸¥é‡ä¾èµ–äºè§†è§‰èŠ‚å¥ã€‚æ­¤å¤–ï¼Œæœ‰å¿…è¦å¯¹é•¿æœŸå’ŒçŸ­æœŸçš„æ—¶é—´å…³ç³»å»ºæ¨¡ï¼Œå› ä¸ºçŸ­æœŸä¿¡æ¯ä¸è¶³ä»¥åŒºåˆ†è§†è§‰èŠ‚å¥å˜åŒ–ï¼Œå¦‚æ­¥è¡Œå’Œè·‘æ­¥ã€‚ä¼ ç»Ÿçš„åŸºäº3D CNNçš„æ—¶é—´å»ºæ¨¡æ–¹æ³•[4,36,35]è¯•å›¾é€šè¿‡è¾“å…¥(å¸§æˆ–ç‰¹å¾çº§é‡‘å­—å¡”)æ¥å»ºæ¨¡è§†è§‰èŠ‚å¥ã€‚</p><p>ç„¶è€Œï¼Œè¿™äº›æ–¹æ³•ä½œä¸ºä¸€ä¸ªå¤–éƒ¨(å³æ’ä»¶)æ¨¡å—ï¼Œå¿…é¡»åœ¨ç°æœ‰çš„3Déª¨å¹²ç½‘(å¦‚I3D[311]ï¼Œè¿™éœ€è¦æ›´å¤šçš„å‚æ•°å’Œè®¡ç®—)çš„åŸºç¡€ä¸Šæ·»åŠ å•ç‹¬çš„ç½‘ç»œã€‚ä¸ºäº†è§£å†³è¿™äº›æŒ‘æˆ˜ï¼Œåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯æå‡ºä¸€ç§è½»é‡çº§ã€é«˜æ•ˆçš„è§†é¢‘éª¨å¹²ç½‘ï¼Œå®ƒæœ¬èº«å…·æœ‰æ—¶é—´å»ºæ¨¡èƒ½åŠ›ï¼Œä¸éœ€è¦å¤–éƒ¨æ¨¡å—ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬åŸºäºVoVNet[15,16]è®¾è®¡äº†ä¸€ç§æ–°çš„ä¸‰ç»´CNNæ¶æ„ï¼Œè¯¥æ¶æ„ä»¥è¾ƒå°çš„æˆæœ¬è¡¨è¾¾äº†å±‚æ¬¡åŒ–å’Œå¤šæ ·åŒ–çš„ç‰¹å¾è¡¨ç¤ºã€‚</p><h3 id="vovnet"><a class="header-anchor" href="#vovnet">#</a>VoVNet</h3><p>DenseNetçš„æœ€å¼€å§‹æƒ³æ³•æ˜¯å½“å‰çš„layerä¼šæŠŠå½“å‰çš„æ‰€æœ‰layerå±‚çš„è¾“å‡ºéƒ½æ•´åˆåœ¨ä¸€èµ·ã€‚</p><p>DenseNetçš„ä¸€å¤§é—®é¢˜å°±æ˜¯å¯†é›†è¿æ¥å¤ªé‡äº†ï¼Œè€Œä¸”æ¯ä¸ªlayeréƒ½ä¼šèšåˆå‰é¢å±‚çš„ç‰¹å¾ï¼Œå…¶å®é€ æˆçš„æ˜¯ç‰¹å¾å†—ä½™ï¼Œè€Œä¸”ä»æ¨¡å‹weightsçš„L1èŒƒæ•°ä¼šå‘ç°ä¸­é—´å±‚å¯¹æœ€åçš„åˆ†ç±»å±‚è´¡çŒ®è¾ƒå°‘ï¼Œè¿™ä¸éš¾ç†è§£ï¼Œå› ä¸ºåé¢çš„ç‰¹å¾å…¶å®å·²ç»å­¦ä¹ åˆ°äº†è¿™äº›ä¸­é—´å±‚çš„æ ¸å¿ƒä¿¡æ¯ã€‚è¿™ç§ä¿¡æ¯å†—ä½™åè€Œæ˜¯å¯ä»¥ä¼˜åŒ–çš„æ–¹å‘ï¼Œæ®æ­¤è¿™é‡Œæå‡ºäº†OSAï¼ˆOne-Shot Aggregationï¼‰æ¨¡å—ï¼Œå¦‚å›¾1bæ‰€ç¤ºï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯åªåœ¨æœ€åä¸€æ¬¡æ€§èšåˆå‰é¢æ‰€æœ‰çš„layerã€‚è¿™ä¸€æ”¹åŠ¨å°†ä¼šè§£å†³DenseNetå‰é¢æ‰€è¿°çš„é—®é¢˜ï¼Œå› ä¸ºæ¯ä¸ªlayerçš„è¾“å…¥channelæ•°æ˜¯å›ºå®šçš„ï¼Œè¿™é‡Œå¯ä»¥è®©è¾“å‡ºchannelæ•°å’Œè¾“å…¥ä¸€è‡´è€Œå–å¾—æœ€å°çš„MACï¼Œè€Œä¸”ä¹Ÿä¸å†éœ€è¦1x1å·ç§¯å±‚æ¥å‹ç¼©ç‰¹å¾ï¼Œæ‰€ä»¥OSAæ¨¡å—æ˜¯GPUè®¡ç®—é«˜æ•ˆçš„ã€‚</p><p>æ‰€ä»¥VoVNetåœ¨æœ€åä¸€å±‚æ±‡é›†å‰é¢çš„æ‰€æœ‰è¾“å…¥ï¼Œä¹Ÿè¾¾åˆ°ç›¸ä¼¼çš„æ•ˆæœã€‚</p><blockquote><p>The OSA allows the network to represent diverse features by capturing multiple receptive fields in one feature map, which results in the effect of feature pyramid.</p></blockquote><h3 id="temporal-oneshot-aggregation-t-osa"><a class="header-anchor" href="#temporal-oneshot-aggregation-t-osa">#</a>Temporal OneShot Aggregation (T-OSA)</h3><h2 id="å‚è€ƒé“¾æ¥"><a class="header-anchor" href="#å‚è€ƒé“¾æ¥">#</a>å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://blog.csdn.net/xiaohu2022/article/details/105318534/" target="_blank" rel="noopener">VoVNetï¼šå®æ—¶ç›®æ ‡æ£€æµ‹çš„æ–°backboneç½‘ç»œ</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¡Œä¸ºè¯†åˆ« </tag>
            
            <tag> action recognition </tag>
            
            <tag> vov3d </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æŠŠngrokæœåŠ¡é…ç½®æˆservice</title>
      <link href="/blog/2020/12/14/run-ngrok-as-a-service/"/>
      <url>/blog/2020/12/14/run-ngrok-as-a-service/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a class="header-anchor" href="#å‰è¨€">#</a>å‰è¨€</h2><p>ä¸Šæ¬¡è¯´çš„ï¼š<a href="https://onns.xyz/blog/2020/12/09/ngrok-doc/">æ”¹å¤©ä¸€å®šçœ‹å¦‚ä½•æŠŠè‡ªå·±çš„ä»£ç åšæˆ<code>service</code>ï¼ï¼ï¼ï¼</a>ï¼Œè¿™æ¬¡æ¥å®ç°äº†ï¼Œç¢°å·§ç”¨åˆ°äº†ã€‚</p><a id="more"></a><h2 id="å¥½å¤„"><a class="header-anchor" href="#å¥½å¤„">#</a>å¥½å¤„</h2><p>åšæˆç³»ç»Ÿçš„<code>service</code>ä¹‹åï¼Œå¯ä»¥ç³»ç»Ÿå¸®ä½ ç»´æŠ¤ï¼ŒæœåŠ¡æ„å¤–é€€å‡ºä¹Ÿä¼šå¸®ä½ é‡å¯ï¼Œè¿™é‡Œçœ‹æˆ‘å·²ç»åšå¥½çš„ä¾‹å­ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">onns@onns-desktop:~$ ps -ef | grep ng</span><br><span class="line">root          39       2  0 18:15 ?        00:00:00 [khungtaskd]</span><br><span class="line">avahi        559       1  0 18:15 ?        00:00:03 avahi-daemon: running [onns-desktop.local]</span><br><span class="line">root         680       1  0 18:15 ?        00:00:08 /home/onns/Desktop/ngrok -config /home/onns/Desktop/ngrok.cfg start win ssh</span><br><span class="line">onns       36635       1  0 18:31 ?        00:00:00 /usr/bin/gnome-keyring-daemon --daemonize --login</span><br><span class="line">onns       36643   19483  0 18:31 pts/1    00:00:00 grep --color=auto ng</span><br><span class="line">onns@onns-desktop:~$ sudo <span class="built_in">kill</span> 680</span><br></pre></td></tr></table></figure><p><code>680</code>æ˜¯æˆ‘éšç³»ç»Ÿå¯åŠ¨çš„è¿›ç¨‹ IDï¼Œç„¶åæˆ‘æŠŠè¿™ä¸ªè¿›ç¨‹å…³é—­äº†ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">onns@onns-desktop:~$ ps -ef | grep ng</span><br><span class="line">root          39       2  0 18:15 ?        00:00:00 [khungtaskd]</span><br><span class="line">avahi        559       1  0 18:15 ?        00:00:04 avahi-daemon: running [onns-desktop.local]</span><br><span class="line">root       37616       1  6 18:31 ?        00:00:00 /home/onns/Desktop/ngrok -config /home/onns/Desktop/ngrok.cfg start win ssh</span><br><span class="line">onns       38015       1  0 18:31 ?        00:00:00 /usr/bin/gnome-keyring-daemon --daemonize --login</span><br><span class="line">onns       38023   37825  0 18:31 pts/1    00:00:00 grep --color=auto ng</span><br></pre></td></tr></table></figure><p>ç³»ç»Ÿè‡ªåŠ¨å¸®æˆ‘å¯åŠ¨äº†ï¼Œæ¢äº†ä¸€ä¸ªè¿›ç¨‹å·<code>37616</code>ã€‚</p><p>ç¬¬äºŒä¸ªå¥½å¤„ä¹Ÿåœ¨å‰é¢è¯´äº†ï¼Œå°±æ˜¯å¯ä»¥å¼€æœºè‡ªå¯ï¼é…åˆç€ bios ä¸»æ¿è®¾ç½®çš„é€šç”µå¼€æœºï¼Œå¯ä»¥ä¿è¯æ¯”å¦‚å®éªŒå®¤çªç„¶æ–­ç”µäº†ä¹‹åï¼Œå†æ¬¡æ¥ç”µä¹‹åç”µè„‘å¯ä»¥è‡ªåŠ¨å¼€æœºï¼Œå¯’å‡å›å®¶ä¹Ÿä¸ç”¨æ‹…å¿ƒå®éªŒå®¤çªç„¶æ–­ç”µäº†ï¼</p><h2 id="é…ç½®-service"><a class="header-anchor" href="#é…ç½®-service">#</a>é…ç½® service</h2><p>ä¹‹å‰ä¸€ç›´è§‰å¾—é…ç½®èµ·æ¥æ˜¯ä¸€ä»¶å¾ˆéº»çƒ¦çš„äº‹æƒ…ï¼Œæ‰€ä»¥ä¸€ç›´æ²¡å¼„ï¼Œæ²¡æƒ³åˆ°åŸæ¥è¿™ä¹ˆç®€å•ï¼</p><h3 id="æŸ¥çœ‹æ ¹è¿›ç¨‹"><a class="header-anchor" href="#æŸ¥çœ‹æ ¹è¿›ç¨‹">#</a>æŸ¥çœ‹æ ¹è¿›ç¨‹</h3><p>æ‰€è°“çš„æ ¹è¿›ç¨‹ï¼Œå°±æ˜¯ Linux ç³»ç»Ÿå¯åŠ¨åçš„ç¬¬ä¸€ä¸ªè¿›ç¨‹ï¼Œ<code>PID</code>æ˜¯ 1ã€‚ä¹‹å‰æ˜¯<code>init.d</code>ï¼Œåé¢å¤§å®¶éƒ½æ¨èç”¨<code>systemd</code>ï¼Œè¿™ä¸¤ä¸ªæœ‰ä¸¤å¥—ä¸åŒçš„å‘½ä»¤ï¼Œè¦å…ˆçœ‹ä¸€ä¸‹æ˜¯å“ªä¸ªï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">onns@onns-desktop:~/Desktop$ pstree</span><br><span class="line">systemdâ”€â”¬â”€ModemManagerâ”€â”€â”€2*[&#123;ModemManager&#125;]</span><br><span class="line">        â”œâ”€NetworkManagerâ”€â”€â”€2*[&#123;NetworkManager&#125;]</span><br><span class="line">        â”œâ”€accounts-daemonâ”€â”€â”€2*[&#123;accounts-daemon&#125;]</span><br><span class="line">        â”œâ”€avahi-daemonâ”€â”€â”€avahi-daemon</span><br><span class="line">        â”œâ”€bluetoothd</span><br><span class="line">        â”œâ”€cron</span><br><span class="line">        â”œâ”€cups-browsedâ”€â”€â”€2*[&#123;cups-browsed&#125;]</span><br><span class="line">        â”œâ”€cupsd</span><br><span class="line">        â”œâ”€dbus-daemon</span><br><span class="line">        â”œâ”€7*[gdm-session-worâ”€â”€â”€2*[&#123;gdm-session-wor&#125;]]</span><br><span class="line">        â”œâ”€gdm3â”€â”¬â”€gdm-session-worâ”€â”¬â”€gdm-wayland-sesâ”€â”¬â”€dbus-run-sessioâ”€â”¬â”€dbus-daemon</span><br><span class="line">        â”‚      â”‚                 â”‚                 â”‚                 â””â”€gnome-session-bâ”€â”€â”€4*[&#123;gnome-session-b&#125;]</span><br><span class="line">        â”‚      â”‚                 â”‚                 â””â”€2*[&#123;gdm-wayland-ses&#125;]</span><br><span class="line">        â”‚      â”‚                 â””â”€2*[&#123;gdm-session-wor&#125;]</span><br><span class="line">        â”‚      â””â”€3*[&#123;gdm3&#125;]</span><br><span class="line">        â”œâ”€hciattach</span><br><span class="line">        â”œâ”€irqbalanceâ”€â”€â”€&#123;irqbalance&#125;</span><br><span class="line">        â”œâ”€2*[kerneloops]</span><br><span class="line">        â”œâ”€networkd-dispat</span><br><span class="line">        â”œâ”€ngrokâ”€â”€â”€5*[&#123;ngrok&#125;]</span><br><span class="line">        â”œâ”€polkitdâ”€â”€â”€2*[&#123;polkitd&#125;]</span><br><span class="line">        â”œâ”€rsyslogdâ”€â”€â”€3*[&#123;rsyslogd&#125;]</span><br><span class="line">        â”œâ”€rtkit-daemonâ”€â”€â”€2*[&#123;rtkit-daemon&#125;]</span><br><span class="line">        â”œâ”€snapdâ”€â”€â”€17*[&#123;snapd&#125;]</span><br><span class="line">        â”œâ”€sshdâ”€â”€â”€sshdâ”€â”€â”€bashâ”€â”€â”€pstree</span><br><span class="line">        â”œâ”€sshd</span><br><span class="line">        â”œâ”€switcheroo-contâ”€â”€â”€2*[&#123;switcheroo-cont&#125;]</span><br><span class="line">        â”œâ”€systemdâ”€â”¬â”€(sd-pam)</span><br><span class="line">        â”‚         â”œâ”€dbus-daemon</span><br><span class="line">        â”‚         â”œâ”€goa-daemonâ”€â”€â”€3*[&#123;goa-daemon&#125;]</span><br><span class="line">        â”‚         â”œâ”€goa-identity-seâ”€â”€â”€2*[&#123;goa-identity-se&#125;]</span><br><span class="line">        â”‚         â”œâ”€gvfs-afc-volumeâ”€â”€â”€3*[&#123;gvfs-afc-volume&#125;]</span><br><span class="line">        â”‚         â”œâ”€gvfs-goa-volumeâ”€â”€â”€2*[&#123;gvfs-goa-volume&#125;]</span><br><span class="line">        â”‚         â”œâ”€gvfs-gphoto2-voâ”€â”€â”€2*[&#123;gvfs-gphoto2-vo&#125;]</span><br><span class="line">        â”‚         â”œâ”€gvfs-mtp-volumeâ”€â”€â”€2*[&#123;gvfs-mtp-volume&#125;]</span><br><span class="line">        â”‚         â”œâ”€gvfs-udisks2-voâ”€â”€â”€3*[&#123;gvfs-udisks2-vo&#125;]</span><br><span class="line">        â”‚         â”œâ”€gvfsdâ”€â”€â”€2*[&#123;gvfsd&#125;]</span><br><span class="line">        â”‚         â”œâ”€gvfsd-fuseâ”€â”€â”€5*[&#123;gvfsd-fuse&#125;]</span><br><span class="line">        â”‚         â”œâ”€tracker-miner<span class="_">-f</span>â”€â”€â”€6*[&#123;tracker-miner<span class="_">-f</span>&#125;]</span><br><span class="line">        â”‚         â””â”€tracker-storeâ”€â”€â”€4*[&#123;tracker-store&#125;]</span><br><span class="line">        â”œâ”€systemdâ”€â”¬â”€(sd-pam)</span><br><span class="line">        â”‚         â”œâ”€dbus-daemon</span><br><span class="line">        â”‚         â”œâ”€goa-daemonâ”€â”€â”€3*[&#123;goa-daemon&#125;]</span><br><span class="line">        â”‚         â”œâ”€goa-identity-seâ”€â”€â”€2*[&#123;goa-identity-se&#125;]</span><br><span class="line">        â”‚         â”œâ”€gvfs-afc-volumeâ”€â”€â”€3*[&#123;gvfs-afc-volume&#125;]</span><br><span class="line">        â”‚         â”œâ”€gvfs-goa-volumeâ”€â”€â”€2*[&#123;gvfs-goa-volume&#125;]</span><br><span class="line">        â”‚         â”œâ”€gvfs-gphoto2-voâ”€â”€â”€2*[&#123;gvfs-gphoto2-vo&#125;]</span><br><span class="line">        â”‚         â”œâ”€gvfs-mtp-volumeâ”€â”€â”€2*[&#123;gvfs-mtp-volume&#125;]</span><br><span class="line">        â”‚         â”œâ”€gvfs-udisks2-voâ”€â”€â”€3*[&#123;gvfs-udisks2-vo&#125;]</span><br><span class="line">        â”‚         â”œâ”€gvfsdâ”€â”€â”€2*[&#123;gvfsd&#125;]</span><br><span class="line">        â”‚         â”œâ”€gvfsd-fuseâ”€â”€â”€5*[&#123;gvfsd-fuse&#125;]</span><br><span class="line">        â”‚         â”œâ”€gvfsd-metadataâ”€â”€â”€2*[&#123;gvfsd-metadata&#125;]</span><br><span class="line">        â”‚         â””â”€tracker-miner<span class="_">-f</span>â”€â”€â”€4*[&#123;tracker-miner<span class="_">-f</span>&#125;]</span><br><span class="line">        â”œâ”€systemd-journal</span><br><span class="line">        â”œâ”€systemd-logind</span><br><span class="line">        â”œâ”€systemd-resolve</span><br><span class="line">        â”œâ”€systemd-timesynâ”€â”€â”€&#123;systemd-timesyn&#125;</span><br><span class="line">        â”œâ”€systemd-udevd</span><br><span class="line">        â”œâ”€udisksdâ”€â”€â”€4*[&#123;udisksd&#125;]</span><br><span class="line">        â”œâ”€unattended-upgrâ”€â”€â”€&#123;unattended-upgr&#125;</span><br><span class="line">        â”œâ”€upowerdâ”€â”€â”€2*[&#123;upowerd&#125;]</span><br><span class="line">        â”œâ”€whoopsieâ”€â”€â”€2*[&#123;whoopsie&#125;]</span><br><span class="line">        â””â”€wpa_supplicant</span><br></pre></td></tr></table></figure><p>ä¸€èˆ¬æ–°ç³»ç»Ÿéƒ½æ˜¯<code>systemd</code>ï¼Œå°±ä»¥å®ƒä¸ºä¾‹äº†ã€‚</p><h3 id="åˆ›å»º-service-æ–‡ä»¶"><a class="header-anchor" href="#åˆ›å»º-service-æ–‡ä»¶">#</a>åˆ›å»º service æ–‡ä»¶</h3><p><code>service</code>å¯ä»¥æ”¾åœ¨<code>/etc/systemd/system/</code>ç›®å½•ä¸­ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">onns@onns-desktop:~/Desktop$ <span class="built_in">cd</span> /etc/systemd/system/</span><br><span class="line">onns@onns-desktop:/etc/systemd/system$ sudo vi ngrok.service</span><br></pre></td></tr></table></figure><p>æ–°å»ºäº†ä¸€ä¸ªåä¸º<code>ngrok.service</code>çš„æœåŠ¡ï¼Œè¿™ä¸ªå–å†³äºè‡ªå·±çš„æœåŠ¡åå­—å’¯ï¼Œå¯ä»¥<code>ls</code>çœ‹ä¸€ä¸‹ï¼Œä½ ä¼šå‘ç°ä¸€äº›å¸¸ç”¨çš„æ¯”å¦‚è¿œç¨‹è¿æ¥çš„<code>sshd.service</code>éƒ½åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹é‡Œã€‚</p><p>å¡«å†™å†…å®¹ä¸ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=ngrok</span><br><span class="line">After=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">ExecStart=/home/onns/Desktop/ngrok -config /home/onns/Desktop/ngrok.cfg start win ssh</span><br><span class="line">ExecReload=/bin/<span class="built_in">kill</span> -HUP <span class="variable">$MAINPID</span></span><br><span class="line">KillMode=process</span><br><span class="line">IgnoreSIGPIPE=<span class="literal">true</span></span><br><span class="line">Restart=always</span><br><span class="line">RestartSec=3</span><br><span class="line">Type=simple</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><p>è¿™é‡Œä¹Ÿæœ‰å¾ˆå¤šæˆ‘ä¸çŸ¥é“çš„å‚æ•°ï¼Œä¸è¿‡ç›®å‰æˆ‘è¿˜ç”¨ä¸ä¸Šï¼Œå®åœ¨æ²¡æ—¶é—´å»æŒ¨ä¸ªäº†è§£äº†ï¼Œä¸»è¦é…ç½®<code>Description</code>å’Œ<code>ExecStart</code>å°±è¡Œã€‚</p><p><code>Description</code>ï¼šå°±æ˜¯ç»™äººçœ‹çš„ï¼Œå‘Šè¯‰åˆ«äººä½ è¿™ä¸ª<code>service</code>æ˜¯å•¥ã€‚<br><code>After</code>ï¼šä¾èµ–æœåŠ¡ï¼Œå°±æ˜¯è¿™ä¸ªæœåŠ¡å¿…é¡»åœ¨å“ªäº›<code>service</code>è¿è¡Œä¹‹åæ‰èƒ½è¿è¡Œã€‚<br><code>ExecStart</code>ï¼šå°±æ‰§è¡Œè„šæœ¬å’¯ã€‚è¿™ä¸ªæ˜¯é‡ç‚¹ï¼<br><code>Restart</code>ï¼šé‡å¯ï¼Œå°±æ˜¯ä¸Šé¢è¯´çš„ï¼Œæ„å¤–ç»ˆæ­¢ç”±ç³»ç»Ÿå¸®ä½ é‡å¯ã€‚<br><code>RestartSec</code>ï¼šæ¯å¤šå°‘ç§’å°è¯•ä¸€æ¬¡ã€‚</p><h3 id="é…ç½®"><a class="header-anchor" href="#é…ç½®">#</a>é…ç½®</h3><p>å…¶å®è¿™ä¸ªæ—¶å€™å°±å¯ä»¥å¯åŠ¨ä½ åˆ›å»ºå¥½çš„æœåŠ¡äº†ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">onns@onns-desktop:/etc/systemd/system$ systemctl start ngrok.service</span><br><span class="line">==== AUTHENTICATING FOR org.freedesktop.systemd1.manage-units ===</span><br><span class="line">Authentication is required to start <span class="string">'ngrok.service'</span>.</span><br><span class="line">Authenticating as: onns,,, (onns)</span><br><span class="line">Password:</span><br><span class="line">==== AUTHENTICATION COMPLETE ===</span><br><span class="line">Warning: The unit file, <span class="built_in">source</span> configuration file or drop-ins of ngrok.service changed on disk. Run <span class="string">'systemctl daemon-reload'</span> to reload units.</span><br></pre></td></tr></table></figure><p>éœ€è¦å¯†ç éªŒè¯ï¼Œç„¶åæœ‰ä¸€å¥ç‰¹æ®Šæç¤ºï¼š</p><blockquote><p>Warning: The unit file, source configuration file or drop-ins of ngrok.service changed on disk. Run â€˜systemctl daemon-reloadâ€™ to reload units.</p></blockquote><p>æ‰€ä»¥å…¶å®è¦é‡æ–°åŠ è½½ä¸€ä¸‹ï¼ˆå› ä¸ºä½ æ¯•ç«Ÿæ·»åŠ äº†ä¸€ä¸ª<code>service</code>ï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">onns@onns-desktop:/etc/systemd/system$ systemctl daemon-reload</span><br><span class="line">==== AUTHENTICATING FOR org.freedesktop.systemd1.reload-daemon ===</span><br><span class="line">Authentication is required to reload the systemd state.</span><br><span class="line">Authenticating as: onns,,, (onns)</span><br><span class="line">Password:</span><br><span class="line">==== AUTHENTICATION COMPLETE ===</span><br></pre></td></tr></table></figure><p>ç„¶åå°±å¯ä»¥å¼€å¯æœåŠ¡äº†ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">onns@onns-desktop:/etc/systemd/system$ systemctl start ngrok.service</span><br><span class="line">==== AUTHENTICATING FOR org.freedesktop.systemd1.manage-units ===</span><br><span class="line">Authentication is required to start <span class="string">'ngrok.service'</span>.</span><br><span class="line">Authenticating as: onns,,, (onns)</span><br><span class="line">Password:</span><br><span class="line">==== AUTHENTICATION COMPLETE ===</span><br></pre></td></tr></table></figure><p>ç„¶åæŸ¥çœ‹è¿™ä¸ªæœåŠ¡çš„çŠ¶æ€ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">onns@onns-desktop:/etc/systemd/system$ systemctl status ngrok.service</span><br><span class="line">â— ngrok.service - ngrok</span><br><span class="line">     Loaded: loaded (/etc/systemd/system/ngrok.service; enabled; vendor preset: enabled)</span><br><span class="line">     Active: active (running) since Mon 2020-12-14 18:31:42 CST; 30min ago</span><br><span class="line">   Main PID: 37616 (ngrok)</span><br><span class="line">      Tasks: 6 (<span class="built_in">limit</span>: 8967)</span><br><span class="line">     CGroup: /system.slice/ngrok.service</span><br><span class="line">             â””â”€37616 /home/onns/Desktop/ngrok -config /home/onns/Desktop/ngrok.cfg start win ssh</span><br><span class="line"></span><br><span class="line">12æœˆ 14 18:31:42 onns-desktop systemd[1]: Started ngrok.</span><br></pre></td></tr></table></figure><p>åšå®¢çš„ä»£ç æ˜¯æ²¡æœ‰é¢œè‰²çš„ï¼Œå¯ä»¥å‡‘åˆç€çœ‹ä¸€ä¸‹ã€‚</p><p>ç„¶åæœ€é‡è¦çš„ä¸€æ­¥æ˜¯å¼€å¯<code>å¼€æœºå¯åŠ¨</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">onns@onns-desktop:/etc/systemd/system$ systemctl <span class="built_in">enable</span> ngrok.service</span><br><span class="line">==== AUTHENTICATING FOR org.freedesktop.systemd1.manage-unit-files ===</span><br><span class="line">Authentication is required to manage system service or unit files.</span><br><span class="line">Authenticating as: onns,,, (onns)</span><br><span class="line">Password:</span><br><span class="line">==== AUTHENTICATION COMPLETE ===</span><br><span class="line">==== AUTHENTICATING FOR org.freedesktop.systemd1.reload-daemon ===</span><br><span class="line">Authentication is required to reload the systemd state.</span><br><span class="line">Authenticating as: onns,,, (onns)</span><br><span class="line">Password:</span><br><span class="line">==== AUTHENTICATION COMPLETE ===</span><br></pre></td></tr></table></figure><h3 id="æ€»ç»“"><a class="header-anchor" href="#æ€»ç»“">#</a>æ€»ç»“</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ¶ä½œå¥½ .service æ–‡ä»¶ä¹‹å</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡è½½ä¸€ä¸‹serviceæ–‡ä»¶</span></span><br><span class="line">systemctl daemon-reload</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼€å¯æœåŠ¡å¼€æœºå¯åŠ¨</span></span><br><span class="line">systemctl <span class="built_in">enable</span> ngrok.service</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼€å¯æœåŠ¡</span></span><br><span class="line">systemctl start ngrok.service</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹æœåŠ¡çŠ¶æ€</span></span><br><span class="line">systemctl status ngrok.service</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒé“¾æ¥"><a class="header-anchor" href="#å‚è€ƒé“¾æ¥">#</a>å‚è€ƒé“¾æ¥</h2><p>çœ‹äº†å¥½å¤šé“¾æ¥ï¼Œå‘ç°éƒ½ä¸æ˜¯å¾ˆé€šç”¨ï¼Œåˆ°æ—¶å€™æœ€å¥½å»çœ‹çœ‹åˆ«äººæ€ä¹ˆå†™çš„ï¼Œç„¶å copy ä¸€ä¸‹</p><ul><li><a href="https://github.com/vincenthsu/systemd-ngrok" target="_blank" rel="noopener">vincenthsu / systemd-ngrok</a></li><li><a href="https://blog.csdn.net/zbc415766331/article/details/104761027" target="_blank" rel="noopener">Ubuntu18.04 æ·»åŠ è‡ªå¯åŠ¨ Service</a> è¿™ä¸ªé“¾æ¥çš„<code>ExecStart</code>ç›´æ¥å†™äº†ä¸€ä¸ª<code>.sh</code>æ–‡ä»¶ï¼Œæˆ‘ç¬¬ä¸€æ¬¡åæ­£æ˜¯å¤±è´¥äº†ã€‚</li><li><a href="https://blog.csdn.net/oxp7085915/article/details/78153190" target="_blank" rel="noopener">ngrok åå°è¿è¡Œ</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> ngrok </tag>
            
            <tag> service </tag>
            
            <tag> systemd </tag>
            
            <tag> bios </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ngrokæˆ‘ç»ˆäºæ‡‚äº†</title>
      <link href="/blog/2020/12/09/ngrok-doc/"/>
      <url>/blog/2020/12/09/ngrok-doc/</url>
      
        <content type="html"><![CDATA[<h2 id="20211006-æ›´æ–°"><a class="header-anchor" href="#20211006-æ›´æ–°">#</a>20211006 æ›´æ–°</h2><p>å¦‚æœåœ¨å¾ˆé«˜çš„ golang ç‰ˆæœ¬ä¸‹ç¼–è¯‘ä¼šæœ‰é—®é¢˜ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go env -w GO111MODULE=off</span><br></pre></td></tr></table></figure><h3 id="å‚è€ƒæ–‡æ¡£"><a class="header-anchor" href="#å‚è€ƒæ–‡æ¡£">#</a>å‚è€ƒæ–‡æ¡£</h3><ul><li><a href="https://www.jianshu.com/p/fc74f99ba9e2" target="_blank" rel="noopener">ngrok ç¼–è¯‘é‡åˆ°çš„å°å‘</a></li></ul><h2 id="20210107-æ›´æ–°"><a class="header-anchor" href="#20210107-æ›´æ–°">#</a>20210107 æ›´æ–°</h2><p>ä¸<code>TCP</code>åè®®ä¸åŒçš„æ˜¯ï¼Œngrok çš„ HTTP/HTTPS åè®®çš„ç«¯å£æ— æ³•é€šè¿‡<code>remote_port</code>å‚æ•°åœ¨å®¢æˆ·ç«¯æŒ‡å®šï¼Œè€Œæ˜¯åœ¨æœåŠ¡ç«¯é¢„å…ˆå·²ç»æŒ‡å®šå¥½çš„ï¼š<code>-httpAddr=&quot;:82&quot; -httpsAddr=&quot;:83&quot;</code>ã€‚</p><p>ngrok çš„ http åè®®é€šè¿‡ä¸åŒçš„å­åŸŸåæ¥åŒºåˆ«æœåŠ¡ç±»å‹ï¼Œæ‰€ä»¥é…ç½®æ–¹æ³•æ˜¯ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">nginx:</span></span><br><span class="line">  <span class="attr">subdomain:</span> <span class="string">"io"</span></span><br><span class="line">  <span class="attr">proto:</span></span><br><span class="line">    <span class="attr">http:</span> <span class="string">"192.168.1.119:80"</span></span><br></pre></td></tr></table></figure><h2 id="å‰è¨€"><a class="header-anchor" href="#å‰è¨€">#</a>å‰è¨€</h2><p>ä¹‹å‰é…<code>ngrok</code>çš„æ—¶å€™éƒ½æ˜¯çœ‹ç€æ•™ç¨‹ï¼Œxjb é…ï¼Œå› ä¸ºä¸€èˆ¬éƒ½æ˜¯<code>http</code>ï¼Œæ‰€ä»¥ä¹Ÿæ²¡é‚£ä¹ˆéº»çƒ¦ï¼Œè¿™æ¬¡ç»ˆäºä¸€æ¬¡æ€§æŠŠæ‰€æœ‰çš„å‘éƒ½è¸©å®Œäº†ã€‚ä¹‹ååº”è¯¥ä¸ä¼šæœ‰ä»»ä½•é—®é¢˜äº†ï¼<s>ï¼ˆä¸æ˜¯</s></p><p>å¤§éƒ¨åˆ†å†…å®¹ä¹‹å‰çš„æ–‡ç« ã€Š<a href="https://onns.xyz/blog/2020/08/17/intranet-penetration-use-ngrok/">ç”¨ ngrok è¿›è¡Œå†…ç½‘ç©¿é€</a>ã€‹é‡Œéƒ½æœ‰å†™ï¼Œå¯ä»¥äº’ç›¸å‚ç…§ã€‚</p><p><strong>ç”¨ç”Ÿæˆè¯ä¹¦çš„æ–¹å¼æˆ‘ä¸€ç›´è¿è¡Œå¤±è´¥ï¼Œæ‰€ä»¥å»ºè®®ç”¨æœºæ„é¢å‘çš„è¯ä¹¦ï¼Œé˜¿é‡Œäº‘æœ‰å…è´¹çš„å¯ä»¥ç”¨ã€‚</strong></p><a id="more"></a><h2 id="å®‰è£…"><a class="header-anchor" href="#å®‰è£…">#</a>å®‰è£…</h2><p>å®‰è£…ä¾èµ–ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install gcc mercurial git bzr subversion golang golang-pkg-windows-amd64 golang-pkg-windows-386 -y</span><br></pre></td></tr></table></figure><p>ä¸‹è½½ ngrok æºç ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/inconshreveable/ngrok.git ngrok</span><br></pre></td></tr></table></figure><p>è¯ä¹¦å°±ä¸ç”¨ç”Ÿæˆäº†ï¼Œç”Ÿæˆçš„ä¹Ÿç”¨ä¸äº†ï¼Œä¹‹å‰çš„<code>ngrok</code>ä¸æˆåŠŸå…¨æ˜¯å¡åœ¨è¿™é‡Œï¼Œç›´æ¥å»é˜¿é‡Œäº‘ç”³è¯·ï¼Œå…·ä½“ç™¾åº¦ã€‚</p><p>ç¼–è¯‘æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># LinuxæœåŠ¡ç«¯</span></span><br><span class="line">GOOS=linux GOARCH=amd64 make release-server</span><br><span class="line"><span class="comment"># Windowså®¢æˆ·ç«¯</span></span><br><span class="line">GOOS=windows GOARCH=amd64 make release-client</span><br></pre></td></tr></table></figure><p>å…¶å®ƒå‚æ•°ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># LinuxæœåŠ¡ç«¯/å®¢æˆ·ç«¯</span></span><br><span class="line"><span class="comment"># 32ä½</span></span><br><span class="line">GOOS=linux GOARCH=386 make release-server</span><br><span class="line">GOOS=linux GOARCH=386 make release-client</span><br><span class="line"><span class="comment"># 64ä½</span></span><br><span class="line">GOOS=linux GOARCH=amd64 make release-server</span><br><span class="line">GOOS=linux GOARCH=amd64 make release-client</span><br><span class="line"></span><br><span class="line"><span class="comment"># MacOSæœåŠ¡ç«¯/å®¢æˆ·ç«¯</span></span><br><span class="line">GOOS=darwin GOARCH=386 make release-server</span><br><span class="line">GOOS=darwin GOARCH=386 make release-client</span><br><span class="line"></span><br><span class="line">GOOS=darwin GOARCH=amd64 make release-server</span><br><span class="line">GOOS=darwin GOARCH=amd64 make release-client</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># WindowsæœåŠ¡ç«¯/å®¢æˆ·ç«¯</span></span><br><span class="line">GOOS=windows GOARCH=386 make release-server</span><br><span class="line">GOOS=windows GOARCH=386 make release-client</span><br><span class="line"></span><br><span class="line">GOOS=windows GOARCH=amd64 make release-server</span><br><span class="line">GOOS=windows GOARCH=amd64 make release-client</span><br></pre></td></tr></table></figure><p>æˆ‘æ˜¯ç”¨æ‰‹æœºåšæœåŠ¡å™¨ï¼Œä¹‹å‰ä»¥ä¸ºæ— è§£çš„ï¼Œæ²¡æƒ³åˆ°çœŸçš„æ”¯æŒ<code>arm</code>æ¶æ„çš„ï¼Œyydsï¼</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GOOS=linux GOARCH=arm make release-server</span><br><span class="line">GOOS=linux GOARCH=arm make release-client</span><br></pre></td></tr></table></figure><p>å°±æ˜¯ä¸çŸ¥é“<code>arm64</code>èƒ½ä¸èƒ½è¡Œï¼Œæœ‰æœºä¼šå†è¯•è¯•ã€‚</p><h2 id="è¿è¡Œ"><a class="header-anchor" href="#è¿è¡Œ">#</a>è¿è¡Œ</h2><p>è¦è¶…çº§ç®¡ç†å‘˜æƒé™æ‰è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./bin/ngrokd -domain=<span class="string">"ngrok.onns.xyz"</span> -httpAddr=<span class="string">":8000"</span> -httpsAddr=<span class="string">":4430"</span> -tlsKey=ng.key -tlsCrt=ng.pem</span><br></pre></td></tr></table></figure><p>è¿˜æœ‰ä¸€ä¸ªå‚æ•°æ˜¯<code>tunnelAddr</code>ï¼Œé»˜è®¤æ˜¯<code>4443</code>ï¼Œæ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯é€šä¿¡çš„ç«¯å£ã€‚</p><p><code>ng.key</code>å’Œ<code>ng.pem</code>æ˜¯ç”³è¯·çš„è¯ä¹¦ã€‚</p><p>æ²¡ä»€ä¹ˆé—®é¢˜çš„è¯ï¼Œå°±å¯ä»¥å¸¸é©»åå°äº†ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup ./bin/ngrokd -domain=<span class="string">"onns.xyz"</span> -httpAddr=<span class="string">":82"</span> -httpsAddr=<span class="string">":83"</span> &gt;&gt; /home/deploy/ngrok/a.txt 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure><p>æ”¹å¤©ä¸€å®šçœ‹å¦‚ä½•æŠŠè‡ªå·±çš„ä»£ç åšæˆ<code>service</code>ï¼ï¼ï¼ï¼</p><h2 id="å®¢æˆ·ç«¯é…ç½®"><a class="header-anchor" href="#å®¢æˆ·ç«¯é…ç½®">#</a>å®¢æˆ·ç«¯é…ç½®</h2><p>æ–°å»ºä¸€ä¸ª<code>ngrok.cfg</code>æ–‡ä»¶ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server_addr:</span> <span class="string">"ngrok.onns.xyz:4443"</span></span><br><span class="line"><span class="attr">trust_host_root_certs:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">tunnels:</span></span><br><span class="line">  <span class="attr">ssh:</span></span><br><span class="line">    <span class="attr">remote_port:</span> <span class="number">2222</span></span><br><span class="line">    <span class="attr">proto:</span></span><br><span class="line">      <span class="attr">tcp:</span> <span class="string">"22"</span></span><br><span class="line">  <span class="attr">mxy:</span></span><br><span class="line">    <span class="attr">remote_port:</span> <span class="number">2223</span></span><br><span class="line">    <span class="attr">proto:</span></span><br><span class="line">      <span class="attr">tcp:</span> <span class="string">"22"</span></span><br><span class="line">  <span class="attr">v2:</span></span><br><span class="line">    <span class="attr">remote_port:</span> <span class="number">9891</span></span><br><span class="line">    <span class="attr">proto:</span></span><br><span class="line">      <span class="attr">tcp:</span> <span class="string">"9891"</span></span><br><span class="line">  <span class="attr">win:</span></span><br><span class="line">    <span class="attr">remote_port:</span> <span class="number">33891</span></span><br><span class="line">    <span class="attr">proto:</span></span><br><span class="line">      <span class="attr">tcp:</span> <span class="string">"192.168.1.136:3389"</span></span><br></pre></td></tr></table></figure><p>ä¹‹å‰ä¸€ç›´ä»¥ä¸º<code>remote_port</code>æ˜¯éšæœºçš„ï¼ŒåŸæ¥å¯ä»¥æŒ‡å®šï¼Œå‚æ•°éƒ½å¾ˆæ¸…æ¥šï¼Œå°±ä¸ç”¨è§£é‡Šäº†ï¼</p><p>ç„¶åå¼€å¯æœåŠ¡ï¼Œå¯ä»¥åªå¼€å¯ä¸€éƒ¨åˆ†ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ngrok -config=ngrok.cfg start ssh win</span><br></pre></td></tr></table></figure><p>æˆ–è€…ç›´æ¥å¼€å¯æ‰€æœ‰æœåŠ¡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ngrok -config=ngrok.cfg start-all</span><br></pre></td></tr></table></figure><p>æ”¶å·¥ï¼Œç»ˆäºå¯ä»¥æŠ›å¼ƒ teamviewer äº†ï¼è‡ªå¸¦çš„è¿œç¨‹æ¡Œé¢æ˜¯çœŸçš„æµç•…ï¼ï¼ï¼</p><h2 id="å‚è€ƒé“¾æ¥"><a class="header-anchor" href="#å‚è€ƒé“¾æ¥">#</a>å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://blog.safebuff.com/2016/03/15/Run-Ngrok-on-Your-Own-Server/" target="_blank" rel="noopener">Run Ngrok on Your Own Server</a></li><li><a href="https://www.zdaiot.com/Linux/%E8%BD%AF%E4%BB%B6/Centos%E6%90%AD%E5%BB%BANgrok%E5%AE%9E%E7%8E%B0%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/" target="_blank" rel="noopener">Centos æ­å»º Ngrok å®ç°å†…ç½‘ç©¿é€</a></li><li><a href="https://zj-network-guide.readthedocs.io/zh_CN/latest/intranet-penetration/ngrok/%5Bngrok%5DTCP%E5%92%8CHTTP%E8%BF%9E%E6%8E%A5%E9%85%8D%E7%BD%AE/" target="_blank" rel="noopener">[ngrok]TCP å’Œ HTTP è¿æ¥é…ç½®Â¶</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> intranet penetration </tag>
            
            <tag> ngrok </tag>
            
            <tag> ssh </tag>
            
            <tag> å†…ç½‘ç©¿é€ </tag>
            
            <tag> arm </tag>
            
            <tag> remote desktop </tag>
            
            <tag> http </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DTç®—æ³•æºç é˜…è¯»â€”â€”è½¨è¿¹ç­›é€‰éƒ¨åˆ†</title>
      <link href="/blog/2020/12/08/dt-source-code-check-trajectory/"/>
      <url>/blog/2020/12/08/dt-source-code-check-trajectory/</url>
      
        <content type="html"><![CDATA[<p>é†‰äº†ï¼Œå†™ç»¼è¿°çœ‹å‡ åé¡µçš„åŸè®ºæ–‡ä¹Ÿå°±ç®—äº†ï¼Œè®ºæ–‡é‡Œå±…ç„¶æ²¡æŠŠé—®é¢˜è¡¨è¾¾æ¸…æ¥šï¼Œè¿˜å¥½æºç å¼€æºäº†ï¼Œä¸ç„¶éƒ½ä¸çŸ¥é“åˆ°æ—¶å€™æ€ä¹ˆ si çš„ã€‚</p><a id="more"></a><p>åŸæ–‡æ˜¯ï¼š</p><blockquote><p>As static trajectories do not contain motion information, we prune them in a post-processing stage. Trajectories with sudden large displacements, most likely to be erroneous, are also removed. Such trajectories are detected, if the displacement vector between two consecutive frames is larger than 70% of the overall displacement of the trajectory.</p></blockquote><p>ä»£ç å¼€æºåœ¨ï¼š<a href="http://lear.inrialpes.fr/people/wang/dense_trajectories" target="_blank" rel="noopener">Dense Trajectories Video Description</a>ã€‚</p><p>å…¶ä¸­çš„è½¨è¿¹ç­›é€‰æºç åœ¨<code>#include &quot;Descriptors.h&quot;</code>ä¸­ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// check whether a trajectory is valid or not</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">IsValid</span><span class="params">(<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;Point2f&gt;&amp; track, <span class="keyword">float</span>&amp; mean_x, <span class="keyword">float</span>&amp; mean_y, <span class="keyword">float</span>&amp; var_x, <span class="keyword">float</span>&amp; var_y, <span class="keyword">float</span>&amp; length)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> size = track.size();</span><br><span class="line"><span class="keyword">float</span> norm = <span class="number">1.</span>/size;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line">mean_x += track[i].x;</span><br><span class="line">mean_y += track[i].y;</span><br><span class="line">&#125;</span><br><span class="line">mean_x *= norm;</span><br><span class="line">mean_y *= norm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line"><span class="keyword">float</span> temp_x = track[i].x - mean_x;</span><br><span class="line"><span class="keyword">float</span> temp_y = track[i].y - mean_y;</span><br><span class="line">var_x += temp_x*temp_x;</span><br><span class="line">var_y += temp_y*temp_y;</span><br><span class="line">&#125;</span><br><span class="line">var_x *= norm;</span><br><span class="line">var_y *= norm;</span><br><span class="line">var_x = <span class="built_in">sqrt</span>(var_x);</span><br><span class="line">var_y = <span class="built_in">sqrt</span>(var_y);</span><br><span class="line"></span><br><span class="line"><span class="comment">// remove static trajectory</span></span><br><span class="line"><span class="keyword">if</span>(var_x &lt; min_var &amp;&amp; var_y &lt; min_var)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="comment">// remove random trajectory</span></span><br><span class="line"><span class="keyword">if</span>( var_x &gt; max_var || var_y &gt; max_var )</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">float</span> cur_max = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size<span class="number">-1</span>; i++) &#123;</span><br><span class="line">track[i] = track[i+<span class="number">1</span>] - track[i];</span><br><span class="line"><span class="keyword">float</span> temp = <span class="built_in">sqrt</span>(track[i].x*track[i].x + track[i].y*track[i].y);</span><br><span class="line"></span><br><span class="line">length += temp;</span><br><span class="line"><span class="keyword">if</span>(temp &gt; cur_max)</span><br><span class="line">cur_max = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(cur_max &gt; max_dis &amp;&amp; cur_max &gt; length*<span class="number">0.7</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">track.pop_back();</span><br><span class="line">norm = <span class="number">1.</span>/length;</span><br><span class="line"><span class="comment">// normalize the trajectory</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size<span class="number">-1</span>; i++)</span><br><span class="line">track[i] *= norm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶ååŠ ä¸€ç‚¹è‡ªå·±çš„æ³¨é‡Šã€‚</p><p>é¦–å…ˆæœ‰ä¸€äº›å˜é‡ï¼Œåœ¨<code>#include &quot;DenseTrack.h&quot;</code>ä¸­å®šä¹‰çš„ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// parameters for rejecting trajectory</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">float</span> min_var = <span class="built_in">sqrt</span>(<span class="number">3</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">float</span> max_var = <span class="number">50</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">float</span> max_dis = <span class="number">20</span>;</span><br></pre></td></tr></table></figure><p>è¿™ä¸‰ä¸ªä»£è¡¨<code>æœ€å°ä½ç§»çš„é˜ˆå€¼</code>ã€<code>æœ€å¤§ä½ç§»çš„é˜ˆå€¼</code>å’Œ<code>æ¡ä»¶ç­›é€‰é˜ˆå€¼</code>ã€‚ç¬¬ä¸‰ä¸ªå¯èƒ½æœ‰ç‚¹æ‡µé€¼ï¼Œçœ‹ä»£ç ï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// remove static trajectory</span></span><br><span class="line"><span class="keyword">if</span>(var_x &lt; min_var &amp;&amp; var_y &lt; min_var)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"><span class="comment">// remove random trajectory</span></span><br><span class="line"><span class="keyword">if</span>( var_x &gt; max_var || var_y &gt; max_var )</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªå°±æ˜¯å‰ä¸¤å¥äº†ï¼š</p><blockquote><p>As static trajectories do not contain motion information, we prune them in a post-processing stage. Trajectories with sudden large displacements, most likely to be erroneous, are also removed.</p></blockquote><p>ä¸æ€ä¹ˆåŠ¨çš„ï¼Œå’Œè¿åŠ¨å¹…åº¦è¿‡å¤§çš„ï¼Œéƒ½ä¼šè¢«å‰”é™¤ã€‚</p><p>ç„¶åå°±æ˜¯ç¬¬ä¸‰ä¸ªï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(cur_max &gt; max_dis &amp;&amp; cur_max &gt; length*<span class="number">0.7</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br></pre></td></tr></table></figure><blockquote><p>Such trajectories are detected, if the displacement vector between two consecutive frames is larger than 70% of the overall displacement of the trajectory.</p></blockquote><p>è¿™å¥è¯æˆ‘ä»¥ä¸ºæ˜¯åœ¨è¯´æŠŠç¬¦åˆè¿™ä¸ªæ¡ä»¶çš„é€‰å‡ºæ¥ï¼ˆä½œä¸ºè½¨è¿¹ï¼‰ï¼Œæ²¡æƒ³åˆ°è¿™ä¹Ÿæ˜¯å‰”é™¤é¡¹ï¼Œè¿™æ²¡æœ‰æºç è°èƒ½å‘ç°çš„äº†å•Šï¼</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœç›¸é‚»ä¸¤å¸§ä¹‹é—´çš„æœ€å¤§ä½ç§»å‘é‡å¤§äºæ€»ä½ç§»è½¨è¿¹çš„<code>70%</code>ï¼Œé‚£ä¹ˆè¿™æ ·çš„è½¨è¿¹ä¹Ÿä¼šè¢«æ£€æµ‹åˆ°ï¼ˆå¹¶å‰”é™¤ï¼‰ã€‚</p><p>ä¸è¿‡è¿™ä¸ªæœ‰ä¸€ä¸ªå…ˆå†³æ¡ä»¶<code>cur_max &gt; max_dis</code>ï¼ŒçŒœæµ‹å¯èƒ½çš„åŸå› æ˜¯ä¿è¯ä¸€äº›ç»†èŠ‚å§ï¼Ÿå¤§æ¦‚æœ‰äº›å•æ¬¡ä½ç§»è™½ç„¶å¾ˆå¤§ï¼Œä½†æ˜¯æˆ‘æƒ³ä¸å‡ºæ¥ä¸ºä»€ä¹ˆè¿™æ ·äº†= =ï¼</p><p><strong>ä»¥ä¸Šï¼Œå¦‚æœæœ‰äººç¢°å·§çœ‹åˆ°äº†ï¼Œæœ‰ä»€ä¹ˆé”™è¯¯æ¬¢è¿æŒ‡æ­£ï¼Œæ„Ÿæ©ã€‚</strong></p>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¡Œä¸ºè¯†åˆ« </tag>
            
            <tag> action recognition </tag>
            
            <tag> DT </tag>
            
            <tag> dense trajectories </tag>
            
            <tag> å¯†é›†è½¨è¿¹ç®—æ³• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šå¿«ä¹çš„Linuxå‘½ä»¤è¡Œã€‹ç¬”è®°ï¼ˆ14ï¼‰</title>
      <link href="/blog/2020/12/02/the-linux-command-line-note-14/"/>
      <url>/blog/2020/12/02/the-linux-command-line-note-14/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹"><a class="header-anchor" href="#ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹">#</a>ã€Šå¿«ä¹çš„ Linux å‘½ä»¤è¡Œã€‹</h1><center><!-- //onns.xyz/blog/image --><p><img src="//onns.xyz/blog/image/20201202-1.png" alt="xlogo"></p></center><p>è¿™ä¸ª<code>xlogo</code>å‘½ä»¤å¯ä»¥åœ¨æ˜¾ç¤ºå±ä¸Šæ˜¾ç¤ºä¸€ä¸ª<code>X</code>ï¼Œå¯ä»¥éšç€æ‹–åŠ¨å˜å¤§å°ï¼Œå¿…é¡»è¦æœ‰æ˜¾ç¤ºå™¨æ‰è¡Œã€‚</p><a id="more"></a><h2 id=""><a class="header-anchor" href="#">#</a>&amp;</h2><p>åœ¨å‘½ä»¤ååŠ <code>&amp;</code>åå°æ‰§è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">command</span> &amp;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">onns@onns-desktop:~$ xlogo &amp;</span><br><span class="line">[1] 3642</span><br></pre></td></tr></table></figure><p><code>[1] 3642</code>æ˜¯ <code>shell</code> ç‰¹æ€§çš„ä¸€éƒ¨åˆ†ï¼Œå«åš<code>ä»»åŠ¡æ§åˆ¶</code>ï¼ˆjob controlï¼‰ã€‚</p><p><code>ä»»åŠ¡å·</code>ï¼ˆjob numberï¼‰ä¸º<strong>1</strong>ï¼ŒPID ä¸º<strong>3642</strong>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">onns@onns-desktop:~$ ps</span><br><span class="line">    PID TTY          TIME CMD</span><br><span class="line">   2306 pts/0    00:00:00 bash</span><br><span class="line">   3642 pts/0    00:00:00 xlogo</span><br><span class="line">   4229 pts/0    00:00:00 ps</span><br></pre></td></tr></table></figure><p><code>jobs</code>å‘½ä»¤åˆ—å‡ºä»ç»ˆç«¯ä¸­å¯åŠ¨äº†çš„ä»»åŠ¡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">onns@onns-desktop:~$ <span class="built_in">jobs</span></span><br><span class="line">[1]+  Running                 xlogo &amp;</span><br></pre></td></tr></table></figure><h2 id="fg"><a class="header-anchor" href="#fg">#</a>fg</h2><p><code>fg</code>å‘½ä»¤è®©ä¸€ä¸ªè¿›ç¨‹è¿”å›å‰å°ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">fg</span> %jobspec</span><br></pre></td></tr></table></figure><p><code>fg</code>å‘½ä»¤ä¹‹åæ¥ä¸€ä¸ªç™¾åˆ†å·å’Œä»»åŠ¡åºå·ï¼ˆjobspecï¼‰ã€‚</p><p>å¦‚æœåªæœ‰ä¸€ä¸ªåå°ä»»åŠ¡ï¼Œé‚£ä¹ˆ<code>jobspec</code>ï¼ˆjob specificationï¼‰æ˜¯å¯æœ‰å¯æ— çš„ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">onns@onns-desktop:~$ <span class="built_in">jobs</span></span><br><span class="line">[1]+  Running                 xlogo &amp;</span><br><span class="line">onns@onns-desktop:~$ <span class="built_in">fg</span> %1</span><br><span class="line">xlogo</span><br></pre></td></tr></table></figure><h2 id="ctrl-z"><a class="header-anchor" href="#ctrl-z">#</a>ctrl z</h2><p>åœæ­¢è¿›ç¨‹ï¼Œè¿™ä¹ˆåšé€šå¸¸æ˜¯ä¸ºäº†å…è®¸å‰å°è¿›ç¨‹è¢«ç§»åŠ¨åˆ°åå°ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">onns@onns-desktop:~$ xlogo</span><br><span class="line">^Z</span><br><span class="line">[2]+  Stopped                 xlogo</span><br><span class="line"></span><br><span class="line">onns@onns-desktop:~$ <span class="built_in">jobs</span></span><br><span class="line">[1]-  Stopped                 xlogo</span><br><span class="line">[2]+  Stopped                 xlogo</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨ <code>fg</code> å‘½ä»¤ï¼Œå¯ä»¥æ¢å¤ç¨‹åºåˆ°å‰å°è¿è¡Œï¼Œæˆ–è€…ç”¨ <code>bg</code> å‘½ä»¤æŠŠç¨‹åºç§»åˆ°åå°ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">onns@onns-desktop:~$ <span class="built_in">bg</span> %2</span><br><span class="line">[2]+ xlogo &amp;</span><br><span class="line">onns@onns-desktop:~$ <span class="built_in">jobs</span></span><br><span class="line">[1]+  Stopped                 xlogo</span><br><span class="line">[2]-  Running                 xlogo &amp;</span><br></pre></td></tr></table></figure><h2 id="kill"><a class="header-anchor" href="#kill">#</a>kill</h2><p><code>kill</code>å‘½ä»¤ç”¨æ¥ç»ˆæ­¢ç¨‹åºã€‚</p><blockquote><p>è¿™ä¸ª <code>kill</code> å‘½ä»¤ä¸æ˜¯çœŸçš„â€œæ€æ­»â€ç¨‹åºï¼Œè€Œæ˜¯ç»™ç¨‹åºå‘é€ä¿¡å·ã€‚ä¿¡å·æ˜¯æ“ä½œç³»ç»Ÿä¸ç¨‹åºä¹‹é—´è¿›è¡Œé€šä¿¡æ—¶æ‰€é‡‡ç”¨çš„å‡ ç§æ–¹å¼ä¸­çš„ä¸€ç§ã€‚</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">kill</span> [-signal] PID...</span><br></pre></td></tr></table></figure><p>å¦‚æœåœ¨å‘½ä»¤è¡Œä¸­æ²¡æœ‰æŒ‡å®šä¿¡å·ï¼Œé‚£ä¹ˆé»˜è®¤æƒ…å†µä¸‹ï¼Œå‘é€<code>TERM</code>ï¼ˆTerminateï¼Œç»ˆæ­¢ï¼‰ä¿¡å·ã€‚</p><ul><li>ç¼–å·<code>1</code>ä»£è¡¨<code>HUP</code>ï¼ŒæŒ‚èµ·(Hangup)ã€‚è¿™æ˜¯ç¾å¥½å¾€æ˜”çš„æ®‹ç•™éƒ¨åˆ†ï¼Œé‚£æ—¶å€™ç»ˆç«¯æœºé€šè¿‡ç”µè¯çº¿å’Œè°ƒåˆ¶è§£è°ƒå™¨è¿æ¥åˆ°è¿œç«¯çš„è®¡ç®—æœºã€‚è¿™ä¸ªä¿¡å·è¢«ç”¨æ¥å‘Šè¯‰ç¨‹åºï¼Œæ§åˆ¶çš„ç»ˆç«¯æœºå·²ç»â€œæŒ‚æ–­â€ã€‚é€šè¿‡å…³é—­ä¸€ä¸ªç»ˆç«¯ä¼šè¯ï¼Œå¯ä»¥å±•ç¤ºè¿™ä¸ªä¿¡å·çš„ä½œç”¨ã€‚åœ¨å½“å‰ç»ˆç«¯è¿è¡Œçš„å‰å°ç¨‹åºå°†ä¼šæ”¶åˆ°è¿™ä¸ªä¿¡å·å¹¶ç»ˆæ­¢ã€‚è®¸å¤šå®ˆæŠ¤è¿›ç¨‹ä¹Ÿä½¿ç”¨è¿™ä¸ªä¿¡å·ï¼Œæ¥é‡æ–°åˆå§‹åŒ–ã€‚è¿™æ„å‘³ç€ï¼Œå½“ä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹æ”¶åˆ°è¿™ä¸ªä¿¡å·åï¼Œè¿™ä¸ªè¿› ç¨‹ä¼šé‡æ–°å¯åŠ¨ï¼Œå¹¶ä¸”é‡æ–°è¯»å–å®ƒçš„é…ç½®æ–‡ä»¶ã€‚Apache ç½‘ç»œæœåŠ¡å™¨å®ˆæŠ¤è¿›ç¨‹å°±æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</li><li>ç¼–å·<code>2</code>ä»£è¡¨<code>INT</code>ï¼Œä¸­æ–­ã€‚å®ç°å’Œ Ctrl-c ä¸€æ ·çš„åŠŸèƒ½ï¼Œç”±ç»ˆç«¯å‘é€ã€‚é€šå¸¸ï¼Œ å®ƒä¼šç»ˆæ­¢ä¸€ä¸ªç¨‹åºã€‚</li><li>ç¼–å·<code>9</code>ä»£è¡¨<code>KILL</code>ï¼Œæ€æ­»ã€‚è¿™ä¸ªä¿¡å·å¾ˆç‰¹åˆ«ã€‚å°½ç®¡ç¨‹åºå¯èƒ½ä¼šé€‰æ‹©ä¸åŒçš„ æ–¹å¼æ¥å¤„ç†å‘é€ç»™å®ƒçš„ä¿¡å·ï¼Œå…¶ä¸­ä¹ŸåŒ…å«å¿½ç•¥ä¿¡å·ï¼Œ ä½†æ˜¯ KILL ä¿¡å·ä»ä¸è¢«å‘é€åˆ°ç›®æ ‡ç¨‹åºã€‚è€Œæ˜¯å†…æ ¸ç«‹ å³ç»ˆæ­¢è¿™ä¸ªè¿›ç¨‹ã€‚å½“ä¸€ä¸ªè¿›ç¨‹ä»¥è¿™ç§æ–¹å¼ç»ˆæ­¢çš„æ—¶å€™ï¼Œ å®ƒæ²¡æœ‰æœºä¼šå»åšäº›â€œæ¸…ç†â€å·¥ä½œï¼Œæˆ–è€…æ˜¯ä¿å­˜å·¥ä½œã€‚ å› ä¸ºè¿™ä¸ªåŸå› ï¼ŒæŠŠ KILL ä¿¡å·çœ‹ä½œæœ€åä¸€æ‹›ï¼Œå½“å…¶å®ƒ ç»ˆæ­¢ä¿¡å·å¤±è´¥åï¼Œå†ä½¿ç”¨å®ƒã€‚</li><li>ç¼–å·<code>15</code>ä»£è¡¨<code>TERM</code>ï¼Œç»ˆæ­¢ã€‚è¿™æ˜¯ kill å‘½ä»¤å‘é€çš„é»˜è®¤ä¿¡å·ã€‚å¦‚æœç¨‹åºä»ç„¶ â€œæ´»ç€â€ï¼Œå¯ä»¥æ¥å—ä¿¡å·ï¼Œé‚£ä¹ˆè¿™ä¸ªå®ƒä¼šç»ˆæ­¢ã€‚</li><li>ç¼–å·<code>18</code>ä»£è¡¨<code>CONT</code>ï¼Œç»§ç»­ã€‚åœ¨ä¸€ä¸ªåœæ­¢ä¿¡å·åï¼Œè¿™ä¸ªä¿¡å·ä¼šæ¢å¤è¿›ç¨‹çš„è¿ è¡Œã€‚</li><li>ç¼–å·<code>19</code>ä»£è¡¨<code>STOP</code>ï¼Œåœæ­¢ã€‚è¿™ä¸ªä¿¡å·å¯¼è‡´è¿›ç¨‹åœæ­¢è¿è¡Œï¼Œè€Œä¸æ˜¯ç»ˆæ­¢ã€‚åƒ KILL ä¿¡å·ï¼Œå®ƒä¸è¢«å‘é€åˆ°ç›®æ ‡è¿›ç¨‹ï¼Œå› æ­¤å®ƒä¸èƒ½è¢«å¿½ç•¥ã€‚</li></ul><p><strong>è¿›ç¨‹ï¼Œå’Œæ–‡ä»¶ä¸€æ ·ï¼Œæ‹¥æœ‰æ‰€æœ‰è€…ï¼Œæ‰€ä»¥ä¸ºäº†èƒ½å¤Ÿé€šè¿‡ <code>kill</code> å‘½ä»¤æ¥ç»™è¿›ç¨‹å‘é€ä¿¡å·ï¼Œä½ å¿…é¡»æ˜¯ è¿›ç¨‹çš„æ‰€æœ‰è€…(æˆ–è€…æ˜¯è¶…çº§ç”¨æˆ·)ã€‚</strong></p><p><code>kill -l</code>å¯ä»¥å¾—åˆ°ä¸€ä¸ªå®Œæ•´çš„ä¿¡å·åˆ—è¡¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">onns@onns-desktop:~$ <span class="built_in">kill</span> -l</span><br><span class="line"> 1) SIGHUP 2) SIGINT 3) SIGQUIT 4) SIGILL 5) SIGTRAP</span><br><span class="line"> 6) SIGABRT 7) SIGBUS 8) SIGFPE 9) SIGKILL10) SIGUSR1</span><br><span class="line">11) SIGSEGV12) SIGUSR213) SIGPIPE14) SIGALRM15) SIGTERM</span><br><span class="line">16) SIGSTKFLT17) SIGCHLD18) SIGCONT19) SIGSTOP20) SIGTSTP</span><br><span class="line">21) SIGTTIN22) SIGTTOU23) SIGURG24) SIGXCPU25) SIGXFSZ</span><br><span class="line">26) SIGVTALRM27) SIGPROF28) SIGWINCH29) SIGIO30) SIGPWR</span><br><span class="line">31) SIGSYS34) SIGRTMIN35) SIGRTMIN+136) SIGRTMIN+237) SIGRTMIN+3</span><br><span class="line">38) SIGRTMIN+439) SIGRTMIN+540) SIGRTMIN+641) SIGRTMIN+742) SIGRTMIN+8</span><br><span class="line">43) SIGRTMIN+944) SIGRTMIN+1045) SIGRTMIN+1146) SIGRTMIN+1247) SIGRTMIN+13</span><br><span class="line">48) SIGRTMIN+1449) SIGRTMIN+1550) SIGRTMAX-1451) SIGRTMAX-1352) SIGRTMAX-12</span><br><span class="line">53) SIGRTMAX-1154) SIGRTMAX-1055) SIGRTMAX-956) SIGRTMAX-857) SIGRTMAX-7</span><br><span class="line">58) SIGRTMAX-659) SIGRTMAX-560) SIGRTMAX-461) SIGRTMAX-362) SIGRTMAX-2</span><br><span class="line">63) SIGRTMAX-164) SIGRTMAX</span><br></pre></td></tr></table></figure><p>ä¸æ˜¯å¾ˆå¸¸ç”¨ï¼Œè›®çœ‹ä¸€ä¸‹ç½¢äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> shell </tag>
            
            <tag> bash </tag>
            
            <tag> shell note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šå¿«ä¹çš„Linuxå‘½ä»¤è¡Œã€‹ç¬”è®°ï¼ˆ13ï¼‰</title>
      <link href="/blog/2020/11/29/the-linux-command-line-note-13/"/>
      <url>/blog/2020/11/29/the-linux-command-line-note-13/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹"><a class="header-anchor" href="#ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹">#</a>ã€Šå¿«ä¹çš„ Linux å‘½ä»¤è¡Œã€‹</h1><a id="more"></a><blockquote><p>å½“ç³»ç»Ÿå¯åŠ¨çš„æ—¶å€™ï¼Œå†…æ ¸å…ˆæŠŠä¸€äº›å®ƒè‡ªå·±çš„æ´»åŠ¨åˆå§‹åŒ–ä¸ºè¿›ç¨‹ï¼Œç„¶åè¿è¡Œä¸€ä¸ªå«åš init çš„ç¨‹ åºã€‚initï¼Œä¾æ¬¡åœ°ï¼Œå†è¿è¡Œä¸€ç³»åˆ—çš„ç§°ä¸º init è„šæœ¬çš„ shell è„šæœ¬(ä½äº/etc)ï¼Œå®ƒä»¬å¯ä»¥å¯åŠ¨æ‰€æœ‰ çš„ç³»ç»ŸæœåŠ¡ã€‚å…¶ä¸­è®¸å¤šç³»ç»ŸæœåŠ¡ä»¥å®ˆæŠ¤(daemon)ç¨‹åºçš„å½¢å¼å®ç°ï¼Œå®ˆæŠ¤ç¨‹åºä»…åœ¨åå°è¿è¡Œï¼Œæ²¡æœ‰ä»»ä½•ç”¨æˆ·æ¥å£ (User Interface)ã€‚è¿™æ ·ï¼Œå³ä½¿æˆ‘ä»¬æ²¡æœ‰ç™»å½•ç³»ç»Ÿï¼Œè‡³å°‘ç³»ç»Ÿä¹Ÿåœ¨å¿™äºæ‰§è¡Œä¸€ äº›ä¾‹è¡Œäº‹åŠ¡ã€‚<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p></blockquote><p>åœ¨è¿›ç¨‹æ–¹æ¡ˆä¸­ï¼Œä¸€ä¸ªç¨‹åºå¯ä»¥å‘åŠ¨å¦ä¸€ä¸ªç¨‹åºè¢«è¡¨è¿°ä¸ºä¸€ä¸ªçˆ¶è¿›ç¨‹å¯ä»¥äº§ç”Ÿä¸€ä¸ªå­è¿›ç¨‹ã€‚</p><blockquote><p>å†…æ ¸ç»´æŠ¤æ¯ä¸ªè¿›ç¨‹çš„ä¿¡æ¯ï¼Œä»¥æ­¤æ¥ä¿æŒäº‹æƒ…æœ‰åºã€‚ä¾‹å¦‚ï¼Œç³»ç»Ÿåˆ†é…ç»™æ¯ä¸ªè¿›ç¨‹ä¸€ä¸ªæ•°å­—ï¼Œè¿™ ä¸ªæ•°å­—å«åšè¿›ç¨‹ (process) ID æˆ– PIDã€‚PID å·æŒ‰å‡åºåˆ†é…ï¼Œinit è¿›ç¨‹çš„ PID æ€»æ˜¯ 1ã€‚å†…æ ¸ä¹Ÿå¯¹ åˆ†é…ç»™æ¯ä¸ªè¿›ç¨‹çš„å†…å­˜å’Œå°±ç»ªçŠ¶æ€è¿›è¡Œè·Ÿè¸ªä»¥ä¾¿ç»§ç»­æ‰§è¡Œè¿™ä¸ªè¿›ç¨‹ã€‚</p></blockquote><h2 id="ps"><a class="header-anchor" href="#ps">#</a>ps</h2><p><code>ps</code>å…¨ç§°<code>process status</code>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ ps</span><br><span class="line">  PID TTY          TIME CMD</span><br><span class="line">11583 pts/0    00:00:00 bash</span><br><span class="line">11600 pts/0    00:00:00 ps</span><br></pre></td></tr></table></figure><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œps ä¸ä¼šæ˜¾ç¤ºå¾ˆå¤šè¿›ç¨‹ä¿¡æ¯ï¼Œåªæ˜¯åˆ—å‡ºä¸å½“å‰ç»ˆç«¯ä¼šè¯ç›¸å…³çš„è¿›ç¨‹ã€‚</p><p><code>TTY</code> æ˜¯ â€œTeletypeâ€(ç›´è¯‘ç”µä¼ æ‰“å­—æœº) çš„ç®€å†™ï¼Œæ˜¯æŒ‡è¿›ç¨‹çš„æ§åˆ¶ç»ˆç«¯ã€‚<br><code>TIME</code> å­—æ®µè¡¨ç¤ºè¿›ç¨‹æ‰€æ¶ˆè€—çš„ CPU æ—¶é—´æ•°é‡ã€‚</p><p>åŠ ä¸Š <code>x</code> é€‰é¡¹ï¼Œå‘Šè¯‰ <code>ps</code> å‘½ä»¤ï¼Œå±•ç¤ºæ‰€æœ‰è¿›ç¨‹ï¼Œä¸ç®¡å®ƒä»¬ç”±ä»€ä¹ˆç»ˆç«¯ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰æ§åˆ¶ã€‚</p><p>åœ¨ TTY ä¸€æ ä¸­å‡ºç°çš„<code>?</code>ï¼Œè¡¨ç¤ºæ²¡æœ‰æ§åˆ¶ç»ˆç«¯ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ ps x</span><br><span class="line">  PID TTY      STAT   TIME COMMAND</span><br><span class="line">  784 ?        Ss     0:00 /lib/systemd/systemd --user</span><br><span class="line">  785 ?        S      0:00 (sd-pam)</span><br><span class="line">12071 ?        S      0:00 sshd: deploy@pts/0</span><br><span class="line">12072 pts/0    Ss     0:00 -bash</span><br><span class="line">12082 pts/0    R+     0:00 ps x</span><br></pre></td></tr></table></figure><p>è¾“å‡ºç»“æœä¸­ï¼Œæ–°æ·»åŠ äº†ä¸€æ ï¼Œæ ‡é¢˜ä¸º <code>STAT</code>ã€‚ <code>STAT</code> æ˜¯ â€œstateâ€ çš„ç®€å†™ï¼Œå®ƒæ­ç¤ºäº†è¿›ç¨‹å½“å‰çŠ¶æ€ï¼š</p><p><code>R</code>ï¼š è¿è¡Œä¸­ã€‚è¿™æ„å‘³ç€ï¼Œè¿›ç¨‹æ­£åœ¨è¿è¡Œæˆ–å‡†å¤‡è¿è¡Œã€‚<br><code>S</code>ï¼š æ­£åœ¨ç¡çœ ã€‚è¿›ç¨‹æ²¡æœ‰è¿è¡Œï¼Œè€Œæ˜¯ï¼Œæ­£åœ¨ç­‰å¾…ä¸€ä¸ªäº‹ä»¶ï¼Œæ¯”å¦‚ è¯´ï¼Œä¸€ä¸ªæŒ‰é”®æˆ–è€…ç½‘ç»œåˆ†ç»„ã€‚<br><code>D</code>ï¼š ä¸å¯ä¸­æ–­ç¡çœ ã€‚è¿›ç¨‹æ­£åœ¨ç­‰å¾… I/Oï¼Œæ¯”æ–¹è¯´ï¼Œä¸€ä¸ªç£ç›˜é©±åŠ¨ å™¨çš„ I/Oã€‚<br><code>T</code>ï¼š å·²åœæ­¢. å·²ç»æŒ‡ç¤ºè¿›ç¨‹åœæ­¢è¿è¡Œã€‚ç¨åä»‹ç»æ›´å¤šã€‚<br><code>Z</code>ï¼š ä¸€ä¸ªæ­»è¿›ç¨‹æˆ–â€œåƒµå°¸â€è¿›ç¨‹ã€‚è¿™æ˜¯ä¸€ä¸ªå·²ç»ç»ˆæ­¢çš„å­è¿›ç¨‹ï¼Œ ä½†æ˜¯å®ƒçš„çˆ¶è¿›ç¨‹è¿˜æ²¡æœ‰æ¸…ç©ºå®ƒã€‚(çˆ¶è¿›ç¨‹æ²¡æœ‰æŠŠå­è¿›ç¨‹ä»è¿›ç¨‹è¡¨ä¸­åˆ é™¤)<br><code>&lt;</code>ï¼š ä¸€ä¸ªé«˜ä¼˜å…ˆçº§è¿›ç¨‹ã€‚è¿™å¯èƒ½ä¼šæˆäºˆä¸€ä¸ªè¿›ç¨‹æ›´å¤šé‡è¦çš„èµ„ æºï¼Œç»™å®ƒæ›´å¤šçš„ CPU æ—¶é—´ã€‚è¿›ç¨‹çš„è¿™ç§å±æ€§å«åš nicenessã€‚ å…·æœ‰é«˜ä¼˜å…ˆçº§çš„è¿›ç¨‹æ®è¯´æ˜¯ä¸å¥½çš„(less nice)ï¼Œå› ä¸ºå®ƒå ç”¨äº†æ¯”è¾ƒå¤šçš„ CPU æ—¶é—´ï¼Œè¿™æ ·å°±ç»™å…¶å®ƒè¿›ç¨‹ç•™ä¸‹å¾ˆå°‘æ—¶é—´ã€‚<br><code>N</code>ï¼š ä½ä¼˜å…ˆçº§è¿›ç¨‹ã€‚ä¸€ä¸ªä½ä¼˜å…ˆçº§è¿›ç¨‹(ä¸€ä¸ªâ€œniceâ€è¿›ç¨‹)åªæœ‰ å½“å…¶å®ƒé«˜ä¼˜å…ˆçº§è¿›ç¨‹è¢«æœåŠ¡äº†ä¹‹åï¼Œæ‰ä¼šå¾—åˆ°å¤„ç†å™¨æ—¶é—´ã€‚</p><p>ä¸è¿‡æˆ‘çš„ç³»ç»Ÿé‡Œæœ‰<code>Ss</code>å’Œ<code>R+</code>ä¹‹ç±»çš„ï¼Œåœ¨ä¹¦é‡Œæ²¡æœ‰ã€‚</p><p>è¿˜æœ‰ä¸€ä¸ªé€‰é¡¹<code>aux</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span><br><span class="line">root         1  0.0  0.4 225444  8820 ?        Ss   Jun12   7:55 /lib/systemd/systemd --system --deserialize 19</span><br><span class="line">root         2  0.0  0.0      0     0 ?        S    Jun12   0:00 [kthreadd]</span><br><span class="line">root         4  0.0  0.0      0     0 ?        I&lt;   Jun12   0:00 [kworker/0:0H]</span><br><span class="line">root         6  0.0  0.0      0     0 ?        I&lt;   Jun12   0:00 [mm_percpu_wq]</span><br></pre></td></tr></table></figure><p><code>USER</code>ï¼š ç”¨æˆ· ID. è¿›ç¨‹çš„æ‰€æœ‰è€…ã€‚<br><code>%CPU</code>ï¼š ä»¥ç™¾åˆ†æ¯”è¡¨ç¤ºçš„ CPU ä½¿ç”¨ç‡ã€‚<br><code>%MEM</code>ï¼š ä»¥ç™¾åˆ†æ¯”è¡¨ç¤ºçš„å†…å­˜ä½¿ç”¨ç‡ã€‚<br><code>VSZ</code>ï¼š è™šæ‹Ÿå†…å­˜å¤§å°ã€‚<br><code>RSS</code>ï¼š è¿›ç¨‹å ç”¨çš„ç‰©ç†å†…å­˜çš„å¤§å°ï¼Œä»¥åƒå­—èŠ‚ä¸ºå•ä½ã€‚<br><code>START</code>ï¼š è¿›ç¨‹å¯åŠ¨çš„æ—¶é—´ã€‚è‹¥å®ƒçš„å€¼è¶…è¿‡ 24 å°æ—¶ï¼Œåˆ™ç”¨å¤©è¡¨ç¤ºã€‚</p><h2 id="top"><a class="header-anchor" href="#top">#</a>top</h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>top</code>æ¯ä¸‰ç§’é’Ÿæ›´æ–°ä¸€æ¬¡ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">top - 19:25:51 up 170 days,  1:13,  1 user,  load average: 0.00, 0.00, 0.00</span><br><span class="line">Tasks:  89 total,   1 running,  57 sleeping,   0 stopped,   0 zombie</span><br><span class="line">%Cpu(s):  0.3 us,  0.7 sy,  0.0 ni, 99.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st</span><br><span class="line">KiB Mem :  2041216 total,   143632 free,   672572 used,  1225012 buff/cache</span><br><span class="line">KiB Swap:   969964 total,   969964 free,        0 used.  1157724 avail Mem</span><br><span class="line"></span><br><span class="line">  PID USER      PR  NI    VIRT    RES    SHR S %CPU %MEM     TIME+ COMMAND</span><br></pre></td></tr></table></figure><p><code>top</code>ï¼šç¨‹åºåã€‚<br><code>19:25:51</code>ï¼šå½“å‰æ—¶é—´ã€‚<br><code>up 170 days, 1:13</code>ï¼šè¿™æ˜¯æ­£å¸¸è¿è¡Œæ—¶é—´ã€‚å®ƒæ˜¯è®¡ç®—æœºä»ä¸Šæ¬¡å¯åŠ¨åˆ°ç°åœ¨æ‰€è¿è¡Œçš„æ—¶é—´ã€‚<br><code>1 user</code>ï¼šç™»å½•ç³»ç»Ÿç”¨æˆ·æ•°ã€‚<br><code>load average: 0.00, 0.00, 0.00</code>ï¼šåŠ è½½å¹³å‡å€¼ã€‚ç­‰å¾…è¿è¡Œçš„è¿›ç¨‹æ•°ç›®ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¤„äºå¯ä»¥è¿è¡ŒçŠ¶æ€å¹¶å…±äº« CPU çš„è¿›ç¨‹ä¸ªæ•°ã€‚ç¬¬ä¸€ä¸ªæ˜¯<code>æœ€å 60 ç§’çš„å¹³å‡å€¼</code>ï¼Œä¸‹ä¸€ä¸ªæ˜¯<code>å‰ 5 åˆ†é’Ÿçš„å¹³å‡å€¼</code>ï¼Œæœ€åä¸€ä¸ªæ˜¯<code>å‰ 15 åˆ†é’Ÿçš„å¹³å‡å€¼</code>ã€‚è‹¥å¹³å‡å€¼ä½äº<code>1.0</code>ï¼Œåˆ™æŒ‡ç¤ºè®¡ç®—æœºå·¥ä½œä¸å¿™ç¢Œã€‚<br><code>Tasks</code>ï¼šæ€»ç»“äº†è¿›ç¨‹æ•°ç›®å’Œè¿™äº›è¿›ç¨‹çš„å„ç§çŠ¶æ€ã€‚<br><code>Cpu(s)</code>ï¼šæè¿°äº† CPU æ­£åœ¨è¿›è¡Œçš„æ´»åŠ¨çš„ç‰¹æ€§ã€‚<br><code>us</code>ï¼šç”¨æˆ·è¿›ç¨‹ã€‚<br><code>sy</code>ï¼šç³»ç»Ÿï¼ˆå†…æ ¸ï¼‰è¿›ç¨‹ã€‚<br><code>ni</code>ï¼š<code>nice</code>ï¼ˆä½ä¼˜å…ˆçº§ï¼‰è¿›ç¨‹ã€‚<br><code>id</code>ï¼š<code>CPU</code>ç©ºé—²ç‡ã€‚<br><code>wa</code>ï¼šç­‰å¾…<code>I/O</code>ã€‚<br><code>hi</code>ï¼šç¡¬ä»¶ä¸­æ–­ã€‚<br><code>si</code>ï¼šè½¯ä»¶ä¸­æ–­ã€‚<br><code>st</code>ï¼šcpu cycle è¢«è™šæ‹ŸåŒ–å·èµ°çš„æ¯”ä¾‹ã€‚<br><code>Mem</code>ï¼šç‰©ç†å†…å­˜çš„ä½¿ç”¨æƒ…å†µã€‚<br><code>Swap</code>ï¼šäº¤æ¢åˆ†åŒºï¼ˆè™šæ‹Ÿå†…å­˜ï¼‰çš„ä½¿ç”¨æƒ…å†µã€‚</p><p><code>h</code>å‘½ä»¤æ˜¾ç¤ºå¸®åŠ©ã€‚<br><code>q</code>é€€å‡º<code>top</code>å‘½ä»¤ã€‚</p><h2 id=""><a class="header-anchor" href="#">#</a>&amp;</h2><p>åœ¨å‘½ä»¤ååŠ <code>&amp;</code>åå°æ‰§è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">command</span> &amp;</span><br></pre></td></tr></table></figure><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><code>init</code>è¿›ç¨‹çš„è¿›ç¨‹å·æ˜¯<code>1</code>ï¼Œä½†å¥½åƒ<code>Ubuntu 18.04</code>ä¹‹åå¼€å§‹ç”¨<code>systemd</code>ä½œä¸ºåˆå§‹è¿›ç¨‹äº†ã€‚ <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> shell </tag>
            
            <tag> bash </tag>
            
            <tag> shell note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šå¿«ä¹çš„Linuxå‘½ä»¤è¡Œã€‹ç¬”è®°ï¼ˆ12ï¼‰</title>
      <link href="/blog/2020/11/24/the-linux-command-line-note-12/"/>
      <url>/blog/2020/11/24/the-linux-command-line-note-12/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹"><a class="header-anchor" href="#ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹">#</a>ã€Šå¿«ä¹çš„ Linux å‘½ä»¤è¡Œã€‹</h1><p>æ¯ä¸ªå‘½ä»¤è¿˜æ˜¯è¦ç»™ä¸ªä¾‹å­ï¼Œæˆ‘<code>tee</code>å‘½ä»¤è™½ç„¶çŸ¥é“æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Œä½†æ˜¯ç”¨çš„æ—¶å€™è¿˜æ˜¯è‡ªç„¶è€Œç„¶çš„åŠ äº†ä¸€ä¸ª<code>&gt;</code>ï¼Œé”™äº†= =ã€‚</p><a id="more"></a><h2 id="su"><a class="header-anchor" href="#su">#</a>su</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su [-[l]] [user]</span><br></pre></td></tr></table></figure><p>å¦‚æœåŒ…å«<code>-l</code>é€‰é¡¹ï¼Œé‚£ä¹ˆä¼šä¸ºæŒ‡å®šç”¨æˆ·å¯åŠ¨ä¸€ä¸ªéœ€è¦ç™»å½•çš„<code>shell</code>ï¼Œå¦‚æœä¸æŒ‡å®šç”¨æˆ·ï¼Œé‚£ä¹ˆå°±å‡å®šæ˜¯<strong>è¶…çº§ç”¨æˆ·</strong>ã€‚</p><p><code>-l</code>å¯ä»¥ç¼©å†™ä¸º<code>-</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">deploy@iZwz96txzmeg2f5wu9eqigZ:~$ su -</span><br><span class="line">Password:</span><br><span class="line">root@iZwz96txzmeg2f5wu9eqigZ:~<span class="comment">#</span></span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥åªæ‰§è¡Œå•ä¸ªå‘½ä»¤ï¼Œè€Œä¸æ˜¯å¯åŠ¨ä¸€ä¸ªæ–°çš„å¯äº¤äº’çš„ shellï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">su -c <span class="string">'command'</span></span><br></pre></td></tr></table></figure><p><code>å•å¼•å·</code>ä¿è¯äº†ä¸ä¼šæœ‰ä»»ä½•å±•å¼€ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ su -c <span class="string">'ls -l /root/*'</span></span><br><span class="line">Password:</span><br><span class="line">-rw------- 1 root root 200604 Sep 17 21:43 /root/nohup.out</span><br><span class="line">-rw-r--r-- 1 root root     22 Sep 18 12:24 /root/py.log</span><br><span class="line">-rw-r--r-- 1 root root   1579 Sep  9 16:14 /root/sync.log</span><br><span class="line"></span><br><span class="line">/root/go:</span><br><span class="line">total 4</span><br><span class="line">drwxr-xr-x 3 root root 4096 Sep  9 16:16 src</span><br></pre></td></tr></table></figure><h2 id="sudo"><a class="header-anchor" href="#sudo">#</a>sudo</h2><p>ç®¡ç†å‘˜èƒ½å¤Ÿé…ç½®<code>sudo</code>å‘½ä»¤ï¼Œä»è€Œå…è®¸ä¸€ä¸ªæ™®é€šç”¨æˆ·ä»¥ä¸åŒçš„èº«ä»½ï¼ˆé€šå¸¸æ˜¯è¶…çº§ç”¨æˆ·ï¼‰ï¼Œé€šè¿‡ä¸€ç§éå¸¸å¯æ§çš„æ–¹å¼æ¥æ‰§è¡Œå‘½ä»¤ã€‚<strong>å°¤å…¶æ˜¯ï¼Œåªæœ‰ä¸€ä¸ªç”¨æˆ·å¯ä»¥æ‰§è¡Œä¸€ä¸ªæˆ–å¤šä¸ªç‰¹æ®Šå‘½ä»¤æ—¶ã€‚</strong></p><p><code>sudo</code>å‘½ä»¤ä¸è¦æ±‚è¶…çº§ç”¨æˆ·çš„å¯†ç ï¼Œè€Œæ˜¯ä½¿ç”¨è‡ªå·±çš„å¯†ç æ¥è®¤è¯ã€‚</p><p><code>su</code> å’Œ <code>sudo</code> ä¹‹é—´çš„ä¸€ä¸ªé‡è¦åŒºåˆ«æ˜¯ <code>sudo</code> ä¸ä¼šé‡æ–°å¯åŠ¨ä¸€ä¸ª <code>shell</code>ï¼Œä¹Ÿä¸ä¼šåŠ è½½å¦ä¸€ä¸ªç”¨æˆ·çš„ <code>shell</code> è¿è¡Œç¯å¢ƒã€‚è¿™æ„å‘³è€…å‘½ä»¤ä¸å¿…ç”¨å•å¼•å·å¼•èµ·æ¥ã€‚</p><blockquote><p>å‡ å¹´å‰ï¼Œå¤§å¤šæ•°çš„ Linux å‘è¡Œç‰ˆéƒ½ä¾èµ–äº su å‘½ä»¤ï¼Œæ¥è¾¾åˆ°ç›®çš„ã€‚su å‘½ä»¤ä¸éœ€è¦ sudo å‘½ä»¤æ‰€è¦æ±‚çš„é…ç½®ï¼Œsu å‘½ä»¤æ‹¥æœ‰ä¸€ä¸ª root å¸å·ï¼Œæ˜¯ Unix ä¸­çš„ä¼ ç»Ÿã€‚ä½†è¿™ä¼šå¼•èµ·é—®é¢˜ã€‚æ‰€æœ‰ç”¨æˆ·ä¼šä¼å›¾ä»¥ root ç”¨æˆ·å¸å·æ¥æ“çºµç³»ç»Ÿã€‚äº‹å®ä¸Šï¼Œä¸€äº›ç”¨æˆ·ä¸“é—¨ä»¥ root ç”¨æˆ·å¸å·æ¥æ“ä½œç³»ç»Ÿï¼Œå› ä¸ºè¿™æ ·åšï¼Œçš„ç¡®æ¶ˆé™¤äº†æ‰€æœ‰é‚£äº›è®¨åŒçš„â€œæƒé™è¢«æ‹’ç»â€ çš„æ¶ˆæ¯ã€‚ä½ è¿™æ ·åšå°±ä¼šä½¿å¾— Linux ç³»ç»Ÿçš„å®‰å…¨æ€§èƒ½è¢«é™ä½åˆ°å’Œ Windows ç³»ç»Ÿç›¸åŒ çš„çº§åˆ«ã€‚ä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚<br>å½“å¼•è¿› Ubuntu çš„æ—¶å€™ï¼Œå®ƒçš„åˆ›ä½œè€…ä»¬é‡‡å–äº†ä¸åŒçš„ç­–ç•¥ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒUbuntu ä¸å…è®¸ç”¨æˆ·ç™»å½•åˆ° root å¸å·(å› ä¸ºä¸èƒ½ä¸º root å¸å·è®¾ç½®å¯†ç )ï¼Œè€Œæ˜¯ä½¿ç”¨ sudo å‘½ ä»¤æˆäºˆæ™®é€šç”¨æˆ·è¶…çº§ç”¨æˆ·æƒé™ã€‚é€šè¿‡ sudo å‘½ä»¤ï¼Œæœ€åˆçš„ç”¨æˆ·å¯ä»¥æ‹¥æœ‰è¶…çº§ç”¨æˆ·æƒ é™ï¼Œä¹Ÿå¯ä»¥æˆäºˆéšåçš„ç”¨æˆ·å¸å·ç›¸ä¼¼çš„æƒåŠ›ã€‚</p></blockquote><h2 id="chown"><a class="header-anchor" href="#chown">#</a>chown</h2><p><code>chown</code>å‘½ä»¤è¢«ç”¨æ¥æ›´æ”¹æ–‡ä»¶æˆ–ç›®å½•çš„æ‰€æœ‰è€…å’Œç”¨æˆ·ç»„ã€‚ä½¿ç”¨è¿™ä¸ªå‘½ä»¤éœ€è¦è¶…çº§ç”¨æˆ·æƒé™ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown [owner][:[group]] file...</span><br></pre></td></tr></table></figure><p><code>bob</code>ï¼š æŠŠæ–‡ä»¶æ‰€æœ‰è€…ä»å½“å‰å±ä¸»æ›´æ”¹ä¸ºç”¨æˆ· bobã€‚<br><code>bob:users</code>ï¼š æŠŠæ–‡ä»¶æ‰€æœ‰è€…æ”¹ä¸ºç”¨æˆ· bobï¼Œæ–‡ä»¶ç”¨æˆ·ç»„æ”¹ä¸ºç”¨æˆ·ç»„ usersã€‚<br><code>:admins</code>ï¼š æŠŠæ–‡ä»¶ç”¨æˆ·ç»„æ”¹ä¸ºç»„ adminsï¼Œæ–‡ä»¶æ‰€æœ‰è€…ä¸å˜ã€‚<br><code>bob:</code>ï¼š æ–‡ä»¶æ‰€æœ‰è€…æ”¹ä¸ºç”¨æˆ· bobï¼Œæ–‡ä»¶ç”¨æˆ·ç»„æ”¹ä¸ºç”¨æˆ· bob ç™»å½• ç³»ç»Ÿæ—¶æ‰€å±çš„ç”¨æˆ·ç»„ã€‚</p><p><strong>åœ¨å¤§å¤šæ•°çš„é…ç½®ä¸­ï¼Œsudo å‘½ä»¤ä¼šç›¸ä¿¡ä½ å‡ åˆ†é’Ÿï¼Œç›´åˆ°è®¡æ—¶ç»“æŸã€‚</strong></p><h2 id="chgrp"><a class="header-anchor" href="#chgrp">#</a>chgrp</h2><blockquote><p>åœ¨æ—§ç‰ˆ Unix ç³»ç»Ÿä¸­ï¼Œchown å‘½ä»¤åªèƒ½æ›´æ”¹æ–‡ä»¶æ‰€æœ‰æƒï¼Œè€Œä¸æ˜¯ç”¨æˆ·ç»„æ‰€æœ‰æƒã€‚ä¸ºäº†è¾¾åˆ°ç›®çš„ï¼Œ ä½¿ç”¨ä¸€ä¸ªç‹¬ç«‹çš„å‘½ä»¤ï¼Œchgrp æ¥å®Œæˆã€‚é™¤äº†é™åˆ¶å¤šä¸€ç‚¹ä¹‹å¤–ï¼Œchgrp å‘½ä»¤ä¸ chown å‘½ä»¤ä½¿ç”¨èµ· æ¥å¾ˆç›¸ä¼¼ã€‚</p></blockquote><h2 id="passwd"><a class="header-anchor" href="#passwd">#</a>passwd</h2><p>è®¾ç½®æˆ–æ›´æ”¹ç”¨æˆ·å¯†ç ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd [user]</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> shell </tag>
            
            <tag> bash </tag>
            
            <tag> shell note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šå¿«ä¹çš„Linuxå‘½ä»¤è¡Œã€‹ç¬”è®°ï¼ˆ11ï¼‰</title>
      <link href="/blog/2020/11/20/the-linux-command-line-note-11/"/>
      <url>/blog/2020/11/20/the-linux-command-line-note-11/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹"><a class="header-anchor" href="#ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹">#</a>ã€Šå¿«ä¹çš„ Linux å‘½ä»¤è¡Œã€‹</h1><a id="more"></a><h2 id="ç”¨æˆ·"><a class="header-anchor" href="#ç”¨æˆ·">#</a>ç”¨æˆ·</h2><p>å½“ä¸€ä¸ªç”¨æˆ·æ‹¥æœ‰ä¸€ä¸ªæ–‡ä»¶æˆ–ç›®å½•æ—¶ï¼Œç”¨æˆ·å¯¹è¿™ä¸ªæ–‡ä»¶æˆ–ç›®å½•çš„è®¿é—®æƒé™æ‹¥æœ‰æ§åˆ¶æƒã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ id</span><br><span class="line">uid=501(onns) gid=20(staff) groups=20(staff),12(everyone),61(localaccounts),79(_appserverusr),80(admin),81(_appserveradm),98(_lpadmin),33(_appstore),100(_lpoperator),204(_developer),250(_analyticsusers),395(com.apple.access_ftp),398(com.apple.access_screensharing),399(com.apple.access_ssh),400(com.apple.access_remote_ae),701(com.apple.sharepoint.group.1)</span><br></pre></td></tr></table></figure><p>å¯¹äºæ–‡ä»¶å’Œç›®å½•çš„è®¿é—®æƒåŠ›æ˜¯æ ¹æ®è¯»è®¿é—®ã€å†™è®¿é—®å’Œæ‰§è¡Œè®¿é—®æ¥å®šä¹‰çš„ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ &gt; foo.txt</span><br><span class="line">$ ls -l foo.txt</span><br><span class="line">-rw-r--r--@ 1 onns  staff  12 Nov 20 20:36 foo.txt</span><br></pre></td></tr></table></figure><p><strong>åˆ—è¡¨çš„å‰åä¸ªå­—ç¬¦æ˜¯æ–‡ä»¶çš„å±æ€§ï¼Œç¬¬ä¸€ä¸ªå­—ç¬¦è¡¨æ˜æ–‡ä»¶ç±»å‹ã€‚</strong></p><table><thead><tr><th style="text-align:center">æŒ‰é”®</th><th style="text-align:left">æ•ˆæœ</th></tr></thead><tbody><tr><td style="text-align:center"><code>-</code></td><td style="text-align:left">ä¸€ä¸ªæ™®é€šæ–‡ä»¶</td></tr><tr><td style="text-align:center"><code>d</code></td><td style="text-align:left">ä¸€ä¸ªç›®å½•</td></tr><tr><td style="text-align:center"><code>l</code></td><td style="text-align:left">ä¸€ä¸ªç¬¦å·é“¾æ¥<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></td></tr><tr><td style="text-align:center"><code>c</code></td><td style="text-align:left">ä¸€ä¸ªå­—ç¬¦è®¾å¤‡æ–‡ä»¶<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup></td></tr><tr><td style="text-align:center"><code>b</code></td><td style="text-align:left">ä¸€ä¸ªå—è®¾å¤‡æ–‡ä»¶<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup></td></tr></tbody></table><p>å‰©ä¸‹çš„ä¹ä¸ªå­—ç¬¦å«åšæ–‡ä»¶æ¨¡å¼ï¼Œä»£è¡¨ç€<code>æ–‡ä»¶æ‰€æœ‰è€…</code>ã€<code>æ–‡ä»¶ç»„æ‰€æœ‰è€…</code>å’Œ<code>å…¶ä»–äºº</code>çš„<code>è¯»</code>ã€<code>å†™</code>å’Œ<code>æ‰§è¡Œ</code>æƒé™ã€‚</p><p>æ–‡ä»¶ï¼š</p><ul><li><code>r</code>ï¼šå…è®¸æ‰“å¼€å¹¶è¯»å–æ–‡ä»¶å†…å®¹ã€‚</li><li><code>w</code>ï¼šå…è®¸å†™å…¥æ–‡ä»¶å†…å®¹æˆ–æˆªæ–­æ–‡ä»¶ã€‚ä½†æ˜¯<code>ä¸å…è®¸</code>å¯¹æ–‡ä»¶è¿›è¡Œ<code>é‡å‘½å</code>æˆ–<code>åˆ é™¤</code>ï¼Œ<strong>é‡å‘½åæˆ–åˆ é™¤æ˜¯ç”±ç›®å½•çš„å±æ€§å†³å®šçš„</strong>ã€‚</li><li><code>x</code>ï¼šå…è®¸å°†æ–‡ä»¶ä½œä¸ºç¨‹åºæ¥æ‰§è¡Œï¼Œä½¿ç”¨è„šæœ¬è¯­è¨€ç¼–å†™çš„ç¨‹åºå¿…é¡»è®¾ç½®ä¸ºå¯è¯»æ‰èƒ½è¢«æ‰§è¡Œã€‚</li></ul><p>ç›®å½•ï¼š</p><ul><li><code>r</code>ï¼šå…è®¸åˆ—å‡ºç›®å½•ä¸­çš„å†…å®¹ï¼Œå‰ææ˜¯ç›®å½•å¿…é¡»è®¾ç½®äº†<code>å¯æ‰§è¡Œå±æ€§(x)</code>ã€‚</li><li><code>w</code>ï¼šå…è®¸åœ¨ç›®å½•ä¸‹æ–°å»ºã€åˆ é™¤æˆ–é‡å‘½åæ–‡ä»¶ï¼Œå‰ææ˜¯ç›®å½•å¿…é¡»è®¾ç½®äº†<code>å¯æ‰§è¡Œå±æ€§(x)</code>ã€‚</li><li><code>x</code>ï¼šå…è®¸è¿›å…¥ç›®å½•ï¼Œä¾‹å¦‚ï¼š<code>cd directory</code>ã€‚</li></ul><h2 id="chmod"><a class="header-anchor" href="#chmod">#</a>chmod</h2><p><strong>åªæœ‰æ–‡ä»¶çš„æ‰€æœ‰è€…æˆ–è€…è¶…çº§ç”¨æˆ·æ‰èƒ½æ›´æ”¹æ–‡ä»¶æˆ–ç›®å½•çš„æ¨¡å¼ã€‚</strong></p><p><code>chmod</code>å‘½ä»¤æ”¯æŒä¸¤ç§ä¸åŒçš„æ–¹æ³•æ¥æ”¹å˜æ–‡ä»¶æ¨¡å¼ï¼š<code>å…«è¿›åˆ¶æ•°å­—è¡¨ç¤ºæ³•</code>æˆ–<code>ç¬¦å·è¡¨ç¤ºæ³•</code>ã€‚</p><table><thead><tr><th style="text-align:center">å…«è¿›åˆ¶</th><th style="text-align:center">äºŒè¿›åˆ¶</th><th style="text-align:center">æ–‡ä»¶æ¨¡å¼</th></tr></thead><tbody><tr><td style="text-align:center"><code>0</code></td><td style="text-align:center"><code>000</code></td><td style="text-align:center"><code>---</code></td></tr><tr><td style="text-align:center"><code>1</code></td><td style="text-align:center"><code>001</code></td><td style="text-align:center"><code>--x</code></td></tr><tr><td style="text-align:center"><code>2</code></td><td style="text-align:center"><code>010</code></td><td style="text-align:center"><code>-w-</code></td></tr><tr><td style="text-align:center"><code>3</code></td><td style="text-align:center"><code>011</code></td><td style="text-align:center"><code>-wx</code></td></tr><tr><td style="text-align:center"><code>4</code></td><td style="text-align:center"><code>100</code></td><td style="text-align:center"><code>r--</code></td></tr><tr><td style="text-align:center"><code>5</code></td><td style="text-align:center"><code>101</code></td><td style="text-align:center"><code>r-x</code></td></tr><tr><td style="text-align:center"><code>6</code></td><td style="text-align:center"><code>110</code></td><td style="text-align:center"><code>rw-</code></td></tr><tr><td style="text-align:center"><code>7</code></td><td style="text-align:center"><code>111</code></td><td style="text-align:center"><code>rwx</code></td></tr></tbody></table><p>å¸¸ç”¨æƒé™ï¼š<code>7 (rwx)</code>ï¼Œ<code>6 (rw-)</code>ï¼Œ<code>5 (r-x)</code>ï¼Œ<code>4 (r--)</code>ï¼Œå’Œ <code>0 (-â€“)</code>ã€‚</p><table><thead><tr><th style="text-align:center">ç¬¦å·</th><th style="text-align:left">è§£é‡Š</th></tr></thead><tbody><tr><td style="text-align:center"><code>u</code></td><td style="text-align:left"><code>user</code>çš„ç®€å†™ï¼Œæ„æ€æ˜¯æ–‡ä»¶æˆ–ç›®å½•çš„æ‰€æœ‰è€…ã€‚</td></tr><tr><td style="text-align:center"><code>g</code></td><td style="text-align:left"><code>groups</code>çš„ç®€å†™ï¼Œç”¨æˆ·ç»„ã€‚</td></tr><tr><td style="text-align:center"><code>o</code></td><td style="text-align:left"><code>others</code>çš„ç®€å†™ï¼Œæ„æ€æ˜¯å…¶ä»–æ‰€æœ‰çš„äººã€‚</td></tr><tr><td style="text-align:center"><code>a</code></td><td style="text-align:left"><code>all</code>çš„ç®€å†™ï¼Œæ˜¯<code>u</code>ã€<code>g</code>å’Œ<code>o</code>ä¸‰è€…çš„è”åˆã€‚</td></tr></tbody></table><p><strong>å¦‚æœæ²¡æœ‰æŒ‡å®šå­—ç¬¦ï¼Œåˆ™å‡å®šä½¿ç”¨<code>all</code>ã€‚</strong></p><p>æƒé™æ“ä½œï¼š</p><ul><li><code>+</code>ï¼šåŠ ä¸Šä¸€ä¸ªæƒé™ã€‚</li><li><code>-</code>ï¼šåˆ æ‰ä¸€ä¸ªæƒé™ã€‚</li><li><code>=</code>ï¼šåªæœ‰æŒ‡å®šçš„æƒé™å¯ç”¨ï¼Œå…¶å®ƒæ‰€æœ‰çš„æƒé™è¢«åˆ é™¤ã€‚</li></ul><p><strong>å¤šç§è®¾å®šå¯ä»¥ç”¨é€—å·åˆ†å¼€ã€‚</strong></p><p><code>u+x,go=rw</code>ï¼šç»™æ–‡ä»¶æ‹¥æœ‰è€…æ‰§è¡Œæƒé™å¹¶ç»™ç»„å’Œå…¶ä»–äººè¯»å’Œæ‰§è¡Œçš„æƒé™ã€‚</p><h2 id="umask"><a class="header-anchor" href="#umask">#</a>umask</h2><p>å½“åˆ›å»ºä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œ<code>umask</code>å‘½ä»¤æ§åˆ¶ç€æ–‡ä»¶çš„é»˜è®¤æƒé™ã€‚<br><code>umask</code>ä»¥æ©ç çš„å½¢å¼æ¥å·¥ä½œï¼Œå’Œç½‘å…³é‚£é‡Œå·®ä¸å¤šï¼Œä¸€èˆ¬æ˜¯<code>022</code>å’Œ<code>002</code>ã€‚</p><p>æ¯”å¦‚è¯´æ­£å¸¸ä¸€ä¸ªæƒé™æ˜¯<code>666</code>ï¼ˆ<code>110 110 110</code>ï¼‰ï¼Œå³<code>rw-rw-rw-</code>ï¼Œè¢«<code>022</code>ï¼ˆ<code>000 010 010</code>ï¼‰çš„<code>umask</code>åä¼šå˜æˆ<code>110 100 100</code>ï¼Œå³<code>644</code>ï¼Œ<code>rw-r--r--</code>ã€‚</p><blockquote><p>è™½ç„¶æˆ‘ä»¬é€šå¸¸çœ‹åˆ°ä¸€ä¸ªå…«è¿›åˆ¶çš„æƒé™æ©ç ç”¨ä¸‰ä½æ•°å­—æ¥è¡¨ç¤ºï¼Œä½†æ˜¯ä»æŠ€æœ¯å±‚é¢ä¸Šæ¥è®²ï¼Œç”¨å››ä½æ•°å­—æ¥è¡¨ç¤ºå®ƒæ›´ç¡®åˆ‡äº›ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºé™¤äº†è¯»å–ã€å†™å…¥å’Œæ‰§è¡Œæƒé™ä¹‹å¤–ï¼Œè¿˜æœ‰å…¶å®ƒè¾ƒå°‘ç”¨åˆ°çš„æƒé™è®¾ç½®ã€‚</p></blockquote><blockquote><p>å…¶ä¸­ä¹‹ä¸€æ˜¯ setuid ä½(å…«è¿›åˆ¶ 4000)ã€‚å½“åº”ç”¨åˆ°ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶æ—¶ï¼Œå®ƒæŠŠæœ‰æ•ˆç”¨æˆ· ID ä»çœŸæ­£çš„ç”¨æˆ·(å®é™…è¿è¡Œç¨‹åºçš„ç”¨æˆ·)è®¾ç½®æˆç¨‹åºæ‰€æœ‰è€…çš„ IDã€‚è¿™ç§æ“ä½œé€šå¸¸ä¼šåº”ç”¨åˆ°ä¸€äº›ç”±è¶…çº§ç”¨æˆ·æ‰€æ‹¥æœ‰çš„ç¨‹åºã€‚å½“ä¸€ä¸ªæ™®é€šç”¨æˆ·è¿è¡Œä¸€ä¸ªç¨‹åºï¼Œè¿™ä¸ªç¨‹åºç”±æ ¹ç”¨æˆ· (root) æ‰€æœ‰ï¼Œå¹¶ä¸”è®¾ç½®äº† setuid ä½ï¼Œè¿™ä¸ªç¨‹åºè¿è¡Œæ—¶å…·æœ‰è¶…çº§ç”¨æˆ·çš„ç‰¹æƒï¼Œè¿™æ ·ç¨‹åºå°±å¯ä»¥è®¿é—®æ™®é€šç”¨æˆ·ç¦æ­¢è®¿é—®çš„æ–‡ä»¶å’Œç›®å½•ã€‚å¾ˆæ˜æ˜¾ï¼Œå› ä¸ºè¿™ä¼šå¼•èµ·å®‰å…¨æ–¹é¢çš„é—®é¢˜ï¼Œæ‰€æœ‰å¯ä»¥è®¾ç½® setuid ä½çš„ç¨‹åºä¸ªæ•°ï¼Œå¿…é¡»æ§åˆ¶åœ¨ç»å¯¹å°çš„èŒƒå›´å†…ã€‚</p></blockquote><blockquote><p>ç¬¬äºŒä¸ªæ˜¯ setgid ä½(å…«è¿›åˆ¶ 2000)ï¼Œè¿™ä¸ªç›¸ä¼¼äº setuid ä½ï¼ŒæŠŠæœ‰æ•ˆç”¨æˆ·ç»„ ID ä»çœŸæ­£çš„ç”¨æˆ·ç»„ ID æ›´æ”¹ä¸ºæ–‡ä»¶æ‰€æœ‰è€…çš„ç»„ IDã€‚å¦‚æœè®¾ç½®äº†ä¸€ä¸ªç›®å½•çš„ setgid ä½ï¼Œåˆ™ç›®å½•ä¸­æ–°åˆ›å»ºçš„æ–‡ä»¶å…·æœ‰è¿™ä¸ªç›®å½•ç”¨æˆ·ç»„çš„æ‰€æœ‰æƒï¼Œè€Œä¸æ˜¯æ–‡ä»¶åˆ›å»ºè€…æ‰€å±ç”¨æˆ·ç»„çš„æ‰€æœ‰æƒã€‚å¯¹äºå…±äº«ç›®å½•æ¥è¯´ï¼Œå½“ä¸€ä¸ªæ™®é€šç”¨æˆ·ç»„ä¸­çš„æˆå‘˜ï¼Œéœ€è¦è®¿é—®å…±äº«ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶ï¼Œè€Œä¸ç®¡æ–‡ä»¶æ‰€æœ‰è€…çš„ä¸»ç”¨æˆ·ç»„æ—¶ï¼Œé‚£ä¹ˆè®¾ç½® setgid ä½å¾ˆæœ‰ç”¨å¤„ã€‚</p></blockquote><blockquote><p>ç¬¬ä¸‰ä¸ªæ˜¯ sticky ä½(å…«è¿›åˆ¶ 1000)ã€‚è¿™ä¸ªç»§æ‰¿äº Unixï¼Œåœ¨ Unix ä¸­ï¼Œå®ƒå¯èƒ½æŠŠä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶æ ‡å¿—ä¸ºâ€œä¸å¯äº¤æ¢çš„â€ã€‚åœ¨ Linux ä¸­ï¼Œä¼šå¿½ç•¥æ–‡ä»¶çš„ sticky ä½ï¼Œä½†æ˜¯å¦‚æœä¸€ä¸ªç›®å½•è®¾ç½®äº† sticky ä½ï¼Œé‚£ä¹ˆå®ƒèƒ½é˜»æ­¢ç”¨æˆ·åˆ é™¤æˆ–é‡å‘½åæ–‡ä»¶ï¼Œé™¤éç”¨æˆ·æ˜¯è¿™ä¸ªç›®å½•çš„æ‰€æœ‰è€…ï¼Œæˆ–è€…æ˜¯æ–‡ä»¶æ‰€æœ‰è€…ï¼Œæˆ–æ˜¯è¶…çº§ç”¨æˆ·ã€‚è¿™ä¸ªç»å¸¸ç”¨æ¥æ§åˆ¶è®¿é—®å…±äº«ç›®å½•ï¼Œæ¯”æ–¹è¯´/tmpã€‚</p></blockquote><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>æ³¨æ„å¯¹äºç¬¦å·é“¾æ¥æ–‡ä»¶ï¼Œå‰©ä½™çš„æ–‡ä»¶å±æ€§æ€»æ˜¯<code>rwxrwxrwx</code>ï¼Œè€Œä¸”éƒ½æ˜¯è™šæ‹Ÿå€¼ã€‚çœŸæ­£çš„æ–‡ä»¶å±æ€§æ˜¯æŒ‡ç¬¦å·é“¾æ¥<code>æ‰€æŒ‡å‘çš„æ–‡ä»¶çš„å±æ€§</code>ã€‚ <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li><li id="fn2" class="footnote-item"><p>è¿™ç§æ–‡ä»¶ç±»å‹æ˜¯æŒ‡æŒ‰ç…§å­—èŠ‚æµæ¥å¤„ç†æ•°æ®çš„è®¾å¤‡ã€‚æ¯”å¦‚è¯´ç»ˆç«¯æœºæˆ–è€…è°ƒåˆ¶è§£è°ƒå™¨ã€‚ <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p></li><li id="fn3" class="footnote-item"><p>è¿™ç§æ–‡ä»¶ç±»å‹æ˜¯æŒ‡æŒ‰ç…§æ•°æ®å—æ¥å¤„ç†æ•°æ®çš„è®¾å¤‡ï¼Œä¾‹å¦‚ä¸€ä¸ªç¡¬ç›˜æˆ–è€… CD-ROM ç›˜ã€‚ <a href="#fnref3" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> shell </tag>
            
            <tag> bash </tag>
            
            <tag> shell note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šå¿«ä¹çš„Linuxå‘½ä»¤è¡Œã€‹ç¬”è®°ï¼ˆ10ï¼‰</title>
      <link href="/blog/2020/11/17/the-linux-command-line-note-10/"/>
      <url>/blog/2020/11/17/the-linux-command-line-note-10/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹"><a class="header-anchor" href="#ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹">#</a>ã€Šå¿«ä¹çš„ Linux å‘½ä»¤è¡Œã€‹</h1><h2 id="æ¢å¤-alt-é”®åŠŸèƒ½"><a class="header-anchor" href="#æ¢å¤-alt-é”®åŠŸèƒ½">#</a>æ¢å¤ alt é”®åŠŸèƒ½</h2><p>åœ¨<code>MacOS</code>çš„<code>Terminal</code>é‡Œï¼Œç”¨<code>alt</code>ç»„åˆé”®æ€»æ˜¯ä¸å¥½ä½¿ï¼Œè¿™æ¬¡æŸ¥äº†ä¸€ä¸‹ï¼Œé—®é¢˜è§£å†³ã€‚</p><p><code>Terminal</code> -&gt; <code>Preferences</code>ï¼ˆå¿«æ·é”®<code>cmd + ,</code>ï¼‰ -&gt; <code>Profiles</code> -&gt; <code>Keyboard</code> -&gt; <code>Use Option as Meta key</code></p><center><!-- //onns.xyz/blog/image --><p><img src="//onns.xyz/blog/image/20201117-1.jpg" alt="Use Option as Meta key"></p></center><h3 id="å‚è€ƒé“¾æ¥"><a class="header-anchor" href="#å‚è€ƒé“¾æ¥">#</a>å‚è€ƒé“¾æ¥</h3><ul><li><a href="https://superuser.com/questions/496090/how-to-use-alt-commands-in-a-terminal-on-os-x" target="_blank" rel="noopener">How to use ALT commands in a terminal on OS X?</a></li></ul><a id="more"></a><h2 id="ç§»åŠ¨å…‰æ ‡"><a class="header-anchor" href="#ç§»åŠ¨å…‰æ ‡">#</a>ç§»åŠ¨å…‰æ ‡</h2><table><thead><tr><th style="text-align:center">æŒ‰é”®</th><th style="text-align:left">æ•ˆæœ</th></tr></thead><tbody><tr><td style="text-align:center"><code>Ctrl-a</code></td><td style="text-align:left">ç§»åŠ¨å…‰æ ‡åˆ°è¡Œé¦–ã€‚</td></tr><tr><td style="text-align:center"><code>Ctrl-e</code></td><td style="text-align:left">ç§»åŠ¨å…‰æ ‡åˆ°è¡Œå°¾ã€‚</td></tr><tr><td style="text-align:center"><code>Ctrl-f</code></td><td style="text-align:left">å…‰æ ‡åç§»ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td style="text-align:center"><code>Ctrl-b</code></td><td style="text-align:left">å…‰æ ‡å‰ç§»ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td style="text-align:center"><code>Alt-f</code></td><td style="text-align:left">å…‰æ ‡åç§»ä¸€ä¸ªå­—ã€‚</td></tr><tr><td style="text-align:center"><code>Alt-b</code></td><td style="text-align:left">å…‰æ ‡å‰ç§»ä¸€ä¸ªå­—ã€‚</td></tr><tr><td style="text-align:center"><code>Ctrl-l</code></td><td style="text-align:left">æ¸…ç©ºå±å¹•ï¼Œç§»åŠ¨å…‰æ ‡åˆ°å·¦ä¸Šè§’ã€‚</td></tr></tbody></table><h2 id="ä¿®æ”¹æ–‡æœ¬"><a class="header-anchor" href="#ä¿®æ”¹æ–‡æœ¬">#</a>ä¿®æ”¹æ–‡æœ¬</h2><table><thead><tr><th style="text-align:center">æŒ‰é”®</th><th style="text-align:left">æ•ˆæœ</th></tr></thead><tbody><tr><td style="text-align:center"><code>Ctrl-d</code></td><td style="text-align:left">åˆ é™¤å…‰æ ‡ä½ç½®çš„å­—ç¬¦ã€‚</td></tr><tr><td style="text-align:center"><code>Ctrl-t</code></td><td style="text-align:left">å…‰æ ‡ä½ç½®çš„å­—ç¬¦å’Œå…‰æ ‡å‰é¢çš„å­—ç¬¦äº’æ¢ä½ç½®ã€‚</td></tr><tr><td style="text-align:center"><code>Alt-t</code></td><td style="text-align:left">å…‰æ ‡ä½ç½®çš„å­—å’Œå…¶å‰é¢çš„å­—äº’æ¢ä½ç½®ã€‚</td></tr><tr><td style="text-align:center"><code>Alt-l</code></td><td style="text-align:left">æŠŠä»å…‰æ ‡ä½ç½®åˆ°å­—å°¾çš„å­—ç¬¦è½¬æ¢æˆå°å†™å­—æ¯ã€‚</td></tr><tr><td style="text-align:center"><code>Alt-u</code></td><td style="text-align:left">æŠŠä»å…‰æ ‡ä½ç½®åˆ°å­—å°¾çš„å­—ç¬¦è½¬æ¢æˆå¤§å†™å­—æ¯ã€‚</td></tr></tbody></table><p><code>ctrl + t</code>è¿™ä¸ªå¾ˆæœ‰ç”¨ï¼Œå› ä¸ºå…¶å®ç»å¸¸éƒ½æ˜¯æ‰“åä¸¤ä¸ªå­—æ¯ï¼Œæ¯”å¦‚æˆ‘ï¼Œç»å¸¸æŠŠ<code>conda activate</code>æ‰“æˆ<code>conda acitvate</code>ã€‚ä½†æ˜¯æˆ‘åœ¨<code>macOS</code>ä¸Šæµ‹è¯•çš„æ—¶å€™ï¼Œç¡®å®æ˜¯<strong>å…‰æ ‡ä½ç½®çš„å­—ç¬¦å’Œå…‰æ ‡å‰é¢çš„å­—ç¬¦äº’æ¢ä½ç½®</strong>ï¼Œä½†æ˜¯æ¢ä½å®Œä¹‹åï¼Œ<strong>å…‰æ ‡å¾€åæŒªäº†ä¸€ä¸ªä½ç½®</strong>ï¼ˆå¦‚æœåé¢è¿˜æœ‰æ–‡æœ¬çš„è¯ï¼‰ã€‚</p><h2 id="å‰ªåˆ‡ç²˜è´´"><a class="header-anchor" href="#å‰ªåˆ‡ç²˜è´´">#</a>å‰ªåˆ‡ç²˜è´´</h2><p><code>Readline</code>çš„æ–‡æ¡£ä½¿ç”¨æœ¯è¯­ <code>killing</code> å’Œ <code>yanking</code> æ¥æŒ‡æˆ‘ä»¬å¹³å¸¸æ‰€è¯´çš„å‰ªåˆ‡å’Œç²˜è´´ã€‚å‰ªåˆ‡ä¸‹æ¥çš„æœ¬æ–‡è¢«å­˜å‚¨åœ¨ä¸€ä¸ªå«åš<code>å‰ªåˆ‡ç¯</code>ï¼ˆkill-ringï¼‰çš„ç¼“å†²åŒºä¸­ã€‚</p><table><thead><tr><th style="text-align:center">æŒ‰é”®</th><th style="text-align:left">æ•ˆæœ</th></tr></thead><tbody><tr><td style="text-align:center"><code>Ctrl-k</code></td><td style="text-align:left">å‰ªåˆ‡ä»å…‰æ ‡ä½ç½®åˆ°è¡Œå°¾çš„æ–‡æœ¬ã€‚</td></tr><tr><td style="text-align:center"><code>Ctrl-u</code></td><td style="text-align:left">å‰ªåˆ‡ä»å…‰æ ‡ä½ç½®åˆ°è¡Œé¦–çš„æ–‡æœ¬ã€‚</td></tr><tr><td style="text-align:center"><code>Alt-d</code></td><td style="text-align:left">å‰ªåˆ‡ä»å…‰æ ‡ä½ç½®åˆ°è¯å°¾çš„æ–‡æœ¬ã€‚</td></tr><tr><td style="text-align:center"><code>Alt-Backspace</code></td><td style="text-align:left">å‰ªåˆ‡ä»å…‰æ ‡ä½ç½®åˆ°è¯å¤´çš„æ–‡æœ¬ã€‚å¦‚æœå…‰æ ‡åœ¨ä¸€ä¸ªå•è¯çš„å¼€å¤´ï¼Œå‰ªåˆ‡å‰ä¸€ä¸ªå•è¯ã€‚</td></tr><tr><td style="text-align:center"><code>Ctrl-y</code></td><td style="text-align:left">æŠŠå‰ªåˆ‡ç¯ä¸­çš„æ–‡æœ¬ç²˜è´´åˆ°å…‰æ ‡ä½ç½®ã€‚</td></tr></tbody></table><p><code>Alt-Backspace</code>å¦‚æœå…‰æ ‡åœ¨ä¸€ä¸ªå•è¯çš„å¼€å¤´ï¼Œå‰ªåˆ‡å‰ä¸€ä¸ªå•è¯ï¼Œ<strong>åŒæ—¶ä¼šæŠŠä¸¤ä¸ªè¯ä¹‹é—´çš„ç©ºæ ¼ä¹Ÿä¸€èµ·</strong>å‰ªåˆ‡æ‰å¹¶ä¸”å­˜åœ¨å‰ªåˆ‡ç¯é‡Œã€‚</p><h2 id="è‡ªåŠ¨è¡¥å…¨"><a class="header-anchor" href="#è‡ªåŠ¨è¡¥å…¨">#</a>è‡ªåŠ¨è¡¥å…¨</h2><table><thead><tr><th style="text-align:center">æŒ‰é”®</th><th style="text-align:left">æ•ˆæœ</th></tr></thead><tbody><tr><td style="text-align:center"><code>Alt-?</code></td><td style="text-align:left">æ˜¾ç¤ºå¯èƒ½çš„è‡ªåŠ¨è¡¥å…¨åˆ—è¡¨ã€‚</td></tr><tr><td style="text-align:center"><code>Alt-*</code></td><td style="text-align:left">æ’å…¥æ‰€æœ‰å¯èƒ½çš„è‡ªåŠ¨è¡¥å…¨ã€‚</td></tr></tbody></table><p><code>alt + ?</code>ç­‰æ•ˆäº<code>tab</code>ä¸¤æ¬¡ã€‚</p><p>è¿™ä¿©å‘½ä»¤æˆ‘è¯•ä¸å‡ºæ¥ã€‚ã€‚å¥½åœ¨ç›®å‰ä¹Ÿæ²¡ä»€ä¹ˆç”¨= =ï¼</p><h2 id="å†å²å‘½ä»¤"><a class="header-anchor" href="#å†å²å‘½ä»¤">#</a>å†å²å‘½ä»¤</h2><p><code>bash</code>ç»´æŠ¤ç€ä¸€ä¸ªå·²ç»æ‰§è¡Œè¿‡çš„å‘½ä»¤çš„å†å²åˆ—è¡¨ã€‚è¿™ä¸ªå‘½ä»¤åˆ—è¡¨è¢«ä¿å­˜åœ¨ä½ å®¶ç›®å½•ä¸‹ï¼Œä¸€ä¸ªå«åš<code>.bash_history</code>çš„æ–‡ä»¶é‡Œã€‚</p><p><strong>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œbash ä¼šå­˜å‚¨ä½ æ‰€è¾“å…¥çš„æœ€å <code>500</code> ä¸ªå‘½ä»¤ã€‚</strong></p><p>æ¯ä¸ªå†å²è®°å½•éƒ½æœ‰è¡Œå·ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ç§å«åš<code>å†å²å‘½ä»¤å±•å¼€</code>çš„æ–¹å¼ï¼Œæ¥è°ƒç”¨è¡Œå·æ‰€ä»£è¡¨çš„è¿™ä¸€è¡Œå‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!line-number</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">history</span></span><br><span class="line">  995  uniq --<span class="built_in">help</span></span><br><span class="line">  996  uniq</span><br><span class="line">  997  ls /bin /usr/bin | sort | uniq -d | less</span><br><span class="line">  998  ssh root@xiaoxia.onns.xyz</span><br><span class="line">  999  blog</span><br><span class="line"> 1000  cpblog</span><br><span class="line"> 1001  ssh root@xiaoxia.onns.xyz</span><br><span class="line"> 1002  clear</span><br><span class="line"> 1003  ashdasda  adad</span><br><span class="line"> 1004  askdhakdjah akjsdhakjdhakjd akdjhakjdhajdk</span><br><span class="line"> 1005  hkasdhakjsdha ahdsaksjdhktttttt[</span><br><span class="line"> 1006  abcd123456abcd123456abcd12abcd123456abcd123456abcd123456 3456 ahskdasdjha</span><br><span class="line"> 1007  <span class="built_in">which</span>-command ls</span><br><span class="line"> 1008  ls D</span><br><span class="line"> 1009  <span class="built_in">history</span></span><br><span class="line"> 1010  ls /bin /usr/bin | sort | uniq -d | less</span><br><span class="line">$ !995</span><br><span class="line">uniq --<span class="built_in">help</span></span><br><span class="line">uniq: illegal option -- -</span><br><span class="line">usage: uniq [-c | -d | -u] [-i] [-f fields] [-s chars] [input [output]]</span><br></pre></td></tr></table></figure><p><strong><code>bash</code>ä¹Ÿå…·æœ‰å¢é‡æœç´¢å†å²åˆ—è¡¨çš„èƒ½åŠ›ã€‚</strong><br>è¾“å…¥ <code>Ctrl-r</code> æ¥å¯åŠ¨å¢é‡æœç´¢ï¼Œæ¥ç€è¾“å…¥ä½ è¦å¯»æ‰¾çš„å­—ã€‚å½“ä½ æ‰¾åˆ°å®ƒä»¥åï¼Œä½ å¯ä»¥æ•²å…¥ <code>Enter</code> æ¥æ‰§è¡Œå‘½ä»¤ï¼Œæˆ–è€…è¾“å…¥ <code>Ctrl-j</code>ï¼Œä»å†å²åˆ—è¡¨ä¸­å¤åˆ¶è¿™ä¸€è¡Œåˆ°å½“å‰å‘½ä»¤è¡Œã€‚å†æ¬¡è¾“å…¥ <code>Ctrl-r</code>ï¼Œæ¥æ‰¾åˆ°ä¸‹ä¸€ä¸ªåŒ¹é…é¡¹(å†å²åˆ—è¡¨ä¸­å‘ä¸Šç§»åŠ¨)ã€‚è¾“å…¥ <code>Ctrl-g</code> æˆ–è€… <code>Ctrl-c</code>ï¼Œé€€å‡ºæœç´¢ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$</span><br><span class="line">bck-i-search: _</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ uniq --<span class="built_in">help</span></span><br><span class="line">bck-i-search: un_</span><br></pre></td></tr></table></figure><p>è¯´å®è¯ï¼Œå¥½éº»çƒ¦ï¼Œæˆ‘è¿˜æ˜¯å–œæ¬¢ç”¨<code>grep + ç®¡é“</code>ã€‚</p><table><thead><tr><th style="text-align:center">æŒ‰é”®</th><th style="text-align:left">æ•ˆæœ</th></tr></thead><tbody><tr><td style="text-align:center"><code>Ctrl-p</code></td><td style="text-align:left">ç§»åŠ¨åˆ°ä¸Šä¸€ä¸ªå†å²æ¡ç›®ã€‚ç±»ä¼¼äºä¸Šç®­å¤´æŒ‰é”®ã€‚</td></tr><tr><td style="text-align:center"><code>Ctrl-n</code></td><td style="text-align:left">ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå†å²æ¡ç›®ã€‚ç±»ä¼¼äºä¸‹ç®­å¤´æŒ‰é”®ã€‚</td></tr><tr><td style="text-align:center"><code>Alt-&lt;</code></td><td style="text-align:left">ç§»åŠ¨åˆ°å†å²åˆ—è¡¨å¼€å¤´ã€‚</td></tr><tr><td style="text-align:center"><code>Alt-&gt;</code></td><td style="text-align:left">ç§»åŠ¨åˆ°å†å²åˆ—è¡¨ç»“å°¾ï¼Œå³å½“å‰å‘½ä»¤è¡Œã€‚</td></tr><tr><td style="text-align:center"><code>Ctrl-r</code></td><td style="text-align:left">åå‘å¢é‡æœç´¢ã€‚ä»å½“å‰å‘½ä»¤è¡Œå¼€å§‹ï¼Œå‘ä¸Šå¢é‡æœç´¢ã€‚</td></tr><tr><td style="text-align:center"><code>Alt-p</code></td><td style="text-align:left">åå‘æœç´¢ï¼Œéå¢é‡æœç´¢ã€‚(è¾“å…¥è¦æŸ¥æ‰¾çš„å­—ç¬¦ä¸²ï¼ŒæŒ‰ä¸‹ Enter æ¥æ‰§è¡Œæœç´¢)ã€‚</td></tr><tr><td style="text-align:center"><code>Alt-n</code></td><td style="text-align:left">å‘å‰æœç´¢ï¼Œéå¢é‡ã€‚</td></tr><tr><td style="text-align:center"><code>Ctrl-o</code></td><td style="text-align:left">æ‰§è¡Œå†å²åˆ—è¡¨ä¸­çš„å½“å‰é¡¹ï¼Œå¹¶ç§»åˆ°ä¸‹ä¸€ä¸ªã€‚å¦‚æœä½ æƒ³è¦æ‰§è¡Œ å†å²åˆ—è¡¨ä¸­ä¸€ç³»åˆ—çš„å‘½ä»¤ï¼Œè¿™å¾ˆæ–¹ä¾¿ã€‚</td></tr></tbody></table><p>å†å²å‘½ä»¤å±•å¼€ï¼š</p><table><thead><tr><th style="text-align:center">æŒ‰é”®</th><th style="text-align:left">æ•ˆæœ</th></tr></thead><tbody><tr><td style="text-align:center"><code>!!</code></td><td style="text-align:left">é‡å¤æœ€åä¸€æ¬¡æ‰§è¡Œçš„å‘½ä»¤ã€‚å¯èƒ½æŒ‰ä¸‹ä¸Šç®­å¤´æŒ‰é”®å’Œ enter é”® æ›´å®¹æ˜“äº›ã€‚</td></tr><tr><td style="text-align:center"><code>!number</code></td><td style="text-align:left">é‡å¤å†å²åˆ—è¡¨ä¸­ç¬¬ number è¡Œçš„å‘½ä»¤ã€‚</td></tr><tr><td style="text-align:center"><code>!string</code></td><td style="text-align:left">é‡å¤æœ€è¿‘å†å²åˆ—è¡¨ä¸­ï¼Œä»¥è¿™ä¸ªå­—ç¬¦ä¸²å¼€å¤´çš„å‘½ä»¤ã€‚</td></tr><tr><td style="text-align:center"><code>!?string</code></td><td style="text-align:left">é‡å¤æœ€è¿‘å†å²åˆ—è¡¨ä¸­ï¼ŒåŒ…å«è¿™ä¸ªå­—ç¬¦ä¸²çš„å‘½ä»¤ã€‚</td></tr></tbody></table><p><strong>åº”è¯¥å°å¿ƒè°¨æ…åœ°ä½¿ç”¨ <code>!string</code> å’Œ <code>!?string</code> æ ¼å¼ï¼Œé™¤éä½ å®Œå…¨ç¡®ä¿¡å†å²åˆ—è¡¨æ¡ç›®çš„å†…å®¹ã€‚</strong></p>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> shell </tag>
            
            <tag> bash </tag>
            
            <tag> shell note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šå¿«ä¹çš„Linuxå‘½ä»¤è¡Œã€‹ç¬”è®°ï¼ˆ9ï¼‰</title>
      <link href="/blog/2020/11/16/the-linux-command-line-note-9/"/>
      <url>/blog/2020/11/16/the-linux-command-line-note-9/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹"><a class="header-anchor" href="#ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹">#</a>ã€Šå¿«ä¹çš„ Linux å‘½ä»¤è¡Œã€‹</h1><a id="more"></a><h2 id="å­—ç¬¦å±•å¼€"><a class="header-anchor" href="#å­—ç¬¦å±•å¼€">#</a>å­—ç¬¦å±•å¼€</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> *</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> *</span><br><span class="line">anaconda-ks.cfg certbot-auto ls-output.txt uniq-test</span><br></pre></td></tr></table></figure><p><code>shell</code>åœ¨<code>echo</code>å‘½ä»¤è¢«æ‰§è¡Œå‰æŠŠ<code>*</code>å±•å¼€æˆäº†å¦å¤–çš„ä¸œè¥¿ã€‚</p><p>å½“å›è½¦é”®è¢«æŒ‰ä¸‹æ—¶ï¼Œ<code>shell</code>åœ¨å‘½ä»¤è¢«æ‰§è¡Œå‰åœ¨å‘½ä»¤è¡Œä¸Šè‡ªåŠ¨å±•å¼€ä»»ä½•ç¬¦åˆæ¡ä»¶çš„å­—ç¬¦ï¼Œæ‰€ä»¥<code>echo</code>å‘½ä»¤çš„å®é™…å‚æ•°å¹¶ä¸æ˜¯<code>*</code>ï¼Œè€Œæ˜¯å®ƒ<code>å±•å¼€åçš„ç»“æœ</code>ã€‚</p><h2 id="è·¯å¾„åå±•å¼€"><a class="header-anchor" href="#è·¯å¾„åå±•å¼€">#</a>è·¯å¾„åå±•å¼€</h2><p>é€šé…ç¬¦æ‰€ä¾èµ–çš„å·¥ä½œæœºåˆ¶å«åš<code>è·¯å¾„åå±•å¼€</code>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> D*</span><br><span class="line">Desktop Documents Downloads</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> *s</span><br><span class="line">Applications Documents Downloads Movies Pictures sensors</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> [[:upper:]]*</span><br><span class="line">Applications Desktop Documents Downloads Library Movies Music Pictures Postman Public</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> /usr/*/share</span><br><span class="line">/usr/<span class="built_in">local</span>/share</span><br></pre></td></tr></table></figure><p>ä»¥åœ†ç‚¹å­—ç¬¦å¼€å¤´çš„æ–‡ä»¶åæ˜¯éšè—æ–‡ä»¶ï¼Œè·¯å¾„åå±•å¼€ä¹Ÿå°Šé‡è¿™ç§è¡Œä¸ºï¼Œ<code>echo *</code>ä¸ä¼šæ˜¾ç¤ºéšè—æ–‡ä»¶ã€‚</p><p><code>~</code>å½“å®ƒç”¨åœ¨ä¸€ä¸ªå•è¯çš„å¼€å¤´æ—¶ï¼Œå®ƒä¼šå±•å¼€æˆæŒ‡å®šç”¨æˆ·çš„å®¶ç›®å½•åï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šç”¨æˆ·åï¼Œåˆ™å±•å¼€æˆå½“å‰ç”¨æˆ·çš„å®¶ç›®å½•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> ~</span><br><span class="line">/Users/onns</span><br></pre></td></tr></table></figure><p>å¦‚æœæœ‰ç”¨æˆ·<code>foo</code>è¿™ä¸ªå¸å·ï¼Œé‚£ä¹ˆï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> ~foo</span><br><span class="line">/home/foo</span><br></pre></td></tr></table></figure><h2 id="ç®—æœ¯è¡¨è¾¾å¼å±•å¼€"><a class="header-anchor" href="#ç®—æœ¯è¡¨è¾¾å¼å±•å¼€">#</a>ç®—æœ¯è¡¨è¾¾å¼å±•å¼€</h2><p><code>shell</code>åœ¨å±•å¼€ä¸­æ‰§è¡Œç®—æ•°è¡¨è¾¾å¼ï¼Œè¿™å…è®¸æˆ‘ä»¬æŠŠ<code>shell</code>æç¤ºå½“ä½œè®¡ç®—å™¨æ¥ä½¿ç”¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$((expression))</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> $((2*3))</span><br><span class="line">6</span><br></pre></td></tr></table></figure><p><strong>ç®—æœ¯è¡¨è¾¾å¼åªæ”¯æŒæ•´æ•°ã€‚</strong></p><p>ç„¶è€Œæˆ‘å¥½åƒç”¨äº†ä¸æ˜¯æ•´æ•°çš„æ•°ï¼Œä¹Ÿç®—å‡ºæ¥ç»“æœäº†ï¼Œå¯èƒ½å’Œ<code>Linux</code>ç‰ˆæœ¬æœ‰å…³ç³»ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> $((5.2423/2))</span><br><span class="line">2.6211500000000001</span><br></pre></td></tr></table></figure><p>æ”¯æŒçš„è¿ç®—ç¬¦ï¼š<code>+</code> <code>-</code> <code>*</code> <code>/</code> <code>%</code> <code>**</code>ã€‚</p><p>å› ä¸ºåªæ”¯æŒæ•´æ•°ï¼Œæ‰€ä»¥<code>é™¤æ³•çš„ç»“æœä¹Ÿæ˜¯æ•´æ•°</code>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> $((5/2))</span><br><span class="line">2</span><br></pre></td></tr></table></figure><p><strong>åœ¨ç®—æœ¯è¡¨è¾¾å¼ä¸­ç©ºæ ¼å¹¶ä¸é‡è¦ï¼Œå¹¶ä¸”è¡¨è¾¾å¼å¯ä»¥åµŒå¥—ã€‚</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> $(($((5**2)) * 3))</span><br><span class="line">75</span><br></pre></td></tr></table></figure><h2 id="èŠ±æ‹¬å·å±•å¼€"><a class="header-anchor" href="#èŠ±æ‹¬å·å±•å¼€">#</a>èŠ±æ‹¬å·å±•å¼€</h2><p>å¯ä»¥ä»ä¸€ä¸ªåŒ…å«èŠ±æ‹¬å·çš„æ¨¡å¼ä¸­åˆ›å»ºå¤šä¸ªæ–‡æœ¬å­—ç¬¦ä¸²ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> Front-&#123;A,B,C&#125;-Back</span><br><span class="line">Front-A-Back Front-B-Back Front-C-Back</span><br></pre></td></tr></table></figure><p>èŠ±æ‹¬å·å±•å¼€æ¨¡å¼å¯èƒ½åŒ…å«ä¸€ä¸ªå¼€å¤´éƒ¨åˆ†å«åš<code>æŠ¥å¤´</code>ï¼Œä¸€ä¸ªç»“å°¾éƒ¨åˆ†å«åš<code>é™„è¨€</code>ã€‚</p><p><code>èŠ±æ‹¬å·è¡¨è¾¾å¼</code>æœ¬èº«å¯èƒ½åŒ…å«ä¸€ä¸ªç”±<code>é€—å·åˆ†å¼€çš„å­—ç¬¦ä¸²åˆ—è¡¨</code>ï¼Œæˆ–è€…ä¸€ä¸ª<code>æ•´æ•°åŒºé—´</code>ï¼Œæˆ–è€…<code>å•ä¸ªçš„å­—ç¬¦çš„åŒºé—´</code>ã€‚</p><p><strong>è¿™ç§æ¨¡å¼ä¸èƒ½åµŒå…¥ç©ºç™½å­—ç¬¦ã€‚</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> Number_&#123;1..5&#125;</span><br><span class="line">Number_1 Number_2 Number_3 Number_4 Number_5</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> &#123;Z..A&#125;</span><br><span class="line">Z Y X W V U T S R Q P O N M L K J I H G F E D C B A</span><br></pre></td></tr></table></figure><p><strong>èŠ±æ‹¬å·å±•å¼€å¯ä»¥åµŒå¥—ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> a&#123;A&#123;1,2&#125;,B&#123;3,4&#125;&#125;b</span><br><span class="line">aA1b aA2b aB3b aB4b</span><br></pre></td></tr></table></figure><p>è¿˜æœ‰ä¸€äº›<code>å‚æ•°å˜é‡</code>å±•å¼€ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$USER</span></span><br><span class="line">onns</span><br></pre></td></tr></table></figure><p>ä½†åœ¨å‚æ•°å±•å¼€ä¸­ï¼Œå¦‚æœä½ æ‹¼å†™é”™äº†ä¸€ä¸ªå˜é‡åï¼Œ<strong>å±•å¼€ä»ç„¶ä¼šè¿›è¡Œ</strong>ï¼Œåªæ˜¯å±•å¼€çš„ç»“æœæ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$SUER</span></span><br></pre></td></tr></table></figure><h2 id="å‘½ä»¤æ›¿æ¢"><a class="header-anchor" href="#å‘½ä»¤æ›¿æ¢">#</a>å‘½ä»¤æ›¿æ¢</h2><p>å‘½ä»¤æ›¿æ¢å…è®¸æˆ‘ä»¬æŠŠä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºä½œä¸ºä¸€ä¸ªå±•å¼€æ¨¡å¼æ¥ä½¿ç”¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> $(ls)</span><br><span class="line">Applications Desktop Documents Downloads Library Movies Music Pictures Postman Public go node sensors</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ls -l $(<span class="built_in">which</span> cp)</span><br><span class="line">-rwxr-xr-x  1 root  wheel  42272 May 28 07:37 /bin/cp</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ file $(ls /usr/bin/* | grep zip)</span><br><span class="line">/usr/bin/bunzip2:        Mach-O 64-bit executable x86_64</span><br><span class="line">/usr/bin/bzip2:          Mach-O 64-bit executable x86_64</span><br><span class="line">/usr/bin/bzip2recover:   Mach-O 64-bit executable x86_64</span><br><span class="line">/usr/bin/funzip:         Mach-O 64-bit executable x86_64</span><br><span class="line">/usr/bin/gunzip:         Mach-O 64-bit executable x86_64</span><br><span class="line">/usr/bin/gzip:           Mach-O 64-bit executable x86_64</span><br><span class="line">/usr/bin/unzip:          Mach-O 64-bit executable x86_64</span><br><span class="line">/usr/bin/unzipsfx:       Mach-O 64-bit executable x86_64</span><br><span class="line">/usr/bin/zip:            Mach-O 64-bit executable x86_64</span><br><span class="line">/usr/bin/zipcloak:       Mach-O 64-bit executable x86_64</span><br><span class="line">/usr/bin/zipdetails:     Perl script text executable</span><br><span class="line">/usr/bin/zipdetails5.18: Perl script text executable</span><br><span class="line">/usr/bin/zipdetails5.28: Perl script text executable</span><br><span class="line">/usr/bin/zipgrep:        POSIX shell script text executable, ASCII text</span><br><span class="line">/usr/bin/zipinfo:        Mach-O 64-bit executable x86_64</span><br><span class="line">/usr/bin/zipnote:        Mach-O 64-bit executable x86_64</span><br><span class="line">/usr/bin/zipsplit:       Mach-O 64-bit executable x86_64</span><br></pre></td></tr></table></figure><p>åœ¨æ—§ç‰ˆ<code>shell</code>ç¨‹åºä¸­ï¼Œæœ‰å¦ä¸€ç§è¯­æ³•ä¹Ÿæ”¯æŒå‘½ä»¤æ›¿æ¢ï¼Œä½¿ç”¨<code>å€’å¼•å·</code>æ¥ä»£æ›¿ç¾å…ƒç¬¦å·å’Œæ‹¬å·ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ls -l `<span class="built_in">which</span> cp`</span><br><span class="line">-rwxr-xr-x  1 root  wheel  42272 May 28 07:37 /bin/cp</span><br></pre></td></tr></table></figure><h2 id="å¼•ç”¨"><a class="header-anchor" href="#å¼•ç”¨">#</a>å¼•ç”¨</h2><p>ç”¨<code>åŒå¼•å·</code>åŒ…è£¹çš„å­—ç¬¦ä¸²ï¼Œ<code>å•è¯åˆ†å‰²</code>ã€<code>è·¯å¾„åå±•å¼€</code>ã€<code>æ³¢æµªçº¿å±•å¼€</code>å’Œ<code>èŠ±æ‹¬å·å±•å¼€</code>ä¼šå¤±æ•ˆï¼Œ<code>å‚æ•°å±•å¼€</code>ã€ <code>ç®—æœ¯å±•å¼€</code>å’Œ<code>å‘½ä»¤æ›¿æ¢</code>ä»ç„¶æ‰§è¡Œã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">"<span class="variable">$USER</span> <span class="variable">$((2+2)</span>) <span class="variable">$(cal)</span>"</span></span><br><span class="line">onns 4    November 2020      </span><br><span class="line">Su Mo Tu We Th Fr Sa  </span><br><span class="line"> 1  2  3  4  5  6  7  </span><br><span class="line"> 8  9 10 11 12 13 14  </span><br><span class="line">15 16 17 18 19 20 21  </span><br><span class="line">22 23 24 25 26 27 28  </span><br><span class="line">29 30</span><br></pre></td></tr></table></figure><p>ä¾‹å¤–çš„æ˜¯<code>$</code> <code>\</code> <code>`</code>ã€‚</p><p>åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œå•è¯åˆ†å‰²æœºåˆ¶ä¼šåœ¨å•è¯ä¸­å¯»æ‰¾<code>ç©ºæ ¼</code>ï¼Œ<code>åˆ¶è¡¨ç¬¦</code>ï¼Œå’Œ<code>æ¢è¡Œç¬¦</code>ï¼Œå¹¶æŠŠå®ƒä»¬çœ‹ä½œå•è¯ä¹‹é—´çš„ç•Œå®šç¬¦ã€‚è¿™æ„å‘³ç€æ— å¼•ç”¨çš„ç©ºæ ¼ï¼Œåˆ¶è¡¨ç¬¦å’Œæ¢è¡Œç¬¦éƒ½ä¸æ˜¯æ–‡æœ¬çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒä»¬åªä½œä¸º<code>åˆ†éš”ç¬¦</code>ä½¿ç”¨ã€‚</p><p>è™½ç„¶å‘½ä»¤æ›¿æ¢è¿˜æœ‰æ•ˆæœï¼Œä½†æ˜¯æœ‰æ—¶å€™å¯èƒ½ä¼šæœ‰ç”¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> $(cal)</span><br><span class="line">November 2020 Su Mo Tu We Th Fr Sa 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30</span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">"<span class="variable">$(cal)</span>"</span></span><br><span class="line">   November 2020      </span><br><span class="line">Su Mo Tu We Th Fr Sa  </span><br><span class="line"> 1  2  3  4  5  6  7  </span><br><span class="line"> 8  9 10 11 12 13 14  </span><br><span class="line">15 16 17 18 19 20 21  </span><br><span class="line">22 23 24 25 26 27 28  </span><br><span class="line">29 30</span><br></pre></td></tr></table></figure><p>å¦‚æœéœ€è¦ç¦æ­¢æ‰€æœ‰çš„å±•å¼€ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨<code>å•å¼•å·</code>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">'$USER $((2+2)) $(cal)'</span></span><br><span class="line"><span class="variable">$USER</span> $((2+2)) $(cal)</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ç”¨å•ä¸ªçš„è½¬ä¹‰å­—ç¬¦åæ–œæ <code>\</code>ã€‚</p><p><strong>æ³¨æ„åœ¨å•å¼•å·ä¸­ï¼Œåæ–œæ å¤±å»å®ƒçš„ç‰¹æ®Šå«ä¹‰ï¼Œå®ƒè¢«çœ‹ä½œæ™®é€šå­—ç¬¦ã€‚</strong></p>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> shell </tag>
            
            <tag> bash </tag>
            
            <tag> shell note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šå¿«ä¹çš„Linuxå‘½ä»¤è¡Œã€‹ç¬”è®°ï¼ˆ8ï¼‰</title>
      <link href="/blog/2020/11/15/the-linux-command-line-note-8/"/>
      <url>/blog/2020/11/15/the-linux-command-line-note-8/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹"><a class="header-anchor" href="#ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹">#</a>ã€Šå¿«ä¹çš„ Linux å‘½ä»¤è¡Œã€‹</h1><a id="more"></a><h2 id="sort"><a class="header-anchor" href="#sort">#</a>sort</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">$ sort --<span class="built_in">help</span></span><br><span class="line">Usage: sort [OPTION]... [FILE]...</span><br><span class="line">  or:  sort [OPTION]... --files0-from=F</span><br><span class="line">Write sorted concatenation of all FILE(s) to standard output.</span><br><span class="line"></span><br><span class="line">Mandatory arguments to long options are mandatory <span class="keyword">for</span> short options too.</span><br><span class="line">Ordering options:</span><br><span class="line"></span><br><span class="line">  -b, --ignore-leading-blanks  ignore leading blanks</span><br><span class="line">  -d, --dictionary-order      consider only blanks and alphanumeric characters</span><br><span class="line">  -f, --ignore-case           fold lower <span class="keyword">case</span> to upper <span class="keyword">case</span> characters</span><br><span class="line">  -g, --general-numeric-sort  compare according to general numerical value</span><br><span class="line">  -i, --ignore-nonprinting    consider only printable characters</span><br><span class="line">  -M, --month-sort            compare (unknown) &lt; <span class="string">'JAN'</span> &lt; ... &lt; <span class="string">'DEC'</span></span><br><span class="line">  -h, --human-numeric-sort    compare human readable numbers (e.g., 2K 1G)</span><br><span class="line">  -n, --numeric-sort          compare according to string numerical value</span><br><span class="line">  -R, --random-sort           sort by random <span class="built_in">hash</span> of keys</span><br><span class="line">      --random-source=FILE    get random bytes from FILE</span><br><span class="line">  -r, --reverse               reverse the result of comparisons</span><br><span class="line">      --sort=WORD             sort according to WORD:</span><br><span class="line">                                general-numeric -g, human-numeric -h, month -M,</span><br><span class="line">                                numeric -n, random -R, version -V</span><br><span class="line">  -V, --version-sort          natural sort of (version) numbers within text</span><br><span class="line"></span><br><span class="line">Other options:</span><br><span class="line"></span><br><span class="line">      --batch-size=NMERGE   merge at most NMERGE inputs at once;</span><br><span class="line">                            <span class="keyword">for</span> more use temp files</span><br><span class="line">  -c, --check, --check=diagnose-first  check <span class="keyword">for</span> sorted input; <span class="keyword">do</span> not sort</span><br><span class="line">  -C, --check=quiet, --check=silent  like -c, but <span class="keyword">do</span> not report first bad line</span><br><span class="line">      --compress-program=PROG  compress temporaries with PROG;</span><br><span class="line">                              decompress them with PROG -d</span><br><span class="line">      --debug               annotate the part of the line used to sort,</span><br><span class="line">                              and warn about questionable usage to stderr</span><br><span class="line">      --files0-from=F       <span class="built_in">read</span> input from the files specified by</span><br><span class="line">                            NUL-terminated names <span class="keyword">in</span> file F;</span><br><span class="line">                            If F is - <span class="keyword">then</span> <span class="built_in">read</span> names from standard input</span><br><span class="line">  -k, --key=KEYDEF          sort via a key; KEYDEF gives location and <span class="built_in">type</span></span><br><span class="line">  -m, --merge               merge already sorted files; <span class="keyword">do</span> not sort</span><br><span class="line">  -o, --output=FILE         write result to FILE instead of standard output</span><br><span class="line">  -s, --stable              stabilize sort by disabling last-resort comparison</span><br><span class="line">  -S, --buffer-size=SIZE    use SIZE <span class="keyword">for</span> main memory buffer</span><br><span class="line">  -t, --field-separator=SEP  use SEP instead of non-blank to blank transition</span><br><span class="line">  -T, --temporary-directory=DIR  use DIR <span class="keyword">for</span> temporaries, not <span class="variable">$TMPDIR</span> or /tmp;</span><br><span class="line">                              multiple options specify multiple directories</span><br><span class="line">      --parallel=N          change the number of sorts run concurrently to N</span><br><span class="line">  -u, --unique              with -c, check <span class="keyword">for</span> strict ordering;</span><br><span class="line">                              without -c, output only the first of an equal run</span><br><span class="line">  -z, --zero-terminated     end lines with 0 byte, not newline</span><br><span class="line">      --<span class="built_in">help</span>     display this <span class="built_in">help</span> and <span class="built_in">exit</span></span><br><span class="line">      --version  output version information and <span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line">KEYDEF is F[.C][OPTS][,F[.C][OPTS]] <span class="keyword">for</span> start and stop position, <span class="built_in">where</span> F is a</span><br><span class="line">field number and C a character position <span class="keyword">in</span> the field; both are origin 1, and</span><br><span class="line">the stop position defaults to the line<span class="string">'s end.  If neither -t nor -b is in</span></span><br><span class="line"><span class="string">effect, characters in a field are counted from the beginning of the preceding</span></span><br><span class="line"><span class="string">whitespace.  OPTS is one or more single-letter ordering options [bdfgiMhnRrV],</span></span><br><span class="line"><span class="string">which override global ordering options for that key.  If no key is given, use</span></span><br><span class="line"><span class="string">the entire line as the key.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">SIZE may be followed by the following multiplicative suffixes:</span></span><br><span class="line"><span class="string">% 1% of memory, b 1, K 1024 (default), and so on for M, G, T, P, E, Z, Y.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">With no FILE, or when FILE is -, read standard input.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">*** WARNING ***</span></span><br><span class="line"><span class="string">The locale specified by the environment affects sort order.</span></span><br><span class="line"><span class="string">Set LC_ALL=C to get the traditional sort order that uses</span></span><br><span class="line"><span class="string">native byte values.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">GNU coreutils online help: &lt;http://www.gnu.org/software/coreutils/&gt;</span></span><br><span class="line"><span class="string">Report sort translation bugs to &lt;http://translationproject.org/team/&gt;</span></span><br><span class="line"><span class="string">For complete documentation, run: info coreutils '</span>sort invocation<span class="string">'</span></span><br></pre></td></tr></table></figure><ul><li><code>-b</code> å¿½ç•¥æ¯è¡Œå‰é¢å¼€å§‹å‡ºçš„ç©ºæ ¼å­—ç¬¦ã€‚</li><li><code>-c</code> æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å·²ç»æŒ‰ç…§é¡ºåºæ’åºã€‚</li><li><code>-d</code> æ’åºæ—¶ï¼Œå¤„ç†è‹±æ–‡å­—æ¯ã€æ•°å­—åŠç©ºæ ¼å­—ç¬¦å¤–ï¼Œå¿½ç•¥å…¶ä»–çš„å­—ç¬¦ã€‚</li><li><code>-f</code> æ’åºæ—¶ï¼Œå°†å°å†™å­—æ¯è§†ä¸ºå¤§å†™å­—æ¯ã€‚</li><li><code>-i</code> æ’åºæ—¶ï¼Œé™¤äº† 040 è‡³ 176 ä¹‹é—´çš„ ASCII å­—ç¬¦å¤–ï¼Œå¿½ç•¥å…¶ä»–çš„å­—ç¬¦ã€‚</li><li><code>-m</code> å°†å‡ ä¸ªæ’åºå¥½çš„æ–‡ä»¶è¿›è¡Œåˆå¹¶ã€‚</li><li><code>-M</code> å°†å‰é¢ 3 ä¸ªå­—æ¯ä¾ç…§æœˆä»½çš„ç¼©å†™è¿›è¡Œæ’åºã€‚</li><li><code>-n</code> ä¾ç…§æ•°å€¼çš„å¤§å°æ’åºã€‚</li><li><code>-u</code> æ„å‘³ç€æ˜¯å”¯ä¸€çš„(unique)ï¼Œè¾“å‡ºçš„ç»“æœæ˜¯å»å®Œé‡äº†çš„ã€‚</li><li><code>-o</code>&lt;è¾“å‡ºæ–‡ä»¶&gt; å°†æ’åºåçš„ç»“æœå­˜å…¥æŒ‡å®šçš„æ–‡ä»¶ã€‚</li><li><code>-r</code> ä»¥ç›¸åçš„é¡ºåºæ¥æ’åºã€‚</li><li><code>-t&lt;åˆ†éš”å­—ç¬¦&gt;</code> æŒ‡å®šæ’åºæ—¶æ‰€ç”¨çš„æ ä½åˆ†éš”å­—ç¬¦ã€‚</li><li><code>+&lt;èµ·å§‹æ ä½&gt;-&lt;ç»“æŸæ ä½&gt;</code> ä»¥æŒ‡å®šçš„æ ä½æ¥æ’åºï¼ŒèŒƒå›´ç”±èµ·å§‹æ ä½åˆ°ç»“æŸæ ä½çš„å‰ä¸€æ ä½ã€‚</li><li><code>--help</code> æ˜¾ç¤ºå¸®åŠ©ã€‚</li><li><code>--version</code> æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ã€‚</li></ul><p>æ’åºå‘½ä»¤ï¼Œé»˜è®¤æ˜¯æŒ‰ç…§å­—å…¸åºæ’åºã€‚</p><h2 id="uniq"><a class="header-anchor" href="#uniq">#</a>uniq</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">$ uniq --<span class="built_in">help</span></span><br><span class="line">Usage: uniq [OPTION]... [INPUT [OUTPUT]]</span><br><span class="line">Filter adjacent matching lines from INPUT (or standard input),</span><br><span class="line">writing to OUTPUT (or standard output).</span><br><span class="line"></span><br><span class="line">With no options, matching lines are merged to the first occurrence.</span><br><span class="line"></span><br><span class="line">Mandatory arguments to long options are mandatory <span class="keyword">for</span> short options too.</span><br><span class="line">  -c, --count           prefix lines by the number of occurrences</span><br><span class="line">  -d, --repeated        only <span class="built_in">print</span> duplicate lines, one <span class="keyword">for</span> each group</span><br><span class="line">  -D, --all-repeated[=METHOD]  <span class="built_in">print</span> all duplicate lines</span><br><span class="line">                          groups can be delimited with an empty line</span><br><span class="line">                          METHOD=&#123;none(default),prepend,separate&#125;</span><br><span class="line">  -f, --skip-fields=N   avoid comparing the first N fields</span><br><span class="line">      --group[=METHOD]  show all items, separating groups with an empty line</span><br><span class="line">                          METHOD=&#123;separate(default),prepend,append,both&#125;</span><br><span class="line">  -i, --ignore-case     ignore differences <span class="keyword">in</span> <span class="keyword">case</span> when comparing</span><br><span class="line">  -s, --skip-chars=N    avoid comparing the first N characters</span><br><span class="line">  -u, --unique          only <span class="built_in">print</span> unique lines</span><br><span class="line">  -z, --zero-terminated  end lines with 0 byte, not newline</span><br><span class="line">  -w, --check-chars=N   compare no more than N characters <span class="keyword">in</span> lines</span><br><span class="line">      --<span class="built_in">help</span>     display this <span class="built_in">help</span> and <span class="built_in">exit</span></span><br><span class="line">      --version  output version information and <span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line">A field is a run of blanks (usually spaces and/or TABs), <span class="keyword">then</span> non-blank</span><br><span class="line">characters.  Fields are skipped before chars.</span><br><span class="line"></span><br><span class="line">Note: <span class="string">'uniq'</span> does not detect repeated lines unless they are adjacent.</span><br><span class="line">You may want to sort the input first, or use <span class="string">'sort -u'</span> without <span class="string">'uniq'</span>.</span><br><span class="line">Also, comparisons honor the rules specified by <span class="string">'LC_COLLATE'</span>.</span><br><span class="line"></span><br><span class="line">GNU coreutils online <span class="built_in">help</span>: &lt;http://www.gnu.org/software/coreutils/&gt;</span><br><span class="line">Report uniq translation bugs to &lt;http://translationproject.org/team/&gt;</span><br><span class="line">For complete documentation, run: info coreutils <span class="string">'uniq invocation'</span></span><br></pre></td></tr></table></figure><ul><li><code>-cæˆ–--count</code> åœ¨æ¯åˆ—æ—è¾¹æ˜¾ç¤ºè¯¥è¡Œé‡å¤å‡ºç°çš„æ¬¡æ•°ã€‚</li><li><code>-dæˆ–--repeated</code> ä»…æ˜¾ç¤ºé‡å¤å‡ºç°çš„è¡Œåˆ—ã€‚</li><li><code>-f&lt;æ ä½&gt;æˆ–--skip-fields=&lt;æ ä½&gt;</code> å¿½ç•¥æ¯”è¾ƒæŒ‡å®šçš„æ ä½ã€‚</li><li><code>-s&lt;å­—ç¬¦ä½ç½®&gt;æˆ–--skip-chars=&lt;å­—ç¬¦ä½ç½®&gt;</code> å¿½ç•¥æ¯”è¾ƒæŒ‡å®šçš„å­—ç¬¦ã€‚</li><li><code>-uæˆ–--unique</code> ä»…æ˜¾ç¤ºå‡ºä¸€æ¬¡çš„è¡Œåˆ—ã€‚</li><li><code>-w&lt;å­—ç¬¦ä½ç½®&gt;æˆ–--check-chars=&lt;å­—ç¬¦ä½ç½®&gt;</code> æŒ‡å®šè¦æ¯”è¾ƒçš„å­—ç¬¦ã€‚</li><li><code>--help</code> æ˜¾ç¤ºå¸®åŠ©ã€‚</li><li><code>--version</code> æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ã€‚</li><li><code>[è¾“å…¥æ–‡ä»¶]</code> æŒ‡å®šå·²æ’åºå¥½çš„æ–‡æœ¬æ–‡ä»¶ã€‚å¦‚æœä¸æŒ‡å®šæ­¤é¡¹ï¼Œåˆ™ä»æ ‡å‡†è¯»å–æ•°æ®ï¼›</li><li><code>[è¾“å‡ºæ–‡ä»¶]</code> æŒ‡å®šè¾“å‡ºçš„æ–‡ä»¶ã€‚å¦‚æœä¸æŒ‡å®šæ­¤é€‰é¡¹ï¼Œåˆ™å°†å†…å®¹æ˜¾ç¤ºåˆ°æ ‡å‡†è¾“å‡ºè®¾å¤‡ï¼ˆæ˜¾ç¤ºç»ˆç«¯ï¼‰ã€‚</li></ul><p><code>uniq</code>ä»æ•°æ®åˆ—è¡¨ä¸­åˆ é™¤ä»»ä½•é‡å¤è¡Œã€‚</p><p>å‡è®¾æœ‰å¦‚ä¸‹æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ vi uniq-test</span><br><span class="line">A</span><br><span class="line">A</span><br><span class="line">A</span><br><span class="line">B</span><br><span class="line">B</span><br><span class="line">B</span><br><span class="line">B</span><br><span class="line">B</span><br><span class="line">C</span><br><span class="line">C</span><br><span class="line">C</span><br><span class="line">C</span><br><span class="line">C</span><br><span class="line">D</span><br><span class="line">D</span><br><span class="line">D</span><br><span class="line">C</span><br><span class="line">B</span><br><span class="line">A</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œ<code>uniq</code>å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ uniq uniq-test</span><br><span class="line">A</span><br><span class="line">B</span><br><span class="line">C</span><br><span class="line">D</span><br><span class="line">C</span><br><span class="line">B</span><br><span class="line">A</span><br></pre></td></tr></table></figure><p><strong>å½“é‡å¤çš„è¡Œå¹¶ä¸ç›¸é‚»æ—¶ï¼Œ<code>uniq</code>å‘½ä»¤æ˜¯ä¸èµ·ä½œç”¨çš„ã€‚</strong></p><p><strong>æ‰€ä»¥ä¸€èˆ¬<code>uniq</code>ä¹‹å‰å…ˆ<code>sort</code>ä¸€ä¸‹ï¼Œè¿™ä¸¤ä¸ªå‘½ä»¤ç»å¸¸ä¸€èµ·ç”¨ã€‚</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sort uniq-test | uniq</span><br><span class="line">A</span><br><span class="line">B</span><br><span class="line">C</span><br><span class="line">D</span><br></pre></td></tr></table></figure><h2 id="wc"><a class="header-anchor" href="#wc">#</a>wc</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">$ wc --<span class="built_in">help</span></span><br><span class="line">Usage: wc [OPTION]... [FILE]...</span><br><span class="line">  or:  wc [OPTION]... --files0-from=F</span><br><span class="line">Print newline, word, and byte counts <span class="keyword">for</span> each FILE, and a total line <span class="keyword">if</span></span><br><span class="line">more than one FILE is specified.  With no FILE, or when FILE is -,</span><br><span class="line"><span class="built_in">read</span> standard input.  A word is a non-zero-length sequence of characters</span><br><span class="line">delimited by white space.</span><br><span class="line">The options below may be used to select <span class="built_in">which</span> counts are printed, always <span class="keyword">in</span></span><br><span class="line">the following order: newline, word, character, byte, maximum line length.</span><br><span class="line">  -c, --bytes            <span class="built_in">print</span> the byte counts</span><br><span class="line">  -m, --chars            <span class="built_in">print</span> the character counts</span><br><span class="line">  -l, --lines            <span class="built_in">print</span> the newline counts</span><br><span class="line">      --files0-from=F    <span class="built_in">read</span> input from the files specified by</span><br><span class="line">                           NUL-terminated names <span class="keyword">in</span> file F;</span><br><span class="line">                           If F is - <span class="keyword">then</span> <span class="built_in">read</span> names from standard input</span><br><span class="line">  -L, --max-line-length  <span class="built_in">print</span> the length of the longest line</span><br><span class="line">  -w, --words            <span class="built_in">print</span> the word counts</span><br><span class="line">      --<span class="built_in">help</span>     display this <span class="built_in">help</span> and <span class="built_in">exit</span></span><br><span class="line">      --version  output version information and <span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line">GNU coreutils online <span class="built_in">help</span>: &lt;http://www.gnu.org/software/coreutils/&gt;</span><br><span class="line">Report wc translation bugs to &lt;http://translationproject.org/team/&gt;</span><br><span class="line">For complete documentation, run: info coreutils <span class="string">'wc invocation'</span></span><br></pre></td></tr></table></figure><ul><li><code>-cæˆ–--bytesæˆ–--chars</code> åªæ˜¾ç¤º Bytes æ•°ã€‚</li><li><code>-læˆ–--lines</code> æ˜¾ç¤ºè¡Œæ•°ã€‚</li><li><code>-wæˆ–--words</code> åªæ˜¾ç¤ºå­—æ•°ã€‚</li><li><code>--help</code> åœ¨çº¿å¸®åŠ©ã€‚</li><li><code>--version</code> æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ã€‚</li></ul><p><code>wc</code>å‘½ä»¤æ˜¯ç”¨æ¥æ˜¾ç¤ºæ–‡ä»¶æ‰€åŒ…å«çš„è¡Œæ•°ã€å­—æ•°å’Œå­—èŠ‚æ•°ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ wc ls-output.txt</span><br><span class="line"> 1873  1872 17825 ls-output.txt</span><br></pre></td></tr></table></figure><h2 id="grep"><a class="header-anchor" href="#grep">#</a>grep</h2><p><code>grep</code>ç”¨æ¥æ‰¾åˆ°æ–‡ä»¶ä¸­çš„åŒ¹é…æ–‡æœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep pattern [file...]</span><br></pre></td></tr></table></figure><p>æ¯”å¦‚ç”¨æ¥æŸ¥æ‰¾åå­—é‡ŒåŒ…å«<code>zip</code>çš„å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ ls /bin /usr/bin | sort | uniq | grep zip</span><br><span class="line">gpg-zip</span><br><span class="line">gunzip</span><br><span class="line">gzip</span><br><span class="line">zip</span><br><span class="line">zipcloak</span><br><span class="line">zipnote</span><br><span class="line">zipsplit</span><br></pre></td></tr></table></figure><p><code>-i</code>ä½¿å¾— <code>grep</code> åœ¨æ‰§è¡Œæœç´¢æ—¶å¿½ç•¥å¤§å°å†™ï¼Œ<code>-v</code>é€‰é¡¹ä¼šå‘Šè¯‰ <code>grep</code> åªæ‰“å°ä¸åŒ¹é…çš„è¡Œã€‚</p><h2 id="head-tail"><a class="header-anchor" href="#head-tail">#</a>head / tail</h2><p>æŸ¥çœ‹æ–‡ä»¶çš„å¤´éƒ¨/å°¾éƒ¨ã€‚</p><p><code>-n</code>æ¥è°ƒæ•´æ˜¾ç¤ºå¤šå°‘è¡Œã€‚</p><p>å› ä¸ºæœ‰ä¸€äº›æ—¥å¿—æ–‡ä»¶çš„å°¾éƒ¨å¯èƒ½ä¸€ç›´æœ‰æ›´æ–°ï¼Œæ‰€ä»¥å¯ä»¥ç”¨<code>-f</code>é€‰é¡¹ä¸€ç›´æŠŠæœ€æ–°çš„å°¾éƒ¨æ–‡ä»¶æ˜¾ç¤ºåˆ°å±å¹•ä¸Šï¼Œç”¨<code>ctrl+c</code>æ¥åœæ­¢ç›‘å¬ã€‚</p><h2 id="tee"><a class="header-anchor" href="#tee">#</a>tee</h2><p><code>tee</code>ç¨‹åºä»æ ‡å‡†è¾“å…¥è¯»å…¥æ•°æ®ï¼Œå¹¶ä¸”åŒæ—¶å¤åˆ¶æ•°æ®åˆ°æ ‡å‡†è¾“å‡ºï¼ˆå…è®¸æ•°æ®ç»§ç»­éšç€ç®¡é“çº¿æµåŠ¨ï¼‰å’Œä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ã€‚</p><p>ç”¨å¤„æ˜¯å¯ä»¥ä»ä¸€ç³»åˆ—çš„ç®¡é“ä¸­é—´è¯»å–æ•°æ®åˆ°åˆ«çš„åœ°æ–¹ã€‚ï¼ˆç›´è§‚çš„æƒ³æ³•å°±æ˜¯ï¼Œåœ¨ç®¡é“ä¸Šæ·»åŠ ä¸€ä¸ªåˆ†æ”¯ï¼Œ<s>ç§æ¥æ°´ç®¡ï¼ˆä¸æ˜¯</s>ï¼‰</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ ls /usr/bin | tee ls.txt | grep zip</span><br><span class="line">bunzip2</span><br><span class="line">bzip2</span><br><span class="line">bzip2recover</span><br><span class="line">funzip</span><br><span class="line">gunzip</span><br><span class="line">gzip</span><br><span class="line">unzip</span><br><span class="line">unzipsfx</span><br><span class="line">zip</span><br><span class="line">zipcloak</span><br><span class="line">zipdetails</span><br><span class="line">zipdetails5.18</span><br><span class="line">zipdetails5.28</span><br><span class="line">zipgrep</span><br><span class="line">zipinfo</span><br><span class="line">zipnote</span><br><span class="line">zipsplit</span><br></pre></td></tr></table></figure><p><code>ls.txt</code>é‡Œä¹Ÿæœ‰<code>ls /usr.bin</code>çš„æ•°æ®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ cat ls.txt | wc -l</span><br><span class="line">    1012</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> shell </tag>
            
            <tag> bash </tag>
            
            <tag> shell note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šå¿«ä¹çš„Linuxå‘½ä»¤è¡Œã€‹ç¬”è®°ï¼ˆ7ï¼‰</title>
      <link href="/blog/2020/11/10/the-linux-command-line-note-7/"/>
      <url>/blog/2020/11/10/the-linux-command-line-note-7/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹"><a class="header-anchor" href="#ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹">#</a>ã€Šå¿«ä¹çš„ Linux å‘½ä»¤è¡Œã€‹</h1><a id="more"></a><h2 id="cat"><a class="header-anchor" href="#cat">#</a>cat</h2><p><code>cat</code>å‘½ä»¤è¯»å–ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ï¼Œç„¶åå¤åˆ¶å®ƒä»¬åˆ°æ ‡å‡†è¾“å‡ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat [file]</span><br></pre></td></tr></table></figure><p><code>cat</code>ç»å¸¸è¢«ç”¨æ¥æ˜¾ç¤ºç®€çŸ­çš„æ–‡æœ¬æ–‡ä»¶ã€‚</p><p><code>cat</code>å¯ä»¥æŠŠå¤šä¸ªåˆ†ç‰‡çš„æ–‡ä»¶è¿åœ¨ä¸€èµ·ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat movie.mpeg.0* &gt; movie.mpeg</span><br></pre></td></tr></table></figure><p>å› ä¸ºé€šé…ç¬¦æ€»æ˜¯ä»¥æœ‰åºçš„æ–¹å¼å±•å¼€ï¼Œæ‰€ä»¥è¿™äº›å‚æ•°ä¼šä»¥æ­£ç¡®é¡ºåºå®‰æ’ã€‚</p><p><code>cat</code>å¦‚æœä¸åŠ å‚æ•°ç›´æ¥è¿è¡Œï¼Œå°†é»˜è®¤è¿æ¥<code>æ ‡å‡†è¾“å…¥</code>å’Œ<code>æ ‡å‡†è¾“å‡º</code>ã€‚å¯ä»¥ä½¿ç”¨è¿™ç§è¡Œä¸ºæ¥åˆ›å»ºç®€çŸ­çš„æ–‡æœ¬æ–‡ä»¶ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">onns@liupans-MacBook-Air ~ % cat &gt; lazy_dog.txt</span><br><span class="line">The quick brown fox jumped over the lazy dog.%</span><br><span class="line">onns@liupans-MacBook-Air ~ % cat lazy_dog.txt</span><br><span class="line">The quick brown fox jumped over the lazy dog.%</span><br></pre></td></tr></table></figure><p>è¾“å…¥<code>Ctrl-d</code>å¯ä»¥å‘Šè¯‰<code>cat</code>å·²ç»åˆ°è¾¾æ–‡ä»¶æœ«å°¾<code>EOF</code>ã€‚</p><h2 id="åŒ¿åç®¡é“"><a class="header-anchor" href="#åŒ¿åç®¡é“">#</a>åŒ¿åç®¡é“</h2><p><code>|</code>å¯ä»¥è®©ä¸€ä¸ªå‘½ä»¤çš„æ ‡å‡†è¾“å‡ºé€šè¿‡ç®¡é“é€è‡³å¦ä¸€ä¸ªå‘½ä»¤çš„æ ‡å‡†è¾“å…¥ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">command1 | command2</span><br></pre></td></tr></table></figure><p>å¿ƒæƒ…ä¸å¥½ï¼Œæ™šå®‰ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> shell </tag>
            
            <tag> bash </tag>
            
            <tag> shell note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šå¿«ä¹çš„Linuxå‘½ä»¤è¡Œã€‹ç¬”è®°ï¼ˆ6ï¼‰</title>
      <link href="/blog/2020/11/09/the-linux-command-line-note-6/"/>
      <url>/blog/2020/11/09/the-linux-command-line-note-6/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹"><a class="header-anchor" href="#ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹">#</a>ã€Šå¿«ä¹çš„ Linux å‘½ä»¤è¡Œã€‹</h1><a id="more"></a><h2 id="alias"><a class="header-anchor" href="#alias">#</a>alias</h2><p><code>alias</code>ç”¨æ¥åˆ›å»ºåˆ«åï¼Œå¯ä»¥æŠŠå¤šä¸ªå‘½ä»¤æ”¾åœ¨åŒä¸€è¡Œï¼Œå‘½ä»¤ä¹‹é—´ç”¨<code>;</code>åˆ†éš”ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">alias</span> name=<span class="string">'command1; command2; command3...'</span></span><br></pre></td></tr></table></figure><p>åœ¨åˆ›å»ºåˆ«åçš„æ—¶å€™ï¼Œåº”è¯¥ç”¨<code>type</code>æ¥æµ‹è¯•ä¸€ä¸‹è¿™ä¸ª<code>åˆ«å</code>æœ‰æ²¡æœ‰è¢«ç”¨è¿‡ã€‚</p><p>åˆ é™¤åˆ«åï¼Œä½¿ç”¨<code>unalias</code>å‘½ä»¤ã€‚</p><p>åœ¨å‘½ä»¤è¡Œé‡Œå®šä¹‰çš„åˆ«åï¼Œ<code>shellå…³é—­</code>ä¹‹åå°±ä¼šæ¶ˆå¤±ã€‚</p><h2 id="æ ‡å‡†è¾“å…¥ã€è¾“å‡ºå’Œé”™è¯¯"><a class="header-anchor" href="#æ ‡å‡†è¾“å…¥ã€è¾“å‡ºå’Œé”™è¯¯">#</a>æ ‡å‡†è¾“å…¥ã€è¾“å‡ºå’Œé”™è¯¯</h2><p><code>Unix</code>ä¸‹ä¸‡ç‰©çš†æ–‡ä»¶ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>æ ‡å‡†è¾“å‡º</code>å’Œ<code>æ ‡å‡†é”™è¯¯</code>éƒ½è¿æ¥åˆ°å±å¹•ï¼Œå³<code>stdout</code>å’Œ<code>stderr</code>ã€‚<code>æ ‡å‡†è¾“å…¥</code>è¿æ¥åˆ°é”®ç›˜ä¸Šï¼Œå³<code>stdin</code>ã€‚</p><h2 id="æ ‡å‡†è¾“å‡ºé‡å®šå‘"><a class="header-anchor" href="#æ ‡å‡†è¾“å‡ºé‡å®šå‘">#</a>æ ‡å‡†è¾“å‡ºé‡å®šå‘</h2><p>ä½¿ç”¨<code>&gt;</code>é‡å®šå‘ç¬¦åæ¥æ–‡ä»¶åå°†æ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°é™¤å±å¹•ä»¥å¤–çš„å¦ä¸€ä¸ªæ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">command</span> &gt; filename</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">onns@DESKTOP-5JJP7PL:~$ ls -l /usr/bin &gt; ls-output.txt</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ ls -l ls-output.txt</span><br><span class="line">-rw-r--r-- 1 onns onns 44260 Nov  9 12:56 ls-output.txt</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">onns@DESKTOP-5JJP7PL:~$ ls -l /bin/usr &gt; ls-output.txt</span><br><span class="line">ls: cannot access <span class="string">'/bin/usr'</span>: No such file or directory</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ ls -l ls-output.txt</span><br><span class="line">-rw-r--r-- 1 onns onns 0 Nov  9 12:59 ls-output.txt</span><br></pre></td></tr></table></figure><p><code>ls</code>ç¨‹åºä¸æŠŠå®ƒçš„<code>é”™è¯¯ä¿¡æ¯</code>è¾“é€åˆ°<code>æ ‡å‡†è¾“å‡º</code>ã€‚</p><p>è€Œä¸”ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨<code>&gt;</code>é‡å®šå‘ç¬¦æ¥é‡å®šå‘è¾“å‡ºç»“æœæ—¶ï¼Œç›®æ ‡æ–‡ä»¶æ€»æ˜¯ä»<code>å¼€å¤´è¢«é‡å†™</code>ã€‚</p><p>å¿«é€Ÿ<code>æ¸…ç©ºä¸€ä¸ªæ–‡ä»¶å†…å®¹</code>æˆ–è€…<code>åˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºæ–‡ä»¶</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt; ls-output.txt</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨<code>&gt;&gt;</code>æ“ä½œç¬¦ï¼Œå°†å¯¼è‡´è¾“å‡ºç»“æœæ·»åŠ åˆ°æ–‡ä»¶å†…å®¹ä¹‹åï¼Œå³<code>è¿½åŠ </code>ã€‚å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œæ–‡ä»¶ä¼šè¢«åˆ›å»ºã€‚</p><h2 id="æ ‡å‡†é”™è¯¯é‡å®šå‘"><a class="header-anchor" href="#æ ‡å‡†é”™è¯¯é‡å®šå‘">#</a>æ ‡å‡†é”™è¯¯é‡å®šå‘</h2><p><code>stdin</code>ã€<code>stdout</code>å’Œ<code>stderr</code>åœ¨<code>shell</code>å†…éƒ¨è¢«ç§°ä¸º<strong>æ–‡ä»¶æè¿°ç¬¦</strong><code>0</code>ã€<code>1</code>å’Œ<code>2</code>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -l /bin/usr 2&gt; ls-error.txt</span><br></pre></td></tr></table></figure><p><code>2</code>å’Œ<code>&gt;</code>è¦ç´§æŒ¨ç€ï¼Œä¸ç„¶ä¼šæŠ¥é”™ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">onns@DESKTOP-5JJP7PL:~$ ls -l /bin/usr 2 &gt; ls-error.txt</span><br><span class="line">ls: cannot access <span class="string">'/bin/usr'</span>: No such file or directory</span><br><span class="line">ls: cannot access <span class="string">'2'</span>: No such file or directory</span><br></pre></td></tr></table></figure><p>å¦‚æœæƒ³è¦æŠŠæ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯ä¸€èµ·é‡å®šå‘ï¼Œæœ‰ä¸¤ç§æ–¹æ³•ï¼Œè€æ–¹æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -l /bin/usr &gt; ls-output.txt 2&gt;&amp;1</span><br></pre></td></tr></table></figure><p><strong>æ ‡å‡†é”™è¯¯çš„é‡å®šå‘å¿…é¡»æ€»æ˜¯å‡ºç°åœ¨æ ‡å‡†è¾“å‡ºé‡å®šå‘ä¹‹åã€‚</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">onns@DESKTOP-5JJP7PL:~$ ls -l /bin/usr &gt; ls-output.txt <span class="comment"># é”™è¯¯è¿˜æ˜¯ä¼šè¾“å‡ºåˆ°æ ‡å‡†è¾“å‡º</span></span><br><span class="line">ls: cannot access <span class="string">'/bin/usr'</span>: No such file or directory</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ cat ls-output.txt <span class="comment"># æ–‡ä»¶é‡Œæ²¡æœ‰ä¸œè¥¿</span></span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ ls -l /bin/usr &gt; ls-output.txt 2&gt;&amp;1 <span class="comment"># æ­£ç¡®å†™æ³•</span></span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ cat ls-output.txt <span class="comment"># æ–‡ä»¶å†…å®¹æ­£å¸¸</span></span><br><span class="line">ls: cannot access <span class="string">'/bin/usr'</span>: No such file or directory</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ ls -l /bin/usr 2&gt;&amp;1 &gt; ls-output.txt <span class="comment"># æ ‡å‡†é”™è¯¯çš„é‡å®šå‘å¿…é¡»æ€»æ˜¯å‡ºç°åœ¨æ ‡å‡†è¾“å‡ºé‡å®šå‘ä¹‹å</span></span><br><span class="line">ls: cannot access <span class="string">'/bin/usr'</span>: No such file or directory</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ cat ls-output.txt</span><br></pre></td></tr></table></figure><p>ç¬¬äºŒç§æ–¹æ³•æ˜¯<code>&amp;&gt;</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">onns@DESKTOP-5JJP7PL:~$ cat ls-output.txt</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ ls -l /bin/usr &amp;&gt; ls-output.txt</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ cat ls-output.txt</span><br><span class="line">ls: cannot access <span class="string">'/bin/usr'</span>: No such file or directory</span><br></pre></td></tr></table></figure><p><code>/dev/null</code>æ–‡ä»¶æ˜¯ç³»ç»Ÿè®¾å¤‡ï¼Œå«åš<code>ä½å­˜å‚¨æ¡¶</code>ï¼Œå®ƒå¯ä»¥æ¥å—è¾“å…¥ï¼Œå¹¶ä¸”å¯¹è¾“å…¥ä¸åšä»»ä½•å¤„ç†ã€‚<br>å¯ä»¥æŠŠä¸éœ€è¦çš„ä¸œè¥¿è¾“å‡ºç»™åƒåœ¾æ¡¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -l /bin/usr 2&gt; /dev/null</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> shell </tag>
            
            <tag> bash </tag>
            
            <tag> shell note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šå¿«ä¹çš„Linuxå‘½ä»¤è¡Œã€‹ç¬”è®°ï¼ˆ5ï¼‰</title>
      <link href="/blog/2020/11/08/the-linux-command-line-note-5/"/>
      <url>/blog/2020/11/08/the-linux-command-line-note-5/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹"><a class="header-anchor" href="#ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹">#</a>ã€Šå¿«ä¹çš„ Linux å‘½ä»¤è¡Œã€‹</h1><a id="more"></a><h2 id="å‘½ä»¤"><a class="header-anchor" href="#å‘½ä»¤">#</a>å‘½ä»¤</h2><p>å››ç§å‘½ä»¤çš„å½¢å¼ï¼š</p><ol><li>ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åº</li><li>ä¸€ä¸ªå†…å»ºäº<code>shell</code>è‡ªèº«çš„å‘½ä»¤ï¼Œå†…éƒ¨å‘½ä»¤</li><li>ä¸€ä¸ª<code>shell</code>å‡½æ•°</li><li>ä¸€ä¸ªå‘½ä»¤åˆ«å</li></ol><h2 id="type"><a class="header-anchor" href="#type">#</a>type</h2><p><code>type</code>å‘½ä»¤æ˜¯<code>shell</code>å†…éƒ¨å‘½ä»¤ï¼Œå®ƒä¼šæ˜¾ç¤ºå‘½ä»¤çš„ç±»åˆ«ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">type</span> <span class="built_in">command</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">onns@DESKTOP-5JJP7PL:~$ <span class="built_in">type</span> <span class="built_in">type</span></span><br><span class="line"><span class="built_in">type</span> is a shell <span class="built_in">builtin</span></span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ <span class="built_in">type</span> ls</span><br><span class="line">ls is aliased to `ls --color=auto`</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ <span class="built_in">type</span> cp</span><br><span class="line">cp is /bin/cp</span><br></pre></td></tr></table></figure><h2 id="which"><a class="header-anchor" href="#which">#</a>which</h2><p><code>which</code>ç”¨æ¥æŸ¥æ‰¾ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºçš„ä½ç½®ï¼Œå› ä¸ºä¸€ä¸ªç¨‹åºå¯èƒ½æœ‰å¾ˆå¤šä¸ªç‰ˆæœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">which</span> <span class="built_in">command</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">onns@DESKTOP-5JJP7PL:~$ <span class="built_in">which</span> ls</span><br><span class="line">/bin/ls</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ <span class="built_in">which</span> win-lab406</span><br><span class="line">/mnt/d/weiyun/Code/bash/win-lab406</span><br></pre></td></tr></table></figure><p><strong>è¿™ä¸ªå‘½ä»¤åªå¯¹å¯æ‰§è¡Œç¨‹åºæœ‰æ•ˆï¼Œä¸åŒ…æ‹¬å†…å»ºå‘½ä»¤å’Œå‘½ä»¤åˆ«åã€‚</strong></p><p>ç¬¬äºŒä¸ªå‘½ä»¤æ˜¯æˆ‘è‡ªå·±å†™çš„ã€‚</p><p>å½“æˆ‘ä¼å›¾æŸ¥æ‰¾å†…éƒ¨å‘½ä»¤çš„æ—¶å€™ï¼Œæ ¹æœ¬æ‰¾ä¸åˆ°= =ï¼Œä»€ä¹ˆæç¤ºéƒ½æ²¡æœ‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">onns@DESKTOP-5JJP7PL:~$ <span class="built_in">which</span> <span class="built_in">cd</span></span><br><span class="line">onns@DESKTOP-5JJP7PL:~$</span><br></pre></td></tr></table></figure><h2 id="help"><a class="header-anchor" href="#help">#</a>help</h2><p><code>help</code>å‘½ä»¤å¤§æ¦‚å°±æ˜¯ç”¨æ¥æç¤ºä½ è¿™ä¸ªå‘½ä»¤æ€ä¹ˆç”¨çš„å§â€¦</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">help</span> <span class="built_in">command</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">onns@DESKTOP-5JJP7PL:~$ <span class="built_in">help</span> <span class="built_in">cd</span></span><br><span class="line"><span class="built_in">cd</span>: <span class="built_in">cd</span> [-L|[-P [-e]] [-@]] [dir]</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>å‡ºç°åœ¨å‘½ä»¤è¯­æ³•è¯´æ˜ä¸­çš„æ–¹æ‹¬å·ï¼Œè¡¨ç¤º<code>å¯é€‰çš„</code>é¡¹ç›®ã€‚<br><code>ä¸€ä¸ªç«–æ å­—ç¬¦</code>è¡¨ç¤ºäº’æ–¥é€‰é¡¹ã€‚</p><blockquote><p>è™½<code>cd</code>å‘½ä»¤çš„å¸®åŠ©æ–‡æ¡£å¾ˆç®€æ´å‡†ç¡®ï¼Œä½†å®ƒå†³ä¸æ˜¯æ•™ç¨‹ã€‚<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p></blockquote><p><code>--help</code>æ˜¯ä¸€ä¸ªå¾ˆå¤šç¨‹åºæ”¯æŒçš„é€‰é¡¹ï¼Œä½œç”¨æ˜¯ï¼š<strong>æ˜¾ç¤ºå‘½ä»¤æ‰€æ”¯æŒçš„è¯­æ³•å’Œé€‰é¡¹è¯´æ˜</strong>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">onns@DESKTOP-5JJP7PL:~$ mkdir --<span class="built_in">help</span></span><br><span class="line">Usage: mkdir [OPTION]... DIRECTORY...</span><br><span class="line">Create the DIRECTORY(ies), <span class="keyword">if</span> they <span class="keyword">do</span> not already exist.</span><br><span class="line"></span><br><span class="line">Mandatory arguments to long options are mandatory <span class="keyword">for</span> short options too.</span><br><span class="line">  -m, --mode=MODE   <span class="built_in">set</span> file mode (as <span class="keyword">in</span> chmod), not a=rwx - <span class="built_in">umask</span></span><br><span class="line">  -p, --parents     no error <span class="keyword">if</span> existing, make parent directories as needed</span><br><span class="line">  -v, --verbose     <span class="built_in">print</span> a message <span class="keyword">for</span> each created directory</span><br><span class="line">  -Z                   <span class="built_in">set</span> SELinux security context of each created directory</span><br><span class="line">                         to the default <span class="built_in">type</span></span><br><span class="line">      --context[=CTX]  like -Z, or <span class="keyword">if</span> CTX is specified <span class="keyword">then</span> <span class="built_in">set</span> the SELinux</span><br><span class="line">                         or SMACK security context to CTX</span><br><span class="line">      --<span class="built_in">help</span>     display this <span class="built_in">help</span> and <span class="built_in">exit</span></span><br><span class="line">      --version  output version information and <span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line">GNU coreutils online <span class="built_in">help</span>: &lt;http://www.gnu.org/software/coreutils/&gt;</span><br><span class="line">Report mkdir translation bugs to &lt;http://translationproject.org/team/&gt;</span><br><span class="line">Full documentation at: &lt;http://www.gnu.org/software/coreutils/mkdir&gt;</span><br><span class="line">or available locally via: info <span class="string">'(coreutils) mkdir invocation'</span></span><br></pre></td></tr></table></figure><h2 id="man"><a class="header-anchor" href="#man">#</a>man</h2><p><code>man</code>å‘½ä»¤ç”¨æ¥æŸ¥çœ‹ä¸€äº›ç¨‹åºçš„æ–‡æ¡£æ‰‹å†Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">man program</span><br></pre></td></tr></table></figure><p>æ‰‹å†Œæ–‡æ¡£çš„æ ¼å¼æœ‰ç‚¹ä¸åŒï¼Œä¸€èˆ¬åœ°åŒ…å«<code>ä¸€ä¸ªæ ‡é¢˜</code>ã€<code>å‘½ä»¤è¯­æ³•çš„çº²è¦</code>ã€<code>å‘½ä»¤ç”¨é€”çš„è¯´æ˜</code>ã€ä»¥åŠ<code>æ¯ä¸ªå‘½ä»¤é€‰é¡¹</code>çš„åˆ—è¡¨å’Œè¯´æ˜ã€‚<strong>æ‰‹å†Œæ–‡æ¡£é€šå¸¸å¹¶ä¸åŒ…å«å®ä¾‹ã€‚</strong></p><p>åœ¨å¤§å¤š<code>Linux</code>ç³»ç»Ÿä¸­ï¼Œ<code>man</code>ä½¿<code>less</code>å·¥å…·æ¥æ˜¾ç¤ºå‚è€ƒæ‰‹å†Œï¼Œæ‰€ä»¥å½“æµè§ˆæ–‡æ¡£æ—¶ï¼Œä½ æ‰€ç†Ÿ<code>less</code>æ‚‰å‘½ä»¤éƒ½èƒ½æœ‰æ•ˆã€‚<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup></p><p>å‚è€ƒæ‰‹å†Œæœ‰å¾ˆå¤šä¸åŒçš„ç« èŠ‚ï¼š</p><table><thead><tr><th style="text-align:center">ç« èŠ‚</th><th style="text-align:left">å†…å®¹</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:left">ç”¨æˆ·å‘½ä»¤</td></tr><tr><td style="text-align:center">2</td><td style="text-align:left">ç¨‹åºæ¥å£å†…æ ¸ç³»ç»Ÿè°ƒç”¨</td></tr><tr><td style="text-align:center">3</td><td style="text-align:left">C åº“å‡½æ•°ç¨‹åºæ¥å£</td></tr><tr><td style="text-align:center">4</td><td style="text-align:left">ç‰¹æ®Šæ–‡ä»¶ï¼Œæ¯”å¦‚è¯´è®¾å¤‡ç»“ç‚¹å’Œé©±åŠ¨ç¨‹åº</td></tr><tr><td style="text-align:center">5</td><td style="text-align:left">æ–‡ä»¶æ ¼å¼</td></tr><tr><td style="text-align:center">6</td><td style="text-align:left">æ¸¸æˆå¨±ä¹ï¼Œå¦‚å±å¹•ä¿æŠ¤ç¨‹åº</td></tr><tr><td style="text-align:center">7</td><td style="text-align:left">å…¶ä»–æ–¹é¢</td></tr><tr><td style="text-align:center">8</td><td style="text-align:left">ç³»ç»Ÿç®¡ç†å‘˜å‘½ä»¤</td></tr></tbody></table><p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æŸ¥çœ‹å‚è€ƒæ‰‹å†Œçš„ç‰¹å®šç« èŠ‚ï¼Œä»è€Œæ‰¾åˆ°æˆ‘ä»¬éœ€è¦çš„ä¿¡æ¯ã€‚å¦‚æœæˆ‘ä»¬è¦æŸ¥æ‰¾ä¸€ç§æ–‡ä»¶æ ¼å¼ï¼Œè€ŒåŒæ—¶å®ƒä¹Ÿæ˜¯ä¸€ä¸ªå‘½ä»¤åæ—¶, è¿™ç§æƒ…å†µå°¤å…¶æ­£ç¡®ã€‚æ²¡æœ‰æŒ‡å®šç« èŠ‚å·ï¼Œæˆ‘ä»¬æ€»æ˜¯å¾—åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹ï¼Œå¯èƒ½åœ¨ç¬¬ä¸€ç« èŠ‚ã€‚æˆ‘ä»¬è¿™æ ·ä½¿ç”¨<code>man</code>å‘½ä»¤ï¼Œæ¥æŒ‡å®šç« èŠ‚å·ï¼š<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">man section search_term</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">onns@DESKTOP-5JJP7PL:~$ man 5 passwd</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$</span><br></pre></td></tr></table></figure><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>è€å®è¯´ï¼Œæ²¡çœ‹æ‡‚è¿™å¥è¯å•¥æ„æ€ã€‚ <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li><li id="fn2" class="footnote-item"><p>çœ‹åˆ°è¿™é‡Œçš„æ—¶å€™ï¼Œæˆ‘å¤§æ¦‚å·²ç»å¿˜äº†<code>less</code>æ€ä¹ˆç”¨äº†ï¼Œä¸æ„§æ˜¯æˆ‘ã€‚ <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p></li><li id="fn3" class="footnote-item"><p>æ²¡çœ‹æ‡‚è¿™å¥è¯ã€‚ <a href="#fnref3" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> shell </tag>
            
            <tag> bash </tag>
            
            <tag> shell note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šå¿«ä¹çš„Linuxå‘½ä»¤è¡Œã€‹ç¬”è®°ï¼ˆ4ï¼‰</title>
      <link href="/blog/2020/11/06/the-linux-command-line-note-4/"/>
      <url>/blog/2020/11/06/the-linux-command-line-note-4/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹"><a class="header-anchor" href="#ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹">#</a>ã€Šå¿«ä¹çš„ Linux å‘½ä»¤è¡Œã€‹</h1><a id="more"></a><h2 id="ç§»åŠ¨æ–‡ä»¶"><a class="header-anchor" href="#ç§»åŠ¨æ–‡ä»¶">#</a>ç§»åŠ¨æ–‡ä»¶</h2><p>æ„Ÿè§‰<code>mv</code>å’Œ<code>cp</code>æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯ä¸åŒçš„åœ¨äºï¼Œ<code>mv</code>ç§»åŠ¨æ–‡ä»¶å¤¹çš„æ—¶å€™ä¸éœ€è¦<code>-r</code>ï¼Œè‡ªåŠ¨å®Œæˆçš„ã€‚</p><p>ä¸¤ç§ç”¨æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv item1 item2</span><br></pre></td></tr></table></figure><p>æŠŠæ–‡ä»¶æˆ–ç›®å½•<code>item1</code>ç§»åŠ¨æˆ–é‡å‘½åä¸º<code>item2</code>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv item1... directory</span><br></pre></td></tr></table></figure><p>æŠŠä¸€ä¸ªæˆ–å¤šä¸ªæ¡ç›®ä»ä¸€ä¸ªç›®å½•ç§»åŠ¨åˆ°å¦ä¸€ä¸ªç›®å½•ä¸­ã€‚</p><p><code>mv</code>å‘½ä»¤çš„ä¸€äº›å‚æ•°é€‰é¡¹ï¼š</p><table><thead><tr><th style="text-align:center">é€‰é¡¹</th><th style="text-align:left">é•¿é€‰é¡¹</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:center"><code>-i</code></td><td style="text-align:left"><code>--interactive</code></td><td style="text-align:left">åœ¨é‡å†™ä¸€ä¸ªå·²ç»å­˜åœ¨çš„æ–‡ä»¶ä¹‹å‰ï¼Œæç¤ºç”¨æˆ·ç¡®è®¤ä¿¡æ¯ã€‚å¦‚æœä¸æŒ‡å®šè¿™ä¸ªé€‰é¡¹ï¼Œmv å‘½ä»¤ä¼šé»˜è®¤é‡å†™æ–‡ä»¶å†…å®¹ã€‚</td></tr><tr><td style="text-align:center"><code>-u</code></td><td style="text-align:left"><code>--update</code></td><td style="text-align:left">å½“æŠŠæ–‡ä»¶ä»ä¸€ä¸ªç›®å½•ç§»åŠ¨å¦ä¸€ä¸ªç›®å½•æ—¶ï¼Œåªæ˜¯ç§»åŠ¨ä¸å­˜åœ¨çš„æ–‡ä»¶ï¼Œæˆ–è€…æ–‡ä»¶å†…å®¹æ–°äºç›®æ ‡ç›®å½•ç›¸å¯¹åº”æ–‡ä»¶çš„å†…å®¹ã€‚</td></tr><tr><td style="text-align:center"><code>-v</code></td><td style="text-align:left"><code>--verbose</code></td><td style="text-align:left">æ˜¾ç¤ºè¯¦ç»†çš„å‘½ä»¤æ“ä½œä¿¡æ¯</td></tr></tbody></table><p>ç¤ºä¾‹ï¼š</p><ul><li><code>mv file1 file2</code> ç§»åŠ¨ file1 åˆ° file2ã€‚å¦‚æœ file2 å­˜åœ¨ï¼Œå®ƒçš„å†…å®¹ä¼šè¢« file1 çš„å†…å®¹é‡å†™ã€‚å¦‚æœ file2 ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»º file2ã€‚è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œfile1 éƒ½ä¸å†å­˜åœ¨ã€‚</li><li><code>mv -i file1 file2</code> é™¤äº†å¦‚æœ file2 å­˜åœ¨çš„è¯ï¼Œåœ¨ file2 è¢«é‡å†™ä¹‹å‰ï¼Œç”¨æˆ·ä¼šå¾—åˆ°æç¤ºä¿¡æ¯å¤–ï¼Œè¿™ä¸ªå’Œä¸Šé¢çš„é€‰é¡¹ä¸€æ ·ã€‚</li><li><code>mv file1 file2 dir1</code> ç§»åŠ¨ file1 å’Œ file2 åˆ°ç›®å½• dir1 ä¸­ã€‚dir1 å¿…é¡»å·²ç»å­˜åœ¨ã€‚</li><li><code>mv dir1 dir2</code> å¦‚æœç›®å½• dir2 ä¸å­˜åœ¨ï¼Œåˆ›å»ºç›®å½• dir2ï¼Œå¹¶ä¸”ç§»åŠ¨ç›®å½• dir1 çš„å†…å®¹åˆ°ç›®å½• dir2 ä¸­ï¼ŒåŒæ—¶åˆ é™¤ç›®å½• dir1ã€‚å¦‚æœç›®å½• dir2 å­˜åœ¨ï¼Œç§»åŠ¨ç›®å½•<code>dir1</code>åŠ<code>å®ƒçš„å†…å®¹</code>åˆ°ç›®å½•<code>dir2</code>ã€‚</li></ul><h2 id="åˆ é™¤æ–‡ä»¶"><a class="header-anchor" href="#åˆ é™¤æ–‡ä»¶">#</a>åˆ é™¤æ–‡ä»¶</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm item...</span><br></pre></td></tr></table></figure><p>æ„Ÿè§‰åœ¨ linux ä¸‹ç¬¬ä¸€ä¸ªçŸ¥é“çš„å‘½ä»¤å¤§æ¦‚å°±æ˜¯<code>rm -rf /*</code>å§â€¦</p><p>ä¸€äº›é€‰é¡¹ï¼š</p><table><thead><tr><th style="text-align:center">é€‰é¡¹</th><th style="text-align:left">é•¿é€‰é¡¹</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:center"><code>-i</code></td><td style="text-align:left"><code>--interactive</code></td><td style="text-align:left">åœ¨åˆ é™¤å·²å­˜åœ¨çš„æ–‡ä»¶å‰ï¼Œæç¤ºç”¨æˆ·ç¡®è®¤ä¿¡æ¯ã€‚å¦‚æœä¸æŒ‡å®šè¿™ä¸ªé€‰é¡¹ï¼Œrm ä¼šé»˜é»˜åœ°åˆ é™¤æ–‡ä»¶</td></tr><tr><td style="text-align:center"><code>-r</code></td><td style="text-align:left"><code>--recursive</code></td><td style="text-align:left">é€’å½’åœ°åˆ é™¤æ–‡ä»¶ï¼Œè¿™æ„å‘³ç€ï¼Œå¦‚æœè¦åˆ é™¤ä¸€ä¸ªç›®å½•ï¼Œè€Œæ­¤ç›®å½•åˆåŒ…å«å­ç›®å½•ï¼Œé‚£ä¹ˆå­ç›®å½•ä¹Ÿä¼šè¢«åˆ é™¤ã€‚è¦åˆ é™¤ä¸€ä¸ªç›®å½•ï¼Œå¿…é¡»æŒ‡å®šè¿™ä¸ªé€‰é¡¹ã€‚</td></tr><tr><td style="text-align:center"><code>-f</code></td><td style="text-align:left"><code>--force</code></td><td style="text-align:left">å¿½è§†ä¸å­˜åœ¨çš„æ–‡ä»¶ï¼Œä¸æ˜¾ç¤ºæç¤ºä¿¡æ¯ã€‚è¿™é€‰é¡¹è¦†ç›–äº†<code>--interactive</code>é€‰é¡¹ã€‚</td></tr><tr><td style="text-align:center"><code>-v</code></td><td style="text-align:left"><code>--verbose</code></td><td style="text-align:left">æ˜¾ç¤ºè¯¦ç»†çš„å‘½ä»¤æ“ä½œä¿¡æ¯</td></tr></tbody></table><p><strong>ç±» Unix ç³»ç»Ÿï¼Œæ˜¯æ²¡æœ‰å¤åŸå‘½ä»¤çš„</strong></p><p>å½“ä½ ä½¿ç”¨å¸¦æœ‰é€šé…ç¬¦çš„<code>rm</code>å‘½ä»¤æ—¶ï¼Œé™¤äº†ä»”ç»†æ£€æŸ¥è¾“å…¥çš„å†…å®¹å¤–ï¼Œå…ˆç”¨<code>ls</code>å‘½ä»¤æ¥æµ‹è¯•é€šé…ã€‚<br>å½“ä½ ä½¿ç”¨å¸¦æœ‰é€šé…ç¬¦çš„<code>rm</code>å‘½ä»¤æ—¶ï¼Œé™¤äº†ä»”ç»†æ£€æŸ¥è¾“å…¥çš„å†…å®¹å¤–ï¼Œå…ˆç”¨<code>ls</code>å‘½ä»¤æ¥æµ‹è¯•é€šé…ã€‚<br>å½“ä½ ä½¿ç”¨å¸¦æœ‰é€šé…ç¬¦çš„<code>rm</code>å‘½ä»¤æ—¶ï¼Œé™¤äº†ä»”ç»†æ£€æŸ¥è¾“å…¥çš„å†…å®¹å¤–ï¼Œå…ˆç”¨<code>ls</code>å‘½ä»¤æ¥æµ‹è¯•é€šé…ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rm *.html <span class="comment"># åˆ é™¤æ‰€æœ‰htmlæ–‡ä»¶</span></span><br><span class="line">rm * .html <span class="comment"># ä¼šåˆ é™¤ç›®å½•ä¸­çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå¹¶æç¤ºæ²¡æœ‰â€œ.htmlâ€æ–‡ä»¶</span></span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºé“¾æ¥"><a class="header-anchor" href="#åˆ›å»ºé“¾æ¥">#</a>åˆ›å»ºé“¾æ¥</h2><p>ç¡¬é“¾æ¥ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln file link</span><br></pre></td></tr></table></figure><p>ç¬¦å·é“¾æ¥ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s item link</span><br></pre></td></tr></table></figure><p><code>item</code>å¯ä»¥æ˜¯ä¸€ä¸ªæ–‡ä»¶æˆ–æ˜¯ä¸€ä¸ªç›®å½•ã€‚</p><p><code>ç¡¬é“¾æ¥</code>çš„ç¼ºç‚¹ï¼š</p><ul><li>ä¸€ä¸ªç¡¬é“¾æ¥ä¸èƒ½å…³è”å®ƒæ‰€åœ¨æ–‡ä»¶ç³»ç»Ÿä¹‹å¤–çš„æ–‡ä»¶ã€‚è¿™æ˜¯è¯´ä¸€ä¸ªé“¾æ¥ä¸èƒ½å…³è”ä¸é“¾æ¥æœ¬èº«ä¸åœ¨åŒä¸€ä¸ªç£ç›˜åˆ†åŒºä¸Šçš„æ–‡ä»¶ã€‚</li><li>ä¸€ä¸ªç¡¬é“¾æ¥ä¸èƒ½å…³è”ä¸€ä¸ªç›®å½•ã€‚</li></ul><p>ä¸€ä¸ªç¡¬é“¾æ¥å’Œæ–‡ä»¶æœ¬èº«æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚</p><p>å½“ä¸€ä¸ªç¡¬é“¾æ¥è¢«åˆ é™¤æ—¶ï¼Œè¿™ä¸ªé“¾æ¥è¢«åˆ é™¤ï¼Œä½†æ˜¯æ–‡ä»¶æœ¬èº«çš„å†…å®¹ä»ç„¶å­˜åœ¨ï¼Œç›´åˆ°æ‰€æœ‰å…³è”è¿™ä¸ªæ–‡ä»¶çš„é“¾æ¥éƒ½åˆ é™¤æ‰ã€‚</p><p>å½“ä½ åˆ é™¤ä¸€ä¸ªç¬¦å·é“¾æ¥æ—¶ï¼Œåªæœ‰è¿™ä¸ªé“¾æ¥è¢«åˆ é™¤ï¼Œè€Œä¸æ˜¯æ–‡ä»¶è‡ªèº«ã€‚</p><p>å¦‚æœå…ˆäºç¬¦å·é“¾æ¥åˆ é™¤æ–‡ä»¶ï¼Œè¿™ä¸ªé“¾æ¥<code>ä»ç„¶å­˜åœ¨</code>ï¼Œä½†æ˜¯ä¸æŒ‡å‘ä»»ä½•ä¸œè¥¿ã€‚ï¼ˆä¼šè¢« ls å‘½ä»¤æ ‡çº¢ï¼Œè¡¨ç¤º<code>åé“¾æ¥</code>ï¼‰</p><h3 id="æµ‹è¯•"><a class="header-anchor" href="#æµ‹è¯•">#</a>æµ‹è¯•</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">onns@DESKTOP-5JJP7PL:~$ vi fun</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ ln fun fun-hard</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ ls</span><br><span class="line">fun  fun-hard</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ ls -l</span><br><span class="line">total 0</span><br><span class="line">-rw-r--r-- 2 onns onns 19 Nov  6 14:23 fun</span><br><span class="line">-rw-r--r-- 2 onns onns 19 Nov  6 14:23 fun-hard</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ ls -li</span><br><span class="line">total 0</span><br><span class="line">35465847065606899 -rw-r--r-- 2 onns onns 19 Nov  6 14:23 fun</span><br><span class="line">35465847065606899 -rw-r--r-- 2 onns onns 19 Nov  6 14:23 fun-hard</span><br></pre></td></tr></table></figure><p>å¯ä»¥é€šè¿‡<code>-i</code>å‚æ•°æ¥å±•ç¤ºæ–‡ä»¶ç´¢å¼•èŠ‚ç‚¹çš„ä¿¡æ¯ï¼Œå¯ä»¥çœ‹å‡ºè¿™å®é™…ä¸Šæ˜¯ç´¢å¼•çš„åŒä¸€ä¸ªæ–‡ä»¶ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">onns@DESKTOP-5JJP7PL:~$ ln -s fun fun-sym</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ ls -l</span><br><span class="line">total 0</span><br><span class="line">-rw-r--r-- 2 onns onns 19 Nov  6 14:23 fun</span><br><span class="line">-rw-r--r-- 2 onns onns 19 Nov  6 14:23 fun-hard</span><br><span class="line">lrwxrwxrwx 1 onns onns  3 Nov  6 14:25 fun-sym -&gt; fun</span><br></pre></td></tr></table></figure><p><code>ç¬¦å·é“¾æ¥</code>çš„å¤§å°æ˜¯æŒ‡å‘æ–‡ä»¶å­—ç¬¦çš„å¤§å°ï¼Œè€Œä¸æ˜¯å®é™…å¤§å°ï¼Œå› ä¸º<code>fun-sym</code>æŒ‡å‘çš„æ˜¯<code>fun</code>ï¼Œ<code>fun</code>æœ‰<code>ä¸‰ä¸ªå­—ç¬¦</code>ï¼Œæ‰€ä»¥å¤§å°æ˜¯<code>3</code>ã€‚</p><p>å¯¹äºç¬¦å·é“¾æ¥ï¼Œæœ‰ä¸€ç‚¹å€¼å¾—è®°ä½ï¼Œæ‰§è¡Œçš„å¤§å¤šæ•°æ–‡ä»¶æ“ä½œæ˜¯é’ˆå¯¹é“¾æ¥çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯é“¾æ¥æœ¬èº«ã€‚</p><p>è€Œ<code>rm</code>å‘½ä»¤æ˜¯ä¸ªç‰¹ä¾‹ã€‚å½“ä½ åˆ é™¤é“¾æ¥çš„æ—¶å€™ï¼Œ<strong>åˆ é™¤é“¾æ¥æœ¬èº«</strong>ï¼Œè€Œä¸æ˜¯é“¾æ¥çš„å¯¹è±¡ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> shell </tag>
            
            <tag> bash </tag>
            
            <tag> shell note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šå¿«ä¹çš„Linuxå‘½ä»¤è¡Œã€‹ç¬”è®°ï¼ˆ3ï¼‰</title>
      <link href="/blog/2020/11/05/the-linux-command-line-note-3/"/>
      <url>/blog/2020/11/05/the-linux-command-line-note-3/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹"><a class="header-anchor" href="#ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹">#</a>ã€Šå¿«ä¹çš„ Linux å‘½ä»¤è¡Œã€‹</h1><p>ä»Šå¤©æ˜¯æ™šé¤åçœ‹çš„ï¼Œçœ‹å®Œæƒ³ç¡ä¸€ä¼šï¼Œå›°</p><a id="more"></a><h2 id="é€šé…ç¬¦"><a class="header-anchor" href="#é€šé…ç¬¦">#</a>é€šé…ç¬¦</h2><ul><li><code>*</code> åŒ¹é…ä»»æ„å¤šä¸ªå­—ç¬¦ï¼ˆåŒ…æ‹¬é›¶ä¸ªæˆ–ä¸€ä¸ªï¼‰</li><li><code>?</code> åŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼ˆä¸åŒ…æ‹¬é›¶ä¸ªï¼‰</li><li><code>[characters]</code> åŒ¹é…ä»»æ„ä¸€ä¸ªå±äº<code>å­—ç¬¦é›†</code>ä¸­çš„å­—ç¬¦</li><li><code>[!characters]</code> åŒ¹é…ä»»æ„ä¸€ä¸ªä¸æ˜¯<code>å­—ç¬¦é›†</code>ä¸­çš„å­—ç¬¦</li><li><code>[[:class:]]</code> åŒ¹é…ä»»æ„ä¸€ä¸ªå±äºæŒ‡å®š<code>å­—ç¬¦ç±»</code>ä¸­çš„å­—ç¬¦</li></ul><p>å­—ç¬¦ç±»</p><ul><li><code>[:alnum:]</code> åŒ¹é…ä»»æ„ä¸€ä¸ªå­—æ¯æˆ–æ•°å­—</li><li><code>[:alpha:]</code> åŒ¹é…ä»»æ„ä¸€ä¸ªå­—æ¯</li><li><code>[:digit:]</code> åŒ¹é…ä»»æ„ä¸€ä¸ªæ•°å­—</li><li><code>[:lower:]</code> åŒ¹é…ä»»æ„ä¸€ä¸ªå°å†™å­—æ¯</li><li><code>[:upper:]</code> åŒ¹é…ä»»æ„ä¸€ä¸ªå¤§å†™å­—æ¯</li></ul><p>ä¸€äº›ç¤ºä¾‹ï¼š</p><ul><li><code>*</code> æ‰€æœ‰æ–‡ä»¶</li><li><code>g*</code> æ–‡ä»¶åä»¥â€œgâ€å¼€å¤´çš„æ–‡ä»¶</li><li><code>b*.txt</code> ä»¥â€œbâ€ å¼€å¤´ï¼Œä¸­é—´æœ‰é›¶ä¸ªæˆ–ä»»æ„å¤šä¸ªå­—ç¬¦ï¼Œå¹¶ä»¥â€.txtâ€ç»“å°¾çš„æ–‡ä»¶</li><li><code>Data???</code> ä»¥<code>Data</code>å¼€å¤´ï¼Œå…¶åç´§æ¥ç€<code>3</code>ä¸ªå­—ç¬¦çš„æ–‡ä»¶</li><li><code>[abc]*</code> æ–‡ä»¶åä»¥<code>a</code>ã€<code>b</code>æˆ–<code>c</code>å¼€å¤´çš„æ–‡ä»¶</li><li><code>BACKUP.[0-9][0-9][0-9]</code> ä»¥<code>BACKUP.</code>å¼€å¤´ï¼Œå¹¶ç´§æ¥ç€<code>3</code>ä¸ªæ•°å­—çš„æ–‡ä»¶</li><li><code>[[:upper:]]*</code> ä»¥<code>å¤§å†™å­—æ¯</code>å¼€å¤´çš„æ–‡ä»¶</li><li><code>[![:digit:]]*</code> <code>ä¸ä»¥æ•°å­—</code>å¼€å¤´çš„æ–‡ä»¶</li><li><code>*[[:lower:]123]</code> æ–‡ä»¶åä»¥<code>å°å†™å­—æ¯</code>ç»“å°¾ï¼Œæˆ–ä»¥<code>1</code>ã€<code>2</code>æˆ–<code>3</code>ç»“å°¾çš„æ–‡ä»¶</li></ul><p>ä¹‹å‰å†™æ­£åˆ™æ—¶å€™çš„<code>[A-Z]</code>å’Œ<code>[a-z]</code>è™½ç„¶éƒ½æœ‰æ•ˆæœï¼Œä½†æ˜¯å·²ç»å¾ˆè€äº†ï¼Œä¸ä¸€å®šä¼šæœ‰æœŸæœ›çš„æ•ˆæœï¼Œå¯ä»¥å¼ƒç”¨äº†ã€‚</p><blockquote><p>è™½ç„¶å®ƒä»¬ä»ç„¶èµ·ä½œç”¨ï¼Œä½†æ˜¯ä½ å¿…é¡»å°å¿ƒåœ°ä½¿ç”¨å®ƒä»¬ï¼Œå› ä¸ºå®ƒä»¬ä¸ä¼šäº§ç”Ÿä½ æœŸæœ›çš„è¾“å‡ºç»“æœï¼Œé™¤éä½ åˆç†åœ°é…ç½®å®ƒä»¬ã€‚ä»ç°åœ¨å¼€å§‹ï¼Œä½ åº”è¯¥é¿å…ä½¿ç”¨å®ƒä»¬ï¼Œå¹¶ä¸”ç”¨å­—ç¬¦ç±»æ¥ä»£æ›¿å®ƒä»¬ã€‚</p></blockquote><h2 id="åˆ›å»ºç›®å½•"><a class="header-anchor" href="#åˆ›å»ºç›®å½•">#</a>åˆ›å»ºç›®å½•</h2><p>å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir directory...</span><br></pre></td></tr></table></figure><p>ä¸Šé¢å‘½ä»¤çš„<code>...</code>ä»£è¡¨é‚£ä¸ªå‚æ•°å¯ä»¥é‡å¤ï¼Œå³å¯ä»¥ä¸€æ¬¡æ€§åˆ›å»ºå¤šä¸ªæ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir dir1 dir2 dir3</span><br></pre></td></tr></table></figure><p>ä¼šåˆ›å»ºä¸‰ä¸ªç›®å½•ã€‚</p><h2 id="å¤åˆ¶æ–‡ä»¶å’Œç›®å½•"><a class="header-anchor" href="#å¤åˆ¶æ–‡ä»¶å’Œç›®å½•">#</a>å¤åˆ¶æ–‡ä»¶å’Œç›®å½•</h2><p>ä¸¤ç§ç”¨æ³•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp item1 item2</span><br></pre></td></tr></table></figure><p>å¤åˆ¶å•ä¸ªæ–‡ä»¶æˆ–ç›®å½•<code>item1</code>åˆ°æ–‡ä»¶æˆ–ç›®å½•<code>item2</code>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp item1... directory</span><br></pre></td></tr></table></figure><p>å¤åˆ¶å¤šä¸ªé¡¹ç›®ï¼ˆæ–‡ä»¶æˆ–ç›®å½•ï¼‰åˆ°ä¸€ä¸ªç›®å½•ä¸‹ã€‚</p><p><code>cp</code>å‘½ä»¤çš„ä¸€äº›å‚æ•°é€‰é¡¹ï¼š</p><table><thead><tr><th style="text-align:center">é€‰é¡¹</th><th style="text-align:left">é•¿é€‰é¡¹</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:center"><code>-a</code></td><td style="text-align:left"><code>--archive</code></td><td style="text-align:left">å¤åˆ¶æ–‡ä»¶å’Œç›®å½•ï¼Œä»¥åŠå®ƒä»¬çš„å±æ€§ï¼ŒåŒ…æ‹¬æ‰€æœ‰æƒå’Œæƒé™ã€‚é€šå¸¸ï¼Œå‰¯æœ¬å…·æœ‰ç”¨æˆ·æ‰€æ“ä½œæ–‡ä»¶çš„é»˜è®¤å±æ€§ã€‚</td></tr><tr><td style="text-align:center"><code>-i</code></td><td style="text-align:left"><code>--interactive</code></td><td style="text-align:left">åœ¨é‡å†™å·²å­˜åœ¨æ–‡ä»¶ä¹‹å‰ï¼Œæç¤ºç”¨æˆ·ç¡®è®¤ã€‚å¦‚æœè¿™ä¸ªé€‰é¡¹ä¸æŒ‡å®šï¼Œcp å‘½ä»¤ä¼šé»˜è®¤é‡å†™æ–‡ä»¶ã€‚</td></tr><tr><td style="text-align:center"><code>-r</code></td><td style="text-align:left"><code>--recursive</code></td><td style="text-align:left">é€’å½’åœ°å¤åˆ¶ç›®å½•åŠç›®å½•ä¸­çš„å†…å®¹ã€‚å½“å¤åˆ¶ç›®å½•æ—¶ï¼Œéœ€è¦è¿™ä¸ªé€‰é¡¹ï¼ˆæˆ–è€…-a é€‰é¡¹ï¼‰ã€‚</td></tr><tr><td style="text-align:center"><code>-u</code></td><td style="text-align:left"><code>--update</code></td><td style="text-align:left">å½“æŠŠæ–‡ä»¶ä»ä¸€ä¸ªç›®å½•å¤åˆ¶åˆ°å¦ä¸€ä¸ªç›®å½•æ—¶ï¼Œä»…å¤åˆ¶ç›®æ ‡ç›®å½•ä¸­ä¸å­˜åœ¨çš„æ–‡ä»¶ï¼Œæˆ–è€…æ˜¯æ–‡ä»¶å†…å®¹æ–°äºç›®æ ‡ç›®å½•ä¸­å·²ç»å­˜åœ¨çš„æ–‡ä»¶ã€‚</td></tr><tr><td style="text-align:center"><code>-v</code></td><td style="text-align:left"><code>--verbose</code></td><td style="text-align:left">æ˜¾ç¤ºè¯¦ç»†çš„å‘½ä»¤æ“ä½œä¿¡æ¯</td></tr></tbody></table><p>ç¤ºä¾‹ï¼š</p><ul><li><code>cp file1 file2</code> å¤åˆ¶æ–‡ä»¶ file1 å†…å®¹åˆ°æ–‡ä»¶ file2ã€‚å¦‚æœ file2 å·²ç»å­˜åœ¨ï¼Œfile2 çš„å†…å®¹ä¼šè¢« file1 çš„å†…å®¹é‡å†™ã€‚å¦‚æœ file2 ä¸å­˜åœ¨ï¼Œåˆ™ä¼šåˆ›å»º file2ã€‚</li><li><code>cp -i file1 file2</code> è¿™æ¡å‘½ä»¤å’Œä¸Šé¢çš„å‘½ä»¤ä¸€æ ·ï¼Œé™¤äº†å¦‚æœæ–‡ä»¶ file2 å­˜åœ¨çš„è¯ï¼Œåœ¨æ–‡ä»¶ file2 è¢«é‡å†™ä¹‹å‰ï¼Œä¼šæç¤ºç”¨æˆ·ç¡®è®¤ä¿¡æ¯ã€‚</li><li><code>cp file1 file2 dir1</code> å¤åˆ¶æ–‡ä»¶ file1 å’Œæ–‡ä»¶ file2 åˆ°ç›®å½• dir1ã€‚ç›®å½• dir1 å¿…é¡»å­˜åœ¨ã€‚</li><li><code>cp dir1/* dir2</code> ä½¿ç”¨ä¸€ä¸ªé€šé…ç¬¦ï¼Œåœ¨ç›®å½• dir1 ä¸­çš„æ‰€æœ‰æ–‡ä»¶éƒ½è¢«å¤åˆ¶åˆ°ç›®å½• dir2 ä¸­ã€‚dir2 å¿…é¡»å·²ç»å­˜åœ¨ã€‚</li><li><code>cp -r dir1 dir2</code> å¤åˆ¶ç›®å½• dir1 ä¸­çš„å†…å®¹åˆ°ç›®å½• dir2ã€‚å¦‚æœç›®å½• dir2 ä¸å­˜åœ¨ï¼Œåˆ›å»ºç›®å½• dir2ï¼Œæ“ä½œå®Œæˆåï¼Œç›®å½• dir2 ä¸­çš„å†…å®¹å’Œ dir1 ä¸­çš„ä¸€æ ·ã€‚å¦‚æœç›®å½• dir2 å­˜åœ¨ï¼Œåˆ™ç›®å½•<code>dir1</code>å’Œ<code>ç›®å½•ä¸­çš„å†…å®¹</code>å°†ä¼šè¢«å¤åˆ¶åˆ°<code>dir2</code>ä¸­ã€‚</li></ul><p>æœ€åä¸€ä¸ªæ¯”è¾ƒéš¾ç†è§£ï¼Œåšä¸ªä¾‹å­è‡ªå·±è¯•ä¸€ä¸‹ï¼</p><h3 id="ç¤ºä¾‹"><a class="header-anchor" href="#ç¤ºä¾‹">#</a>ç¤ºä¾‹</h3><p>é¦–å…ˆåˆ›å»ºä¸€ä¸‹æµ‹è¯•çš„ç¯å¢ƒï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">onns@DESKTOP-5JJP7PL:~$ ls</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ mkdir dir1</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ mkdir dir2</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ vi dir1/text1</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ vi dir2/text2</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ vi dir1/text3</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ ls dir1/ dir2/</span><br><span class="line">dir1/:</span><br><span class="line">text1  text3</span><br><span class="line"></span><br><span class="line">dir2/:</span><br><span class="line">text2</span><br></pre></td></tr></table></figure><p>ç„¶åæ‰§è¡Œä¸€ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">onns@DESKTOP-5JJP7PL:~$ cp -r dir1 dir2</span><br></pre></td></tr></table></figure><p>ç„¶åæŸ¥çœ‹ç»“æœï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">onns@DESKTOP-5JJP7PL:~$ ls dir1 dir2</span><br><span class="line">dir1:</span><br><span class="line">text1  text3</span><br><span class="line"></span><br><span class="line">dir2:</span><br><span class="line">dir1  text2</span><br><span class="line">onns@DESKTOP-5JJP7PL:~$ ls dir1 dir2 dir2/dir1</span><br><span class="line">dir1:</span><br><span class="line">text1  text3</span><br><span class="line"></span><br><span class="line">dir2:</span><br><span class="line">dir1  text2</span><br><span class="line"></span><br><span class="line">dir2/dir1:</span><br><span class="line">text1  text3</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> shell </tag>
            
            <tag> bash </tag>
            
            <tag> shell note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‘¨æŠ¥-20201105</title>
      <link href="/blog/2020/11/05/weekly-report-20201105/"/>
      <url>/blog/2020/11/05/weekly-report-20201105/</url>
      
        <content type="html"><![CDATA[<center ondblclick="javascript:document.getElementsByTagName('header')[0].remove();document.getElementsByTagName('header')[0].remove();document.getElementsByTagName('footer')[0].remove();document.getElementsByTagName('footer')[0].remove();document.getElementById('comments').remove();document.getElementById('back-to-top').remove();document.getElementById('post-toc').remove();"><table><thead><tr><th style="text-align:center">2020-11-05</th><th style="text-align:center">å‘¨æŠ¥#11</th><th style="text-align:center">åˆ˜æ½˜</th></tr></thead><tbody></tbody></table></center><a id="more"></a><h1 id="i-task-achieved-last-week"><a class="header-anchor" href="#i-task-achieved-last-week">#</a>I. Task achieved last week</h1><hr><ul><li>ã€ŠMotionSqueeze: Neural Motion Feature Learning for Video Understandingã€‹é‡æ–°ç²¾è¯»äº†ä¸€éå¹¶æ•´ç†äº†ç¬”è®°ã€‚</li><li>æ·»åŠ äº†<code>MS</code>æ¨¡å—çš„ç½‘ç»œï¼Œå‡†ç¡®ç‡åˆ†åˆ«æé«˜äº†<code>0.6%</code>å’Œ<code>0.8%</code>ã€‚</li><li>ã€ŠTemporal Interlacing Networkã€‹ç½‘ç»œçš„æ•ˆæœä¸å¥½ï¼Œå‡†ç¡®ç‡å¤§æ¦‚é™ä½äº†<code>0.8%</code>ï¼Œè®¾è®¡çš„æ¨¡å—å¯èƒ½å’Œæˆ‘ç°æœ‰çš„ç½‘ç»œæœ‰æ‰€å†²çªã€‚</li></ul><h1 id="ii-reports"><a class="header-anchor" href="#ii-reports">#</a>II. Reports</h1><hr><h2 id="motionsqueeze-neural-motion-feature-learning-for-video-understanding"><a class="header-anchor" href="#motionsqueeze-neural-motion-feature-learning-for-video-understanding">#</a>MotionSqueeze: Neural Motion Feature Learning for Video Understanding</h2><p>ä¸»è¦çš„åˆ›æ–°ç‚¹æ˜¯<code>MS module</code>ï¼Œå®ƒæŠŠè¿™ä¸ªç»“æ„æ’å…¥åˆ°äº†<code>ResNet</code>çš„ç½‘ç»œä¸­é—´ï¼Œå…·ä½“æ¥è¯´åœ¨<code>layer2</code>ä¹‹åï¼Œ<code>layer3</code>ä¹‹å‰ã€‚</p><center><!-- //onns.xyz/blog/image --><p><img src="//onns.xyz/blog/image/20201022-1.png" alt="ç»“æ„å›¾"></p></center><p>é€»è¾‘ä¸Šå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œé“ç†ä¸Šè¯´å¾—å¾ˆæ¸…æ¥šï¼Œé¦–å…ˆè¿›è¡Œå…³è”æ€§è®¡ç®—ï¼Œå°±æ˜¯ä¸ºäº†åˆ¤æ–­å½“å‰çš„ç‚¹å¯èƒ½ä¼šä½ç§»åˆ°ä»€ä¹ˆä½ç½®ï¼Œå³ä»€ä¹ˆä½ç½®çš„ç‚¹æœ€æœ‰å¯èƒ½æ˜¯ç”±å½“å‰çš„ç‚¹ä½ç§»è¿‡å»çš„ã€‚</p><p>ç„¶åé€šè¿‡ä¼°è®¡ä¸Šçš„ç‚¹ï¼Œè®¡ç®—åç§»ã€‚</p><p>æœ€åè®¡ç®—ç‰¹å¾è½¬æ¢ã€‚ï¼ˆè¿™ä¸ªå…¶å®æˆ‘æ²¡å¤ªç†è§£ï¼‰</p><center><!-- //onns.xyz/blog/image --><p><img src="//onns.xyz/blog/image/20201022-2.png" alt="ç»“æ„å›¾"></p></center><!-- more --><h2 id="ç›¸å…³å·¥ä½œ"><a class="header-anchor" href="#ç›¸å…³å·¥ä½œ">#</a>ç›¸å…³å·¥ä½œ</h2><p>å¯¹äºä¸€ä¸ªè§†é¢‘æ¥è¯´ï¼ŒåŠ¨ä½œæ˜¯æœ€æ˜¾è‘—çš„ç‰¹å¾ï¼ŒåŠ¨ä½œæ¨¡å‹æå–å¾—å¥½ï¼Œè¯†åˆ«çš„å‡†ç¡®ç‡å°±ä¼šæé«˜ã€‚</p><p>å·ç§¯åœ¨æ•è·å¹³ç§»ç­‰å˜åŒ–çš„æ¨¡å‹ä¸Šå…·å¤‡æœ‰æ•ˆæ€§ï¼Œä½†æ˜¯å¯¹ç›¸å¯¹è¿åŠ¨çš„ç‰©ä½“ä¸Šå»ºæ¨¡å°±å¾ˆéš¾è®©äººæ„Ÿåˆ°æ»¡æ„ã€‚</p><blockquote><p>convolution is effective in capturing translation-equivariant patterns but not in modeling relative movement of objects</p></blockquote><p>è®ºæ–‡çš„ä¸»è¦å·¥ä½œæ”¾åœ¨å¦‚ä½•å­¦ä¹ åŠ¨ä½œç‰¹å¾ä¸Šã€‚</p><blockquote><p>we focus on efficient learning of motion features.</p></blockquote><p>ä¸€äº›ç°æœ‰çš„ç ”ç©¶æ–¹å‘è¿›å±•ï¼š</p><ol><li>æœ‰ä¸€äº›åœ¨æ¨ç†éƒ¨åˆ†ä¸éœ€è¦å…‰æµè¾“å…¥ï¼Œä½†æ˜¯è®­ç»ƒä»ç„¶éœ€è¦çš„ã€‚</li><li>é€šè¿‡è®¡ç®—ç‰¹å¾çš„æ—¶ç©ºæ¢¯åº¦æ¥è¡¨å¾åŠ¨ä½œç‰¹å¾ã€‚</li><li>æå‡ºäº†ä¸€ç§å·ç§¯æ¨¡å—ï¼Œé€šè¿‡åœ¨å¤–è§‚ç‰¹å¾ä¹‹é—´è¿›è¡Œç©ºé—´ç§»åŠ¨å’Œå‡æ³•è¿ç®—æ¥æå–è¿åŠ¨ç‰¹å¾ã€‚</li><li>è®¡ç®—å·ç§¯ç¥ç»ç½‘ç»œä¸­é—´å±‚çš„ç‰¹å¾å±‚å…‰æµï¼Œè™½ç„¶æ•ˆæœå¾ˆå¥½ï¼Œä½†æ˜¯éœ€è¦å¾ˆé«˜çš„è®¡ç®—é‡ï¼Œå› ä¸ºåœ¨ç½‘ç»œä¸­é—´å±‚è¿›è¡Œæ“ä½œã€‚</li></ol><p>å…‰æµä¼°è®¡æ–¹æ³•ï¼š</p><ol><li>å¯¹ç‰¹å¾å›¾æ„å»ºå¼ é‡ï¼Œå¹¶å¯¹å¼ é‡è¿›è¡Œå›å½’ã€‚</li><li>é€šè¿‡å †å çš„ç‰¹å¾å±‚æ¥è¿›è¡Œç²—ç•¥çš„å…‰æµä¼°è®¡ã€‚</li></ol><p>ä¸è¿‡è¿™äº›æ–¹æ³•éƒ½éœ€è¦å…‰æµå›¾åš<code>ground-truth</code>ã€‚</p><p>æœ€è¿‘çš„ä¸€äº›ç›¸å…³å·¥ä½œï¼š</p><ol><li>åˆ©ç”¨è¿ç»­å¸§çš„ç‰¹å¾å›¾ä¹‹é—´çš„ç›¸å…³ä¿¡æ¯æ¥ä»£æ›¿å…‰å­¦å›¾åƒã€‚ä¸è¿‡è¿™ä¸ªå®Œæ•´æ¨¡å‹çš„å¤§å°ä¸åŒæµç½‘ç»œç›¸å½“ã€‚</li><li>æå‡º<code>correspondences proposal</code>æ¨¡å—æ¥å­¦ä¹ è§†é¢‘é—´çš„è”ç³»ã€‚</li></ol><h2 id="msæ¨¡å—"><a class="header-anchor" href="#msæ¨¡å—">#</a>MSæ¨¡å—</h2><p>ä¸»è¦åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤<code>ç›¸å…³æ€§è®¡ç®—</code>ï¼ˆcorrelation computationï¼‰ã€<code>ä½ç§»ä¼°è®¡</code>ï¼ˆdisplacement estimationï¼‰å’Œ<code>ç‰¹å¾å˜æ¢</code>ï¼ˆfeature transformationï¼‰ã€‚</p><h3 id="ç›¸å…³æ€§è®¡ç®—"><a class="header-anchor" href="#ç›¸å…³æ€§è®¡ç®—">#</a>ç›¸å…³æ€§è®¡ç®—</h3><p>å®šä¹‰ç»™å®šçš„æŸä¸€ä¸ªç‰¹å¾å±‚çš„è¾“å…¥ç‰¹å¾å›¾$\mathbf{F}^{(t)}$å’Œ$\mathbf{F}^{(t+1)}$ï¼Œ$\mathbf{F}$çš„å¤§å°ä¸ºï¼š</p><p>$$<br>\mathbf{F} \in \mathbb{R}^{C \times H \times W}<br>$$</p><p>å¯¹äºæŸä¸€ä¸ªä½ç½®$\mathbf{x}$å’Œä½ç§»$\mathbf{p}$çš„ç›¸å…³æ€§å¯ä»¥é€šè¿‡ä¸‹åˆ—å…¬å¼å¾—åˆ°ï¼š</p>$$s(\mathbf{x},\mathbf{p},t)=\mathbf{F}^{(t)}_{\mathbf{x}} \cdot \mathbf{F}^{(t+1)}_{\mathbf{x}+\mathbf{p}}$$<p>$\cdot$ä»£è¡¨<code>ç‚¹ç§¯</code>ã€‚</p><p>ä¸ºäº†ä¿è¯è®¡ç®—æ•ˆç‡ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ä»ç»éªŒä¸­å¾—åˆ°å…¶å®ä¸€ä¸ªä½ç½®çš„è¿åŠ¨ç›¸å¯¹ä¸ä¼šå¾ˆå¤§ï¼ˆé‰´äºæ•°æ®é›†æ˜¯25å¸§-56å¸§ä¸ç­‰ï¼Œå…¶å®ä¹Ÿè¿˜æ˜¯è›®å¤§çš„ï¼‰<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>ï¼Œ$\mathbf{p}$æœ‰ä¸€ä¸ªèŒƒå›´$\mathbf{p}\in[-k,k]^2$ã€‚</p><p>æœ€ç»ˆç›¸å…³æ€§ç»“æœä¸ºï¼š</p><p>$$<br>\mathbf{S}^{(t)} \in \mathbb{R}^{H \times W \times P^2}, P=2k+1<br>$$</p><p>è¿™ä¸ªè®¡ç®—é‡ä¸$P^2$ä¸ª$1 \times 1$çš„å·ç§¯æ ¸è®¡ç®—é‡ç›¸å½“ï¼Œæ•´ä¸ªè§†é¢‘çš„FLOPsä¸º$T H W C P^2$ã€‚</p><p>åœ¨è®¡ç®—ç›¸å…³æ€§ä¹‹å‰ï¼Œå…ˆåœ¨å‰é¢è¿›è¡Œä¸€æ¬¡å·ç§¯æ“ä½œï¼Œç›®çš„æ˜¯ä¸ºäº†å¯¹è¿™äº›ç‰¹å¾é€šé“è¿›è¡ŒåŠ æƒï¼Œè¿›è€Œæ¥å­¦ä¹ ç›¸å…³çš„è§†è§‰è”ç³»ã€‚</p><blockquote><p>We apply a convolution layer before computing correlations, which learns to weight informative feature channels for learning visual correspondences.</p></blockquote><center><!-- //onns.xyz/blog/image --><p><img src="//onns.xyz/blog/image/20201102-1.png" alt="MSç»“æ„å›¾"></p></center><h3 id="ä½ç§»ä¼°è®¡"><a class="header-anchor" href="#ä½ç§»ä¼°è®¡">#</a>ä½ç§»ä¼°è®¡</h3><p>åœ¨å‰é¢ï¼Œæˆ‘ä»¬å·²ç»å¾—åˆ°äº†æŸä¸ªç‚¹ï¼Œä¸è¿™ä¸ªç‚¹åœ¨ä¸‹ä¸€å¸§å›¾åƒä¸­å‘¨å›´ç‚¹çš„ç›¸å…³æ€§å¼ é‡ï¼Œç„¶åå°±å¯ä»¥æ‰¾å‡ºè¿™é‡Œé¢ç›¸å…³æ€§æœ€å¤§çš„ç‚¹åšä½ç§»ä¼°è®¡ã€‚</p><p>æœ€ç®€å•ä¸”æœ€æœ‰æ•ˆåœ°æ–¹æ³•å½“ç„¶æ˜¯ç›´æ¥ç”¨$\mathrm{argmax}_{\mathbf{p}}s(\mathbf{x},\mathbf{p},t)$æ¥è®¡ç®—ï¼Œä½†æ˜¯è¿™ä¸ªæ–¹æ³•æ˜¯<code>ä¸å¯å¾®çš„</code>ï¼Œæ‰€ä»¥ç”¨ä¸€ä¸ªæ›¿ä»£æ–¹æ³•ï¼š<code>soft-argmax</code>ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š</p><p>$$<br>d(\mathbf{x},t) = \sum_{\mathbf{p}} \frac{\exp(s(\mathbf{x},\mathbf{p},t))}{\sum_{\mathbf{p}â€™}{\exp(s(\mathbf{x},\mathbf{p}â€™,t))}} \mathbf{p}.<br>$$</p><p>ä½†æ˜¯è¿™ä¸ªæ–¹æ³•ä¼šå¯¹å‘¨å›´çš„å™ªç‚¹æ¯”è¾ƒæ•æ„Ÿï¼Œå› ä¸ºä»–å—æ‰€æœ‰çš„ç‚¹çš„å€¼å½±å“ï¼Œè§£å†³æ–¹æ³•æ˜¯ï¼š<code>kernel-soft-argmax</code>ï¼Œæ€è·¯æ˜¯å¯¹éä¸­å¿ƒç‚¹è¿›è¡ŒæŠ‘åˆ¶ï¼Œæ‰€ä»¥å¾—åˆ°çš„ç»“æœå¤§éƒ¨åˆ†ä¼šæ¥è‡ªä¸­å¿ƒç‚¹ï¼ŒåŠå‘¨å›´ç›¸å…³çš„ç‚¹ï¼š</p><p>$$<br>d(\mathbf{x},t) = \sum_{\mathbf{p}} \frac{\exp(g(\mathbf{x},\mathbf{p},t)s(\mathbf{x},\mathbf{p},t) / \tau )}{\sum_{\mathbf{p}â€™}{\exp( g(\mathbf{x},\mathbf{p}â€™,t) s(\mathbf{x},\mathbf{p}â€™,t) / \tau )}}  \mathbf{p},<br>$$</p><p>$$<br>g(\mathbf{x},\mathbf{p},t) = \frac{1}{\sqrt{2\pi}\sigma}\exp(\frac{\mathbf{p}-\mathrm{argmax}_{\mathbf{p}}s(\mathbf{x},\mathbf{p},t)}{\sigma^{2}})<br>$$</p><p>æ ¹æ®ç»éªŒï¼Œä»¤$\sigma=5$ã€‚$\tau$æ˜¯ä¸€ä¸ªæ¸©åº¦å› å­ï¼Œç”¨æ¥è°ƒèŠ‚<code>softmax</code>çš„åˆ†å¸ƒï¼Œéšç€$\tau$çš„ä¸‹é™ï¼Œ<code>softmax</code>è¡¨ç°ä¸º<code>argmax</code>ï¼Œä»¤$\tau=0.01$ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œä½¿ç”¨ç›¸å…³ç½®ä¿¡åº¦å›¾ä½œä¸ºè¾…åŠ©è¿åŠ¨ä¿¡æ¯ï¼Œæ±‚è§£æ–¹æ³•æ˜¯å¯¹æ¯ä¸ªä½ç½®ç‚¹$\mathbf{x}$è¿›è¡Œæœ€å¤§æ± åŒ–ï¼š</p><p>$$<br>s^{*}(\mathbf{x},t) =\max_{\mathbf{p}}s(\mathbf{x},\mathbf{p},t)<br>$$</p><p>$$<br>\mathbf{S}^* \in \mathbb{R}^{H \times W \times 1}<br>$$</p><p>è®ºæ–‡é‡Œè¯´ä½ç§»ä¼°è®¡æœ€åå‡ºæ¥æœ‰ä¸¤ä¸ªé€šé“ï¼Œä½†æ˜¯æˆ‘ç›®å‰è¿˜ä¸çŸ¥é“ä¸ºä»€ä¹ˆæ˜¯åŒé€šé“ï¼Œå¾…åˆ°çœ‹ä»£ç åº”è¯¥å¯ä»¥çŸ¥é“ã€‚</p><p>ç„¶åæŠŠä¸¤é€šé“å’Œä¸Šé¢çš„å•é€šé“åˆå¹¶ï¼Œå¾—åˆ°ä½ç§»ä¼°è®¡å¼ é‡ï¼š</p><p>$$<br>\mathbf{D}^{(t)} \in \mathbb{R}^{H \times W \times 3}<br>$$</p><center><!-- //onns.xyz/blog/image --><p><img src="//onns.xyz/blog/image/20201102-1.png" alt="MSç»“æ„å›¾"></p></center><h3 id="ç‰¹å¾å˜æ¢"><a class="header-anchor" href="#ç‰¹å¾å˜æ¢">#</a>ç‰¹å¾å˜æ¢</h3><p>ç”¨å››å±‚å·ç§¯å·ï¼Œ<code>depth-wise separable convolution</code>ï¼Œå› ä¸ºä¸Šè¿°ç‰¹å¾éƒ½æ˜¯é€šè¿‡ä¸¤å¸§ç›¸å‡å¾—åˆ°çš„ï¼Œæ‰€ä»¥æœ€åä¼šå°‘ä¸€ä¸ªç‰¹å¾ï¼Œè®ºæ–‡ç›´æ¥ä»¤$\mathbf{M}^{(T)}=\mathbf{M}^{(T-1)}$ï¼Œ$\mathbf{M}^{(T)}$æ˜¯ä¸Šä¸€æ­¥çš„$\mathbf{D}^{(T)}$å·ç§¯å¾—åˆ°çš„ã€‚</p><p>ç»è¿‡å·ç§¯æ“ä½œï¼Œä¹Ÿæ¢å¤æˆäº†åŸæ¥çš„å°ºå¯¸ï¼š</p><p>$$<br>\mathbf{D}^{(t)} \in \mathbb{R}^{H \times W \times C}<br>$$</p><center><!-- //onns.xyz/blog/image --><p><img src="//onns.xyz/blog/image/20201102-1.png" alt="MSç»“æ„å›¾"></p></center><p>æœ€ç»ˆçš„ç»“æœä¼šåŠ å›åˆ°åŸæ¥çš„ç‰¹å¾å›¾ä¸Šï¼Œè®ºæ–‡é€šè¿‡åšå®éªŒå‘ç°è¿™æ ·æ•ˆæœæœ€å¥½ï¼š</p><p>$$<br>\mathbf{F}â€™^{(t)} =\mathbf{F}^{(t)} + \mathbf{M}^{(t)}<br>$$</p><center><!-- //onns.xyz/blog/image --><p><img src="//onns.xyz/blog/image/20201102-2.png" alt="ç½‘ç»œå›¾"></p></center><h2 id="è¯¦ç»†ä»£ç "><a class="header-anchor" href="#è¯¦ç»†ä»£ç ">#</a>è¯¦ç»†ä»£ç </h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">x = self.layer1(x)                             </span><br><span class="line">x = self.layer2(x)          </span><br><span class="line"></span><br><span class="line"><span class="comment"># Flow </span></span><br><span class="line">flow_1, match_v = self.flow_computation(x, temperature=temperature)</span><br><span class="line">x = self.flow_refinement(flow_1, x, match_v)</span><br><span class="line"><span class="comment"># EndFlow </span></span><br><span class="line"></span><br><span class="line">x = self.layer3(x)                           </span><br><span class="line">x = self.layer4(x)</span><br></pre></td></tr></table></figure><p>é¦–å…ˆæ˜¯ä»£ç å…¥å£ï¼Œä»£ç å°±æ˜¯åœ¨<code>ResNet</code>çš„å±‚ä¹‹é—´æ·»åŠ çš„ï¼Œå…·ä½“çš„æ˜¯åœ¨<code>layer2</code>å’Œ<code>layer3</code>ä¹‹é—´ã€‚ä¸€å…±æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸€å…±æ˜¯ä¸Šé¢è¯´çš„<code>MS</code>çš„è®¡ç®—ï¼Œå³<code>flow_computation</code>ï¼Œè¿™é‡Œå‡ºæ¥çš„ç»“æœæ˜¯ä¸Šé¢è¯´çš„$\mathbf{D}^{(t)}$ï¼Œä¸Šé¢è¯´è¿‡$\mathbf{D}^{(t)}$æœ‰ä¸‰ä¸ªé€šé“ï¼Œ<code>flow_1</code>æ˜¯å‰ä¸¤ä¸ª<code>å…‰æµé€šé“</code>ï¼Œ<code>match_v</code>æ˜¯ç¬¬ä¸‰ä¸ªçš„è¾…åŠ©è¿åŠ¨ä¿¡æ¯ï¼Œå³$\mathbf{S}^*$ã€‚ç¬¬äºŒä¸ªæ˜¯<code>MS</code>çš„å‡ ä¸ªå·ç§¯å±‚+æœ€ç»ˆçš„èåˆï¼Œå°±æ˜¯ä»$\mathbf{D}^{(t)}$åˆ°$\mathbf{M}^{(t)}$å†åˆ°$\mathbf{F}'^{(t)}$çš„è¿‡ç¨‹ï¼Œå³<code>flow_refinement</code>ã€‚</p><p>ç„¶åçœ‹ä¸€ä¸‹<code>flow_computation</code>æ–¹æ³•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">flow_computation</span><span class="params">(self, x, pos=<span class="number">2</span>, temperature=<span class="number">100</span>)</span>:</span></span><br><span class="line"></span><br><span class="line">x = self.chnl_reduction(x)</span><br><span class="line"><span class="comment"># chnl_reduction æºç å¦‚ä¸‹ï¼Œä¸»è¦åšçš„æ“ä½œæ˜¯é™ä½é€šé“æ•°</span></span><br><span class="line"><span class="comment"># self.chnl_reduction = nn.Sequential(</span></span><br><span class="line"><span class="comment">#     nn.Conv2d(128*block.expansion, 64, kernel_size=1, stride=1, padding=0, bias=False),</span></span><br><span class="line"><span class="comment">#     nn.BatchNorm2d(64),</span></span><br><span class="line"><span class="comment">#     nn.ReLU(inplace=True)</span></span><br><span class="line"><span class="comment"># )</span></span><br><span class="line"></span><br><span class="line">size = x.size()               </span><br><span class="line">x = x.view((<span class="number">-1</span>, self.num_segments) + size[<span class="number">1</span>:])        <span class="comment"># N T C H W</span></span><br><span class="line">x = x.permute(<span class="number">0</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>).contiguous() <span class="comment"># B C T H W   </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># match to flow            </span></span><br><span class="line">k = <span class="number">1</span>            </span><br><span class="line">temperature = temperature                    </span><br><span class="line">b,c,t,h,w = x.size()            </span><br><span class="line">t = t<span class="number">-1</span>         </span><br><span class="line"></span><br><span class="line">x_pre = x[:,:,:<span class="number">-1</span>].permute(<span class="number">0</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>).contiguous().view(<span class="number">-1</span>,c,h,w)</span><br><span class="line">x_post = x[:,:,<span class="number">1</span>:].permute(<span class="number">0</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>).contiguous().view(<span class="number">-1</span>,c,h,w)</span><br><span class="line"></span><br><span class="line">match = self.matching_layer(x_pre, x_post)    <span class="comment"># (B*T-1*group, H*W, H*W)          </span></span><br><span class="line">u, v, confidence = self.match_to_flow_soft(match, k, h, w, temperature)</span><br><span class="line">flow = tr.cat([u,v], dim=<span class="number">1</span>).view(<span class="number">-1</span>, <span class="number">2</span>*k, h, w)  <span class="comment">#  (b, 2, h, w)            </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># backward flow</span></span><br><span class="line"><span class="comment">#             match2 = self.matching_layer(x_post, x_pre)</span></span><br><span class="line"><span class="comment">#             u_2, v_2, confidence_2 = self.match_to_flow_soft(match2, k, h, w,temperature)       </span></span><br><span class="line"><span class="comment">#             flow_2 = tr.cat([u_2,v_2],dim=1).view(-1,2, h, w)   </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> flow, confidence</span><br></pre></td></tr></table></figure><p>é¦–å…ˆè¿›è¡Œäº†é™ä½é€šé“æ•°çš„æ“ä½œï¼Œç„¶åå¯¹äºä¸åŒ $t$ æ—¶åˆ»çš„ç‰¹å¾å›¾ï¼Œè¿›è¡Œ<code>matching_layer</code>æ“ä½œï¼Œå¾—åˆ°<code>match</code>å¼ é‡ï¼Œå¯¹åº”è®ºæ–‡ä¸­çš„$\mathbf{S}^{(t)}$ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">feature1 = self.L2normalize(feature1)</span><br><span class="line">feature2 = self.L2normalize(feature2)</span><br><span class="line">b, c, h1, w1 = feature1.size()</span><br><span class="line">b, c, h2, w2 = feature2.size()</span><br><span class="line">corr = self.correlation_sampler(feature1, feature2)</span><br><span class="line">corr = corr.view(b, self.patch * self.patch, h1* w1) <span class="comment"># Channel : target // Spatial grid : source</span></span><br><span class="line">corr = self.relu(corr)</span><br><span class="line"><span class="keyword">return</span> corr</span><br></pre></td></tr></table></figure><p>ç›´æ¥å†™äº†ä¸€ä¸ª<code>forward</code>æ–¹æ³•ï¼Œ<code>correlation_sampler</code>è°ƒç”¨çš„æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„åº“ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">self.correlation_sampler = SpatialCorrelationSampler(ks, patch, stride, pad, patch_dilation)</span><br></pre></td></tr></table></figure><p>æ€»å¾—æ¥è¯´å°±æ˜¯æ±‚ç›¸å…³æ€§çš„ã€‚</p><p>ç„¶åæ˜¯<code>match_to_flow_soft</code>æ–¹æ³•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">match_to_flow_soft</span><span class="params">(self, match, k, h,w, temperature=<span class="number">1</span>, mode=<span class="string">'softmax'</span>)</span>:</span>        </span><br><span class="line">b, c , s = match.size()     </span><br><span class="line">idx = tr.arange(h*w, dtype=tr.float32).to(<span class="string">'cuda'</span>)</span><br><span class="line">idx_x = idx % w</span><br><span class="line">idx_x = idx_x.repeat(b,k,<span class="number">1</span>).to(<span class="string">'cuda'</span>)</span><br><span class="line">idx_y = tr.floor(idx / w)   </span><br><span class="line">idx_y = idx_y.repeat(b,k,<span class="number">1</span>).to(<span class="string">'cuda'</span>)</span><br><span class="line"></span><br><span class="line">soft_idx_x = idx_x[:,:<span class="number">1</span>]</span><br><span class="line">soft_idx_y = idx_y[:,:<span class="number">1</span>]</span><br><span class="line">displacement = (self.patch<span class="number">-1</span>)/<span class="number">2</span></span><br><span class="line"></span><br><span class="line">topk_value, topk_idx = tr.topk(match, k, dim=<span class="number">1</span>)    <span class="comment"># (B*T-1, k, H*W)</span></span><br><span class="line">topk_value = topk_value.view(<span class="number">-1</span>,k,h,w)</span><br><span class="line"></span><br><span class="line">match = self.apply_gaussian_kernel(match, h, w, self.patch, sigma=<span class="number">5</span>)</span><br><span class="line">match = match*temperature</span><br><span class="line">match_pre = self.soft_argmax(match)</span><br><span class="line">smax = match_pre           </span><br><span class="line">smax = smax.view(b,self.patch,self.patch,h,w)</span><br><span class="line">x_kernel = tr.arange(-displacement*self.patch_dilation, displacement*self.patch_dilation+<span class="number">1</span>, step=self.patch_dilation, dtype=tr.float).to(<span class="string">'cuda'</span>)</span><br><span class="line">y_kernel = tr.arange(-displacement*self.patch_dilation, displacement*self.patch_dilation+<span class="number">1</span>, step=self.patch_dilation, dtype=tr.float).to(<span class="string">'cuda'</span>)</span><br><span class="line">x_mult = x_kernel.expand(b,self.patch).view(b,self.patch,<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line">y_mult = y_kernel.expand(b,self.patch).view(b,self.patch,<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">smax_x = smax.sum(dim=<span class="number">1</span>, keepdim=<span class="literal">False</span>) <span class="comment">#(b,w=k,h,w)</span></span><br><span class="line">smax_y = smax.sum(dim=<span class="number">2</span>, keepdim=<span class="literal">False</span>) <span class="comment">#(b,h=k,h,w)</span></span><br><span class="line">flow_x = (smax_x*x_mult).sum(dim=<span class="number">1</span>, keepdim=<span class="literal">True</span>).view(<span class="number">-1</span>,<span class="number">1</span>,h*w) <span class="comment"># (b,1,h,w)</span></span><br><span class="line">flow_y = (smax_y*y_mult).sum(dim=<span class="number">1</span>, keepdim=<span class="literal">True</span>).view(<span class="number">-1</span>,<span class="number">1</span>,h*w) <span class="comment"># (b,1,h,w)    </span></span><br><span class="line"></span><br><span class="line">flow_x = (flow_x / (self.patch_dilation * displacement))</span><br><span class="line">flow_y = (flow_y / (self.patch_dilation * displacement))</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> flow_x, flow_y, topk_value</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå°±å¯ä»¥è§£é‡Šä¸Šé¢çš„ç–‘é—®äº†ï¼Œä¸ºä»€ä¹ˆåŒ¹é…å‡ºæ¥çš„é€šé“æ•°æ˜¯<code>2</code>ï¼Œå°±æ˜¯å’Œå…‰æµä¸€æ ·çš„åŸå› ï¼Œä¸€ä¸ªæ˜¯<code>x</code>æ–¹å‘ä¸Šçš„ï¼Œä¸€ä¸ªæ˜¯<code>y</code>æ–¹å‘ä¸Šçš„ã€‚</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>è¿™ç¬¬äºŒå¥è¯æ˜¯æˆ‘è‡ªå·±åŠ çš„ï¼Œè®ºæ–‡é‡Œåªæ˜¯ä¸ºäº†ä¿è¯è®¡ç®—æ•ˆç‡ã€‚ <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lab406 </tag>
            
            <tag> weekly report </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šå¿«ä¹çš„Linuxå‘½ä»¤è¡Œã€‹ç¬”è®°ï¼ˆ2ï¼‰</title>
      <link href="/blog/2020/11/03/the-linux-command-line-note-2/"/>
      <url>/blog/2020/11/03/the-linux-command-line-note-2/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹"><a class="header-anchor" href="#ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹">#</a>ã€Šå¿«ä¹çš„ Linux å‘½ä»¤è¡Œã€‹</h1><p>ç¡å‰æ¯å¤©çœ‹ä¸€ç‚¹ï½æ‰“å¡ï¼</p><a id="more"></a><p><code>ls</code>çš„å‚æ•°ï¼š</p><table><thead><tr><th style="text-align:center">é€‰é¡¹</th><th style="text-align:left">é•¿é€‰é¡¹</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:center"><code>-r</code></td><td style="text-align:left"><code>--reverse</code></td><td style="text-align:left">é€†åºè¾“å‡º</td></tr><tr><td style="text-align:center"><code>-t</code></td><td style="text-align:left"></td><td style="text-align:left">æŒ‰ç…§ä¿®æ”¹æ—¶é—´æ¥æ’åº</td></tr><tr><td style="text-align:center"><code>-l</code></td><td style="text-align:left"></td><td style="text-align:left">ä»¥é•¿æ ¼å¼æ˜¾ç¤ºç»“æœ</td></tr></tbody></table><p>æ„Ÿè§‰<code>-l</code>å‚æ•°æ˜¯æœ€å¸¸ç”¨çš„äº†ï¼Œä¼šè¾“å‡ºä¸€äº›æœ‰ç”¨çš„ä¿¡æ¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">onns@liupans-MacBook-Air blog % ls -l</span><br><span class="line">total 12304</span><br><span class="line">-rw-r--r--    1 onns  staff     2586 Aug 11 20:20 _config.yml</span><br><span class="line">-rw-r--r--    1 onns  staff  6097875 Nov  2 11:15 db.json</span><br><span class="line">drwxr-xr-x  450 onns  staff    14400 Oct 17 13:47 node_modules</span><br><span class="line">-rw-r--r--    1 onns  staff   189013 Oct 17 13:47 package-lock.json</span><br><span class="line">-rw-r--r--    1 onns  staff      833 Oct 17 13:47 package.json</span><br><span class="line">drwxr-xr-x   26 onns  staff      832 Oct 17 14:01 public</span><br><span class="line">drwxr-xr-x    5 onns  staff      160 Jun 14 20:08 scaffolds</span><br><span class="line">drwxr-xr-x   13 onns  staff      416 Aug 10 00:29 <span class="built_in">source</span></span><br><span class="line">drwxr-xr-x    4 onns  staff      128 Aug 11 19:24 themes</span><br></pre></td></tr></table></figure><p><code>-rw-r--r--</code>è¡¨ç¤ºå¯¹æ–‡ä»¶çš„æƒé™ï¼Œç¬¬ä¸€ä¸ªå­—ç¬¦ä»£è¡¨<code>æ–‡ä»¶ç±»å‹</code>ï¼š</p><ul><li><code>-</code>ä»£è¡¨æ˜¯ä¸€ä¸ªæ™®é€šæ–‡ä»¶ã€‚</li><li><code>d</code>ä»£è¡¨æ˜¯ä¸€ä¸ªç›®å½•ã€‚</li></ul><p>åé¢çš„æ˜¯æƒé™å­—ç¬¦ï¼Œåé¢ä¼šè®²ã€‚</p><p><code>1</code> ä»£è¡¨<code>ç¡¬é“¾æ¥</code>çš„æ•°ç›®ã€‚</p><p><code>onns</code>ä»£è¡¨æ–‡ä»¶æ‰€æœ‰è€…çš„ç”¨æˆ·åã€‚</p><p><code>staff</code>ä»£è¡¨æ‰€å±ç”¨æˆ·ç»„çš„ç»„åã€‚</p><p><code>2586</code>æ˜¯ä»¥å­—èŠ‚æ•°è¡¨ç¤ºçš„æ–‡ä»¶å¤§å°ã€‚</p><p>æœ€åæ˜¯<code>ä¸Šæ¬¡ä¿®æ”¹æ—¶é—´</code>å’Œ<code>æ–‡ä»¶å</code>ã€‚</p><hr><p><code>file</code>å‘½ä»¤ç”¨æ¥æŸ¥çœ‹æ–‡ä»¶çš„ç±»å‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">onns@liupans-MacBook-Air image % file draw-20200207.jpg</span><br><span class="line">draw-20200207.jpg: JPEG image data, Exif standard: [TIFF image data, big-endian, direntries=7, orientation=upper-left, xresolution=98, yresolution=106, resolutionunit=2, software=Adobe Photoshop 21.0 (Macintosh), datetime=2020:02:07 19:32:03], baseline, precision 8, 3508x2480, components 3</span><br></pre></td></tr></table></figure><hr><p><code>less</code>å‘½ä»¤ç”¨æ¥æµè§ˆæ–‡æœ¬æ–‡ä»¶ï¼Œæ˜¯<code>more</code>å‘½ä»¤çš„å‡çº§ç‰ˆï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">less filename</span><br></pre></td></tr></table></figure><table><thead><tr><th style="text-align:center">é€‰é¡¹</th><th style="text-align:center">æè¿°</th></tr></thead><tbody><tr><td style="text-align:center">Page UP or b</td><td style="text-align:center">å‘ä¸Šç¿»æ»šä¸€é¡µ</td></tr><tr><td style="text-align:center">Page Down or space</td><td style="text-align:center">å‘ä¸‹ç¿»æ»šä¸€é¡µ</td></tr><tr><td style="text-align:center">UP Arrow</td><td style="text-align:center">å‘ä¸Šç¿»æ»šä¸€è¡Œ</td></tr><tr><td style="text-align:center">Down Arrow</td><td style="text-align:center">å‘ä¸‹ç¿»æ»šä¸€è¡Œ</td></tr><tr><td style="text-align:center">G</td><td style="text-align:center">ç§»åŠ¨åˆ°æœ€åä¸€è¡Œ</td></tr><tr><td style="text-align:center">1G or g</td><td style="text-align:center">ç§»åŠ¨åˆ°å¼€å¤´ä¸€è¡Œ</td></tr><tr><td style="text-align:center">/charaters</td><td style="text-align:center">å‘å‰æŸ¥æ‰¾æŒ‡å®šçš„å­—ç¬¦ä¸²</td></tr><tr><td style="text-align:center">n</td><td style="text-align:center">å‘å‰æŸ¥æ‰¾ä¸‹ä¸€ä¸ªå‡ºç°çš„å­—ç¬¦ä¸²ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²æ˜¯ä¹‹å‰æ‰€æŒ‡å®šæŸ¥æ‰¾çš„</td></tr><tr><td style="text-align:center">h</td><td style="text-align:center">æ˜¾ç¤ºå¸®åŠ©å±å¹•</td></tr><tr><td style="text-align:center">q</td><td style="text-align:center">é€€å‡º less ç¨‹åº</td></tr></tbody></table><hr><p>åœ¨ <code>ls -l</code>çš„æ—¶å€™ï¼Œå¦‚æœæœ€å‰é¢çš„å­—ç¬¦ä¸æ˜¯<code>-</code>ä¹Ÿä¸æ˜¯<code>d</code>è€Œæ˜¯<code>l</code>ï¼Œä»£è¡¨æ˜¯ä¸€ä¸ª<code>ç¬¦å·é“¾æ¥</code>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> shell </tag>
            
            <tag> bash </tag>
            
            <tag> shell note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å·¥ä½œè®¡åˆ’-20201102</title>
      <link href="/blog/2020/11/02/weekly-plan-20201102/"/>
      <url>/blog/2020/11/02/weekly-plan-20201102/</url>
      
        <content type="html"><![CDATA[<center ondblclick="javascript:document.getElementsByTagName('header')[0].remove();document.getElementsByTagName('header')[0].remove();document.getElementsByTagName('footer')[0].remove();document.getElementsByTagName('footer')[0].remove();document.getElementById('comments').remove();document.getElementById('back-to-top').remove();document.getElementById('post-toc').remove();"><table><thead><tr><th style="text-align:center">2020-11-02</th><th style="text-align:center">å·¥ä½œè®¡åˆ’#01</th><th style="text-align:center">åˆ˜æ½˜</th></tr></thead><tbody></tbody></table></center><a id="more"></a><ol><li>ã€ŠMotionSqueeze: Neural Motion Feature Learning for Video Understandingã€‹è¿™ç¯‡è®ºæ–‡ï¼Œæå‡ºçš„ç»“æ„åº”ç”¨åˆ°æˆ‘ç°åœ¨çš„æ–¹æ³•ä¸Šæœ‰ä¸€å®šçš„æå‡ï¼Œå¤§æ¦‚<code>0.6%</code>ï¼Œä¹‹å‰å·²ç»ç²¾è¯»è¿‡è®ºæ–‡ã€‚å‡†å¤‡èŠ±ä¸€å¤©æ—¶é—´å»ç»“åˆè®ºæ–‡ï¼ŒæŠŠå®ƒçš„æ€è·¯ï¼Œä»¥åŠç›¸å…³çš„ä»£ç ç†è§£ã€‚åŒæ—¶å¯¹äºè¿™ä¸ªå®éªŒçš„ç›¸å…³å®éªŒæ•°æ®è¦è¿›è¡Œæ•´ç†ã€‚<br><strong>é¢„è®¡æ‰€éœ€æ—¶é—´</strong>ï¼š<code>1-2</code>å¤©</li><li>ã€ŠTemporal Interlacing Networkã€‹å·²ç»æ€»ä½“ä¸Šè¯»äº†ä¸€éï¼Œå®éªŒåœ¨è·‘ï¼Œå¦‚æœæ•ˆæœæ¯”è¾ƒå¥½çš„è¯ï¼Œéœ€è¦èŠ±è´¹æ—¶é—´æ¥ç²¾è¯»ä¸€éæ–‡ç« ï¼ŒåŒæ—¶é˜…è¯»ä»£ç ï¼Œå¹¶ä¸”æ•´ç†å®éªŒç»“æœï¼Œå¦‚æœå®éªŒä¸å¥½ï¼Œå¯èƒ½ä¼šå°è¯•åœ¨åˆ«çš„æ€è·¯ä¸Šæ”¹è¿›è‡ªå·±çš„ç½‘ç»œã€‚<br>ç›¸å…³çš„ç¬”è®°è¿˜æ²¡æ•´ç†ï¼Œå¯èƒ½è¦æŠ½ä¸ªæ—¶é—´æŠŠç¬”è®°æ•´ç†ä¸€ä¸‹ï¼Œå…³äºè¿™ç¯‡è®ºæ–‡çš„ã€‚<br><strong>é¢„è®¡æ‰€éœ€æ—¶é—´</strong>ï¼š<code>1</code>å¤©</li><li>ä¸‰æ–¹åè®®å¯èƒ½éœ€è¦å¡«å†™å’Œå¯„å‡ºï¼Œç›¸å…³çš„äº‹å®œéœ€è¦åŠå¤©çš„æ—¶é—´æ¥æ•´ç†ã€‚<br><strong>é¢„è®¡æ‰€éœ€æ—¶é—´</strong>ï¼š<code>0.5</code>å¤©</li><li>å‡†å¤‡å¼€å§‹ç€æ‰‹æ„å»ºæ•°æ®é›†ï¼Œè¦å½’çº³ä¸€ä¸‹æˆ‘ä»¬æ‰€éœ€è¦çš„è¯†åˆ«çš„å‡ å¤§ç±»ï¼Œä»¥åŠç›¸åº”çš„æ‹æ‘„è§’åº¦ç­‰ï¼ŒåŒæ—¶è¦æ’°å†™æ‹æ‘„çš„è§„èŒƒæ–‡æ¡£ï¼Œä»¥åŠæ‹æ‘„çš„é¡ºåºï¼Œå°½é‡åœ¨æœ€çŸ­çš„æ—¶é—´ç”¨æœ€é«˜æ•ˆçš„åŠæ³•æ‹å‡ºæ•°æ®ã€‚<br><strong>é¢„è®¡æ‰€éœ€æ—¶é—´</strong>ï¼š<code>2-3</code>å¤©</li><li>æœ‰ä¸€ä¸ªåŸºäºæˆ‘ç›®å‰çš„æ‰€æœ‰æ”¹è¿›çš„ç½‘ç»œæ­£åœ¨è®­ç»ƒï¼Œç›¸å…³çš„ç»“æœä¹Ÿä¼šåœ¨æœ¬å‘¨å‡ºæ¥ï¼Œéœ€è¦èŠ±è´¹æ—¶é—´è¿›è¡Œæ•´ç†ã€‚<br><strong>é¢„è®¡æ‰€éœ€æ—¶é—´</strong>ï¼š<code>1</code>å¤©</li><li>ç›®å‰çš„æ‰€æœ‰å·¥ä½œéƒ½æ˜¯åŸºäºæ•°æ®é›†ï¼Œæ²¡æœ‰åŠæ³•è¿›è¡Œæ¼”ç¤ºï¼Œåˆ°æ—¶å€™çœŸçš„éœ€è¦åº”ç”¨è¿˜éœ€è¦å•ç‹¬å†™ä¸€äº›ä»£ç ã€‚<br><strong>é¢„è®¡æ‰€éœ€æ—¶é—´</strong>ï¼š<code>3-5</code>å¤©</li></ol><p>ä»¥ä¸Šæ˜¯æˆ‘æœ€è¿‘è®¡åˆ’è¿›è¡Œçš„ä»»åŠ¡ï¼Œå¯èƒ½ä¸€å‘¨å†…æ— æ³•å…¨éƒ¨å®Œæˆã€‚</p>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lab406 </tag>
            
            <tag> weekly plan </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TINä»£ç ä¿®æ”¹</title>
      <link href="/blog/2020/11/01/temporal-interlacing-network-code-debug/"/>
      <url>/blog/2020/11/01/temporal-interlacing-network-code-debug/</url>
      
        <content type="html"><![CDATA[<h2 id="tin-ç¼–è¯‘-cuda-shift-å¤±æ•ˆ"><a class="header-anchor" href="#tin-ç¼–è¯‘-cuda-shift-å¤±æ•ˆ">#</a>TIN ç¼–è¯‘ cuda_shift å¤±æ•ˆ</h2><p>æç¤ºè¯´ï¼š</p><blockquote><p>shift_cuda.cpp:18:26: error: â€˜THCState_getCurrentStreamâ€™ was not declared in this scope</p></blockquote><a id="more"></a><p>è§£å†³æ–¹æ³•æŒ‰ç…§å°±æ˜¯æŠŠï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ShiftDataCudaForward(THCState_getCurrentStream(state),</span><br><span class="line">data.data&lt;<span class="keyword">float</span>&gt;(),</span><br><span class="line">shift.data&lt;<span class="keyword">int</span>&gt;(),</span><br><span class="line">batch_size,</span><br><span class="line">channels,</span><br><span class="line">tsize,</span><br><span class="line">hwsize,</span><br><span class="line">groupsize,</span><br><span class="line">out.data&lt;<span class="keyword">float</span>&gt;());</span><br></pre></td></tr></table></figure><p>æ›¿æ¢æˆï¼š</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ShiftDataCudaForward(at::cuda::getCurrentCUDAStream(),</span><br><span class="line">data.data&lt;<span class="keyword">float</span>&gt;(),</span><br><span class="line">shift.data&lt;<span class="keyword">int</span>&gt;(),</span><br><span class="line">batch_size,</span><br><span class="line">channels,</span><br><span class="line">tsize,</span><br><span class="line">hwsize,</span><br><span class="line">groupsize,</span><br><span class="line">out.data&lt;<span class="keyword">float</span>&gt;());</span><br></pre></td></tr></table></figure><h3 id="å‚è€ƒé“¾æ¥"><a class="header-anchor" href="#å‚è€ƒé“¾æ¥">#</a>å‚è€ƒé“¾æ¥</h3><ul><li><a href="https://blog.csdn.net/qq_31833411/article/details/109064222" target="_blank" rel="noopener">Pytorch1.5 å‡çº§ 1.6 CPP ä»£ç ä¿®æ”¹ï¼ˆRuntimeError: Error compiling objects for extensionï¼‰</a></li></ul><h2 id="autograd-æŠ¥é”™"><a class="header-anchor" href="#autograd-æŠ¥é”™">#</a>autograd æŠ¥é”™</h2><p>æç¤ºè¯´ï¼š</p><blockquote><p>RuntimeError: Legacy autograd function with non-static forward method is deprecated. Please use new-style autograd function with static forward method. (Example: <a href="https://pytorch.org/docs/stable/autograd.html#torch.autograd.Function" target="_blank" rel="noopener">https://pytorch.org/docs/stable/autograd.html#torch.autograd.Function</a>)</p></blockquote><p>å‚ç…§<a href="https://pytorch.org/docs/stable/notes/extending.html" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a>ï¼Œåœ¨<code>rtc_wrap.py</code>æ–‡ä»¶ä¸­çš„<code>forward</code>å’Œ<code>backward</code>æ–¹æ³•å‰æ·»åŠ <code>@staticmethod</code>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Code for "Temporal Interlacing Network"</span></span><br><span class="line"><span class="comment"># Hao Shao, Shengju Qian, Yu Liu</span></span><br><span class="line"><span class="comment"># shaoh19@mails.tsinghua.edu.cn, sjqian@cse.cuhk.edu.hk, yuliu@ee.cuhk.edu.hk</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> torch.autograd <span class="keyword">import</span> Function</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cudashift <span class="keyword">as</span> backend</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ShiftFeatureFunc</span><span class="params">(Function)</span>:</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">super(ShiftFeatureFunc, self).__init__()</span><br><span class="line"></span><br><span class="line"><span class="meta">@staticmethod</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, data, shift)</span>:</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> data.is_cuda <span class="keyword">or</span> <span class="keyword">not</span> shift.is_cuda:</span><br><span class="line"><span class="keyword">raise</span> NotImplementedError</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> data.requires_grad:</span><br><span class="line">self.save_for_backward(shift)</span><br><span class="line"></span><br><span class="line">out = torch.zeros_like(data)</span><br><span class="line">backend.shift_featuremap_cuda_forward(data, shift, out)</span><br><span class="line"><span class="keyword">return</span> out</span><br><span class="line"></span><br><span class="line"><span class="meta">@staticmethod</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">backward</span><span class="params">(self, grad_output)</span>:</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> grad_output.is_cuda:</span><br><span class="line"><span class="keyword">raise</span> NotImplementedError</span><br><span class="line">shift = self.saved_tensors[<span class="number">0</span>]</span><br><span class="line">data_grad_input = grad_output.new(*grad_output.size()).zero_()</span><br><span class="line">shift_grad_input = shift.new(*shift.size()).zero_()</span><br><span class="line">backend.shift_featuremap_cuda_backward(grad_output, shift, data_grad_input)</span><br><span class="line"><span class="keyword">return</span> data_grad_input, shift_grad_input</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨<code>temporal_interlace.py</code>æ–‡ä»¶ä¸­çš„<code>linear_sampler</code>æ–¹æ³•ï¼Œæ›¿æ¢å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">linear_sampler</span><span class="params">(data, bias)</span>:</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">data: N * T * C * H * W</span></span><br><span class="line"><span class="string">bias: N * T * Groups</span></span><br><span class="line"><span class="string">weight: N * T</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">N, T, C, H, W = data.shape</span><br><span class="line">bias_0 = torch.floor(bias).int()</span><br><span class="line">bias_1 = bias_0 + <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># N * T * C * H * W</span></span><br><span class="line">sf1 = ShiftFeatureFunc.apply</span><br><span class="line">sf2 = ShiftFeatureFunc.apply</span><br><span class="line"></span><br><span class="line">data = data.view(N, T, C, H*W).contiguous()</span><br><span class="line">data_0 = sf1(data, bias_0)</span><br><span class="line">data_1 = sf2(data, bias_1)</span><br><span class="line"></span><br><span class="line">w_0 = <span class="number">1</span> - (bias - bias_0.float())</span><br><span class="line">w_1 = <span class="number">1</span> - w_0</span><br><span class="line"></span><br><span class="line">groupsize = bias.shape[<span class="number">1</span>]</span><br><span class="line">w_0 = w_0[:, :, <span class="literal">None</span>].repeat(<span class="number">1</span>, <span class="number">1</span>, C // groupsize )</span><br><span class="line">w_0 = w_0.view(w_0.size(<span class="number">0</span>), <span class="number">-1</span>)</span><br><span class="line">w_1 = w_1[:, :, <span class="literal">None</span>].repeat(<span class="number">1</span>, <span class="number">1</span>, C // groupsize )</span><br><span class="line">w_1 = w_1.view(w_1.size(<span class="number">0</span>), <span class="number">-1</span>)</span><br><span class="line"></span><br><span class="line">w_0 = w_0[:,<span class="literal">None</span>,:,<span class="literal">None</span>]</span><br><span class="line">w_1 = w_1[:,<span class="literal">None</span>,:,<span class="literal">None</span>]</span><br><span class="line"></span><br><span class="line">out = w_0 * data_0 + w_1 * data_1</span><br><span class="line">out = out.view(N, T, C, H, W)</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> out</span><br></pre></td></tr></table></figure><h3 id="å‚è€ƒæ–‡æ¡£"><a class="header-anchor" href="#å‚è€ƒæ–‡æ¡£">#</a>å‚è€ƒæ–‡æ¡£</h3><ul><li><a href="https://pytorch.org/docs/stable/notes/extending.html" target="_blank" rel="noopener">EXTENDING PYTORCH</a></li></ul><p>é”™è¯¯è§£å†³ï¼Œæ•ˆæœå¾…æµ‹è¯•ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> tin </tag>
            
            <tag> pytorch </tag>
            
            <tag> pytorch 1.6 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç»™å­¦å¼Ÿå¦¹çš„å»ºè®®</title>
      <link href="/blog/2020/10/30/suggestion/"/>
      <url>/blog/2020/10/30/suggestion/</url>
      
        <content type="html"><![CDATA[<p><span ondblclick="javascript:document.getElementsByTagName('header')[0].remove();document.getElementsByTagName('header')[0].remove();document.getElementsByTagName('footer')[0].remove();document.getElementsByTagName('footer')[0].remove();document.getElementById('comments').remove();document.getElementById('back-to-top').remove();document.getElementById('post-toc').remove();">â€”</span></p><h2 id="å»ºè®®"><a class="header-anchor" href="#å»ºè®®">#</a>å»ºè®®</h2><a id="more"></a><p>é¦–å…ˆï¼Œä½ è¦æ˜ç™½ä½ è‡ªå·±æ‰€å–œæ¬¢çš„ï¼Œæˆ–è€…è¯´å¦‚æœå¿…é¡»è¦é€‰æ‹©ä¸€ä¸ªçš„è¯ï¼š</p><ol><li>ç®—æ³•</li><li>ç»§ç»­æ·±é€ </li><li>å¼€å‘</li><li>å…¶å®ƒå²—ä½ï¼ˆäº§å“ã€æŠ€æœ¯æ€§è¦æ±‚ä¸é«˜çš„å…¶å®ƒè¡Œä¸šï¼‰</li></ol><p>å› ä¸ºæˆ‘å¯èƒ½å¿ƒé‡Œæ›´å€¾å‘äºåšå¼€å‘ï¼Œå› ä¸ºç›¸å¯¹äºå…¶å®ƒçš„æ–¹å‘æ¥è¯´æ›´åŠ é€‚åˆæˆ‘ï¼Œæ‰€ä»¥åç»­ä»¥æ­¤ä¸ºä¾‹æ¥è¯´æ˜ã€‚</p><p>å¼€å‘ä¹Ÿä¼šåˆ†æˆå¾ˆå¤šä¸ªå²—ä½ï¼Œæœ€å¸¸è§çš„å››ä¸ªå²—ä½æ˜¯<code>å‰ç«¯</code> <code>åç«¯</code> <code>å®¢æˆ·ç«¯</code> <code>æµ‹è¯•</code></p><p>é¦–å…ˆå¯èƒ½ä½ è¦è·Ÿè¸ªä¸€ä¸‹ä½ æ‰€æœŸæœ›çš„å·¥ä½œå²—ä½ï¼Œå®ƒçš„å¯¹åº”è¦æ±‚æ˜¯ä»€ä¹ˆï¼Œè¿™éƒ½æœ‰ä¸€ä¸ª<strong>å»¶è¿Ÿæ—¶é—´</strong>çš„æ¦‚å¿µï¼Œæ¯”å¦‚ï¼š</p><ol><li><p>ä½ ä¸æ˜¯æ¯•ä¸šäº†æ‰å¼€å§‹æ‰¾å·¥ä½œï¼Œåœ¨ä½ ç ”äºŒç»“æŸçš„æ—¶å€™ï¼Œç§‹æ‹›å°±å·²ç»å¼€å§‹äº†</p></li><li><p>æœ‰äº›çŸ¥è¯†å’ŒæŠ€èƒ½æ˜¯éœ€è¦æ—¶é—´æ²‰æ·€çš„ï¼Œä¸æ˜¯çªå‡»å°±å¯ä»¥æå®šçš„ï¼Œæ¯”å¦‚å­¦ä¹ ä¸€é—¨è¯­è¨€ï¼Œå¯èƒ½ä¸€å¹´æ‰èƒ½å…¥é—¨ï¼Œè€Œä½ å¦‚æœæƒ³è¦æ‰¾åˆ°å¯¹åº”çš„å·¥ä½œï¼Œä»¥ä¸‹å‡ ç‚¹ä¸€å®šè¦æœ‰ä¸€ç‚¹æ»¡è¶³ï¼š</p><ol><li><p>åœ¨ä½ ç¡•å£«ç§‘ç ”æˆ–è€…é¡¹ç›®å·¥ä½œä¸­æœ‰ç±»ä¼¼çš„å¯ä»¥å»æ‰“ç£¨æŠ€èƒ½çš„åœºæ™¯ï¼Œæ¯”å¦‚å†™æ±‚ä¸¤ä¸ªæ•°çš„ä¸­å€¼</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> mid = (min + max) / <span class="number">2</span>;</span><br></pre></td></tr></table></figure><p>ä½†ä½ æœ‰æ²¡æœ‰æƒ³è¿‡ï¼Œè¿™ä¸ªæ•°å­—å¯èƒ½ä¼šè¶…è¿‡ä½ å½“å‰å¯ä»¥å­˜å‚¨çš„èŒƒå›´ï¼Œæº¢å‡º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> mid = min + (max - min) / <span class="number">2</span>;</span><br></pre></td></tr></table></figure><p>å†å¾€ä¸‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> mid = min + ((max - min) &gt;&gt; <span class="number">1</span>);</span><br></pre></td></tr></table></figure><p>ç†è®ºçŸ¥è¯†çœŸçš„è¦åœ¨å®é™…çš„åœºæ™¯ä¸­ï¼Œæ‰ä¼šå‘ç°è‡ªå·±å­˜åœ¨çš„ä¸€äº›é—®é¢˜ï¼Œå¹¶ç§¯ç´¯ç›¸å…³ç»éªŒ</p></li><li><p>å¦‚æœå¯ä»¥ï¼Œåˆç†å®‰æ’è‡ªå·±çš„ç§‘ç ”æ—¶é—´ï¼Œåœ¨å¯èƒ½çš„æƒ…å†µä¸‹å»å‚åŠ å®ä¹ ï¼Œææ—©äº†è§£ç›¸å…³è¦æ±‚ï¼Œè€Œä¸”å®ä¹ é—¨æ§›ä½ï¼Œè€Œä¸”è½¬æ­£æµç¨‹æ–¹ä¾¿ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½å¯ä»¥è½¬æ­£ï¼Œè€Œä¸”ç»™äº†è‡ªå·±ä¸€ä¸ªåæ‚”çš„æœºä¼šï¼ˆä½ æ°¸è¿œä¸çŸ¥é“ä½ æœªæ¥è¦å»çš„å…¬å¸ç¯å¢ƒæ˜¯å¦ç¬¦åˆä½ çš„é¢„æœŸï¼Œä½†ä½ å¯ä»¥é€‰æ‹©å»æå‰äº†è§£ï¼Œå†å†³å®šå»ä¸å»ï¼Œè€Œä¸æ˜¯åæ‚”å½“åˆé€‰æ‹©æ¥ï¼‰</p></li><li><p>èº«è¾¹æˆ–è€…å®éªŒå®¤æœ‰ä¸€äº›æ¨ªå‘çš„é¡¹ç›®ï¼Œç§¯æä¸»åŠ¨çš„å»å‚åŠ ã€‚è¿™äº›éƒ½æ˜¯å¯ä»¥æå‡ä½ çš„ç»éªŒçš„ç»„æˆéƒ¨åˆ†</p></li></ol><p>æ€»å¾—æ¥è¯´ï¼Œä½ æ‰€å­¦çš„æ˜¯<strong>èºä¸åˆ€çš„ä½¿ç”¨åŸºæœ¬æŠ€å·§</strong>ï¼Œä½ é¢è¯•çš„æ—¶å€™çš„é—®é¢˜å¯èƒ½ä¼šæ˜¯<strong>èºä¸çš„è®¾è®¡åŸç†ï¼Œå¦‚ä½•è®¾è®¡èºçº¹é—´è·</strong>ï¼Œä½ çœŸæ­£çš„å·¥ä½œæ˜¯<strong>æ‹§èºä¸</strong>ï¼Œæ˜¯æœ‰ä¸€ä¸ªä¸å¹³è¡¡çš„ï¼Œè¦è‡ªå·±å»è°ƒæ•´ã€‚</p></li></ol><p>åˆç†çš„åˆ©ç”¨æ—¶é—´å»å®Œå–„è¿™äº›ã€‚</p><p>å‰©ä¸‹çš„æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯ä¸»è¦çš„æ—¶é—´ï¼Œæ˜¯è¦äº¤ç»™å­¦ä¸šçš„ï¼Œè¿™é‡Œï¼Œé¦–å…ˆæœ€é‡è¦çš„å‡ ç‚¹å»ºè®®ï¼š</p><ol><li>å¦‚æœä¸æ˜¯ç‰¹åˆ«å–œæ¬¢ï¼ŒçœŸçš„æƒ³å»å¬æŸèŠ‚è¯¾ï¼Œå»ºè®®å¤šé—®é—®å­¦é•¿å­¦å§ï¼Œä»€ä¹ˆè¯¾æ¯”è¾ƒå¥½æ‹¿åˆ†æ•°ï¼Œä»€ä¹ˆè¯¾è¦æ±‚å¾ˆé«˜ä½†æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Œé¿å…â€œè¸©é›·â€ï¼Œæœ‰äº›è¯¾è¦æ±‚ä¼šå¾ˆé«˜ä¸è¯´ï¼Œæ‰€å­¦åˆ°çš„çŸ¥è¯†å¯èƒ½å¾ˆå¤§ç¨‹åº¦ä¸Šæ²¡æœ‰è¾¾åˆ°ä½ çš„æœŸæœ›ã€‚</li><li>æ—©ç‚¹ç¡®å®šè‡ªå·±çš„ç ”ç©¶è¯¾é¢˜ï¼Œè¿™ä¸ªè¯¾é¢˜å¯èƒ½æ˜¯å¯¼å¸ˆçš„ï¼Œä¹Ÿå¯èƒ½æ˜¯è‡ªå·±ç‰¹åˆ«æ„Ÿå…´è¶£çš„ï¼Œåè€…å°±ä¸€å®šè¦å…ˆå’Œå¯¼å¸ˆæ²Ÿé€šï¼Œè¯´æœè€å¸ˆåŒæ„ä½ çš„è§‚ç‚¹ã€‚è¶Šæ—©ç¡®å®šè¯¾é¢˜ï¼Œæ‰èƒ½åœ¨è¿™ä¸ªè¯¾é¢˜ä¸Šèµ°å¾—æ›´è¿œï¼Œä¹Ÿæ›´å®¹æ˜“å‡ºæˆæœã€‚å…¥é—¨ä¸€ä¸ªæ–¹å‘æ˜¯ååˆ†éš¾çš„ï¼Œåˆ‡æ¢çš„æˆæœ¬ååˆ†é«˜æ˜‚ï¼ˆäº²èº«ç»å†å‘Šè¯‰å¤§å®¶ï¼‰ã€‚</li><li>åˆç†çš„ä½œæ¯è§„åˆ’ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå®éªŒå®¤çš„å­¦ä¹ æ•ˆç‡ä¼šæ›´é«˜ï¼Œä¸è¦éª—è‡ªå·±è¯´åœ¨å®¿èˆä¹Ÿèƒ½å­¦ä¹ ï¼Œå¦‚æœå¯ä»¥ï¼Œè¿˜æ˜¯è¦å¤šæ¥å®éªŒå®¤ã€‚</li><li>æœ€å¥½ä¸è¦è‡ªå·±â€œä¸€ä¸ªäººâ€ç§‘ç ”ï¼Œå¦‚æœå¯ä»¥ï¼Œå°½å¯èƒ½åœ°å‡ ä¸ªäººå…±åŒçš„æ¨è¿›ä¸€ä¸ªç§‘ç ”é¡¹ç›®ï¼Œå› ä¸ºæ¯ä¸ªäººçš„ä¸æ“…é•¿é¢†åŸŸæ˜¯ä¸åŒçš„ï¼Œåˆä½œæœ‰åˆ©äºäº’è¡¥ã€‚</li></ol><h2 id="æ¯•ä¸šç›¸å…³"><a class="header-anchor" href="#æ¯•ä¸šç›¸å…³">#</a>æ¯•ä¸šç›¸å…³</h2><ol><li>å­¦æœ¯è®²åº§æœ€å¥½æŒ‘å‡ åœºæ‹ä¸€ä¸‹ç…§ç‰‡ï¼Œæˆ–è€…ç»“æŸæŠ‘æˆ–æ˜¯å¬çš„é€”ä¸­è®°å½•ä¸€ä¸‹ï¼Œåˆ°æ—¶å€™è¦å†™ 1000-2000 å­—çš„è®²åº§å¿ƒå¾—ï¼Œå¯æ˜¯æˆ‘å·²ç»å¿˜è®°å¤§éƒ¨åˆ†è®²åº§çš„å†…å®¹äº†ã€‚ã€‚ã€‚</li><li>æ¯•ä¸šææ–™ï¼Œå¦‚æœä¸æ¶‰åŠåˆ°æŠ„è¢­çš„é—®é¢˜ï¼Œå¯ä»¥ä½œä¸ºå®éªŒå®¤å†…éƒ¨çš„å‚è€ƒç•™ä¸‹æ¥ï¼Œä½œä¸ºä¸€ç§å®éªŒå®¤çš„<s>ä¼ æ‰¿</s>ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lab406 </tag>
            
            <tag> weekly report </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‘¨æŠ¥-20201029</title>
      <link href="/blog/2020/10/29/weekly-report-20201029/"/>
      <url>/blog/2020/10/29/weekly-report-20201029/</url>
      
        <content type="html"><![CDATA[<center ondblclick="javascript:document.getElementsByTagName('header')[0].remove();document.getElementsByTagName('header')[0].remove();document.getElementsByTagName('footer')[0].remove();document.getElementsByTagName('footer')[0].remove();document.getElementById('comments').remove();document.getElementById('back-to-top').remove();document.getElementById('post-toc').remove();"><table><thead><tr><th style="text-align:center">2020-10-29</th><th style="text-align:center">å‘¨æŠ¥#10</th><th style="text-align:center">åˆ˜æ½˜</th></tr></thead><tbody></tbody></table></center><a id="more"></a><h1 id="i-task-achieved-last-week"><a class="header-anchor" href="#i-task-achieved-last-week">#</a>I. Task achieved last week</h1><hr><ul><li>ã€ŠTAM: Temporal Adaptive Module for Video Recognitionã€‹</li><li>éªŒè¯äº†<code>TAM</code>ï¼Œæ–¹æ³•ä¸å…·æœ‰æ™®é€‚æ€§ï¼Œåªèƒ½åœ¨å®ƒè‡ªå·±çš„ç½‘ç»œé‡Œè¿è¡Œï¼Œå¹¶ä¸”æˆ‘è®¤ä¸ºä»–çš„æ•ˆæœæ¥æºå¤§éƒ¨åˆ†å¯èƒ½æºè‡ªè¶…å‚æ•°çš„ä¿®æ”¹ã€‚</li><li>æ”¹è¿›äº†<code>PAN</code>ï¼Œæœ€ç»ˆå‡†ç¡®ç‡æé«˜äº†<code>0.3%</code>ï¼Œè€ƒè™‘åˆ°åœ¨<code>PAN Lite</code>é™ä½äº†<code>0.3%</code>çš„æƒ…å†µä¸‹æ€»ä½“å‡†ç¡®ç‡ä»ç„¶å¯ä»¥æé«˜ï¼Œæˆ‘è§‰å¾—ç®—æ˜¯ä¸€ä¸ªæ”¹è¿›ç‚¹ã€‚</li></ul><h1 id="ii-reports"><a class="header-anchor" href="#ii-reports">#</a>II. Reports</h1><hr><h2 id="tam-temporal-adaptive-module-for-video-recognition"><a class="header-anchor" href="#tam-temporal-adaptive-module-for-video-recognition">#</a>TAM: Temporal Adaptive Module for Video Recognition</h2><ul><li><a href="https://zhuanlan.zhihu.com/p/150147794" target="_blank" rel="noopener">é’ˆå¯¹åŠ¨ä½œè¯†åˆ«çš„æ—¶åºè‡ªé€‚åº”æ¨¡å—â€“TAM - çŸ¥ä¹</a></li><li><a href="https://zhuanlan.zhihu.com/p/149429010" target="_blank" rel="noopener">TAM: é’ˆå¯¹åŠ¨ä½œè¯†åˆ«çš„æ—¶åºè‡ªé€‚åº”æ¨¡å— - çŸ¥ä¹</a></li><li><a href="https://zhuanlan.zhihu.com/p/147657511" target="_blank" rel="noopener">[ECCVâ€™20] TAM - çŸ¥ä¹</a></li><li><a href="https://zhuanlan.zhihu.com/p/141773949" target="_blank" rel="noopener">å—å¤§+å•†æ±¤ TAM æ—¶é—´è‡ªé€‚åº”æ¨¡å— - çŸ¥ä¹</a></li><li><a href="https://blog.csdn.net/calvinpaean/article/details/106146813" target="_blank" rel="noopener">TAM: Temporal Adaptive Module for Video Recognitionè®ºæ–‡å­¦ä¹ _calvinpaeançš„åšå®¢-CSDNåšå®¢</a></li><li><a href="https://arxiv.org/pdf/2005.06803.pdf" target="_blank" rel="noopener">2005.06803.pdf</a></li><li><a href="https://arxiv.org/pdf/2005.06803v1.pdf" target="_blank" rel="noopener">2005.06803v1.pdf</a></li><li><a href="https://blog.csdn.net/irving512/article/details/106471189/" target="_blank" rel="noopener">è®ºæ–‡æµè§ˆ(1) TAM: Temporal Adaptive Module for Video Recognition_æ¸…æ¬¢-CSDNåšå®¢</a></li><li><a href="https://github.com/liu-zhy/temporal-adaptive-module" target="_blank" rel="noopener">liu-zhy/temporal-adaptive-module: TAM: Temporal Adaptive Module for Video Recognition</a></li><li><a href="https://arxiv.org/abs/2005.06803" target="_blank" rel="noopener">[2005.06803] TAM: Temporal Adaptive Module for Video Recognition</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lab406 </tag>
            
            <tag> weekly report </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‘¨æŠ¥-20201022</title>
      <link href="/blog/2020/10/22/weekly-report-20201022/"/>
      <url>/blog/2020/10/22/weekly-report-20201022/</url>
      
        <content type="html"><![CDATA[<center ondblclick="javascript:document.getElementsByTagName('header')[0].remove();document.getElementsByTagName('header')[0].remove();document.getElementsByTagName('footer')[0].remove();document.getElementsByTagName('footer')[0].remove();document.getElementById('comments').remove();document.getElementById('back-to-top').remove();document.getElementById('post-toc').remove();"><table><thead><tr><th style="text-align:center">2020-10-22</th><th style="text-align:center">å‘¨æŠ¥#09</th><th style="text-align:center">åˆ˜æ½˜</th></tr></thead><tbody></tbody></table></center><a id="more"></a><h1 id="i-task-achieved-last-week"><a class="header-anchor" href="#i-task-achieved-last-week">#</a>I. Task achieved last week</h1><hr><ul><li>ã€ŠSTM: SpatioTemporal and Motion Encoding for Action Recognitionã€‹</li><li>ã€ŠMotionSqueeze: Neural Motion Feature Learning for Video Understandingã€‹</li></ul><h1 id="ii-reports"><a class="header-anchor" href="#ii-reports">#</a>II. Reports</h1><hr><h2 id="stm-spatiotemporal-and-motion-encoding-for-action-recognition"><a class="header-anchor" href="#stm-spatiotemporal-and-motion-encoding-for-action-recognition">#</a>STM: SpatioTemporal and Motion Encoding for Action Recognition</h2><p>è¿™ä¸ªæ˜¯TEAçš„çµæ„Ÿæ¥æºï¼Œæ„Ÿè§‰å˜åŒ–ä¸æ˜¯å¾ˆå¤§ï¼Œä½†æ˜¯æ•ˆæœä¸é”™ï¼Œè€Œä¸”å®éªŒåšçš„è¶³å¤Ÿå¤šã€‚</p><h3 id="ç›¸å…³é“¾æ¥"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥">#</a>ç›¸å…³é“¾æ¥</h3><ul><li><a href="https://blog.csdn.net/irving512/article/details/107085867/" target="_blank" rel="noopener">è®ºæ–‡æµè§ˆ(14) STM: SpatioTemporal and Motion Encoding for Action Recognition</a></li><li><a href="https://zhuanlan.zhihu.com/p/85242145" target="_blank" rel="noopener">STM: SpatioTemporal and Motion Encoding</a></li><li><a href="https://zhuanlan.zhihu.com/p/87048160" target="_blank" rel="noopener">ICCV2019 è¡Œä¸ºè¯†åˆ«æ–°æ–‡ STM</a></li><li><a href="https://mna12478.github.io/action_16/" target="_blank" rel="noopener">STM SpatioTemporal and Motion Encoding for Action Recognition (ICCV 2019)</a></li><li><a href="https://arxiv.org/pdf/1908.02486.pdf" target="_blank" rel="noopener">https://arxiv.org/pdf/1908.02486.pdf</a></li></ul><h2 id="motionsqueeze-neural-motion-feature-learning-for-video-understanding"><a class="header-anchor" href="#motionsqueeze-neural-motion-feature-learning-for-video-understanding">#</a>MotionSqueeze: Neural Motion Feature Learning for Video Understanding</h2><p>ä¸»è¦çš„åˆ›æ–°ç‚¹æ˜¯<code>MS module</code>ï¼Œå®ƒæŠŠè¿™ä¸ªç»“æ„æ’å…¥åˆ°äº†<code>ResNet</code>çš„ç½‘ç»œä¸­é—´ï¼Œå…·ä½“æ¥è¯´åœ¨<code>layer2</code>ä¹‹åï¼Œ<code>layer3</code>ä¹‹å‰ã€‚</p><center><!-- //onns.xyz/blog/image --><p><img src="//onns.xyz/blog/image/20201022-1.png" alt="ç»“æ„å›¾"></p></center><p>é€»è¾‘ä¸Šå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œé“ç†ä¸Šè¯´å¾—å¾ˆæ¸…æ¥šï¼Œé¦–å…ˆè¿›è¡Œå…³è”æ€§è®¡ç®—ï¼Œå°±æ˜¯ä¸ºäº†åˆ¤æ–­å½“å‰çš„ç‚¹å¯èƒ½ä¼šä½ç§»åˆ°ä»€ä¹ˆä½ç½®ï¼Œå³ä»€ä¹ˆä½ç½®çš„ç‚¹æœ€æœ‰å¯èƒ½æ˜¯ç”±å½“å‰çš„ç‚¹ä½ç§»è¿‡å»çš„ã€‚</p><p>ç„¶åé€šè¿‡ä¼°è®¡ä¸Šçš„ç‚¹ï¼Œè®¡ç®—åç§»ã€‚</p><p>æœ€åè®¡ç®—ç‰¹å¾è½¬æ¢ã€‚ï¼ˆè¿™ä¸ªå…¶å®æˆ‘æ²¡å¤ªç†è§£ï¼‰</p><center><!-- //onns.xyz/blog/image --><p><img src="//onns.xyz/blog/image/20201022-2.png" alt="ç»“æ„å›¾"></p></center><h1 id="iii-plan-for-this-week"><a class="header-anchor" href="#iii-plan-for-this-week">#</a>III. Plan for this week</h1><hr><ul><li>å¯èƒ½éœ€è¦å’Œè€å¸ˆæ²Ÿé€šä¸€ä¸‹ï¼Œç¡®å®šä¸€ä¸‹æ¥ä¸‹æ¥çš„ç ”ç©¶è®¡åˆ’ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lab406 </tag>
            
            <tag> weekly report </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MotionSqueeze Neural Motion FeatureLearning for Video Understanding</title>
      <link href="/blog/2020/10/20/motionsqueeze-neural-motion-feature-learning-for-video-understanding/"/>
      <url>/blog/2020/10/20/motionsqueeze-neural-motion-feature-learning-for-video-understanding/</url>
      
        <content type="html"><![CDATA[<h2 id="motionsqueeze-neural-motion-feature-learning-for-video-understanding"><a class="header-anchor" href="#motionsqueeze-neural-motion-feature-learning-for-video-understanding">#</a>MotionSqueeze: Neural Motion Feature Learning for Video Understanding</h2><p>ä¸»è¦çš„åˆ›æ–°ç‚¹æ˜¯<code>MS module</code>ï¼Œå®ƒæŠŠè¿™ä¸ªç»“æ„æ’å…¥åˆ°äº†<code>ResNet</code>çš„ç½‘ç»œä¸­é—´ï¼Œå…·ä½“æ¥è¯´åœ¨<code>layer2</code>ä¹‹åï¼Œ<code>layer3</code>ä¹‹å‰ã€‚</p><center><!-- //onns.xyz/blog/image --><p><img src="//onns.xyz/blog/image/20201022-1.png" alt="ç»“æ„å›¾"></p></center><p>é€»è¾‘ä¸Šå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œé“ç†ä¸Šè¯´å¾—å¾ˆæ¸…æ¥šï¼Œé¦–å…ˆè¿›è¡Œå…³è”æ€§è®¡ç®—ï¼Œå°±æ˜¯ä¸ºäº†åˆ¤æ–­å½“å‰çš„ç‚¹å¯èƒ½ä¼šä½ç§»åˆ°ä»€ä¹ˆä½ç½®ï¼Œå³ä»€ä¹ˆä½ç½®çš„ç‚¹æœ€æœ‰å¯èƒ½æ˜¯ç”±å½“å‰çš„ç‚¹ä½ç§»è¿‡å»çš„ã€‚</p><p>ç„¶åé€šè¿‡ä¼°è®¡ä¸Šçš„ç‚¹ï¼Œè®¡ç®—åç§»ã€‚</p><p>æœ€åè®¡ç®—ç‰¹å¾è½¬æ¢ã€‚ï¼ˆè¿™ä¸ªå…¶å®æˆ‘æ²¡å¤ªç†è§£ï¼‰</p><center><!-- //onns.xyz/blog/image --><p><img src="//onns.xyz/blog/image/20201022-2.png" alt="ç»“æ„å›¾"></p></center><a id="more"></a><h2 id="ç›¸å…³å·¥ä½œ"><a class="header-anchor" href="#ç›¸å…³å·¥ä½œ">#</a>ç›¸å…³å·¥ä½œ</h2><p>å¯¹äºä¸€ä¸ªè§†é¢‘æ¥è¯´ï¼ŒåŠ¨ä½œæ˜¯æœ€æ˜¾è‘—çš„ç‰¹å¾ï¼ŒåŠ¨ä½œæ¨¡å‹æå–å¾—å¥½ï¼Œè¯†åˆ«çš„å‡†ç¡®ç‡å°±ä¼šæé«˜ã€‚</p><p>å·ç§¯åœ¨æ•è·å¹³ç§»ç­‰å˜åŒ–çš„æ¨¡å‹ä¸Šå…·å¤‡æœ‰æ•ˆæ€§ï¼Œä½†æ˜¯å¯¹ç›¸å¯¹è¿åŠ¨çš„ç‰©ä½“ä¸Šå»ºæ¨¡å°±å¾ˆéš¾è®©äººæ„Ÿåˆ°æ»¡æ„ã€‚</p><blockquote><p>convolution is effective in capturing translation-equivariant patterns but not in modeling relative movement of objects</p></blockquote><p>è®ºæ–‡çš„ä¸»è¦å·¥ä½œæ”¾åœ¨å¦‚ä½•å­¦ä¹ åŠ¨ä½œç‰¹å¾ä¸Šã€‚</p><blockquote><p>we focus on efficient learning of motion features.</p></blockquote><p>ä¸€äº›ç°æœ‰çš„ç ”ç©¶æ–¹å‘è¿›å±•ï¼š</p><ol><li>æœ‰ä¸€äº›åœ¨æ¨ç†éƒ¨åˆ†ä¸éœ€è¦å…‰æµè¾“å…¥ï¼Œä½†æ˜¯è®­ç»ƒä»ç„¶éœ€è¦çš„ã€‚</li><li>é€šè¿‡è®¡ç®—ç‰¹å¾çš„æ—¶ç©ºæ¢¯åº¦æ¥è¡¨å¾åŠ¨ä½œç‰¹å¾ã€‚</li><li>æå‡ºäº†ä¸€ç§å·ç§¯æ¨¡å—ï¼Œé€šè¿‡åœ¨å¤–è§‚ç‰¹å¾ä¹‹é—´è¿›è¡Œç©ºé—´ç§»åŠ¨å’Œå‡æ³•è¿ç®—æ¥æå–è¿åŠ¨ç‰¹å¾ã€‚</li><li>è®¡ç®—å·ç§¯ç¥ç»ç½‘ç»œä¸­é—´å±‚çš„ç‰¹å¾å±‚å…‰æµï¼Œè™½ç„¶æ•ˆæœå¾ˆå¥½ï¼Œä½†æ˜¯éœ€è¦å¾ˆé«˜çš„è®¡ç®—é‡ï¼Œå› ä¸ºåœ¨ç½‘ç»œä¸­é—´å±‚è¿›è¡Œæ“ä½œã€‚</li></ol><p>å…‰æµä¼°è®¡æ–¹æ³•ï¼š</p><ol><li>å¯¹ç‰¹å¾å›¾æ„å»ºå¼ é‡ï¼Œå¹¶å¯¹å¼ é‡è¿›è¡Œå›å½’ã€‚</li><li>é€šè¿‡å †å çš„ç‰¹å¾å±‚æ¥è¿›è¡Œç²—ç•¥çš„å…‰æµä¼°è®¡ã€‚</li></ol><p>ä¸è¿‡è¿™äº›æ–¹æ³•éƒ½éœ€è¦å…‰æµå›¾åš<code>ground-truth</code>ã€‚</p><p>æœ€è¿‘çš„ä¸€äº›ç›¸å…³å·¥ä½œï¼š</p><ol><li>åˆ©ç”¨è¿ç»­å¸§çš„ç‰¹å¾å›¾ä¹‹é—´çš„ç›¸å…³ä¿¡æ¯æ¥ä»£æ›¿å…‰å­¦å›¾åƒã€‚ä¸è¿‡è¿™ä¸ªå®Œæ•´æ¨¡å‹çš„å¤§å°ä¸åŒæµç½‘ç»œç›¸å½“ã€‚</li><li>æå‡º<code>correspondences proposal</code>æ¨¡å—æ¥å­¦ä¹ è§†é¢‘é—´çš„è”ç³»ã€‚</li></ol><h2 id="msæ¨¡å—"><a class="header-anchor" href="#msæ¨¡å—">#</a>MSæ¨¡å—</h2><p>ä¸»è¦åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤<code>ç›¸å…³æ€§è®¡ç®—</code>ï¼ˆcorrelation computationï¼‰ã€<code>ä½ç§»ä¼°è®¡</code>ï¼ˆdisplacement estimationï¼‰å’Œ<code>ç‰¹å¾å˜æ¢</code>ï¼ˆfeature transformationï¼‰ã€‚</p><h3 id="ç›¸å…³æ€§è®¡ç®—"><a class="header-anchor" href="#ç›¸å…³æ€§è®¡ç®—">#</a>ç›¸å…³æ€§è®¡ç®—</h3><p>å®šä¹‰ç»™å®šçš„æŸä¸€ä¸ªç‰¹å¾å±‚çš„è¾“å…¥ç‰¹å¾å›¾$\mathbf{F}^{(t)}$å’Œ$\mathbf{F}^{(t+1)}$ï¼Œ$\mathbf{F}$çš„å¤§å°ä¸ºï¼š</p><p>$$<br>\mathbf{F} \in \mathbb{R}^{C \times H \times W}<br>$$</p><p>å¯¹äºæŸä¸€ä¸ªä½ç½®$\mathbf{x}$å’Œä½ç§»$\mathbf{p}$çš„ç›¸å…³æ€§å¯ä»¥é€šè¿‡ä¸‹åˆ—å…¬å¼å¾—åˆ°ï¼š</p>$$s(\mathbf{x},\mathbf{p},t)=\mathbf{F}^{(t)}_{\mathbf{x}} \cdot \mathbf{F}^{(t+1)}_{\mathbf{x}+\mathbf{p}}$$<p>$\cdot$ä»£è¡¨<code>ç‚¹ç§¯</code>ã€‚</p><p>ä¸ºäº†ä¿è¯è®¡ç®—æ•ˆç‡ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ä»ç»éªŒä¸­å¾—åˆ°å…¶å®ä¸€ä¸ªä½ç½®çš„è¿åŠ¨ç›¸å¯¹ä¸ä¼šå¾ˆå¤§ï¼ˆé‰´äºæ•°æ®é›†æ˜¯25å¸§-56å¸§ä¸ç­‰ï¼Œå…¶å®ä¹Ÿè¿˜æ˜¯è›®å¤§çš„ï¼‰<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>ï¼Œ$\mathbf{p}$æœ‰ä¸€ä¸ªèŒƒå›´$\mathbf{p}\in[-k,k]^2$ã€‚</p><p>æœ€ç»ˆç›¸å…³æ€§ç»“æœä¸ºï¼š</p><p>$$<br>\mathbf{S}^{(t)} \in \mathbb{R}^{H \times W \times P^2}, P=2k+1<br>$$</p><p>è¿™ä¸ªè®¡ç®—é‡ä¸$P^2$ä¸ª$1 \times 1$çš„å·ç§¯æ ¸è®¡ç®—é‡ç›¸å½“ï¼Œæ•´ä¸ªè§†é¢‘çš„FLOPsä¸º$T H W C P^2$ã€‚</p><p>åœ¨è®¡ç®—ç›¸å…³æ€§ä¹‹å‰ï¼Œå…ˆåœ¨å‰é¢è¿›è¡Œä¸€æ¬¡å·ç§¯æ“ä½œï¼Œç›®çš„æ˜¯ä¸ºäº†å¯¹è¿™äº›ç‰¹å¾é€šé“è¿›è¡ŒåŠ æƒï¼Œè¿›è€Œæ¥å­¦ä¹ ç›¸å…³çš„è§†è§‰è”ç³»ã€‚</p><blockquote><p>We apply a convolution layer before computing correlations, which learns to weight informative feature channels for learning visual correspondences.</p></blockquote><center><!-- //onns.xyz/blog/image --><p><img src="//onns.xyz/blog/image/20201102-1.png" alt="MSç»“æ„å›¾"></p></center><h3 id="ä½ç§»ä¼°è®¡"><a class="header-anchor" href="#ä½ç§»ä¼°è®¡">#</a>ä½ç§»ä¼°è®¡</h3><p>åœ¨å‰é¢ï¼Œæˆ‘ä»¬å·²ç»å¾—åˆ°äº†æŸä¸ªç‚¹ï¼Œä¸è¿™ä¸ªç‚¹åœ¨ä¸‹ä¸€å¸§å›¾åƒä¸­å‘¨å›´ç‚¹çš„ç›¸å…³æ€§å¼ é‡ï¼Œç„¶åå°±å¯ä»¥æ‰¾å‡ºè¿™é‡Œé¢ç›¸å…³æ€§æœ€å¤§çš„ç‚¹åšä½ç§»ä¼°è®¡ã€‚</p><p>æœ€ç®€å•ä¸”æœ€æœ‰æ•ˆåœ°æ–¹æ³•å½“ç„¶æ˜¯ç›´æ¥ç”¨$\mathrm{argmax}_{\mathbf{p}}s(\mathbf{x},\mathbf{p},t)$æ¥è®¡ç®—ï¼Œä½†æ˜¯è¿™ä¸ªæ–¹æ³•æ˜¯<code>ä¸å¯å¾®çš„</code>ï¼Œæ‰€ä»¥ç”¨ä¸€ä¸ªæ›¿ä»£æ–¹æ³•ï¼š<code>soft-argmax</code>ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š</p><p>$$<br>d(\mathbf{x},t) = \sum_{\mathbf{p}} \frac{\exp(s(\mathbf{x},\mathbf{p},t))}{\sum_{\mathbf{p}â€™}{\exp(s(\mathbf{x},\mathbf{p}â€™,t))}} \mathbf{p}.<br>$$</p><p>ä½†æ˜¯è¿™ä¸ªæ–¹æ³•ä¼šå¯¹å‘¨å›´çš„å™ªç‚¹æ¯”è¾ƒæ•æ„Ÿï¼Œå› ä¸ºä»–å—æ‰€æœ‰çš„ç‚¹çš„å€¼å½±å“ï¼Œè§£å†³æ–¹æ³•æ˜¯ï¼š<code>kernel-soft-argmax</code>ï¼Œæ€è·¯æ˜¯å¯¹éä¸­å¿ƒç‚¹è¿›è¡ŒæŠ‘åˆ¶ï¼Œæ‰€ä»¥å¾—åˆ°çš„ç»“æœå¤§éƒ¨åˆ†ä¼šæ¥è‡ªä¸­å¿ƒç‚¹ï¼ŒåŠå‘¨å›´ç›¸å…³çš„ç‚¹ï¼š</p><p>$$<br>d(\mathbf{x},t) = \sum_{\mathbf{p}} \frac{\exp(g(\mathbf{x},\mathbf{p},t)s(\mathbf{x},\mathbf{p},t) / \tau )}{\sum_{\mathbf{p}â€™}{\exp( g(\mathbf{x},\mathbf{p}â€™,t) s(\mathbf{x},\mathbf{p}â€™,t) / \tau )}}  \mathbf{p},<br>$$</p><p>$$<br>g(\mathbf{x},\mathbf{p},t) = \frac{1}{\sqrt{2\pi}\sigma}\exp(\frac{\mathbf{p}-\mathrm{argmax}_{\mathbf{p}}s(\mathbf{x},\mathbf{p},t)}{\sigma^{2}})<br>$$</p><p>æ ¹æ®ç»éªŒï¼Œä»¤$\sigma=5$ã€‚$\tau$æ˜¯ä¸€ä¸ªæ¸©åº¦å› å­ï¼Œç”¨æ¥è°ƒèŠ‚<code>softmax</code>çš„åˆ†å¸ƒï¼Œéšç€$\tau$çš„ä¸‹é™ï¼Œ<code>softmax</code>è¡¨ç°ä¸º<code>argmax</code>ï¼Œä»¤$\tau=0.01$ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œä½¿ç”¨ç›¸å…³ç½®ä¿¡åº¦å›¾ä½œä¸ºè¾…åŠ©è¿åŠ¨ä¿¡æ¯ï¼Œæ±‚è§£æ–¹æ³•æ˜¯å¯¹æ¯ä¸ªä½ç½®ç‚¹$\mathbf{x}$è¿›è¡Œæœ€å¤§æ± åŒ–ï¼š</p><p>$$<br>s^{*}(\mathbf{x},t) =\max_{\mathbf{p}}s(\mathbf{x},\mathbf{p},t)<br>$$</p><p>$$<br>\mathbf{S}^* \in \mathbb{R}^{H \times W \times 1}<br>$$</p><p>è®ºæ–‡é‡Œè¯´ä½ç§»ä¼°è®¡æœ€åå‡ºæ¥æœ‰ä¸¤ä¸ªé€šé“ï¼Œä½†æ˜¯æˆ‘ç›®å‰è¿˜ä¸çŸ¥é“ä¸ºä»€ä¹ˆæ˜¯åŒé€šé“ï¼Œå¾…åˆ°çœ‹ä»£ç åº”è¯¥å¯ä»¥çŸ¥é“ã€‚</p><p>ç„¶åæŠŠä¸¤é€šé“å’Œä¸Šé¢çš„å•é€šé“åˆå¹¶ï¼Œå¾—åˆ°ä½ç§»ä¼°è®¡å¼ é‡ï¼š</p><p>$$<br>\mathbf{D}^{(t)} \in \mathbb{R}^{H \times W \times 3}<br>$$</p><center><!-- //onns.xyz/blog/image --><p><img src="//onns.xyz/blog/image/20201102-1.png" alt="MSç»“æ„å›¾"></p></center><h3 id="ç‰¹å¾å˜æ¢"><a class="header-anchor" href="#ç‰¹å¾å˜æ¢">#</a>ç‰¹å¾å˜æ¢</h3><p>ç”¨å››å±‚å·ç§¯å·ï¼Œ<code>depth-wise separable convolution</code>ï¼Œå› ä¸ºä¸Šè¿°ç‰¹å¾éƒ½æ˜¯é€šè¿‡ä¸¤å¸§ç›¸å‡å¾—åˆ°çš„ï¼Œæ‰€ä»¥æœ€åä¼šå°‘ä¸€ä¸ªç‰¹å¾ï¼Œè®ºæ–‡ç›´æ¥ä»¤$\mathbf{M}^{(T)}=\mathbf{M}^{(T-1)}$ï¼Œ$\mathbf{M}^{(T)}$æ˜¯ä¸Šä¸€æ­¥çš„$\mathbf{D}^{(T)}$å·ç§¯å¾—åˆ°çš„ã€‚</p><p>ç»è¿‡å·ç§¯æ“ä½œï¼Œä¹Ÿæ¢å¤æˆäº†åŸæ¥çš„å°ºå¯¸ï¼š</p><p>$$<br>\mathbf{D}^{(t)} \in \mathbb{R}^{H \times W \times C}<br>$$</p><center><!-- //onns.xyz/blog/image --><p><img src="//onns.xyz/blog/image/20201102-1.png" alt="MSç»“æ„å›¾"></p></center><p>æœ€ç»ˆçš„ç»“æœä¼šåŠ å›åˆ°åŸæ¥çš„ç‰¹å¾å›¾ä¸Šï¼Œè®ºæ–‡é€šè¿‡åšå®éªŒå‘ç°è¿™æ ·æ•ˆæœæœ€å¥½ï¼š</p><p>$$<br>\mathbf{F}â€™^{(t)} =\mathbf{F}^{(t)} + \mathbf{M}^{(t)}<br>$$</p><center><!-- //onns.xyz/blog/image --><p><img src="//onns.xyz/blog/image/20201102-2.png" alt="ç½‘ç»œå›¾"></p></center><h2 id="è¯¦ç»†ä»£ç "><a class="header-anchor" href="#è¯¦ç»†ä»£ç ">#</a>è¯¦ç»†ä»£ç </h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">x = self.layer1(x)                             </span><br><span class="line">x = self.layer2(x)          </span><br><span class="line"></span><br><span class="line"><span class="comment"># Flow </span></span><br><span class="line">flow_1, match_v = self.flow_computation(x, temperature=temperature)</span><br><span class="line">x = self.flow_refinement(flow_1, x, match_v)</span><br><span class="line"><span class="comment"># EndFlow </span></span><br><span class="line"></span><br><span class="line">x = self.layer3(x)                           </span><br><span class="line">x = self.layer4(x)</span><br></pre></td></tr></table></figure><p>é¦–å…ˆæ˜¯ä»£ç å…¥å£ï¼Œä»£ç å°±æ˜¯åœ¨<code>ResNet</code>çš„å±‚ä¹‹é—´æ·»åŠ çš„ï¼Œå…·ä½“çš„æ˜¯åœ¨<code>layer2</code>å’Œ<code>layer3</code>ä¹‹é—´ã€‚ä¸€å…±æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸€å…±æ˜¯ä¸Šé¢è¯´çš„<code>MS</code>çš„è®¡ç®—ï¼Œå³<code>flow_computation</code>ï¼Œè¿™é‡Œå‡ºæ¥çš„ç»“æœæ˜¯ä¸Šé¢è¯´çš„$\mathbf{D}^{(t)}$ï¼Œä¸Šé¢è¯´è¿‡$\mathbf{D}^{(t)}$æœ‰ä¸‰ä¸ªé€šé“ï¼Œ<code>flow_1</code>æ˜¯å‰ä¸¤ä¸ª<code>å…‰æµé€šé“</code>ï¼Œ<code>match_v</code>æ˜¯ç¬¬ä¸‰ä¸ªçš„è¾…åŠ©è¿åŠ¨ä¿¡æ¯ï¼Œå³$\mathbf{S}^*$ã€‚ç¬¬äºŒä¸ªæ˜¯<code>MS</code>çš„å‡ ä¸ªå·ç§¯å±‚+æœ€ç»ˆçš„èåˆï¼Œå°±æ˜¯ä»$\mathbf{D}^{(t)}$åˆ°$\mathbf{M}^{(t)}$å†åˆ°$\mathbf{F}'^{(t)}$çš„è¿‡ç¨‹ï¼Œå³<code>flow_refinement</code>ã€‚</p><p>ç„¶åçœ‹ä¸€ä¸‹<code>flow_computation</code>æ–¹æ³•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">flow_computation</span><span class="params">(self, x, pos=<span class="number">2</span>, temperature=<span class="number">100</span>)</span>:</span></span><br><span class="line"></span><br><span class="line">x = self.chnl_reduction(x)</span><br><span class="line"><span class="comment"># chnl_reduction æºç å¦‚ä¸‹ï¼Œä¸»è¦åšçš„æ“ä½œæ˜¯é™ä½é€šé“æ•°</span></span><br><span class="line"><span class="comment"># self.chnl_reduction = nn.Sequential(</span></span><br><span class="line"><span class="comment">#     nn.Conv2d(128*block.expansion, 64, kernel_size=1, stride=1, padding=0, bias=False),</span></span><br><span class="line"><span class="comment">#     nn.BatchNorm2d(64),</span></span><br><span class="line"><span class="comment">#     nn.ReLU(inplace=True)</span></span><br><span class="line"><span class="comment"># )</span></span><br><span class="line"></span><br><span class="line">size = x.size()               </span><br><span class="line">x = x.view((<span class="number">-1</span>, self.num_segments) + size[<span class="number">1</span>:])        <span class="comment"># N T C H W</span></span><br><span class="line">x = x.permute(<span class="number">0</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>).contiguous() <span class="comment"># B C T H W   </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># match to flow            </span></span><br><span class="line">k = <span class="number">1</span>            </span><br><span class="line">temperature = temperature                    </span><br><span class="line">b,c,t,h,w = x.size()            </span><br><span class="line">t = t<span class="number">-1</span>         </span><br><span class="line"></span><br><span class="line">x_pre = x[:,:,:<span class="number">-1</span>].permute(<span class="number">0</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>).contiguous().view(<span class="number">-1</span>,c,h,w)</span><br><span class="line">x_post = x[:,:,<span class="number">1</span>:].permute(<span class="number">0</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>).contiguous().view(<span class="number">-1</span>,c,h,w)</span><br><span class="line"></span><br><span class="line">match = self.matching_layer(x_pre, x_post)    <span class="comment"># (B*T-1*group, H*W, H*W)          </span></span><br><span class="line">u, v, confidence = self.match_to_flow_soft(match, k, h, w, temperature)</span><br><span class="line">flow = tr.cat([u,v], dim=<span class="number">1</span>).view(<span class="number">-1</span>, <span class="number">2</span>*k, h, w)  <span class="comment">#  (b, 2, h, w)            </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># backward flow</span></span><br><span class="line"><span class="comment">#             match2 = self.matching_layer(x_post, x_pre)</span></span><br><span class="line"><span class="comment">#             u_2, v_2, confidence_2 = self.match_to_flow_soft(match2, k, h, w,temperature)       </span></span><br><span class="line"><span class="comment">#             flow_2 = tr.cat([u_2,v_2],dim=1).view(-1,2, h, w)   </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> flow, confidence</span><br></pre></td></tr></table></figure><p>é¦–å…ˆè¿›è¡Œäº†é™ä½é€šé“æ•°çš„æ“ä½œï¼Œç„¶åå¯¹äºä¸åŒ $t$ æ—¶åˆ»çš„ç‰¹å¾å›¾ï¼Œè¿›è¡Œ<code>matching_layer</code>æ“ä½œï¼Œå¾—åˆ°<code>match</code>å¼ é‡ï¼Œå¯¹åº”è®ºæ–‡ä¸­çš„$\mathbf{S}^{(t)}$ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">feature1 = self.L2normalize(feature1)</span><br><span class="line">feature2 = self.L2normalize(feature2)</span><br><span class="line">b, c, h1, w1 = feature1.size()</span><br><span class="line">b, c, h2, w2 = feature2.size()</span><br><span class="line">corr = self.correlation_sampler(feature1, feature2)</span><br><span class="line">corr = corr.view(b, self.patch * self.patch, h1* w1) <span class="comment"># Channel : target // Spatial grid : source</span></span><br><span class="line">corr = self.relu(corr)</span><br><span class="line"><span class="keyword">return</span> corr</span><br></pre></td></tr></table></figure><p>ç›´æ¥å†™äº†ä¸€ä¸ª<code>forward</code>æ–¹æ³•ï¼Œ<code>correlation_sampler</code>è°ƒç”¨çš„æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„åº“ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">self.correlation_sampler = SpatialCorrelationSampler(ks, patch, stride, pad, patch_dilation)</span><br></pre></td></tr></table></figure><p>æ€»å¾—æ¥è¯´å°±æ˜¯æ±‚ç›¸å…³æ€§çš„ã€‚</p><p>ç„¶åæ˜¯<code>match_to_flow_soft</code>æ–¹æ³•ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">match_to_flow_soft</span><span class="params">(self, match, k, h,w, temperature=<span class="number">1</span>, mode=<span class="string">'softmax'</span>)</span>:</span>        </span><br><span class="line">b, c , s = match.size()     </span><br><span class="line">idx = tr.arange(h*w, dtype=tr.float32).to(<span class="string">'cuda'</span>)</span><br><span class="line">idx_x = idx % w</span><br><span class="line">idx_x = idx_x.repeat(b,k,<span class="number">1</span>).to(<span class="string">'cuda'</span>)</span><br><span class="line">idx_y = tr.floor(idx / w)   </span><br><span class="line">idx_y = idx_y.repeat(b,k,<span class="number">1</span>).to(<span class="string">'cuda'</span>)</span><br><span class="line"></span><br><span class="line">soft_idx_x = idx_x[:,:<span class="number">1</span>]</span><br><span class="line">soft_idx_y = idx_y[:,:<span class="number">1</span>]</span><br><span class="line">displacement = (self.patch<span class="number">-1</span>)/<span class="number">2</span></span><br><span class="line"></span><br><span class="line">topk_value, topk_idx = tr.topk(match, k, dim=<span class="number">1</span>)    <span class="comment"># (B*T-1, k, H*W)</span></span><br><span class="line">topk_value = topk_value.view(<span class="number">-1</span>,k,h,w)</span><br><span class="line"></span><br><span class="line">match = self.apply_gaussian_kernel(match, h, w, self.patch, sigma=<span class="number">5</span>)</span><br><span class="line">match = match*temperature</span><br><span class="line">match_pre = self.soft_argmax(match)</span><br><span class="line">smax = match_pre           </span><br><span class="line">smax = smax.view(b,self.patch,self.patch,h,w)</span><br><span class="line">x_kernel = tr.arange(-displacement*self.patch_dilation, displacement*self.patch_dilation+<span class="number">1</span>, step=self.patch_dilation, dtype=tr.float).to(<span class="string">'cuda'</span>)</span><br><span class="line">y_kernel = tr.arange(-displacement*self.patch_dilation, displacement*self.patch_dilation+<span class="number">1</span>, step=self.patch_dilation, dtype=tr.float).to(<span class="string">'cuda'</span>)</span><br><span class="line">x_mult = x_kernel.expand(b,self.patch).view(b,self.patch,<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line">y_mult = y_kernel.expand(b,self.patch).view(b,self.patch,<span class="number">1</span>,<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">smax_x = smax.sum(dim=<span class="number">1</span>, keepdim=<span class="literal">False</span>) <span class="comment">#(b,w=k,h,w)</span></span><br><span class="line">smax_y = smax.sum(dim=<span class="number">2</span>, keepdim=<span class="literal">False</span>) <span class="comment">#(b,h=k,h,w)</span></span><br><span class="line">flow_x = (smax_x*x_mult).sum(dim=<span class="number">1</span>, keepdim=<span class="literal">True</span>).view(<span class="number">-1</span>,<span class="number">1</span>,h*w) <span class="comment"># (b,1,h,w)</span></span><br><span class="line">flow_y = (smax_y*y_mult).sum(dim=<span class="number">1</span>, keepdim=<span class="literal">True</span>).view(<span class="number">-1</span>,<span class="number">1</span>,h*w) <span class="comment"># (b,1,h,w)    </span></span><br><span class="line"></span><br><span class="line">flow_x = (flow_x / (self.patch_dilation * displacement))</span><br><span class="line">flow_y = (flow_y / (self.patch_dilation * displacement))</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> flow_x, flow_y, topk_value</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå°±å¯ä»¥è§£é‡Šä¸Šé¢çš„ç–‘é—®äº†ï¼Œä¸ºä»€ä¹ˆåŒ¹é…å‡ºæ¥çš„é€šé“æ•°æ˜¯<code>2</code>ï¼Œå°±æ˜¯å’Œå…‰æµä¸€æ ·çš„åŸå› ï¼Œä¸€ä¸ªæ˜¯<code>x</code>æ–¹å‘ä¸Šçš„ï¼Œä¸€ä¸ªæ˜¯<code>y</code>æ–¹å‘ä¸Šçš„ã€‚</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>è¿™ç¬¬äºŒå¥è¯æ˜¯æˆ‘è‡ªå·±åŠ çš„ï¼Œè®ºæ–‡é‡Œåªæ˜¯ä¸ºäº†ä¿è¯è®¡ç®—æ•ˆç‡ã€‚ <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¡Œä¸ºè¯†åˆ« </tag>
            
            <tag> action recognition </tag>
            
            <tag> ECCV </tag>
            
            <tag> msnet </tag>
            
            <tag> ECCV 2020 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Temporal Relational Reasoning in Videos</title>
      <link href="/blog/2020/10/20/temporal-relational-reasoning-in-videos/"/>
      <url>/blog/2020/10/20/temporal-relational-reasoning-in-videos/</url>
      
        <content type="html"><![CDATA[<h1 id="temporal-relational-reasoning-in-videos"><a class="header-anchor" href="#temporal-relational-reasoning-in-videos">#</a>Temporal Relational Reasoning in Videos</h1><p>è®ºæ–‡ä¸­éœ€è¦å¼•ç”¨è¿™è¾¹è®ºæ–‡çš„ä¸€ä¸ªç»“è®ºï¼Œè®°å½•ä¹‹ã€‚åŸæ¥æˆ‘ä¹‹å‰å°±è®°å½•è¿‡ï¼Œä½†æ˜¯æ²¡æœ‰å†™ç¬”è®°ï¼Œå¯¼è‡´æˆ‘æ˜¨æ™šï¼ˆ20201228ï¼‰çªç„¶æƒ³æ‰¾è¿™ä¸ªç»“è®ºçš„æ—¶å€™è®°ä¸å¾—æ˜¯å“ªç¯‡è®ºæ–‡äº†ï¼Œæ‰€å¹¸æ‰¾åˆ°äº†ï¼Œä¸ç„¶å‡ ç™¾ç¯‡å‚è€ƒæ–‡çŒ®æˆ‘çœŸæ˜¯è¦ç¿»åˆ°åï¼Œä¸‡ä¸€é‡Œé¢è¿˜æ²¡æœ‰ï¼Œé‚£æ‰æ˜¯ç»æœ›ã€‚</p><p>å…¶å®è¿™ç¯‡æ–‡ç« çš„<code>TRN</code>å¥½åƒä¹Ÿæ˜¯æˆ‘æ‰€ç ”ç©¶çš„<code>TSN</code>å‘å±•å†ç¨‹ä¸Šçš„ä¸€ä¸ªç‚¹ï¼Œä½†æ²¡æœ‰ç»†çœ‹è¿‡ï¼Œè¯´æ¥æƒ­æ„§ã€‚ä¸è¿‡è¿™ä¸ªçš„æ•ˆæœå¤§å¤šå·²ç»è¢«åé¢çš„<code>TSM</code>å’Œ<code>TEA</code>ä¹‹ç±»çš„å–ä»£äº†ã€‚</p><h2 id="æ—¶åºä¿¡æ¯çš„é‡è¦æ€§"><a class="header-anchor" href="#æ—¶åºä¿¡æ¯çš„é‡è¦æ€§">#</a>æ—¶åºä¿¡æ¯çš„é‡è¦æ€§</h2><p>è®ºæ–‡ä¸ºäº†éªŒè¯æ—¶åºä¿¡æ¯çš„é‡è¦æ€§ï¼Œå¯¹æ¯”äº†é¡ºåºå¸§å’Œä¹±åºå¸§åœ¨åŒä¸€ç½‘ç»œä¸‹çš„è¯†åˆ«å‡†ç¡®ç‡ï¼Œåˆ†åˆ«åœ¨<code>UCF101</code>å’Œ<code>something-something</code>ä¸Šè¿›è¡Œæµ‹è¯•ï¼Œè¯æ˜äº†ä¸¤ç‚¹ï¼š</p><ol><li>æ—¶åºä¿¡æ¯å¯¹äºè¡Œä¸ºè¯†åˆ«å‡†ç¡®ç‡ååˆ†é‡è¦ã€‚</li><li><code>something-something</code>è¿™ç±»æ•°æ®é›†ï¼Œæ—¶åºæ€§å¾ˆå¼ºï¼Œä¸æ˜¯é€šè¿‡åœºæ™¯å°±èƒ½åˆ¤æ–­è¯†åˆ«ç»“æœçš„ã€‚</li></ol><center><!-- //onns.xyz/blog/image --><!-- ../image --><p><img src="//onns.xyz/blog/image/20201229-4.png" alt="æµ‹è¯•ç»“æœå›¾"></p></center><p>è¿›ä¸€æ­¥ï¼Œä½œè€…å¯¹æ¯”äº†éšæœºå’Œé¡ºåºä¸­è¯†åˆ«å‡†ç¡®ç‡å·®åˆ«æœ€å¤§çš„å‡ ç±»ï¼Œå‘ç°<code>å…·æœ‰å•ä¸€æ–¹å‘çš„è¾ƒå¤§ä½ç§»è¿åŠ¨</code>å—å½±å“æœ€å¤§ï¼Œæ¯”å¦‚<code>Moving something down</code>ã€‚</p><center><!-- //onns.xyz/blog/image --><!-- ../image --><p><img src="//onns.xyz/blog/image/20201229-5.png" alt="ç»“æœå¯¹æ¯”"></p></center><p>ä¸è¿‡ä¹Ÿæœ‰å¯èƒ½å­˜åœ¨ä¸€äº›å˜é«˜çš„è¯†åˆ«ç»“æœï¼Œè¿™ä¸ªåŸå› æˆ‘æ²¡å¤ªçœ‹æ‡‚= =</p><h2 id="ç›¸å…³é“¾æ¥"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥">#</a>ç›¸å…³é“¾æ¥</h2><ul><li><a href="https://blog.csdn.net/zuber123/article/details/89379297" target="_blank" rel="noopener">è®ºæ–‡è§£è¯»ï¼šTemporal Relational Reasoning in Videos</a></li><li><a href="https://blog.csdn.net/elaine_bao/article/details/80753506" target="_blank" rel="noopener">ã€è®ºæ–‡ç¬”è®°ã€‘è§†é¢‘åˆ†ç±»ç³»åˆ— Temporal Relational Reasoning in Videos ï¼ˆTRNï¼‰</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¡Œä¸ºè¯†åˆ« </tag>
            
            <tag> action recognition </tag>
            
            <tag> ECCV </tag>
            
            <tag> ECCV 2018 </tag>
            
            <tag> TRN </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Representation Flow for Action Recognition</title>
      <link href="/blog/2020/10/20/representation-flow-for-action-recognition/"/>
      <url>/blog/2020/10/20/representation-flow-for-action-recognition/</url>
      
        <content type="html"><![CDATA[<h1 id="representation-flow-for-action-recognition"><a class="header-anchor" href="#representation-flow-for-action-recognition">#</a>Representation Flow for Action Recognition</h1><h2 id="æ‘˜è¦"><a class="header-anchor" href="#æ‘˜è¦">#</a>æ‘˜è¦</h2><p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ä¸ªå—å…‰æµç®—æ³•å¯å‘çš„å·ç§¯å±‚æ¥å­¦ä¹ è¿åŠ¨è¡¨ç¤ºã€‚æˆ‘ä»¬çš„è¡¨ç¤ºæµå±‚æ˜¯å®Œå…¨å¯å¾®çš„å±‚ï¼Œè®¾è®¡ç”¨äºæ•è·å·ç§¯ç¥ç»ç½‘ç»œå†…ä»»ä½•è¡¨ç¤ºé€šé“çš„æµï¼Œç”¨äºåŠ¨ä½œè¯†åˆ«ã€‚å…¶è¿­ä»£æµä¼˜åŒ–å‚æ•°ä¸å…¶ä»–<code>CNN</code>æ¨¡å‹å‚æ•°ä»¥ç«¯åˆ°ç«¯çš„æ–¹å¼å­¦ä¹ ï¼Œæœ€å¤§é™åº¦åœ°æé«˜åŠ¨ä½œè¯†åˆ«æ€§èƒ½ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬é€šè¿‡å †å å¤šä¸ªè¡¨ç¤ºæµæ± ï¼Œå¼•å…¥äº†æµè¡¨ç¤ºå­¦ä¹ æµçš„æ¦‚å¿µã€‚æˆ‘ä»¬è¿›è¡Œäº†å¹¿æ³›çš„å®éªŒè¯„ä¼°ï¼Œè¯å®äº†å…¶åœ¨è®¡ç®—é€Ÿåº¦å’Œæ€§èƒ½ä¸Šä¼˜äºä»¥å¾€ä½¿ç”¨ä¼ ç»Ÿå…‰æµçš„è¯†åˆ«æ¨¡å‹ã€‚è¯¥ä»£ç æ˜¯å…¬å¼€çš„ã€‚</p><h2 id="flow-of-flow"><a class="header-anchor" href="#flow-of-flow">#</a>Flow of Flow</h2><p>è¡¨ç¤ºæµä¸­å†è®¡ç®—ä¸€æ¬¡æµã€‚ã€‚ã€‚ç»“æœæ˜¯ä¸‹é™çš„ï¼Œè¿™å°±å’Œæˆ‘<code>PAN</code>é‡Œçš„å®éªŒç»“è®ºä¸€è‡´ã€‚</p><h3 id="ç›¸å…³é“¾æ¥"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥">#</a>ç›¸å…³é“¾æ¥</h3><ul><li><a href="https://blog.csdn.net/qq_41590635/article/details/102670079" target="_blank" rel="noopener">Representation Flow for Action Recognition è®ºæ–‡è§£è¯»</a></li><li><a href="https://zhuanlan.zhihu.com/p/68222768" target="_blank" rel="noopener">[CVPR19]Representation Flow for Action Recognition</a></li><li><a href="https://blog.csdn.net/xwmwanjy666/article/details/103353912" target="_blank" rel="noopener">Representation Flow for Action Recognition</a></li><li><a href="https://github.com/piergiaj/representation-flow-cvpr19" target="_blank" rel="noopener">https://github.com/piergiaj/representation-flow-cvpr19</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¡Œä¸ºè¯†åˆ« </tag>
            
            <tag> action recognition </tag>
            
            <tag> CVPR </tag>
            
            <tag> CVPR 2019 </tag>
            
            <tag> 2019 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Motion Feature Network Fixed Motion Filter for Action Recognition</title>
      <link href="/blog/2020/10/20/motion-feature-network-fixed-motion-filter-for-action-recognition/"/>
      <url>/blog/2020/10/20/motion-feature-network-fixed-motion-filter-for-action-recognition/</url>
      
        <content type="html"><![CDATA[<h2 id="motion-feature-network-fixed-motion-filter-for-action-recognition"><a class="header-anchor" href="#motion-feature-network-fixed-motion-filter-for-action-recognition">#</a>Motion Feature Network: Fixed Motion Filter for Action Recognition</h2><h3 id="ç›¸å…³é“¾æ¥"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥">#</a>ç›¸å…³é“¾æ¥</h3><ul><li><a href="https://zhuanlan.zhihu.com/p/87035777" target="_blank" rel="noopener">è¡Œä¸ºè¯†åˆ«ä¹‹ Motion Feature Network</a></li><li><a href="https://arxiv.org/pdf/1807.10037.pdf" target="_blank" rel="noopener">https://arxiv.org/pdf/1807.10037.pdf</a></li><li><a href="https://blog.csdn.net/weixin_41648477/article/details/106113394" target="_blank" rel="noopener">ã€è®ºæ–‡é˜…è¯»ã€‘Motion Feature Network: Fixed Motion Filter for Action Recognition</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¡Œä¸ºè¯†åˆ« </tag>
            
            <tag> action recognition </tag>
            
            <tag> ECCV </tag>
            
            <tag> ECCV 2018 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>STM SpatioTemporal and Motion Encoding for Action Recognition</title>
      <link href="/blog/2020/10/19/stm-spatiotemporal-and-motion-encoding-for-action-recognition/"/>
      <url>/blog/2020/10/19/stm-spatiotemporal-and-motion-encoding-for-action-recognition/</url>
      
        <content type="html"><![CDATA[<h2 id="stm-spatiotemporal-and-motion-encoding-for-action-recognition"><a class="header-anchor" href="#stm-spatiotemporal-and-motion-encoding-for-action-recognition">#</a>STM: SpatioTemporal and Motion Encoding for Action Recognition</h2><p>è¿™ä¸ªæ˜¯TEAçš„çµæ„Ÿæ¥æºï¼Œæ„Ÿè§‰å˜åŒ–ä¸æ˜¯å¾ˆå¤§ï¼Œä½†æ˜¯æ•ˆæœä¸é”™ï¼Œè€Œä¸”å®éªŒåšçš„è¶³å¤Ÿå¤šã€‚</p><h3 id="ç›¸å…³é“¾æ¥"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥">#</a>ç›¸å…³é“¾æ¥</h3><ul><li><a href="https://blog.csdn.net/irving512/article/details/107085867/" target="_blank" rel="noopener">è®ºæ–‡æµè§ˆ(14) STM: SpatioTemporal and Motion Encoding for Action Recognition</a></li><li><a href="https://zhuanlan.zhihu.com/p/85242145" target="_blank" rel="noopener">STM: SpatioTemporal and Motion Encoding</a></li><li><a href="https://zhuanlan.zhihu.com/p/87048160" target="_blank" rel="noopener">ICCV2019 è¡Œä¸ºè¯†åˆ«æ–°æ–‡ STM</a></li><li><a href="https://mna12478.github.io/action_16/" target="_blank" rel="noopener">STM SpatioTemporal and Motion Encoding for Action Recognition (ICCV 2019)</a></li><li><a href="https://arxiv.org/pdf/1908.02486.pdf" target="_blank" rel="noopener">https://arxiv.org/pdf/1908.02486.pdf</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¡Œä¸ºè¯†åˆ« </tag>
            
            <tag> action recognition </tag>
            
            <tag> stm </tag>
            
            <tag> ICCV </tag>
            
            <tag> ICCV 2019 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Latexæ”¯æŒ</title>
      <link href="/blog/2020/10/17/latex-for-hexo/"/>
      <url>/blog/2020/10/17/latex-for-hexo/</url>
      
        <content type="html"><![CDATA[<p>ä¹‹å‰ç½‘ç«™çš„<code>Latex</code>å…¬å¼ä¸€ç›´ä¸ç¨³å®šï¼Œè¿™æ¬¡ç»ˆäºç‹ ä¸‹å¿ƒæ¥æ‰¾é—®é¢˜äº†ï¼æŠ˜è…¾ä¹‹ã€‚</p><a id="more"></a><p>å…ˆè¯´ç»“è®ºï¼Œå‚è€ƒ<a href="https://docs.mathjax.org/en/latest/web/start.html#configuring-mathjax" target="_blank" rel="noopener">Configuring MathJax</a>ï¼Œåœ¨é¡µé¢é‡Œæ’å…¥ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">MathJax = &#123;</span><br><span class="line">tex: &#123;</span><br><span class="line">inlineMath: [[<span class="string">'$'</span>, <span class="string">'$'</span>], [<span class="string">'\\('</span>, <span class="string">'\\)'</span>]]</span><br><span class="line">&#125;,</span><br><span class="line">svg: &#123;</span><br><span class="line">fontCache: <span class="string">'global'</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&lt;script type="text/</span>javascript<span class="string">" async src="</span><span class="comment">//cdnjs.cloudflare.com/ajax/libs/mathjax/3.0.0/es5/latest?tex-mml-chtml.js"&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure><p>å³å¯ï¼Œå¼€ç®±å³é£Ÿï¼</p><p>é—®é¢˜å‡ºç°çš„åŸå› æ˜¯æˆ‘ä¸»é¢˜å¸¦äº†ä¸Šé¢çš„è¿™ä¸ªæ¸²æŸ“ï¼Œç»“æœæˆ‘è£…çš„æ’ä»¶<code>hexo-math</code>ä¹Ÿæ¸²æŸ“äº†ï¼Œå°±ä¼šé€ æˆå†²çªã€‚</p><p>ä½†æ˜¯é—®é¢˜æ˜¯æˆ‘è¿˜éœ€è¦ä¾èµ–<code>hexo-math</code>çš„åŠŸèƒ½ï¼Œå› ä¸ºçº¯<code>Latex</code>ä»£ç åœ¨<code>hexo</code>ä¸­ä¼šè¢«æ¸²æŸ“æˆ<code>html</code>ï¼Œæ‰€ä»¥æœ€å¼€å§‹æˆ‘æƒ³çš„è§£å†³æ–¹æ³•æ˜¯æ”¹å†™<code>hexo-math</code>çš„ä»£ç ï¼Œåªä¿ç•™æ ‡ç­¾æ¸²æŸ“éƒ¨åˆ†ï¼Œè€Œä¸è¦<code>Latex</code>æ¸²æŸ“éƒ¨åˆ†ï¼Œåé¢åˆæƒ³è‡ªå·±å†™æ’ä»¶ï¼Œæœ€åå‘ç°å®˜æ–¹æœ‰<a href="https://hexo.io/docs/tag-plugins#Raw" target="_blank" rel="noopener">raw block</a>çš„å®ç°ï¼š</p><p>ç›´æ¥ä½¿ç”¨å³å¯ï¼</p><p>é—®é¢˜è§£å†³ã€‚</p><p>ä¹Ÿæ˜¯é¡ºåŠ¿æŠŠè‡ªå·±çš„<code>mathjax</code>ç‰ˆæœ¬å‡çº§äº†ä¸€ä¸‹ã€‚</p><h2 id="å‚è€ƒé“¾æ¥"><a class="header-anchor" href="#å‚è€ƒé“¾æ¥">#</a>å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://docs.mathjax.org/en/latest/web/start.html#configuring-mathjax" target="_blank" rel="noopener">Configuring MathJax</a></li><li><a href="https://hexo.io/docs/tag-plugins#Raw" target="_blank" rel="noopener">Tag Plugins</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> idea </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> hexo-theme-even </tag>
            
            <tag> blog </tag>
            
            <tag> latex </tag>
            
            <tag> mathjax </tag>
            
            <tag> hexo-math </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Temporal Pyramid Network for Action Recognition</title>
      <link href="/blog/2020/10/17/temporal-pyramid-network-for-action-recognition/"/>
      <url>/blog/2020/10/17/temporal-pyramid-network-for-action-recognition/</url>
      
        <content type="html"><![CDATA[<h1 id="temporal-pyramid-network-for-action-recognition"><a class="header-anchor" href="#temporal-pyramid-network-for-action-recognition">#</a>Temporal Pyramid Network for Action Recognition</h1><p>è¿‘æœŸæ¥çœ‹æ²¡æœ‰å‚è€ƒä»·å€¼ï¼Œå…ˆæŠŠç›¸å…³é“¾æ¥è®°å½•ä¸‹ï¼Œçœçš„ä¸‹æ¬¡é‡æ–°æ‰¾ã€‚</p><p><code>20210423</code>æ›´æ–°ï¼šå› ä¸ºè¦æŠŠå¼•ç”¨æ·»åŠ åˆ°æ­£æ–‡ä¸­ï¼Œæ‰€ä»¥è¦åŠ å¾ˆå¤šæ‘˜è¦å†…å®¹ï¼Œæ•…é‡æ–°è¡¥å……å†…å®¹ã€‚</p><a id="more"></a><h2 id="æ‘˜è¦"><a class="header-anchor" href="#æ‘˜è¦">#</a>æ‘˜è¦</h2><p>è§†è§‰èŠ‚å¥æ˜¯åŠ¨ä½œçš„åŠ¨æ€å’Œæ—¶é—´å°ºåº¦çš„ç‰¹å¾ã€‚å¯¹ä¸åŒåŠ¨ä½œçš„è§†è§‰èŠ‚å¥å»ºæ¨¡æœ‰åŠ©äºè¯†åˆ«å®ƒä»¬ã€‚ä»¥å‰çš„ä½œå“é€šå¸¸é€šè¿‡å¯¹åŸå§‹è§†é¢‘è¿›è¡Œå¤šé€Ÿç‡é‡‡æ ·å’Œæ„å»ºè¾“å…¥çº§å¸§é‡‘å­—å¡”æ¥æ•æ‰è§†è§‰èŠ‚å¥ï¼Œè¿™é€šå¸¸éœ€è¦ä¸€ä¸ªæ˜‚è´µçš„å¤šåˆ†æ”¯ç½‘ç»œæ¥å¤„ç†ã€‚åœ¨æœ¬ç ”ç©¶ä¸­ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸€ä¸ªç‰¹å¾çº§çš„é€šç”¨æ—¶åºé‡‘å­—å¡”ç½‘ç»œ<code>TPN</code>ï¼Œå®ƒå¯ä»¥ä»¥å³æ’å³ç”¨çš„æ–¹å¼çµæ´»åœ°é›†æˆåˆ°<code>2D</code>æˆ–<code>3D</code>éª¨å¹²ç½‘ä¸­ï¼š<code>TPN</code>çš„ä¸¤ä¸ªé‡è¦ç»„æˆéƒ¨åˆ†ï¼Œæºç‰¹å¾å’Œèåˆç‰¹å¾æ„æˆäº†éª¨å¹²çš„ç‰¹å¾å±‚æ¬¡ï¼Œä½¿å…¶èƒ½å¤Ÿåœ¨ä¸åŒçš„èŠ‚å¥ä¸‹æ•è·åŠ¨ä½œå®ä¾‹ã€‚<code>TPN</code>åœ¨å‡ ä¸ªåŠ¨ä½œè¯†åˆ«æ•°æ®é›†ä¸Šä¹Ÿæ˜¾ç¤ºäº†ä¸å…¶ä»–å…·æœ‰æŒ‘æˆ˜æ€§çš„åŸºçº¿ç›¸æ¯”çš„æŒç»­æ”¹è¿›ã€‚å…·ä½“æ¥è¯´ï¼Œå½“é…å¤‡<code>TPN</code>æ—¶ï¼Œå¯†é›†é‡‡æ ·çš„<code>3D ResNet-50</code>åœ¨<code>Kinetics-400</code>éªŒè¯é›†ä¸Šè·å¾—äº†<code>2%</code>çš„å¢ç›Šã€‚è¿›ä¸€æ­¥çš„åˆ†æè¿˜æ˜¾ç¤ºï¼Œ<code>TPN</code>åœ¨è§†è§‰èŠ‚å¥å·®å¼‚è¾ƒå¤§çš„åŠ¨ä½œç±»ä¸Šè·å¾—äº†å¤§éƒ¨åˆ†æ”¹è¿›ï¼ŒéªŒè¯äº†<code>TPN</code>çš„æœ‰æ•ˆæ€§ã€‚</p><h2 id="temporal-pyramid-network"><a class="header-anchor" href="#temporal-pyramid-network">#</a>Temporal Pyramid Network</h2><p>å¤§éƒ¨åˆ†çš„ç½‘ç»œåœ¨è¾“å…¥å±‚é¢ä¸Šè§£å†³æ—¶åºä¿¡æ¯çš„æå–é—®é¢˜ï¼Œä½†è¿™éœ€è¦å•ç‹¬çš„éª¨å¹²ç½‘ç»œæä¾›æ”¯æŒï¼Œæ˜¯è®¡ç®—å¤æ‚çš„ã€‚ä½œè€…è§‚å¯Ÿåˆ°å•ä¸ªç½‘ç»œä¸­ä¸åŒæ·±åº¦çš„ç‰¹å¾å·²ç»åŒ…å«äº†å¤šç§çš„æ—¶é—´èŠ‚å¥ï¼Œå› æ­¤æå‡ºäº†æ—¶åºé‡‘å­—å¡”ç½‘ç»œã€‚</p><h3 id="ç›¸å…³é“¾æ¥"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥">#</a>ç›¸å…³é“¾æ¥</h3><ul><li><a href="https://zhuanlan.zhihu.com/p/127366929" target="_blank" rel="noopener">Temporal Pyramid Network for Action Recognition</a></li><li><a href="https://blog.csdn.net/Amazingren/article/details/105631183" target="_blank" rel="noopener">ã€CVPR2020ã€‘Temporal Pyramid Network for Action Recognition</a></li><li><a href="https://blog.csdn.net/YoJayC/article/details/106989570" target="_blank" rel="noopener">Temporal Pyramid Network for Action Recognitionï¼ˆCVPR2020ï¼‰</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¡Œä¸ºè¯†åˆ« </tag>
            
            <tag> action recognition </tag>
            
            <tag> CVPR </tag>
            
            <tag> CVPR 2020 </tag>
            
            <tag> 2020 </tag>
            
            <tag> tpn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PANä»£ç å®ç°ç»†èŠ‚</title>
      <link href="/blog/2020/10/16/pan-code-details/"/>
      <url>/blog/2020/10/16/pan-code-details/</url>
      
        <content type="html"><![CDATA[<h2 id="pan-towards-fast-action-recognition-via-learning-persistence-of-appearance"><a class="header-anchor" href="#pan-towards-fast-action-recognition-via-learning-persistence-of-appearance">#</a>PAN: Towards Fast Action Recognition via Learning Persistence of Appearance</h2><a id="more"></a><p>ä¸¤ä¸ªåˆ›æ–°æ¨¡å—çš„ä»£ç å®ç°ç»†èŠ‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> torch <span class="keyword">import</span> nn</span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PA</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, n_length)</span>:</span></span><br><span class="line">super(PA, self).__init__()</span><br><span class="line">self.shallow_conv = nn.Conv2d(<span class="number">3</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">1</span>,<span class="number">3</span>)</span><br><span class="line">self.n_length = n_length</span><br><span class="line"><span class="keyword">for</span> m <span class="keyword">in</span> self.modules():</span><br><span class="line"><span class="keyword">if</span> isinstance(m, nn.Conv2d):</span><br><span class="line">nn.init.normal_(m.weight.data, <span class="number">0</span>, <span class="number">0.001</span>)</span><br><span class="line">nn.init.constant_(m.bias.data, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, x)</span>:</span></span><br><span class="line"><span class="comment"># print(x.shape)  x:(batch_size*32,c,h,w) </span></span><br><span class="line">h, w = x.size(<span class="number">-2</span>), x.size(<span class="number">-1</span>)</span><br><span class="line">x = x.view((<span class="number">-1</span>, <span class="number">3</span>) + x.size()[<span class="number">-2</span>:]) <span class="comment"># è¿™å¥è¯æ ¹æœ¬æ²¡æœ‰åµç”¨ã€‚ã€‚</span></span><br><span class="line"><span class="comment"># print(x.shape)</span></span><br><span class="line">x = self.shallow_conv(x) <span class="comment"># é€šé“æ•°ä¼šå˜æˆ8 å³ [32, 8, 224, 224]ï¼Œbatch_sizeä¸º1</span></span><br><span class="line">x = x.view(<span class="number">-1</span>, self.n_length, x.size(<span class="number">-3</span>), x.size(<span class="number">-2</span>)*x.size(<span class="number">-1</span>)) <span class="comment"># n_length = data_length = 4ï¼Œ4å¼ å›¾ [1*8, 4, 8, 50176] ç¬¬ä¸€ä¸ª8æ˜¯segment</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(self.n_length<span class="number">-1</span>):</span><br><span class="line">d_i = nn.PairwiseDistance(p=<span class="number">2</span>)(x[:,i,:,:], x[:,i+<span class="number">1</span>,:,:]).unsqueeze(<span class="number">1</span>)</span><br><span class="line">d = d_i <span class="keyword">if</span> i == <span class="number">0</span> <span class="keyword">else</span> torch.cat((d, d_i), <span class="number">1</span>)</span><br><span class="line">PA = d.view(<span class="number">-1</span>, <span class="number">1</span>*(self.n_length<span class="number">-1</span>), h, w)</span><br><span class="line"><span class="comment"># print(PA.shape) PA:(batch_size*segment,m-1,h,w)</span></span><br><span class="line"><span class="keyword">return</span> PA</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">VAP</span><span class="params">(nn.Module)</span>:</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, n_segment, feature_dim, num_class, dropout_ratio)</span>:</span></span><br><span class="line">super(VAP, self).__init__() <span class="comment"># feature_dim = 2048</span></span><br><span class="line">VAP_level = int(math.log(n_segment, <span class="number">2</span>)) <span class="comment"># è¿™ä¸ªå°±æ˜¯3çº§ </span></span><br><span class="line">print(<span class="string">"=&gt; Using &#123;&#125;-level VAP"</span>.format(VAP_level))</span><br><span class="line">self.n_segment = n_segment <span class="comment"># 8ç‰‡</span></span><br><span class="line">self.VAP_level = VAP_level</span><br><span class="line">total_timescale = <span class="number">0</span></span><br><span class="line"><span class="comment"># for i in range(VAP_level):</span></span><br><span class="line"><span class="comment">#    timescale = 2**i</span></span><br><span class="line"><span class="comment">#    total_timescale += timescale</span></span><br><span class="line"><span class="comment">#    # https://pytorch-cn.readthedocs.io/zh/latest/package_references/torch-nn/#_2</span></span><br><span class="line"><span class="comment">#    setattr(self, "VAP_&#123;&#125;".format(timescale), nn.MaxPool3d((n_segment//timescale,1,1),1,0,(timescale,1,1)))</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(VAP_level):</span><br><span class="line">   timescale = <span class="number">2</span>**i</span><br><span class="line">   total_timescale += timescale</span><br><span class="line">   <span class="comment"># https://pytorch-cn.readthedocs.io/zh/latest/package_references/torch-nn/#_2</span></span><br><span class="line">   setattr(self, <span class="string">"VAP_&#123;&#125;"</span>.format(timescale), nn.MaxPool1d(n_segment//timescale,<span class="number">1</span>,<span class="number">0</span>,timescale)) <span class="comment"># TODO å¹³å‡æ± åŒ–</span></span><br><span class="line">self.GAP = nn.AdaptiveAvgPool1d(<span class="number">1</span>)</span><br><span class="line">self.TES = nn.Sequential(</span><br><span class="line">nn.Linear(total_timescale, total_timescale*<span class="number">4</span>, bias=<span class="literal">False</span>),</span><br><span class="line">nn.ReLU(inplace=<span class="literal">True</span>),</span><br><span class="line">nn.Linear(total_timescale*<span class="number">4</span>, total_timescale, bias=<span class="literal">False</span>)</span><br><span class="line">)</span><br><span class="line">self.softmax = nn.Softmax(dim=<span class="number">1</span>)</span><br><span class="line">self.dropout = nn.Dropout(p=dropout_ratio)</span><br><span class="line">self.pred = nn.Linear(feature_dim, num_class)</span><br><span class="line"></span><br><span class="line"><span class="comment"># fc init</span></span><br><span class="line"><span class="keyword">for</span> m <span class="keyword">in</span> self.modules():</span><br><span class="line"><span class="keyword">if</span> isinstance(m, nn.Linear):</span><br><span class="line">nn.init.normal_(m.weight.data, <span class="number">0</span>, <span class="number">0.001</span>)</span><br><span class="line"><span class="keyword">if</span> hasattr(m.bias, <span class="string">'data'</span>):</span><br><span class="line">nn.init.constant_(m.bias.data, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">forward</span><span class="params">(self, x)</span>:</span></span><br><span class="line"><span class="comment"># print(x.shape) [8 , 2048] 8åº”è¯¥æ˜¯batch_size * segment ç½‘ç»œé™¤å…¨è¿æ¥å¤–çš„æœ€åä¸€å±‚è¾“å‡ºï¼Œä»¥ä¸‹éƒ½ä»¥ResNet50ä¸ºä¾‹å­</span></span><br><span class="line">_, d = x.size() <span class="comment"># d = 2048</span></span><br><span class="line"><span class="comment"># x = x.view(-1, self.n_segment, d, 1, 1).permute(0,2,1,3,4) # æŠŠ ç‰¹å¾ç»´åº¦å’Œsegmentç»´åº¦è°ƒæ¢äº†ä¸€ä¸‹é¡ºåºï¼Œé¡ºä¾¿åŠ äº†ä¸¤ä¸ªç»´åº¦ï¼Œ1 -&gt; 1*1*1</span></span><br><span class="line"><span class="comment"># xç°åœ¨æ˜¯ [batch_size,2048,segment,1,1]</span></span><br><span class="line"><span class="comment"># https://www.runoob.com/python/att-tuple-tuple.html tuple()æ–¹æ³•ä»‹ç»ï¼Œå°±æ˜¯ä¸ªæ•°ç»„åˆå¹¶æˆå…ƒç»„çš„æ–¹æ³•</span></span><br><span class="line"><span class="comment"># torch.cat(tuple(),2)å°±æ˜¯æŒ‰ç…§ç¬¬ä¸‰ä¸ªç»´åº¦åˆå¹¶ï¼ˆ0æ˜¯ç¬¬ä¸€ä¸ªç»´åº¦ï¼‰</span></span><br><span class="line"><span class="comment"># ä¸¤ä¸ª.squeeze(3)å°±æ˜¯æŠŠä¹‹å‰çš„åŠ çš„ä¸¤ä¸ªç»´åº¦ç»™è¿˜åŸå›å»ï¼Œç„¶åå†æŠŠè°ƒæ¢çš„ç»´åº¦è¿˜åŸå›æ¥</span></span><br><span class="line"><span class="comment"># x = torch.cat(tuple([getattr(self, "VAP_&#123;&#125;".format(2**i))(x) for i in range(self.VAP_level)]), 2).squeeze(3).squeeze(3).permute(0,2,1)</span></span><br><span class="line"><span class="comment"># x å˜æˆäº† [batch_size,7,2048]</span></span><br><span class="line"></span><br><span class="line">x = x.view(<span class="number">-1</span>, self.n_segment, d).permute(<span class="number">0</span>,<span class="number">2</span>,<span class="number">1</span>) <span class="comment">#TODO è¿™é‡Œå¯ä»¥è¯•è¯•15ç»´</span></span><br><span class="line">x = torch.cat(tuple([getattr(self, <span class="string">"VAP_&#123;&#125;"</span>.format(<span class="number">2</span>**i))(x) <span class="keyword">for</span> i <span class="keyword">in</span> range(self.VAP_level)]),<span class="number">2</span>).permute(<span class="number">0</span>,<span class="number">2</span>,<span class="number">1</span>)</span><br><span class="line">w = self.GAP(x).squeeze(<span class="number">2</span>) <span class="comment"># ä¸€ä¸ªæ±‚å’Œå¹³å‡ï¼Œåœ¨7è¿™ä¸ªç»´åº¦ä¸Šçš„</span></span><br><span class="line"><span class="comment"># w = [batch_size,7]</span></span><br><span class="line">w = self.softmax(self.TES(w)) <span class="comment"># è¿™ä¸ªTESæ˜¯å¯å­¦ä¹ çš„</span></span><br><span class="line">x = x * w.unsqueeze(<span class="number">2</span>)</span><br><span class="line">x = x.sum(dim=<span class="number">1</span>)</span><br><span class="line">x = self.dropout(x)</span><br><span class="line">x = self.pred(x.view(<span class="number">-1</span>,d))</span><br><span class="line"><span class="keyword">return</span> x</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¡Œä¸ºè¯†åˆ« </tag>
            
            <tag> action recognition </tag>
            
            <tag> pan </tag>
            
            <tag> pa </tag>
            
            <tag> vap </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‘¨æŠ¥-20201015</title>
      <link href="/blog/2020/10/15/weekly-report-20201015/"/>
      <url>/blog/2020/10/15/weekly-report-20201015/</url>
      
        <content type="html"><![CDATA[<center ondblclick="javascript:document.getElementsByTagName('header')[0].remove();document.getElementsByTagName('header')[0].remove();document.getElementsByTagName('footer')[0].remove();document.getElementsByTagName('footer')[0].remove();document.getElementById('comments').remove();document.getElementById('back-to-top').remove();document.getElementById('post-toc').remove();"><table><thead><tr><th style="text-align:center">2020-10-15</th><th style="text-align:center">å‘¨æŠ¥#08</th><th style="text-align:center">åˆ˜æ½˜</th></tr></thead><tbody></tbody></table></center><a id="more"></a><h1 id="i-task-achieved-last-week"><a class="header-anchor" href="#i-task-achieved-last-week">#</a>I. Task achieved last week</h1><hr><ul><li>äº†è§£äº†ä¸€ä¸‹<code>ResNet50</code>çš„ç»“æ„ï¼Œä»¥åŠTSMè¿›è¡Œ<code>shift</code>çš„ä»£ç ç»†èŠ‚ã€‚</li><li>é˜…è¯»äº†ã€ŠTEA: Temporal Excitation and Aggregation for Action Recognitionã€‹çš„æºç ï¼Œäº†è§£äº†ç›¸å…³æ”¹è¿›ç»†èŠ‚ï¼Œ<code>ME</code>æ¨¡å—å’Œ<code>MTA</code>æ¨¡å—ã€‚</li><li>éªŒè¯çŒœæƒ³çš„æœ‰æ•ˆæ€§ã€‚</li></ul><h1 id="ii-reports"><a class="header-anchor" href="#ii-reports">#</a>II. Reports</h1><hr><p><code>ResNet50</code>æ¨¡å‹ç»“æ„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br></pre></td><td class="code"><pre><span class="line">ResNet(</span><br><span class="line">  (conv1): Conv2d(3, 64, kernel_size&#x3D;(7, 7), stride&#x3D;(2, 2), padding&#x3D;(3, 3), bias&#x3D;False)</span><br><span class="line">  (bn1): BatchNorm2d(64, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (relu): ReLU(inplace)</span><br><span class="line">  (maxpool): MaxPool2d(kernel_size&#x3D;3, stride&#x3D;2, padding&#x3D;1, dilation&#x3D;1, ceil_mode&#x3D;False)</span><br><span class="line">  (layer1): Sequential(</span><br><span class="line">(0): Bottleneck(</span><br><span class="line">  (conv1): Conv2d(64, 64, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn1): BatchNorm2d(64, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv2): Conv2d(64, 64, kernel_size&#x3D;(3, 3), stride&#x3D;(1, 1), padding&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn2): BatchNorm2d(64, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv3): Conv2d(64, 256, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn3): BatchNorm2d(256, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (relu): ReLU(inplace)</span><br><span class="line">  (downsample): Sequential(</span><br><span class="line">(0): Conv2d(64, 256, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">(1): BatchNorm2d(256, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  )</span><br><span class="line">)</span><br><span class="line">(1): Bottleneck(</span><br><span class="line">  (conv1): Conv2d(256, 64, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn1): BatchNorm2d(64, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv2): Conv2d(64, 64, kernel_size&#x3D;(3, 3), stride&#x3D;(1, 1), padding&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn2): BatchNorm2d(64, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv3): Conv2d(64, 256, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn3): BatchNorm2d(256, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (relu): ReLU(inplace)</span><br><span class="line">)</span><br><span class="line">(2): Bottleneck(</span><br><span class="line">  (conv1): Conv2d(256, 64, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn1): BatchNorm2d(64, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv2): Conv2d(64, 64, kernel_size&#x3D;(3, 3), stride&#x3D;(1, 1), padding&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn2): BatchNorm2d(64, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv3): Conv2d(64, 256, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn3): BatchNorm2d(256, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (relu): ReLU(inplace)</span><br><span class="line">)</span><br><span class="line">  )</span><br><span class="line">  (layer2): Sequential(</span><br><span class="line">(0): Bottleneck(</span><br><span class="line">  (conv1): Conv2d(256, 128, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn1): BatchNorm2d(128, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv2): Conv2d(128, 128, kernel_size&#x3D;(3, 3), stride&#x3D;(2, 2), padding&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn2): BatchNorm2d(128, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv3): Conv2d(128, 512, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn3): BatchNorm2d(512, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (relu): ReLU(inplace)</span><br><span class="line">  (downsample): Sequential(</span><br><span class="line">(0): Conv2d(256, 512, kernel_size&#x3D;(1, 1), stride&#x3D;(2, 2), bias&#x3D;False)</span><br><span class="line">(1): BatchNorm2d(512, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  )</span><br><span class="line">)</span><br><span class="line">(1): Bottleneck(</span><br><span class="line">  (conv1): Conv2d(512, 128, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn1): BatchNorm2d(128, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv2): Conv2d(128, 128, kernel_size&#x3D;(3, 3), stride&#x3D;(1, 1), padding&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn2): BatchNorm2d(128, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv3): Conv2d(128, 512, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn3): BatchNorm2d(512, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (relu): ReLU(inplace)</span><br><span class="line">)</span><br><span class="line">(2): Bottleneck(</span><br><span class="line">  (conv1): Conv2d(512, 128, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn1): BatchNorm2d(128, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv2): Conv2d(128, 128, kernel_size&#x3D;(3, 3), stride&#x3D;(1, 1), padding&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn2): BatchNorm2d(128, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv3): Conv2d(128, 512, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn3): BatchNorm2d(512, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (relu): ReLU(inplace)</span><br><span class="line">)</span><br><span class="line">(3): Bottleneck(</span><br><span class="line">  (conv1): Conv2d(512, 128, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn1): BatchNorm2d(128, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv2): Conv2d(128, 128, kernel_size&#x3D;(3, 3), stride&#x3D;(1, 1), padding&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn2): BatchNorm2d(128, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv3): Conv2d(128, 512, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn3): BatchNorm2d(512, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (relu): ReLU(inplace)</span><br><span class="line">)</span><br><span class="line">  )</span><br><span class="line">  (layer3): Sequential(</span><br><span class="line">(0): Bottleneck(</span><br><span class="line">  (conv1): Conv2d(512, 256, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn1): BatchNorm2d(256, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv2): Conv2d(256, 256, kernel_size&#x3D;(3, 3), stride&#x3D;(2, 2), padding&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn2): BatchNorm2d(256, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv3): Conv2d(256, 1024, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn3): BatchNorm2d(1024, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (relu): ReLU(inplace)</span><br><span class="line">  (downsample): Sequential(</span><br><span class="line">(0): Conv2d(512, 1024, kernel_size&#x3D;(1, 1), stride&#x3D;(2, 2), bias&#x3D;False)</span><br><span class="line">(1): BatchNorm2d(1024, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  )</span><br><span class="line">)</span><br><span class="line">(1): Bottleneck(</span><br><span class="line">  (conv1): Conv2d(1024, 256, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn1): BatchNorm2d(256, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv2): Conv2d(256, 256, kernel_size&#x3D;(3, 3), stride&#x3D;(1, 1), padding&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn2): BatchNorm2d(256, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv3): Conv2d(256, 1024, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn3): BatchNorm2d(1024, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (relu): ReLU(inplace)</span><br><span class="line">)</span><br><span class="line">(2): Bottleneck(</span><br><span class="line">  (conv1): Conv2d(1024, 256, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn1): BatchNorm2d(256, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv2): Conv2d(256, 256, kernel_size&#x3D;(3, 3), stride&#x3D;(1, 1), padding&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn2): BatchNorm2d(256, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv3): Conv2d(256, 1024, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn3): BatchNorm2d(1024, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (relu): ReLU(inplace)</span><br><span class="line">)</span><br><span class="line">(3): Bottleneck(</span><br><span class="line">  (conv1): Conv2d(1024, 256, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn1): BatchNorm2d(256, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv2): Conv2d(256, 256, kernel_size&#x3D;(3, 3), stride&#x3D;(1, 1), padding&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn2): BatchNorm2d(256, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv3): Conv2d(256, 1024, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn3): BatchNorm2d(1024, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (relu): ReLU(inplace)</span><br><span class="line">)</span><br><span class="line">(4): Bottleneck(</span><br><span class="line">  (conv1): Conv2d(1024, 256, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn1): BatchNorm2d(256, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv2): Conv2d(256, 256, kernel_size&#x3D;(3, 3), stride&#x3D;(1, 1), padding&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn2): BatchNorm2d(256, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv3): Conv2d(256, 1024, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn3): BatchNorm2d(1024, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (relu): ReLU(inplace)</span><br><span class="line">)</span><br><span class="line">(5): Bottleneck(</span><br><span class="line">  (conv1): Conv2d(1024, 256, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn1): BatchNorm2d(256, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv2): Conv2d(256, 256, kernel_size&#x3D;(3, 3), stride&#x3D;(1, 1), padding&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn2): BatchNorm2d(256, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv3): Conv2d(256, 1024, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn3): BatchNorm2d(1024, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (relu): ReLU(inplace)</span><br><span class="line">)</span><br><span class="line">  )</span><br><span class="line">  (layer4): Sequential(</span><br><span class="line">(0): Bottleneck(</span><br><span class="line">  (conv1): Conv2d(1024, 512, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn1): BatchNorm2d(512, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv2): Conv2d(512, 512, kernel_size&#x3D;(3, 3), stride&#x3D;(2, 2), padding&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn2): BatchNorm2d(512, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv3): Conv2d(512, 2048, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn3): BatchNorm2d(2048, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (relu): ReLU(inplace)</span><br><span class="line">  (downsample): Sequential(</span><br><span class="line">(0): Conv2d(1024, 2048, kernel_size&#x3D;(1, 1), stride&#x3D;(2, 2), bias&#x3D;False)</span><br><span class="line">(1): BatchNorm2d(2048, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  )</span><br><span class="line">)</span><br><span class="line">(1): Bottleneck(</span><br><span class="line">  (conv1): Conv2d(2048, 512, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn1): BatchNorm2d(512, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv2): Conv2d(512, 512, kernel_size&#x3D;(3, 3), stride&#x3D;(1, 1), padding&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn2): BatchNorm2d(512, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv3): Conv2d(512, 2048, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn3): BatchNorm2d(2048, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (relu): ReLU(inplace)</span><br><span class="line">)</span><br><span class="line">(2): Bottleneck(</span><br><span class="line">  (conv1): Conv2d(2048, 512, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn1): BatchNorm2d(512, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv2): Conv2d(512, 512, kernel_size&#x3D;(3, 3), stride&#x3D;(1, 1), padding&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn2): BatchNorm2d(512, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv3): Conv2d(512, 2048, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn3): BatchNorm2d(2048, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (relu): ReLU(inplace)</span><br><span class="line">)</span><br><span class="line">  )</span><br><span class="line">  (avgpool): AdaptiveAvgPool2d(output_size&#x3D;(1, 1))</span><br><span class="line">  (fc): Linear(in_features&#x3D;2048, out_features&#x3D;1000, bias&#x3D;True)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">make_temporal_shift</span><span class="params">(net, n_segment, n_div=<span class="number">8</span>, place=<span class="string">'blockres'</span>, temporal_pool=False)</span>:</span></span><br><span class="line"><span class="keyword">if</span> temporal_pool:</span><br><span class="line">n_segment_list = [n_segment, n_segment // <span class="number">2</span>, n_segment // <span class="number">2</span>, n_segment // <span class="number">2</span>]</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">n_segment_list = [n_segment] * <span class="number">4</span></span><br><span class="line"><span class="keyword">assert</span> n_segment_list[<span class="number">-1</span>] &gt; <span class="number">0</span></span><br><span class="line"><span class="comment">#print('=&gt; n_segment per stage: &#123;&#125;'.format(n_segment_list))</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> torchvision</span><br><span class="line"><span class="keyword">if</span> isinstance(net, torchvision.models.ResNet):</span><br><span class="line"><span class="keyword">if</span> place == <span class="string">'block'</span>:</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">make_block_temporal</span><span class="params">(stage, this_segment)</span>:</span></span><br><span class="line">blocks = list(stage.children())</span><br><span class="line"><span class="comment">#print('=&gt; Processing stage with &#123;&#125; blocks'.format(len(blocks)))</span></span><br><span class="line"><span class="keyword">for</span> i, b <span class="keyword">in</span> enumerate(blocks):</span><br><span class="line">blocks[i] = TemporalShift(b, n_segment=this_segment, n_div=n_div)</span><br><span class="line"><span class="keyword">return</span> nn.Sequential(*(blocks))</span><br><span class="line"></span><br><span class="line">net.layer1 = make_block_temporal(net.layer1, n_segment_list[<span class="number">0</span>])</span><br><span class="line">net.layer2 = make_block_temporal(net.layer2, n_segment_list[<span class="number">1</span>])</span><br><span class="line">net.layer3 = make_block_temporal(net.layer3, n_segment_list[<span class="number">2</span>])</span><br><span class="line">net.layer4 = make_block_temporal(net.layer4, n_segment_list[<span class="number">3</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">elif</span> <span class="string">'blockres'</span> <span class="keyword">in</span> place:</span><br><span class="line">n_round = <span class="number">1</span></span><br><span class="line"><span class="keyword">if</span> len(list(net.layer3.children())) &gt;= <span class="number">23</span>: <span class="comment"># å¦‚æœæ˜¯ResNet101çš„è¯ï¼Œå°±æ¯ä¸¤è½®é‡‡ä¸€æ¬¡</span></span><br><span class="line">n_round = <span class="number">2</span></span><br><span class="line"><span class="comment">#print('=&gt; Using n_round &#123;&#125; to insert temporal shift'.format(n_round))</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">make_block_temporal</span><span class="params">(stage, this_segment)</span>:</span></span><br><span class="line">blocks = list(stage.children())</span><br><span class="line"><span class="comment">#print('=&gt; Processing stage with &#123;&#125; blocks residual'.format(len(blocks)))</span></span><br><span class="line"><span class="keyword">for</span> i, b <span class="keyword">in</span> enumerate(blocks):</span><br><span class="line"><span class="keyword">if</span> i % n_round == <span class="number">0</span>:</span><br><span class="line">blocks[i].conv1 = TemporalShift(b.conv1, n_segment=this_segment, n_div=n_div)</span><br><span class="line"><span class="keyword">return</span> nn.Sequential(*blocks)</span><br><span class="line"></span><br><span class="line">net.layer1 = make_block_temporal(net.layer1, n_segment_list[<span class="number">0</span>])</span><br><span class="line">net.layer2 = make_block_temporal(net.layer2, n_segment_list[<span class="number">1</span>])</span><br><span class="line">net.layer3 = make_block_temporal(net.layer3, n_segment_list[<span class="number">2</span>])</span><br><span class="line">net.layer4 = make_block_temporal(net.layer4, n_segment_list[<span class="number">3</span>])</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"><span class="keyword">raise</span> NotImplementedError(place)</span><br></pre></td></tr></table></figure><p>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯å¯¹æ¯ä¸€å±‚çš„ç¬¬ä¸€ä¸ªå·ç§¯æ“ä½œä¹‹å‰ï¼Œè¿›è¡Œ<code>shift</code>æ“ä½œã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@staticmethod</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">shift</span><span class="params">(x, n_segment, fold_div=<span class="number">3</span>, inplace=False)</span>:</span></span><br><span class="line">nt, c, h, w = x.size()</span><br><span class="line">n_batch = nt // n_segment</span><br><span class="line">x = x.view(n_batch, n_segment, c, h, w)</span><br><span class="line"></span><br><span class="line">fold = c // fold_div <span class="comment"># fold_div ä¸º 8ï¼Œè®ºæ–‡ä¸­è¯´ä»–ä»¬æµ‹è¯•å‘ç°1/4çš„shiftï¼Œå³å·¦1/8å’Œå³1/8æ•ˆæœæœ€å¥½</span></span><br><span class="line"><span class="keyword">if</span> inplace:</span><br><span class="line"><span class="comment"># Due to some out of order error when performing parallel computing. </span></span><br><span class="line"><span class="comment"># May need to write a CUDA kernel.</span></span><br><span class="line"><span class="keyword">raise</span> NotImplementedError  </span><br><span class="line"><span class="comment"># out = InplaceShift.apply(x, fold)</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">out = torch.zeros_like(x) <span class="comment"># ç”Ÿæˆä¸€ä¸ªå’Œxç»´åº¦ä¿¡æ¯ä¸€æ ·ï¼Œä½†æ˜¯å…¨æ˜¯0çš„æ•°ç»„</span></span><br><span class="line"><span class="comment"># å‡è®¾åŸæ¥æ˜¯ [1,2,3,4,5,6,7,8]</span></span><br><span class="line"></span><br><span class="line">out[:, :<span class="number">-1</span>, :fold] = x[:, <span class="number">1</span>:, :fold]  <span class="comment"># shift left</span></span><br><span class="line"><span class="comment"># å˜æˆäº† [2,3,4,5,6,7,8,0]</span></span><br><span class="line"></span><br><span class="line">out[:, <span class="number">1</span>:, fold: <span class="number">2</span> * fold] = x[:, :<span class="number">-1</span>, fold: <span class="number">2</span> * fold]  <span class="comment"># shift right</span></span><br><span class="line"><span class="comment"># å˜æˆäº† [0,1,2,3,4,5,6,7]</span></span><br><span class="line"></span><br><span class="line">out[:, :, <span class="number">2</span> * fold:] = x[:, :, <span class="number">2</span> * fold:]  <span class="comment"># not shift</span></span><br><span class="line"><span class="comment"># å…¶ä½™çš„ä¸å‘ç”Ÿå˜åŒ–</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> out.view(nt, c, h, w)</span><br></pre></td></tr></table></figure><p>å¯¹é€šé“è¿›è¡Œåˆ†ç‰‡ï¼Œå‰<code>1/8</code>çš„é€šé“å·¦ç§»ï¼Œå†<code>1/8</code>çš„é€šé“å³ç§»ï¼Œå‰©ä½™çš„ä¿æŒä¸å˜ã€‚</p><h2 id="tea-temporal-excitation-and-aggregation-for-action-recognition"><a class="header-anchor" href="#tea-temporal-excitation-and-aggregation-for-action-recognition">#</a>TEA: Temporal Excitation and Aggregation for Action Recognition</h2><h3 id="motion-excitation-me"><a class="header-anchor" href="#motion-excitation-me">#</a>motion excitation(ME)</h3><p>è§£å†³çš„é—®é¢˜æ˜¯ï¼š<code>short-range motion encoding</code>ã€‚</p><p>ä¹‹å‰çš„å·¥ä½œä¸€èˆ¬éƒ½æ˜¯åƒç´ çº§çš„è¿åŠ¨è¡¨ç°ç‰¹å¾ï¼Œæ¯”å¦‚<code>å…‰æµ</code>ï¼Œè®ºæ–‡ä»<code>feature</code>å±‚é¢ä¸Šè¿›è¡Œäº†è¿åŠ¨å»ºæ¨¡ã€‚</p><p>ä¸åŒçš„é€šé“å¯èƒ½ä¼šå¯¹ä¸åŒçš„æ¶ˆæ¯æ•æ„Ÿï¼Œæä¾›æ¨¡å‹è‡ªèº«çš„è¿åŠ¨æ•æ„Ÿä¿¡æ¯æ•æ‰èƒ½åŠ›ååˆ†é‡è¦ã€‚</p><blockquote><p>The intuition of the proposed ME module is that, among all feature channels, different channels would capture distinct information.<br>For action recognition, it is beneficia to enable the model to discover and then enhance these motion-sensitive channels.</p></blockquote><p>ç»™å®šè¾“å…¥ï¼š</p><p>$$<br>\mathbf{X} \in \mathbb{R}^{N \times T \times C \times H \times W}<br>$$</p><ol><li>é¦–å…ˆè¿›è¡Œé€šé“æ•°é™ä½ï¼Œæ¥å‡å°‘è®¡ç®—é‡ï¼š</li></ol><p>$$<br>\mathbf{X}^r = \mathrm{conv}_\mathit{red} * \mathbf{X}, \quad \mathbf{X}^r \in \mathbb{R}^{N \times T \times C/r \times H \times W}<br>$$</p><ol start="2"><li>ç„¶åæ ¹æ®<code>æ—¶é—´åˆ†ç‰‡</code>è¿›è¡Œè¿åŠ¨ç‰¹å¾çš„è¡¨å¾ï¼Œè¡¨å¾å°±æ˜¯ç‰¹å¾å±‚ç›¸å‡çš„å·®å€¼ï¼Œä¸è¿‡åœ¨è¿›è¡Œè½¬æ¢ä¹‹å‰å…ˆè¿›è¡Œäº†å·ç§¯æ“ä½œï¼Œå¾—åˆ°çš„$\mathbf{M}(t)$å°±æ˜¯$t$æ—¶åˆ»çš„è¿åŠ¨ç‰¹å¾ï¼Œç„¶è§„å®š$\mathbf{M}(t) = 0$ï¼š</li></ol><p>$$<br>\mathbf{M}(t) = \mathrm{conv}_\mathit{trans} * \mathbf{X}^r(t+1) - \mathbf{X}^r(t), 1 \leq t \leq T-1, \mathbf{M}(t) \in \mathcal{R}^{N \times C/r \times H \times W}<br>$$</p><ol start="3"><li>å…¨å±€å¹³å‡æ± åŒ–æ“ä½œï¼ŒæŠŠç©ºé—´ä¿¡æ¯è¿›è¡Œæ€»ç»“ï¼Œå› ä¸ºè¿™é‡Œæ˜¯è¦å¯¹é‚£äº›<code>è¿åŠ¨æ•æ„Ÿ</code>çš„é€šé“è¿›è¡Œæ¿€æ´»ï¼Œæ‰€ä»¥ç©ºé—´ä¿¡æ¯å¹¶ä¸æ˜¯å¾ˆé‡è¦ï¼š</li></ol><p>$$<br>\mathbf{M}^{s} = \mathrm{Pool}(\mathbf{M}), \quad \mathbf{M}^{s} \in \mathbb{R}^{N \times T \times C/r \times 1 \times 1}<br>$$</p><ol start="4"><li>æ¢å¤é€šé“æ•°è‡³åˆå§‹ï¼Œé€šè¿‡$Sigmoid$å‡½æ•°è¿›è¡Œæ¿€æ´»ï¼š</li></ol><p>$$<br>\mathbf{A} = 2\delta( \mathrm{conv}_\mathit{exp} * \mathbf{M}^s)-1, \quad \mathbf{A} \in \mathbb{R}^{N \times T \times C \times 1 \times 1}<br>$$</p><ol start="5"><li>ç„¶åæŠŠæƒé‡$\mathbf{A}$ä¹˜åˆ°è¾“å…¥ä¸Šï¼Œå°±èƒ½å¤Ÿå¯¹åŠ¨ä½œè¿›è¡Œè¡¨å¾ã€‚ä½†æ˜¯ä¼šå¯¹ä¸€äº›èƒŒæ™¯ä¿¡æ¯è¿›è¡ŒæŠ‘åˆ¶ï¼Œæ‰€ä»¥ç”¨ä¸€ç§æ®‹å·®ç»“æ„ï¼Œæ¥ä¿®æ­£å½±å“ï¼š</li></ol><blockquote><p>such an approach will suppress the static background scene information, which is also beneficial for action recognition.<br>we propose to adopt a <em>residual</em> connection to enhance motion information meanwhile preserve scene information.</p></blockquote><p>$$<br>\mathbf{X}^{o} = \mathbf{X} + \mathbf{X} \odot \mathbf{A}, \quad \mathbf{X}^{o} \in \mathbb{R}^{N \times T \times C \times H \times W}<br>$$</p><h3 id="multiple-temporal-aggregation-mta"><a class="header-anchor" href="#multiple-temporal-aggregation-mta">#</a>Multiple Temporal Aggregation(MTA)</h3><p>è¿™ä¸ªæ¨¡å—çš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†å¢å¤§æ—¶é—´ç»´åº¦çš„æ„Ÿå—é‡ï¼ŒåŸç†çœ‹èµ·æ¥å¾ˆé€šä¿—æ˜“æ‡‚ï¼š</p>$$\begin{array}{lr}\mathbf{X}^o_i = \mathbf{X}_i, & i=1 \\\mathbf{X}^o_i = \mathrm{conv}_{\mathit{spa}}* ( \mathrm{conv}_{\mathit{temp}} * \mathbf{X}_i), & i=2 \\\mathbf{X}^o_i = \mathrm{conv}_{\mathit{spa}}* ( \mathrm{conv}_{\mathit{temp}} * ( \mathbf{X}_i + \mathbf{X}^o_{i-1} ) ), & i=3,4 \\\end{array}$$<p>å³ï¼š</p>$$\begin{array}{lr}\mathbf{X}^o_1 = \mathbf{X}_1\\\mathbf{X}^o_2 = \mathrm{conv}_{\mathit{spa}}* ( \mathrm{conv}_{\mathit{temp}} * \mathbf{X}_1) \\\mathbf{X}^o_3 = \mathrm{conv}_{\mathit{spa}}* ( \mathrm{conv}_{\mathit{temp}} * ( \mathbf{X}_3 + \mathbf{X}^o_2 ) ) \\\mathbf{X}^o_4 = \mathrm{conv}_{\mathit{spa}}* ( \mathrm{conv}_{\mathit{temp}} * ( \mathbf{X}_4 + \mathbf{X}^o_3 ) ) \\\end{array}$$<p>è¿™ä¸ªæ“ä½œéœ€è¦å¯¹$\mathbf{X}$è¿›è¡Œå¤„ç†ï¼Œä»$\left[ N,T,C,H,W\right]$å˜æ¢åˆ°$\left[ NHW, C, T\right]$ã€‚</p></center><h1 id="iii-plan-for-this-week"><a class="header-anchor" href="#iii-plan-for-this-week">#</a>III. Plan for this week</h1><hr><ul><li>å¯èƒ½éœ€è¦å’Œè€å¸ˆæ²Ÿé€šä¸€ä¸‹ï¼Œç¡®å®šä¸€ä¸‹æ¥ä¸‹æ¥çš„ç ”ç©¶è®¡åˆ’ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lab406 </tag>
            
            <tag> weekly report </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TEAå®ç°ç»†èŠ‚</title>
      <link href="/blog/2020/10/13/tea-details/"/>
      <url>/blog/2020/10/13/tea-details/</url>
      
        <content type="html"><![CDATA[<h2 id="tea-temporal-excitation-and-aggregation-for-action-recognition"><a class="header-anchor" href="#tea-temporal-excitation-and-aggregation-for-action-recognition">#</a>TEA: Temporal Excitation and Aggregation for Action Recognition</h2><a id="more"></a><h3 id="motion-excitation-me"><a class="header-anchor" href="#motion-excitation-me">#</a>motion excitation(ME)</h3><p>è§£å†³çš„é—®é¢˜æ˜¯ï¼š<code>short-range motion encoding</code>ã€‚</p><p>ä¹‹å‰çš„å·¥ä½œä¸€èˆ¬éƒ½æ˜¯åƒç´ çº§çš„è¿åŠ¨è¡¨ç°ç‰¹å¾ï¼Œæ¯”å¦‚<code>å…‰æµ</code>ï¼Œè®ºæ–‡ä»<code>feature</code>å±‚é¢ä¸Šè¿›è¡Œäº†è¿åŠ¨å»ºæ¨¡ã€‚</p><p>ä¸åŒçš„é€šé“å¯èƒ½ä¼šå¯¹ä¸åŒçš„æ¶ˆæ¯æ•æ„Ÿï¼Œæä¾›æ¨¡å‹è‡ªèº«çš„è¿åŠ¨æ•æ„Ÿä¿¡æ¯æ•æ‰èƒ½åŠ›ååˆ†é‡è¦ã€‚</p><blockquote><p>The intuition of the proposed ME module is that, among all feature channels, different channels would capture distinct information.<br>For action recognition, it is beneficia to enable the model to discover and then enhance these motion-sensitive channels.</p></blockquote><p>ç»™å®šè¾“å…¥ï¼š</p><p>$$<br>\mathbf{X} \in \mathbb{R}^{N \times T \times C \times H \times W}<br>$$</p><ol><li>é¦–å…ˆè¿›è¡Œé€šé“æ•°é™ä½ï¼Œæ¥å‡å°‘è®¡ç®—é‡ï¼š</li></ol><p>$$<br>\mathbf{X}^r = \mathrm{conv}_\mathit{red} * \mathbf{X}, \quad \mathbf{X}^r \in \mathbb{R}^{N \times T \times C/r \times H \times W}<br>$$</p><ol start="2"><li>ç„¶åæ ¹æ®<code>æ—¶é—´åˆ†ç‰‡</code>è¿›è¡Œè¿åŠ¨ç‰¹å¾çš„è¡¨å¾ï¼Œè¡¨å¾å°±æ˜¯ç‰¹å¾å±‚ç›¸å‡çš„å·®å€¼ï¼Œä¸è¿‡åœ¨è¿›è¡Œè½¬æ¢ä¹‹å‰å…ˆè¿›è¡Œäº†å·ç§¯æ“ä½œï¼Œå¾—åˆ°çš„$\mathbf{M}(t)$å°±æ˜¯$t$æ—¶åˆ»çš„è¿åŠ¨ç‰¹å¾ï¼Œç„¶è§„å®š$\mathbf{M}(t) = 0$ï¼š</li></ol><p>$$<br>\mathbf{M}(t) = \mathrm{conv}_\mathit{trans} * \mathbf{X}^r(t+1) - \mathbf{X}^r(t), 1 \leq t \leq T-1, \mathbf{M}(t) \in \mathcal{R}^{N \times C/r \times H \times W}<br>$$</p><ol start="3"><li>å…¨å±€å¹³å‡æ± åŒ–æ“ä½œï¼ŒæŠŠç©ºé—´ä¿¡æ¯è¿›è¡Œæ€»ç»“ï¼Œå› ä¸ºè¿™é‡Œæ˜¯è¦å¯¹é‚£äº›<code>è¿åŠ¨æ•æ„Ÿ</code>çš„é€šé“è¿›è¡Œæ¿€æ´»ï¼Œæ‰€ä»¥ç©ºé—´ä¿¡æ¯å¹¶ä¸æ˜¯å¾ˆé‡è¦ï¼š</li></ol><p>$$<br>\mathbf{M}^{s} = \mathrm{Pool}(\mathbf{M}), \quad \mathbf{M}^{s} \in \mathbb{R}^{N \times T \times C/r \times 1 \times 1}<br>$$</p><ol start="4"><li>æ¢å¤é€šé“æ•°è‡³åˆå§‹ï¼Œé€šè¿‡$Sigmoid$å‡½æ•°è¿›è¡Œæ¿€æ´»ï¼š</li></ol><p>$$<br>\mathbf{A} = 2\delta( \mathrm{conv}_\mathit{exp} * \mathbf{M}^s)-1, \quad \mathbf{A} \in \mathbb{R}^{N \times T \times C \times 1 \times 1}<br>$$</p><ol start="5"><li>ç„¶åæŠŠæƒé‡$\mathbf{A}$ä¹˜åˆ°è¾“å…¥ä¸Šï¼Œå°±èƒ½å¤Ÿå¯¹åŠ¨ä½œè¿›è¡Œè¡¨å¾ã€‚ä½†æ˜¯ä¼šå¯¹ä¸€äº›èƒŒæ™¯ä¿¡æ¯è¿›è¡ŒæŠ‘åˆ¶ï¼Œæ‰€ä»¥ç”¨ä¸€ç§æ®‹å·®ç»“æ„ï¼Œæ¥ä¿®æ­£å½±å“ï¼š</li></ol><blockquote><p>such an approach will suppress the static background scene information, which is also beneficial for action recognition.<br>we propose to adopt a <em>residual</em> connection to enhance motion information meanwhile preserve scene information.</p></blockquote><p>$$<br>\mathbf{X}^{o} = \mathbf{X} + \mathbf{X} \odot \mathbf{A}, \quad \mathbf{X}^{o} \in \mathbb{R}^{N \times T \times C \times H \times W}<br>$$</p><h3 id="multiple-temporal-aggregation-mta"><a class="header-anchor" href="#multiple-temporal-aggregation-mta">#</a>Multiple Temporal Aggregation(MTA)</h3><p>è¿™ä¸ªæ¨¡å—çš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†å¢å¤§æ—¶é—´ç»´åº¦çš„æ„Ÿå—é‡ï¼ŒåŸç†çœ‹èµ·æ¥å¾ˆé€šä¿—æ˜“æ‡‚ï¼š</p>$$\begin{array}{lr}\mathbf{X}^o_i = \mathbf{X}_i, & i=1 \\\mathbf{X}^o_i = \mathrm{conv}_{\mathit{spa}}* ( \mathrm{conv}_{\mathit{temp}} * \mathbf{X}_i), & i=2 \\\mathbf{X}^o_i = \mathrm{conv}_{\mathit{spa}}* ( \mathrm{conv}_{\mathit{temp}} * ( \mathbf{X}_i + \mathbf{X}^o_{i-1} ) ), & i=3,4 \\\end{array}$$<p>å³ï¼š</p>$$\begin{array}{lr}\mathbf{X}^o_1 = \mathbf{X}_1\\\mathbf{X}^o_2 = \mathrm{conv}_{\mathit{spa}}* ( \mathrm{conv}_{\mathit{temp}} * \mathbf{X}_1) \\\mathbf{X}^o_3 = \mathrm{conv}_{\mathit{spa}}* ( \mathrm{conv}_{\mathit{temp}} * ( \mathbf{X}_3 + \mathbf{X}^o_2 ) ) \\\mathbf{X}^o_4 = \mathrm{conv}_{\mathit{spa}}* ( \mathrm{conv}_{\mathit{temp}} * ( \mathbf{X}_4 + \mathbf{X}^o_3 ) ) \\\end{array}$$<p>è¿™ä¸ªæ“ä½œéœ€è¦å¯¹$\mathbf{X}$è¿›è¡Œå¤„ç†ï¼Œä»$\left[ N,T,C,H,W\right]$å˜æ¢åˆ°$\left[ NHW, C, T\right]$ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¡Œä¸ºè¯†åˆ« </tag>
            
            <tag> action recognition </tag>
            
            <tag> tea </tag>
            
            <tag> me </tag>
            
            <tag> mta </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šå¿«ä¹çš„Linuxå‘½ä»¤è¡Œã€‹ç¬”è®°ï¼ˆ1ï¼‰</title>
      <link href="/blog/2020/10/12/the-linux-command-line-note-1/"/>
      <url>/blog/2020/10/12/the-linux-command-line-note-1/</url>
      
        <content type="html"><![CDATA[<h1 id="ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹"><a class="header-anchor" href="#ã€Šå¿«ä¹çš„-linux-å‘½ä»¤è¡Œã€‹">#</a>ã€Šå¿«ä¹çš„ Linux å‘½ä»¤è¡Œã€‹</h1><a id="more"></a><p>å¦‚æœæç¤ºç¬¦çš„æœ€åä¸€ä¸ªå­—ç¬¦æ˜¯<code>#</code>, è€Œä¸æ˜¯<code>$</code>, é‚£ä¹ˆè¿™ä¸ªç»ˆç«¯ä¼šè¯å°±æœ‰è¶…çº§ç”¨æˆ·æƒé™<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>ã€‚</p><p>è®¸å¤š<code>Linux</code>å‘è¡Œç‰ˆé»˜è®¤ä¿å­˜æœ€åè¾“å…¥çš„<code>500</code>ä¸ªå‘½ä»¤ï¼ˆå°±æ˜¯ä¸Šä¸‹é”®æ˜¾ç¤ºçš„é‚£äº›ï¼‰ã€‚</p><p>æ—¥å†å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ cal</span><br><span class="line">    October 2020</span><br><span class="line">Su Mo Tu We Th Fr Sa</span><br><span class="line">             1  2  3</span><br><span class="line"> 4  5  6  7  8  9 10</span><br><span class="line">11 12 13 14 15 16 17</span><br><span class="line">18 19 20 21 22 23 24</span><br><span class="line">25 26 27 28 29 30 31</span><br></pre></td></tr></table></figure><p><code>cd -</code>å‘½ä»¤å¯ä»¥æ›´æ”¹åˆ°ä¸Šä¸€ä¸ªå·¥ä½œè·¯å¾„ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">% <span class="built_in">cd</span> Documents/common/PAN-PyTorch</span><br><span class="line">onns@liupans-MacBook-Air PAN-PyTorch % <span class="built_in">pwd</span></span><br><span class="line">/Users/onns/Documents/common/PAN-PyTorch</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">onns@liupans-MacBook-Air PAN-PyTorch % <span class="built_in">cd</span> ~/Downloads/GitHub/blog</span><br><span class="line">onns@liupans-MacBook-Air blog % <span class="built_in">pwd</span></span><br><span class="line">/Users/onns/Downloads/GitHub/blog</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">onns@liupans-MacBook-Air blog % <span class="built_in">cd</span> -</span><br><span class="line">~/Documents/common/PAN-PyTorch</span><br><span class="line">onns@liupans-MacBook-Air PAN-PyTorch % <span class="built_in">pwd</span></span><br><span class="line">/Users/onns/Documents/common/PAN-PyTorch</span><br></pre></td></tr></table></figure><p>Linux æ–‡ä»¶å‘½åçš„ç‰¹æ®Šç¬¦å·ä»…æ”¯æŒ<code>.</code>ï¼Œ<code>-</code>å’Œ<code>_</code>ã€‚</p><p>ä¸è¦åœ¨æ–‡ä»¶åä¸­ä½¿ç”¨ç©ºæ ¼ã€‚</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>è¿™ä¸ªä»¥å‰è¿˜çœŸæ²¡æ³¨æ„ã€‚ã€‚ã€‚ <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> shell </tag>
            
            <tag> bash </tag>
            
            <tag> shell note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ResNet50 temporal shift</title>
      <link href="/blog/2020/10/12/resnet-50-temporal-shift/"/>
      <url>/blog/2020/10/12/resnet-50-temporal-shift/</url>
      
        <content type="html"><![CDATA[<p>æ¨¡å‹ç»“æ„ï¼š</p><a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br></pre></td><td class="code"><pre><span class="line">ResNet(</span><br><span class="line">  (conv1): Conv2d(3, 64, kernel_size&#x3D;(7, 7), stride&#x3D;(2, 2), padding&#x3D;(3, 3), bias&#x3D;False)</span><br><span class="line">  (bn1): BatchNorm2d(64, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (relu): ReLU(inplace)</span><br><span class="line">  (maxpool): MaxPool2d(kernel_size&#x3D;3, stride&#x3D;2, padding&#x3D;1, dilation&#x3D;1, ceil_mode&#x3D;False)</span><br><span class="line">  (layer1): Sequential(</span><br><span class="line">(0): Bottleneck(</span><br><span class="line">  (conv1): Conv2d(64, 64, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn1): BatchNorm2d(64, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv2): Conv2d(64, 64, kernel_size&#x3D;(3, 3), stride&#x3D;(1, 1), padding&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn2): BatchNorm2d(64, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv3): Conv2d(64, 256, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn3): BatchNorm2d(256, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (relu): ReLU(inplace)</span><br><span class="line">  (downsample): Sequential(</span><br><span class="line">(0): Conv2d(64, 256, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">(1): BatchNorm2d(256, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  )</span><br><span class="line">)</span><br><span class="line">(1): Bottleneck(</span><br><span class="line">  (conv1): Conv2d(256, 64, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn1): BatchNorm2d(64, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv2): Conv2d(64, 64, kernel_size&#x3D;(3, 3), stride&#x3D;(1, 1), padding&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn2): BatchNorm2d(64, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv3): Conv2d(64, 256, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn3): BatchNorm2d(256, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (relu): ReLU(inplace)</span><br><span class="line">)</span><br><span class="line">(2): Bottleneck(</span><br><span class="line">  (conv1): Conv2d(256, 64, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn1): BatchNorm2d(64, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv2): Conv2d(64, 64, kernel_size&#x3D;(3, 3), stride&#x3D;(1, 1), padding&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn2): BatchNorm2d(64, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv3): Conv2d(64, 256, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn3): BatchNorm2d(256, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (relu): ReLU(inplace)</span><br><span class="line">)</span><br><span class="line">  )</span><br><span class="line">  (layer2): Sequential(</span><br><span class="line">(0): Bottleneck(</span><br><span class="line">  (conv1): Conv2d(256, 128, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn1): BatchNorm2d(128, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv2): Conv2d(128, 128, kernel_size&#x3D;(3, 3), stride&#x3D;(2, 2), padding&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn2): BatchNorm2d(128, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv3): Conv2d(128, 512, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn3): BatchNorm2d(512, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (relu): ReLU(inplace)</span><br><span class="line">  (downsample): Sequential(</span><br><span class="line">(0): Conv2d(256, 512, kernel_size&#x3D;(1, 1), stride&#x3D;(2, 2), bias&#x3D;False)</span><br><span class="line">(1): BatchNorm2d(512, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  )</span><br><span class="line">)</span><br><span class="line">(1): Bottleneck(</span><br><span class="line">  (conv1): Conv2d(512, 128, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn1): BatchNorm2d(128, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv2): Conv2d(128, 128, kernel_size&#x3D;(3, 3), stride&#x3D;(1, 1), padding&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn2): BatchNorm2d(128, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv3): Conv2d(128, 512, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn3): BatchNorm2d(512, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (relu): ReLU(inplace)</span><br><span class="line">)</span><br><span class="line">(2): Bottleneck(</span><br><span class="line">  (conv1): Conv2d(512, 128, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn1): BatchNorm2d(128, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv2): Conv2d(128, 128, kernel_size&#x3D;(3, 3), stride&#x3D;(1, 1), padding&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn2): BatchNorm2d(128, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv3): Conv2d(128, 512, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn3): BatchNorm2d(512, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (relu): ReLU(inplace)</span><br><span class="line">)</span><br><span class="line">(3): Bottleneck(</span><br><span class="line">  (conv1): Conv2d(512, 128, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn1): BatchNorm2d(128, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv2): Conv2d(128, 128, kernel_size&#x3D;(3, 3), stride&#x3D;(1, 1), padding&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn2): BatchNorm2d(128, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv3): Conv2d(128, 512, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn3): BatchNorm2d(512, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (relu): ReLU(inplace)</span><br><span class="line">)</span><br><span class="line">  )</span><br><span class="line">  (layer3): Sequential(</span><br><span class="line">(0): Bottleneck(</span><br><span class="line">  (conv1): Conv2d(512, 256, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn1): BatchNorm2d(256, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv2): Conv2d(256, 256, kernel_size&#x3D;(3, 3), stride&#x3D;(2, 2), padding&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn2): BatchNorm2d(256, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv3): Conv2d(256, 1024, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn3): BatchNorm2d(1024, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (relu): ReLU(inplace)</span><br><span class="line">  (downsample): Sequential(</span><br><span class="line">(0): Conv2d(512, 1024, kernel_size&#x3D;(1, 1), stride&#x3D;(2, 2), bias&#x3D;False)</span><br><span class="line">(1): BatchNorm2d(1024, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  )</span><br><span class="line">)</span><br><span class="line">(1): Bottleneck(</span><br><span class="line">  (conv1): Conv2d(1024, 256, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn1): BatchNorm2d(256, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv2): Conv2d(256, 256, kernel_size&#x3D;(3, 3), stride&#x3D;(1, 1), padding&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn2): BatchNorm2d(256, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv3): Conv2d(256, 1024, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn3): BatchNorm2d(1024, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (relu): ReLU(inplace)</span><br><span class="line">)</span><br><span class="line">(2): Bottleneck(</span><br><span class="line">  (conv1): Conv2d(1024, 256, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn1): BatchNorm2d(256, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv2): Conv2d(256, 256, kernel_size&#x3D;(3, 3), stride&#x3D;(1, 1), padding&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn2): BatchNorm2d(256, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv3): Conv2d(256, 1024, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn3): BatchNorm2d(1024, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (relu): ReLU(inplace)</span><br><span class="line">)</span><br><span class="line">(3): Bottleneck(</span><br><span class="line">  (conv1): Conv2d(1024, 256, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn1): BatchNorm2d(256, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv2): Conv2d(256, 256, kernel_size&#x3D;(3, 3), stride&#x3D;(1, 1), padding&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn2): BatchNorm2d(256, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv3): Conv2d(256, 1024, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn3): BatchNorm2d(1024, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (relu): ReLU(inplace)</span><br><span class="line">)</span><br><span class="line">(4): Bottleneck(</span><br><span class="line">  (conv1): Conv2d(1024, 256, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn1): BatchNorm2d(256, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv2): Conv2d(256, 256, kernel_size&#x3D;(3, 3), stride&#x3D;(1, 1), padding&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn2): BatchNorm2d(256, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv3): Conv2d(256, 1024, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn3): BatchNorm2d(1024, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (relu): ReLU(inplace)</span><br><span class="line">)</span><br><span class="line">(5): Bottleneck(</span><br><span class="line">  (conv1): Conv2d(1024, 256, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn1): BatchNorm2d(256, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv2): Conv2d(256, 256, kernel_size&#x3D;(3, 3), stride&#x3D;(1, 1), padding&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn2): BatchNorm2d(256, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv3): Conv2d(256, 1024, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn3): BatchNorm2d(1024, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (relu): ReLU(inplace)</span><br><span class="line">)</span><br><span class="line">  )</span><br><span class="line">  (layer4): Sequential(</span><br><span class="line">(0): Bottleneck(</span><br><span class="line">  (conv1): Conv2d(1024, 512, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn1): BatchNorm2d(512, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv2): Conv2d(512, 512, kernel_size&#x3D;(3, 3), stride&#x3D;(2, 2), padding&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn2): BatchNorm2d(512, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv3): Conv2d(512, 2048, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn3): BatchNorm2d(2048, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (relu): ReLU(inplace)</span><br><span class="line">  (downsample): Sequential(</span><br><span class="line">(0): Conv2d(1024, 2048, kernel_size&#x3D;(1, 1), stride&#x3D;(2, 2), bias&#x3D;False)</span><br><span class="line">(1): BatchNorm2d(2048, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  )</span><br><span class="line">)</span><br><span class="line">(1): Bottleneck(</span><br><span class="line">  (conv1): Conv2d(2048, 512, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn1): BatchNorm2d(512, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv2): Conv2d(512, 512, kernel_size&#x3D;(3, 3), stride&#x3D;(1, 1), padding&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn2): BatchNorm2d(512, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv3): Conv2d(512, 2048, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn3): BatchNorm2d(2048, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (relu): ReLU(inplace)</span><br><span class="line">)</span><br><span class="line">(2): Bottleneck(</span><br><span class="line">  (conv1): Conv2d(2048, 512, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn1): BatchNorm2d(512, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv2): Conv2d(512, 512, kernel_size&#x3D;(3, 3), stride&#x3D;(1, 1), padding&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn2): BatchNorm2d(512, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (conv3): Conv2d(512, 2048, kernel_size&#x3D;(1, 1), stride&#x3D;(1, 1), bias&#x3D;False)</span><br><span class="line">  (bn3): BatchNorm2d(2048, eps&#x3D;1e-05, momentum&#x3D;0.1, affine&#x3D;True, track_running_stats&#x3D;True)</span><br><span class="line">  (relu): ReLU(inplace)</span><br><span class="line">)</span><br><span class="line">  )</span><br><span class="line">  (avgpool): AdaptiveAvgPool2d(output_size&#x3D;(1, 1))</span><br><span class="line">  (fc): Linear(in_features&#x3D;2048, out_features&#x3D;1000, bias&#x3D;True)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">make_temporal_shift</span><span class="params">(net, n_segment, n_div=<span class="number">8</span>, place=<span class="string">'blockres'</span>, temporal_pool=False)</span>:</span></span><br><span class="line"><span class="keyword">if</span> temporal_pool:</span><br><span class="line">n_segment_list = [n_segment, n_segment // <span class="number">2</span>, n_segment // <span class="number">2</span>, n_segment // <span class="number">2</span>]</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">n_segment_list = [n_segment] * <span class="number">4</span></span><br><span class="line"><span class="keyword">assert</span> n_segment_list[<span class="number">-1</span>] &gt; <span class="number">0</span></span><br><span class="line"><span class="comment">#print('=&gt; n_segment per stage: &#123;&#125;'.format(n_segment_list))</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> torchvision</span><br><span class="line"><span class="keyword">if</span> isinstance(net, torchvision.models.ResNet):</span><br><span class="line"><span class="keyword">if</span> place == <span class="string">'block'</span>:</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">make_block_temporal</span><span class="params">(stage, this_segment)</span>:</span></span><br><span class="line">blocks = list(stage.children())</span><br><span class="line"><span class="comment">#print('=&gt; Processing stage with &#123;&#125; blocks'.format(len(blocks)))</span></span><br><span class="line"><span class="keyword">for</span> i, b <span class="keyword">in</span> enumerate(blocks):</span><br><span class="line">blocks[i] = TemporalShift(b, n_segment=this_segment, n_div=n_div)</span><br><span class="line"><span class="keyword">return</span> nn.Sequential(*(blocks))</span><br><span class="line"></span><br><span class="line">net.layer1 = make_block_temporal(net.layer1, n_segment_list[<span class="number">0</span>])</span><br><span class="line">net.layer2 = make_block_temporal(net.layer2, n_segment_list[<span class="number">1</span>])</span><br><span class="line">net.layer3 = make_block_temporal(net.layer3, n_segment_list[<span class="number">2</span>])</span><br><span class="line">net.layer4 = make_block_temporal(net.layer4, n_segment_list[<span class="number">3</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">elif</span> <span class="string">'blockres'</span> <span class="keyword">in</span> place:</span><br><span class="line">n_round = <span class="number">1</span></span><br><span class="line"><span class="keyword">if</span> len(list(net.layer3.children())) &gt;= <span class="number">23</span>: <span class="comment"># å¦‚æœæ˜¯ResNet101çš„è¯ï¼Œå°±æ¯ä¸¤è½®é‡‡ä¸€æ¬¡</span></span><br><span class="line">n_round = <span class="number">2</span></span><br><span class="line"><span class="comment">#print('=&gt; Using n_round &#123;&#125; to insert temporal shift'.format(n_round))</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">make_block_temporal</span><span class="params">(stage, this_segment)</span>:</span></span><br><span class="line">blocks = list(stage.children())</span><br><span class="line"><span class="comment">#print('=&gt; Processing stage with &#123;&#125; blocks residual'.format(len(blocks)))</span></span><br><span class="line"><span class="keyword">for</span> i, b <span class="keyword">in</span> enumerate(blocks):</span><br><span class="line"><span class="keyword">if</span> i % n_round == <span class="number">0</span>:</span><br><span class="line">blocks[i].conv1 = TemporalShift(b.conv1, n_segment=this_segment, n_div=n_div)</span><br><span class="line"><span class="keyword">return</span> nn.Sequential(*blocks)</span><br><span class="line"></span><br><span class="line">net.layer1 = make_block_temporal(net.layer1, n_segment_list[<span class="number">0</span>])</span><br><span class="line">net.layer2 = make_block_temporal(net.layer2, n_segment_list[<span class="number">1</span>])</span><br><span class="line">net.layer3 = make_block_temporal(net.layer3, n_segment_list[<span class="number">2</span>])</span><br><span class="line">net.layer4 = make_block_temporal(net.layer4, n_segment_list[<span class="number">3</span>])</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"><span class="keyword">raise</span> NotImplementedError(place)</span><br></pre></td></tr></table></figure><p>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯å¯¹æ¯ä¸€å±‚çš„ç¬¬ä¸€ä¸ªå·ç§¯æ“ä½œä¹‹å‰ï¼Œè¿›è¡Œ<code>shift</code>æ“ä½œã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@staticmethod</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">shift</span><span class="params">(x, n_segment, fold_div=<span class="number">3</span>, inplace=False)</span>:</span></span><br><span class="line">nt, c, h, w = x.size()</span><br><span class="line">n_batch = nt // n_segment</span><br><span class="line">x = x.view(n_batch, n_segment, c, h, w)</span><br><span class="line"></span><br><span class="line">fold = c // fold_div <span class="comment"># fold_div ä¸º 8ï¼Œè®ºæ–‡ä¸­è¯´ä»–ä»¬æµ‹è¯•å‘ç°1/4çš„shiftï¼Œå³å·¦1/8å’Œå³1/8æ•ˆæœæœ€å¥½</span></span><br><span class="line"><span class="keyword">if</span> inplace:</span><br><span class="line"><span class="comment"># Due to some out of order error when performing parallel computing. </span></span><br><span class="line"><span class="comment"># May need to write a CUDA kernel.</span></span><br><span class="line"><span class="keyword">raise</span> NotImplementedError  </span><br><span class="line"><span class="comment"># out = InplaceShift.apply(x, fold)</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">out = torch.zeros_like(x) <span class="comment"># ç”Ÿæˆä¸€ä¸ªå’Œxç»´åº¦ä¿¡æ¯ä¸€æ ·ï¼Œä½†æ˜¯å…¨æ˜¯0çš„æ•°ç»„</span></span><br><span class="line"><span class="comment"># å‡è®¾åŸæ¥æ˜¯ [1,2,3,4,5,6,7,8]</span></span><br><span class="line"></span><br><span class="line">out[:, :<span class="number">-1</span>, :fold] = x[:, <span class="number">1</span>:, :fold]  <span class="comment"># shift left</span></span><br><span class="line"><span class="comment"># å˜æˆäº† [2,3,4,5,6,7,8,0]</span></span><br><span class="line"></span><br><span class="line">out[:, <span class="number">1</span>:, fold: <span class="number">2</span> * fold] = x[:, :<span class="number">-1</span>, fold: <span class="number">2</span> * fold]  <span class="comment"># shift right</span></span><br><span class="line"><span class="comment"># å˜æˆäº† [0,1,2,3,4,5,6,7]</span></span><br><span class="line"></span><br><span class="line">out[:, :, <span class="number">2</span> * fold:] = x[:, :, <span class="number">2</span> * fold:]  <span class="comment"># not shift</span></span><br><span class="line"><span class="comment"># å…¶ä½™çš„ä¸å‘ç”Ÿå˜åŒ–</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> out.view(nt, c, h, w)</span><br></pre></td></tr></table></figure><p>å¯¹é€šé“è¿›è¡Œåˆ†ç‰‡ï¼Œå‰<code>1/8</code>çš„é€šé“å·¦ç§»ï¼Œå†<code>1/8</code>çš„é€šé“å³ç§»ï¼Œå‰©ä½™çš„ä¿æŒä¸å˜ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¡Œä¸ºè¯†åˆ« </tag>
            
            <tag> action recognition </tag>
            
            <tag> resnet </tag>
            
            <tag> resnet50 </tag>
            
            <tag> tsm </tag>
            
            <tag> temporal shift </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PANéªŒè¯ç»“æœ-20201008</title>
      <link href="/blog/2020/10/08/pan-results-20201008/"/>
      <url>/blog/2020/10/08/pan-results-20201008/</url>
      
        <content type="html"><![CDATA[<p>æµ‹è¯•ç»“æœï¼š</p><a id="more"></a><h2 id="pan-my"><a class="header-anchor" href="#pan-my">#</a>PAN My</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python test_models.py something --VAP --batch_size=16 -j=4 --test_crops=1 --test_segments=8,8,8,8 --weights=pretrained/PAN_RGB_something_resnet50_shift8_blockres_avg_segment8_e50.pth.tar,pretrained/PAN_RPA_something_resnet50_shift8_blockres_avg_segment8_e80.pth.tar,pretrained/PAN_PA_something_resnet50_shift8_blockres_avg_segment8_e80.pth.tar,pretrained/PAN_RGB_something_resnet50_shift8_blockres_avg_segment8_e50.pth.tar</span></span><br><span class="line">$ bash scripts/<span class="built_in">test</span>/sthv1/AAA.sh</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     RGB</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line"></span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     PA</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line"></span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     PA</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line"></span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     RGB</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line"></span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">video 0 <span class="keyword">done</span>, total 0/11522, average 0.223 sec/video, moving Prec@1 50.000 Prec@5 81.250</span><br><span class="line">video 320 <span class="keyword">done</span>, total 320/11522, average 0.055 sec/video, moving Prec@1 53.869 Prec@5 83.631</span><br><span class="line">video 640 <span class="keyword">done</span>, total 640/11522, average 0.051 sec/video, moving Prec@1 54.268 Prec@5 82.165</span><br><span class="line">video 960 <span class="keyword">done</span>, total 960/11522, average 0.049 sec/video, moving Prec@1 53.484 Prec@5 80.943</span><br><span class="line">video 1280 <span class="keyword">done</span>, total 1280/11522, average 0.049 sec/video, moving Prec@1 53.627 Prec@5 81.481</span><br><span class="line">video 1600 <span class="keyword">done</span>, total 1600/11522, average 0.048 sec/video, moving Prec@1 53.713 Prec@5 80.941</span><br><span class="line">video 1920 <span class="keyword">done</span>, total 1920/11522, average 0.048 sec/video, moving Prec@1 52.789 Prec@5 80.527</span><br><span class="line">video 2240 <span class="keyword">done</span>, total 2240/11522, average 0.048 sec/video, moving Prec@1 52.527 Prec@5 80.452</span><br><span class="line">video 2560 <span class="keyword">done</span>, total 2560/11522, average 0.048 sec/video, moving Prec@1 52.446 Prec@5 80.551</span><br><span class="line">video 2880 <span class="keyword">done</span>, total 2880/11522, average 0.048 sec/video, moving Prec@1 52.106 Prec@5 80.352</span><br><span class="line">video 3200 <span class="keyword">done</span>, total 3200/11522, average 0.048 sec/video, moving Prec@1 51.710 Prec@5 80.379</span><br><span class="line">video 3520 <span class="keyword">done</span>, total 3520/11522, average 0.047 sec/video, moving Prec@1 51.669 Prec@5 80.402</span><br><span class="line">video 3840 <span class="keyword">done</span>, total 3840/11522, average 0.047 sec/video, moving Prec@1 51.504 Prec@5 80.031</span><br><span class="line">video 4160 <span class="keyword">done</span>, total 4160/11522, average 0.047 sec/video, moving Prec@1 51.245 Prec@5 79.957</span><br><span class="line">video 4480 <span class="keyword">done</span>, total 4480/11522, average 0.047 sec/video, moving Prec@1 51.157 Prec@5 80.004</span><br><span class="line">video 4800 <span class="keyword">done</span>, total 4800/11522, average 0.047 sec/video, moving Prec@1 51.017 Prec@5 79.672</span><br><span class="line">video 5120 <span class="keyword">done</span>, total 5120/11522, average 0.047 sec/video, moving Prec@1 50.818 Prec@5 79.420</span><br><span class="line">video 5440 <span class="keyword">done</span>, total 5440/11522, average 0.047 sec/video, moving Prec@1 50.953 Prec@5 79.582</span><br><span class="line">video 5760 <span class="keyword">done</span>, total 5760/11522, average 0.047 sec/video, moving Prec@1 50.952 Prec@5 79.415</span><br><span class="line">video 6080 <span class="keyword">done</span>, total 6080/11522, average 0.047 sec/video, moving Prec@1 50.968 Prec@5 79.560</span><br><span class="line">video 6400 <span class="keyword">done</span>, total 6400/11522, average 0.047 sec/video, moving Prec@1 51.044 Prec@5 79.723</span><br><span class="line">video 6720 <span class="keyword">done</span>, total 6720/11522, average 0.047 sec/video, moving Prec@1 50.920 Prec@5 79.751</span><br><span class="line">video 7040 <span class="keyword">done</span>, total 7040/11522, average 0.047 sec/video, moving Prec@1 51.020 Prec@5 79.691</span><br><span class="line">video 7360 <span class="keyword">done</span>, total 7360/11522, average 0.047 sec/video, moving Prec@1 50.976 Prec@5 79.542</span><br><span class="line">video 7680 <span class="keyword">done</span>, total 7680/11522, average 0.047 sec/video, moving Prec@1 51.130 Prec@5 79.691</span><br><span class="line">video 8000 <span class="keyword">done</span>, total 8000/11522, average 0.047 sec/video, moving Prec@1 51.085 Prec@5 79.753</span><br><span class="line">video 8320 <span class="keyword">done</span>, total 8320/11522, average 0.047 sec/video, moving Prec@1 51.116 Prec@5 79.762</span><br><span class="line">video 8640 <span class="keyword">done</span>, total 8640/11522, average 0.047 sec/video, moving Prec@1 50.947 Prec@5 79.737</span><br><span class="line">video 8960 <span class="keyword">done</span>, total 8960/11522, average 0.047 sec/video, moving Prec@1 50.925 Prec@5 79.768</span><br><span class="line">video 9280 <span class="keyword">done</span>, total 9280/11522, average 0.047 sec/video, moving Prec@1 50.968 Prec@5 79.733</span><br><span class="line">video 9600 <span class="keyword">done</span>, total 9600/11522, average 0.047 sec/video, moving Prec@1 51.113 Prec@5 79.773</span><br><span class="line">video 9920 <span class="keyword">done</span>, total 9920/11522, average 0.047 sec/video, moving Prec@1 51.127 Prec@5 79.781</span><br><span class="line">video 10240 <span class="keyword">done</span>, total 10240/11522, average 0.047 sec/video, moving Prec@1 51.268 Prec@5 79.904</span><br><span class="line">video 10560 <span class="keyword">done</span>, total 10560/11522, average 0.047 sec/video, moving Prec@1 51.314 Prec@5 79.870</span><br><span class="line">video 10880 <span class="keyword">done</span>, total 10880/11522, average 0.047 sec/video, moving Prec@1 51.386 Prec@5 79.947</span><br><span class="line">video 11200 <span class="keyword">done</span>, total 11200/11522, average 0.047 sec/video, moving Prec@1 51.444 Prec@5 79.913</span><br><span class="line">video 11520 <span class="keyword">done</span>, total 11520/11522, average 0.047 sec/video, moving Prec@1 51.311 Prec@5 79.865</span><br><span class="line">[0.88059701 0.2875     0.25714286 0.64179104 0.39473684 0.42241379</span><br><span class="line"> 0.71641791 0.41176471 0.65048544 0.70873786 0.38666667 0.44444444</span><br><span class="line"> 0.32978723 0.4516129  0.71974522 0.5        0.23493976 0.25</span><br><span class="line"> 0.44715447 0.36       0.336      0.5862069  0.48148148 0.41176471</span><br><span class="line"> 0.5483871  0.41666667 0.43478261 0.48       0.72727273 0.63492063</span><br><span class="line"> 0.59090909 0.57692308 0.83333333 0.23076923 0.32608696 0.13888889</span><br><span class="line"> 0.81609195 0.79411765 0.10526316 0.59259259 0.68595041 0.66</span><br><span class="line"> 0.73076923 0.67346939 0.71153846 0.59016393 0.41176471 0.42105263</span><br><span class="line"> 0.17977528 0.69924812 0.62264151 0.         0.36       0.4</span><br><span class="line"> 0.23809524 0.29166667 0.42424242 0.53125    0.         0.75510204</span><br><span class="line"> 0.78787879 0.16666667 0.66       0.19090909 0.1        0.44444444</span><br><span class="line"> 0.18518519 0.24242424 0.50704225 0.42307692 0.58064516 0.25</span><br><span class="line"> 0.55263158 0.52       0.78333333 0.48387097 0.35294118 0.52941176</span><br><span class="line"> 0.36363636 0.80487805 0.08571429 0.19047619 0.36666667 0.15789474</span><br><span class="line"> 0.65714286 0.39655172 0.59459459 0.63492063 0.16666667 0.08928571</span><br><span class="line"> 0.62162162 0.7804878  0.53488372 0.59259259 0.71028037 0.27419355</span><br><span class="line"> 0.03703704 0.11904762 0.56140351 0.47058824 0.32653061 0.55555556</span><br><span class="line"> 0.203125   0.59183673 0.63414634 0.65714286 0.52808989 0.72463768</span><br><span class="line"> 0.49122807 0.32967033 0.64705882 0.05882353 0.66216216 0.28571429</span><br><span class="line"> 0.61320755 0.4        0.34545455 0.76595745 0.31707317 0.58333333</span><br><span class="line"> 0.80681818 0.60784314 0.36363636 0.5        0.33333333 0.46938776</span><br><span class="line"> 0.49056604 0.57407407 0.11724138 0.625      0.28       0.25925926</span><br><span class="line"> 0.26315789 0.33333333 0.68211921 0.43103448 0.07142857 0.38333333</span><br><span class="line"> 0.15254237 0.59210526 0.66       0.37209302 0.40909091 0.48305085</span><br><span class="line"> 0.62666667 0.45774648 0.63207547 0.1641791  0.546875   0.832</span><br><span class="line"> 0.67878788 0.27419355 0.33333333 0.81481481 0.53571429 0.25490196</span><br><span class="line"> 0.27868852 0.3        0.51485149 0.34375    0.46296296 0.375</span><br><span class="line"> 0.3        0.37931034 0.7254902  0.75757576 0.9223301  0.87735849</span><br><span class="line"> 0.76851852 0.72972973 0.43809524 0.64748201 0.69343066 0.72368421]</span><br><span class="line">upper bound: 0.4892586659876352</span><br><span class="line">-----Evaluation is finished------</span><br><span class="line">Class Accuracy 47.29%</span><br><span class="line">Overall Prec@1 51.31% Prec@5 79.86%</span><br><span class="line">/home/hs/anaconda3/envs/dzl/lib/python3.7/site-packages/numpy/core/_asarray.py:136: VisibleDeprecationWarning: Creating an ndarray from ragged nested sequences (<span class="built_in">which</span> is a list-or-tuple of lists-or-tuples-or ndarrays with different lengths or shapes) is deprecated. If you meant to <span class="keyword">do</span> this, you must specify <span class="string">'dtype=object'</span> when creating the ndarray</span><br><span class="line">  <span class="built_in">return</span> array(a, dtype, copy=False, order=order, subok=True)</span><br></pre></td></tr></table></figure><h2 id="pan-rgb-rpa"><a class="header-anchor" href="#pan-rgb-rpa">#</a>PAN RGB&amp;RPA</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python test_models.py something --VAP --batch_size=16 -j=4 --test_crops=1 --test_segments=8,8 --weights=pretrained/PAN_RGB_something_resnet50_shift8_blockres_avg_segment8_e50.pth.tar,pretrained/PAN_RPA_something_resnet50_shift8_blockres_avg_segment8_e80.pth.tar</span></span><br><span class="line">$ bash scripts/<span class="built_in">test</span>/sthv1/Full.sh</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     RGB</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line"></span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     PA</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line"></span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">video 0 <span class="keyword">done</span>, total 0/11522, average 0.230 sec/video, moving Prec@1 56.250 Prec@5 81.250</span><br><span class="line">video 320 <span class="keyword">done</span>, total 320/11522, average 0.034 sec/video, moving Prec@1 55.357 Prec@5 84.226</span><br><span class="line">video 640 <span class="keyword">done</span>, total 640/11522, average 0.029 sec/video, moving Prec@1 55.488 Prec@5 82.317</span><br><span class="line">video 960 <span class="keyword">done</span>, total 960/11522, average 0.027 sec/video, moving Prec@1 53.689 Prec@5 80.225</span><br><span class="line">video 1280 <span class="keyword">done</span>, total 1280/11522, average 0.026 sec/video, moving Prec@1 54.090 Prec@5 80.478</span><br><span class="line">video 1600 <span class="keyword">done</span>, total 1600/11522, average 0.026 sec/video, moving Prec@1 54.084 Prec@5 79.950</span><br><span class="line">video 1920 <span class="keyword">done</span>, total 1920/11522, average 0.025 sec/video, moving Prec@1 53.202 Prec@5 79.649</span><br><span class="line">video 2240 <span class="keyword">done</span>, total 2240/11522, average 0.025 sec/video, moving Prec@1 52.660 Prec@5 79.699</span><br><span class="line">video 2560 <span class="keyword">done</span>, total 2560/11522, average 0.025 sec/video, moving Prec@1 52.484 Prec@5 79.852</span><br><span class="line">video 2880 <span class="keyword">done</span>, total 2880/11522, average 0.025 sec/video, moving Prec@1 52.072 Prec@5 79.593</span><br><span class="line">video 3200 <span class="keyword">done</span>, total 3200/11522, average 0.025 sec/video, moving Prec@1 51.617 Prec@5 79.602</span><br><span class="line">video 3520 <span class="keyword">done</span>, total 3520/11522, average 0.025 sec/video, moving Prec@1 51.499 Prec@5 79.638</span><br><span class="line">video 3840 <span class="keyword">done</span>, total 3840/11522, average 0.025 sec/video, moving Prec@1 51.167 Prec@5 79.305</span><br><span class="line">video 4160 <span class="keyword">done</span>, total 4160/11522, average 0.025 sec/video, moving Prec@1 50.766 Prec@5 79.239</span><br><span class="line">video 4480 <span class="keyword">done</span>, total 4480/11522, average 0.025 sec/video, moving Prec@1 50.512 Prec@5 79.115</span><br><span class="line">video 4800 <span class="keyword">done</span>, total 4800/11522, average 0.025 sec/video, moving Prec@1 50.353 Prec@5 78.738</span><br><span class="line">video 5120 <span class="keyword">done</span>, total 5120/11522, average 0.025 sec/video, moving Prec@1 50.097 Prec@5 78.466</span><br><span class="line">video 5440 <span class="keyword">done</span>, total 5440/11522, average 0.026 sec/video, moving Prec@1 50.220 Prec@5 78.666</span><br><span class="line">video 5760 <span class="keyword">done</span>, total 5760/11522, average 0.026 sec/video, moving Prec@1 50.208 Prec@5 78.497</span><br><span class="line">video 6080 <span class="keyword">done</span>, total 6080/11522, average 0.026 sec/video, moving Prec@1 50.213 Prec@5 78.658</span><br><span class="line">video 6400 <span class="keyword">done</span>, total 6400/11522, average 0.026 sec/video, moving Prec@1 50.374 Prec@5 78.787</span><br><span class="line">video 6720 <span class="keyword">done</span>, total 6720/11522, average 0.026 sec/video, moving Prec@1 50.282 Prec@5 78.741</span><br><span class="line">video 7040 <span class="keyword">done</span>, total 7040/11522, average 0.026 sec/video, moving Prec@1 50.425 Prec@5 78.699</span><br><span class="line">video 7360 <span class="keyword">done</span>, total 7360/11522, average 0.026 sec/video, moving Prec@1 50.298 Prec@5 78.552</span><br><span class="line">video 7680 <span class="keyword">done</span>, total 7680/11522, average 0.026 sec/video, moving Prec@1 50.468 Prec@5 78.768</span><br><span class="line">video 8000 <span class="keyword">done</span>, total 8000/11522, average 0.026 sec/video, moving Prec@1 50.424 Prec@5 78.780</span><br><span class="line">video 8320 <span class="keyword">done</span>, total 8320/11522, average 0.026 sec/video, moving Prec@1 50.468 Prec@5 78.791</span><br><span class="line">video 8640 <span class="keyword">done</span>, total 8640/11522, average 0.026 sec/video, moving Prec@1 50.347 Prec@5 78.789</span><br><span class="line">video 8960 <span class="keyword">done</span>, total 8960/11522, average 0.026 sec/video, moving Prec@1 50.379 Prec@5 78.877</span><br><span class="line">video 9280 <span class="keyword">done</span>, total 9280/11522, average 0.026 sec/video, moving Prec@1 50.398 Prec@5 78.873</span><br><span class="line">video 9600 <span class="keyword">done</span>, total 9600/11522, average 0.026 sec/video, moving Prec@1 50.520 Prec@5 78.900</span><br><span class="line">video 9920 <span class="keyword">done</span>, total 9920/11522, average 0.026 sec/video, moving Prec@1 50.533 Prec@5 78.925</span><br><span class="line">video 10240 <span class="keyword">done</span>, total 10240/11522, average 0.026 sec/video, moving Prec@1 50.575 Prec@5 79.027</span><br><span class="line">video 10560 <span class="keyword">done</span>, total 10560/11522, average 0.026 sec/video, moving Prec@1 50.643 Prec@5 78.971</span><br><span class="line">video 10880 <span class="keyword">done</span>, total 10880/11522, average 0.026 sec/video, moving Prec@1 50.734 Prec@5 79.102</span><br><span class="line">video 11200 <span class="keyword">done</span>, total 11200/11522, average 0.026 sec/video, moving Prec@1 50.785 Prec@5 79.110</span><br><span class="line">video 11520 <span class="keyword">done</span>, total 11520/11522, average 0.026 sec/video, moving Prec@1 50.720 Prec@5 79.040</span><br><span class="line">[0.89552239 0.325      0.27619048 0.59701493 0.36842105 0.43103448</span><br><span class="line"> 0.68656716 0.41176471 0.67961165 0.67961165 0.36       0.45833333</span><br><span class="line"> 0.30851064 0.4516129  0.68789809 0.48       0.22891566 0.25</span><br><span class="line"> 0.45528455 0.34666667 0.328      0.53448276 0.42592593 0.39215686</span><br><span class="line"> 0.38709677 0.5        0.43478261 0.52       0.75757576 0.65079365</span><br><span class="line"> 0.59090909 0.57692308 0.7962963  0.1978022  0.30434783 0.19444444</span><br><span class="line"> 0.7816092  0.7745098  0.18421053 0.62962963 0.69421488 0.66</span><br><span class="line"> 0.71538462 0.65306122 0.73076923 0.59016393 0.39705882 0.4</span><br><span class="line"> 0.25842697 0.69924812 0.59433962 0.         0.32       0.5</span><br><span class="line"> 0.23809524 0.33333333 0.36363636 0.53125    0.08333333 0.7244898</span><br><span class="line"> 0.72727273 0.22222222 0.64       0.15454545 0.13333333 0.49074074</span><br><span class="line"> 0.11111111 0.24242424 0.56338028 0.38461538 0.51612903 0.32142857</span><br><span class="line"> 0.47368421 0.56       0.76666667 0.48387097 0.35294118 0.47058824</span><br><span class="line"> 0.40909091 0.82926829 0.11428571 0.14285714 0.43333333 0.21052632</span><br><span class="line"> 0.54285714 0.34482759 0.62162162 0.63492063 0.16666667 0.10714286</span><br><span class="line"> 0.67567568 0.7804878  0.55813953 0.62037037 0.73831776 0.25806452</span><br><span class="line"> 0.07407407 0.14285714 0.55555556 0.41176471 0.31632653 0.58333333</span><br><span class="line"> 0.234375   0.59183673 0.6097561  0.62857143 0.52808989 0.72463768</span><br><span class="line"> 0.49122807 0.34065934 0.60784314 0.05882353 0.66216216 0.42857143</span><br><span class="line"> 0.60377358 0.4        0.34545455 0.78723404 0.34146341 0.58333333</span><br><span class="line"> 0.85227273 0.58823529 0.36363636 0.475      0.30555556 0.48979592</span><br><span class="line"> 0.50943396 0.51851852 0.12413793 0.63461538 0.32       0.25925926</span><br><span class="line"> 0.26315789 0.26666667 0.66887417 0.43103448 0.07142857 0.38333333</span><br><span class="line"> 0.18644068 0.61842105 0.66       0.37209302 0.31818182 0.49152542</span><br><span class="line"> 0.57333333 0.41549296 0.58490566 0.11940299 0.546875   0.792</span><br><span class="line"> 0.67878788 0.27419355 0.28333333 0.83333333 0.51190476 0.25490196</span><br><span class="line"> 0.29508197 0.31428571 0.46534653 0.34375    0.42592593 0.35</span><br><span class="line"> 0.3        0.34482759 0.70588235 0.75757576 0.9223301  0.87735849</span><br><span class="line"> 0.76851852 0.72972973 0.37142857 0.6618705  0.68613139 0.68421053]</span><br><span class="line">upper bound: 0.48195690400802077</span><br><span class="line">-----Evaluation is finished------</span><br><span class="line">Class Accuracy 46.97%</span><br><span class="line">Overall Prec@1 50.72% Prec@5 79.04%</span><br><span class="line">/home/hs/anaconda3/envs/dzl/lib/python3.7/site-packages/numpy/core/_asarray.py:136: VisibleDeprecationWarning: Creating an ndarray from ragged nested sequences (<span class="built_in">which</span> is a list-or-tuple of lists-or-tuples-or ndarrays with different lengths or shapes) is deprecated. If you meant to <span class="keyword">do</span> this, you must specify <span class="string">'dtype=object'</span> when creating the ndarray</span><br><span class="line">  <span class="built_in">return</span> array(a, dtype, copy=False, order=order, subok=True)</span><br></pre></td></tr></table></figure><h2 id="pan-full"><a class="header-anchor" href="#pan-full">#</a>PAN Full</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python test_models.py something --VAP --batch_size=16 -j=4 --test_crops=1 --test_segments=8,8,8,8 --weights=pretrained/PAN_RGB_something_resnet50_shift8_blockres_avg_segment8_e50.pth.tar,pretrained/PAN_PA_something_resnet50_shift8_blockres_avg_segment8_e80.pth.tar,pretrained/PAN_PA_something_resnet50_shift8_blockres_avg_segment8_e80.pth.tar,pretrained/PAN_RGB_something_resnet50_shift8_blockres_avg_segment8_e50.pth.tar</span></span><br><span class="line">$ bash scripts/<span class="built_in">test</span>/sthv1/AAA.sh</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     RGB</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line"></span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     PA</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line"></span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     PA</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line"></span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     RGB</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line"></span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">video 0 <span class="keyword">done</span>, total 0/11522, average 0.237 sec/video, moving Prec@1 50.000 Prec@5 87.500</span><br><span class="line">video 320 <span class="keyword">done</span>, total 320/11522, average 0.056 sec/video, moving Prec@1 51.488 Prec@5 83.333</span><br><span class="line">video 640 <span class="keyword">done</span>, total 640/11522, average 0.052 sec/video, moving Prec@1 52.287 Prec@5 82.165</span><br><span class="line">video 960 <span class="keyword">done</span>, total 960/11522, average 0.050 sec/video, moving Prec@1 51.332 Prec@5 80.840</span><br><span class="line">video 1280 <span class="keyword">done</span>, total 1280/11522, average 0.049 sec/video, moving Prec@1 52.160 Prec@5 81.096</span><br><span class="line">video 1600 <span class="keyword">done</span>, total 1600/11522, average 0.049 sec/video, moving Prec@1 51.795 Prec@5 80.446</span><br><span class="line">video 1920 <span class="keyword">done</span>, total 1920/11522, average 0.048 sec/video, moving Prec@1 50.878 Prec@5 80.062</span><br><span class="line">video 2240 <span class="keyword">done</span>, total 2240/11522, average 0.048 sec/video, moving Prec@1 50.798 Prec@5 79.920</span><br><span class="line">video 2560 <span class="keyword">done</span>, total 2560/11522, average 0.048 sec/video, moving Prec@1 50.970 Prec@5 79.775</span><br><span class="line">video 2880 <span class="keyword">done</span>, total 2880/11522, average 0.048 sec/video, moving Prec@1 50.760 Prec@5 79.731</span><br><span class="line">video 3200 <span class="keyword">done</span>, total 3200/11522, average 0.048 sec/video, moving Prec@1 50.529 Prec@5 79.695</span><br><span class="line">video 3520 <span class="keyword">done</span>, total 3520/11522, average 0.048 sec/video, moving Prec@1 50.509 Prec@5 79.638</span><br><span class="line">video 3840 <span class="keyword">done</span>, total 3840/11522, average 0.048 sec/video, moving Prec@1 50.467 Prec@5 79.279</span><br><span class="line">video 4160 <span class="keyword">done</span>, total 4160/11522, average 0.048 sec/video, moving Prec@1 50.359 Prec@5 79.215</span><br><span class="line">video 4480 <span class="keyword">done</span>, total 4480/11522, average 0.048 sec/video, moving Prec@1 50.311 Prec@5 79.248</span><br><span class="line">video 4800 <span class="keyword">done</span>, total 4800/11522, average 0.048 sec/video, moving Prec@1 50.104 Prec@5 78.987</span><br><span class="line">video 5120 <span class="keyword">done</span>, total 5120/11522, average 0.048 sec/video, moving Prec@1 49.883 Prec@5 78.777</span><br><span class="line">video 5440 <span class="keyword">done</span>, total 5440/11522, average 0.048 sec/video, moving Prec@1 50.202 Prec@5 78.886</span><br><span class="line">video 5760 <span class="keyword">done</span>, total 5760/11522, average 0.048 sec/video, moving Prec@1 50.173 Prec@5 78.722</span><br><span class="line">video 6080 <span class="keyword">done</span>, total 6080/11522, average 0.048 sec/video, moving Prec@1 50.262 Prec@5 78.888</span><br><span class="line">video 6400 <span class="keyword">done</span>, total 6400/11522, average 0.047 sec/video, moving Prec@1 50.327 Prec@5 79.068</span><br><span class="line">video 6720 <span class="keyword">done</span>, total 6720/11522, average 0.047 sec/video, moving Prec@1 50.238 Prec@5 79.053</span><br><span class="line">video 7040 <span class="keyword">done</span>, total 7040/11522, average 0.047 sec/video, moving Prec@1 50.241 Prec@5 78.954</span><br><span class="line">video 7360 <span class="keyword">done</span>, total 7360/11522, average 0.047 sec/video, moving Prec@1 50.176 Prec@5 78.823</span><br><span class="line">video 7680 <span class="keyword">done</span>, total 7680/11522, average 0.047 sec/video, moving Prec@1 50.299 Prec@5 78.976</span><br><span class="line">video 8000 <span class="keyword">done</span>, total 8000/11522, average 0.047 sec/video, moving Prec@1 50.274 Prec@5 79.067</span><br><span class="line">video 8320 <span class="keyword">done</span>, total 8320/11522, average 0.047 sec/video, moving Prec@1 50.288 Prec@5 79.115</span><br><span class="line">video 8640 <span class="keyword">done</span>, total 8640/11522, average 0.047 sec/video, moving Prec@1 50.139 Prec@5 79.136</span><br><span class="line">video 8960 <span class="keyword">done</span>, total 8960/11522, average 0.047 sec/video, moving Prec@1 50.212 Prec@5 79.144</span><br><span class="line">video 9280 <span class="keyword">done</span>, total 9280/11522, average 0.047 sec/video, moving Prec@1 50.237 Prec@5 79.131</span><br><span class="line">video 9600 <span class="keyword">done</span>, total 9600/11522, average 0.047 sec/video, moving Prec@1 50.374 Prec@5 79.181</span><br><span class="line">video 9920 <span class="keyword">done</span>, total 9920/11522, average 0.047 sec/video, moving Prec@1 50.312 Prec@5 79.177</span><br><span class="line">video 10240 <span class="keyword">done</span>, total 10240/11522, average 0.047 sec/video, moving Prec@1 50.429 Prec@5 79.329</span><br><span class="line">video 10560 <span class="keyword">done</span>, total 10560/11522, average 0.047 sec/video, moving Prec@1 50.454 Prec@5 79.283</span><br><span class="line">video 10880 <span class="keyword">done</span>, total 10880/11522, average 0.047 sec/video, moving Prec@1 50.569 Prec@5 79.323</span><br><span class="line">video 11200 <span class="keyword">done</span>, total 11200/11522, average 0.047 sec/video, moving Prec@1 50.606 Prec@5 79.271</span><br><span class="line">video 11520 <span class="keyword">done</span>, total 11520/11522, average 0.047 sec/video, moving Prec@1 50.529 Prec@5 79.231</span><br><span class="line">[0.89552239 0.3125     0.26666667 0.65671642 0.36842105 0.48275862</span><br><span class="line"> 0.70895522 0.38235294 0.62135922 0.70873786 0.44       0.40277778</span><br><span class="line"> 0.30851064 0.35483871 0.77070064 0.4        0.24096386 0.2625</span><br><span class="line"> 0.45528455 0.34666667 0.352      0.60344828 0.46296296 0.45098039</span><br><span class="line"> 0.51612903 0.41666667 0.43478261 0.4        0.6969697  0.61904762</span><br><span class="line"> 0.59090909 0.53846154 0.87037037 0.25274725 0.23913043 0.13888889</span><br><span class="line"> 0.7816092  0.79411765 0.07894737 0.59259259 0.68595041 0.64</span><br><span class="line"> 0.67692308 0.67346939 0.75       0.57377049 0.47794118 0.36842105</span><br><span class="line"> 0.15730337 0.68421053 0.61320755 0.         0.36       0.45</span><br><span class="line"> 0.19047619 0.25       0.45454545 0.5        0.         0.74489796</span><br><span class="line"> 0.75757576 0.13888889 0.64       0.1        0.1        0.46296296</span><br><span class="line"> 0.18518519 0.21212121 0.43661972 0.34615385 0.5483871  0.21428571</span><br><span class="line"> 0.55263158 0.48       0.83333333 0.41935484 0.35294118 0.58823529</span><br><span class="line"> 0.27272727 0.82926829 0.11428571 0.21428571 0.33333333 0.15789474</span><br><span class="line"> 0.6        0.39655172 0.60810811 0.6984127  0.27777778 0.07142857</span><br><span class="line"> 0.59459459 0.75609756 0.58139535 0.55555556 0.62616822 0.22580645</span><br><span class="line"> 0.03703704 0.11904762 0.57894737 0.45588235 0.32653061 0.51851852</span><br><span class="line"> 0.203125   0.53061224 0.68292683 0.63809524 0.52808989 0.73913043</span><br><span class="line"> 0.49122807 0.32967033 0.58823529 0.         0.66216216 0.28571429</span><br><span class="line"> 0.60377358 0.43333333 0.27272727 0.73404255 0.29268293 0.54166667</span><br><span class="line"> 0.80681818 0.60784314 0.35454545 0.5        0.33333333 0.44897959</span><br><span class="line"> 0.47169811 0.57407407 0.14482759 0.63461538 0.22       0.22222222</span><br><span class="line"> 0.23684211 0.36666667 0.68874172 0.44827586 0.         0.31666667</span><br><span class="line"> 0.13559322 0.56578947 0.66       0.39534884 0.45454545 0.43220339</span><br><span class="line"> 0.6        0.47183099 0.63207547 0.17910448 0.546875   0.8</span><br><span class="line"> 0.66666667 0.29032258 0.38333333 0.7962963  0.55952381 0.11764706</span><br><span class="line"> 0.29508197 0.3        0.47524752 0.34375    0.42592593 0.325</span><br><span class="line"> 0.3        0.37931034 0.69607843 0.77272727 0.9223301  0.87735849</span><br><span class="line"> 0.74074074 0.75675676 0.45714286 0.62589928 0.69343066 0.69736842]</span><br><span class="line">upper bound: 0.483756929950145</span><br><span class="line">-----Evaluation is finished------</span><br><span class="line">Class Accuracy 46.26%</span><br><span class="line">Overall Prec@1 50.53% Prec@5 79.23%</span><br><span class="line">/home/hs/anaconda3/envs/dzl/lib/python3.7/site-packages/numpy/core/_asarray.py:136: VisibleDeprecationWarning: Creating an ndarray from ragged nested sequences (<span class="built_in">which</span> is a list-or-tuple of lists-or-tuples-or ndarrays with different lengths or shapes) is deprecated. If you meant to <span class="keyword">do</span> this, you must specify <span class="string">'dtype=object'</span> when creating the ndarray</span><br><span class="line">  <span class="built_in">return</span> array(a, dtype, copy=False, order=order, subok=True)</span><br></pre></td></tr></table></figure><h2 id="pan-myen"><a class="header-anchor" href="#pan-myen">#</a>PAN MyEn</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python test_models.py something --VAP --batch_size=10 -j=4 --test_crops=1 --test_segments=8,8,8,8 --weights=pretrained/PAN_RGB_something_resnet50_shift8_blockres_avg_segment8_e50.pth.tar,pretrained/PAN_PA_something_resnet50_shift8_blockres_avg_segment8_e80.pth.tar,pretrained/PAN_RPA_something_resnet50_shift8_blockres_avg_segment8_e80.pth.tar,pretrained/PAN_RGB_something_resnet50_shift8_blockres_avg_segment8_e50.pth.tar --full_res --twice_sample</span></span><br><span class="line">$ bash scripts/<span class="built_in">test</span>/sthv1/AAA.sh</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     RGB</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line"></span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">=&gt; Using twice sample <span class="keyword">for</span> the dataset...</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     PA</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line"></span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">=&gt; Using twice sample <span class="keyword">for</span> the dataset...</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     PA</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line"></span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">=&gt; Using twice sample <span class="keyword">for</span> the dataset...</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     RGB</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line"></span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">=&gt; Using twice sample <span class="keyword">for</span> the dataset...</span><br><span class="line">video number:11522</span><br><span class="line">video 0 <span class="keyword">done</span>, total 0/11522, average 0.844 sec/video, moving Prec@1 60.000 Prec@5 80.000</span><br><span class="line">video 200 <span class="keyword">done</span>, total 200/11522, average 0.154 sec/video, moving Prec@1 58.571 Prec@5 83.810</span><br><span class="line">video 400 <span class="keyword">done</span>, total 400/11522, average 0.153 sec/video, moving Prec@1 56.829 Prec@5 83.902</span><br><span class="line">video 600 <span class="keyword">done</span>, total 600/11522, average 0.153 sec/video, moving Prec@1 57.541 Prec@5 83.279</span><br><span class="line">video 800 <span class="keyword">done</span>, total 800/11522, average 0.151 sec/video, moving Prec@1 54.815 Prec@5 81.481</span><br><span class="line">video 1000 <span class="keyword">done</span>, total 1000/11522, average 0.151 sec/video, moving Prec@1 54.950 Prec@5 80.990</span><br><span class="line">video 1200 <span class="keyword">done</span>, total 1200/11522, average 0.152 sec/video, moving Prec@1 55.207 Prec@5 81.901</span><br><span class="line">video 1400 <span class="keyword">done</span>, total 1400/11522, average 0.151 sec/video, moving Prec@1 55.390 Prec@5 81.986</span><br><span class="line">video 1600 <span class="keyword">done</span>, total 1600/11522, average 0.152 sec/video, moving Prec@1 55.404 Prec@5 81.801</span><br><span class="line">video 1800 <span class="keyword">done</span>, total 1800/11522, average 0.152 sec/video, moving Prec@1 54.530 Prec@5 81.271</span><br><span class="line">video 2000 <span class="keyword">done</span>, total 2000/11522, average 0.151 sec/video, moving Prec@1 54.677 Prec@5 81.542</span><br><span class="line">video 2200 <span class="keyword">done</span>, total 2200/11522, average 0.152 sec/video, moving Prec@1 54.525 Prec@5 81.629</span><br><span class="line">video 2400 <span class="keyword">done</span>, total 2400/11522, average 0.152 sec/video, moving Prec@1 54.149 Prec@5 81.203</span><br><span class="line">video 2600 <span class="keyword">done</span>, total 2600/11522, average 0.152 sec/video, moving Prec@1 54.100 Prec@5 81.188</span><br><span class="line">video 2800 <span class="keyword">done</span>, total 2800/11522, average 0.152 sec/video, moving Prec@1 53.772 Prec@5 81.174</span><br><span class="line">video 3000 <span class="keyword">done</span>, total 3000/11522, average 0.152 sec/video, moving Prec@1 53.654 Prec@5 81.462</span><br><span class="line">video 3200 <span class="keyword">done</span>, total 3200/11522, average 0.152 sec/video, moving Prec@1 53.271 Prec@5 81.277</span><br><span class="line">video 3400 <span class="keyword">done</span>, total 3400/11522, average 0.152 sec/video, moving Prec@1 53.343 Prec@5 81.525</span><br><span class="line">video 3600 <span class="keyword">done</span>, total 3600/11522, average 0.152 sec/video, moving Prec@1 53.269 Prec@5 81.191</span><br><span class="line">video 3800 <span class="keyword">done</span>, total 3800/11522, average 0.152 sec/video, moving Prec@1 53.255 Prec@5 81.050</span><br><span class="line">video 4000 <span class="keyword">done</span>, total 4000/11522, average 0.151 sec/video, moving Prec@1 53.117 Prec@5 80.848</span><br><span class="line">video 4200 <span class="keyword">done</span>, total 4200/11522, average 0.151 sec/video, moving Prec@1 53.064 Prec@5 80.879</span><br><span class="line">video 4400 <span class="keyword">done</span>, total 4400/11522, average 0.151 sec/video, moving Prec@1 52.857 Prec@5 80.816</span><br><span class="line">video 4600 <span class="keyword">done</span>, total 4600/11522, average 0.151 sec/video, moving Prec@1 52.907 Prec@5 80.781</span><br><span class="line">video 4800 <span class="keyword">done</span>, total 4800/11522, average 0.151 sec/video, moving Prec@1 52.786 Prec@5 80.707</span><br><span class="line">video 5000 <span class="keyword">done</span>, total 5000/11522, average 0.151 sec/video, moving Prec@1 52.455 Prec@5 80.399</span><br><span class="line">video 5200 <span class="keyword">done</span>, total 5200/11522, average 0.151 sec/video, moving Prec@1 52.534 Prec@5 80.557</span><br><span class="line">video 5400 <span class="keyword">done</span>, total 5400/11522, average 0.151 sec/video, moving Prec@1 52.699 Prec@5 80.573</span><br><span class="line">video 5600 <span class="keyword">done</span>, total 5600/11522, average 0.151 sec/video, moving Prec@1 52.852 Prec@5 80.624</span><br><span class="line">video 5800 <span class="keyword">done</span>, total 5800/11522, average 0.151 sec/video, moving Prec@1 52.616 Prec@5 80.448</span><br><span class="line">video 6000 <span class="keyword">done</span>, total 6000/11522, average 0.151 sec/video, moving Prec@1 52.679 Prec@5 80.532</span><br><span class="line">video 6200 <span class="keyword">done</span>, total 6200/11522, average 0.151 sec/video, moving Prec@1 52.625 Prec@5 80.499</span><br><span class="line">video 6400 <span class="keyword">done</span>, total 6400/11522, average 0.151 sec/video, moving Prec@1 52.746 Prec@5 80.718</span><br><span class="line">video 6600 <span class="keyword">done</span>, total 6600/11522, average 0.151 sec/video, moving Prec@1 52.617 Prec@5 80.756</span><br><span class="line">video 6800 <span class="keyword">done</span>, total 6800/11522, average 0.151 sec/video, moving Prec@1 52.555 Prec@5 80.675</span><br><span class="line">video 7000 <span class="keyword">done</span>, total 7000/11522, average 0.151 sec/video, moving Prec@1 52.511 Prec@5 80.685</span><br><span class="line">video 7200 <span class="keyword">done</span>, total 7200/11522, average 0.151 sec/video, moving Prec@1 52.413 Prec@5 80.596</span><br><span class="line">video 7400 <span class="keyword">done</span>, total 7400/11522, average 0.151 sec/video, moving Prec@1 52.470 Prec@5 80.553</span><br><span class="line">video 7600 <span class="keyword">done</span>, total 7600/11522, average 0.151 sec/video, moving Prec@1 52.549 Prec@5 80.631</span><br><span class="line">video 7800 <span class="keyword">done</span>, total 7800/11522, average 0.151 sec/video, moving Prec@1 52.510 Prec@5 80.602</span><br><span class="line">video 8000 <span class="keyword">done</span>, total 8000/11522, average 0.151 sec/video, moving Prec@1 52.447 Prec@5 80.587</span><br><span class="line">video 8200 <span class="keyword">done</span>, total 8200/11522, average 0.151 sec/video, moving Prec@1 52.460 Prec@5 80.597</span><br><span class="line">video 8400 <span class="keyword">done</span>, total 8400/11522, average 0.151 sec/video, moving Prec@1 52.556 Prec@5 80.618</span><br><span class="line">video 8600 <span class="keyword">done</span>, total 8600/11522, average 0.151 sec/video, moving Prec@1 52.427 Prec@5 80.604</span><br><span class="line">video 8800 <span class="keyword">done</span>, total 8800/11522, average 0.151 sec/video, moving Prec@1 52.486 Prec@5 80.681</span><br><span class="line">video 9000 <span class="keyword">done</span>, total 9000/11522, average 0.151 sec/video, moving Prec@1 52.431 Prec@5 80.655</span><br><span class="line">video 9200 <span class="keyword">done</span>, total 9200/11522, average 0.151 sec/video, moving Prec@1 52.476 Prec@5 80.662</span><br><span class="line">video 9400 <span class="keyword">done</span>, total 9400/11522, average 0.151 sec/video, moving Prec@1 52.508 Prec@5 80.638</span><br><span class="line">video 9600 <span class="keyword">done</span>, total 9600/11522, average 0.151 sec/video, moving Prec@1 52.591 Prec@5 80.666</span><br><span class="line">video 9800 <span class="keyword">done</span>, total 9800/11522, average 0.151 sec/video, moving Prec@1 52.589 Prec@5 80.693</span><br><span class="line">video 10000 <span class="keyword">done</span>, total 10000/11522, average 0.151 sec/video, moving Prec@1 52.667 Prec@5 80.689</span><br><span class="line">video 10200 <span class="keyword">done</span>, total 10200/11522, average 0.151 sec/video, moving Prec@1 52.752 Prec@5 80.695</span><br><span class="line">video 10400 <span class="keyword">done</span>, total 10400/11522, average 0.151 sec/video, moving Prec@1 52.786 Prec@5 80.663</span><br><span class="line">video 10600 <span class="keyword">done</span>, total 10600/11522, average 0.151 sec/video, moving Prec@1 52.762 Prec@5 80.669</span><br><span class="line">video 10800 <span class="keyword">done</span>, total 10800/11522, average 0.151 sec/video, moving Prec@1 52.840 Prec@5 80.712</span><br><span class="line">video 11000 <span class="keyword">done</span>, total 11000/11522, average 0.151 sec/video, moving Prec@1 52.861 Prec@5 80.708</span><br><span class="line">video 11200 <span class="keyword">done</span>, total 11200/11522, average 0.151 sec/video, moving Prec@1 52.899 Prec@5 80.740</span><br><span class="line">video 11400 <span class="keyword">done</span>, total 11400/11522, average 0.151 sec/video, moving Prec@1 52.875 Prec@5 80.710</span><br><span class="line">[0.91044776 0.4        0.28571429 0.68656716 0.47368421 0.46551724</span><br><span class="line"> 0.69402985 0.44117647 0.74757282 0.7184466  0.45333333 0.5</span><br><span class="line"> 0.37234043 0.41935484 0.77070064 0.5        0.21084337 0.2875</span><br><span class="line"> 0.4796748  0.38666667 0.368      0.62068966 0.5        0.50980392</span><br><span class="line"> 0.51612903 0.5        0.43478261 0.44       0.72727273 0.6984127</span><br><span class="line"> 0.72727273 0.5        0.83333333 0.24175824 0.26086957 0.22222222</span><br><span class="line"> 0.81609195 0.81372549 0.05263158 0.66666667 0.71900826 0.62</span><br><span class="line"> 0.73846154 0.67346939 0.69230769 0.62295082 0.48529412 0.41052632</span><br><span class="line"> 0.24719101 0.7518797  0.62264151 0.         0.4        0.5</span><br><span class="line"> 0.19047619 0.16666667 0.42424242 0.4375     0.         0.75510204</span><br><span class="line"> 0.6969697  0.22222222 0.64       0.14545455 0.2        0.5</span><br><span class="line"> 0.12962963 0.25757576 0.52112676 0.38461538 0.58064516 0.32142857</span><br><span class="line"> 0.5        0.48       0.83333333 0.5483871  0.23529412 0.58823529</span><br><span class="line"> 0.40909091 0.82926829 0.08571429 0.14285714 0.4        0.26315789</span><br><span class="line"> 0.57142857 0.43103448 0.66216216 0.79365079 0.11111111 0.125</span><br><span class="line"> 0.62162162 0.73170732 0.58139535 0.68518519 0.71962617 0.32258065</span><br><span class="line"> 0.03703704 0.16666667 0.56725146 0.42647059 0.39795918 0.5462963</span><br><span class="line"> 0.21875    0.57142857 0.68292683 0.65714286 0.52808989 0.73913043</span><br><span class="line"> 0.42105263 0.34065934 0.64705882 0.11764706 0.67567568 0.33333333</span><br><span class="line"> 0.66037736 0.5        0.32727273 0.78723404 0.34146341 0.58333333</span><br><span class="line"> 0.82954545 0.58823529 0.39090909 0.475      0.30555556 0.53061224</span><br><span class="line"> 0.52830189 0.61111111 0.13793103 0.66346154 0.28       0.22222222</span><br><span class="line"> 0.28947368 0.33333333 0.72847682 0.39655172 0.         0.26666667</span><br><span class="line"> 0.13559322 0.60526316 0.67       0.44186047 0.40909091 0.45762712</span><br><span class="line"> 0.6        0.47183099 0.62264151 0.19402985 0.59375    0.76</span><br><span class="line"> 0.68484848 0.27419355 0.4        0.88888889 0.57142857 0.23529412</span><br><span class="line"> 0.26229508 0.35714286 0.5049505  0.34375    0.44444444 0.375</span><br><span class="line"> 0.32       0.37931034 0.66666667 0.75757576 0.9223301  0.88679245</span><br><span class="line"> 0.76851852 0.67567568 0.44761905 0.66906475 0.7080292  0.73684211]</span><br><span class="line">upper bound: 0.5027293241199311</span><br><span class="line">-----Evaluation is finished------</span><br><span class="line">Class Accuracy 48.55%</span><br><span class="line">Overall Prec@1 52.86% Prec@5 80.72%</span><br><span class="line">/home/hs/anaconda3/envs/dzl/lib/python3.7/site-packages/numpy/core/_asarray.py:136: VisibleDeprecationWarning: Creating an ndarray from ragged nested sequences (<span class="built_in">which</span> is a list-or-tuple of lists-or-tuples-or ndarrays with different lengths or shapes) is deprecated. If you meant to <span class="keyword">do</span> this, you must specify <span class="string">'dtype=object'</span> when creating the ndarray</span><br><span class="line">  <span class="built_in">return</span> array(a, dtype, copy=False, order=order, subok=True)</span><br></pre></td></tr></table></figure><h2 id="pan-rgb-pa-rpa"><a class="header-anchor" href="#pan-rgb-pa-rpa">#</a>PAN RGB&amp;PA&amp;RPA</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python test_models.py something \</span></span><br><span class="line"><span class="comment"># --VAP --batch_size=16 -j=4 --test_crops=1 --test_segments=8,8,8 \</span></span><br><span class="line"><span class="comment"># --weights=pretrained/PAN_RPA_something_resnet50_shift8_blockres_avg_segment8_e80.pth.tar,pretrained/PAN_RGB_something_resnet50_shift8_blockres_avg_segment8_e50.pth.tar,pretrained/PAN_PA_something_resnet50_shift8_blockres_avg_segment8_e80.pth.tar \</span></span><br><span class="line">$ bash scripts/<span class="built_in">test</span>/sthv1/Three.sh </span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     PA</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line">            </span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     RGB</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line">            </span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     PA</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line">            </span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">video 0 <span class="keyword">done</span>, total 0/11522, average 0.267 sec/video, moving Prec@1 56.250 Prec@5 87.500</span><br><span class="line">video 320 <span class="keyword">done</span>, total 320/11522, average 0.052 sec/video, moving Prec@1 54.167 Prec@5 83.631</span><br><span class="line">video 640 <span class="keyword">done</span>, total 640/11522, average 0.048 sec/video, moving Prec@1 54.573 Prec@5 82.622</span><br><span class="line">video 960 <span class="keyword">done</span>, total 960/11522, average 0.047 sec/video, moving Prec@1 53.484 Prec@5 81.557</span><br><span class="line">video 1280 <span class="keyword">done</span>, total 1280/11522, average 0.046 sec/video, moving Prec@1 54.321 Prec@5 81.559</span><br><span class="line">video 1600 <span class="keyword">done</span>, total 1600/11522, average 0.046 sec/video, moving Prec@1 54.022 Prec@5 80.879</span><br><span class="line">video 1920 <span class="keyword">done</span>, total 1920/11522, average 0.045 sec/video, moving Prec@1 53.099 Prec@5 80.527</span><br><span class="line">video 2240 <span class="keyword">done</span>, total 2240/11522, average 0.045 sec/video, moving Prec@1 52.793 Prec@5 80.496</span><br><span class="line">video 2560 <span class="keyword">done</span>, total 2560/11522, average 0.045 sec/video, moving Prec@1 52.601 Prec@5 80.551</span><br><span class="line">video 2880 <span class="keyword">done</span>, total 2880/11522, average 0.045 sec/video, moving Prec@1 52.279 Prec@5 80.318</span><br><span class="line">video 3200 <span class="keyword">done</span>, total 3200/11522, average 0.044 sec/video, moving Prec@1 51.959 Prec@5 80.504</span><br><span class="line">video 3520 <span class="keyword">done</span>, total 3520/11522, average 0.044 sec/video, moving Prec@1 51.810 Prec@5 80.317</span><br><span class="line">video 3840 <span class="keyword">done</span>, total 3840/11522, average 0.044 sec/video, moving Prec@1 51.608 Prec@5 80.005</span><br><span class="line">video 4160 <span class="keyword">done</span>, total 4160/11522, average 0.044 sec/video, moving Prec@1 51.389 Prec@5 79.861</span><br><span class="line">video 4480 <span class="keyword">done</span>, total 4480/11522, average 0.044 sec/video, moving Prec@1 51.268 Prec@5 79.738</span><br><span class="line">video 4800 <span class="keyword">done</span>, total 4800/11522, average 0.044 sec/video, moving Prec@1 50.997 Prec@5 79.527</span><br><span class="line">video 5120 <span class="keyword">done</span>, total 5120/11522, average 0.044 sec/video, moving Prec@1 50.759 Prec@5 79.264</span><br><span class="line">video 5440 <span class="keyword">done</span>, total 5440/11522, average 0.044 sec/video, moving Prec@1 50.898 Prec@5 79.399</span><br><span class="line">video 5760 <span class="keyword">done</span>, total 5760/11522, average 0.044 sec/video, moving Prec@1 50.779 Prec@5 79.224</span><br><span class="line">video 6080 <span class="keyword">done</span>, total 6080/11522, average 0.044 sec/video, moving Prec@1 50.820 Prec@5 79.331</span><br><span class="line">video 6400 <span class="keyword">done</span>, total 6400/11522, average 0.043 sec/video, moving Prec@1 50.935 Prec@5 79.458</span><br><span class="line">video 6720 <span class="keyword">done</span>, total 6720/11522, average 0.043 sec/video, moving Prec@1 50.861 Prec@5 79.454</span><br><span class="line">video 7040 <span class="keyword">done</span>, total 7040/11522, average 0.043 sec/video, moving Prec@1 50.893 Prec@5 79.408</span><br><span class="line">video 7360 <span class="keyword">done</span>, total 7360/11522, average 0.043 sec/video, moving Prec@1 50.813 Prec@5 79.284</span><br><span class="line">video 7680 <span class="keyword">done</span>, total 7680/11522, average 0.043 sec/video, moving Prec@1 50.975 Prec@5 79.431</span><br><span class="line">video 8000 <span class="keyword">done</span>, total 8000/11522, average 0.043 sec/video, moving Prec@1 50.948 Prec@5 79.479</span><br><span class="line">video 8320 <span class="keyword">done</span>, total 8320/11522, average 0.043 sec/video, moving Prec@1 50.936 Prec@5 79.559</span><br><span class="line">video 8640 <span class="keyword">done</span>, total 8640/11522, average 0.043 sec/video, moving Prec@1 50.739 Prec@5 79.552</span><br><span class="line">video 8960 <span class="keyword">done</span>, total 8960/11522, average 0.043 sec/video, moving Prec@1 50.780 Prec@5 79.612</span><br><span class="line">video 9280 <span class="keyword">done</span>, total 9280/11522, average 0.043 sec/video, moving Prec@1 50.818 Prec@5 79.561</span><br><span class="line">video 9600 <span class="keyword">done</span>, total 9600/11522, average 0.043 sec/video, moving Prec@1 50.915 Prec@5 79.555</span><br><span class="line">video 9920 <span class="keyword">done</span>, total 9920/11522, average 0.043 sec/video, moving Prec@1 50.946 Prec@5 79.569</span><br><span class="line">video 10240 <span class="keyword">done</span>, total 10240/11522, average 0.043 sec/video, moving Prec@1 50.985 Prec@5 79.670</span><br><span class="line">video 10560 <span class="keyword">done</span>, total 10560/11522, average 0.043 sec/video, moving Prec@1 51.059 Prec@5 79.643</span><br><span class="line">video 10880 <span class="keyword">done</span>, total 10880/11522, average 0.043 sec/video, moving Prec@1 51.120 Prec@5 79.690</span><br><span class="line">video 11200 <span class="keyword">done</span>, total 11200/11522, average 0.043 sec/video, moving Prec@1 51.221 Prec@5 79.654</span><br><span class="line">video 11520 <span class="keyword">done</span>, total 11520/11522, average 0.043 sec/video, moving Prec@1 51.120 Prec@5 79.622</span><br><span class="line">[0.91044776 0.3625     0.3047619  0.64179104 0.39473684 0.46551724</span><br><span class="line"> 0.67164179 0.41176471 0.6407767  0.67961165 0.41333333 0.47222222</span><br><span class="line"> 0.31914894 0.4516129  0.70700637 0.44       0.25903614 0.275</span><br><span class="line"> 0.44715447 0.4        0.352      0.5862069  0.5        0.43137255</span><br><span class="line"> 0.5483871  0.41666667 0.43478261 0.52       0.72727273 0.65079365</span><br><span class="line"> 0.59090909 0.53846154 0.81481481 0.21978022 0.23913043 0.11111111</span><br><span class="line"> 0.83908046 0.78431373 0.18421053 0.62962963 0.69421488 0.7</span><br><span class="line"> 0.67692308 0.69387755 0.71153846 0.62295082 0.44852941 0.37894737</span><br><span class="line"> 0.21348315 0.69172932 0.59433962 0.         0.4        0.45</span><br><span class="line"> 0.23809524 0.29166667 0.42424242 0.5625     0.         0.7244898</span><br><span class="line"> 0.78787879 0.19444444 0.62       0.18181818 0.1        0.46296296</span><br><span class="line"> 0.18518519 0.22727273 0.47887324 0.30769231 0.5483871  0.25</span><br><span class="line"> 0.47368421 0.48       0.8        0.41935484 0.35294118 0.52941176</span><br><span class="line"> 0.40909091 0.80487805 0.11428571 0.23809524 0.43333333 0.15789474</span><br><span class="line"> 0.57142857 0.39655172 0.63513514 0.66666667 0.16666667 0.10714286</span><br><span class="line"> 0.59459459 0.7804878  0.48837209 0.61111111 0.70093458 0.25806452</span><br><span class="line"> 0.07407407 0.16666667 0.58479532 0.48529412 0.33673469 0.5462963</span><br><span class="line"> 0.1875     0.63265306 0.65853659 0.61904762 0.46067416 0.73913043</span><br><span class="line"> 0.49122807 0.34065934 0.58823529 0.         0.66216216 0.33333333</span><br><span class="line"> 0.56603774 0.36666667 0.34545455 0.79787234 0.29268293 0.5625</span><br><span class="line"> 0.79545455 0.60784314 0.36363636 0.5        0.27777778 0.42857143</span><br><span class="line"> 0.49056604 0.62962963 0.13793103 0.63461538 0.26       0.22222222</span><br><span class="line"> 0.23684211 0.4        0.65562914 0.4137931  0.07142857 0.3</span><br><span class="line"> 0.11864407 0.63157895 0.67       0.37209302 0.45454545 0.48305085</span><br><span class="line"> 0.57333333 0.47887324 0.63207547 0.13432836 0.53125    0.8</span><br><span class="line"> 0.68484848 0.29032258 0.33333333 0.83333333 0.52380952 0.23529412</span><br><span class="line"> 0.26229508 0.34285714 0.46534653 0.28125    0.48148148 0.325</span><br><span class="line"> 0.34       0.37931034 0.7254902  0.75757576 0.9223301  0.86792453</span><br><span class="line"> 0.74074074 0.7027027  0.38095238 0.64028777 0.70072993 0.71052632]</span><br><span class="line">upper bound: 0.48707027638701955</span><br><span class="line">-----Evaluation is finished------</span><br><span class="line">Class Accuracy 47.08%</span><br><span class="line">Overall Prec@1 51.12% Prec@5 79.62%</span><br><span class="line">/home/hs/anaconda3/envs/dzl/lib/python3.7/site-packages/numpy/core/_asarray.py:136: VisibleDeprecationWarning: Creating an ndarray from ragged nested sequences (<span class="built_in">which</span> is a list-or-tuple of lists-or-tuples-or ndarrays with different lengths or shapes) is deprecated. If you meant to <span class="keyword">do</span> this, you must specify <span class="string">'dtype=object'</span> when creating the ndarray</span><br><span class="line">  <span class="built_in">return</span> array(a, dtype, copy=False, order=order, subok=True)</span><br></pre></td></tr></table></figure><h2 id="20201009-rgb-pa-rpa-rgb"><a class="header-anchor" href="#20201009-rgb-pa-rpa-rgb">#</a>20201009 RGB&amp;PA&amp;RPA&amp;RGB</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python test_models.py something --VAP --batch_size=16 -j=4 --test_crops=1 --test_segments=8,8,8,8 --weights=pretrained/PAN_RGB_something_resnet50_shift8_blockres_avg_segment8_e50.pth.tar,pretrained/PAN_PA_something_resnet50_shift8_blockres_avg_segment8_e80.pth.tar,pretrained/PAN_RPA_something_resnet50_shift8_blockres_avg_segment8_e80.pth.tar,pretrained/PAN_RGB_something_resnet50_shift8_blockres_avg_segment8_e50.pth.tar</span></span><br><span class="line">$ bash scripts/<span class="built_in">test</span>/sthv1/AAA.sh </span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     RGB</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line">            </span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     PA</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line">            </span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     PA</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line">            </span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     RGB</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line">            </span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">video 0 <span class="keyword">done</span>, total 0/11522, average 0.221 sec/video, moving Prec@1 56.250 Prec@5 87.500</span><br><span class="line">video 320 <span class="keyword">done</span>, total 320/11522, average 0.055 sec/video, moving Prec@1 55.060 Prec@5 83.036</span><br><span class="line">video 640 <span class="keyword">done</span>, total 640/11522, average 0.053 sec/video, moving Prec@1 55.335 Prec@5 82.012</span><br><span class="line">video 960 <span class="keyword">done</span>, total 960/11522, average 0.052 sec/video, moving Prec@1 54.303 Prec@5 80.840</span><br><span class="line">video 1280 <span class="keyword">done</span>, total 1280/11522, average 0.051 sec/video, moving Prec@1 54.552 Prec@5 81.173</span><br><span class="line">video 1600 <span class="keyword">done</span>, total 1600/11522, average 0.050 sec/video, moving Prec@1 54.455 Prec@5 80.631</span><br><span class="line">video 1920 <span class="keyword">done</span>, total 1920/11522, average 0.050 sec/video, moving Prec@1 53.409 Prec@5 80.217</span><br><span class="line">video 2240 <span class="keyword">done</span>, total 2240/11522, average 0.050 sec/video, moving Prec@1 53.236 Prec@5 80.319</span><br><span class="line">video 2560 <span class="keyword">done</span>, total 2560/11522, average 0.050 sec/video, moving Prec@1 53.106 Prec@5 80.435</span><br><span class="line">video 2880 <span class="keyword">done</span>, total 2880/11522, average 0.050 sec/video, moving Prec@1 52.624 Prec@5 80.249</span><br><span class="line">video 3200 <span class="keyword">done</span>, total 3200/11522, average 0.049 sec/video, moving Prec@1 52.239 Prec@5 80.224</span><br><span class="line">video 3520 <span class="keyword">done</span>, total 3520/11522, average 0.049 sec/video, moving Prec@1 52.206 Prec@5 80.119</span><br><span class="line">video 3840 <span class="keyword">done</span>, total 3840/11522, average 0.049 sec/video, moving Prec@1 52.127 Prec@5 79.798</span><br><span class="line">video 4160 <span class="keyword">done</span>, total 4160/11522, average 0.049 sec/video, moving Prec@1 51.796 Prec@5 79.765</span><br><span class="line">video 4480 <span class="keyword">done</span>, total 4480/11522, average 0.049 sec/video, moving Prec@1 51.646 Prec@5 79.760</span><br><span class="line">video 4800 <span class="keyword">done</span>, total 4800/11522, average 0.049 sec/video, moving Prec@1 51.474 Prec@5 79.360</span><br><span class="line">video 5120 <span class="keyword">done</span>, total 5120/11522, average 0.049 sec/video, moving Prec@1 51.188 Prec@5 79.186</span><br><span class="line">video 5440 <span class="keyword">done</span>, total 5440/11522, average 0.049 sec/video, moving Prec@1 51.338 Prec@5 79.362</span><br><span class="line">video 5760 <span class="keyword">done</span>, total 5760/11522, average 0.049 sec/video, moving Prec@1 51.229 Prec@5 79.190</span><br><span class="line">video 6080 <span class="keyword">done</span>, total 6080/11522, average 0.049 sec/video, moving Prec@1 51.280 Prec@5 79.331</span><br><span class="line">video 6400 <span class="keyword">done</span>, total 6400/11522, average 0.049 sec/video, moving Prec@1 51.372 Prec@5 79.520</span><br><span class="line">video 6720 <span class="keyword">done</span>, total 6720/11522, average 0.049 sec/video, moving Prec@1 51.292 Prec@5 79.528</span><br><span class="line">video 7040 <span class="keyword">done</span>, total 7040/11522, average 0.049 sec/video, moving Prec@1 51.361 Prec@5 79.478</span><br><span class="line">video 7360 <span class="keyword">done</span>, total 7360/11522, average 0.049 sec/video, moving Prec@1 51.315 Prec@5 79.366</span><br><span class="line">video 7680 <span class="keyword">done</span>, total 7680/11522, average 0.049 sec/video, moving Prec@1 51.494 Prec@5 79.548</span><br><span class="line">video 8000 <span class="keyword">done</span>, total 8000/11522, average 0.049 sec/video, moving Prec@1 51.422 Prec@5 79.591</span><br><span class="line">video 8320 <span class="keyword">done</span>, total 8320/11522, average 0.049 sec/video, moving Prec@1 51.476 Prec@5 79.667</span><br><span class="line">video 8640 <span class="keyword">done</span>, total 8640/11522, average 0.049 sec/video, moving Prec@1 51.340 Prec@5 79.656</span><br><span class="line">video 8960 <span class="keyword">done</span>, total 8960/11522, average 0.049 sec/video, moving Prec@1 51.326 Prec@5 79.690</span><br><span class="line">video 9280 <span class="keyword">done</span>, total 9280/11522, average 0.049 sec/video, moving Prec@1 51.366 Prec@5 79.669</span><br><span class="line">video 9600 <span class="keyword">done</span>, total 9600/11522, average 0.049 sec/video, moving Prec@1 51.466 Prec@5 79.732</span><br><span class="line">video 9920 <span class="keyword">done</span>, total 9920/11522, average 0.049 sec/video, moving Prec@1 51.449 Prec@5 79.740</span><br><span class="line">video 10240 <span class="keyword">done</span>, total 10240/11522, average 0.049 sec/video, moving Prec@1 51.511 Prec@5 79.846</span><br><span class="line">video 10560 <span class="keyword">done</span>, total 10560/11522, average 0.049 sec/video, moving Prec@1 51.560 Prec@5 79.870</span><br><span class="line">video 10880 <span class="keyword">done</span>, total 10880/11522, average 0.049 sec/video, moving Prec@1 51.597 Prec@5 79.956</span><br><span class="line">video 11200 <span class="keyword">done</span>, total 11200/11522, average 0.049 sec/video, moving Prec@1 51.649 Prec@5 79.939</span><br><span class="line">video 11520 <span class="keyword">done</span>, total 11520/11522, average 0.049 sec/video, moving Prec@1 51.536 Prec@5 79.865</span><br><span class="line">[0.89552239 0.325      0.28571429 0.64179104 0.44736842 0.46551724</span><br><span class="line"> 0.70149254 0.41176471 0.63106796 0.70873786 0.41333333 0.48611111</span><br><span class="line"> 0.30851064 0.41935484 0.75159236 0.46       0.23493976 0.275</span><br><span class="line"> 0.42276423 0.34666667 0.344      0.62068966 0.5        0.43137255</span><br><span class="line"> 0.51612903 0.41666667 0.43478261 0.48       0.72727273 0.61904762</span><br><span class="line"> 0.63636364 0.57692308 0.83333333 0.25274725 0.32608696 0.16666667</span><br><span class="line"> 0.82758621 0.79411765 0.10526316 0.59259259 0.68595041 0.66</span><br><span class="line"> 0.70769231 0.67346939 0.69230769 0.57377049 0.46323529 0.41052632</span><br><span class="line"> 0.17977528 0.69924812 0.6509434  0.         0.36       0.4</span><br><span class="line"> 0.23809524 0.25       0.42424242 0.5625     0.         0.75510204</span><br><span class="line"> 0.81818182 0.19444444 0.66       0.18181818 0.1        0.49074074</span><br><span class="line"> 0.14814815 0.22727273 0.45070423 0.34615385 0.5483871  0.21428571</span><br><span class="line"> 0.5        0.52       0.81666667 0.51612903 0.35294118 0.52941176</span><br><span class="line"> 0.36363636 0.80487805 0.08571429 0.21428571 0.4        0.15789474</span><br><span class="line"> 0.6        0.37931034 0.59459459 0.65079365 0.27777778 0.07142857</span><br><span class="line"> 0.59459459 0.75609756 0.55813953 0.58333333 0.68224299 0.25806452</span><br><span class="line"> 0.03703704 0.11904762 0.56140351 0.5        0.30612245 0.5462963</span><br><span class="line"> 0.203125   0.6122449  0.65853659 0.63809524 0.53932584 0.73913043</span><br><span class="line"> 0.47368421 0.32967033 0.60784314 0.05882353 0.67567568 0.28571429</span><br><span class="line"> 0.62264151 0.43333333 0.38181818 0.78723404 0.31707317 0.58333333</span><br><span class="line"> 0.81818182 0.60784314 0.36363636 0.5        0.30555556 0.46938776</span><br><span class="line"> 0.45283019 0.62962963 0.15862069 0.625      0.28       0.25925926</span><br><span class="line"> 0.28947368 0.3        0.67549669 0.46551724 0.07142857 0.36666667</span><br><span class="line"> 0.15254237 0.56578947 0.67       0.39534884 0.38636364 0.46610169</span><br><span class="line"> 0.58666667 0.45774648 0.63207547 0.1641791  0.5625     0.824</span><br><span class="line"> 0.68484848 0.29032258 0.36666667 0.83333333 0.54761905 0.15686275</span><br><span class="line"> 0.29508197 0.31428571 0.48514851 0.375      0.5        0.425</span><br><span class="line"> 0.32       0.4137931  0.71568627 0.77272727 0.9223301  0.87735849</span><br><span class="line"> 0.75925926 0.7027027  0.45714286 0.62589928 0.69343066 0.71052632]</span><br><span class="line">upper bound: 0.4923224364393845</span><br><span class="line">-----Evaluation is finished------</span><br><span class="line">Class Accuracy 47.49%</span><br><span class="line">Overall Prec@1 51.54% Prec@5 79.86%</span><br><span class="line">/home/hs/anaconda3/envs/dzl/lib/python3.7/site-packages/numpy/core/_asarray.py:136: VisibleDeprecationWarning: Creating an ndarray from ragged nested sequences (<span class="built_in">which</span> is a list-or-tuple of lists-or-tuples-or ndarrays with different lengths or shapes) is deprecated. If you meant to <span class="keyword">do</span> this, you must specify <span class="string">'dtype=object'</span> when creating the ndarray</span><br><span class="line">  <span class="built_in">return</span> array(a, dtype, copy=False, order=order, subok=True)</span><br></pre></td></tr></table></figure><h2 id="20201009-rgb-pa-rpa-rgb-lite-lite"><a class="header-anchor" href="#20201009-rgb-pa-rpa-rgb-lite-lite">#</a>20201009 RGB&amp;PA&amp;RPA&amp;RGB&amp;Lite&amp;Lite</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python test_models.py something --VAP --batch_size=8 -j=4 --test_crops=1 --test_segments=8,8,8,8,8,8 --weights=pretrained/PAN_RGB_something_resnet50_shift8_blockres_avg_segment8_e50.pth.tar,pretrained/PAN_PA_something_resnet50_shift8_blockres_avg_segment8_e80.pth.tar,pretrained/PAN_RPA_something_resnet50_shift8_blockres_avg_segment8_e80.pth.tar,pretrained/PAN_RGB_something_resnet50_shift8_blockres_avg_segment8_e50.pth.tar,pretrained/PAN_Lite_something_resnet50_shift8_blockres_avg_segment8_e80.pth.tar,pretrained/PAN_Lite_something_resnet50_shift8_blockres_avg_segment8_e80.pth.tar --full_res --twice_sample</span></span><br><span class="line">$ bash scripts/<span class="built_in">test</span>/sthv1/6.sh </span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     RGB</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line">            </span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">=&gt; Using twice sample <span class="keyword">for</span> the dataset...</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     PA</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line">            </span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">=&gt; Using twice sample <span class="keyword">for</span> the dataset...</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     PA</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line">            </span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">=&gt; Using twice sample <span class="keyword">for</span> the dataset...</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     RGB</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line">            </span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">=&gt; Using twice sample <span class="keyword">for</span> the dataset...</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     Lite</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line">            </span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">=&gt; Converting the ImageNet model to a PAN_Lite init model</span><br><span class="line">=&gt; Done. PAN_lite model ready...</span><br><span class="line">=&gt; Using twice sample <span class="keyword">for</span> the dataset...</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     Lite</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line">            </span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">=&gt; Converting the ImageNet model to a PAN_Lite init model</span><br><span class="line">=&gt; Done. PAN_lite model ready...</span><br><span class="line">=&gt; Using twice sample <span class="keyword">for</span> the dataset...</span><br><span class="line">video number:11522</span><br><span class="line">video 0 <span class="keyword">done</span>, total 0/11522, average 1.315 sec/video, moving Prec@1 50.000 Prec@5 75.000</span><br><span class="line">video 160 <span class="keyword">done</span>, total 160/11522, average 0.300 sec/video, moving Prec@1 57.738 Prec@5 86.310</span><br><span class="line">video 320 <span class="keyword">done</span>, total 320/11522, average 0.314 sec/video, moving Prec@1 55.793 Prec@5 85.366</span><br><span class="line">video 480 <span class="keyword">done</span>, total 480/11522, average 0.318 sec/video, moving Prec@1 57.582 Prec@5 85.656</span><br><span class="line">video 640 <span class="keyword">done</span>, total 640/11522, average 0.318 sec/video, moving Prec@1 56.636 Prec@5 83.796</span><br><span class="line">video 800 <span class="keyword">done</span>, total 800/11522, average 0.322 sec/video, moving Prec@1 55.569 Prec@5 82.673</span><br><span class="line">video 960 <span class="keyword">done</span>, total 960/11522, average 0.322 sec/video, moving Prec@1 55.062 Prec@5 82.541</span><br><span class="line">video 1120 <span class="keyword">done</span>, total 1120/11522, average 0.321 sec/video, moving Prec@1 56.206 Prec@5 83.067</span><br><span class="line">video 1280 <span class="keyword">done</span>, total 1280/11522, average 0.321 sec/video, moving Prec@1 56.522 Prec@5 83.307</span><br><span class="line">video 1440 <span class="keyword">done</span>, total 1440/11522, average 0.320 sec/video, moving Prec@1 56.354 Prec@5 82.942</span><br><span class="line">video 1600 <span class="keyword">done</span>, total 1600/11522, average 0.320 sec/video, moving Prec@1 56.468 Prec@5 83.022</span><br><span class="line">video 1760 <span class="keyword">done</span>, total 1760/11522, average 0.320 sec/video, moving Prec@1 55.826 Prec@5 82.579</span><br><span class="line">video 1920 <span class="keyword">done</span>, total 1920/11522, average 0.320 sec/video, moving Prec@1 55.705 Prec@5 82.573</span><br><span class="line">video 2080 <span class="keyword">done</span>, total 2080/11522, average 0.321 sec/video, moving Prec@1 55.603 Prec@5 82.375</span><br><span class="line">video 2240 <span class="keyword">done</span>, total 2240/11522, average 0.321 sec/video, moving Prec@1 55.783 Prec@5 82.429</span><br><span class="line">video 2400 <span class="keyword">done</span>, total 2400/11522, average 0.321 sec/video, moving Prec@1 55.399 Prec@5 82.018</span><br><span class="line">video 2560 <span class="keyword">done</span>, total 2560/11522, average 0.321 sec/video, moving Prec@1 55.335 Prec@5 82.009</span><br><span class="line">video 2720 <span class="keyword">done</span>, total 2720/11522, average 0.321 sec/video, moving Prec@1 55.389 Prec@5 82.111</span><br><span class="line">video 2880 <span class="keyword">done</span>, total 2880/11522, average 0.320 sec/video, moving Prec@1 55.090 Prec@5 82.168</span><br><span class="line">video 3040 <span class="keyword">done</span>, total 3040/11522, average 0.320 sec/video, moving Prec@1 54.921 Prec@5 82.283</span><br><span class="line">video 3200 <span class="keyword">done</span>, total 3200/11522, average 0.321 sec/video, moving Prec@1 54.426 Prec@5 82.170</span><br><span class="line">video 3360 <span class="keyword">done</span>, total 3360/11522, average 0.320 sec/video, moving Prec@1 54.365 Prec@5 82.452</span><br><span class="line">video 3520 <span class="keyword">done</span>, total 3520/11522, average 0.321 sec/video, moving Prec@1 54.223 Prec@5 82.115</span><br><span class="line">video 3680 <span class="keyword">done</span>, total 3680/11522, average 0.321 sec/video, moving Prec@1 54.094 Prec@5 81.860</span><br><span class="line">video 3840 <span class="keyword">done</span>, total 3840/11522, average 0.321 sec/video, moving Prec@1 54.314 Prec@5 81.861</span><br><span class="line">video 4000 <span class="keyword">done</span>, total 4000/11522, average 0.321 sec/video, moving Prec@1 54.167 Prec@5 81.737</span><br><span class="line">video 4160 <span class="keyword">done</span>, total 4160/11522, average 0.321 sec/video, moving Prec@1 54.079 Prec@5 81.694</span><br><span class="line">video 4320 <span class="keyword">done</span>, total 4320/11522, average 0.321 sec/video, moving Prec@1 53.997 Prec@5 81.608</span><br><span class="line">video 4480 <span class="keyword">done</span>, total 4480/11522, average 0.321 sec/video, moving Prec@1 53.922 Prec@5 81.640</span><br><span class="line">video 4640 <span class="keyword">done</span>, total 4640/11522, average 0.321 sec/video, moving Prec@1 53.894 Prec@5 81.497</span><br><span class="line">video 4800 <span class="keyword">done</span>, total 4800/11522, average 0.321 sec/video, moving Prec@1 53.765 Prec@5 81.448</span><br><span class="line">video 4960 <span class="keyword">done</span>, total 4960/11522, average 0.321 sec/video, moving Prec@1 53.462 Prec@5 81.200</span><br><span class="line">video 5120 <span class="keyword">done</span>, total 5120/11522, average 0.321 sec/video, moving Prec@1 53.432 Prec@5 81.162</span><br><span class="line">video 5280 <span class="keyword">done</span>, total 5280/11522, average 0.322 sec/video, moving Prec@1 53.423 Prec@5 81.127</span><br><span class="line">video 5440 <span class="keyword">done</span>, total 5440/11522, average 0.321 sec/video, moving Prec@1 53.616 Prec@5 81.351</span><br><span class="line">video 5600 <span class="keyword">done</span>, total 5600/11522, average 0.321 sec/video, moving Prec@1 53.709 Prec@5 81.384</span><br><span class="line">video 5760 <span class="keyword">done</span>, total 5760/11522, average 0.321 sec/video, moving Prec@1 53.589 Prec@5 81.224</span><br><span class="line">video 5920 <span class="keyword">done</span>, total 5920/11522, average 0.321 sec/video, moving Prec@1 53.492 Prec@5 81.275</span><br><span class="line">video 6080 <span class="keyword">done</span>, total 6080/11522, average 0.322 sec/video, moving Prec@1 53.400 Prec@5 81.340</span><br><span class="line">video 6240 <span class="keyword">done</span>, total 6240/11522, average 0.322 sec/video, moving Prec@1 53.457 Prec@5 81.354</span><br><span class="line">video 6400 <span class="keyword">done</span>, total 6400/11522, average 0.322 sec/video, moving Prec@1 53.480 Prec@5 81.445</span><br><span class="line">video 6560 <span class="keyword">done</span>, total 6560/11522, average 0.321 sec/video, moving Prec@1 53.426 Prec@5 81.532</span><br><span class="line">video 6720 <span class="keyword">done</span>, total 6720/11522, average 0.321 sec/video, moving Prec@1 53.404 Prec@5 81.495</span><br><span class="line">video 6880 <span class="keyword">done</span>, total 6880/11522, average 0.321 sec/video, moving Prec@1 53.296 Prec@5 81.402</span><br><span class="line">video 7040 <span class="keyword">done</span>, total 7040/11522, average 0.321 sec/video, moving Prec@1 53.348 Prec@5 81.413</span><br><span class="line">video 7200 <span class="keyword">done</span>, total 7200/11522, average 0.321 sec/video, moving Prec@1 53.344 Prec@5 81.396</span><br><span class="line">video 7360 <span class="keyword">done</span>, total 7360/11522, average 0.321 sec/video, moving Prec@1 53.312 Prec@5 81.325</span><br><span class="line">video 7520 <span class="keyword">done</span>, total 7520/11522, average 0.321 sec/video, moving Prec@1 53.374 Prec@5 81.389</span><br><span class="line">video 7680 <span class="keyword">done</span>, total 7680/11522, average 0.322 sec/video, moving Prec@1 53.356 Prec@5 81.413</span><br><span class="line">video 7840 <span class="keyword">done</span>, total 7840/11522, average 0.322 sec/video, moving Prec@1 53.313 Prec@5 81.397</span><br><span class="line">video 8000 <span class="keyword">done</span>, total 8000/11522, average 0.322 sec/video, moving Prec@1 53.247 Prec@5 81.381</span><br><span class="line">video 8160 <span class="keyword">done</span>, total 8160/11522, average 0.322 sec/video, moving Prec@1 53.293 Prec@5 81.428</span><br><span class="line">video 8320 <span class="keyword">done</span>, total 8320/11522, average 0.321 sec/video, moving Prec@1 53.338 Prec@5 81.460</span><br><span class="line">video 8480 <span class="keyword">done</span>, total 8480/11522, average 0.322 sec/video, moving Prec@1 53.228 Prec@5 81.374</span><br><span class="line">video 8640 <span class="keyword">done</span>, total 8640/11522, average 0.322 sec/video, moving Prec@1 53.076 Prec@5 81.406</span><br><span class="line">video 8800 <span class="keyword">done</span>, total 8800/11522, average 0.322 sec/video, moving Prec@1 53.134 Prec@5 81.460</span><br><span class="line">video 8960 <span class="keyword">done</span>, total 8960/11522, average 0.322 sec/video, moving Prec@1 53.066 Prec@5 81.479</span><br><span class="line">video 9120 <span class="keyword">done</span>, total 9120/11522, average 0.321 sec/video, moving Prec@1 53.024 Prec@5 81.453</span><br><span class="line">video 9280 <span class="keyword">done</span>, total 9280/11522, average 0.321 sec/video, moving Prec@1 53.025 Prec@5 81.449</span><br><span class="line">video 9440 <span class="keyword">done</span>, total 9440/11522, average 0.322 sec/video, moving Prec@1 53.059 Prec@5 81.425</span><br><span class="line">video 9600 <span class="keyword">done</span>, total 9600/11522, average 0.321 sec/video, moving Prec@1 53.143 Prec@5 81.495</span><br><span class="line">video 9760 <span class="keyword">done</span>, total 9760/11522, average 0.321 sec/video, moving Prec@1 53.184 Prec@5 81.511</span><br><span class="line">video 9920 <span class="keyword">done</span>, total 9920/11522, average 0.322 sec/video, moving Prec@1 53.112 Prec@5 81.467</span><br><span class="line">video 10080 <span class="keyword">done</span>, total 10080/11522, average 0.322 sec/video, moving Prec@1 53.202 Prec@5 81.572</span><br><span class="line">video 10240 <span class="keyword">done</span>, total 10240/11522, average 0.322 sec/video, moving Prec@1 53.230 Prec@5 81.616</span><br><span class="line">video 10400 <span class="keyword">done</span>, total 10400/11522, average 0.322 sec/video, moving Prec@1 53.324 Prec@5 81.572</span><br><span class="line">video 10560 <span class="keyword">done</span>, total 10560/11522, average 0.322 sec/video, moving Prec@1 53.340 Prec@5 81.558</span><br><span class="line">video 10720 <span class="keyword">done</span>, total 10720/11522, average 0.322 sec/video, moving Prec@1 53.384 Prec@5 81.572</span><br><span class="line">video 10880 <span class="keyword">done</span>, total 10880/11522, average 0.322 sec/video, moving Prec@1 53.398 Prec@5 81.585</span><br><span class="line">video 11040 <span class="keyword">done</span>, total 11040/11522, average 0.322 sec/video, moving Prec@1 53.385 Prec@5 81.598</span><br><span class="line">video 11200 <span class="keyword">done</span>, total 11200/11522, average 0.322 sec/video, moving Prec@1 53.462 Prec@5 81.620</span><br><span class="line">video 11360 <span class="keyword">done</span>, total 11360/11522, average 0.322 sec/video, moving Prec@1 53.439 Prec@5 81.606</span><br><span class="line">video 11520 <span class="keyword">done</span>, total 11520/11522, average 0.321 sec/video, moving Prec@1 53.524 Prec@5 81.592</span><br><span class="line">[0.89552239 0.4375     0.3047619  0.67164179 0.47368421 0.49137931</span><br><span class="line"> 0.69402985 0.5        0.73786408 0.73786408 0.52       0.52777778</span><br><span class="line"> 0.41489362 0.41935484 0.8089172  0.48       0.24698795 0.35</span><br><span class="line"> 0.49593496 0.37333333 0.416      0.63793103 0.44444444 0.41176471</span><br><span class="line"> 0.51612903 0.41666667 0.52173913 0.4        0.6969697  0.74603175</span><br><span class="line"> 0.63636364 0.53846154 0.87037037 0.25274725 0.26086957 0.16666667</span><br><span class="line"> 0.8045977  0.85294118 0.07894737 0.62962963 0.7107438  0.66</span><br><span class="line"> 0.72307692 0.69387755 0.71153846 0.67213115 0.47058824 0.43157895</span><br><span class="line"> 0.29213483 0.72932331 0.61320755 0.         0.24       0.55</span><br><span class="line"> 0.23809524 0.20833333 0.51515152 0.5        0.         0.7755102</span><br><span class="line"> 0.78787879 0.25       0.62       0.12727273 0.16666667 0.55555556</span><br><span class="line"> 0.11111111 0.24242424 0.43661972 0.42307692 0.51612903 0.25</span><br><span class="line"> 0.47368421 0.56       0.83333333 0.58064516 0.29411765 0.47058824</span><br><span class="line"> 0.40909091 0.82926829 0.11428571 0.11904762 0.43333333 0.15789474</span><br><span class="line"> 0.62857143 0.39655172 0.64864865 0.77777778 0.11111111 0.08928571</span><br><span class="line"> 0.59459459 0.75609756 0.55813953 0.61111111 0.75700935 0.25806452</span><br><span class="line"> 0.03703704 0.16666667 0.60818713 0.51470588 0.3877551  0.58333333</span><br><span class="line"> 0.234375   0.53061224 0.70731707 0.6952381  0.62921348 0.75362319</span><br><span class="line"> 0.43859649 0.36263736 0.62745098 0.11764706 0.64864865 0.38095238</span><br><span class="line"> 0.66981132 0.46666667 0.32727273 0.78723404 0.31707317 0.60416667</span><br><span class="line"> 0.81818182 0.60784314 0.41818182 0.45       0.27777778 0.51020408</span><br><span class="line"> 0.45283019 0.62962963 0.17241379 0.68269231 0.3        0.18518519</span><br><span class="line"> 0.39473684 0.26666667 0.70198675 0.46551724 0.14285714 0.2</span><br><span class="line"> 0.15254237 0.65789474 0.66       0.3255814  0.52272727 0.48305085</span><br><span class="line"> 0.54666667 0.50704225 0.64150943 0.20895522 0.53125    0.736</span><br><span class="line"> 0.67272727 0.29032258 0.35       0.88888889 0.5952381  0.19607843</span><br><span class="line"> 0.24590164 0.35714286 0.53465347 0.34375    0.48148148 0.375</span><br><span class="line"> 0.36       0.4137931  0.69607843 0.81818182 0.9223301  0.91509434</span><br><span class="line"> 0.74074074 0.7027027  0.47619048 0.61151079 0.7080292  0.71052632]</span><br><span class="line">upper bound: 0.5069670549400674</span><br><span class="line">-----Evaluation is finished------</span><br><span class="line">Class Accuracy 48.98%</span><br><span class="line">Overall Prec@1 53.52% Prec@5 81.59%</span><br><span class="line">/home/hs/anaconda3/envs/dzl/lib/python3.7/site-packages/numpy/core/_asarray.py:136: VisibleDeprecationWarning: Creating an ndarray from ragged nested sequences (<span class="built_in">which</span> is a list-or-tuple of lists-or-tuples-or ndarrays with different lengths or shapes) is deprecated. If you meant to <span class="keyword">do</span> this, you must specify <span class="string">'dtype=object'</span> when creating the ndarray</span><br><span class="line">  <span class="built_in">return</span> array(a, dtype, copy=False, order=order, subok=True)</span><br></pre></td></tr></table></figure><h2 id="20201009-rgb-pa-liteï¼ˆè®ºæ–‡ç»“æœï¼‰"><a class="header-anchor" href="#20201009-rgb-pa-liteï¼ˆè®ºæ–‡ç»“æœï¼‰">#</a>20201009 RGB&amp;PA&amp;Liteï¼ˆè®ºæ–‡ç»“æœï¼‰</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python test_models.py something --VAP --batch_size=16 -j=4 --test_crops=1 --test_segments=8,8,8 --weights=o/PAN_Lite_something_resnet50_shift8_blockres_avg_segment8_e80.pth.tar,o/PAN_RGB_something_resnet50_shift8_blockres_avg_segment8_e50.pth.tar,o/PAN_PA_something_resnet50_shift8_blockres_avg_segment8_e80.pth.tar --full_res --twice_sample</span></span><br><span class="line">$ bash scripts/<span class="built_in">test</span>/sthv1/En.sh </span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     Lite</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line">            </span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">=&gt; Converting the ImageNet model to a PAN_Lite init model</span><br><span class="line">=&gt; Done. PAN_lite model ready...</span><br><span class="line">=&gt; Using twice sample <span class="keyword">for</span> the dataset...</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     RGB</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line">            </span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">=&gt; Using twice sample <span class="keyword">for</span> the dataset...</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     PA</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line">            </span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">=&gt; Using twice sample <span class="keyword">for</span> the dataset...</span><br><span class="line">video number:11522</span><br><span class="line">video 0 <span class="keyword">done</span>, total 0/11522, average 1.100 sec/video, moving Prec@1 50.000 Prec@5 75.000</span><br><span class="line">video 320 <span class="keyword">done</span>, total 320/11522, average 0.158 sec/video, moving Prec@1 58.333 Prec@5 84.226</span><br><span class="line">video 640 <span class="keyword">done</span>, total 640/11522, average 0.152 sec/video, moving Prec@1 57.317 Prec@5 83.384</span><br><span class="line">video 960 <span class="keyword">done</span>, total 960/11522, average 0.154 sec/video, moving Prec@1 55.738 Prec@5 81.865</span><br><span class="line">video 1280 <span class="keyword">done</span>, total 1280/11522, average 0.152 sec/video, moving Prec@1 56.327 Prec@5 82.639</span><br><span class="line">video 1600 <span class="keyword">done</span>, total 1600/11522, average 0.151 sec/video, moving Prec@1 56.436 Prec@5 82.364</span><br><span class="line">video 1920 <span class="keyword">done</span>, total 1920/11522, average 0.150 sec/video, moving Prec@1 55.527 Prec@5 81.870</span><br><span class="line">video 2240 <span class="keyword">done</span>, total 2240/11522, average 0.150 sec/video, moving Prec@1 55.230 Prec@5 81.826</span><br><span class="line">video 2560 <span class="keyword">done</span>, total 2560/11522, average 0.149 sec/video, moving Prec@1 54.775 Prec@5 81.677</span><br><span class="line">video 2880 <span class="keyword">done</span>, total 2880/11522, average 0.149 sec/video, moving Prec@1 54.489 Prec@5 81.802</span><br><span class="line">video 3200 <span class="keyword">done</span>, total 3200/11522, average 0.149 sec/video, moving Prec@1 54.073 Prec@5 81.872</span><br><span class="line">video 3520 <span class="keyword">done</span>, total 3520/11522, average 0.149 sec/video, moving Prec@1 53.761 Prec@5 81.900</span><br><span class="line">video 3840 <span class="keyword">done</span>, total 3840/11522, average 0.149 sec/video, moving Prec@1 53.864 Prec@5 81.483</span><br><span class="line">video 4160 <span class="keyword">done</span>, total 4160/11522, average 0.149 sec/video, moving Prec@1 53.736 Prec@5 81.418</span><br><span class="line">video 4480 <span class="keyword">done</span>, total 4480/11522, average 0.149 sec/video, moving Prec@1 53.536 Prec@5 81.539</span><br><span class="line">video 4800 <span class="keyword">done</span>, total 4800/11522, average 0.148 sec/video, moving Prec@1 53.447 Prec@5 81.292</span><br><span class="line">video 5120 <span class="keyword">done</span>, total 5120/11522, average 0.149 sec/video, moving Prec@1 53.096 Prec@5 80.900</span><br><span class="line">video 5440 <span class="keyword">done</span>, total 5440/11522, average 0.148 sec/video, moving Prec@1 53.262 Prec@5 81.067</span><br><span class="line">video 5760 <span class="keyword">done</span>, total 5760/11522, average 0.148 sec/video, moving Prec@1 53.220 Prec@5 80.990</span><br><span class="line">video 6080 <span class="keyword">done</span>, total 6080/11522, average 0.148 sec/video, moving Prec@1 53.199 Prec@5 81.119</span><br><span class="line">video 6400 <span class="keyword">done</span>, total 6400/11522, average 0.148 sec/video, moving Prec@1 53.226 Prec@5 81.219</span><br><span class="line">video 6720 <span class="keyword">done</span>, total 6720/11522, average 0.148 sec/video, moving Prec@1 53.162 Prec@5 81.191</span><br><span class="line">video 7040 <span class="keyword">done</span>, total 7040/11522, average 0.148 sec/video, moving Prec@1 53.090 Prec@5 81.179</span><br><span class="line">video 7360 <span class="keyword">done</span>, total 7360/11522, average 0.148 sec/video, moving Prec@1 53.050 Prec@5 81.047</span><br><span class="line">video 7680 <span class="keyword">done</span>, total 7680/11522, average 0.148 sec/video, moving Prec@1 53.106 Prec@5 81.120</span><br><span class="line">video 8000 <span class="keyword">done</span>, total 8000/11522, average 0.148 sec/video, moving Prec@1 53.094 Prec@5 81.025</span><br><span class="line">video 8320 <span class="keyword">done</span>, total 8320/11522, average 0.148 sec/video, moving Prec@1 53.095 Prec@5 81.130</span><br><span class="line">video 8640 <span class="keyword">done</span>, total 8640/11522, average 0.148 sec/video, moving Prec@1 52.934 Prec@5 81.077</span><br><span class="line">video 8960 <span class="keyword">done</span>, total 8960/11522, average 0.148 sec/video, moving Prec@1 53.030 Prec@5 81.061</span><br><span class="line">video 9280 <span class="keyword">done</span>, total 9280/11522, average 0.148 sec/video, moving Prec@1 52.937 Prec@5 81.003</span><br><span class="line">video 9600 <span class="keyword">done</span>, total 9600/11522, average 0.148 sec/video, moving Prec@1 53.068 Prec@5 81.011</span><br><span class="line">video 9920 <span class="keyword">done</span>, total 9920/11522, average 0.148 sec/video, moving Prec@1 53.110 Prec@5 80.988</span><br><span class="line">video 10240 <span class="keyword">done</span>, total 10240/11522, average 0.148 sec/video, moving Prec@1 53.218 Prec@5 81.094</span><br><span class="line">video 10560 <span class="keyword">done</span>, total 10560/11522, average 0.148 sec/video, moving Prec@1 53.262 Prec@5 81.014</span><br><span class="line">video 10880 <span class="keyword">done</span>, total 10880/11522, average 0.147 sec/video, moving Prec@1 53.387 Prec@5 81.057</span><br><span class="line">video 11200 <span class="keyword">done</span>, total 11200/11522, average 0.147 sec/video, moving Prec@1 53.424 Prec@5 81.054</span><br><span class="line">video 11520 <span class="keyword">done</span>, total 11520/11522, average 0.147 sec/video, moving Prec@1 53.428 Prec@5 81.062</span><br><span class="line">[0.92537313 0.4125     0.35238095 0.68656716 0.36842105 0.52586207</span><br><span class="line"> 0.70149254 0.52941176 0.73786408 0.73786408 0.57333333 0.54166667</span><br><span class="line"> 0.40425532 0.4516129  0.79617834 0.44       0.24698795 0.2875</span><br><span class="line"> 0.42276423 0.4        0.456      0.62068966 0.55555556 0.47058824</span><br><span class="line"> 0.4516129  0.33333333 0.47826087 0.36       0.66666667 0.68253968</span><br><span class="line"> 0.68181818 0.53846154 0.85185185 0.30769231 0.2173913  0.13888889</span><br><span class="line"> 0.8045977  0.80392157 0.10526316 0.66666667 0.72727273 0.64</span><br><span class="line"> 0.7        0.69387755 0.73076923 0.63934426 0.47794118 0.41052632</span><br><span class="line"> 0.28089888 0.7443609  0.67924528 0.         0.44       0.5</span><br><span class="line"> 0.14285714 0.20833333 0.36363636 0.53125    0.         0.71428571</span><br><span class="line"> 0.81818182 0.25       0.58       0.13636364 0.16666667 0.5</span><br><span class="line"> 0.16666667 0.24242424 0.47887324 0.30769231 0.5483871  0.32142857</span><br><span class="line"> 0.5        0.56       0.81666667 0.5483871  0.23529412 0.58823529</span><br><span class="line"> 0.31818182 0.85365854 0.08571429 0.23809524 0.33333333 0.21052632</span><br><span class="line"> 0.62857143 0.43103448 0.67567568 0.79365079 0.05555556 0.14285714</span><br><span class="line"> 0.64864865 0.73170732 0.55813953 0.62962963 0.78504673 0.33870968</span><br><span class="line"> 0.03703704 0.16666667 0.59649123 0.5        0.39795918 0.5462963</span><br><span class="line"> 0.234375   0.42857143 0.70731707 0.66666667 0.52808989 0.69565217</span><br><span class="line"> 0.49122807 0.37362637 0.64705882 0.05882353 0.67567568 0.33333333</span><br><span class="line"> 0.66981132 0.46666667 0.29090909 0.78723404 0.31707317 0.625</span><br><span class="line"> 0.79545455 0.60784314 0.39090909 0.45       0.27777778 0.48979592</span><br><span class="line"> 0.52830189 0.57407407 0.15172414 0.68269231 0.26       0.22222222</span><br><span class="line"> 0.31578947 0.33333333 0.7218543  0.46551724 0.07142857 0.16666667</span><br><span class="line"> 0.11864407 0.60526316 0.69       0.34883721 0.47727273 0.42372881</span><br><span class="line"> 0.54666667 0.50704225 0.62264151 0.19402985 0.625      0.784</span><br><span class="line"> 0.6969697  0.22580645 0.36666667 0.85185185 0.64285714 0.21568627</span><br><span class="line"> 0.27868852 0.37142857 0.52475248 0.3125     0.5        0.4</span><br><span class="line"> 0.34       0.4137931  0.67647059 0.8030303  0.93203883 0.9245283</span><br><span class="line"> 0.75925926 0.72972973 0.41904762 0.6618705  0.7080292  0.72368421]</span><br><span class="line">upper bound: 0.507994552098881</span><br><span class="line">-----Evaluation is finished------</span><br><span class="line">Class Accuracy 48.71%</span><br><span class="line">Overall Prec@1 53.43% Prec@5 81.06%</span><br><span class="line">/home/hs/anaconda3/envs/dzl/lib/python3.7/site-packages/numpy/core/_asarray.py:136: VisibleDeprecationWarning: Creating an ndarray from ragged nested sequences (<span class="built_in">which</span> is a list-or-tuple of lists-or-tuples-or ndarrays with different lengths or shapes) is deprecated. If you meant to <span class="keyword">do</span> this, you must specify <span class="string">'dtype=object'</span> when creating the ndarray</span><br><span class="line">  <span class="built_in">return</span> array(a, dtype, copy=False, order=order, subok=True)</span><br></pre></td></tr></table></figure><h2 id="20201012-mypa-myrpa-rgb"><a class="header-anchor" href="#20201012-mypa-myrpa-rgb">#</a>20201012 MyPA&amp;MyRPA&amp;RGB</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python test_models.py something --VAP --batch_size=16 -j=4 --test_crops=1 --test_segments=8,8,8 --weights=pretrained/PAN_RGB_something_resnet50_shift8_blockres_avg_segment8_e50.pth.tar,pretrained/PAN_PA_something_resnet50_shift8_blockres_avg_segment8_e80.pth.tar,pretrained/PAN_RPA_something_resnet50_shift8_blockres_avg_segment8_e80.pth.tar --coeff=2,1,1</span></span><br><span class="line">$ bash scripts/<span class="built_in">test</span>/sthv1/3.sh </span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     RGB</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line">            </span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     PA</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line">            </span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">video 0 <span class="keyword">done</span>, total 0/11522, average 0.328 sec/video, moving Prec@1 50.000 Prec@5 87.500</span><br><span class="line">video 320 <span class="keyword">done</span>, total 320/11522, average 0.055 sec/video, moving Prec@1 56.845 Prec@5 83.036</span><br><span class="line">video 640 <span class="keyword">done</span>, total 640/11522, average 0.051 sec/video, moving Prec@1 56.555 Prec@5 82.317</span><br><span class="line">video 960 <span class="keyword">done</span>, total 960/11522, average 0.049 sec/video, moving Prec@1 55.225 Prec@5 80.328</span><br><span class="line">video 1280 <span class="keyword">done</span>, total 1280/11522, average 0.048 sec/video, moving Prec@1 55.941 Prec@5 80.478</span><br><span class="line">video 1600 <span class="keyword">done</span>, total 1600/11522, average 0.047 sec/video, moving Prec@1 55.755 Prec@5 80.012</span><br><span class="line">video 1920 <span class="keyword">done</span>, total 1920/11522, average 0.047 sec/video, moving Prec@1 54.545 Prec@5 79.855</span><br><span class="line">video 2240 <span class="keyword">done</span>, total 2240/11522, average 0.047 sec/video, moving Prec@1 54.388 Prec@5 79.920</span><br><span class="line">video 2560 <span class="keyword">done</span>, total 2560/11522, average 0.046 sec/video, moving Prec@1 53.998 Prec@5 80.241</span><br><span class="line">video 2880 <span class="keyword">done</span>, total 2880/11522, average 0.046 sec/video, moving Prec@1 53.522 Prec@5 80.180</span><br><span class="line">video 3200 <span class="keyword">done</span>, total 3200/11522, average 0.046 sec/video, moving Prec@1 53.016 Prec@5 80.162</span><br><span class="line">video 3520 <span class="keyword">done</span>, total 3520/11522, average 0.046 sec/video, moving Prec@1 52.771 Prec@5 80.090</span><br><span class="line">video 3840 <span class="keyword">done</span>, total 3840/11522, average 0.046 sec/video, moving Prec@1 52.567 Prec@5 79.694</span><br><span class="line">video 4160 <span class="keyword">done</span>, total 4160/11522, average 0.046 sec/video, moving Prec@1 52.275 Prec@5 79.717</span><br><span class="line">video 4480 <span class="keyword">done</span>, total 4480/11522, average 0.046 sec/video, moving Prec@1 52.069 Prec@5 79.760</span><br><span class="line">video 4800 <span class="keyword">done</span>, total 4800/11522, average 0.046 sec/video, moving Prec@1 51.973 Prec@5 79.485</span><br><span class="line">video 5120 <span class="keyword">done</span>, total 5120/11522, average 0.046 sec/video, moving Prec@1 51.616 Prec@5 79.167</span><br><span class="line">video 5440 <span class="keyword">done</span>, total 5440/11522, average 0.046 sec/video, moving Prec@1 51.778 Prec@5 79.362</span><br><span class="line">video 5760 <span class="keyword">done</span>, total 5760/11522, average 0.046 sec/video, moving Prec@1 51.697 Prec@5 79.172</span><br><span class="line">video 6080 <span class="keyword">done</span>, total 6080/11522, average 0.046 sec/video, moving Prec@1 51.657 Prec@5 79.298</span><br><span class="line">video 6400 <span class="keyword">done</span>, total 6400/11522, average 0.046 sec/video, moving Prec@1 51.683 Prec@5 79.426</span><br><span class="line">video 6720 <span class="keyword">done</span>, total 6720/11522, average 0.046 sec/video, moving Prec@1 51.618 Prec@5 79.424</span><br><span class="line">video 7040 <span class="keyword">done</span>, total 7040/11522, average 0.046 sec/video, moving Prec@1 51.644 Prec@5 79.365</span><br><span class="line">video 7360 <span class="keyword">done</span>, total 7360/11522, average 0.046 sec/video, moving Prec@1 51.518 Prec@5 79.298</span><br><span class="line">video 7680 <span class="keyword">done</span>, total 7680/11522, average 0.046 sec/video, moving Prec@1 51.624 Prec@5 79.483</span><br><span class="line">video 8000 <span class="keyword">done</span>, total 8000/11522, average 0.046 sec/video, moving Prec@1 51.622 Prec@5 79.516</span><br><span class="line">video 8320 <span class="keyword">done</span>, total 8320/11522, average 0.045 sec/video, moving Prec@1 51.667 Prec@5 79.547</span><br><span class="line">video 8640 <span class="keyword">done</span>, total 8640/11522, average 0.045 sec/video, moving Prec@1 51.502 Prec@5 79.598</span><br><span class="line">video 8960 <span class="keyword">done</span>, total 8960/11522, average 0.045 sec/video, moving Prec@1 51.515 Prec@5 79.623</span><br><span class="line">video 9280 <span class="keyword">done</span>, total 9280/11522, average 0.046 sec/video, moving Prec@1 51.549 Prec@5 79.636</span><br><span class="line">video 9600 <span class="keyword">done</span>, total 9600/11522, average 0.046 sec/video, moving Prec@1 51.674 Prec@5 79.690</span><br><span class="line">video 9920 <span class="keyword">done</span>, total 9920/11522, average 0.045 sec/video, moving Prec@1 51.671 Prec@5 79.760</span><br><span class="line">video 10240 <span class="keyword">done</span>, total 10240/11522, average 0.045 sec/video, moving Prec@1 51.765 Prec@5 79.856</span><br><span class="line">video 10560 <span class="keyword">done</span>, total 10560/11522, average 0.045 sec/video, moving Prec@1 51.834 Prec@5 79.803</span><br><span class="line">video 10880 <span class="keyword">done</span>, total 10880/11522, average 0.045 sec/video, moving Prec@1 51.927 Prec@5 79.892</span><br><span class="line">video 11200 <span class="keyword">done</span>, total 11200/11522, average 0.045 sec/video, moving Prec@1 52.015 Prec@5 79.913</span><br><span class="line">video 11520 <span class="keyword">done</span>, total 11520/11522, average 0.045 sec/video, moving Prec@1 51.883 Prec@5 79.865</span><br><span class="line">[0.89552239 0.35       0.28571429 0.62686567 0.34210526 0.46551724</span><br><span class="line"> 0.68656716 0.41176471 0.69902913 0.66990291 0.36       0.54166667</span><br><span class="line"> 0.32978723 0.41935484 0.75159236 0.54       0.24096386 0.275</span><br><span class="line"> 0.45528455 0.34666667 0.344      0.5862069  0.40740741 0.45098039</span><br><span class="line"> 0.4516129  0.41666667 0.43478261 0.52       0.6969697  0.65079365</span><br><span class="line"> 0.59090909 0.57692308 0.83333333 0.24175824 0.32608696 0.16666667</span><br><span class="line"> 0.8045977  0.80392157 0.05263158 0.59259259 0.67768595 0.7</span><br><span class="line"> 0.71538462 0.65306122 0.71153846 0.60655738 0.45588235 0.44210526</span><br><span class="line"> 0.20224719 0.69924812 0.66037736 0.         0.36       0.4</span><br><span class="line"> 0.14285714 0.29166667 0.42424242 0.5625     0.08333333 0.74489796</span><br><span class="line"> 0.75757576 0.27777778 0.64       0.19090909 0.13333333 0.55555556</span><br><span class="line"> 0.14814815 0.22727273 0.42253521 0.34615385 0.5483871  0.28571429</span><br><span class="line"> 0.47368421 0.52       0.81666667 0.51612903 0.35294118 0.47058824</span><br><span class="line"> 0.36363636 0.7804878  0.08571429 0.16666667 0.4        0.21052632</span><br><span class="line"> 0.6        0.34482759 0.62162162 0.68253968 0.33333333 0.10714286</span><br><span class="line"> 0.59459459 0.80487805 0.51162791 0.62037037 0.71028037 0.30645161</span><br><span class="line"> 0.07407407 0.14285714 0.55555556 0.47058824 0.32653061 0.57407407</span><br><span class="line"> 0.21875    0.63265306 0.62195122 0.67619048 0.52808989 0.72463768</span><br><span class="line"> 0.49122807 0.34065934 0.58823529 0.05882353 0.68918919 0.38095238</span><br><span class="line"> 0.66037736 0.4        0.38181818 0.80851064 0.36585366 0.58333333</span><br><span class="line"> 0.84090909 0.58823529 0.39090909 0.5        0.33333333 0.46938776</span><br><span class="line"> 0.49056604 0.61111111 0.16551724 0.64423077 0.24       0.25925926</span><br><span class="line"> 0.31578947 0.23333333 0.69536424 0.48275862 0.07142857 0.4</span><br><span class="line"> 0.20338983 0.61842105 0.66       0.39534884 0.38636364 0.47457627</span><br><span class="line"> 0.52       0.45070423 0.61320755 0.17910448 0.546875   0.8</span><br><span class="line"> 0.64242424 0.30645161 0.38333333 0.81481481 0.54761905 0.21568627</span><br><span class="line"> 0.26229508 0.35714286 0.54455446 0.375      0.48148148 0.35</span><br><span class="line"> 0.34       0.4137931  0.73529412 0.74242424 0.9223301  0.86792453</span><br><span class="line"> 0.72222222 0.72972973 0.42857143 0.62589928 0.66423358 0.71052632]</span><br><span class="line">upper bound: 0.4917864461284819</span><br><span class="line">-----Evaluation is finished------</span><br><span class="line">Class Accuracy 47.79%</span><br><span class="line">Overall Prec@1 51.88% Prec@5 79.86%</span><br><span class="line">/home/hs/anaconda3/envs/dzl/lib/python3.7/site-packages/numpy/core/_asarray.py:136: VisibleDeprecationWarning: Creating an ndarray from ragged nested sequences (<span class="built_in">which</span> is a list-or-tuple of lists-or-tuples-or ndarrays with different lengths or shapes) is deprecated. If you meant to <span class="keyword">do</span> this, you must specify <span class="string">'dtype=object'</span> when creating the ndarray</span><br><span class="line">  <span class="built_in">return</span> array(a, dtype, copy=False, order=order, subok=True)</span><br></pre></td></tr></table></figure><h2 id="20201014-rgbo-pan"><a class="header-anchor" href="#20201014-rgbo-pan">#</a>20201014 RGBo&amp;PAn</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python test_models.py something --VAP --batch_size=16 -j=4 --test_crops=1 --test_segments=8,8 --weights=</span></span><br><span class="line"><span class="comment"># pretrained/PAN_RGB_something_resnet50_shift8_blockres_avg_segment8_e50.pth.tar,</span></span><br><span class="line"><span class="comment"># pretrained/PAN_PA_something_resnet50_shift8_blockres_avg_segment8_e80.pth.tar </span></span><br><span class="line">$ bash scripts/<span class="built_in">test</span>/sthv1/Full.sh </span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     RGB</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line">            </span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     PA</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line">            </span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">video 0 <span class="keyword">done</span>, total 0/11522, average 0.249 sec/video, moving Prec@1 50.000 Prec@5 81.250</span><br><span class="line">video 320 <span class="keyword">done</span>, total 320/11522, average 0.034 sec/video, moving Prec@1 55.655 Prec@5 83.333</span><br><span class="line">video 640 <span class="keyword">done</span>, total 640/11522, average 0.029 sec/video, moving Prec@1 55.793 Prec@5 81.860</span><br><span class="line">video 960 <span class="keyword">done</span>, total 960/11522, average 0.027 sec/video, moving Prec@1 54.303 Prec@5 80.328</span><br><span class="line">video 1280 <span class="keyword">done</span>, total 1280/11522, average 0.026 sec/video, moving Prec@1 54.552 Prec@5 80.633</span><br><span class="line">video 1600 <span class="keyword">done</span>, total 1600/11522, average 0.026 sec/video, moving Prec@1 54.270 Prec@5 80.012</span><br><span class="line">video 1920 <span class="keyword">done</span>, total 1920/11522, average 0.025 sec/video, moving Prec@1 53.048 Prec@5 79.597</span><br><span class="line">video 2240 <span class="keyword">done</span>, total 2240/11522, average 0.025 sec/video, moving Prec@1 53.059 Prec@5 79.654</span><br><span class="line">video 2560 <span class="keyword">done</span>, total 2560/11522, average 0.025 sec/video, moving Prec@1 52.717 Prec@5 79.697</span><br><span class="line">video 2880 <span class="keyword">done</span>, total 2880/11522, average 0.025 sec/video, moving Prec@1 52.314 Prec@5 79.731</span><br><span class="line">video 3200 <span class="keyword">done</span>, total 3200/11522, average 0.025 sec/video, moving Prec@1 52.146 Prec@5 79.633</span><br><span class="line">video 3520 <span class="keyword">done</span>, total 3520/11522, average 0.024 sec/video, moving Prec@1 51.923 Prec@5 79.525</span><br><span class="line">video 3840 <span class="keyword">done</span>, total 3840/11522, average 0.024 sec/video, moving Prec@1 51.867 Prec@5 79.175</span><br><span class="line">video 4160 <span class="keyword">done</span>, total 4160/11522, average 0.024 sec/video, moving Prec@1 51.700 Prec@5 79.119</span><br><span class="line">video 4480 <span class="keyword">done</span>, total 4480/11522, average 0.024 sec/video, moving Prec@1 51.624 Prec@5 79.181</span><br><span class="line">video 4800 <span class="keyword">done</span>, total 4800/11522, average 0.024 sec/video, moving Prec@1 51.329 Prec@5 78.841</span><br><span class="line">video 5120 <span class="keyword">done</span>, total 5120/11522, average 0.024 sec/video, moving Prec@1 50.974 Prec@5 78.583</span><br><span class="line">video 5440 <span class="keyword">done</span>, total 5440/11522, average 0.024 sec/video, moving Prec@1 51.228 Prec@5 78.757</span><br><span class="line">video 5760 <span class="keyword">done</span>, total 5760/11522, average 0.024 sec/video, moving Prec@1 51.108 Prec@5 78.636</span><br><span class="line">video 6080 <span class="keyword">done</span>, total 6080/11522, average 0.024 sec/video, moving Prec@1 51.050 Prec@5 78.773</span><br><span class="line">video 6400 <span class="keyword">done</span>, total 6400/11522, average 0.024 sec/video, moving Prec@1 51.044 Prec@5 78.959</span><br><span class="line">video 6720 <span class="keyword">done</span>, total 6720/11522, average 0.024 sec/video, moving Prec@1 50.920 Prec@5 78.934</span><br><span class="line">video 7040 <span class="keyword">done</span>, total 7040/11522, average 0.024 sec/video, moving Prec@1 50.935 Prec@5 78.784</span><br><span class="line">video 7360 <span class="keyword">done</span>, total 7360/11522, average 0.024 sec/video, moving Prec@1 50.908 Prec@5 78.783</span><br><span class="line">video 7680 <span class="keyword">done</span>, total 7680/11522, average 0.024 sec/video, moving Prec@1 51.014 Prec@5 78.950</span><br><span class="line">video 8000 <span class="keyword">done</span>, total 8000/11522, average 0.024 sec/video, moving Prec@1 50.998 Prec@5 79.004</span><br><span class="line">video 8320 <span class="keyword">done</span>, total 8320/11522, average 0.024 sec/video, moving Prec@1 50.960 Prec@5 79.007</span><br><span class="line">video 8640 <span class="keyword">done</span>, total 8640/11522, average 0.024 sec/video, moving Prec@1 50.843 Prec@5 78.963</span><br><span class="line">video 8960 <span class="keyword">done</span>, total 8960/11522, average 0.024 sec/video, moving Prec@1 50.869 Prec@5 78.966</span><br><span class="line">video 9280 <span class="keyword">done</span>, total 9280/11522, average 0.024 sec/video, moving Prec@1 50.925 Prec@5 78.959</span><br><span class="line">video 9600 <span class="keyword">done</span>, total 9600/11522, average 0.024 sec/video, moving Prec@1 51.050 Prec@5 78.973</span><br><span class="line">video 9920 <span class="keyword">done</span>, total 9920/11522, average 0.024 sec/video, moving Prec@1 51.027 Prec@5 79.006</span><br><span class="line">video 10240 <span class="keyword">done</span>, total 10240/11522, average 0.024 sec/video, moving Prec@1 51.160 Prec@5 79.105</span><br><span class="line">video 10560 <span class="keyword">done</span>, total 10560/11522, average 0.024 sec/video, moving Prec@1 51.248 Prec@5 79.085</span><br><span class="line">video 10880 <span class="keyword">done</span>, total 10880/11522, average 0.024 sec/video, moving Prec@1 51.276 Prec@5 79.157</span><br><span class="line">video 11200 <span class="keyword">done</span>, total 11200/11522, average 0.024 sec/video, moving Prec@1 51.302 Prec@5 79.173</span><br><span class="line">video 11520 <span class="keyword">done</span>, total 11520/11522, average 0.024 sec/video, moving Prec@1 51.206 Prec@5 79.170</span><br><span class="line">[0.88059701 0.3375     0.26666667 0.62686567 0.31578947 0.49137931</span><br><span class="line"> 0.6641791  0.5        0.69902913 0.68932039 0.38666667 0.55555556</span><br><span class="line"> 0.31914894 0.38709677 0.75159236 0.54       0.24096386 0.2625</span><br><span class="line"> 0.44715447 0.28       0.336      0.5862069  0.40740741 0.47058824</span><br><span class="line"> 0.4516129  0.41666667 0.47826087 0.52       0.75757576 0.65079365</span><br><span class="line"> 0.63636364 0.57692308 0.85185185 0.23076923 0.34782609 0.08333333</span><br><span class="line"> 0.7816092  0.79411765 0.07894737 0.59259259 0.66942149 0.66</span><br><span class="line"> 0.73076923 0.65306122 0.75       0.62295082 0.43382353 0.43157895</span><br><span class="line"> 0.17977528 0.69924812 0.58490566 0.         0.32       0.45</span><br><span class="line"> 0.14285714 0.20833333 0.45454545 0.5        0.08333333 0.74489796</span><br><span class="line"> 0.72727273 0.22222222 0.64       0.17272727 0.13333333 0.50925926</span><br><span class="line"> 0.12962963 0.18181818 0.46478873 0.38461538 0.51612903 0.32142857</span><br><span class="line"> 0.5        0.56       0.81666667 0.51612903 0.29411765 0.52941176</span><br><span class="line"> 0.36363636 0.82926829 0.14285714 0.14285714 0.33333333 0.21052632</span><br><span class="line"> 0.65714286 0.36206897 0.62162162 0.71428571 0.33333333 0.10714286</span><br><span class="line"> 0.56756757 0.80487805 0.48837209 0.59259259 0.69158879 0.30645161</span><br><span class="line"> 0.07407407 0.11904762 0.56140351 0.5        0.32653061 0.57407407</span><br><span class="line"> 0.203125   0.65306122 0.69512195 0.65714286 0.50561798 0.72463768</span><br><span class="line"> 0.47368421 0.37362637 0.62745098 0.05882353 0.63513514 0.38095238</span><br><span class="line"> 0.6509434  0.46666667 0.30909091 0.78723404 0.29268293 0.58333333</span><br><span class="line"> 0.80681818 0.58823529 0.4        0.5        0.33333333 0.44897959</span><br><span class="line"> 0.50943396 0.57407407 0.16551724 0.60576923 0.24       0.22222222</span><br><span class="line"> 0.31578947 0.23333333 0.70198675 0.4137931  0.07142857 0.38333333</span><br><span class="line"> 0.18644068 0.57894737 0.68       0.44186047 0.40909091 0.44915254</span><br><span class="line"> 0.56       0.42253521 0.62264151 0.1641791  0.4375     0.784</span><br><span class="line"> 0.63636364 0.24193548 0.4        0.81481481 0.52380952 0.2745098</span><br><span class="line"> 0.2295082  0.42857143 0.51485149 0.34375    0.44444444 0.3</span><br><span class="line"> 0.36       0.4137931  0.69607843 0.75757576 0.9223301  0.8490566</span><br><span class="line"> 0.69444444 0.75675676 0.41904762 0.63309353 0.64233577 0.68421053]</span><br><span class="line">upper bound: 0.4885991836244713</span><br><span class="line">-----Evaluation is finished------</span><br><span class="line">Class Accuracy 47.34%</span><br><span class="line">Overall Prec@1 51.21% Prec@5 79.17%</span><br><span class="line">/home/hs/anaconda3/envs/dzl/lib/python3.7/site-packages/numpy/core/_asarray.py:136: VisibleDeprecationWarning: Creating an ndarray from ragged nested sequences (<span class="built_in">which</span> is a list-or-tuple of lists-or-tuples-or ndarrays with different lengths or shapes) is deprecated. If you meant to <span class="keyword">do</span> this, you must specify <span class="string">'dtype=object'</span> when creating the ndarray</span><br><span class="line">  <span class="built_in">return</span> array(a, dtype, copy=False, order=order, subok=True)</span><br></pre></td></tr></table></figure><h2 id="20201014-rgbo-pao-pan"><a class="header-anchor" href="#20201014-rgbo-pao-pan">#</a>20201014 RGBo&amp;PAo&amp;PAn</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python test_models.py something --VAP --batch_size=16 -j=4 --test_crops=1 --test_segments=8,8,8 --weights=</span></span><br><span class="line"><span class="comment"># pretrained/PAN_RGB_something_resnet50_shift8_blockres_avg_segment8_e50.pth.tar,</span></span><br><span class="line"><span class="comment"># pretrained/PAN_PA_something_resnet50_shift8_blockres_avg_segment8_e80.pth.tar,</span></span><br><span class="line"><span class="comment"># o/PAN_PA_something_resnet50_shift8_blockres_avg_segment8_e80.pth.tar --coeff=2,1,1</span></span><br><span class="line">$ bash scripts/<span class="built_in">test</span>/sthv1/3-old-new.sh </span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     RGB</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line">            </span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     PA</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line">            </span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     PA</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line">            </span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">video 0 <span class="keyword">done</span>, total 0/11522, average 0.323 sec/video, moving Prec@1 50.000 Prec@5 81.250</span><br><span class="line">video 320 <span class="keyword">done</span>, total 320/11522, average 0.056 sec/video, moving Prec@1 53.869 Prec@5 82.440</span><br><span class="line">video 640 <span class="keyword">done</span>, total 640/11522, average 0.050 sec/video, moving Prec@1 54.116 Prec@5 82.012</span><br><span class="line">video 960 <span class="keyword">done</span>, total 960/11522, average 0.048 sec/video, moving Prec@1 53.074 Prec@5 80.738</span><br><span class="line">video 1280 <span class="keyword">done</span>, total 1280/11522, average 0.048 sec/video, moving Prec@1 53.935 Prec@5 81.019</span><br><span class="line">video 1600 <span class="keyword">done</span>, total 1600/11522, average 0.047 sec/video, moving Prec@1 53.713 Prec@5 80.507</span><br><span class="line">video 1920 <span class="keyword">done</span>, total 1920/11522, average 0.047 sec/video, moving Prec@1 52.841 Prec@5 80.269</span><br><span class="line">video 2240 <span class="keyword">done</span>, total 2240/11522, average 0.046 sec/video, moving Prec@1 52.881 Prec@5 80.408</span><br><span class="line">video 2560 <span class="keyword">done</span>, total 2560/11522, average 0.046 sec/video, moving Prec@1 52.911 Prec@5 80.551</span><br><span class="line">video 2880 <span class="keyword">done</span>, total 2880/11522, average 0.046 sec/video, moving Prec@1 52.521 Prec@5 80.456</span><br><span class="line">video 3200 <span class="keyword">done</span>, total 3200/11522, average 0.046 sec/video, moving Prec@1 52.208 Prec@5 80.442</span><br><span class="line">video 3520 <span class="keyword">done</span>, total 3520/11522, average 0.045 sec/video, moving Prec@1 51.951 Prec@5 80.373</span><br><span class="line">video 3840 <span class="keyword">done</span>, total 3840/11522, average 0.045 sec/video, moving Prec@1 51.893 Prec@5 80.031</span><br><span class="line">video 4160 <span class="keyword">done</span>, total 4160/11522, average 0.045 sec/video, moving Prec@1 51.652 Prec@5 79.909</span><br><span class="line">video 4480 <span class="keyword">done</span>, total 4480/11522, average 0.045 sec/video, moving Prec@1 51.624 Prec@5 79.982</span><br><span class="line">video 4800 <span class="keyword">done</span>, total 4800/11522, average 0.045 sec/video, moving Prec@1 51.433 Prec@5 79.713</span><br><span class="line">video 5120 <span class="keyword">done</span>, total 5120/11522, average 0.045 sec/video, moving Prec@1 51.168 Prec@5 79.459</span><br><span class="line">video 5440 <span class="keyword">done</span>, total 5440/11522, average 0.045 sec/video, moving Prec@1 51.430 Prec@5 79.619</span><br><span class="line">video 5760 <span class="keyword">done</span>, total 5760/11522, average 0.045 sec/video, moving Prec@1 51.333 Prec@5 79.519</span><br><span class="line">video 6080 <span class="keyword">done</span>, total 6080/11522, average 0.045 sec/video, moving Prec@1 51.345 Prec@5 79.544</span><br><span class="line">video 6400 <span class="keyword">done</span>, total 6400/11522, average 0.045 sec/video, moving Prec@1 51.418 Prec@5 79.723</span><br><span class="line">video 6720 <span class="keyword">done</span>, total 6720/11522, average 0.045 sec/video, moving Prec@1 51.232 Prec@5 79.706</span><br><span class="line">video 7040 <span class="keyword">done</span>, total 7040/11522, average 0.045 sec/video, moving Prec@1 51.247 Prec@5 79.592</span><br><span class="line">video 7360 <span class="keyword">done</span>, total 7360/11522, average 0.045 sec/video, moving Prec@1 51.166 Prec@5 79.515</span><br><span class="line">video 7680 <span class="keyword">done</span>, total 7680/11522, average 0.045 sec/video, moving Prec@1 51.312 Prec@5 79.652</span><br><span class="line">video 8000 <span class="keyword">done</span>, total 8000/11522, average 0.045 sec/video, moving Prec@1 51.322 Prec@5 79.703</span><br><span class="line">video 8320 <span class="keyword">done</span>, total 8320/11522, average 0.045 sec/video, moving Prec@1 51.308 Prec@5 79.690</span><br><span class="line">video 8640 <span class="keyword">done</span>, total 8640/11522, average 0.045 sec/video, moving Prec@1 51.178 Prec@5 79.644</span><br><span class="line">video 8960 <span class="keyword">done</span>, total 8960/11522, average 0.045 sec/video, moving Prec@1 51.203 Prec@5 79.635</span><br><span class="line">video 9280 <span class="keyword">done</span>, total 9280/11522, average 0.045 sec/video, moving Prec@1 51.216 Prec@5 79.615</span><br><span class="line">video 9600 <span class="keyword">done</span>, total 9600/11522, average 0.045 sec/video, moving Prec@1 51.373 Prec@5 79.638</span><br><span class="line">video 9920 <span class="keyword">done</span>, total 9920/11522, average 0.045 sec/video, moving Prec@1 51.318 Prec@5 79.670</span><br><span class="line">video 10240 <span class="keyword">done</span>, total 10240/11522, average 0.045 sec/video, moving Prec@1 51.424 Prec@5 79.797</span><br><span class="line">video 10560 <span class="keyword">done</span>, total 10560/11522, average 0.045 sec/video, moving Prec@1 51.522 Prec@5 79.784</span><br><span class="line">video 10880 <span class="keyword">done</span>, total 10880/11522, average 0.045 sec/video, moving Prec@1 51.597 Prec@5 79.837</span><br><span class="line">video 11200 <span class="keyword">done</span>, total 11200/11522, average 0.045 sec/video, moving Prec@1 51.658 Prec@5 79.850</span><br><span class="line">video 11520 <span class="keyword">done</span>, total 11520/11522, average 0.044 sec/video, moving Prec@1 51.554 Prec@5 79.847</span><br><span class="line">[0.89552239 0.3375     0.24761905 0.67164179 0.34210526 0.50862069</span><br><span class="line"> 0.70895522 0.44117647 0.66019417 0.7184466  0.4        0.48611111</span><br><span class="line"> 0.35106383 0.35483871 0.76433121 0.52       0.23493976 0.2875</span><br><span class="line"> 0.45528455 0.36       0.336      0.62068966 0.48148148 0.49019608</span><br><span class="line"> 0.51612903 0.41666667 0.47826087 0.4        0.72727273 0.65079365</span><br><span class="line"> 0.59090909 0.57692308 0.87037037 0.25274725 0.2826087  0.16666667</span><br><span class="line"> 0.82758621 0.80392157 0.05263158 0.55555556 0.66942149 0.66</span><br><span class="line"> 0.73076923 0.67346939 0.76923077 0.63934426 0.45588235 0.42105263</span><br><span class="line"> 0.16853933 0.69172932 0.63207547 0.         0.36       0.45</span><br><span class="line"> 0.14285714 0.29166667 0.42424242 0.5        0.         0.75510204</span><br><span class="line"> 0.75757576 0.13888889 0.64       0.16363636 0.1        0.49074074</span><br><span class="line"> 0.18518519 0.21212121 0.46478873 0.30769231 0.5483871  0.28571429</span><br><span class="line"> 0.5        0.56       0.83333333 0.4516129  0.35294118 0.58823529</span><br><span class="line"> 0.27272727 0.80487805 0.08571429 0.14285714 0.36666667 0.15789474</span><br><span class="line"> 0.65714286 0.37931034 0.62162162 0.68253968 0.33333333 0.07142857</span><br><span class="line"> 0.54054054 0.75609756 0.53488372 0.57407407 0.6728972  0.29032258</span><br><span class="line"> 0.07407407 0.11904762 0.55555556 0.48529412 0.34693878 0.53703704</span><br><span class="line"> 0.203125   0.55102041 0.7195122  0.64761905 0.50561798 0.73913043</span><br><span class="line"> 0.47368421 0.37362637 0.60784314 0.05882353 0.64864865 0.33333333</span><br><span class="line"> 0.62264151 0.46666667 0.34545455 0.77659574 0.34146341 0.60416667</span><br><span class="line"> 0.80681818 0.58823529 0.38181818 0.5        0.33333333 0.46938776</span><br><span class="line"> 0.47169811 0.61111111 0.15862069 0.63461538 0.24       0.22222222</span><br><span class="line"> 0.23684211 0.33333333 0.70198675 0.4137931  0.         0.4</span><br><span class="line"> 0.16949153 0.55263158 0.66       0.44186047 0.38636364 0.45762712</span><br><span class="line"> 0.56       0.45774648 0.63207547 0.17910448 0.484375   0.808</span><br><span class="line"> 0.65454545 0.30645161 0.41666667 0.7962963  0.57142857 0.2745098</span><br><span class="line"> 0.26229508 0.34285714 0.5049505  0.34375    0.42592593 0.325</span><br><span class="line"> 0.32       0.4137931  0.69607843 0.77272727 0.9223301  0.86792453</span><br><span class="line"> 0.72222222 0.75675676 0.42857143 0.64028777 0.66423358 0.73684211]</span><br><span class="line">upper bound: 0.49272722679828856</span><br><span class="line">-----Evaluation is finished------</span><br><span class="line">Class Accuracy 47.36%</span><br><span class="line">Overall Prec@1 51.55% Prec@5 79.85%</span><br><span class="line">/home/hs/anaconda3/envs/dzl/lib/python3.7/site-packages/numpy/core/_asarray.py:136: VisibleDeprecationWarning: Creating an ndarray from ragged nested sequences (<span class="built_in">which</span> is a list-or-tuple of lists-or-tuples-or ndarrays with different lengths or shapes) is deprecated. If you meant to <span class="keyword">do</span> this, you must specify <span class="string">'dtype=object'</span> when creating the ndarray</span><br><span class="line">  <span class="built_in">return</span> array(a, dtype, copy=False, order=order, subok=True)</span><br></pre></td></tr></table></figure><h2 id="20201014-rgbo-pan-lpan"><a class="header-anchor" href="#20201014-rgbo-pan-lpan">#</a>20201014 RGBo&amp;PAn&amp;LPAn</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python test_models.py something --VAP --batch_size=16 -j=4 --test_crops=1 --test_segments=8,8,8 --weights=</span></span><br><span class="line"><span class="comment"># pretrained/PAN_RGB_something_resnet50_shift8_blockres_avg_segment8_e50.pth.tar,</span></span><br><span class="line"><span class="comment"># pretrained/PAN_PA_something_resnet50_shift8_blockres_avg_segment8_e80.pth.tar,</span></span><br><span class="line"><span class="comment"># pretrained/PAN_LPA_something_resnet50_shift8_blockres_avg_segment8_e80.pth.tar --coeff=2,1,1</span></span><br><span class="line">$ bash scripts/<span class="built_in">test</span>/sthv1/3-lpa-pa.sh </span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     RGB</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line">            </span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     PA</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line">            </span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     PA</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line">            </span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">video 0 <span class="keyword">done</span>, total 0/11522, average 0.302 sec/video, moving Prec@1 43.750 Prec@5 81.250</span><br><span class="line">video 320 <span class="keyword">done</span>, total 320/11522, average 0.055 sec/video, moving Prec@1 54.464 Prec@5 81.845</span><br><span class="line">video 640 <span class="keyword">done</span>, total 640/11522, average 0.050 sec/video, moving Prec@1 54.878 Prec@5 82.317</span><br><span class="line">video 960 <span class="keyword">done</span>, total 960/11522, average 0.049 sec/video, moving Prec@1 53.074 Prec@5 80.533</span><br><span class="line">video 1280 <span class="keyword">done</span>, total 1280/11522, average 0.048 sec/video, moving Prec@1 53.704 Prec@5 81.250</span><br><span class="line">video 1600 <span class="keyword">done</span>, total 1600/11522, average 0.048 sec/video, moving Prec@1 53.837 Prec@5 80.817</span><br><span class="line">video 1920 <span class="keyword">done</span>, total 1920/11522, average 0.048 sec/video, moving Prec@1 52.738 Prec@5 80.475</span><br><span class="line">video 2240 <span class="keyword">done</span>, total 2240/11522, average 0.047 sec/video, moving Prec@1 52.793 Prec@5 80.496</span><br><span class="line">video 2560 <span class="keyword">done</span>, total 2560/11522, average 0.047 sec/video, moving Prec@1 52.484 Prec@5 80.668</span><br><span class="line">video 2880 <span class="keyword">done</span>, total 2880/11522, average 0.047 sec/video, moving Prec@1 52.141 Prec@5 80.594</span><br><span class="line">video 3200 <span class="keyword">done</span>, total 3200/11522, average 0.047 sec/video, moving Prec@1 51.835 Prec@5 80.597</span><br><span class="line">video 3520 <span class="keyword">done</span>, total 3520/11522, average 0.047 sec/video, moving Prec@1 51.753 Prec@5 80.571</span><br><span class="line">video 3840 <span class="keyword">done</span>, total 3840/11522, average 0.047 sec/video, moving Prec@1 51.738 Prec@5 80.083</span><br><span class="line">video 4160 <span class="keyword">done</span>, total 4160/11522, average 0.047 sec/video, moving Prec@1 51.269 Prec@5 79.981</span><br><span class="line">video 4480 <span class="keyword">done</span>, total 4480/11522, average 0.047 sec/video, moving Prec@1 51.179 Prec@5 80.027</span><br><span class="line">video 4800 <span class="keyword">done</span>, total 4800/11522, average 0.047 sec/video, moving Prec@1 50.976 Prec@5 79.610</span><br><span class="line">video 5120 <span class="keyword">done</span>, total 5120/11522, average 0.047 sec/video, moving Prec@1 50.662 Prec@5 79.400</span><br><span class="line">video 5440 <span class="keyword">done</span>, total 5440/11522, average 0.047 sec/video, moving Prec@1 50.990 Prec@5 79.619</span><br><span class="line">video 5760 <span class="keyword">done</span>, total 5760/11522, average 0.047 sec/video, moving Prec@1 50.952 Prec@5 79.467</span><br><span class="line">video 6080 <span class="keyword">done</span>, total 6080/11522, average 0.047 sec/video, moving Prec@1 50.984 Prec@5 79.593</span><br><span class="line">video 6400 <span class="keyword">done</span>, total 6400/11522, average 0.047 sec/video, moving Prec@1 51.044 Prec@5 79.660</span><br><span class="line">video 6720 <span class="keyword">done</span>, total 6720/11522, average 0.047 sec/video, moving Prec@1 50.965 Prec@5 79.572</span><br><span class="line">video 7040 <span class="keyword">done</span>, total 7040/11522, average 0.047 sec/video, moving Prec@1 50.950 Prec@5 79.521</span><br><span class="line">video 7360 <span class="keyword">done</span>, total 7360/11522, average 0.047 sec/video, moving Prec@1 50.935 Prec@5 79.420</span><br><span class="line">video 7680 <span class="keyword">done</span>, total 7680/11522, average 0.047 sec/video, moving Prec@1 51.117 Prec@5 79.561</span><br><span class="line">video 8000 <span class="keyword">done</span>, total 8000/11522, average 0.046 sec/video, moving Prec@1 51.160 Prec@5 79.591</span><br><span class="line">video 8320 <span class="keyword">done</span>, total 8320/11522, average 0.046 sec/video, moving Prec@1 51.188 Prec@5 79.607</span><br><span class="line">video 8640 <span class="keyword">done</span>, total 8640/11522, average 0.046 sec/video, moving Prec@1 51.051 Prec@5 79.552</span><br><span class="line">video 8960 <span class="keyword">done</span>, total 8960/11522, average 0.046 sec/video, moving Prec@1 51.081 Prec@5 79.557</span><br><span class="line">video 9280 <span class="keyword">done</span>, total 9280/11522, average 0.046 sec/video, moving Prec@1 51.108 Prec@5 79.518</span><br><span class="line">video 9600 <span class="keyword">done</span>, total 9600/11522, average 0.046 sec/video, moving Prec@1 51.258 Prec@5 79.545</span><br><span class="line">video 9920 <span class="keyword">done</span>, total 9920/11522, average 0.046 sec/video, moving Prec@1 51.178 Prec@5 79.539</span><br><span class="line">video 10240 <span class="keyword">done</span>, total 10240/11522, average 0.046 sec/video, moving Prec@1 51.297 Prec@5 79.631</span><br><span class="line">video 10560 <span class="keyword">done</span>, total 10560/11522, average 0.046 sec/video, moving Prec@1 51.466 Prec@5 79.605</span><br><span class="line">video 10880 <span class="keyword">done</span>, total 10880/11522, average 0.046 sec/video, moving Prec@1 51.523 Prec@5 79.653</span><br><span class="line">video 11200 <span class="keyword">done</span>, total 11200/11522, average 0.046 sec/video, moving Prec@1 51.632 Prec@5 79.690</span><br><span class="line">video 11520 <span class="keyword">done</span>, total 11520/11522, average 0.046 sec/video, moving Prec@1 51.562 Prec@5 79.665</span><br><span class="line">[0.88059701 0.3375     0.24761905 0.65671642 0.28947368 0.46551724</span><br><span class="line"> 0.68656716 0.5        0.66990291 0.70873786 0.38666667 0.52777778</span><br><span class="line"> 0.29787234 0.35483871 0.76433121 0.52       0.21084337 0.2875</span><br><span class="line"> 0.44715447 0.32       0.352      0.62068966 0.38888889 0.49019608</span><br><span class="line"> 0.51612903 0.41666667 0.47826087 0.56       0.78787879 0.68253968</span><br><span class="line"> 0.63636364 0.57692308 0.87037037 0.21978022 0.2826087  0.19444444</span><br><span class="line"> 0.81609195 0.80392157 0.07894737 0.66666667 0.67768595 0.66</span><br><span class="line"> 0.71538462 0.69387755 0.75       0.60655738 0.41911765 0.43157895</span><br><span class="line"> 0.19101124 0.71428571 0.63207547 0.         0.4        0.45</span><br><span class="line"> 0.14285714 0.25       0.48484848 0.5        0.08333333 0.7755102</span><br><span class="line"> 0.72727273 0.16666667 0.62       0.2        0.13333333 0.51851852</span><br><span class="line"> 0.16666667 0.22727273 0.47887324 0.34615385 0.5483871  0.32142857</span><br><span class="line"> 0.5        0.52       0.81666667 0.5483871  0.35294118 0.52941176</span><br><span class="line"> 0.40909091 0.80487805 0.11428571 0.14285714 0.36666667 0.21052632</span><br><span class="line"> 0.6        0.37931034 0.62162162 0.68253968 0.16666667 0.08928571</span><br><span class="line"> 0.59459459 0.80487805 0.53488372 0.57407407 0.71028037 0.29032258</span><br><span class="line"> 0.07407407 0.16666667 0.5497076  0.47058824 0.32653061 0.55555556</span><br><span class="line"> 0.1875     0.6122449  0.68292683 0.64761905 0.53932584 0.72463768</span><br><span class="line"> 0.47368421 0.35164835 0.58823529 0.05882353 0.62162162 0.38095238</span><br><span class="line"> 0.66981132 0.5        0.32727273 0.77659574 0.34146341 0.58333333</span><br><span class="line"> 0.82954545 0.56862745 0.39090909 0.5        0.33333333 0.46938776</span><br><span class="line"> 0.47169811 0.57407407 0.15172414 0.63461538 0.26       0.25925926</span><br><span class="line"> 0.26315789 0.33333333 0.68874172 0.39655172 0.14285714 0.31666667</span><br><span class="line"> 0.18644068 0.56578947 0.66       0.44186047 0.36363636 0.47457627</span><br><span class="line"> 0.58666667 0.45070423 0.61320755 0.14925373 0.46875    0.8</span><br><span class="line"> 0.66666667 0.24193548 0.38333333 0.7962963  0.5        0.29411765</span><br><span class="line"> 0.27868852 0.42857143 0.48514851 0.34375    0.44444444 0.35</span><br><span class="line"> 0.34       0.44827586 0.70588235 0.74242424 0.9223301  0.85849057</span><br><span class="line"> 0.71296296 0.75675676 0.44761905 0.65467626 0.65693431 0.71052632]</span><br><span class="line">upper bound: 0.49360881004950025</span><br><span class="line">-----Evaluation is finished------</span><br><span class="line">Class Accuracy 47.77%</span><br><span class="line">Overall Prec@1 51.56% Prec@5 79.66%</span><br><span class="line">/home/hs/anaconda3/envs/dzl/lib/python3.7/site-packages/numpy/core/_asarray.py:136: VisibleDeprecationWarning: Creating an ndarray from ragged nested sequences (<span class="built_in">which</span> is a list-or-tuple of lists-or-tuples-or ndarrays with different lengths or shapes) is deprecated. If you meant to <span class="keyword">do</span> this, you must specify <span class="string">'dtype=object'</span> when creating the ndarray</span><br><span class="line">  <span class="built_in">return</span> array(a, dtype, copy=False, order=order, subok=True)</span><br></pre></td></tr></table></figure><h2 id="20201014-rgbo-rpan-lpan"><a class="header-anchor" href="#20201014-rgbo-rpan-lpan">#</a>20201014 RGBo&amp;RPAn&amp;LPAn</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python test_models.py something --VAP --batch_size=16 -j=4 --test_crops=1 --test_segments=8,8,8 --weights=</span></span><br><span class="line"><span class="comment"># pretrained/PAN_RGB_something_resnet50_shift8_blockres_avg_segment8_e50.pth.tar,</span></span><br><span class="line"><span class="comment"># pretrained/PAN_RPA_something_resnet50_shift8_blockres_avg_segment8_e80.pth.tar,</span></span><br><span class="line"><span class="comment"># pretrained/PAN_LPA_something_resnet50_shift8_blockres_avg_segment8_e80.pth.tar --coeff=2,1,1</span></span><br><span class="line">$ bash scripts/<span class="built_in">test</span>/sthv1/3-lpa-rpa.sh </span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     RGB</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line">            </span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     PA</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line">            </span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     PA</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line">            </span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">video 0 <span class="keyword">done</span>, total 0/11522, average 0.289 sec/video, moving Prec@1 43.750 Prec@5 87.500</span><br><span class="line">video 320 <span class="keyword">done</span>, total 320/11522, average 0.054 sec/video, moving Prec@1 55.357 Prec@5 83.333</span><br><span class="line">video 640 <span class="keyword">done</span>, total 640/11522, average 0.050 sec/video, moving Prec@1 56.250 Prec@5 82.774</span><br><span class="line">video 960 <span class="keyword">done</span>, total 960/11522, average 0.048 sec/video, moving Prec@1 54.098 Prec@5 80.840</span><br><span class="line">video 1280 <span class="keyword">done</span>, total 1280/11522, average 0.047 sec/video, moving Prec@1 54.707 Prec@5 81.096</span><br><span class="line">video 1600 <span class="keyword">done</span>, total 1600/11522, average 0.047 sec/video, moving Prec@1 54.517 Prec@5 80.693</span><br><span class="line">video 1920 <span class="keyword">done</span>, total 1920/11522, average 0.047 sec/video, moving Prec@1 53.409 Prec@5 80.269</span><br><span class="line">video 2240 <span class="keyword">done</span>, total 2240/11522, average 0.047 sec/video, moving Prec@1 53.369 Prec@5 80.363</span><br><span class="line">video 2560 <span class="keyword">done</span>, total 2560/11522, average 0.047 sec/video, moving Prec@1 53.028 Prec@5 80.474</span><br><span class="line">video 2880 <span class="keyword">done</span>, total 2880/11522, average 0.047 sec/video, moving Prec@1 52.624 Prec@5 80.421</span><br><span class="line">video 3200 <span class="keyword">done</span>, total 3200/11522, average 0.047 sec/video, moving Prec@1 52.208 Prec@5 80.410</span><br><span class="line">video 3520 <span class="keyword">done</span>, total 3520/11522, average 0.047 sec/video, moving Prec@1 52.291 Prec@5 80.373</span><br><span class="line">video 3840 <span class="keyword">done</span>, total 3840/11522, average 0.047 sec/video, moving Prec@1 52.127 Prec@5 79.850</span><br><span class="line">video 4160 <span class="keyword">done</span>, total 4160/11522, average 0.047 sec/video, moving Prec@1 51.580 Prec@5 79.765</span><br><span class="line">video 4480 <span class="keyword">done</span>, total 4480/11522, average 0.047 sec/video, moving Prec@1 51.379 Prec@5 79.782</span><br><span class="line">video 4800 <span class="keyword">done</span>, total 4800/11522, average 0.047 sec/video, moving Prec@1 51.204 Prec@5 79.402</span><br><span class="line">video 5120 <span class="keyword">done</span>, total 5120/11522, average 0.047 sec/video, moving Prec@1 50.896 Prec@5 79.167</span><br><span class="line">video 5440 <span class="keyword">done</span>, total 5440/11522, average 0.047 sec/video, moving Prec@1 51.045 Prec@5 79.417</span><br><span class="line">video 5760 <span class="keyword">done</span>, total 5760/11522, average 0.047 sec/video, moving Prec@1 50.952 Prec@5 79.259</span><br><span class="line">video 6080 <span class="keyword">done</span>, total 6080/11522, average 0.047 sec/video, moving Prec@1 51.050 Prec@5 79.446</span><br><span class="line">video 6400 <span class="keyword">done</span>, total 6400/11522, average 0.047 sec/video, moving Prec@1 51.122 Prec@5 79.551</span><br><span class="line">video 6720 <span class="keyword">done</span>, total 6720/11522, average 0.047 sec/video, moving Prec@1 51.024 Prec@5 79.543</span><br><span class="line">video 7040 <span class="keyword">done</span>, total 7040/11522, average 0.047 sec/video, moving Prec@1 51.006 Prec@5 79.493</span><br><span class="line">video 7360 <span class="keyword">done</span>, total 7360/11522, average 0.047 sec/video, moving Prec@1 51.003 Prec@5 79.501</span><br><span class="line">video 7680 <span class="keyword">done</span>, total 7680/11522, average 0.047 sec/video, moving Prec@1 51.156 Prec@5 79.665</span><br><span class="line">video 8000 <span class="keyword">done</span>, total 8000/11522, average 0.047 sec/video, moving Prec@1 51.135 Prec@5 79.678</span><br><span class="line">video 8320 <span class="keyword">done</span>, total 8320/11522, average 0.047 sec/video, moving Prec@1 51.164 Prec@5 79.750</span><br><span class="line">video 8640 <span class="keyword">done</span>, total 8640/11522, average 0.047 sec/video, moving Prec@1 50.970 Prec@5 79.748</span><br><span class="line">video 8960 <span class="keyword">done</span>, total 8960/11522, average 0.046 sec/video, moving Prec@1 50.925 Prec@5 79.779</span><br><span class="line">video 9280 <span class="keyword">done</span>, total 9280/11522, average 0.046 sec/video, moving Prec@1 50.957 Prec@5 79.755</span><br><span class="line">video 9600 <span class="keyword">done</span>, total 9600/11522, average 0.047 sec/video, moving Prec@1 51.102 Prec@5 79.815</span><br><span class="line">video 9920 <span class="keyword">done</span>, total 9920/11522, average 0.047 sec/video, moving Prec@1 51.057 Prec@5 79.821</span><br><span class="line">video 10240 <span class="keyword">done</span>, total 10240/11522, average 0.046 sec/video, moving Prec@1 51.180 Prec@5 79.914</span><br><span class="line">video 10560 <span class="keyword">done</span>, total 10560/11522, average 0.046 sec/video, moving Prec@1 51.276 Prec@5 79.898</span><br><span class="line">video 10880 <span class="keyword">done</span>, total 10880/11522, average 0.046 sec/video, moving Prec@1 51.358 Prec@5 79.965</span><br><span class="line">video 11200 <span class="keyword">done</span>, total 11200/11522, average 0.046 sec/video, moving Prec@1 51.462 Prec@5 79.993</span><br><span class="line">video 11520 <span class="keyword">done</span>, total 11520/11522, average 0.046 sec/video, moving Prec@1 51.380 Prec@5 79.934</span><br><span class="line">[0.89552239 0.3375     0.25714286 0.62686567 0.31578947 0.44827586</span><br><span class="line"> 0.70149254 0.44117647 0.66019417 0.69902913 0.38666667 0.51388889</span><br><span class="line"> 0.30851064 0.41935484 0.74522293 0.5        0.21084337 0.2625</span><br><span class="line"> 0.44715447 0.4        0.328      0.60344828 0.35185185 0.43137255</span><br><span class="line"> 0.4516129  0.41666667 0.47826087 0.56       0.75757576 0.66666667</span><br><span class="line"> 0.72727273 0.57692308 0.83333333 0.21978022 0.30434783 0.19444444</span><br><span class="line"> 0.8045977  0.80392157 0.07894737 0.66666667 0.66942149 0.62</span><br><span class="line"> 0.7        0.67346939 0.75       0.60655738 0.44852941 0.38947368</span><br><span class="line"> 0.15730337 0.70676692 0.6509434  0.         0.36       0.45</span><br><span class="line"> 0.14285714 0.25       0.42424242 0.53125    0.         0.78571429</span><br><span class="line"> 0.75757576 0.25       0.64       0.22727273 0.13333333 0.50925926</span><br><span class="line"> 0.16666667 0.25757576 0.45070423 0.42307692 0.5483871  0.28571429</span><br><span class="line"> 0.47368421 0.52       0.76666667 0.5483871  0.35294118 0.47058824</span><br><span class="line"> 0.36363636 0.80487805 0.08571429 0.14285714 0.4        0.15789474</span><br><span class="line"> 0.54285714 0.34482759 0.60810811 0.66666667 0.22222222 0.08928571</span><br><span class="line"> 0.56756757 0.80487805 0.58139535 0.56481481 0.68224299 0.29032258</span><br><span class="line"> 0.07407407 0.11904762 0.56140351 0.44117647 0.32653061 0.55555556</span><br><span class="line"> 0.21875    0.63265306 0.64634146 0.62857143 0.5505618  0.72463768</span><br><span class="line"> 0.47368421 0.32967033 0.58823529 0.05882353 0.64864865 0.38095238</span><br><span class="line"> 0.66037736 0.4        0.38181818 0.78723404 0.36585366 0.5625</span><br><span class="line"> 0.80681818 0.60784314 0.39090909 0.5        0.30555556 0.46938776</span><br><span class="line"> 0.47169811 0.62962963 0.14482759 0.61538462 0.3        0.25925926</span><br><span class="line"> 0.26315789 0.26666667 0.68211921 0.44827586 0.07142857 0.31666667</span><br><span class="line"> 0.16949153 0.59210526 0.65       0.41860465 0.40909091 0.46610169</span><br><span class="line"> 0.6        0.43661972 0.61320755 0.11940299 0.5625     0.792</span><br><span class="line"> 0.67272727 0.25806452 0.36666667 0.81481481 0.57142857 0.19607843</span><br><span class="line"> 0.27868852 0.38571429 0.52475248 0.375      0.5        0.4</span><br><span class="line"> 0.32       0.44827586 0.71568627 0.75757576 0.9223301  0.87735849</span><br><span class="line"> 0.73148148 0.75675676 0.46666667 0.64028777 0.64233577 0.68421053]</span><br><span class="line">upper bound: 0.49090826225102707</span><br><span class="line">-----Evaluation is finished------</span><br><span class="line">Class Accuracy 47.50%</span><br><span class="line">Overall Prec@1 51.38% Prec@5 79.93%</span><br><span class="line">/home/hs/anaconda3/envs/dzl/lib/python3.7/site-packages/numpy/core/_asarray.py:136: VisibleDeprecationWarning: Creating an ndarray from ragged nested sequences (<span class="built_in">which</span> is a list-or-tuple of lists-or-tuples-or ndarrays with different lengths or shapes) is deprecated. If you meant to <span class="keyword">do</span> this, you must specify <span class="string">'dtype=object'</span> when creating the ndarray</span><br><span class="line">  <span class="built_in">return</span> array(a, dtype, copy=False, order=order, subok=True)</span><br></pre></td></tr></table></figure><h2 id="20201014-rgbo-lpan"><a class="header-anchor" href="#20201014-rgbo-lpan">#</a>20201014 RGBo&amp;LPAn</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python test_models.py something --VAP --batch_size=16 -j=4 --test_crops=1 --test_segments=8,8 --weights=</span></span><br><span class="line"><span class="comment"># pretrained/PAN_RGB_something_resnet50_shift8_blockres_avg_segment8_e50.pth.tar,</span></span><br><span class="line"><span class="comment"># pretrained/PAN_LPA_something_resnet50_shift8_blockres_avg_segment8_e80.pth.tar </span></span><br><span class="line">$ bash scripts/<span class="built_in">test</span>/sthv1/2-lpa.sh </span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     RGB</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line">            </span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     PA</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line">            </span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">video 0 <span class="keyword">done</span>, total 0/11522, average 0.237 sec/video, moving Prec@1 43.750 Prec@5 81.250</span><br><span class="line">video 320 <span class="keyword">done</span>, total 320/11522, average 0.034 sec/video, moving Prec@1 51.786 Prec@5 83.036</span><br><span class="line">video 640 <span class="keyword">done</span>, total 640/11522, average 0.029 sec/video, moving Prec@1 53.354 Prec@5 82.470</span><br><span class="line">video 960 <span class="keyword">done</span>, total 960/11522, average 0.027 sec/video, moving Prec@1 51.742 Prec@5 79.918</span><br><span class="line">video 1280 <span class="keyword">done</span>, total 1280/11522, average 0.026 sec/video, moving Prec@1 52.469 Prec@5 80.247</span><br><span class="line">video 1600 <span class="keyword">done</span>, total 1600/11522, average 0.026 sec/video, moving Prec@1 52.413 Prec@5 79.950</span><br><span class="line">video 1920 <span class="keyword">done</span>, total 1920/11522, average 0.025 sec/video, moving Prec@1 51.601 Prec@5 79.804</span><br><span class="line">video 2240 <span class="keyword">done</span>, total 2240/11522, average 0.025 sec/video, moving Prec@1 51.817 Prec@5 79.876</span><br><span class="line">video 2560 <span class="keyword">done</span>, total 2560/11522, average 0.025 sec/video, moving Prec@1 51.708 Prec@5 79.852</span><br><span class="line">video 2880 <span class="keyword">done</span>, total 2880/11522, average 0.025 sec/video, moving Prec@1 51.450 Prec@5 79.869</span><br><span class="line">video 3200 <span class="keyword">done</span>, total 3200/11522, average 0.025 sec/video, moving Prec@1 50.964 Prec@5 79.851</span><br><span class="line">video 3520 <span class="keyword">done</span>, total 3520/11522, average 0.025 sec/video, moving Prec@1 50.962 Prec@5 79.808</span><br><span class="line">video 3840 <span class="keyword">done</span>, total 3840/11522, average 0.025 sec/video, moving Prec@1 51.011 Prec@5 79.357</span><br><span class="line">video 4160 <span class="keyword">done</span>, total 4160/11522, average 0.024 sec/video, moving Prec@1 50.694 Prec@5 79.119</span><br><span class="line">video 4480 <span class="keyword">done</span>, total 4480/11522, average 0.024 sec/video, moving Prec@1 50.556 Prec@5 79.070</span><br><span class="line">video 4800 <span class="keyword">done</span>, total 4800/11522, average 0.024 sec/video, moving Prec@1 50.374 Prec@5 78.675</span><br><span class="line">video 5120 <span class="keyword">done</span>, total 5120/11522, average 0.024 sec/video, moving Prec@1 50.117 Prec@5 78.427</span><br><span class="line">video 5440 <span class="keyword">done</span>, total 5440/11522, average 0.024 sec/video, moving Prec@1 50.385 Prec@5 78.666</span><br><span class="line">video 5760 <span class="keyword">done</span>, total 5760/11522, average 0.024 sec/video, moving Prec@1 50.346 Prec@5 78.532</span><br><span class="line">video 6080 <span class="keyword">done</span>, total 6080/11522, average 0.024 sec/video, moving Prec@1 50.476 Prec@5 78.724</span><br><span class="line">video 6400 <span class="keyword">done</span>, total 6400/11522, average 0.024 sec/video, moving Prec@1 50.530 Prec@5 78.803</span><br><span class="line">video 6720 <span class="keyword">done</span>, total 6720/11522, average 0.024 sec/video, moving Prec@1 50.386 Prec@5 78.711</span><br><span class="line">video 7040 <span class="keyword">done</span>, total 7040/11522, average 0.024 sec/video, moving Prec@1 50.368 Prec@5 78.713</span><br><span class="line">video 7360 <span class="keyword">done</span>, total 7360/11522, average 0.024 sec/video, moving Prec@1 50.325 Prec@5 78.633</span><br><span class="line">video 7680 <span class="keyword">done</span>, total 7680/11522, average 0.024 sec/video, moving Prec@1 50.533 Prec@5 78.833</span><br><span class="line">video 8000 <span class="keyword">done</span>, total 8000/11522, average 0.024 sec/video, moving Prec@1 50.487 Prec@5 78.855</span><br><span class="line">video 8320 <span class="keyword">done</span>, total 8320/11522, average 0.024 sec/video, moving Prec@1 50.504 Prec@5 78.911</span><br><span class="line">video 8640 <span class="keyword">done</span>, total 8640/11522, average 0.024 sec/video, moving Prec@1 50.335 Prec@5 78.847</span><br><span class="line">video 8960 <span class="keyword">done</span>, total 8960/11522, average 0.024 sec/video, moving Prec@1 50.267 Prec@5 78.855</span><br><span class="line">video 9280 <span class="keyword">done</span>, total 9280/11522, average 0.024 sec/video, moving Prec@1 50.258 Prec@5 78.840</span><br><span class="line">video 9600 <span class="keyword">done</span>, total 9600/11522, average 0.024 sec/video, moving Prec@1 50.374 Prec@5 78.869</span><br><span class="line">video 9920 <span class="keyword">done</span>, total 9920/11522, average 0.024 sec/video, moving Prec@1 50.312 Prec@5 78.845</span><br><span class="line">video 10240 <span class="keyword">done</span>, total 10240/11522, average 0.024 sec/video, moving Prec@1 50.468 Prec@5 78.939</span><br><span class="line">video 10560 <span class="keyword">done</span>, total 10560/11522, average 0.024 sec/video, moving Prec@1 50.605 Prec@5 78.896</span><br><span class="line">video 10880 <span class="keyword">done</span>, total 10880/11522, average 0.024 sec/video, moving Prec@1 50.698 Prec@5 78.956</span><br><span class="line">video 11200 <span class="keyword">done</span>, total 11200/11522, average 0.024 sec/video, moving Prec@1 50.811 Prec@5 79.003</span><br><span class="line">video 11520 <span class="keyword">done</span>, total 11520/11522, average 0.024 sec/video, moving Prec@1 50.790 Prec@5 78.979</span><br><span class="line">[0.91044776 0.3875     0.25714286 0.62686567 0.31578947 0.4137931</span><br><span class="line"> 0.69402985 0.52941176 0.65048544 0.72815534 0.4        0.5</span><br><span class="line"> 0.28723404 0.41935484 0.75796178 0.46       0.19277108 0.275</span><br><span class="line"> 0.45528455 0.36       0.344      0.5862069  0.31481481 0.49019608</span><br><span class="line"> 0.48387097 0.41666667 0.47826087 0.52       0.75757576 0.68253968</span><br><span class="line"> 0.72727273 0.61538462 0.83333333 0.20879121 0.26086957 0.16666667</span><br><span class="line"> 0.81609195 0.80392157 0.05263158 0.66666667 0.66942149 0.64</span><br><span class="line"> 0.71538462 0.67346939 0.73076923 0.59016393 0.41176471 0.42105263</span><br><span class="line"> 0.15730337 0.69172932 0.63207547 0.         0.4        0.45</span><br><span class="line"> 0.14285714 0.20833333 0.36363636 0.46875    0.         0.81632653</span><br><span class="line"> 0.66666667 0.16666667 0.62       0.22727273 0.16666667 0.50925926</span><br><span class="line"> 0.16666667 0.21212121 0.45070423 0.46153846 0.5483871  0.35714286</span><br><span class="line"> 0.5        0.52       0.78333333 0.5483871  0.41176471 0.52941176</span><br><span class="line"> 0.36363636 0.82926829 0.11428571 0.11904762 0.36666667 0.15789474</span><br><span class="line"> 0.54285714 0.32758621 0.60810811 0.6984127  0.22222222 0.07142857</span><br><span class="line"> 0.54054054 0.70731707 0.55813953 0.5462963  0.68224299 0.24193548</span><br><span class="line"> 0.07407407 0.19047619 0.54385965 0.39705882 0.33673469 0.53703704</span><br><span class="line"> 0.203125   0.59183673 0.62195122 0.63809524 0.56179775 0.73913043</span><br><span class="line"> 0.43859649 0.32967033 0.56862745 0.05882353 0.58108108 0.42857143</span><br><span class="line"> 0.64150943 0.43333333 0.34545455 0.78723404 0.3902439  0.58333333</span><br><span class="line"> 0.81818182 0.58823529 0.39090909 0.5        0.33333333 0.44897959</span><br><span class="line"> 0.43396226 0.55555556 0.14482759 0.63461538 0.26       0.18518519</span><br><span class="line"> 0.28947368 0.3        0.66887417 0.39655172 0.07142857 0.21666667</span><br><span class="line"> 0.13559322 0.59210526 0.62       0.41860465 0.43181818 0.46610169</span><br><span class="line"> 0.6        0.42957746 0.61320755 0.11940299 0.484375   0.776</span><br><span class="line"> 0.67878788 0.22580645 0.36666667 0.83333333 0.57142857 0.2745098</span><br><span class="line"> 0.26229508 0.42857143 0.4950495  0.34375    0.44444444 0.325</span><br><span class="line"> 0.26       0.4137931  0.7254902  0.75757576 0.9223301  0.8490566</span><br><span class="line"> 0.72222222 0.72972973 0.48571429 0.65467626 0.65693431 0.69736842]</span><br><span class="line">upper bound: 0.4877900527936639</span><br><span class="line">-----Evaluation is finished------</span><br><span class="line">Class Accuracy 46.92%</span><br><span class="line">Overall Prec@1 50.79% Prec@5 78.98%</span><br><span class="line">/home/hs/anaconda3/envs/dzl/lib/python3.7/site-packages/numpy/core/_asarray.py:136: VisibleDeprecationWarning: Creating an ndarray from ragged nested sequences (<span class="built_in">which</span> is a list-or-tuple of lists-or-tuples-or ndarrays with different lengths or shapes) is deprecated. If you meant to <span class="keyword">do</span> this, you must specify <span class="string">'dtype=object'</span> when creating the ndarray</span><br><span class="line">  <span class="built_in">return</span> array(a, dtype, copy=False, order=order, subok=True)</span><br></pre></td></tr></table></figure><h2 id="20201019-pa-with-new-conv-rgb"><a class="header-anchor" href="#20201019-pa-with-new-conv-rgb">#</a>20201019 PA with new conv &amp; RGB</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line">$ bash scripts/<span class="built_in">test</span>/sthv1/Full.sh </span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     RGB</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line"></span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.    </span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     PA</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line"></span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">video 0 <span class="keyword">done</span>, total 0/11522, average 0.246 sec/video, moving Prec@1 43.750 Prec@5 87.500</span><br><span class="line">video 320 <span class="keyword">done</span>, total 320/11522, average 0.034 sec/video, moving Prec@1 54.167 Prec@5 83.036</span><br><span class="line">video 640 <span class="keyword">done</span>, total 640/11522, average 0.029 sec/video, moving Prec@1 54.421 Prec@5 82.317</span><br><span class="line">video 960 <span class="keyword">done</span>, total 960/11522, average 0.028 sec/video, moving Prec@1 52.459 Prec@5 80.328</span><br><span class="line">video 1280 <span class="keyword">done</span>, total 1280/11522, average 0.027 sec/video, moving Prec@1 53.472 Prec@5 80.633</span><br><span class="line">video 1600 <span class="keyword">done</span>, total 1600/11522, average 0.026 sec/video, moving Prec@1 53.218 Prec@5 80.074</span><br><span class="line">video 1920 <span class="keyword">done</span>, total 1920/11522, average 0.026 sec/video, moving Prec@1 52.531 Prec@5 79.907</span><br><span class="line">video 2240 <span class="keyword">done</span>, total 2240/11522, average 0.026 sec/video, moving Prec@1 52.482 Prec@5 79.699</span><br><span class="line">video 2560 <span class="keyword">done</span>, total 2560/11522, average 0.025 sec/video, moving Prec@1 52.019 Prec@5 79.658</span><br><span class="line">video 2880 <span class="keyword">done</span>, total 2880/11522, average 0.025 sec/video, moving Prec@1 51.623 Prec@5 79.489</span><br><span class="line">video 3200 <span class="keyword">done</span>, total 3200/11522, average 0.025 sec/video, moving Prec@1 51.057 Prec@5 79.509</span><br><span class="line">video 3520 <span class="keyword">done</span>, total 3520/11522, average 0.025 sec/video, moving Prec@1 50.990 Prec@5 79.525</span><br><span class="line">video 3840 <span class="keyword">done</span>, total 3840/11522, average 0.025 sec/video, moving Prec@1 51.011 Prec@5 79.149</span><br><span class="line">video 4160 <span class="keyword">done</span>, total 4160/11522, average 0.025 sec/video, moving Prec@1 50.766 Prec@5 79.143</span><br><span class="line">video 4480 <span class="keyword">done</span>, total 4480/11522, average 0.025 sec/video, moving Prec@1 50.712 Prec@5 79.248</span><br><span class="line">video 4800 <span class="keyword">done</span>, total 4800/11522, average 0.025 sec/video, moving Prec@1 50.478 Prec@5 78.987</span><br><span class="line">video 5120 <span class="keyword">done</span>, total 5120/11522, average 0.025 sec/video, moving Prec@1 50.253 Prec@5 78.738</span><br><span class="line">video 5440 <span class="keyword">done</span>, total 5440/11522, average 0.025 sec/video, moving Prec@1 50.293 Prec@5 78.867</span><br><span class="line">video 5760 <span class="keyword">done</span>, total 5760/11522, average 0.025 sec/video, moving Prec@1 50.381 Prec@5 78.722</span><br><span class="line">video 6080 <span class="keyword">done</span>, total 6080/11522, average 0.025 sec/video, moving Prec@1 50.525 Prec@5 78.822</span><br><span class="line">video 6400 <span class="keyword">done</span>, total 6400/11522, average 0.025 sec/video, moving Prec@1 50.592 Prec@5 79.037</span><br><span class="line">video 6720 <span class="keyword">done</span>, total 6720/11522, average 0.025 sec/video, moving Prec@1 50.460 Prec@5 78.934</span><br><span class="line">video 7040 <span class="keyword">done</span>, total 7040/11522, average 0.025 sec/video, moving Prec@1 50.468 Prec@5 78.883</span><br><span class="line">video 7360 <span class="keyword">done</span>, total 7360/11522, average 0.025 sec/video, moving Prec@1 50.461 Prec@5 78.823</span><br><span class="line">video 7680 <span class="keyword">done</span>, total 7680/11522, average 0.024 sec/video, moving Prec@1 50.572 Prec@5 79.002</span><br><span class="line">video 8000 <span class="keyword">done</span>, total 8000/11522, average 0.024 sec/video, moving Prec@1 50.474 Prec@5 79.029</span><br><span class="line">video 8320 <span class="keyword">done</span>, total 8320/11522, average 0.024 sec/video, moving Prec@1 50.528 Prec@5 79.031</span><br><span class="line">video 8640 <span class="keyword">done</span>, total 8640/11522, average 0.024 sec/video, moving Prec@1 50.393 Prec@5 78.986</span><br><span class="line">video 8960 <span class="keyword">done</span>, total 8960/11522, average 0.024 sec/video, moving Prec@1 50.390 Prec@5 79.022</span><br><span class="line">video 9280 <span class="keyword">done</span>, total 9280/11522, average 0.024 sec/video, moving Prec@1 50.333 Prec@5 78.926</span><br><span class="line">video 9600 <span class="keyword">done</span>, total 9600/11522, average 0.024 sec/video, moving Prec@1 50.499 Prec@5 78.952</span><br><span class="line">video 9920 <span class="keyword">done</span>, total 9920/11522, average 0.024 sec/video, moving Prec@1 50.543 Prec@5 78.975</span><br><span class="line">video 10240 <span class="keyword">done</span>, total 10240/11522, average 0.024 sec/video, moving Prec@1 50.644 Prec@5 79.134</span><br><span class="line">video 10560 <span class="keyword">done</span>, total 10560/11522, average 0.024 sec/video, moving Prec@1 50.766 Prec@5 79.113</span><br><span class="line">video 10880 <span class="keyword">done</span>, total 10880/11522, average 0.024 sec/video, moving Prec@1 50.835 Prec@5 79.176</span><br><span class="line">video 11200 <span class="keyword">done</span>, total 11200/11522, average 0.024 sec/video, moving Prec@1 50.945 Prec@5 79.182</span><br><span class="line">video 11520 <span class="keyword">done</span>, total 11520/11522, average 0.024 sec/video, moving Prec@1 50.920 Prec@5 79.101</span><br><span class="line">[0.89552239 0.3375     0.26666667 0.62686567 0.34210526 0.45689655</span><br><span class="line"> 0.70895522 0.52941176 0.61165049 0.69902913 0.44       0.51388889</span><br><span class="line"> 0.29787234 0.38709677 0.74522293 0.46       0.18674699 0.275</span><br><span class="line"> 0.46341463 0.38666667 0.408      0.5        0.37037037 0.49019608</span><br><span class="line"> 0.4516129  0.5        0.39130435 0.36       0.6969697  0.6984127</span><br><span class="line"> 0.63636364 0.57692308 0.90740741 0.14285714 0.2173913  0.13888889</span><br><span class="line"> 0.7816092  0.78431373 0.15789474 0.59259259 0.7107438  0.66</span><br><span class="line"> 0.71538462 0.71428571 0.75       0.60655738 0.45588235 0.41052632</span><br><span class="line"> 0.24719101 0.68421053 0.67924528 0.         0.32       0.5</span><br><span class="line"> 0.19047619 0.25       0.42424242 0.53125    0.08333333 0.71428571</span><br><span class="line"> 0.63636364 0.22222222 0.64       0.16363636 0.13333333 0.48148148</span><br><span class="line"> 0.12962963 0.1969697  0.46478873 0.38461538 0.51612903 0.28571429</span><br><span class="line"> 0.47368421 0.56       0.76666667 0.48387097 0.47058824 0.35294118</span><br><span class="line"> 0.27272727 0.82926829 0.17142857 0.19047619 0.33333333 0.10526316</span><br><span class="line"> 0.51428571 0.36206897 0.59459459 0.63492063 0.22222222 0.16071429</span><br><span class="line"> 0.48648649 0.75609756 0.48837209 0.56481481 0.69158879 0.29032258</span><br><span class="line"> 0.07407407 0.07142857 0.53216374 0.51470588 0.34693878 0.60185185</span><br><span class="line"> 0.234375   0.6122449  0.52439024 0.68571429 0.52808989 0.68115942</span><br><span class="line"> 0.49122807 0.40659341 0.64705882 0.         0.67567568 0.42857143</span><br><span class="line"> 0.63207547 0.43333333 0.36363636 0.76595745 0.36585366 0.58333333</span><br><span class="line"> 0.79545455 0.74509804 0.38181818 0.475      0.36111111 0.57142857</span><br><span class="line"> 0.49056604 0.57407407 0.14482759 0.625      0.3        0.18518519</span><br><span class="line"> 0.28947368 0.26666667 0.67549669 0.4137931  0.14285714 0.41666667</span><br><span class="line"> 0.15254237 0.53947368 0.66       0.37209302 0.38636364 0.3559322</span><br><span class="line"> 0.58666667 0.42957746 0.67924528 0.17910448 0.484375   0.784</span><br><span class="line"> 0.64848485 0.27419355 0.38333333 0.75925926 0.52380952 0.19607843</span><br><span class="line"> 0.27868852 0.35714286 0.46534653 0.5        0.46296296 0.35</span><br><span class="line"> 0.32       0.4137931  0.65686275 0.72727273 0.91262136 0.86792453</span><br><span class="line"> 0.69444444 0.64864865 0.44761905 0.6618705  0.64963504 0.73684211]</span><br><span class="line">upper bound: 0.48456300049059403</span><br><span class="line">-----Evaluation is finished------</span><br><span class="line">Class Accuracy 46.96%</span><br><span class="line">Overall Prec@1 50.92% Prec@5 79.10%</span><br><span class="line">/home/hs/anaconda3/envs/dzl/lib/python3.7/site-packages/numpy/core/_asarray.py:136: VisibleDeprecationWarning: Creating an ndarray from ragged nested sequences (<span class="built_in">which</span> is a list-or-tuple of lists-or-tuples-or ndarrays with different lengths or shapes) is deprecated. If you meant to <span class="keyword">do</span> this, you must specify <span class="string">'dtype=object'</span> when creating the ndarray</span><br><span class="line">  <span class="built_in">return</span> array(a, dtype, copy=False, order=order, subok=True)</span><br></pre></td></tr></table></figure><h2 id="20201019-pa-with-new-conv-rgb-2"><a class="header-anchor" href="#20201019-pa-with-new-conv-rgb-2">#</a>20201019 PA with new conv &amp; RGB</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line">$ bash scripts/<span class="built_in">test</span>/sthv1/Full.sh</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     RGB</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line"></span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     PA</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line"></span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">video 0 <span class="keyword">done</span>, total 0/11522, average 0.242 sec/video, moving Prec@1 43.750 Prec@5 87.500</span><br><span class="line">video 320 <span class="keyword">done</span>, total 320/11522, average 0.034 sec/video, moving Prec@1 54.167 Prec@5 82.440</span><br><span class="line">video 640 <span class="keyword">done</span>, total 640/11522, average 0.029 sec/video, moving Prec@1 53.963 Prec@5 82.317</span><br><span class="line">video 960 <span class="keyword">done</span>, total 960/11522, average 0.027 sec/video, moving Prec@1 52.357 Prec@5 80.430</span><br><span class="line">video 1280 <span class="keyword">done</span>, total 1280/11522, average 0.026 sec/video, moving Prec@1 53.164 Prec@5 80.710</span><br><span class="line">video 1600 <span class="keyword">done</span>, total 1600/11522, average 0.026 sec/video, moving Prec@1 53.032 Prec@5 80.322</span><br><span class="line">video 1920 <span class="keyword">done</span>, total 1920/11522, average 0.025 sec/video, moving Prec@1 52.428 Prec@5 80.165</span><br><span class="line">video 2240 <span class="keyword">done</span>, total 2240/11522, average 0.025 sec/video, moving Prec@1 52.438 Prec@5 80.053</span><br><span class="line">video 2560 <span class="keyword">done</span>, total 2560/11522, average 0.025 sec/video, moving Prec@1 52.135 Prec@5 79.852</span><br><span class="line">video 2880 <span class="keyword">done</span>, total 2880/11522, average 0.025 sec/video, moving Prec@1 51.761 Prec@5 79.765</span><br><span class="line">video 3200 <span class="keyword">done</span>, total 3200/11522, average 0.025 sec/video, moving Prec@1 51.182 Prec@5 79.789</span><br><span class="line">video 3520 <span class="keyword">done</span>, total 3520/11522, average 0.025 sec/video, moving Prec@1 51.131 Prec@5 79.751</span><br><span class="line">video 3840 <span class="keyword">done</span>, total 3840/11522, average 0.025 sec/video, moving Prec@1 51.193 Prec@5 79.357</span><br><span class="line">video 4160 <span class="keyword">done</span>, total 4160/11522, average 0.024 sec/video, moving Prec@1 50.958 Prec@5 79.286</span><br><span class="line">video 4480 <span class="keyword">done</span>, total 4480/11522, average 0.024 sec/video, moving Prec@1 50.845 Prec@5 79.404</span><br><span class="line">video 4800 <span class="keyword">done</span>, total 4800/11522, average 0.024 sec/video, moving Prec@1 50.602 Prec@5 79.111</span><br><span class="line">video 5120 <span class="keyword">done</span>, total 5120/11522, average 0.024 sec/video, moving Prec@1 50.389 Prec@5 78.894</span><br><span class="line">video 5440 <span class="keyword">done</span>, total 5440/11522, average 0.024 sec/video, moving Prec@1 50.513 Prec@5 79.051</span><br><span class="line">video 5760 <span class="keyword">done</span>, total 5760/11522, average 0.024 sec/video, moving Prec@1 50.623 Prec@5 78.895</span><br><span class="line">video 6080 <span class="keyword">done</span>, total 6080/11522, average 0.024 sec/video, moving Prec@1 50.853 Prec@5 79.003</span><br><span class="line">video 6400 <span class="keyword">done</span>, total 6400/11522, average 0.024 sec/video, moving Prec@1 50.982 Prec@5 79.193</span><br><span class="line">video 6720 <span class="keyword">done</span>, total 6720/11522, average 0.024 sec/video, moving Prec@1 50.772 Prec@5 79.097</span><br><span class="line">video 7040 <span class="keyword">done</span>, total 7040/11522, average 0.024 sec/video, moving Prec@1 50.779 Prec@5 79.025</span><br><span class="line">video 7360 <span class="keyword">done</span>, total 7360/11522, average 0.024 sec/video, moving Prec@1 50.786 Prec@5 78.959</span><br><span class="line">video 7680 <span class="keyword">done</span>, total 7680/11522, average 0.024 sec/video, moving Prec@1 50.910 Prec@5 79.158</span><br><span class="line">video 8000 <span class="keyword">done</span>, total 8000/11522, average 0.024 sec/video, moving Prec@1 50.836 Prec@5 79.154</span><br><span class="line">video 8320 <span class="keyword">done</span>, total 8320/11522, average 0.024 sec/video, moving Prec@1 50.852 Prec@5 79.163</span><br><span class="line">video 8640 <span class="keyword">done</span>, total 8640/11522, average 0.024 sec/video, moving Prec@1 50.716 Prec@5 79.124</span><br><span class="line">video 8960 <span class="keyword">done</span>, total 8960/11522, average 0.024 sec/video, moving Prec@1 50.657 Prec@5 79.133</span><br><span class="line">video 9280 <span class="keyword">done</span>, total 9280/11522, average 0.024 sec/video, moving Prec@1 50.592 Prec@5 79.045</span><br><span class="line">video 9600 <span class="keyword">done</span>, total 9600/11522, average 0.024 sec/video, moving Prec@1 50.759 Prec@5 79.077</span><br><span class="line">video 9920 <span class="keyword">done</span>, total 9920/11522, average 0.024 sec/video, moving Prec@1 50.815 Prec@5 79.116</span><br><span class="line">video 10240 <span class="keyword">done</span>, total 10240/11522, average 0.024 sec/video, moving Prec@1 50.907 Prec@5 79.280</span><br><span class="line">video 10560 <span class="keyword">done</span>, total 10560/11522, average 0.024 sec/video, moving Prec@1 51.031 Prec@5 79.255</span><br><span class="line">video 10880 <span class="keyword">done</span>, total 10880/11522, average 0.024 sec/video, moving Prec@1 51.101 Prec@5 79.314</span><br><span class="line">video 11200 <span class="keyword">done</span>, total 11200/11522, average 0.024 sec/video, moving Prec@1 51.213 Prec@5 79.333</span><br><span class="line">video 11520 <span class="keyword">done</span>, total 11520/11522, average 0.024 sec/video, moving Prec@1 51.180 Prec@5 79.283</span><br><span class="line">[0.91044776 0.3125     0.26666667 0.59701493 0.34210526 0.48275862</span><br><span class="line"> 0.73134328 0.5        0.63106796 0.70873786 0.44       0.48611111</span><br><span class="line"> 0.31914894 0.41935484 0.75159236 0.44       0.20481928 0.3125</span><br><span class="line"> 0.46341463 0.4        0.416      0.5        0.38888889 0.49019608</span><br><span class="line"> 0.4516129  0.41666667 0.39130435 0.36       0.6969697  0.68253968</span><br><span class="line"> 0.63636364 0.53846154 0.90740741 0.14285714 0.23913043 0.13888889</span><br><span class="line"> 0.8045977  0.80392157 0.13157895 0.59259259 0.7107438  0.64</span><br><span class="line"> 0.73076923 0.71428571 0.75       0.60655738 0.45588235 0.43157895</span><br><span class="line"> 0.26966292 0.70676692 0.6509434  0.         0.32       0.45</span><br><span class="line"> 0.19047619 0.25       0.45454545 0.53125    0.08333333 0.73469388</span><br><span class="line"> 0.6969697  0.22222222 0.64       0.18181818 0.13333333 0.5</span><br><span class="line"> 0.12962963 0.21212121 0.46478873 0.34615385 0.51612903 0.21428571</span><br><span class="line"> 0.47368421 0.56       0.83333333 0.4516129  0.29411765 0.41176471</span><br><span class="line"> 0.22727273 0.82926829 0.17142857 0.19047619 0.3        0.10526316</span><br><span class="line"> 0.54285714 0.34482759 0.59459459 0.63492063 0.16666667 0.16071429</span><br><span class="line"> 0.54054054 0.75609756 0.46511628 0.60185185 0.6635514  0.29032258</span><br><span class="line"> 0.07407407 0.07142857 0.52046784 0.51470588 0.32653061 0.58333333</span><br><span class="line"> 0.234375   0.59183673 0.56097561 0.6952381  0.57303371 0.68115942</span><br><span class="line"> 0.49122807 0.3956044  0.64705882 0.         0.67567568 0.38095238</span><br><span class="line"> 0.63207547 0.46666667 0.36363636 0.75531915 0.3902439  0.60416667</span><br><span class="line"> 0.78409091 0.76470588 0.39090909 0.475      0.36111111 0.53061224</span><br><span class="line"> 0.49056604 0.57407407 0.15172414 0.61538462 0.34       0.11111111</span><br><span class="line"> 0.28947368 0.26666667 0.66225166 0.43103448 0.14285714 0.4</span><br><span class="line"> 0.13559322 0.52631579 0.67       0.39534884 0.38636364 0.33050847</span><br><span class="line"> 0.57333333 0.42253521 0.68867925 0.17910448 0.53125    0.768</span><br><span class="line"> 0.64848485 0.29032258 0.38333333 0.77777778 0.51190476 0.19607843</span><br><span class="line"> 0.29508197 0.37142857 0.5049505  0.46875    0.44444444 0.325</span><br><span class="line"> 0.34       0.44827586 0.66666667 0.72727273 0.91262136 0.87735849</span><br><span class="line"> 0.72222222 0.64864865 0.43809524 0.64028777 0.65693431 0.73684211]</span><br><span class="line">upper bound: 0.4842930969956842</span><br><span class="line">-----Evaluation is finished------</span><br><span class="line">Class Accuracy 46.93%</span><br><span class="line">Overall Prec@1 51.18% Prec@5 79.28%</span><br><span class="line">/home/hs/anaconda3/envs/dzl/lib/python3.7/site-packages/numpy/core/_asarray.py:136: VisibleDeprecationWarning: Creating an ndarray from ragged nested sequences (<span class="built_in">which</span> is a list-or-tuple of lists-or-tuples-or ndarrays with different lengths or shapes) is deprecated. If you meant to <span class="keyword">do</span> this, you must specify <span class="string">'dtype=object'</span> when creating the ndarray</span><br><span class="line">  <span class="built_in">return</span> array(a, dtype, copy=False, order=order, subok=True)</span><br></pre></td></tr></table></figure><h2 id="20201021-rgbo"><a class="header-anchor" href="#20201021-rgbo">#</a>20201021 RGBo</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line">$ python test_models.py something --VAP --batch_size=8 -j=4 --test_crops=1 --test_segments=8 --weights=pretrained/PAN_RGB_something_resnet50_shift8_blockres_avg_segment8_e50.pth.tar</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     RGB</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line"></span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">video 0 <span class="keyword">done</span>, total 0/11522, average 3.718 sec/video, moving Prec@1 25.000 Prec@5 62.500</span><br><span class="line">video 160 <span class="keyword">done</span>, total 160/11522, average 0.239 sec/video, moving Prec@1 46.429 Prec@5 76.786</span><br><span class="line">video 320 <span class="keyword">done</span>, total 320/11522, average 0.193 sec/video, moving Prec@1 47.866 Prec@5 76.220</span><br><span class="line">video 480 <span class="keyword">done</span>, total 480/11522, average 0.190 sec/video, moving Prec@1 47.951 Prec@5 78.074</span><br><span class="line">video 640 <span class="keyword">done</span>, total 640/11522, average 0.176 sec/video, moving Prec@1 46.759 Prec@5 76.698</span><br><span class="line">video 800 <span class="keyword">done</span>, total 800/11522, average 0.168 sec/video, moving Prec@1 45.421 Prec@5 75.248</span><br><span class="line">video 960 <span class="keyword">done</span>, total 960/11522, average 0.159 sec/video, moving Prec@1 45.971 Prec@5 74.690</span><br><span class="line">video 1120 <span class="keyword">done</span>, total 1120/11522, average 0.152 sec/video, moving Prec@1 46.099 Prec@5 74.734</span><br><span class="line">video 1280 <span class="keyword">done</span>, total 1280/11522, average 0.144 sec/video, moving Prec@1 46.429 Prec@5 75.233</span><br><span class="line">video 1440 <span class="keyword">done</span>, total 1440/11522, average 0.140 sec/video, moving Prec@1 46.685 Prec@5 74.862</span><br><span class="line">video 1600 <span class="keyword">done</span>, total 1600/11522, average 0.139 sec/video, moving Prec@1 46.766 Prec@5 74.876</span><br><span class="line">video 1760 <span class="keyword">done</span>, total 1760/11522, average 0.139 sec/video, moving Prec@1 45.871 Prec@5 74.321</span><br><span class="line">video 1920 <span class="keyword">done</span>, total 1920/11522, average 0.135 sec/video, moving Prec@1 45.747 Prec@5 74.274</span><br><span class="line">video 2080 <span class="keyword">done</span>, total 2080/11522, average 0.133 sec/video, moving Prec@1 45.546 Prec@5 74.234</span><br><span class="line">video 2240 <span class="keyword">done</span>, total 2240/11522, average 0.132 sec/video, moving Prec@1 45.418 Prec@5 74.199</span><br><span class="line">video 2400 <span class="keyword">done</span>, total 2400/11522, average 0.131 sec/video, moving Prec@1 45.307 Prec@5 74.211</span><br><span class="line">video 2560 <span class="keyword">done</span>, total 2560/11522, average 0.130 sec/video, moving Prec@1 45.132 Prec@5 74.182</span><br><span class="line">video 2720 <span class="keyword">done</span>, total 2720/11522, average 0.128 sec/video, moving Prec@1 45.345 Prec@5 74.450</span><br><span class="line">video 2880 <span class="keyword">done</span>, total 2880/11522, average 0.126 sec/video, moving Prec@1 44.910 Prec@5 74.100</span><br><span class="line">video 3040 <span class="keyword">done</span>, total 3040/11522, average 0.124 sec/video, moving Prec@1 44.980 Prec@5 74.180</span><br><span class="line">video 3200 <span class="keyword">done</span>, total 3200/11522, average 0.124 sec/video, moving Prec@1 44.514 Prec@5 74.034</span><br><span class="line">video 3360 <span class="keyword">done</span>, total 3360/11522, average 0.122 sec/video, moving Prec@1 44.626 Prec@5 74.228</span><br><span class="line">video 3520 <span class="keyword">done</span>, total 3520/11522, average 0.121 sec/video, moving Prec@1 44.586 Prec@5 74.093</span><br><span class="line">video 3680 <span class="keyword">done</span>, total 3680/11522, average 0.119 sec/video, moving Prec@1 44.306 Prec@5 73.861</span><br><span class="line">video 3840 <span class="keyword">done</span>, total 3840/11522, average 0.119 sec/video, moving Prec@1 44.491 Prec@5 73.831</span><br><span class="line">video 4000 <span class="keyword">done</span>, total 4000/11522, average 0.118 sec/video, moving Prec@1 44.212 Prec@5 73.802</span><br><span class="line">video 4160 <span class="keyword">done</span>, total 4160/11522, average 0.117 sec/video, moving Prec@1 44.218 Prec@5 73.800</span><br><span class="line">video 4320 <span class="keyword">done</span>, total 4320/11522, average 0.117 sec/video, moving Prec@1 44.362 Prec@5 73.706</span><br><span class="line">video 4480 <span class="keyword">done</span>, total 4480/11522, average 0.116 sec/video, moving Prec@1 44.385 Prec@5 73.708</span><br><span class="line">video 4640 <span class="keyword">done</span>, total 4640/11522, average 0.115 sec/video, moving Prec@1 44.535 Prec@5 73.580</span><br><span class="line">video 4800 <span class="keyword">done</span>, total 4800/11522, average 0.114 sec/video, moving Prec@1 44.468 Prec@5 73.440</span><br><span class="line">video 4960 <span class="keyword">done</span>, total 4960/11522, average 0.113 sec/video, moving Prec@1 44.304 Prec@5 73.289</span><br><span class="line">video 5120 <span class="keyword">done</span>, total 5120/11522, average 0.113 sec/video, moving Prec@1 44.423 Prec@5 73.362</span><br><span class="line">video 5280 <span class="keyword">done</span>, total 5280/11522, average 0.112 sec/video, moving Prec@1 44.402 Prec@5 73.298</span><br><span class="line">video 5440 <span class="keyword">done</span>, total 5440/11522, average 0.112 sec/video, moving Prec@1 44.475 Prec@5 73.477</span><br><span class="line">video 5600 <span class="keyword">done</span>, total 5600/11522, average 0.112 sec/video, moving Prec@1 44.454 Prec@5 73.520</span><br><span class="line">video 5760 <span class="keyword">done</span>, total 5760/11522, average 0.113 sec/video, moving Prec@1 44.435 Prec@5 73.370</span><br><span class="line">video 5920 <span class="keyword">done</span>, total 5920/11522, average 0.116 sec/video, moving Prec@1 44.518 Prec@5 73.482</span><br><span class="line">video 6080 <span class="keyword">done</span>, total 6080/11522, average 0.117 sec/video, moving Prec@1 44.514 Prec@5 73.489</span><br><span class="line">video 6240 <span class="keyword">done</span>, total 6240/11522, average 0.117 sec/video, moving Prec@1 44.542 Prec@5 73.464</span><br><span class="line">video 6400 <span class="keyword">done</span>, total 6400/11522, average 0.117 sec/video, moving Prec@1 44.538 Prec@5 73.533</span><br><span class="line">video 6560 <span class="keyword">done</span>, total 6560/11522, average 0.116 sec/video, moving Prec@1 44.488 Prec@5 73.538</span><br><span class="line">video 6720 <span class="keyword">done</span>, total 6720/11522, average 0.116 sec/video, moving Prec@1 44.471 Prec@5 73.484</span><br><span class="line">video 6880 <span class="keyword">done</span>, total 6880/11522, average 0.115 sec/video, moving Prec@1 44.440 Prec@5 73.432</span><br><span class="line">video 7040 <span class="keyword">done</span>, total 7040/11522, average 0.115 sec/video, moving Prec@1 44.509 Prec@5 73.411</span><br><span class="line">video 7200 <span class="keyword">done</span>, total 7200/11522, average 0.114 sec/video, moving Prec@1 44.478 Prec@5 73.432</span><br><span class="line">video 7360 <span class="keyword">done</span>, total 7360/11522, average 0.114 sec/video, moving Prec@1 44.435 Prec@5 73.358</span><br><span class="line">video 7520 <span class="keyword">done</span>, total 7520/11522, average 0.114 sec/video, moving Prec@1 44.474 Prec@5 73.433</span><br><span class="line">video 7680 <span class="keyword">done</span>, total 7680/11522, average 0.113 sec/video, moving Prec@1 44.511 Prec@5 73.452</span><br><span class="line">video 7840 <span class="keyword">done</span>, total 7840/11522, average 0.113 sec/video, moving Prec@1 44.521 Prec@5 73.471</span><br><span class="line">video 8000 <span class="keyword">done</span>, total 8000/11522, average 0.112 sec/video, moving Prec@1 44.456 Prec@5 73.489</span><br><span class="line">video 8160 <span class="keyword">done</span>, total 8160/11522, average 0.111 sec/video, moving Prec@1 44.478 Prec@5 73.470</span><br><span class="line">video 8320 <span class="keyword">done</span>, total 8320/11522, average 0.111 sec/video, moving Prec@1 44.549 Prec@5 73.487</span><br><span class="line">video 8480 <span class="keyword">done</span>, total 8480/11522, average 0.111 sec/video, moving Prec@1 44.475 Prec@5 73.445</span><br><span class="line">video 8640 <span class="keyword">done</span>, total 8640/11522, average 0.110 sec/video, moving Prec@1 44.438 Prec@5 73.462</span><br><span class="line">video 8800 <span class="keyword">done</span>, total 8800/11522, average 0.110 sec/video, moving Prec@1 44.550 Prec@5 73.490</span><br><span class="line">video 8960 <span class="keyword">done</span>, total 8960/11522, average 0.109 sec/video, moving Prec@1 44.625 Prec@5 73.550</span><br><span class="line">video 9120 <span class="keyword">done</span>, total 9120/11522, average 0.109 sec/video, moving Prec@1 44.665 Prec@5 73.510</span><br><span class="line">video 9280 <span class="keyword">done</span>, total 9280/11522, average 0.109 sec/video, moving Prec@1 44.660 Prec@5 73.482</span><br><span class="line">video 9440 <span class="keyword">done</span>, total 9440/11522, average 0.108 sec/video, moving Prec@1 44.634 Prec@5 73.455</span><br><span class="line">video 9600 <span class="keyword">done</span>, total 9600/11522, average 0.108 sec/video, moving Prec@1 44.775 Prec@5 73.564</span><br><span class="line">video 9760 <span class="keyword">done</span>, total 9760/11522, average 0.107 sec/video, moving Prec@1 44.799 Prec@5 73.618</span><br><span class="line">video 9920 <span class="keyword">done</span>, total 9920/11522, average 0.106 sec/video, moving Prec@1 44.722 Prec@5 73.580</span><br><span class="line">video 10080 <span class="keyword">done</span>, total 10080/11522, average 0.106 sec/video, moving Prec@1 44.826 Prec@5 73.672</span><br><span class="line">video 10240 <span class="keyword">done</span>, total 10240/11522, average 0.105 sec/video, moving Prec@1 44.838 Prec@5 73.800</span><br><span class="line">video 10400 <span class="keyword">done</span>, total 10400/11522, average 0.105 sec/video, moving Prec@1 44.860 Prec@5 73.741</span><br><span class="line">video 10560 <span class="keyword">done</span>, total 10560/11522, average 0.104 sec/video, moving Prec@1 44.909 Prec@5 73.723</span><br><span class="line">video 10720 <span class="keyword">done</span>, total 10720/11522, average 0.104 sec/video, moving Prec@1 44.976 Prec@5 73.723</span><br><span class="line">video 10880 <span class="keyword">done</span>, total 10880/11522, average 0.104 sec/video, moving Prec@1 44.994 Prec@5 73.778</span><br><span class="line">video 11040 <span class="keyword">done</span>, total 11040/11522, average 0.104 sec/video, moving Prec@1 44.904 Prec@5 73.724</span><br><span class="line">video 11200 <span class="keyword">done</span>, total 11200/11522, average 0.103 sec/video, moving Prec@1 44.995 Prec@5 73.742</span><br><span class="line">video 11360 <span class="keyword">done</span>, total 11360/11522, average 0.103 sec/video, moving Prec@1 44.986 Prec@5 73.716</span><br><span class="line">video 11520 <span class="keyword">done</span>, total 11520/11522, average 0.102 sec/video, moving Prec@1 44.975 Prec@5 73.685</span><br><span class="line">[0.7761194  0.275      0.19047619 0.62686567 0.23684211 0.40517241</span><br><span class="line"> 0.62686567 0.44117647 0.45631068 0.6407767  0.37333333 0.38888889</span><br><span class="line"> 0.24468085 0.32258065 0.7133758  0.36       0.19879518 0.225</span><br><span class="line"> 0.39837398 0.28       0.32       0.48275862 0.40740741 0.43137255</span><br><span class="line"> 0.32258065 0.33333333 0.39130435 0.28       0.60606061 0.53968254</span><br><span class="line"> 0.63636364 0.57692308 0.72222222 0.10989011 0.23913043 0.16666667</span><br><span class="line"> 0.7816092  0.78431373 0.05263158 0.48148148 0.62809917 0.54</span><br><span class="line"> 0.66923077 0.63265306 0.59615385 0.52459016 0.41176471 0.34736842</span><br><span class="line"> 0.15730337 0.66165414 0.56603774 0.         0.36       0.4</span><br><span class="line"> 0.19047619 0.29166667 0.39393939 0.40625    0.         0.73469388</span><br><span class="line"> 0.60606061 0.13888889 0.6        0.11818182 0.1        0.38888889</span><br><span class="line"> 0.11111111 0.15151515 0.43661972 0.30769231 0.48387097 0.25</span><br><span class="line"> 0.5        0.44       0.7        0.41935484 0.29411765 0.29411765</span><br><span class="line"> 0.13636364 0.63414634 0.11428571 0.14285714 0.33333333 0.10526316</span><br><span class="line"> 0.62857143 0.29310345 0.52702703 0.55555556 0.16666667 0.10714286</span><br><span class="line"> 0.48648649 0.68292683 0.41860465 0.46296296 0.57009346 0.27419355</span><br><span class="line"> 0.03703704 0.11904762 0.41520468 0.41176471 0.24489796 0.51851852</span><br><span class="line"> 0.21875    0.46938776 0.42682927 0.6        0.5505618  0.75362319</span><br><span class="line"> 0.47368421 0.2967033  0.54901961 0.11764706 0.60810811 0.38095238</span><br><span class="line"> 0.66037736 0.36666667 0.21818182 0.62765957 0.2195122  0.58333333</span><br><span class="line"> 0.79545455 0.54901961 0.35454545 0.425      0.36111111 0.44897959</span><br><span class="line"> 0.49056604 0.53703704 0.15862069 0.53846154 0.22       0.18518519</span><br><span class="line"> 0.13157895 0.23333333 0.64238411 0.29310345 0.07142857 0.45</span><br><span class="line"> 0.08474576 0.51315789 0.57       0.34883721 0.25       0.38135593</span><br><span class="line"> 0.56       0.33098592 0.6509434  0.17910448 0.484375   0.752</span><br><span class="line"> 0.56363636 0.12903226 0.28333333 0.7037037  0.5        0.15686275</span><br><span class="line"> 0.18032787 0.21428571 0.43564356 0.4375     0.24074074 0.25</span><br><span class="line"> 0.26       0.31034483 0.60784314 0.66666667 0.83495146 0.75471698</span><br><span class="line"> 0.68518519 0.45945946 0.44761905 0.61870504 0.59124088 0.71052632]</span><br><span class="line">upper bound: 0.42524204990350917</span><br><span class="line">-----Evaluation is finished------</span><br><span class="line">Class Accuracy 40.94%</span><br><span class="line">Overall Prec@1 44.97% Prec@5 73.69%</span><br><span class="line">E:\Program Files\Anaconda3\envs\tsm\lib\site-packages\numpy\core\_asarray.py:136: VisibleDeprecationWarning: Creating an ndarray from ragged nested sequences (<span class="built_in">which</span> is a list-or-tuple of lists-or-tuples-or ndarrays with different lengths or shapes) is deprecated. If you meant to <span class="keyword">do</span> this, you must specify <span class="string">'dtype=object'</span> when creating the ndarray  <span class="built_in">return</span> array(a, dtype, copy=False, order=order, subok=True)</span><br></pre></td></tr></table></figure><h2 id="20201021-rgbo-pan-liten"><a class="header-anchor" href="#20201021-rgbo-pan-liten">#</a>20201021 RGBo &amp; PAn &amp; Liten</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python test_models.py something --VAP --batch_size=16 -j=4 --test_crops=1 --test_segments=8,8,8 --weights=</span></span><br><span class="line"><span class="comment"># pretrained/PAN_Lite_something_resnet50_shift8_blockres_avg_segment8_e80.pth.tar,</span></span><br><span class="line"><span class="comment"># pretrained/PAN_RGB_something_resnet50_shift8_blockres_avg_segment8_e50.pth.tar,</span></span><br><span class="line"><span class="comment"># pretrained/PAN_PA_something_resnet50_shift8_blockres_avg_segment8_e80.pth.tar --full_res --twice_sample</span></span><br><span class="line">$ bash scripts/<span class="built_in">test</span>/sthv1/En.sh</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     Lite</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line"></span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">=&gt; Converting the ImageNet model to a PAN_Lite init model</span><br><span class="line">=&gt; Done. PAN_lite model ready...</span><br><span class="line">=&gt; Using twice sample <span class="keyword">for</span> the dataset...</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     RGB</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line"></span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">=&gt; Using twice sample <span class="keyword">for</span> the dataset...</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     PA</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line"></span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">=&gt; Using twice sample <span class="keyword">for</span> the dataset...</span><br><span class="line">video number:11522</span><br><span class="line">video 0 <span class="keyword">done</span>, total 0/11522, average 1.035 sec/video, moving Prec@1 50.000 Prec@5 81.250</span><br><span class="line">video 320 <span class="keyword">done</span>, total 320/11522, average 0.156 sec/video, moving Prec@1 54.464 Prec@5 86.012</span><br><span class="line">video 640 <span class="keyword">done</span>, total 640/11522, average 0.151 sec/video, moving Prec@1 56.707 Prec@5 84.299</span><br><span class="line">video 960 <span class="keyword">done</span>, total 960/11522, average 0.150 sec/video, moving Prec@1 55.635 Prec@5 82.377</span><br><span class="line">video 1280 <span class="keyword">done</span>, total 1280/11522, average 0.148 sec/video, moving Prec@1 56.481 Prec@5 83.102</span><br><span class="line">video 1600 <span class="keyword">done</span>, total 1600/11522, average 0.148 sec/video, moving Prec@1 56.621 Prec@5 83.106</span><br><span class="line">video 1920 <span class="keyword">done</span>, total 1920/11522, average 0.146 sec/video, moving Prec@1 55.682 Prec@5 82.800</span><br><span class="line">video 2240 <span class="keyword">done</span>, total 2240/11522, average 0.146 sec/video, moving Prec@1 55.629 Prec@5 82.624</span><br><span class="line">video 2560 <span class="keyword">done</span>, total 2560/11522, average 0.145 sec/video, moving Prec@1 55.668 Prec@5 82.026</span><br><span class="line">video 2880 <span class="keyword">done</span>, total 2880/11522, average 0.145 sec/video, moving Prec@1 55.249 Prec@5 82.113</span><br><span class="line">video 3200 <span class="keyword">done</span>, total 3200/11522, average 0.145 sec/video, moving Prec@1 54.851 Prec@5 82.121</span><br><span class="line">video 3520 <span class="keyword">done</span>, total 3520/11522, average 0.145 sec/video, moving Prec@1 54.666 Prec@5 82.070</span><br><span class="line">video 3840 <span class="keyword">done</span>, total 3840/11522, average 0.144 sec/video, moving Prec@1 54.876 Prec@5 81.743</span><br><span class="line">video 4160 <span class="keyword">done</span>, total 4160/11522, average 0.144 sec/video, moving Prec@1 54.741 Prec@5 81.561</span><br><span class="line">video 4480 <span class="keyword">done</span>, total 4480/11522, average 0.144 sec/video, moving Prec@1 54.560 Prec@5 81.539</span><br><span class="line">video 4800 <span class="keyword">done</span>, total 4800/11522, average 0.143 sec/video, moving Prec@1 54.360 Prec@5 81.333</span><br><span class="line">video 5120 <span class="keyword">done</span>, total 5120/11522, average 0.143 sec/video, moving Prec@1 53.972 Prec@5 81.055</span><br><span class="line">video 5440 <span class="keyword">done</span>, total 5440/11522, average 0.143 sec/video, moving Prec@1 54.271 Prec@5 81.305</span><br><span class="line">video 5760 <span class="keyword">done</span>, total 5760/11522, average 0.143 sec/video, moving Prec@1 54.276 Prec@5 81.198</span><br><span class="line">video 6080 <span class="keyword">done</span>, total 6080/11522, average 0.143 sec/video, moving Prec@1 54.068 Prec@5 81.283</span><br><span class="line">video 6400 <span class="keyword">done</span>, total 6400/11522, average 0.143 sec/video, moving Prec@1 54.193 Prec@5 81.390</span><br><span class="line">video 6720 <span class="keyword">done</span>, total 6720/11522, average 0.143 sec/video, moving Prec@1 54.097 Prec@5 81.309</span><br><span class="line">video 7040 <span class="keyword">done</span>, total 7040/11522, average 0.143 sec/video, moving Prec@1 53.997 Prec@5 81.278</span><br><span class="line">video 7360 <span class="keyword">done</span>, total 7360/11522, average 0.143 sec/video, moving Prec@1 53.932 Prec@5 81.223</span><br><span class="line">video 7680 <span class="keyword">done</span>, total 7680/11522, average 0.143 sec/video, moving Prec@1 53.963 Prec@5 81.302</span><br><span class="line">video 8000 <span class="keyword">done</span>, total 8000/11522, average 0.143 sec/video, moving Prec@1 53.905 Prec@5 81.275</span><br><span class="line">video 8320 <span class="keyword">done</span>, total 8320/11522, average 0.143 sec/video, moving Prec@1 53.839 Prec@5 81.310</span><br><span class="line">video 8640 <span class="keyword">done</span>, total 8640/11522, average 0.143 sec/video, moving Prec@1 53.662 Prec@5 81.181</span><br><span class="line">video 8960 <span class="keyword">done</span>, total 8960/11522, average 0.143 sec/video, moving Prec@1 53.632 Prec@5 81.205</span><br><span class="line">video 9280 <span class="keyword">done</span>, total 9280/11522, average 0.143 sec/video, moving Prec@1 53.647 Prec@5 81.185</span><br><span class="line">video 9600 <span class="keyword">done</span>, total 9600/11522, average 0.143 sec/video, moving Prec@1 53.744 Prec@5 81.198</span><br><span class="line">video 9920 <span class="keyword">done</span>, total 9920/11522, average 0.143 sec/video, moving Prec@1 53.744 Prec@5 81.180</span><br><span class="line">video 10240 <span class="keyword">done</span>, total 10240/11522, average 0.143 sec/video, moving Prec@1 53.890 Prec@5 81.318</span><br><span class="line">video 10560 <span class="keyword">done</span>, total 10560/11522, average 0.142 sec/video, moving Prec@1 53.943 Prec@5 81.288</span><br><span class="line">video 10880 <span class="keyword">done</span>, total 10880/11522, average 0.142 sec/video, moving Prec@1 53.992 Prec@5 81.360</span><br><span class="line">video 11200 <span class="keyword">done</span>, total 11200/11522, average 0.142 sec/video, moving Prec@1 54.012 Prec@5 81.419</span><br><span class="line">video 11520 <span class="keyword">done</span>, total 11520/11522, average 0.142 sec/video, moving Prec@1 54.044 Prec@5 81.427</span><br><span class="line">[0.89552239 0.3875     0.36190476 0.65671642 0.44736842 0.50862069</span><br><span class="line"> 0.69402985 0.47058824 0.74757282 0.76699029 0.44       0.63888889</span><br><span class="line"> 0.41489362 0.38709677 0.81528662 0.56       0.21084337 0.3125</span><br><span class="line"> 0.5203252  0.4        0.416      0.67241379 0.40740741 0.43137255</span><br><span class="line"> 0.51612903 0.41666667 0.47826087 0.44       0.72727273 0.6984127</span><br><span class="line"> 0.68181818 0.61538462 0.85185185 0.23076923 0.32608696 0.16666667</span><br><span class="line"> 0.82758621 0.82352941 0.13157895 0.7037037  0.70247934 0.68</span><br><span class="line"> 0.71538462 0.67346939 0.73076923 0.63934426 0.46323529 0.47368421</span><br><span class="line"> 0.30337079 0.65413534 0.6509434  0.         0.32       0.55</span><br><span class="line"> 0.14285714 0.29166667 0.48484848 0.59375    0.         0.75510204</span><br><span class="line"> 0.75757576 0.25       0.64       0.15454545 0.16666667 0.58333333</span><br><span class="line"> 0.11111111 0.21212121 0.45070423 0.38461538 0.5483871  0.28571429</span><br><span class="line"> 0.5        0.6        0.85       0.58064516 0.23529412 0.41176471</span><br><span class="line"> 0.36363636 0.80487805 0.14285714 0.0952381  0.4        0.10526316</span><br><span class="line"> 0.62857143 0.39655172 0.64864865 0.80952381 0.22222222 0.10714286</span><br><span class="line"> 0.56756757 0.7804878  0.60465116 0.65740741 0.75700935 0.30645161</span><br><span class="line"> 0.07407407 0.19047619 0.57894737 0.57352941 0.37755102 0.58333333</span><br><span class="line"> 0.25       0.69387755 0.69512195 0.72380952 0.59550562 0.72463768</span><br><span class="line"> 0.38596491 0.3956044  0.60784314 0.11764706 0.67567568 0.47619048</span><br><span class="line"> 0.66037736 0.53333333 0.29090909 0.74468085 0.36585366 0.64583333</span><br><span class="line"> 0.81818182 0.60784314 0.43636364 0.475      0.36111111 0.55102041</span><br><span class="line"> 0.43396226 0.59259259 0.13793103 0.65384615 0.3        0.25925926</span><br><span class="line"> 0.34210526 0.23333333 0.70860927 0.5        0.14285714 0.31666667</span><br><span class="line"> 0.18644068 0.60526316 0.69       0.34883721 0.54545455 0.47457627</span><br><span class="line"> 0.50666667 0.48591549 0.61320755 0.20895522 0.53125    0.76</span><br><span class="line"> 0.67878788 0.24193548 0.43333333 0.90740741 0.60714286 0.2745098</span><br><span class="line"> 0.26229508 0.41428571 0.48514851 0.34375    0.48148148 0.425</span><br><span class="line"> 0.34       0.48275862 0.73529412 0.81818182 0.9223301  0.9245283</span><br><span class="line"> 0.72222222 0.72972973 0.44761905 0.6618705  0.73722628 0.69736842]</span><br><span class="line">upper bound: 0.5131311156873893</span><br><span class="line">-----Evaluation is finished------</span><br><span class="line">Class Accuracy 49.83%</span><br><span class="line">Overall Prec@1 54.04% Prec@5 81.43%</span><br><span class="line">/home/hs/anaconda3/envs/dzl/lib/python3.7/site-packages/numpy/core/_asarray.py:136: VisibleDeprecationWarning: Creating an ndarray from ragged nested sequences (<span class="built_in">which</span> is a list-or-tuple of lists-or-tuples-or ndarrays with different lengths or shapes) is deprecated. If you meant to <span class="keyword">do</span> this, you must specify <span class="string">'dtype=object'</span> when creating the ndarray</span><br><span class="line">  <span class="built_in">return</span> array(a, dtype, copy=False, order=order, subok=True)</span><br></pre></td></tr></table></figure><h2 id="20201021-pa-with-conv-rgbo-liten"><a class="header-anchor" href="#20201021-pa-with-conv-rgbo-liten">#</a>20201021 PA with conv &amp; RGBo &amp; Liten</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python test_models.py something --VAP --batch_size=16 -j=4 --test_crops=1 --test_segments=8,8,8 --weights=</span></span><br><span class="line"><span class="comment"># pretrained/PAN_Lite_something_resnet50_shift8_blockres_avg_segment8_e80.pth.tar,</span></span><br><span class="line"><span class="comment"># pretrained/PAN_RGB_something_resnet50_shift8_blockres_avg_segment8_e50.pth.tar,</span></span><br><span class="line"><span class="comment"># temp/PAN_APA_something_resnet50_shift8_blockres_avg_segment8_e80.pth.tar --full_res --twice_sample</span></span><br><span class="line">$ bash scripts/<span class="built_in">test</span>/sthv1/En.sh </span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     Lite</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line"></span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">=&gt; Converting the ImageNet model to a PAN_Lite init model</span><br><span class="line">=&gt; Done. PAN_lite model ready...</span><br><span class="line">=&gt; Using twice sample <span class="keyword">for</span> the dataset...</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     RGB</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line"></span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">=&gt; Using twice sample <span class="keyword">for</span> the dataset...</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     PA</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line"></span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">=&gt; Using twice sample <span class="keyword">for</span> the dataset...</span><br><span class="line">video number:11522</span><br><span class="line">video 0 <span class="keyword">done</span>, total 0/11522, average 1.103 sec/video, moving Prec@1 50.000 Prec@5 81.250</span><br><span class="line">video 320 <span class="keyword">done</span>, total 320/11522, average 0.156 sec/video, moving Prec@1 55.655 Prec@5 84.226</span><br><span class="line">video 640 <span class="keyword">done</span>, total 640/11522, average 0.153 sec/video, moving Prec@1 56.707 Prec@5 83.232</span><br><span class="line">video 960 <span class="keyword">done</span>, total 960/11522, average 0.152 sec/video, moving Prec@1 54.713 Prec@5 82.070</span><br><span class="line">video 1280 <span class="keyword">done</span>, total 1280/11522, average 0.152 sec/video, moving Prec@1 55.247 Prec@5 82.793</span><br><span class="line">video 1600 <span class="keyword">done</span>, total 1600/11522, average 0.150 sec/video, moving Prec@1 55.384 Prec@5 82.859</span><br><span class="line">video 1920 <span class="keyword">done</span>, total 1920/11522, average 0.151 sec/video, moving Prec@1 54.700 Prec@5 82.593</span><br><span class="line">video 2240 <span class="keyword">done</span>, total 2240/11522, average 0.150 sec/video, moving Prec@1 55.363 Prec@5 82.314</span><br><span class="line">video 2560 <span class="keyword">done</span>, total 2560/11522, average 0.151 sec/video, moving Prec@1 55.124 Prec@5 81.910</span><br><span class="line">video 2880 <span class="keyword">done</span>, total 2880/11522, average 0.150 sec/video, moving Prec@1 54.696 Prec@5 81.975</span><br><span class="line">video 3200 <span class="keyword">done</span>, total 3200/11522, average 0.149 sec/video, moving Prec@1 54.353 Prec@5 81.996</span><br><span class="line">video 3520 <span class="keyword">done</span>, total 3520/11522, average 0.150 sec/video, moving Prec@1 54.157 Prec@5 81.957</span><br><span class="line">video 3840 <span class="keyword">done</span>, total 3840/11522, average 0.149 sec/video, moving Prec@1 54.253 Prec@5 81.613</span><br><span class="line">video 4160 <span class="keyword">done</span>, total 4160/11522, average 0.149 sec/video, moving Prec@1 54.191 Prec@5 81.513</span><br><span class="line">video 4480 <span class="keyword">done</span>, total 4480/11522, average 0.148 sec/video, moving Prec@1 54.070 Prec@5 81.606</span><br><span class="line">video 4800 <span class="keyword">done</span>, total 4800/11522, average 0.148 sec/video, moving Prec@1 53.862 Prec@5 81.499</span><br><span class="line">video 5120 <span class="keyword">done</span>, total 5120/11522, average 0.148 sec/video, moving Prec@1 53.563 Prec@5 81.211</span><br><span class="line">video 5440 <span class="keyword">done</span>, total 5440/11522, average 0.148 sec/video, moving Prec@1 53.757 Prec@5 81.378</span><br><span class="line">video 5760 <span class="keyword">done</span>, total 5760/11522, average 0.148 sec/video, moving Prec@1 53.826 Prec@5 81.302</span><br><span class="line">video 6080 <span class="keyword">done</span>, total 6080/11522, average 0.148 sec/video, moving Prec@1 53.724 Prec@5 81.365</span><br><span class="line">video 6400 <span class="keyword">done</span>, total 6400/11522, average 0.147 sec/video, moving Prec@1 53.819 Prec@5 81.468</span><br><span class="line">video 6720 <span class="keyword">done</span>, total 6720/11522, average 0.147 sec/video, moving Prec@1 53.593 Prec@5 81.517</span><br><span class="line">video 7040 <span class="keyword">done</span>, total 7040/11522, average 0.147 sec/video, moving Prec@1 53.543 Prec@5 81.519</span><br><span class="line">video 7360 <span class="keyword">done</span>, total 7360/11522, average 0.147 sec/video, moving Prec@1 53.484 Prec@5 81.386</span><br><span class="line">video 7680 <span class="keyword">done</span>, total 7680/11522, average 0.147 sec/video, moving Prec@1 53.495 Prec@5 81.510</span><br><span class="line">video 8000 <span class="keyword">done</span>, total 8000/11522, average 0.147 sec/video, moving Prec@1 53.406 Prec@5 81.562</span><br><span class="line">video 8320 <span class="keyword">done</span>, total 8320/11522, average 0.147 sec/video, moving Prec@1 53.491 Prec@5 81.670</span><br><span class="line">video 8640 <span class="keyword">done</span>, total 8640/11522, average 0.147 sec/video, moving Prec@1 53.373 Prec@5 81.573</span><br><span class="line">video 8960 <span class="keyword">done</span>, total 8960/11522, average 0.147 sec/video, moving Prec@1 53.376 Prec@5 81.584</span><br><span class="line">video 9280 <span class="keyword">done</span>, total 9280/11522, average 0.146 sec/video, moving Prec@1 53.292 Prec@5 81.616</span><br><span class="line">video 9600 <span class="keyword">done</span>, total 9600/11522, average 0.146 sec/video, moving Prec@1 53.380 Prec@5 81.614</span><br><span class="line">video 9920 <span class="keyword">done</span>, total 9920/11522, average 0.146 sec/video, moving Prec@1 53.422 Prec@5 81.542</span><br><span class="line">video 10240 <span class="keyword">done</span>, total 10240/11522, average 0.146 sec/video, moving Prec@1 53.539 Prec@5 81.699</span><br><span class="line">video 10560 <span class="keyword">done</span>, total 10560/11522, average 0.146 sec/video, moving Prec@1 53.669 Prec@5 81.647</span><br><span class="line">video 10880 <span class="keyword">done</span>, total 10880/11522, average 0.146 sec/video, moving Prec@1 53.744 Prec@5 81.681</span><br><span class="line">video 11200 <span class="keyword">done</span>, total 11200/11522, average 0.146 sec/video, moving Prec@1 53.736 Prec@5 81.705</span><br><span class="line">video 11520 <span class="keyword">done</span>, total 11520/11522, average 0.145 sec/video, moving Prec@1 53.810 Prec@5 81.739</span><br><span class="line">[0.92537313 0.4        0.31428571 0.68656716 0.39473684 0.52586207</span><br><span class="line"> 0.70895522 0.52941176 0.73786408 0.75728155 0.49333333 0.56944444</span><br><span class="line"> 0.45744681 0.35483871 0.79617834 0.46       0.22289157 0.3375</span><br><span class="line"> 0.4796748  0.4        0.432      0.55172414 0.40740741 0.43137255</span><br><span class="line"> 0.51612903 0.5        0.52173913 0.24       0.72727273 0.71428571</span><br><span class="line"> 0.68181818 0.57692308 0.88888889 0.18681319 0.26086957 0.13888889</span><br><span class="line"> 0.8045977  0.83333333 0.13157895 0.66666667 0.73553719 0.66</span><br><span class="line"> 0.71538462 0.75510204 0.71153846 0.67213115 0.54411765 0.50526316</span><br><span class="line"> 0.30337079 0.71428571 0.64150943 0.         0.36       0.55</span><br><span class="line"> 0.23809524 0.33333333 0.36363636 0.5        0.08333333 0.75510204</span><br><span class="line"> 0.72727273 0.27777778 0.62       0.11818182 0.16666667 0.55555556</span><br><span class="line"> 0.11111111 0.1969697  0.47887324 0.42307692 0.5483871  0.25</span><br><span class="line"> 0.5        0.64       0.85       0.61290323 0.29411765 0.41176471</span><br><span class="line"> 0.36363636 0.85365854 0.14285714 0.11904762 0.36666667 0.15789474</span><br><span class="line"> 0.6        0.39655172 0.68918919 0.73015873 0.11111111 0.10714286</span><br><span class="line"> 0.51351351 0.75609756 0.55813953 0.66666667 0.75700935 0.22580645</span><br><span class="line"> 0.07407407 0.16666667 0.57309942 0.55882353 0.35714286 0.58333333</span><br><span class="line"> 0.28125    0.59183673 0.67073171 0.73333333 0.61797753 0.73913043</span><br><span class="line"> 0.45614035 0.40659341 0.62745098 0.         0.64864865 0.42857143</span><br><span class="line"> 0.64150943 0.5        0.29090909 0.77659574 0.41463415 0.625</span><br><span class="line"> 0.79545455 0.68627451 0.41818182 0.5        0.25       0.59183673</span><br><span class="line"> 0.43396226 0.64814815 0.14482759 0.68269231 0.32       0.22222222</span><br><span class="line"> 0.36842105 0.23333333 0.68874172 0.51724138 0.21428571 0.3</span><br><span class="line"> 0.18644068 0.56578947 0.68       0.39534884 0.54545455 0.44915254</span><br><span class="line"> 0.54666667 0.50704225 0.66037736 0.19402985 0.5        0.76</span><br><span class="line"> 0.69090909 0.24193548 0.35       0.88888889 0.60714286 0.21568627</span><br><span class="line"> 0.26229508 0.37142857 0.43564356 0.4375     0.44444444 0.35</span><br><span class="line"> 0.36       0.51724138 0.67647059 0.81818182 0.91262136 0.9245283</span><br><span class="line"> 0.74074074 0.7027027  0.46666667 0.65467626 0.71532847 0.71052632]</span><br><span class="line">upper bound: 0.5095849479276692</span><br><span class="line">-----Evaluation is finished------</span><br><span class="line">Class Accuracy 49.46%</span><br><span class="line">Overall Prec@1 53.81% Prec@5 81.74%</span><br><span class="line">/home/hs/anaconda3/envs/dzl/lib/python3.7/site-packages/numpy/core/_asarray.py:136: VisibleDeprecationWarning: Creating an ndarray from ragged nested sequences (<span class="built_in">which</span> is a list-or-tuple of lists-or-tuples-or ndarrays with different lengths or shapes) is deprecated. If you meant to <span class="keyword">do</span> this, you must specify <span class="string">'dtype=object'</span> when creating the ndarray</span><br><span class="line">  <span class="built_in">return</span> array(a, dtype, copy=False, order=order, subok=True)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¡Œä¸ºè¯†åˆ« </tag>
            
            <tag> action recognition </tag>
            
            <tag> pan </tag>
            
            <tag> pan lite </tag>
            
            <tag> pan full </tag>
            
            <tag> pan en </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Latexä¹¦è„Šåˆ¶ä½œ</title>
      <link href="/blog/2020/10/08/latex-spine/"/>
      <url>/blog/2020/10/08/latex-spine/</url>
      
        <content type="html"><![CDATA[<p>å¼ºè¿«ç—‡æœ‰æ—¶å€™æ˜¯çœŸçš„æµªè´¹æ—¶é—´ï¼Œä¸è¿‡å·¥ä½œä¸­åº”è¯¥å¯ä»¥è§£å†³å¾ˆå¤šå®é™…é—®é¢˜ã€‚</p><a id="more"></a><h2 id="åˆ¶ä½œä¹¦è„Š"><a class="header-anchor" href="#åˆ¶ä½œä¹¦è„Š">#</a>åˆ¶ä½œä¹¦è„Š</h2><p><a href="https://github.com/mohuangrui/latexspine" target="_blank" rel="noopener">https://github.com/mohuangrui/latexspine</a></p><p>åŸç‰ˆå¤ªä¸ä¼˜é›…äº†ï¼ŒèŠ±äº†ä¸€å¤©æ—¶é—´ç»ˆäºæ‰¾åˆ°äº†è§£å†³æ–¹æ¡ˆï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">\documentclass[UTF8]&#123;ctexbook&#125;</span><br><span class="line">\usepackage[paper&#x3D;a4paper,margin&#x3D;3cm]&#123;geometry&#125;</span><br><span class="line"></span><br><span class="line">% https:&#x2F;&#x2F;stackoverflow.com&#x2F;a&#x2F;2458125&#x2F;13182099</span><br><span class="line">\def\hyphenateWholeString #1&#123;\xHyphenate#1$\wholeString\unskip&#125;</span><br><span class="line"></span><br><span class="line">\def\xHyphenate#1#2\wholeString &#123;\if#1$</span><br><span class="line">\else\transform&#123;#1&#125;</span><br><span class="line">\takeTheRest#2\ofTheString\fi&#125;</span><br><span class="line">\def\takeTheRest#1\ofTheString\fi</span><br><span class="line">&#123;\fi \xHyphenate#1\wholeString&#125;</span><br><span class="line"></span><br><span class="line">\def\transform#1&#123;#1\par&#125;</span><br><span class="line"></span><br><span class="line">\renewcommand&#123;\title&#125;[1]&#123;\def\spinetitle&#123;\hyphenateWholeString&#123;#1&#125;&#125;&#125;</span><br><span class="line">\renewcommand&#123;\author&#125;[1]&#123;\def\spineauthor&#123;\hyphenateWholeString&#123;#1&#125;&#125;&#125;</span><br><span class="line">\newcommand&#123;\adviser&#125;[3]&#123;\def\spineadviser&#123;\hyphenateWholeString&#123;#1&#125;~\par\hyphenateWholeString&#123;#2&#125;~\par\hyphenateWholeString&#123;#3&#125;&#125;&#125;</span><br><span class="line">\newcommand&#123;\institute&#125;[1]&#123;\def\spineinst&#123;\hyphenateWholeString&#123;#1&#125;&#125;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">\newcommand&#123;\makespine&#125;&#123;</span><br><span class="line"></span><br><span class="line">    \newpage\thispagestyle&#123;empty&#125;</span><br><span class="line">    \linespread&#123;1.0&#125;</span><br><span class="line">    \songti\zihao&#123;-5&#125;\centering</span><br><span class="line">    \spinetitle\vfill\spineauthor\vfill\spineadviser\vfill\spineinst</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">% 3.è®ºæ–‡ä¹¦è„Šçš„è¦æ±‚ï¼ˆå¦‚å³å›¾ï¼‰</span><br><span class="line">% ï¼ˆ1ï¼‰åœ¨è®ºæ–‡çš„ä¹¦è„Šä»¥ç´§æ’ä¾åºæ‰“å°ä¸­æ–‡ï¼šè®ºæ–‡åç§°ã€ä½œè€…å§“åã€</span><br><span class="line">% æŒ‡å¯¼æ•™å¸ˆã€XXXã€å¦é—¨å¤§å­¦</span><br><span class="line">% ï¼ˆ2ï¼‰å­—å·å­—ä½“ï¼šå°äº”å·å®‹ä½“ã€‚</span><br><span class="line"></span><br><span class="line">\begin&#123;document&#125;</span><br><span class="line">\title&#123;è¿™æ˜¯ä½ çš„ä¸­æ–‡è®ºæ–‡åç§°&#125;</span><br><span class="line">\author&#123;Onns&#125;</span><br><span class="line">\adviser&#123;æŒ‡å¯¼æ•™å¸ˆ&#125;&#123;XXX&#125;&#123;æ•™æˆ&#125;</span><br><span class="line">\institute&#123;å¦é—¨å¤§å­¦&#125;</span><br><span class="line">\makespine</span><br><span class="line">\end&#123;document&#125;</span><br></pre></td></tr></table></figure><h2 id="ç›¸å…³é“¾æ¥"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥">#</a>ç›¸å…³é“¾æ¥</h2><ul><li><a href="https://github.com/mohuangrui/latexspine" target="_blank" rel="noopener">latexspine LaTeX ä¹¦è„Šæ¨¡æ¿</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> try </category>
          
      </categories>
      
      
        <tags>
            
            <tag> latex </tag>
            
            <tag> spine </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‘¨æŠ¥-20201008</title>
      <link href="/blog/2020/10/08/weekly-report-20201008/"/>
      <url>/blog/2020/10/08/weekly-report-20201008/</url>
      
        <content type="html"><![CDATA[<center ondblclick="javascript:document.getElementsByTagName('header')[0].remove();document.getElementsByTagName('header')[0].remove();document.getElementsByTagName('footer')[0].remove();document.getElementsByTagName('footer')[0].remove();document.getElementById('comments').remove();document.getElementById('back-to-top').remove();document.getElementById('post-toc').remove();"><table><thead><tr><th style="text-align:center">2020-10-08</th><th style="text-align:center">å‘¨æŠ¥#07</th><th style="text-align:center">åˆ˜æ½˜</th></tr></thead><tbody></tbody></table></center><a id="more"></a><h1 id="i-task-achieved-last-week"><a class="header-anchor" href="#i-task-achieved-last-week">#</a>I. Task achieved last week</h1><hr><ul><li>æ‰¾åˆ°åˆé€‚çš„ Latex æ¯•è®¾æ¨¡æ¿ï¼Œå¹¶ä¸”æˆåŠŸçš„ç¼–è¯‘ï¼Œå¼€å§‹å†™è®ºæ–‡çš„æ‘˜è¦éƒ¨åˆ†ã€‚</li><li>ã€ŠTEA: Temporal Excitation and Aggregation for Action Recognitionã€‹</li><li>ä¿®æ”¹äº†ç°æœ‰ä»£ç ï¼Œç­‰å¾…å®éªŒç»“æœã€‚</li></ul><h1 id="ii-reports"><a class="header-anchor" href="#ii-reports">#</a>II. Reports</h1><hr><h2 id="latex-æ¨¡æ¿"><a class="header-anchor" href="#latex-æ¨¡æ¿">#</a>Latex æ¨¡æ¿</h2><p>æ‰¾äº†ä¸€ä¸ªæ¯”è¾ƒæ–°çš„<code>å¦é—¨å¤§å­¦ç ”ç©¶ç”Ÿå­¦ä½è®ºæ–‡ LaTeX æ¨¡æ¿</code>æ¨¡æ¿ï¼š<a href="https://github.com/zoam/xmu-thesis-grd" target="_blank" rel="noopener">https://github.com/zoam/xmu-thesis-grd</a>ï¼Œè‡ªå·±ä¿®æ”¹äº†ä¸€äº›ç‰¹æ€§ã€‚</p><h2 id="tea-temporal-excitation-and-aggregation-for-action-recognition"><a class="header-anchor" href="#tea-temporal-excitation-and-aggregation-for-action-recognition">#</a>TEA: Temporal Excitation and Aggregation for Action Recognition</h2><h3 id="é—®é¢˜æå‡º"><a class="header-anchor" href="#é—®é¢˜æå‡º">#</a>é—®é¢˜æå‡º</h3><p>æ—¶åºå»ºæ¨¡çš„ä¸¤ä¸ªé—®é¢˜ï¼š<code>short-range motion encoding</code>å’Œ<code>long-range temporal aggregation</code>ã€‚</p><p>å‰è€…åŸºæœ¬ä¾èµ–å…‰æµæ¥è§£å†³ï¼Œå› ä¸ºè®¡ç®—é‡å¾ˆå¤§ï¼Œä¸”æ— æ³•æ»¡è¶³å®æ—¶çš„ä»»åŠ¡ï¼Œæ‰€ä»¥ä½œè€…æå‡º<code>motion excitation</code>ã€‚</p><p>åè€…ç°æœ‰çš„è§£å†³æ–¹æ¡ˆæœ‰ä¸¤ä¸ªï¼š</p><ol><li>adopt 2D CNN backbones to extract frame-wise features and then utilize a simple temporal max/average pooling to obtain the whole video representation.</li><li>adopt local 3D/(2+1)D convolutional operations to process local temporal window</li></ol><p>æ—¶ç©ºä¿¡æ¯åœ¨ç½‘ç»œçš„é¡¶ç«¯è¿›è¡Œèåˆï¼Œå†åå‘ä¼ æ’­å›æ¥ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¼˜åŒ–å›°éš¾ã€‚æ‰€ä»¥ä½œè€…æå‡º<code>multiple temporal aggregation</code>ã€‚</p><center><!-- //onns.xyz/blog/image --><p><img src="//onns.xyz/blog/image/20201008-1.png" alt="ç»“æ„å›¾"></p></center><h3 id="ç›¸å…³é“¾æ¥"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥">#</a>ç›¸å…³é“¾æ¥</h3><ul><li><a href="https://zhuanlan.zhihu.com/p/129282832" target="_blank" rel="noopener">[CVPR 2020 ] å—äº¬å¤§å­¦/è…¾è®¯ PCG ç”¨äºæ—¶åºå»ºæ¨¡çš„è½»é‡çº§è¡Œä¸ºè¯†åˆ«æ¨¡å‹ TEA</a></li><li><a href="https://blog.csdn.net/qq_41214679/article/details/107975761" target="_blank" rel="noopener">TEA: Temporal Excitation and Aggregation for Action Recognition é˜…è¯»ç¬”è®°</a></li><li><a href="https://zhuanlan.zhihu.com/p/130807086" target="_blank" rel="noopener">CVPR2020 å—å¤§+è…¾è®¯ TEA è½»é‡çº§è§†é¢‘è¡Œä¸ºè¯†åˆ«æ¨¡å‹</a></li><li><a href="https://arxiv.org/abs/2004.01398" target="_blank" rel="noopener">TEA: Temporal Excitation and Aggregation for Action Recognition</a></li><li><a href="https://github.com/Phoenix1327/tea-action-recognition" target="_blank" rel="noopener">Phoenix1327/tea-action-recognition</a></li><li><a href="https://blog.csdn.net/irving512/article/details/106524982/" target="_blank" rel="noopener">è®ºæ–‡æµè§ˆ(3) TEA: Temporal Excitation and Aggregation for Action Recognition</a></li></ul><h2 id="bert-ç›¸å…³ç¬”è®°ï¼ˆä¸€ï¼‰"><a class="header-anchor" href="#bert-ç›¸å…³ç¬”è®°ï¼ˆä¸€ï¼‰">#</a>BERT ç›¸å…³ç¬”è®°ï¼ˆä¸€ï¼‰</h2><p>BERT æ˜¯åœ¨<code>Transformer</code>çš„ç»“æ„åŸºç¡€ä¸Šè¿›è¡Œæ›´æ–°ï¼Œæ‰€ä»¥ä¸»è¦çœ‹äº†ä¸€äº›åŸºç¡€çš„çŸ¥è¯†ã€‚</p><p>ç›¸å…³é“¾æ¥é‡Œå‰ä¸¤ä¸ªå†™çš„å¾ˆå¥½ï¼Œç»“åˆç€çœ‹å¯ä»¥åŠ æ·±ç†è§£ã€‚</p><h3 id="ç›¸å…³é“¾æ¥-2"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥-2">#</a>ç›¸å…³é“¾æ¥</h3><ul><li><a href="https://jalammar.github.io/illustrated-transformer/" target="_blank" rel="noopener">The Illustrated Transformer</a></li><li><a href="http://www.huaxiaozhuan.com/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/chapters/7_Transformer.html" target="_blank" rel="noopener">Transformer</a></li><li><a href="https://blog.csdn.net/chen_yiwei/article/details/88671959" target="_blank" rel="noopener">Transform æ¨¡å‹åŸç†</a></li><li><a href="https://www.cnblogs.com/robert-dlut/p/8638283.html" target="_blank" rel="noopener">è‡ªç„¶è¯­è¨€å¤„ç†ä¸­çš„è‡ªæ³¨æ„åŠ›æœºåˆ¶ï¼ˆSelf-attention Mechanismï¼‰</a></li><li><a href="https://zhuanlan.zhihu.com/p/47063917" target="_blank" rel="noopener">Attention æœºåˆ¶è¯¦è§£ï¼ˆä¸€ï¼‰â€”â€”Seq2Seq ä¸­çš„ Attention</a></li><li><a href="https://zhuanlan.zhihu.com/p/44145288" target="_blank" rel="noopener">å¾ªç¯ç¥ç»ç½‘ç»œ RNNâ€”â€”æ·±åº¦å­¦ä¹ ç¬¬åç« </a></li><li><a href="https://zhuanlan.zhihu.com/p/47282410" target="_blank" rel="noopener">Attention æœºåˆ¶è¯¦è§£ï¼ˆäºŒï¼‰â€”â€”Self-Attention ä¸ Transformer</a></li><li><a href="https://zhuanlan.zhihu.com/p/57155059" target="_blank" rel="noopener">ç®€è¯´ Seq2Seq åŸç†åŠå®ç°</a></li><li><a href="https://www.jianshu.com/p/b2b95f945a98" target="_blank" rel="noopener">Seq2Seq æ¨¡å‹æ¦‚è¿°</a></li></ul><h2 id="å®éªŒç»“æœ"><a class="header-anchor" href="#å®éªŒç»“æœ">#</a>å®éªŒç»“æœ</h2><p>è¾ƒç°æœ‰æ–¹æ³•æå‡äº†<code>0.8%</code>ï¼š</p><center><table><thead><tr><th style="text-align:center">Method</th><th style="text-align:center">Backbone</th><th style="text-align:center">Frame</th><th style="text-align:center">FLOPs Ã— views</th><th style="text-align:center">Val Top1</th><th style="text-align:center">Val Top5</th></tr></thead><tbody><tr><td style="text-align:center">PAN Full</td><td style="text-align:center">ResNet-50 + TSM</td><td style="text-align:center">8+8Ã—4</td><td style="text-align:center">67.7G Ã— 1</td><td style="text-align:center">50.5</td><td style="text-align:center">79.2</td></tr><tr><td style="text-align:center">PAN Full with reverse</td><td style="text-align:center">ResNet-50 + TSM</td><td style="text-align:center">8+8Ã—4Ã—2</td><td style="text-align:center">-</td><td style="text-align:center"><strong>51.3</strong></td><td style="text-align:center"><strong>79.9</strong></td></tr></tbody></table></center><h1 id="iii-plan-for-this-week"><a class="header-anchor" href="#iii-plan-for-this-week">#</a>III. Plan for this week</h1><hr><ul><li>çœ‹è®ºæ–‡</li><li>æ¯•ä¸šè®ºæ–‡æ‘˜è¦éƒ¨åˆ†åˆç¨¿</li><li>ç»§ç»­æ”¹è¿›ç°æœ‰ä»£ç </li></ul>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lab406 </tag>
            
            <tag> weekly report </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>BERTç›¸å…³ç¬”è®°ï¼ˆä¸€ï¼‰</title>
      <link href="/blog/2020/10/08/bert-note-1/"/>
      <url>/blog/2020/10/08/bert-note-1/</url>
      
        <content type="html"><![CDATA[<h2 id="bert-ç›¸å…³ç¬”è®°ï¼ˆä¸€ï¼‰"><a class="header-anchor" href="#bert-ç›¸å…³ç¬”è®°ï¼ˆä¸€ï¼‰">#</a>BERT ç›¸å…³ç¬”è®°ï¼ˆä¸€ï¼‰</h2><p>BERT æ˜¯åœ¨<code>Transformer</code>çš„ç»“æ„åŸºç¡€ä¸Šè¿›è¡Œæ›´æ–°ï¼Œæ‰€ä»¥ä¸»è¦çœ‹äº†ä¸€äº›åŸºç¡€çš„çŸ¥è¯†ã€‚</p><p>ç›¸å…³é“¾æ¥é‡Œå‰ä¸¤ä¸ªå†™çš„å¾ˆå¥½ï¼Œç»“åˆç€çœ‹å¯ä»¥åŠ æ·±ç†è§£ã€‚</p><h3 id="ç›¸å…³é“¾æ¥"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥">#</a>ç›¸å…³é“¾æ¥</h3><ul><li><a href="https://jalammar.github.io/illustrated-transformer/" target="_blank" rel="noopener">The Illustrated Transformer</a></li><li><a href="http://www.huaxiaozhuan.com/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/chapters/7_Transformer.html" target="_blank" rel="noopener">Transformer</a></li><li><a href="https://blog.csdn.net/chen_yiwei/article/details/88671959" target="_blank" rel="noopener">Transform æ¨¡å‹åŸç†</a></li><li><a href="https://www.cnblogs.com/robert-dlut/p/8638283.html" target="_blank" rel="noopener">è‡ªç„¶è¯­è¨€å¤„ç†ä¸­çš„è‡ªæ³¨æ„åŠ›æœºåˆ¶ï¼ˆSelf-attention Mechanismï¼‰</a></li><li><a href="https://zhuanlan.zhihu.com/p/47063917" target="_blank" rel="noopener">Attention æœºåˆ¶è¯¦è§£ï¼ˆä¸€ï¼‰â€”â€”Seq2Seq ä¸­çš„ Attention</a></li><li><a href="https://zhuanlan.zhihu.com/p/44145288" target="_blank" rel="noopener">å¾ªç¯ç¥ç»ç½‘ç»œ RNNâ€”â€”æ·±åº¦å­¦ä¹ ç¬¬åç« </a></li><li><a href="https://zhuanlan.zhihu.com/p/47282410" target="_blank" rel="noopener">Attention æœºåˆ¶è¯¦è§£ï¼ˆäºŒï¼‰â€”â€”Self-Attention ä¸ Transformer</a></li><li><a href="https://zhuanlan.zhihu.com/p/57155059" target="_blank" rel="noopener">ç®€è¯´ Seq2Seq åŸç†åŠå®ç°</a></li><li><a href="https://www.jianshu.com/p/b2b95f945a98" target="_blank" rel="noopener">Seq2Seq æ¨¡å‹æ¦‚è¿°</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¡Œä¸ºè¯†åˆ« </tag>
            
            <tag> action recognition </tag>
            
            <tag> bert </tag>
            
            <tag> transformer </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PANéªŒè¯ç»“æœ-20201006</title>
      <link href="/blog/2020/10/06/pan-results/"/>
      <url>/blog/2020/10/06/pan-results/</url>
      
        <content type="html"><![CDATA[<p>æµ‹è¯•ç»“æœï¼š</p><a id="more"></a><h2 id="pan-full"><a class="header-anchor" href="#pan-full">#</a>PAN Full</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python test_models.py something --VAP --batch_size=20 -j=4 --test_crops=1 --test_segments=8,8 --weights=pretrained/PAN_RGB_something_resnet50_shift8_blockres_avg_segment8_e50.pth.tar,pretrained/PAN_PA_something_resnet50_shift8_blockres_avg_segment8_e80.pth.tar</span></span><br><span class="line">$ bash scripts/<span class="built_in">test</span>/sthv1/Full.sh </span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     RGB</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line"></span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     PA</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line"></span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">video 0 <span class="keyword">done</span>, total 0/11522, average 0.229 sec/video, moving Prec@1 50.000 Prec@5 85.000</span><br><span class="line">video 400 <span class="keyword">done</span>, total 400/11522, average 0.032 sec/video, moving Prec@1 52.143 Prec@5 83.333</span><br><span class="line">video 800 <span class="keyword">done</span>, total 800/11522, average 0.028 sec/video, moving Prec@1 51.341 Prec@5 80.732</span><br><span class="line">video 1200 <span class="keyword">done</span>, total 1200/11522, average 0.026 sec/video, moving Prec@1 51.557 Prec@5 80.738</span><br><span class="line">video 1600 <span class="keyword">done</span>, total 1600/11522, average 0.025 sec/video, moving Prec@1 51.728 Prec@5 80.432</span><br><span class="line">video 2000 <span class="keyword">done</span>, total 2000/11522, average 0.025 sec/video, moving Prec@1 50.792 Prec@5 79.950</span><br><span class="line">video 2400 <span class="keyword">done</span>, total 2400/11522, average 0.024 sec/video, moving Prec@1 50.744 Prec@5 79.628</span><br><span class="line">video 2800 <span class="keyword">done</span>, total 2800/11522, average 0.024 sec/video, moving Prec@1 50.887 Prec@5 79.716</span><br><span class="line">video 3200 <span class="keyword">done</span>, total 3200/11522, average 0.024 sec/video, moving Prec@1 50.559 Prec@5 79.720</span><br><span class="line">video 3600 <span class="keyword">done</span>, total 3600/11522, average 0.024 sec/video, moving Prec@1 50.497 Prec@5 79.586</span><br><span class="line">video 4000 <span class="keyword">done</span>, total 4000/11522, average 0.023 sec/video, moving Prec@1 50.274 Prec@5 79.254</span><br><span class="line">video 4400 <span class="keyword">done</span>, total 4400/11522, average 0.023 sec/video, moving Prec@1 50.204 Prec@5 79.072</span><br><span class="line">video 4800 <span class="keyword">done</span>, total 4800/11522, average 0.023 sec/video, moving Prec@1 50.083 Prec@5 78.963</span><br><span class="line">video 5200 <span class="keyword">done</span>, total 5200/11522, average 0.023 sec/video, moving Prec@1 50.057 Prec@5 78.812</span><br><span class="line">video 5600 <span class="keyword">done</span>, total 5600/11522, average 0.023 sec/video, moving Prec@1 50.356 Prec@5 78.968</span><br><span class="line">video 6000 <span class="keyword">done</span>, total 6000/11522, average 0.023 sec/video, moving Prec@1 50.233 Prec@5 78.887</span><br><span class="line">video 6400 <span class="keyword">done</span>, total 6400/11522, average 0.023 sec/video, moving Prec@1 50.327 Prec@5 79.065</span><br><span class="line">video 6800 <span class="keyword">done</span>, total 6800/11522, average 0.023 sec/video, moving Prec@1 50.249 Prec@5 78.974</span><br><span class="line">video 7200 <span class="keyword">done</span>, total 7200/11522, average 0.023 sec/video, moving Prec@1 50.208 Prec@5 78.934</span><br><span class="line">video 7600 <span class="keyword">done</span>, total 7600/11522, average 0.023 sec/video, moving Prec@1 50.367 Prec@5 78.950</span><br><span class="line">video 8000 <span class="keyword">done</span>, total 8000/11522, average 0.023 sec/video, moving Prec@1 50.274 Prec@5 79.077</span><br><span class="line">video 8400 <span class="keyword">done</span>, total 8400/11522, average 0.023 sec/video, moving Prec@1 50.226 Prec@5 79.062</span><br><span class="line">video 8800 <span class="keyword">done</span>, total 8800/11522, average 0.023 sec/video, moving Prec@1 50.227 Prec@5 79.138</span><br><span class="line">video 9200 <span class="keyword">done</span>, total 9200/11522, average 0.023 sec/video, moving Prec@1 50.195 Prec@5 79.143</span><br><span class="line">video 9600 <span class="keyword">done</span>, total 9600/11522, average 0.023 sec/video, moving Prec@1 50.364 Prec@5 79.179</span><br><span class="line">video 10000 <span class="keyword">done</span>, total 10000/11522, average 0.023 sec/video, moving Prec@1 50.379 Prec@5 79.232</span><br><span class="line">video 10400 <span class="keyword">done</span>, total 10400/11522, average 0.023 sec/video, moving Prec@1 50.480 Prec@5 79.290</span><br><span class="line">video 10800 <span class="keyword">done</span>, total 10800/11522, average 0.023 sec/video, moving Prec@1 50.582 Prec@5 79.307</span><br><span class="line">video 11200 <span class="keyword">done</span>, total 11200/11522, average 0.023 sec/video, moving Prec@1 50.606 Prec@5 79.269</span><br><span class="line">[0.89552239 0.3125     0.26666667 0.65671642 0.36842105 0.48275862</span><br><span class="line"> 0.70895522 0.38235294 0.62135922 0.70873786 0.44       0.40277778</span><br><span class="line"> 0.30851064 0.35483871 0.77070064 0.4        0.24096386 0.2625</span><br><span class="line"> 0.45528455 0.34666667 0.352      0.60344828 0.46296296 0.45098039</span><br><span class="line"> 0.51612903 0.41666667 0.43478261 0.4        0.6969697  0.61904762</span><br><span class="line"> 0.59090909 0.53846154 0.87037037 0.25274725 0.23913043 0.13888889</span><br><span class="line"> 0.7816092  0.79411765 0.07894737 0.59259259 0.68595041 0.64</span><br><span class="line"> 0.67692308 0.67346939 0.75       0.57377049 0.47794118 0.36842105</span><br><span class="line"> 0.15730337 0.68421053 0.61320755 0.         0.36       0.45</span><br><span class="line"> 0.19047619 0.25       0.45454545 0.5        0.         0.74489796</span><br><span class="line"> 0.75757576 0.13888889 0.64       0.1        0.1        0.46296296</span><br><span class="line"> 0.18518519 0.21212121 0.43661972 0.34615385 0.5483871  0.21428571</span><br><span class="line"> 0.55263158 0.48       0.83333333 0.41935484 0.35294118 0.58823529</span><br><span class="line"> 0.27272727 0.82926829 0.11428571 0.21428571 0.33333333 0.15789474</span><br><span class="line"> 0.6        0.39655172 0.60810811 0.6984127  0.27777778 0.07142857</span><br><span class="line"> 0.59459459 0.75609756 0.58139535 0.55555556 0.62616822 0.22580645</span><br><span class="line"> 0.03703704 0.11904762 0.57894737 0.45588235 0.32653061 0.51851852</span><br><span class="line"> 0.203125   0.53061224 0.68292683 0.63809524 0.52808989 0.73913043</span><br><span class="line"> 0.49122807 0.32967033 0.58823529 0.         0.66216216 0.28571429</span><br><span class="line"> 0.60377358 0.43333333 0.27272727 0.73404255 0.29268293 0.54166667</span><br><span class="line"> 0.80681818 0.60784314 0.35454545 0.5        0.33333333 0.44897959</span><br><span class="line"> 0.47169811 0.57407407 0.14482759 0.63461538 0.22       0.22222222</span><br><span class="line"> 0.23684211 0.36666667 0.68874172 0.44827586 0.         0.31666667</span><br><span class="line"> 0.13559322 0.56578947 0.66       0.39534884 0.45454545 0.43220339</span><br><span class="line"> 0.6        0.47183099 0.63207547 0.17910448 0.546875   0.8</span><br><span class="line"> 0.66666667 0.29032258 0.38333333 0.7962963  0.55952381 0.11764706</span><br><span class="line"> 0.29508197 0.3        0.47524752 0.34375    0.42592593 0.325</span><br><span class="line"> 0.3        0.37931034 0.69607843 0.77272727 0.9223301  0.87735849</span><br><span class="line"> 0.74074074 0.75675676 0.45714286 0.62589928 0.69343066 0.69736842]</span><br><span class="line">upper bound: 0.483756929950145</span><br><span class="line">-----Evaluation is finished------</span><br><span class="line">Class Accuracy 46.26%</span><br><span class="line">Overall Prec@1 50.53% Prec@5 79.23%</span><br><span class="line">/home/hs/anaconda3/envs/dzl/lib/python3.7/site-packages/numpy/core/_asarray.py:136: VisibleDeprecationWarning: Creating an ndarray from ragged nested sequences (<span class="built_in">which</span> is a list-or-tuple of lists-or-tuples-or ndarrays with different lengths or shapes) is deprecated. If you meant to <span class="keyword">do</span> this, you must specify <span class="string">'dtype=object'</span> when creating the ndarray   </span><br><span class="line">  <span class="built_in">return</span> array(a, dtype, copy=False, order=order, subok=True)</span><br></pre></td></tr></table></figure><h2 id="pan-full-2"><a class="header-anchor" href="#pan-full-2">#</a>PAN Full</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python test_models.py something --VAP --batch_size=20 -j=4 --test_crops=3 --test_segments=8,8 --weights=pretrained/PAN_RGB_something_resnet50_shift8_blockres_avg_segment8_e50.pth.tar,pretrained/PAN_PA_something_resnet50_shift8_blockres_avg_segment8_e80.pth.tar </span></span><br><span class="line">$ bash scripts/<span class="built_in">test</span>/sthv1/Full.sh </span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     RGB</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line"></span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     PA</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line"></span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">video 0 <span class="keyword">done</span>, total 0/11522, average 0.469 sec/video, moving Prec@1 55.000 Prec@5 85.000</span><br><span class="line">video 400 <span class="keyword">done</span>, total 400/11522, average 0.083 sec/video, moving Prec@1 54.524 Prec@5 83.810</span><br><span class="line">video 800 <span class="keyword">done</span>, total 800/11522, average 0.074 sec/video, moving Prec@1 52.317 Prec@5 80.366</span><br><span class="line">video 1200 <span class="keyword">done</span>, total 1200/11522, average 0.071 sec/video, moving Prec@1 52.377 Prec@5 80.902</span><br><span class="line">video 1600 <span class="keyword">done</span>, total 1600/11522, average 0.069 sec/video, moving Prec@1 52.469 Prec@5 80.494</span><br><span class="line">video 2000 <span class="keyword">done</span>, total 2000/11522, average 0.069 sec/video, moving Prec@1 51.634 Prec@5 80.198</span><br><span class="line">video 2400 <span class="keyword">done</span>, total 2400/11522, average 0.068 sec/video, moving Prec@1 51.488 Prec@5 80.248</span><br><span class="line">video 2800 <span class="keyword">done</span>, total 2800/11522, average 0.068 sec/video, moving Prec@1 51.596 Prec@5 80.319</span><br><span class="line">video 3200 <span class="keyword">done</span>, total 3200/11522, average 0.067 sec/video, moving Prec@1 51.273 Prec@5 80.217</span><br><span class="line">video 3600 <span class="keyword">done</span>, total 3600/11522, average 0.067 sec/video, moving Prec@1 51.077 Prec@5 80.193</span><br><span class="line">video 4000 <span class="keyword">done</span>, total 4000/11522, average 0.067 sec/video, moving Prec@1 50.821 Prec@5 79.801</span><br><span class="line">video 4400 <span class="keyword">done</span>, total 4400/11522, average 0.067 sec/video, moving Prec@1 50.814 Prec@5 79.570</span><br><span class="line">video 4800 <span class="keyword">done</span>, total 4800/11522, average 0.067 sec/video, moving Prec@1 50.705 Prec@5 79.378</span><br><span class="line">video 5200 <span class="keyword">done</span>, total 5200/11522, average 0.067 sec/video, moving Prec@1 50.632 Prec@5 79.253</span><br><span class="line">video 5600 <span class="keyword">done</span>, total 5600/11522, average 0.067 sec/video, moving Prec@1 50.925 Prec@5 79.253</span><br><span class="line">video 6000 <span class="keyword">done</span>, total 6000/11522, average 0.066 sec/video, moving Prec@1 50.831 Prec@5 79.236</span><br><span class="line">video 6400 <span class="keyword">done</span>, total 6400/11522, average 0.066 sec/video, moving Prec@1 50.857 Prec@5 79.377</span><br><span class="line">video 6800 <span class="keyword">done</span>, total 6800/11522, average 0.066 sec/video, moving Prec@1 50.850 Prec@5 79.355</span><br><span class="line">video 7200 <span class="keyword">done</span>, total 7200/11522, average 0.066 sec/video, moving Prec@1 50.748 Prec@5 79.224</span><br><span class="line">video 7600 <span class="keyword">done</span>, total 7600/11522, average 0.066 sec/video, moving Prec@1 50.853 Prec@5 79.265</span><br><span class="line">video 8000 <span class="keyword">done</span>, total 8000/11522, average 0.066 sec/video, moving Prec@1 50.736 Prec@5 79.389</span><br><span class="line">video 8400 <span class="keyword">done</span>, total 8400/11522, average 0.066 sec/video, moving Prec@1 50.760 Prec@5 79.394</span><br><span class="line">video 8800 <span class="keyword">done</span>, total 8800/11522, average 0.066 sec/video, moving Prec@1 50.873 Prec@5 79.433</span><br><span class="line">video 9200 <span class="keyword">done</span>, total 9200/11522, average 0.066 sec/video, moving Prec@1 50.824 Prec@5 79.425</span><br><span class="line">video 9600 <span class="keyword">done</span>, total 9600/11522, average 0.066 sec/video, moving Prec@1 50.977 Prec@5 79.407</span><br><span class="line">video 10000 <span class="keyword">done</span>, total 10000/11522, average 0.066 sec/video, moving Prec@1 50.948 Prec@5 79.451</span><br><span class="line">video 10400 <span class="keyword">done</span>, total 10400/11522, average 0.066 sec/video, moving Prec@1 51.046 Prec@5 79.472</span><br><span class="line">video 10800 <span class="keyword">done</span>, total 10800/11522, average 0.066 sec/video, moving Prec@1 51.063 Prec@5 79.547</span><br><span class="line">video 11200 <span class="keyword">done</span>, total 11200/11522, average 0.066 sec/video, moving Prec@1 51.168 Prec@5 79.590</span><br><span class="line">[0.92537313 0.375      0.26666667 0.62686567 0.39473684 0.45689655</span><br><span class="line"> 0.67910448 0.44117647 0.59223301 0.70873786 0.48       0.40277778</span><br><span class="line"> 0.29787234 0.35483871 0.75159236 0.44       0.24698795 0.275</span><br><span class="line"> 0.47154472 0.37333333 0.352      0.56896552 0.57407407 0.45098039</span><br><span class="line"> 0.51612903 0.5        0.43478261 0.44       0.66666667 0.68253968</span><br><span class="line"> 0.63636364 0.53846154 0.87037037 0.18681319 0.26086957 0.13888889</span><br><span class="line"> 0.77011494 0.80392157 0.05263158 0.55555556 0.71900826 0.64</span><br><span class="line"> 0.71538462 0.69387755 0.76923077 0.60655738 0.5        0.36842105</span><br><span class="line"> 0.20224719 0.69924812 0.61320755 0.         0.4        0.45</span><br><span class="line"> 0.19047619 0.20833333 0.48484848 0.5        0.         0.81632653</span><br><span class="line"> 0.78787879 0.16666667 0.64       0.06363636 0.1        0.40740741</span><br><span class="line"> 0.16666667 0.21212121 0.46478873 0.30769231 0.5483871  0.25</span><br><span class="line"> 0.55263158 0.48       0.83333333 0.4516129  0.29411765 0.58823529</span><br><span class="line"> 0.22727273 0.80487805 0.17142857 0.26190476 0.36666667 0.15789474</span><br><span class="line"> 0.6        0.4137931  0.63513514 0.73015873 0.16666667 0.05357143</span><br><span class="line"> 0.59459459 0.73170732 0.46511628 0.55555556 0.6728972  0.29032258</span><br><span class="line"> 0.03703704 0.0952381  0.56725146 0.48529412 0.44897959 0.5462963</span><br><span class="line"> 0.25       0.53061224 0.67073171 0.67619048 0.51685393 0.72463768</span><br><span class="line"> 0.40350877 0.31868132 0.60784314 0.         0.66216216 0.28571429</span><br><span class="line"> 0.62264151 0.4        0.36363636 0.74468085 0.26829268 0.5625</span><br><span class="line"> 0.73863636 0.58823529 0.35454545 0.475      0.30555556 0.46938776</span><br><span class="line"> 0.39622642 0.62962963 0.13793103 0.64423077 0.22       0.18518519</span><br><span class="line"> 0.21052632 0.33333333 0.70198675 0.44827586 0.         0.31666667</span><br><span class="line"> 0.13559322 0.56578947 0.66       0.44186047 0.45454545 0.44915254</span><br><span class="line"> 0.65333333 0.47887324 0.59433962 0.19402985 0.578125   0.816</span><br><span class="line"> 0.64848485 0.29032258 0.38333333 0.81481481 0.51190476 0.17647059</span><br><span class="line"> 0.29508197 0.31428571 0.46534653 0.375      0.46296296 0.3</span><br><span class="line"> 0.34       0.31034483 0.69607843 0.8030303  0.9223301  0.88679245</span><br><span class="line"> 0.71296296 0.7027027  0.44761905 0.66906475 0.71532847 0.72368421]</span><br><span class="line">upper bound: 0.48772172111390605</span><br><span class="line">-----Evaluation is finished------</span><br><span class="line">Class Accuracy 46.72%</span><br><span class="line">Overall Prec@1 51.10% Prec@5 79.56%</span><br><span class="line">/home/hs/anaconda3/envs/dzl/lib/python3.7/site-packages/numpy/core/_asarray.py:136: VisibleDeprecationWarning: Creating an ndarray from ragged nested sequences (<span class="built_in">which</span> is a list-or-tuple of lists-or-tuples-or ndarrays with different lengths or shapes) is deprecated. If you meant to <span class="keyword">do</span> this, you must specify <span class="string">'dtype=object'</span> when creating the ndarray   </span><br><span class="line">  <span class="built_in">return</span> array(a, dtype, copy=False, order=order, subok=True)</span><br></pre></td></tr></table></figure><h2 id="pan-en"><a class="header-anchor" href="#pan-en">#</a>PAN En</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># python test_models.py something \</span></span><br><span class="line"><span class="comment"># --VAP --batch_size=16 -j=4 --test_crops=1 --test_segments=8,8,8 \</span></span><br><span class="line"><span class="comment"># --weights=pretrained/PAN_Lite_something_resnet50_shift8_blockres_avg_segment8_e80.pth.tar,pretrained/PAN_RGB_something_resnet50_shift8_blockres_avg_segment8_e50.pth.tar,pretrained/PAN_PA_something_resnet50_shift8_blockres_avg_segment8_e80.pth.tar \</span></span><br><span class="line"><span class="comment"># --full_res --twice_sample</span></span><br><span class="line">$ bash scripts/<span class="built_in">test</span>/sthv1/En.sh </span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     Lite</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line"></span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">=&gt; Converting the ImageNet model to a PAN_Lite init model</span><br><span class="line">=&gt; Done. PAN_lite model ready...</span><br><span class="line">=&gt; Using twice sample <span class="keyword">for</span> the dataset...</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     RGB</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line"></span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">=&gt; Using twice sample <span class="keyword">for</span> the dataset...</span><br><span class="line">video number:11522</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     PA</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line"></span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">=&gt; Using twice sample <span class="keyword">for</span> the dataset...</span><br><span class="line">video number:11522</span><br><span class="line">video 0 <span class="keyword">done</span>, total 0/11522, average 0.991 sec/video, moving Prec@1 50.000 Prec@5 75.000</span><br><span class="line">video 320 <span class="keyword">done</span>, total 320/11522, average 0.151 sec/video, moving Prec@1 55.655 Prec@5 85.714</span><br><span class="line">video 640 <span class="keyword">done</span>, total 640/11522, average 0.148 sec/video, moving Prec@1 55.488 Prec@5 83.689</span><br><span class="line">video 960 <span class="keyword">done</span>, total 960/11522, average 0.146 sec/video, moving Prec@1 54.303 Prec@5 82.377</span><br><span class="line">video 1280 <span class="keyword">done</span>, total 1280/11522, average 0.143 sec/video, moving Prec@1 55.710 Prec@5 83.025</span><br><span class="line">video 1600 <span class="keyword">done</span>, total 1600/11522, average 0.142 sec/video, moving Prec@1 55.941 Prec@5 82.735</span><br><span class="line">video 1920 <span class="keyword">done</span>, total 1920/11522, average 0.141 sec/video, moving Prec@1 55.269 Prec@5 82.386</span><br><span class="line">video 2240 <span class="keyword">done</span>, total 2240/11522, average 0.141 sec/video, moving Prec@1 55.186 Prec@5 82.225</span><br><span class="line">video 2560 <span class="keyword">done</span>, total 2560/11522, average 0.142 sec/video, moving Prec@1 54.891 Prec@5 81.793</span><br><span class="line">video 2880 <span class="keyword">done</span>, total 2880/11522, average 0.141 sec/video, moving Prec@1 54.454 Prec@5 81.872</span><br><span class="line">video 3200 <span class="keyword">done</span>, total 3200/11522, average 0.141 sec/video, moving Prec@1 53.887 Prec@5 81.965</span><br><span class="line">video 3520 <span class="keyword">done</span>, total 3520/11522, average 0.141 sec/video, moving Prec@1 53.790 Prec@5 81.900</span><br><span class="line">video 3840 <span class="keyword">done</span>, total 3840/11522, average 0.141 sec/video, moving Prec@1 53.994 Prec@5 81.613</span><br><span class="line">video 4160 <span class="keyword">done</span>, total 4160/11522, average 0.141 sec/video, moving Prec@1 53.855 Prec@5 81.418</span><br><span class="line">video 4480 <span class="keyword">done</span>, total 4480/11522, average 0.140 sec/video, moving Prec@1 53.625 Prec@5 81.406</span><br><span class="line">video 4800 <span class="keyword">done</span>, total 4800/11522, average 0.140 sec/video, moving Prec@1 53.488 Prec@5 81.146</span><br><span class="line">video 5120 <span class="keyword">done</span>, total 5120/11522, average 0.140 sec/video, moving Prec@1 53.154 Prec@5 80.880</span><br><span class="line">video 5440 <span class="keyword">done</span>, total 5440/11522, average 0.140 sec/video, moving Prec@1 53.372 Prec@5 81.067</span><br><span class="line">video 5760 <span class="keyword">done</span>, total 5760/11522, average 0.140 sec/video, moving Prec@1 53.307 Prec@5 80.956</span><br><span class="line">video 6080 <span class="keyword">done</span>, total 6080/11522, average 0.140 sec/video, moving Prec@1 53.264 Prec@5 81.053</span><br><span class="line">video 6400 <span class="keyword">done</span>, total 6400/11522, average 0.140 sec/video, moving Prec@1 53.304 Prec@5 81.188</span><br><span class="line">video 6720 <span class="keyword">done</span>, total 6720/11522, average 0.140 sec/video, moving Prec@1 53.192 Prec@5 81.205</span><br><span class="line">video 7040 <span class="keyword">done</span>, total 7040/11522, average 0.140 sec/video, moving Prec@1 53.104 Prec@5 81.151</span><br><span class="line">video 7360 <span class="keyword">done</span>, total 7360/11522, average 0.140 sec/video, moving Prec@1 53.037 Prec@5 81.047</span><br><span class="line">video 7680 <span class="keyword">done</span>, total 7680/11522, average 0.140 sec/video, moving Prec@1 53.015 Prec@5 81.120</span><br><span class="line">video 8000 <span class="keyword">done</span>, total 8000/11522, average 0.140 sec/video, moving Prec@1 53.031 Prec@5 81.125</span><br><span class="line">video 8320 <span class="keyword">done</span>, total 8320/11522, average 0.140 sec/video, moving Prec@1 53.071 Prec@5 81.214</span><br><span class="line">video 8640 <span class="keyword">done</span>, total 8640/11522, average 0.140 sec/video, moving Prec@1 52.830 Prec@5 81.134</span><br><span class="line">video 8960 <span class="keyword">done</span>, total 8960/11522, average 0.140 sec/video, moving Prec@1 52.852 Prec@5 81.116</span><br><span class="line">video 9280 <span class="keyword">done</span>, total 9280/11522, average 0.140 sec/video, moving Prec@1 52.829 Prec@5 81.142</span><br><span class="line">video 9600 <span class="keyword">done</span>, total 9600/11522, average 0.140 sec/video, moving Prec@1 52.943 Prec@5 81.136</span><br><span class="line">video 9920 <span class="keyword">done</span>, total 9920/11522, average 0.140 sec/video, moving Prec@1 52.909 Prec@5 81.119</span><br><span class="line">video 10240 <span class="keyword">done</span>, total 10240/11522, average 0.140 sec/video, moving Prec@1 53.013 Prec@5 81.260</span><br><span class="line">video 10560 <span class="keyword">done</span>, total 10560/11522, average 0.140 sec/video, moving Prec@1 53.064 Prec@5 81.203</span><br><span class="line">video 10880 <span class="keyword">done</span>, total 10880/11522, average 0.140 sec/video, moving Prec@1 53.111 Prec@5 81.232</span><br><span class="line">video 11200 <span class="keyword">done</span>, total 11200/11522, average 0.140 sec/video, moving Prec@1 53.174 Prec@5 81.232</span><br><span class="line">video 11520 <span class="keyword">done</span>, total 11520/11522, average 0.139 sec/video, moving Prec@1 53.203 Prec@5 81.236</span><br><span class="line">[0.91044776 0.4125     0.31428571 0.65671642 0.5        0.50862069</span><br><span class="line"> 0.69402985 0.47058824 0.72815534 0.75728155 0.50666667 0.54166667</span><br><span class="line"> 0.41489362 0.41935484 0.80254777 0.48       0.24096386 0.325</span><br><span class="line"> 0.4796748  0.38666667 0.408      0.63793103 0.5        0.43137255</span><br><span class="line"> 0.48387097 0.41666667 0.56521739 0.32       0.72727273 0.73015873</span><br><span class="line"> 0.63636364 0.53846154 0.85185185 0.25274725 0.26086957 0.22222222</span><br><span class="line"> 0.7816092  0.85294118 0.07894737 0.62962963 0.71900826 0.64</span><br><span class="line"> 0.70769231 0.71428571 0.71153846 0.67213115 0.47058824 0.41052632</span><br><span class="line"> 0.28089888 0.70676692 0.60377358 0.         0.36       0.55</span><br><span class="line"> 0.23809524 0.16666667 0.51515152 0.4375     0.         0.7755102</span><br><span class="line"> 0.81818182 0.25       0.6        0.1        0.16666667 0.5462963</span><br><span class="line"> 0.09259259 0.21212121 0.46478873 0.42307692 0.51612903 0.25</span><br><span class="line"> 0.52631579 0.52       0.83333333 0.58064516 0.23529412 0.58823529</span><br><span class="line"> 0.36363636 0.82926829 0.11428571 0.14285714 0.4        0.15789474</span><br><span class="line"> 0.57142857 0.4137931  0.63513514 0.79365079 0.16666667 0.08928571</span><br><span class="line"> 0.51351351 0.70731707 0.53488372 0.62037037 0.73831776 0.27419355</span><br><span class="line"> 0.03703704 0.19047619 0.59064327 0.5        0.3877551  0.58333333</span><br><span class="line"> 0.25       0.46938776 0.70731707 0.7047619  0.56179775 0.71014493</span><br><span class="line"> 0.49122807 0.36263736 0.64705882 0.         0.64864865 0.38095238</span><br><span class="line"> 0.66981132 0.46666667 0.32727273 0.75531915 0.34146341 0.625</span><br><span class="line"> 0.81818182 0.60784314 0.39090909 0.45       0.27777778 0.48979592</span><br><span class="line"> 0.47169811 0.62962963 0.16551724 0.70192308 0.3        0.22222222</span><br><span class="line"> 0.34210526 0.26666667 0.70198675 0.48275862 0.14285714 0.2</span><br><span class="line"> 0.13559322 0.64473684 0.67       0.27906977 0.54545455 0.48305085</span><br><span class="line"> 0.54666667 0.5        0.62264151 0.20895522 0.515625   0.744</span><br><span class="line"> 0.69090909 0.25806452 0.36666667 0.87037037 0.5952381  0.21568627</span><br><span class="line"> 0.24590164 0.37142857 0.5049505  0.34375    0.48148148 0.35</span><br><span class="line"> 0.34       0.34482759 0.70588235 0.81818182 0.9223301  0.93396226</span><br><span class="line"> 0.74074074 0.72972973 0.44761905 0.64028777 0.71532847 0.72368421]</span><br><span class="line">upper bound: 0.5058494457198016</span><br><span class="line">-----Evaluation is finished------</span><br><span class="line">Class Accuracy 48.66%</span><br><span class="line">Overall Prec@1 53.20% Prec@5 81.24%</span><br><span class="line">/home/hs/anaconda3/envs/dzl/lib/python3.7/site-packages/numpy/core/_asarray.py:136: VisibleDeprecationWarning: Creating an ndarray from ragged nested sequences (<span class="built_in">which</span> is a list-or-tuple of lists-or-tuples-or ndarrays with different lengths or shapes) is deprecated. If you meant to <span class="keyword">do</span> this, you must specify <span class="string">'dtype=object'</span> when creating the ndarray</span><br><span class="line">  <span class="built_in">return</span> array(a, dtype, copy=False, order=order, subok=True)</span><br></pre></td></tr></table></figure><h2 id="pan-pa"><a class="header-anchor" href="#pan-pa">#</a>PAN PA</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line">$ python test_models.py something --VAP --batch_size=10 -j=4 --test_crops=1 --test_segments=8 --weights=pretrained/PAN_PA_something_resnet50_shift8_blockres_avg_segment8_e80.pth.tar</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     PA</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line"></span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">video 0 <span class="keyword">done</span>, total 0/11522, average 13.141 sec/video, moving Prec@1 50.000 Prec@5 80.000</span><br><span class="line">video 200 <span class="keyword">done</span>, total 200/11522, average 0.950 sec/video, moving Prec@1 48.095 Prec@5 82.857</span><br><span class="line">video 400 <span class="keyword">done</span>, total 400/11522, average 0.675 sec/video, moving Prec@1 47.805 Prec@5 80.244</span><br><span class="line">video 600 <span class="keyword">done</span>, total 600/11522, average 0.586 sec/video, moving Prec@1 49.836 Prec@5 80.164</span><br><span class="line">video 800 <span class="keyword">done</span>, total 800/11522, average 0.537 sec/video, moving Prec@1 47.037 Prec@5 78.148</span><br><span class="line">video 1000 <span class="keyword">done</span>, total 1000/11522, average 0.480 sec/video, moving Prec@1 46.139 Prec@5 77.624</span><br><span class="line">video 1200 <span class="keyword">done</span>, total 1200/11522, average 0.449 sec/video, moving Prec@1 47.273 Prec@5 77.686</span><br><span class="line">video 1400 <span class="keyword">done</span>, total 1400/11522, average 0.440 sec/video, moving Prec@1 47.163 Prec@5 77.021</span><br><span class="line">video 1600 <span class="keyword">done</span>, total 1600/11522, average 0.420 sec/video, moving Prec@1 46.957 Prec@5 76.522</span><br><span class="line">video 1800 <span class="keyword">done</span>, total 1800/11522, average 0.406 sec/video, moving Prec@1 46.188 Prec@5 76.133</span><br><span class="line">video 2000 <span class="keyword">done</span>, total 2000/11522, average 0.387 sec/video, moving Prec@1 46.070 Prec@5 76.070</span><br><span class="line">video 2200 <span class="keyword">done</span>, total 2200/11522, average 0.368 sec/video, moving Prec@1 46.018 Prec@5 75.928</span><br><span class="line">video 2400 <span class="keyword">done</span>, total 2400/11522, average 0.358 sec/video, moving Prec@1 46.307 Prec@5 75.187</span><br><span class="line">video 2600 <span class="keyword">done</span>, total 2600/11522, average 0.350 sec/video, moving Prec@1 46.398 Prec@5 75.364</span><br><span class="line">video 2800 <span class="keyword">done</span>, total 2800/11522, average 0.336 sec/video, moving Prec@1 46.619 Prec@5 75.480</span><br><span class="line">video 3000 <span class="keyword">done</span>, total 3000/11522, average 0.330 sec/video, moving Prec@1 46.611 Prec@5 75.714</span><br><span class="line">video 3200 <span class="keyword">done</span>, total 3200/11522, average 0.325 sec/video, moving Prec@1 46.386 Prec@5 75.607</span><br><span class="line">video 3400 <span class="keyword">done</span>, total 3400/11522, average 0.318 sec/video, moving Prec@1 46.305 Prec@5 75.630</span><br><span class="line">video 3600 <span class="keyword">done</span>, total 3600/11522, average 0.311 sec/video, moving Prec@1 46.260 Prec@5 75.208</span><br><span class="line">video 3800 <span class="keyword">done</span>, total 3800/11522, average 0.304 sec/video, moving Prec@1 46.194 Prec@5 75.144</span><br><span class="line">video 4000 <span class="keyword">done</span>, total 4000/11522, average 0.297 sec/video, moving Prec@1 46.010 Prec@5 74.988</span><br><span class="line">video 4200 <span class="keyword">done</span>, total 4200/11522, average 0.293 sec/video, moving Prec@1 45.914 Prec@5 74.893</span><br><span class="line">video 4400 <span class="keyword">done</span>, total 4400/11522, average 0.288 sec/video, moving Prec@1 45.782 Prec@5 74.807</span><br><span class="line">video 4600 <span class="keyword">done</span>, total 4600/11522, average 0.290 sec/video, moving Prec@1 45.792 Prec@5 74.555</span><br><span class="line">video 4800 <span class="keyword">done</span>, total 4800/11522, average 0.289 sec/video, moving Prec@1 45.530 Prec@5 74.470</span><br><span class="line">video 5000 <span class="keyword">done</span>, total 5000/11522, average 0.285 sec/video, moving Prec@1 45.389 Prec@5 74.311</span><br><span class="line">video 5200 <span class="keyword">done</span>, total 5200/11522, average 0.283 sec/video, moving Prec@1 45.528 Prec@5 74.299</span><br><span class="line">video 5400 <span class="keyword">done</span>, total 5400/11522, average 0.282 sec/video, moving Prec@1 45.564 Prec@5 74.251</span><br><span class="line">video 5600 <span class="keyword">done</span>, total 5600/11522, average 0.279 sec/video, moving Prec@1 45.704 Prec@5 74.314</span><br><span class="line">video 5800 <span class="keyword">done</span>, total 5800/11522, average 0.276 sec/video, moving Prec@1 45.611 Prec@5 74.148</span><br><span class="line">video 6000 <span class="keyword">done</span>, total 6000/11522, average 0.273 sec/video, moving Prec@1 45.674 Prec@5 74.260</span><br><span class="line">video 6200 <span class="keyword">done</span>, total 6200/11522, average 0.270 sec/video, moving Prec@1 45.749 Prec@5 74.235</span><br><span class="line">video 6400 <span class="keyword">done</span>, total 6400/11522, average 0.266 sec/video, moving Prec@1 45.803 Prec@5 74.368</span><br><span class="line">video 6600 <span class="keyword">done</span>, total 6600/11522, average 0.264 sec/video, moving Prec@1 45.719 Prec@5 74.433</span><br><span class="line">video 6800 <span class="keyword">done</span>, total 6800/11522, average 0.261 sec/video, moving Prec@1 45.551 Prec@5 74.347</span><br><span class="line">video 7000 <span class="keyword">done</span>, total 7000/11522, average 0.258 sec/video, moving Prec@1 45.578 Prec@5 74.508</span><br><span class="line">video 7200 <span class="keyword">done</span>, total 7200/11522, average 0.255 sec/video, moving Prec@1 45.423 Prec@5 74.452</span><br><span class="line">video 7400 <span class="keyword">done</span>, total 7400/11522, average 0.252 sec/video, moving Prec@1 45.452 Prec@5 74.345</span><br><span class="line">video 7600 <span class="keyword">done</span>, total 7600/11522, average 0.250 sec/video, moving Prec@1 45.427 Prec@5 74.428</span><br><span class="line">video 7800 <span class="keyword">done</span>, total 7800/11522, average 0.249 sec/video, moving Prec@1 45.314 Prec@5 74.507</span><br><span class="line">video 8000 <span class="keyword">done</span>, total 8000/11522, average 0.246 sec/video, moving Prec@1 45.268 Prec@5 74.469</span><br><span class="line">video 8200 <span class="keyword">done</span>, total 8200/11522, average 0.243 sec/video, moving Prec@1 45.311 Prec@5 74.531</span><br><span class="line">video 8400 <span class="keyword">done</span>, total 8400/11522, average 0.241 sec/video, moving Prec@1 45.268 Prec@5 74.530</span><br><span class="line">video 8600 <span class="keyword">done</span>, total 8600/11522, average 0.239 sec/video, moving Prec@1 45.203 Prec@5 74.553</span><br><span class="line">video 8800 <span class="keyword">done</span>, total 8800/11522, average 0.237 sec/video, moving Prec@1 45.255 Prec@5 74.620</span><br><span class="line">video 9000 <span class="keyword">done</span>, total 9000/11522, average 0.236 sec/video, moving Prec@1 45.161 Prec@5 74.584</span><br><span class="line">video 9200 <span class="keyword">done</span>, total 9200/11522, average 0.234 sec/video, moving Prec@1 45.179 Prec@5 74.604</span><br><span class="line">video 9400 <span class="keyword">done</span>, total 9400/11522, average 0.232 sec/video, moving Prec@1 45.228 Prec@5 74.633</span><br><span class="line">video 9600 <span class="keyword">done</span>, total 9600/11522, average 0.230 sec/video, moving Prec@1 45.265 Prec@5 74.631</span><br><span class="line">video 9800 <span class="keyword">done</span>, total 9800/11522, average 0.228 sec/video, moving Prec@1 45.301 Prec@5 74.699</span><br><span class="line">video 10000 <span class="keyword">done</span>, total 10000/11522, average 0.227 sec/video, moving Prec@1 45.305 Prec@5 74.715</span><br><span class="line">video 10200 <span class="keyword">done</span>, total 10200/11522, average 0.225 sec/video, moving Prec@1 45.260 Prec@5 74.760</span><br><span class="line">video 10400 <span class="keyword">done</span>, total 10400/11522, average 0.224 sec/video, moving Prec@1 45.312 Prec@5 74.774</span><br><span class="line">video 10600 <span class="keyword">done</span>, total 10600/11522, average 0.223 sec/video, moving Prec@1 45.297 Prec@5 74.807</span><br><span class="line">video 10800 <span class="keyword">done</span>, total 10800/11522, average 0.225 sec/video, moving Prec@1 45.412 Prec@5 74.875</span><br><span class="line">video 11000 <span class="keyword">done</span>, total 11000/11522, average 0.223 sec/video, moving Prec@1 45.441 Prec@5 74.877</span><br><span class="line">video 11200 <span class="keyword">done</span>, total 11200/11522, average 0.222 sec/video, moving Prec@1 45.468 Prec@5 74.844</span><br><span class="line">video 11400 <span class="keyword">done</span>, total 11400/11522, average 0.220 sec/video, moving Prec@1 45.451 Prec@5 74.812</span><br><span class="line">[0.86567164 0.25       0.24761905 0.59701493 0.39473684 0.45689655</span><br><span class="line"> 0.62686567 0.29411765 0.52427184 0.62135922 0.4        0.41666667</span><br><span class="line"> 0.25531915 0.32258065 0.61146497 0.42       0.23493976 0.25</span><br><span class="line"> 0.34146341 0.28       0.248      0.60344828 0.5        0.35294118</span><br><span class="line"> 0.5483871  0.33333333 0.43478261 0.4        0.66666667 0.61904762</span><br><span class="line"> 0.54545455 0.5        0.75925926 0.15384615 0.26086957 0.19444444</span><br><span class="line"> 0.81609195 0.7745098  0.13157895 0.55555556 0.69421488 0.66</span><br><span class="line"> 0.60769231 0.55102041 0.71153846 0.60655738 0.45588235 0.33684211</span><br><span class="line"> 0.21348315 0.59398496 0.48113208 0.         0.28       0.45</span><br><span class="line"> 0.19047619 0.16666667 0.36363636 0.46875    0.08333333 0.70408163</span><br><span class="line"> 0.81818182 0.13888889 0.56       0.13636364 0.16666667 0.34259259</span><br><span class="line"> 0.12962963 0.10606061 0.35211268 0.34615385 0.48387097 0.17857143</span><br><span class="line"> 0.39473684 0.48       0.75       0.32258065 0.23529412 0.47058824</span><br><span class="line"> 0.40909091 0.80487805 0.08571429 0.21428571 0.36666667 0.15789474</span><br><span class="line"> 0.6        0.34482759 0.63513514 0.63492063 0.05555556 0.03571429</span><br><span class="line"> 0.56756757 0.70731707 0.48837209 0.50925926 0.61682243 0.16129032</span><br><span class="line"> 0.         0.16666667 0.58479532 0.48529412 0.41836735 0.42592593</span><br><span class="line"> 0.15625    0.57142857 0.6097561  0.54285714 0.40449438 0.56521739</span><br><span class="line"> 0.31578947 0.34065934 0.58823529 0.         0.5        0.19047619</span><br><span class="line"> 0.38679245 0.43333333 0.25454545 0.61702128 0.26829268 0.54166667</span><br><span class="line"> 0.71590909 0.58823529 0.30909091 0.425      0.19444444 0.28571429</span><br><span class="line"> 0.43396226 0.46296296 0.11034483 0.60576923 0.24       0.11111111</span><br><span class="line"> 0.26315789 0.33333333 0.52317881 0.39655172 0.         0.11666667</span><br><span class="line"> 0.10169492 0.60526316 0.61       0.23255814 0.38636364 0.33050847</span><br><span class="line"> 0.49333333 0.45070423 0.52830189 0.14925373 0.4375     0.68</span><br><span class="line"> 0.65454545 0.33870968 0.4        0.77777778 0.48809524 0.07843137</span><br><span class="line"> 0.31147541 0.35714286 0.35643564 0.1875     0.48148148 0.275</span><br><span class="line"> 0.3        0.31034483 0.64705882 0.75757576 0.90291262 0.8490566</span><br><span class="line"> 0.69444444 0.72972973 0.31428571 0.56834532 0.62773723 0.55263158]</span><br><span class="line">upper bound: 0.4377580829893891</span><br><span class="line">-----Evaluation is finished------</span><br><span class="line">Class Accuracy 41.77%</span><br><span class="line">Overall Prec@1 45.42% Prec@5 74.83%</span><br><span class="line">E:\Program Files\Anaconda3\envs\tsm\lib\site-packages\numpy\core\_asarray.py:136: VisibleDeprecationWarning: Creating an ndarray from ragged nested sequences (<span class="built_in">which</span> is a list-or-tuple of lists-or-tuples-or ndarrays with different lengths or shapes) is deprecated. If you meant to <span class="keyword">do</span> this, you must specify <span class="string">'dtype=object'</span> when creating the ndarray  <span class="built_in">return</span> array(a, dtype, copy=False, order=order, subok=True)</span><br></pre></td></tr></table></figure><h2 id="pan-rgb"><a class="header-anchor" href="#pan-rgb">#</a>PAN RGB</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line">$ python test_models.py something --VAP --batch_size=10 -j=4 --test_crops=1 --test_segments=8 --weights=pretrained/PAN_RGB_something_resnet50_shift8_blockres_avg_segment8_e50.pth.tar</span><br><span class="line">something: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line"></span><br><span class="line">    Initializing PAN with base model: resnet50.</span><br><span class="line">    PAN Configurations:</span><br><span class="line">        input_modality:     RGB</span><br><span class="line">        num_segments:       8</span><br><span class="line">        new_length:         1</span><br><span class="line">        consensus_module:   avg</span><br><span class="line">        dropout_ratio:      0.8</span><br><span class="line">        img_feature_dim:    256</span><br><span class="line"></span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">video number:11522</span><br><span class="line">video 0 <span class="keyword">done</span>, total 0/11522, average 3.020 sec/video, moving Prec@1 30.000 Prec@5 70.000</span><br><span class="line">video 200 <span class="keyword">done</span>, total 200/11522, average 0.238 sec/video, moving Prec@1 48.571 Prec@5 77.143</span><br><span class="line">video 400 <span class="keyword">done</span>, total 400/11522, average 0.174 sec/video, moving Prec@1 47.805 Prec@5 77.073</span><br><span class="line">video 600 <span class="keyword">done</span>, total 600/11522, average 0.146 sec/video, moving Prec@1 47.377 Prec@5 77.213</span><br><span class="line">video 800 <span class="keyword">done</span>, total 800/11522, average 0.134 sec/video, moving Prec@1 45.556 Prec@5 75.309</span><br><span class="line">video 1000 <span class="keyword">done</span>, total 1000/11522, average 0.136 sec/video, moving Prec@1 46.139 Prec@5 74.554</span><br><span class="line">video 1200 <span class="keyword">done</span>, total 1200/11522, average 0.132 sec/video, moving Prec@1 45.785 Prec@5 75.124</span><br><span class="line">video 1400 <span class="keyword">done</span>, total 1400/11522, average 0.126 sec/video, moving Prec@1 46.596 Prec@5 74.894</span><br><span class="line">video 1600 <span class="keyword">done</span>, total 1600/11522, average 0.121 sec/video, moving Prec@1 46.770 Prec@5 74.845</span><br><span class="line">video 1800 <span class="keyword">done</span>, total 1800/11522, average 0.121 sec/video, moving Prec@1 45.691 Prec@5 74.088</span><br><span class="line">video 2000 <span class="keyword">done</span>, total 2000/11522, average 0.123 sec/video, moving Prec@1 45.821 Prec@5 74.577</span><br><span class="line">video 2200 <span class="keyword">done</span>, total 2200/11522, average 0.122 sec/video, moving Prec@1 45.520 Prec@5 74.253</span><br><span class="line">video 2400 <span class="keyword">done</span>, total 2400/11522, average 0.122 sec/video, moving Prec@1 45.270 Prec@5 74.191</span><br><span class="line">video 2600 <span class="keyword">done</span>, total 2600/11522, average 0.120 sec/video, moving Prec@1 45.057 Prec@5 74.215</span><br><span class="line">video 2800 <span class="keyword">done</span>, total 2800/11522, average 0.117 sec/video, moving Prec@1 45.089 Prec@5 74.377</span><br><span class="line">video 3000 <span class="keyword">done</span>, total 3000/11522, average 0.114 sec/video, moving Prec@1 45.083 Prec@5 74.319</span><br><span class="line">video 3200 <span class="keyword">done</span>, total 3200/11522, average 0.112 sec/video, moving Prec@1 44.517 Prec@5 74.050</span><br><span class="line">video 3400 <span class="keyword">done</span>, total 3400/11522, average 0.110 sec/video, moving Prec@1 44.516 Prec@5 74.164</span><br><span class="line">video 3600 <span class="keyword">done</span>, total 3600/11522, average 0.109 sec/video, moving Prec@1 44.515 Prec@5 74.072</span><br><span class="line">video 3800 <span class="keyword">done</span>, total 3800/11522, average 0.107 sec/video, moving Prec@1 44.514 Prec@5 73.858</span><br><span class="line">video 4000 <span class="keyword">done</span>, total 4000/11522, average 0.106 sec/video, moving Prec@1 44.214 Prec@5 73.791</span><br><span class="line">video 4200 <span class="keyword">done</span>, total 4200/11522, average 0.106 sec/video, moving Prec@1 44.228 Prec@5 73.753</span><br><span class="line">video 4400 <span class="keyword">done</span>, total 4400/11522, average 0.103 sec/video, moving Prec@1 44.331 Prec@5 73.651</span><br><span class="line">video 4600 <span class="keyword">done</span>, total 4600/11522, average 0.104 sec/video, moving Prec@1 44.555 Prec@5 73.557</span><br><span class="line">video 4800 <span class="keyword">done</span>, total 4800/11522, average 0.102 sec/video, moving Prec@1 44.470 Prec@5 73.451</span><br><span class="line">video 5000 <span class="keyword">done</span>, total 5000/11522, average 0.102 sec/video, moving Prec@1 44.311 Prec@5 73.234</span><br><span class="line">video 5200 <span class="keyword">done</span>, total 5200/11522, average 0.101 sec/video, moving Prec@1 44.376 Prec@5 73.378</span><br><span class="line">video 5400 <span class="keyword">done</span>, total 5400/11522, average 0.100 sec/video, moving Prec@1 44.455 Prec@5 73.420</span><br><span class="line">video 5600 <span class="keyword">done</span>, total 5600/11522, average 0.099 sec/video, moving Prec@1 44.439 Prec@5 73.512</span><br><span class="line">video 5800 <span class="keyword">done</span>, total 5800/11522, average 0.099 sec/video, moving Prec@1 44.389 Prec@5 73.339</span><br><span class="line">video 6000 <span class="keyword">done</span>, total 6000/11522, average 0.098 sec/video, moving Prec@1 44.476 Prec@5 73.494</span><br><span class="line">video 6200 <span class="keyword">done</span>, total 6200/11522, average 0.098 sec/video, moving Prec@1 44.477 Prec@5 73.333</span><br><span class="line">video 6400 <span class="keyword">done</span>, total 6400/11522, average 0.098 sec/video, moving Prec@1 44.524 Prec@5 73.526</span><br><span class="line">video 6600 <span class="keyword">done</span>, total 6600/11522, average 0.097 sec/video, moving Prec@1 44.493 Prec@5 73.510</span><br><span class="line">video 6800 <span class="keyword">done</span>, total 6800/11522, average 0.097 sec/video, moving Prec@1 44.508 Prec@5 73.465</span><br><span class="line">video 7000 <span class="keyword">done</span>, total 7000/11522, average 0.096 sec/video, moving Prec@1 44.479 Prec@5 73.466</span><br><span class="line">video 7200 <span class="keyword">done</span>, total 7200/11522, average 0.096 sec/video, moving Prec@1 44.466 Prec@5 73.412</span><br><span class="line">video 7400 <span class="keyword">done</span>, total 7400/11522, average 0.096 sec/video, moving Prec@1 44.467 Prec@5 73.387</span><br><span class="line">video 7600 <span class="keyword">done</span>, total 7600/11522, average 0.096 sec/video, moving Prec@1 44.507 Prec@5 73.443</span><br><span class="line">video 7800 <span class="keyword">done</span>, total 7800/11522, average 0.096 sec/video, moving Prec@1 44.469 Prec@5 73.444</span><br><span class="line">video 8000 <span class="keyword">done</span>, total 8000/11522, average 0.095 sec/video, moving Prec@1 44.444 Prec@5 73.496</span><br><span class="line">video 8200 <span class="keyword">done</span>, total 8200/11522, average 0.095 sec/video, moving Prec@1 44.434 Prec@5 73.423</span><br><span class="line">video 8400 <span class="keyword">done</span>, total 8400/11522, average 0.094 sec/video, moving Prec@1 44.566 Prec@5 73.508</span><br><span class="line">video 8600 <span class="keyword">done</span>, total 8600/11522, average 0.094 sec/video, moving Prec@1 44.390 Prec@5 73.473</span><br><span class="line">video 8800 <span class="keyword">done</span>, total 8800/11522, average 0.094 sec/video, moving Prec@1 44.563 Prec@5 73.496</span><br><span class="line">video 9000 <span class="keyword">done</span>, total 9000/11522, average 0.093 sec/video, moving Prec@1 44.584 Prec@5 73.496</span><br><span class="line">video 9200 <span class="keyword">done</span>, total 9200/11522, average 0.092 sec/video, moving Prec@1 44.680 Prec@5 73.496</span><br><span class="line">video 9400 <span class="keyword">done</span>, total 9400/11522, average 0.092 sec/video, moving Prec@1 44.644 Prec@5 73.464</span><br><span class="line">video 9600 <span class="keyword">done</span>, total 9600/11522, average 0.092 sec/video, moving Prec@1 44.776 Prec@5 73.569</span><br><span class="line">video 9800 <span class="keyword">done</span>, total 9800/11522, average 0.092 sec/video, moving Prec@1 44.801 Prec@5 73.649</span><br><span class="line">video 10000 <span class="keyword">done</span>, total 10000/11522, average 0.091 sec/video, moving Prec@1 44.775 Prec@5 73.666</span><br><span class="line">video 10200 <span class="keyword">done</span>, total 10200/11522, average 0.091 sec/video, moving Prec@1 44.848 Prec@5 73.761</span><br><span class="line">video 10400 <span class="keyword">done</span>, total 10400/11522, average 0.091 sec/video, moving Prec@1 44.861 Prec@5 73.737</span><br><span class="line">video 10600 <span class="keyword">done</span>, total 10600/11522, average 0.091 sec/video, moving Prec@1 44.882 Prec@5 73.723</span><br><span class="line">video 10800 <span class="keyword">done</span>, total 10800/11522, average 0.091 sec/video, moving Prec@1 44.986 Prec@5 73.747</span><br><span class="line">video 11000 <span class="keyword">done</span>, total 11000/11522, average 0.090 sec/video, moving Prec@1 44.932 Prec@5 73.706</span><br><span class="line">video 11200 <span class="keyword">done</span>, total 11200/11522, average 0.090 sec/video, moving Prec@1 44.996 Prec@5 73.747</span><br><span class="line">video 11400 <span class="keyword">done</span>, total 11400/11522, average 0.090 sec/video, moving Prec@1 44.978 Prec@5 73.699</span><br><span class="line">[0.7761194  0.275      0.19047619 0.62686567 0.23684211 0.40517241</span><br><span class="line"> 0.62686567 0.44117647 0.45631068 0.6407767  0.37333333 0.38888889</span><br><span class="line"> 0.24468085 0.32258065 0.7133758  0.36       0.19879518 0.225</span><br><span class="line"> 0.39837398 0.28       0.32       0.48275862 0.40740741 0.43137255</span><br><span class="line"> 0.32258065 0.33333333 0.39130435 0.28       0.60606061 0.53968254</span><br><span class="line"> 0.63636364 0.57692308 0.72222222 0.10989011 0.23913043 0.16666667</span><br><span class="line"> 0.7816092  0.78431373 0.05263158 0.48148148 0.62809917 0.54</span><br><span class="line"> 0.66923077 0.63265306 0.59615385 0.52459016 0.41176471 0.34736842</span><br><span class="line"> 0.15730337 0.66165414 0.56603774 0.         0.36       0.4</span><br><span class="line"> 0.19047619 0.29166667 0.39393939 0.40625    0.         0.73469388</span><br><span class="line"> 0.60606061 0.13888889 0.6        0.11818182 0.1        0.38888889</span><br><span class="line"> 0.11111111 0.15151515 0.43661972 0.30769231 0.48387097 0.25</span><br><span class="line"> 0.5        0.44       0.7        0.41935484 0.29411765 0.29411765</span><br><span class="line"> 0.13636364 0.63414634 0.11428571 0.14285714 0.33333333 0.10526316</span><br><span class="line"> 0.62857143 0.29310345 0.52702703 0.55555556 0.16666667 0.10714286</span><br><span class="line"> 0.48648649 0.68292683 0.41860465 0.46296296 0.57009346 0.27419355</span><br><span class="line"> 0.03703704 0.11904762 0.41520468 0.41176471 0.24489796 0.51851852</span><br><span class="line"> 0.21875    0.46938776 0.42682927 0.6        0.5505618  0.75362319</span><br><span class="line"> 0.47368421 0.2967033  0.54901961 0.11764706 0.60810811 0.38095238</span><br><span class="line"> 0.66037736 0.36666667 0.21818182 0.62765957 0.2195122  0.58333333</span><br><span class="line"> 0.79545455 0.54901961 0.35454545 0.425      0.36111111 0.44897959</span><br><span class="line"> 0.49056604 0.53703704 0.15862069 0.53846154 0.22       0.18518519</span><br><span class="line"> 0.13157895 0.23333333 0.64238411 0.29310345 0.07142857 0.45</span><br><span class="line"> 0.08474576 0.51315789 0.57       0.34883721 0.25       0.38135593</span><br><span class="line"> 0.56       0.33098592 0.6509434  0.17910448 0.484375   0.752</span><br><span class="line"> 0.56363636 0.12903226 0.28333333 0.7037037  0.5        0.15686275</span><br><span class="line"> 0.18032787 0.21428571 0.43564356 0.4375     0.24074074 0.25</span><br><span class="line"> 0.26       0.31034483 0.60784314 0.66666667 0.83495146 0.75471698</span><br><span class="line"> 0.68518519 0.45945946 0.44761905 0.61870504 0.59124088 0.71052632]</span><br><span class="line">upper bound: 0.42524204990350917</span><br><span class="line">-----Evaluation is finished------</span><br><span class="line">Class Accuracy 40.94%</span><br><span class="line">Overall Prec@1 44.97% Prec@5 73.69%</span><br><span class="line">E:\Program Files\Anaconda3\envs\tsm\lib\site-packages\numpy\core\_asarray.py:136: VisibleDeprecationWarning: Creating an ndarray from ragged nested sequences (<span class="built_in">which</span> is a list-or-tuple of lists-or-tuples-or ndarrays with different lengths or shapes) is deprecated. If you meant to <span class="keyword">do</span> this, you must specify <span class="string">'dtype=object'</span> when creating the ndarray  <span class="built_in">return</span> array(a, dtype, copy=False, order=order, subok=True)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¡Œä¸ºè¯†åˆ« </tag>
            
            <tag> action recognition </tag>
            
            <tag> pan </tag>
            
            <tag> pan lite </tag>
            
            <tag> pan full </tag>
            
            <tag> pan en </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windowsä¸‹çš„Ubuntuå­ç³»ç»Ÿ</title>
      <link href="/blog/2020/10/06/ubuntu-subsystem-in-windows/"/>
      <url>/blog/2020/10/06/ubuntu-subsystem-in-windows/</url>
      
        <content type="html"><![CDATA[<p><code>windows</code>ä¸‹ç”¨<code>Linux</code>ä¸‹çš„ä¸œè¥¿ä¼šå‡ºç°å„ç§å„æ ·çš„é—®é¢˜ï¼Œè£…ä¸ª<code>Ubuntu</code>å­ç³»ç»Ÿå®Œç¾è§£å†³é—®é¢˜ã€‚</p><a id="more"></a><h2 id="å®‰è£…-ubuntu-å­ç³»ç»Ÿ"><a class="header-anchor" href="#å®‰è£…-ubuntu-å­ç³»ç»Ÿ">#</a>å®‰è£… Ubuntu å­ç³»ç»Ÿ</h2><p><code>è®¾ç½®</code> -&gt; <code>æ›´æ–°å’Œå®‰å…¨</code> -&gt; <code>å¼€å‘è€…é€‰é¡¹</code> -&gt; <code>å¼€å‘äººå‘˜æ¨¡å¼ï¼ˆä»ä»»æ„æº(åŒ…æ‹¬æ¾æ•£æ–‡ä»¶)å®‰è£…åº”ç”¨ã€‚ï¼‰</code> -&gt; <code>å¼€å¯</code>ï¼š</p><center><!-- //onns.xyz/blog/image --><p><img src="//onns.xyz/blog/image/20201006-1.png" alt="å¼€å‘äººå‘˜æ¨¡å¼"></p></center><p><code>æ§åˆ¶é¢æ¿</code> -&gt; <code>ç¨‹åº</code> -&gt; <code>å¯ç”¨æˆ–å…³é—­ Windows åŠŸèƒ½</code>ï¼š</p><center><!-- //onns.xyz/blog/image --><p><img src="//onns.xyz/blog/image/20201006-2.png" alt="å¯ç”¨æˆ–å…³é—­ Windows åŠŸèƒ½"></p></center><p>å‹¾é€‰ <code>é€‚ç”¨äº Linux çš„ Windows å­ç³»ç»Ÿ</code>ï¼š</p><center><!-- //onns.xyz/blog/image --><p><img src="//onns.xyz/blog/image/20201006-3.png" alt="é€‚ç”¨äº Linux çš„ Windows å­ç³»ç»Ÿ"></p></center><p><code>Microsoft Store</code> -&gt; æœç´¢<code>wsl</code> -&gt; é€‰æ‹©<code>Ubuntu 18.04 LTS</code>ï¼š</p><center><!-- //onns.xyz/blog/image --><p><img src="//onns.xyz/blog/image/20201006-4.png" alt="Ubuntu 18.04 LTS"></p></center><p>é‡å¯ä¹‹åæ‰“å¼€ï¼Œè®¾ç½®ç”¨æˆ·åå¯†ç å³å¯ï¼</p><h2 id="å¼€å¯-sshd"><a class="header-anchor" href="#å¼€å¯-sshd">#</a>å¼€å¯ sshd</h2><p>é˜‰å‰²ç‰ˆå¥½åƒæ²¡æœ‰<code>service</code>æœåŠ¡ï¼Œåªèƒ½æ‰‹åŠ¨å¯åŠ¨ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo /etc/init.d/ssh start</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ä¼šå¾—åˆ°å¦‚ä¸‹æç¤ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">* Starting OpenBSD Secure Shell server sshd</span><br><span class="line">Could not load host key: /etc/ssh/ssh_host_rsa_key</span><br><span class="line">Could not load host key: /etc/ssh/ssh_host_ecdsa_key</span><br><span class="line">Could not load host key: /etc/ssh/ssh_host_ed25519_key</span><br><span class="line">[ OK ]</span><br></pre></td></tr></table></figure><p>æ‰‹åŠ¨ç”Ÿæˆï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -f /etc/ssh/ssh_host_rsa_key</span><br><span class="line">ssh-keygen -t ecdsa -f /etc/ssh/ssh_host_ecdsa_key</span><br><span class="line">ssh-keygen -t ed25519 -f /etc/ssh/ssh_host_ed25519_key</span><br></pre></td></tr></table></figure><p>æˆåŠŸï¼å°±å¯ä»¥ç”¨ Linux ä¸‹çš„ä¸€äº›å‘½ä»¤äº†ï½</p><center><!-- //onns.xyz/blog/image --><p><img src="//onns.xyz/blog/image/20201006-5.png" alt="ç¤ºæ„å›¾"></p></center><p>å¤šè¯´ä¸€å¥ï¼Œç«¯å£å•Šã€ç£ç›˜å•Šä»€ä¹ˆçš„éƒ½æ˜¯æ‰“é€šçš„ï¼Œç‚’é¸¡æ–¹ä¾¿ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> /mnt/</span><br><span class="line">$ ls</span><br><span class="line">c  d  e  f  g</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„<code>c d e f g</code>å°±æ˜¯<code>Windows</code>ä¸‹çš„åˆ†åŒºã€‚</p><p>å®Œã€‚</p><h2 id="å‚è€ƒé“¾æ¥"><a class="header-anchor" href="#å‚è€ƒé“¾æ¥">#</a>å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://www.jianshu.com/p/2bcf5eca5fbc" target="_blank" rel="noopener">Windows10 å®‰è£… Ubuntu æ¡Œé¢å­ç³»ç»Ÿ</a></li><li><a href="http://blog.chinaunix.net/uid-26168435-id-5732463.html" target="_blank" rel="noopener">å¯åŠ¨ sshd æ—¶ï¼ŒæŠ¥â€œCould not load host keyâ€é”™</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> rsync </tag>
            
            <tag> windows </tag>
            
            <tag> ssh </tag>
            
            <tag> sshd </tag>
            
            <tag> ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TEA Temporal Excitation and Aggregation for Action Recognition</title>
      <link href="/blog/2020/10/04/tea-temporal-excitation-and-aggregation-for-action-recognition/"/>
      <url>/blog/2020/10/04/tea-temporal-excitation-and-aggregation-for-action-recognition/</url>
      
        <content type="html"><![CDATA[<h2 id="tea-temporal-excitation-and-aggregation-for-action-recognition"><a class="header-anchor" href="#tea-temporal-excitation-and-aggregation-for-action-recognition">#</a>TEA: Temporal Excitation and Aggregation for Action Recognition</h2><h3 id="é—®é¢˜æå‡º"><a class="header-anchor" href="#é—®é¢˜æå‡º">#</a>é—®é¢˜æå‡º</h3><p>åœ¨è¡Œä¸ºè¯†åˆ«ç½‘ç»œçš„æ—¶åºå»ºæ¨¡ä¸­å­˜åœ¨ç€ä¸¤ä¸ªé—®é¢˜ï¼š<code>short-range motion encoding</code>å’Œ<code>long-range temporal aggregation</code>ï¼Œå³çŸ­æ—¶è¿åŠ¨ç¼–ç å’Œé•¿æ—¶çš„æ—¶é—´ä¿¡æ¯èåˆé—®é¢˜ã€‚</p><p>å‰è€…åŸºæœ¬ä¾èµ–å…‰æµæ¥è§£å†³ï¼Œå› ä¸ºè®¡ç®—é‡å¾ˆå¤§ï¼Œä¸”æ— æ³•æ»¡è¶³å®æ—¶çš„ä»»åŠ¡ï¼Œæ‰€ä»¥ä½œè€…æå‡º<code>motion excitation</code>ã€‚</p><p>åè€…ç°æœ‰çš„è§£å†³æ–¹æ¡ˆæœ‰ä¸¤ä¸ªï¼š</p><ol><li>adopt 2D CNN backbones to extract frame-wise features and then utilize a simple temporal max/average pooling to obtain the whole video representation.</li><li>adopt local 3D/(2+1)D convolutional operations to process local temporal window</li></ol><p>è¿™æ ·æ‰€å¸¦æ¥çš„é—®é¢˜æ˜¯ï¼Œæ—¶ç©ºä¿¡æ¯åœ¨ç½‘ç»œçš„é¡¶ç«¯è¿›è¡Œèåˆï¼Œå†åå‘ä¼ æ’­å›æ¥ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¼˜åŒ–å›°éš¾ã€‚æ‰€ä»¥ä½œè€…æå‡º<code>multiple temporal aggregation</code>ã€‚</p><center><!-- //onns.xyz/blog/image --><p><img src="//onns.xyz/blog/image/20201008-1.png" alt="ç»“æ„å›¾"></p></center><h3 id="ç›¸å…³é“¾æ¥"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥">#</a>ç›¸å…³é“¾æ¥</h3><ul><li><a href="https://zhuanlan.zhihu.com/p/129282832" target="_blank" rel="noopener">[CVPR 2020 ] å—äº¬å¤§å­¦/è…¾è®¯ PCG ç”¨äºæ—¶åºå»ºæ¨¡çš„è½»é‡çº§è¡Œä¸ºè¯†åˆ«æ¨¡å‹ TEA</a></li><li><a href="https://blog.csdn.net/qq_41214679/article/details/107975761" target="_blank" rel="noopener">TEA: Temporal Excitation and Aggregation for Action Recognition é˜…è¯»ç¬”è®°</a></li><li><a href="https://zhuanlan.zhihu.com/p/130807086" target="_blank" rel="noopener">CVPR2020 å—å¤§+è…¾è®¯ TEA è½»é‡çº§è§†é¢‘è¡Œä¸ºè¯†åˆ«æ¨¡å‹</a></li><li><a href="https://arxiv.org/abs/2004.01398" target="_blank" rel="noopener">TEA: Temporal Excitation and Aggregation for Action Recognition</a></li><li><a href="https://github.com/Phoenix1327/tea-action-recognition" target="_blank" rel="noopener">Phoenix1327/tea-action-recognition</a></li><li><a href="https://blog.csdn.net/irving512/article/details/106524982/" target="_blank" rel="noopener">è®ºæ–‡æµè§ˆ(3) TEA: Temporal Excitation and Aggregation for Action Recognition</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¡Œä¸ºè¯†åˆ« </tag>
            
            <tag> action recognition </tag>
            
            <tag> CVPR </tag>
            
            <tag> CVPR 2020 </tag>
            
            <tag> 2020 </tag>
            
            <tag> tea </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é˜´å†ç”Ÿæ—¥ç”Ÿæˆè„šæœ¬</title>
      <link href="/blog/2020/10/04/lunar-birthday-generator-script/"/>
      <url>/blog/2020/10/04/lunar-birthday-generator-script/</url>
      
        <content type="html"><![CDATA[<p><code>Google Calendar</code>æœ¬èº«æ²¡æœ‰é˜´å†æ—¥å†çš„åŠŸèƒ½ï¼Œåªèƒ½é€šè¿‡ç”Ÿæˆç„¶åå¯¼å…¥çš„æ–¹å¼æ·»åŠ ã€‚</p><a id="more"></a><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> sxtwl</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(len(sys.argv) != <span class="number">3</span> <span class="keyword">or</span> len(sys.argv[<span class="number">2</span>]) != <span class="number">8</span>):</span><br><span class="line">exit(<span class="string">'Usage: python lunar_brithday &lt;name&gt; &lt;birth day(YYYYMMDD)&gt;'</span>)</span><br><span class="line"></span><br><span class="line">lunar = sxtwl.Lunar()</span><br><span class="line"></span><br><span class="line">birth_year = int(sys.argv[<span class="number">2</span>][:<span class="number">4</span>])</span><br><span class="line">birth_month = int(sys.argv[<span class="number">2</span>][<span class="number">4</span>:<span class="number">6</span>])</span><br><span class="line">birth_day = int(sys.argv[<span class="number">2</span>][<span class="number">6</span>:<span class="number">8</span>])</span><br><span class="line"></span><br><span class="line">day = lunar.getDayBySolar(birth_year, birth_month, birth_day)</span><br><span class="line"></span><br><span class="line">lunar_birth_month = (day.Lmc + <span class="number">11</span>) % <span class="number">12</span></span><br><span class="line">lunar_birth_day = day.Ldi + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">print(<span class="string">"Subject,Start Date,All Day Event"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">100</span>):</span><br><span class="line">day = lunar.getDayByLunar(birth_year+i, lunar_birth_month, lunar_birth_day)</span><br><span class="line">print(sys.argv[<span class="number">1</span>] + <span class="string">'\'s lunar birthday,'</span> + str(day.m) + <span class="string">'/'</span> + str(day.d) + <span class="string">'/'</span> + str(day.y) + <span class="string">',TRUE'</span>)</span><br><span class="line"><span class="comment"># Subject,Start Date,All Day Event</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> idea </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> lunar birthday </tag>
            
            <tag> calendar </tag>
            
            <tag> google calendar </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PAN Lite è®­ç»ƒç»“æœ</title>
      <link href="/blog/2020/10/02/pan-lite-train-log/"/>
      <url>/blog/2020/10/02/pan-lite-train-log/</url>
      
        <content type="html"><![CDATA[<h2 id="pan-lite-è®­ç»ƒç»“æœ"><a class="header-anchor" href="#pan-lite-è®­ç»ƒç»“æœ">#</a>PAN Lite è®­ç»ƒç»“æœ</h2><p>ä» 26 æ—¥ 0 ç‚¹è·‘åˆ°äº† 29 æ—¥ 18 ç‚¹ï¼Œä¸­é—´å®éªŒå®¤åœç”µè€½è¯¯äº†å‡ ä¸ªå°æ—¶çš„æ—¶é—´ã€‚</p><a id="more"></a><h3 id="å‡†ç¡®åº¦"><a class="header-anchor" href="#å‡†ç¡®åº¦">#</a>å‡†ç¡®åº¦</h3><p>æµ‹è¯•é›† TOP1 å‡†ç¡®åº¦ï¼š</p><center><p><img src="//onns.xyz/blog/image/20201002-acc_test_top1.svg" alt="acc_test_top1"></p></center><p>åœ¨æµ‹è¯•é›†ä¸Šçš„æœ€é«˜å‡†ç¡®ç‡ä¸º<code>48.06%</code>ï¼Œç¬¬<code>42</code>ä¸ª<code>epoch</code>ï¼š</p><center><p><img src="//onns.xyz/blog/image/20201002-acc_test_top1_best.svg" alt="acc_test_top1_best"></p></center><p>æµ‹è¯•é›† TOP5 å‡†ç¡®åº¦ï¼š</p><center><p><img src="//onns.xyz/blog/image/20201002-acc_test_top5.svg" alt="acc_test_top5"></p></center><p>è®­ç»ƒé›† TOP1 å‡†ç¡®åº¦ï¼š</p><center><p><img src="//onns.xyz/blog/image/20201002-acc_train_top1.svg" alt="acc_train_top1"></p></center><p>è®­ç»ƒé›† TOP5 å‡†ç¡®åº¦ï¼š</p><center><p><img src="//onns.xyz/blog/image/20201002-acc_train_top5.svg" alt="acc_train_top5"></p></center><h3 id="loss"><a class="header-anchor" href="#loss">#</a>Loss</h3><p>æµ‹è¯•é›†<code>Loss</code>ï¼š</p><center><p><img src="//onns.xyz/blog/image/20201002-loss_test.svg" alt="loss_test"></p></center><p>è®­ç»ƒé›†<code>Loss</code>ï¼š</p><center><p><img src="//onns.xyz/blog/image/20201002-loss_train.svg" alt="loss_train"></p></center><h3 id="å­¦ä¹ ç‡"><a class="header-anchor" href="#å­¦ä¹ ç‡">#</a>å­¦ä¹ ç‡</h3><center><p><img src="//onns.xyz/blog/image/20201002-lr.svg" alt="lr"></p></center><p>è®ºæ–‡é‡Œçš„<code>batch size</code>ä¸º<code>64</code>ï¼Œå­¦ä¹ ç‡åˆå§‹ä¸º<code>0.01</code>ï¼ŒæŒ‰æ¯”ä¾‹æ”¾ç¼©ã€‚</p><p>æ­¤æ¬¡å®éªŒ<code>batch size</code>ä¸º<code>16</code>ï¼Œåˆå§‹å­¦ä¹ ç‡ä¸º<code>0.0025</code>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¡Œä¸ºè¯†åˆ« </tag>
            
            <tag> action recognition </tag>
            
            <tag> pan </tag>
            
            <tag> pan lite </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‘¨æŠ¥-20201002</title>
      <link href="/blog/2020/10/02/weekly-report-20201002/"/>
      <url>/blog/2020/10/02/weekly-report-20201002/</url>
      
        <content type="html"><![CDATA[<center ondblclick="javascript:document.getElementsByTagName('header')[0].remove();document.getElementsByTagName('header')[0].remove();document.getElementsByTagName('footer')[0].remove();document.getElementsByTagName('footer')[0].remove();document.getElementById('comments').remove();document.getElementById('back-to-top').remove();document.getElementById('post-toc').remove();"><table><thead><tr><th style="text-align:center">2020-10-02</th><th style="text-align:center">å‘¨æŠ¥#06</th><th style="text-align:center">åˆ˜æ½˜</th></tr></thead><tbody></tbody></table></center><a id="more"></a><h1 id="i-task-achieved-last-week"><a class="header-anchor" href="#i-task-achieved-last-week">#</a>I. Task achieved last week</h1><hr><ul><li>ã€ŠTemporal Segment Networks for Action Recognition in Videosã€‹</li><li>è·‘äº† PAN çš„å®éªŒï¼Œå°è¯•æ”¹è¿›æ—¶åºä¿¡æ¯çš„æå–æ–¹æ³•ï¼Œä½†æ˜¯å‡†ç¡®åº¦é™äº† 3%ã€‚</li><li>å‡†å¤‡å¼€é¢˜æŠ¥å‘Šå’Œå¼€é¢˜æŠ¥å‘Š PPTã€‚</li></ul><h1 id="ii-reports"><a class="header-anchor" href="#ii-reports">#</a>II. Reports</h1><hr><h2 id="temporal-segment-networks-for-action-recognition-in-videos"><a class="header-anchor" href="#temporal-segment-networks-for-action-recognition-in-videos">#</a>Temporal Segment Networks for Action Recognition in Videos</h2><p>è¿™ç¯‡æ˜¯æœ€è¿‘ç ”ç©¶çš„è®ºæ–‡çš„èµ·å§‹è®ºæ–‡ï¼Œæå‡ºäº†ä¸€ç§<code>åŸºäºåˆ†ç‰‡é‡‡æ ·</code>çš„ç­–ç•¥ï¼Œä¼ ç»Ÿçš„ä¸è®ºæ˜¯åŒæµæ³•è¿˜æ˜¯ä¸‰ç»´å·ç§¯æ³•ï¼Œå—é™äº GPU èµ„æºå’Œç½‘ç»œç»“æ„çš„é™åˆ¶ï¼Œéƒ½åªèƒ½å¤„ç†ä¸€æ®µæ—¶é—´å†…çš„è§†é¢‘å¸§ï¼Œæ²¡æœ‰åŠæ³•åšåˆ°é•¿æ—¶é—´çš„é‡‡æ ·ã€‚</p><blockquote><p>As discussed in Sec. 1, long-range temporal modeling is important for action understanding in videos. The existing deep architectures such as two-stream ConvNets [1] and 3D convolutional networks [16] are designed to operate on a single frame or a stack of frames (e.g., 16 frames) with limited temporal durations. Therefore, these structures lack capacity of incorporating long-range temporal information of videos into the learning of action models.</p></blockquote><p>è¦è§£å†³è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼Œæœ‰ä¸¤ç§æ–¹å‘ï¼Œç¬¬ä¸€ç§æ˜¯<code>stacking more consecutive frames</code>ï¼Œç¬¬äºŒç§æ˜¯<code>sampling more frames at a fixed rate</code>ï¼Œå³è¦ä¹ˆå †å æ›´å¤šçš„å¸§æ•°ï¼Œè¦ä¹ˆè¿›è¡Œå±€éƒ¨é‡‡æ ·ã€‚</p><p>ä½†æ˜¯å‰è€…ä¼šé€ æˆè®¡ç®—å¤æ‚åº¦æ€¥å‰§å‡é«˜ï¼Œåè€…ä¼šå¯¼è‡´æ¨¡å‹ä¸èƒ½å¾ˆå¥½åœ°è¡¨è¾¾å®Œæ•´çš„ä¿¡æ¯ã€‚</p><p>ä¸æ­¤åŒæ—¶ï¼Œä½œè€…æ³¨æ„åˆ°ï¼Œå…¶å®è¿ç»­çš„å¤šå¸§ä¸­å…¶å®å†…å®¹å˜æ¢å¾ˆå°‘ï¼Œæ‰€ä»¥æå‡ºäº†ä¸€ç§<code>segment based sampling</code>çš„é‡‡æ ·ç­–ç•¥ã€‚</p><blockquote><p>although the frames are densely recorded in the videos, the content changes relatively slowly.</p></blockquote><p>è¿™ä¸ªç­–ç•¥çš„æ€æƒ³å…¶å®è¿˜è›®ç®€å•çš„ï¼Œçœ‹å›¾å°±æ‡‚äº†ï¼š</p><center><p><img src="//onns.xyz/blog/image/20201002-1.png" alt="ç½‘ç»œç»“æ„ç¤ºæ„å›¾"></p></center><p>æœ¬è´¨ä¸Šå°±æ˜¯å…ˆæŠŠè§†é¢‘å‡åˆ†æˆç­‰ä»½ï¼Œç„¶åæ¯ä¸€ä»½é‡Œé€‰å–ä¸€ä¸ª<code>RGB</code>ã€<code>Optical Flow</code>æˆ–<code>RGB Differences</code>ä¹‹ç±»çš„æ¥ä»£è¡¨è¿™ä¸€ä¸ªç‰‡æ®µçš„ä¿¡æ¯ï¼Œç„¶åæå–<code>è¿™ä¸€ç‰‡</code>çš„ä¿¡æ¯ï¼ˆCNNï¼‰è¿›è¡Œä¿¡æ¯èåˆã€‚</p><h3 id="èåˆå‡½æ•°"><a class="header-anchor" href="#èåˆå‡½æ•°">#</a>èåˆå‡½æ•°</h3><p>æ‰€ä»¥æ•´ä¸ªç½‘ç»œå…¶å®å°±æ˜¯æœ‰ä¸‰æ®µï¼š<code>åˆ†æ®µç‰¹å¾è¡¨ç¤º</code>ã€<code>åˆ†æ®µä¿¡æ¯æå–</code>å’Œ<code>å¤šæ®µä¿¡æ¯èåˆ</code>ã€‚</p><p>ç°åœ¨å¾€å›çœ‹å»ï¼Œåˆ†æ®µç‰¹å¾è¡¨ç¤ºå°±æ˜¯å°†å¤šå¸§å›¾åƒçš„ä¿¡æ¯è¿›è¡Œè½¬åŒ–ï¼Œè½¬åŒ–æˆä¸€ä¸ªå¯ä»¥ç”¨æ¥è®¡ç®—çš„æ–¹æ³•ï¼Œå³å‰é¢æ‰€è¯´çš„<code>RGB</code>ã€<code>Optical Flow</code>æˆ–<code>RGB Differences</code>ã€‚</p><p>åˆ†æ®µä¿¡æ¯æå–æ˜¯å±äºéª¨å¹²ç½‘ç»œçš„äº‹æƒ…ï¼Œæˆ‘ä»¬ä¹Ÿæ— æ³•è¿›è¡Œä¿®æ”¹ã€‚</p><p>æ•…æœ€é‡è¦çš„éƒ¨åˆ†å°±æ˜¯ï¼Œå¦‚æœå°†<code>å¤šä¸ªåˆ†æ®µ</code>æ‰€æå–åˆ°çš„ä¿¡æ¯è¿›è¡Œèåˆï¼Œè¿™ä¸ªå¯¹äºæ¨¡å‹çš„è¡¨è¾¾èƒ½åŠ›æ¥è¯´ï¼Œæ˜¯ååˆ†é‡è¦çš„ã€‚</p><blockquote><p>As analyzed above, the consensus (aggregation) function is an important component in our temporal segment network framework.</p></blockquote><p>è®ºæ–‡ä¸­ç»™å‡ºäº†äº”ç§èåˆæ–¹æ³•ï¼š<code>max pooling</code>ã€<code>average pooling</code>ã€<code>top-K pooling</code>ã€<code>weighted average</code>ã€<code>attention weighting</code>ã€‚</p><p>å‰ä¸¤ä¸ªå°±ä¸è§£é‡Šäº†ï¼Œç¬¬ä¸‰ä¸ªç›¸å½“äºä¸å–æœ€å¤§çš„ï¼Œè€Œæ˜¯å–æœ€å¤§çš„<code>K</code>ä¸ªè¿›è¡Œå¹³å‡ï¼Œ<code>k=1</code>å³<code>max pooling</code>ï¼Œ<code>k=[åˆ†ç‰‡æ•°]</code>å³<code>average pooling</code>ã€‚</p><p>ç¬¬å››ä¸ªå’Œç¬¬äº”ä¸ªç›¸å½“äºåœ¨å¹³å‡æ± åŒ–çš„åŸºç¡€ä¸Šç»™æ¯ä¸ªåˆ†ç‰‡è¿›è¡Œäº†åŠ æƒã€‚</p><p>ï¼ˆPAN çš„åˆ›æ–°ä¹‹ä¸€å°±æ˜¯æå‡ºäº†ä¸€ç§æ–°çš„åŠ æƒæ–¹å¼ï¼‰</p><h2 id="pan-lite-è®­ç»ƒç»“æœ"><a class="header-anchor" href="#pan-lite-è®­ç»ƒç»“æœ">#</a>PAN Lite è®­ç»ƒç»“æœ</h2><p>ä» 26 æ—¥ 0 ç‚¹è·‘åˆ°äº† 29 æ—¥ 18 ç‚¹ï¼Œä¸­é—´å®éªŒå®¤åœç”µè€½è¯¯äº†å‡ ä¸ªå°æ—¶çš„æ—¶é—´ã€‚</p><h3 id="å‡†ç¡®åº¦"><a class="header-anchor" href="#å‡†ç¡®åº¦">#</a>å‡†ç¡®åº¦</h3><p>æµ‹è¯•é›† TOP1 å‡†ç¡®åº¦ï¼š</p><center><p><img src="//onns.xyz/blog/image/20201002-acc_test_top1.svg" alt="acc_test_top1"></p></center><p>åœ¨æµ‹è¯•é›†ä¸Šçš„æœ€é«˜å‡†ç¡®ç‡ä¸º<code>48.06%</code>ï¼Œç¬¬<code>42</code>ä¸ª<code>epoch</code>ï¼š</p><center><p><img src="//onns.xyz/blog/image/20201002-acc_test_top1_best.svg" alt="acc_test_top1_best"></p></center><p>æµ‹è¯•é›† TOP5 å‡†ç¡®åº¦ï¼š</p><center><p><img src="//onns.xyz/blog/image/20201002-acc_test_top5.svg" alt="acc_test_top5"></p></center><p>è®­ç»ƒé›† TOP1 å‡†ç¡®åº¦ï¼š</p><center><p><img src="//onns.xyz/blog/image/20201002-acc_train_top1.svg" alt="acc_train_top1"></p></center><p>è®­ç»ƒé›† TOP5 å‡†ç¡®åº¦ï¼š</p><center><p><img src="//onns.xyz/blog/image/20201002-acc_train_top5.svg" alt="acc_train_top5"></p></center><h3 id="loss"><a class="header-anchor" href="#loss">#</a>Loss</h3><p>æµ‹è¯•é›†<code>Loss</code>ï¼š</p><center><p><img src="//onns.xyz/blog/image/20201002-loss_test.svg" alt="loss_test"></p></center><p>è®­ç»ƒé›†<code>Loss</code>ï¼š</p><center><p><img src="//onns.xyz/blog/image/20201002-loss_train.svg" alt="loss_train"></p></center><h3 id="å­¦ä¹ ç‡"><a class="header-anchor" href="#å­¦ä¹ ç‡">#</a>å­¦ä¹ ç‡</h3><center><p><img src="//onns.xyz/blog/image/20201002-lr.svg" alt="lr"></p></center><p>è®ºæ–‡é‡Œçš„<code>batch size</code>ä¸º<code>64</code>ï¼Œå­¦ä¹ ç‡åˆå§‹ä¸º<code>0.01</code>ï¼ŒæŒ‰æ¯”ä¾‹æ”¾ç¼©ã€‚</p><p>æ­¤æ¬¡å®éªŒ<code>batch size</code>ä¸º<code>16</code>ï¼Œåˆå§‹å­¦ä¹ ç‡ä¸º<code>0.0025</code>ã€‚</p><h1 id="iii-plan-for-this-week"><a class="header-anchor" href="#iii-plan-for-this-week">#</a>III. Plan for this week</h1><hr><ul><li>çœ‹è®ºæ–‡</li><li>å­¦ä¹ <code>BERT</code>ç›¸å…³çš„åŸºç¡€çŸ¥è¯†ï¼Œå› ä¸º BERT æ˜¯ç”¨æ¥æ•´åˆä¸Šä¸‹æ–‡ä¿¡æ¯çš„ï¼Œä¸çŸ¥é“èƒ½ä¸èƒ½ç”¨åˆ°æ—¶åºä¿¡æ¯çš„èåˆä¸Šæ¥ï¼Œå› ä¸ºæ—¶åºä¿¡æ¯å¾ˆå¤§ç¨‹åº¦ä¸Šä¹Ÿæ˜¯ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚</li><li>å¼€å§‹å†™æ¯•ä¸šè®ºæ–‡çš„ç»¼è¿°éƒ¨åˆ†</li><li>ç»§ç»­æ”¹è¿›ç°æœ‰ä»£ç </li></ul>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lab406 </tag>
            
            <tag> weekly report </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¦ç”¨Acrobatçš„è‡ªåŠ¨æ›´æ–°</title>
      <link href="/blog/2020/10/02/disable-auto-update-in-acrobat/"/>
      <url>/blog/2020/10/02/disable-auto-update-in-acrobat/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘å…¶å®åšäº†å¾ˆå¤šäº‹ï¼Œåªæ˜¯çœŸçš„æ²¡æœ‰æ—¶é—´æ¥å†™åšå®¢è®°å½•è¿™äº›äº† ğŸ˜” ï¼Œæ¯•ä¸šçœŸçš„å¥½éš¾ ğŸ˜­ ã€‚<br>å¸Œæœ›ä»¥åå¯ä»¥å‘¨æ›´æˆ–ä¸‰æ—¥ä¸€æ›´å§ï½è€Œä¸”æ›´è‡ªå·±çš„ä¸œè¥¿ã€‚</p><a id="more"></a><h2 id="ç¦ç”¨-acrobat-çš„è‡ªåŠ¨æ›´æ–°"><a class="header-anchor" href="#ç¦ç”¨-acrobat-çš„è‡ªåŠ¨æ›´æ–°">#</a>ç¦ç”¨ Acrobat çš„è‡ªåŠ¨æ›´æ–°</h2><p>æœ¬æ¥æˆ‘åœ¨<code>Creative Cloud</code>é‡Œéƒ½å·²ç»ç¦ç”¨è‡ªåŠ¨æ›´æ–°äº†ï¼Œä½†æ˜¯<code>Acrobat</code>è¿˜æ˜¯è‡ªåŠ¨å¼ºåˆ¶æ›´æ–°ï¼Œç ´è§£éƒ½æ˜¯æœ‰ä¸€ä¸ªæ—¶å»¶çš„ï¼Œæ‰€ä»¥å¿…é¡»æƒ³åŠæ³•ç¦æ‰è‡ªåŠ¨æ›´æ–°ã€‚</p><p><code>System Preferences</code> -&gt; <code>Security &amp; Privacy</code> -&gt; <code>Firewall</code>ï¼š</p><p>æ‰“å¼€<code>é˜²ç«å¢™</code>ï¼Œç„¶åè®¾ç½®<code>é˜²ç«å¢™é€‰é¡¹</code>ï¼ŒæŠŠ<code>Acrobat</code>çš„ç›¸å…³å†…å®¹å…¨æ‹‰è¿›æ¥ï¼Œç„¶å<code>Block incoming connections</code>ã€‚</p><center><p><img src="//onns.xyz/blog/image/20201002-1.jpg" alt="ç¤ºæ„å›¾"></p></center><p>ä¸è¿‡å¥½åƒå¤±æ•ˆäº†ã€‚ã€‚ã€‚è¯•è¯•çœ‹å§= =</p><h2 id="æ–°æ–¹æ³•"><a class="header-anchor" href="#æ–°æ–¹æ³•">#</a>æ–°æ–¹æ³•</h2><p>å‚ç…§ã€Š<a href="https://tieba.baidu.com/p/6852244355" target="_blank" rel="noopener">Adobe Acrobat DC 2020 for mac è‡ªåŠ¨æ›´æ–°ç‚¹ä¸æ‰</a>ã€‹ï¼Œå…ˆå¸è½½æ‰ç ´è§£å¥½çš„<code>Acrobat</code>ï¼Œç„¶åé‡æ–°ä¸‹ä¸€ä¸ªæ­£ç‰ˆçš„ï¼Œå…ˆä¸ç ´è§£ï¼Œç„¶åå¿«é€Ÿè¿›åˆ°è½¯ä»¶é‡ŒæŠŠè‡ªåŠ¨æ›´æ–°å…³æ‰ï¼Œå†ç ´è§£ï¼Œåæ­£<code>Acrobat</code>é‡Œçš„è‡ªåŠ¨æ›´æ–°å·²ç»è¢«å…³äº†ï¼Œä¹‹å‰éƒ½æ˜¯å…³ä¸æ‰çš„ï¼Œä¸”çœ‹çœ‹æ•ˆæœï¼</p><h2 id="adobe-zii-å¼€å¯"><a class="header-anchor" href="#adobe-zii-å¼€å¯">#</a>Adobe Zii å¼€å¯</h2><ol><li>å…ˆæŠŠ<code>Adobe Zii</code>ä»é™„åŠ ç£ç›˜ä¸­æ‹–å‡ºæ¥ï¼ˆä¸ç„¶åªæœ‰åªè¯»æƒé™ï¼‰ï¼Œç„¶åéšä¾¿æ”¾åœ¨å“ªé‡Œã€‚</li><li>æ‰“å¼€å‘½ä»¤è¡Œå·¥å…·ï¼Œé”®å…¥ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xattr -rd com.apple.quarantine [è¿™ä¸ªæ˜¯é‚£ä¸ªappçš„ä½ç½®ï¼Œå¯ä»¥ç›´æ¥ä»Finderé‡Œæ‹–è¿›æ¥å°±è¡Œ]</span><br></pre></td></tr></table></figure></li><li>ç›´æ¥æ‰“å¼€å³å¯ã€‚</li></ol><h2 id="ç›¸å…³é“¾æ¥"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥">#</a>ç›¸å…³é“¾æ¥</h2><ul><li><a href="https://www.zhihu.com/question/270067688/answer/1127977865" target="_blank" rel="noopener">macOS Adobe Acrobat Pro DC 2018.009.20044 å¦‚ä½•å–æ¶ˆè‡ªåŠ¨æ›´æ–°ï¼Ÿ</a></li><li><a href="https://www.adobezii.com/adobe-zii-cant-be-opened-catalina/" target="_blank" rel="noopener">Adobe Zii Canâ€™t be opened Catalina 2020 Solved</a></li><li><a href="https://blog.csdn.net/ly869915532/article/details/107739591" target="_blank" rel="noopener">é˜»æ­¢ Mac ç‰ˆ Adobe Acrobat Pro DC çš„é¡½å›ºçš„è‡ªåŠ¨æ›´æ–°</a></li><li><a href="https://tieba.baidu.com/p/6852244355" target="_blank" rel="noopener">Adobe Acrobat DC 2020 for mac è‡ªåŠ¨æ›´æ–°ç‚¹ä¸æ‰</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> adobe </tag>
            
            <tag> acrobat </tag>
            
            <tag> macos </tag>
            
            <tag> adobe zii </tag>
            
            <tag> creative cloud </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¦ç”¨Acrobatçš„è‡ªåŠ¨æ›´æ–°</title>
      <link href="/blog/2020/10/02/update-leancloud-config/"/>
      <url>/blog/2020/10/02/update-leancloud-config/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘å…¶å®åšäº†å¾ˆå¤šäº‹ï¼Œåªæ˜¯çœŸçš„æ²¡æœ‰æ—¶é—´æ¥å†™åšå®¢è®°å½•è¿™äº›äº† ğŸ˜” ï¼Œæ¯•ä¸šçœŸçš„å¥½éš¾ ğŸ˜­ ã€‚<br>å¸Œæœ›ä»¥åå¯ä»¥å‘¨æ›´æˆ–ä¸‰æ—¥ä¸€æ›´å§ï½è€Œä¸”æ›´è‡ªå·±çš„ä¸œè¥¿ã€‚</p><a id="more"></a>]]></content>
      
      
      <categories>
          
          <category> software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> adobe </tag>
            
            <tag> acrobat </tag>
            
            <tag> macos </tag>
            
            <tag> adobe zii </tag>
            
            <tag> creative cloud </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Temporal Segment Networks for Action Recognition in Videos</title>
      <link href="/blog/2020/09/28/temporal-segment-networks-for-action-recognition-in-videos/"/>
      <url>/blog/2020/09/28/temporal-segment-networks-for-action-recognition-in-videos/</url>
      
        <content type="html"><![CDATA[<h2 id="temporal-segment-networks-for-action-recognition-in-videos"><a class="header-anchor" href="#temporal-segment-networks-for-action-recognition-in-videos">#</a>Temporal Segment Networks for Action Recognition in Videos</h2><p>è¿™ç¯‡æ˜¯æœ€è¿‘ç ”ç©¶çš„è®ºæ–‡çš„èµ·å§‹è®ºæ–‡ï¼Œæå‡ºäº†ä¸€ç§<code>åŸºäºåˆ†ç‰‡é‡‡æ ·</code>çš„ç­–ç•¥ï¼Œä¼ ç»Ÿçš„ä¸è®ºæ˜¯åŒæµæ³•è¿˜æ˜¯ä¸‰ç»´å·ç§¯æ³•ï¼Œå—é™äº GPU èµ„æºå’Œç½‘ç»œç»“æ„çš„é™åˆ¶ï¼Œéƒ½åªèƒ½å¤„ç†ä¸€æ®µæ—¶é—´å†…çš„è§†é¢‘å¸§ï¼Œæ²¡æœ‰åŠæ³•åšåˆ°é•¿æ—¶é—´çš„é‡‡æ ·ã€‚</p><blockquote><p>As discussed in Sec. 1, long-range temporal modeling is important for action understanding in videos. The existing deep architectures such as two-stream ConvNets [1] and 3D convolutional networks [16] are designed to operate on a single frame or a stack of frames (e.g., 16 frames) with limited temporal durations. Therefore, these structures lack capacity of incorporating long-range temporal information of videos into the learning of action models.</p></blockquote><p>è¦è§£å†³è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼Œæœ‰ä¸¤ç§æ–¹å‘ï¼Œç¬¬ä¸€ç§æ˜¯<code>stacking more consecutive frames</code>ï¼Œç¬¬äºŒç§æ˜¯<code>sampling more frames at a fixed rate</code>ï¼Œå³è¦ä¹ˆå †å æ›´å¤šçš„å¸§æ•°ï¼Œè¦ä¹ˆè¿›è¡Œå±€éƒ¨é‡‡æ ·ã€‚</p><p>ä½†æ˜¯å‰è€…ä¼šé€ æˆè®¡ç®—å¤æ‚åº¦æ€¥å‰§å‡é«˜ï¼Œåè€…ä¼šå¯¼è‡´æ¨¡å‹ä¸èƒ½å¾ˆå¥½åœ°è¡¨è¾¾å®Œæ•´çš„ä¿¡æ¯ã€‚</p><p>ä¸æ­¤åŒæ—¶ï¼Œä½œè€…æ³¨æ„åˆ°ï¼Œå…¶å®è¿ç»­çš„å¤šå¸§ä¸­å…¶å®å†…å®¹å˜æ¢å¾ˆå°‘ï¼Œæ‰€ä»¥æå‡ºäº†ä¸€ç§<code>segment based sampling</code>çš„é‡‡æ ·ç­–ç•¥ã€‚</p><blockquote><p>although the frames are densely recorded in the videos, the content changes relatively slowly.</p></blockquote><p>è¿™ä¸ªç­–ç•¥çš„æ€æƒ³å…¶å®è¿˜è›®ç®€å•çš„ï¼Œçœ‹å›¾å°±æ‡‚äº†ï¼š</p><center><p><img src="//onns.xyz/blog/image/20201002-1.png" alt="ç½‘ç»œç»“æ„ç¤ºæ„å›¾"></p></center><p>æœ¬è´¨ä¸Šå°±æ˜¯å…ˆæŠŠè§†é¢‘å‡åˆ†æˆç­‰ä»½ï¼Œç„¶åæ¯ä¸€ä»½é‡Œé€‰å–ä¸€ä¸ª<code>RGB</code>ã€<code>Optical Flow</code>æˆ–<code>RGB Differences</code>ä¹‹ç±»çš„æ¥ä»£è¡¨è¿™ä¸€ä¸ªç‰‡æ®µçš„ä¿¡æ¯ï¼Œç„¶åæå–<code>è¿™ä¸€ç‰‡</code>çš„ä¿¡æ¯ï¼ˆCNNï¼‰è¿›è¡Œä¿¡æ¯èåˆã€‚</p><h3 id="èåˆå‡½æ•°"><a class="header-anchor" href="#èåˆå‡½æ•°">#</a>èåˆå‡½æ•°</h3><p>æ‰€ä»¥æ•´ä¸ªç½‘ç»œå…¶å®å°±æ˜¯æœ‰ä¸‰æ®µï¼š<code>åˆ†æ®µç‰¹å¾è¡¨ç¤º</code>ã€<code>åˆ†æ®µä¿¡æ¯æå–</code>å’Œ<code>å¤šæ®µä¿¡æ¯èåˆ</code>ã€‚</p><p>ç°åœ¨å¾€å›çœ‹å»ï¼Œåˆ†æ®µç‰¹å¾è¡¨ç¤ºå°±æ˜¯å°†å¤šå¸§å›¾åƒçš„ä¿¡æ¯è¿›è¡Œè½¬åŒ–ï¼Œè½¬åŒ–æˆä¸€ä¸ªå¯ä»¥ç”¨æ¥è®¡ç®—çš„æ–¹æ³•ï¼Œå³å‰é¢æ‰€è¯´çš„<code>RGB</code>ã€<code>Optical Flow</code>æˆ–<code>RGB Differences</code>ã€‚</p><p>åˆ†æ®µä¿¡æ¯æå–æ˜¯å±äºéª¨å¹²ç½‘ç»œçš„äº‹æƒ…ï¼Œæˆ‘ä»¬ä¹Ÿæ— æ³•è¿›è¡Œä¿®æ”¹ã€‚</p><p>æ•…æœ€é‡è¦çš„éƒ¨åˆ†å°±æ˜¯ï¼Œå¦‚æœå°†<code>å¤šä¸ªåˆ†æ®µ</code>æ‰€æå–åˆ°çš„ä¿¡æ¯è¿›è¡Œèåˆï¼Œè¿™ä¸ªå¯¹äºæ¨¡å‹çš„è¡¨è¾¾èƒ½åŠ›æ¥è¯´ï¼Œæ˜¯ååˆ†é‡è¦çš„ã€‚</p><blockquote><p>As analyzed above, the consensus (aggregation) function is an important component in our temporal segment network framework.</p></blockquote><p>è®ºæ–‡ä¸­ç»™å‡ºäº†äº”ç§èåˆæ–¹æ³•ï¼š<code>max pooling</code>ã€<code>average pooling</code>ã€<code>top-K pooling</code>ã€<code>weighted average</code>ã€<code>attention weighting</code>ã€‚</p><p>å‰ä¸¤ä¸ªå°±ä¸è§£é‡Šäº†ï¼Œç¬¬ä¸‰ä¸ªç›¸å½“äºä¸å–æœ€å¤§çš„ï¼Œè€Œæ˜¯å–æœ€å¤§çš„<code>K</code>ä¸ªè¿›è¡Œå¹³å‡ï¼Œ<code>k=1</code>å³<code>max pooling</code>ï¼Œ<code>k=[åˆ†ç‰‡æ•°]</code>å³<code>average pooling</code>ã€‚</p><p>ç¬¬å››ä¸ªå’Œç¬¬äº”ä¸ªç›¸å½“äºåœ¨å¹³å‡æ± åŒ–çš„åŸºç¡€ä¸Šç»™æ¯ä¸ªåˆ†ç‰‡è¿›è¡Œäº†åŠ æƒã€‚</p><p>ï¼ˆPAN çš„åˆ›æ–°ä¹‹ä¸€å°±æ˜¯æå‡ºäº†ä¸€ç§æ–°çš„åŠ æƒæ–¹å¼ï¼‰</p><h3 id="ç›¸å…³é“¾æ¥"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥">#</a>ç›¸å…³é“¾æ¥</h3><ul><li><a href="https://blog.csdn.net/u014380165/article/details/79029309" target="_blank" rel="noopener">TSN(Temporal Segment Networks)ç®—æ³•ç¬”è®°</a></li><li><a href="https://blog.csdn.net/Hia_Hia_Hia/article/details/82979606" target="_blank" rel="noopener">Temporal Segment Networks for Action Recognition in Videos è®ºæ–‡é˜…è¯»ç¬”è®°</a></li><li><a href="https://zhuanlan.zhihu.com/p/61630950?utm_source=wechat_session" target="_blank" rel="noopener">Temporal Segment Networks(TSN)æ·±åº¦è¡Œä¸ºè¯†åˆ«</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¡Œä¸ºè¯†åˆ« </tag>
            
            <tag> action recognition </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MMTM Multimodal Transfer Module for CNN Fusion</title>
      <link href="/blog/2020/09/23/mmtm-multimodal-transfer-module-for-cnn-fusion/"/>
      <url>/blog/2020/09/23/mmtm-multimodal-transfer-module-for-cnn-fusion/</url>
      
        <content type="html"><![CDATA[<blockquote><p>In general, fusion can be achieved at the input level (i.e. early fusion), decision level (i.e. late fusion), or intermediately [8]. Although studies in neuroscience [9, 10] and machine learning [1, 3] suggest that mid-level feature fusion could benefit learning, late fusion is still the predominant method utilized for mulitmodal learning [11â€“13]. This is mostly due to practical reasons.</p></blockquote><blockquote><p>Another reason for the popularity of late fusion is that the architecture of each unimodal stream is carefully designed over years to achieve state-of-the-art performance for each modality.</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¡Œä¸ºè¯†åˆ« </tag>
            
            <tag> action recognition </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‘¨æŠ¥-20200918</title>
      <link href="/blog/2020/09/18/weekly-report-20200918/"/>
      <url>/blog/2020/09/18/weekly-report-20200918/</url>
      
        <content type="html"><![CDATA[<center><table><thead><tr><th style="text-align:center">2020-09-18</th><th style="text-align:center">å‘¨æŠ¥#05</th><th style="text-align:center">åˆ˜æ½˜</th></tr></thead><tbody></tbody></table></center><a id="more"></a><h2 id="i-task-achieved-last-week"><a class="header-anchor" href="#i-task-achieved-last-week">#</a>I. Task achieved last week</h2><hr><ul><li>ã€ŠLate Temporal Modeling in 3D CNN Architectures with BERT for Action Recognitionã€‹</li><li>ã€ŠGFNET A LIGHTWEIGHT GROUP FRAME NETWORK FOR EFFICIENT HUMAN ACTION RECOGNITIONã€‹</li><li>çœ‹ PAN çš„æºç </li></ul><h2 id="ii-reports"><a class="header-anchor" href="#ii-reports">#</a>II. Reports</h2><hr><h3 id="late-temporal-modeling-in-3d-cnn-architectures-with-bert-for-action-recognition"><a class="header-anchor" href="#late-temporal-modeling-in-3d-cnn-architectures-with-bert-for-action-recognition">#</a>Late Temporal Modeling in 3D CNN Architectures with BERT for Action Recognition</h3><p><code>HMDB51</code>å’Œ<code>UCF101</code>çš„<code>top-1</code>è¾¾åˆ°ç°é˜¶æ®µæœ€å¥½çš„æ°´å¹³ï¼Œåˆ†åˆ«ä¸º<code>85.10%</code>å’Œ<code>98.69%</code>ã€‚</p><p>æ—¶åºå…¨å±€å¹³å‡æ± åŒ–é˜»ç¢äº†æ—¶åºä¿¡æ¯çš„æ›´ä¸°å¯Œè¡¨è¾¾ã€‚è™½ç„¶æ„Ÿå—é‡å¯èƒ½åˆ†å¸ƒåœ¨æ•´ä¸ªè§†é¢‘åˆ‡ç‰‡ä¸­ï¼Œä½†æ˜¯å¯¹äºä¸åŒçš„åˆ‡ç‰‡ï¼Œå®ƒæ‰€èƒ½æä¾›çš„ä¿¡æ¯æ˜¯æœä»é«˜æ–¯åˆ†å¸ƒçš„ï¼Œç®€å•çš„å¹³å‡å¯èƒ½ä¼šæŸå¤±ä¿¡æ¯ã€‚</p><blockquote><p>temporal global average pooling (TGAP) layer is used at the end of all 3D CNN architectures hinders the richness of final temporal information.<br>the receptive field might cover the whole clip, the effective receptive field has a Gaussian distribution</p></blockquote><h3 id="ç›¸å…³é“¾æ¥"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥">#</a>ç›¸å…³é“¾æ¥</h3><ul><li><a href="https://github.com/artest08/LateTemporalModeling3DCNN" target="_blank" rel="noopener">https://github.com/artest08/LateTemporalModeling3DCNN</a></li></ul><h3 id="gfnet-a-lightweight-group-frame-network-for-efficient-human-action-recognition"><a class="header-anchor" href="#gfnet-a-lightweight-group-frame-network-for-efficient-human-action-recognition">#</a>GFNET A LIGHTWEIGHT GROUP FRAME NETWORK FOR EFFICIENT HUMAN ACTION RECOGNITION</h3><p>ä¸ºäº†è§£å†³ç°æœ‰çš„è¡Œä¸ºè¯†åˆ«æ–¹æ³•<code>è®¡ç®—é‡å¤§</code>ã€<code>å‚æ•°å¤š</code>çš„é—®é¢˜ï¼Œä½œè€…æå‡ºäº†<code>GFNet</code>ã€‚</p><blockquote><p>To handle these issues, we propose a lightweight neural network called Group Frame Network (GFNet).</p></blockquote><p>GFNet é€šè¿‡å¸§çº§åˆ†è§£ï¼Œä»¥æå°çš„ä»£ä»·æå–æ¯ä¸€å¸§çš„ç‰¹å¾ã€‚</p><blockquote><p>GFNet adds frame-level decomposition to extract features of each frame at a minuscule cost.</p></blockquote><p>è®¾è®¡äº†ä¸¤ä¸ªæ ¸å¿ƒç»„ä»¶ï¼Œèƒ½å¤Ÿä»…ä»<code>RGBå›¾åƒ</code>ä¸­æå–æ—¶ç©ºä¿¡æ¯ï¼Œè€Œä¸éœ€è¦å€ŸåŠ©<code>å…‰æµ</code>æˆ–<code>multi-scale testing</code>ç­‰ã€‚</p><blockquote><p>There are two core components: <code>Group Temporal Module</code> (GTM) and <code>Group Spatial Module</code> (GSM). These two modules enable GFNet to obtain temporal-spatial information only from RGB images.</p></blockquote><p>ä¸ºäº†è¯æ˜æ¨¡å‹çš„æœ‰æ•ˆæ€§ï¼Œä»–ä»¬æ²¡æœ‰ä½¿ç”¨é¢„è®­ç»ƒç­–ç•¥ã€‚</p><blockquote><p>To verify the validity of the model, no pre-training strategy is used in our experiments.</p></blockquote><p>ç½‘ç»œçš„è¾“å…¥æ˜¯<code>ä¸€å®šæ•°é‡</code>çš„<code>è§†é¢‘å¸§</code>ï¼Œå¯¹è§†é¢‘è¿›è¡Œåˆ†æ®µé‡‡æ ·å¾—åˆ°ç»“æœã€‚</p><blockquote><p>The entire video with a variable number of frames is provided as the input of the network. Through an average sampling strategy, the video is divided into N equal-length segments and only one frame is selected from each segment. Due to the repeatability of adjacent frames, this sampling strategy can reduce inter-frame redundancy while preserving long-temporal information.</p></blockquote><p>K ä¸ªå±‚åŒæ—¶è¾“å…¥ç½‘ç»œè·å–æ—¶é—´ä¿¡æ¯ã€‚</p><blockquote><p>The first part is a feature extraction layer consisting of K separated branches. The sampled frames are simultaneously fed into the network to maintain the temporal information among these frames.</p></blockquote><p>å„è‡ªçš„åˆ†æ”¯ç‹¬ç«‹è®¡ç®—è·å¾—ç©ºé—´ä¿¡æ¯ã€‚</p><blockquote><p>In the feature extraction layer, each frame is learned independently using a network branch to get its spatial features.</p></blockquote><p>æ²¡å¤ªç†è§£ã€‚</p><blockquote><p>all the sampled frames are stacked by channel-wise convolution.<br>It means that the input channel of GFNet is 3N when using RGB images as input.</p></blockquote><p>ç”±äºæ®‹å·®ç½‘ç»œå…·æœ‰é«˜åº¦çš„æ³›åŒ–èƒ½åŠ›å’Œæ€§èƒ½ï¼Œæ‰€ä»¥åç»­çš„å—é€‰æ‹©é«˜åº¦æ¨¡å—åŒ–æ®‹å·®å•å…ƒã€‚</p><blockquote><p>Owing to the impressive performance and strong generalization abil- ity of residual architecture, the block is based on the highly modularized residual unit.</p></blockquote><p>è¿™å¥è¯æ²¡å¤ªç†è§£ã€‚</p><blockquote><p>Considering the extraneous motion and identical texture features in sampled frames, GFNet decomposes frames and reduces the number of channels for each frame to lessen spatial redundancy. To be specific, the number of channels is equally divided among branches. It means that only a small number of channels are used per frame.</p></blockquote><h3 id="group-temporal-module"><a class="header-anchor" href="#group-temporal-module">#</a>Group Temporal Module</h3><p>å› ä¸ºæ¯ä¸ªåˆ†æ”¯éƒ½æ˜¯å•ç‹¬è®¡ç®—çš„ï¼Œæ‰€ä»¥åŠ¿å¿…ä¼šé™ä½å‡†ç¡®ç‡ï¼ˆæ²¡æœ‰æå–å¸§é—´çš„è”ç³»ï¼‰ï¼Œæ‰€ä»¥æå‡ºäº†<code>GTM</code>æ¨¡å—ã€‚</p><blockquote><p>To leverage the inter-frame information effectively and better strengthen temporal relationships, GTM is proposed to efficiently overcome the side effects brought by the separated branch.</p></blockquote><blockquote><p>GTM consists of a translation layer and a 3D convolution layer.</p></blockquote><blockquote><p>The translation layer makes the replacement of the data dimension. It includes the channel merger and the channel separation, which achieves the conversion of the feature map from four-dimensional data to five-dimensional data.</p></blockquote><h3 id="group-spatial-module"><a class="header-anchor" href="#group-spatial-module">#</a>Group Spatial Module</h3><p>For the convolution layer of ResNet50, the computational cost is closely related to the number of channels. Motivated by this, a novel module called GSM is designed to significantly decrease the number of parameters and computational efforts.</p><p>GSM ä¹Ÿæ˜¯é€šè¿‡åªå–çº¹ç†æ¥æœ€å°åŒ–è®¡ç®—æˆæœ¬ã€‚</p><blockquote><p>Because of the similarity among frames, the texture information is repetitive. Meanwhile, irrelevant motion inside frames increases the intra-frame redundancy. Aiming at minimizing the interference of redundant information, GSM diminishes the number of channels to extract features per frame.</p></blockquote><h2 id="iii-plan-for-this-week"><a class="header-anchor" href="#iii-plan-for-this-week">#</a>III. Plan for this week</h2><hr><ul><li>çœ‹è®ºæ–‡</li><li>çœ‹ä»£ç </li></ul>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lab406 </tag>
            
            <tag> weekly report </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaçš„ThreadLocalç±»</title>
      <link href="/blog/2020/09/16/java-threadlocal/"/>
      <url>/blog/2020/09/16/java-threadlocal/</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> xyz.onns.juc;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> Onns</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/9/16 9:06 PM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Website</span> https://onns.xyz/blog/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadLocalTest</span> </span>&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> ThreadLocal&lt;String&gt; stringThreadLocal = <span class="keyword">new</span> ThreadLocal&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">Thread thread = Thread.currentThread();</span><br><span class="line"><span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">System.out.println(Thread.currentThread().getName() + <span class="string">": "</span>);</span><br><span class="line">stringThreadLocal.set(<span class="string">"This is a"</span>);</span><br><span class="line">System.out.println(stringThreadLocal.get());</span><br><span class="line">stringThreadLocal.remove();</span><br><span class="line">System.out.println(stringThreadLocal.get());</span><br><span class="line">&#125;, <span class="string">"A"</span>).start();</span><br><span class="line"><span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">System.out.println(Thread.currentThread().getName() + <span class="string">": "</span>);</span><br><span class="line">stringThreadLocal.set(<span class="string">"This is b"</span>);</span><br><span class="line">System.out.println(stringThreadLocal.get());</span><br><span class="line">stringThreadLocal.remove();</span><br><span class="line">System.out.println(stringThreadLocal.get());</span><br><span class="line">&#125;, <span class="string">"B"</span>).start();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a><p><code>get</code>æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Sets the current thread's copy of this thread-local variable</span></span><br><span class="line"><span class="comment"> * to the specified value.  Most subclasses will have no need to</span></span><br><span class="line"><span class="comment"> * override this method, relying solely on the &#123;<span class="doctag">@link</span> #initialValue&#125;</span></span><br><span class="line"><span class="comment"> * method to set the values of thread-locals.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> value the value to be stored in the current thread's copy of</span></span><br><span class="line"><span class="comment"> *        this thread-local.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">set</span><span class="params">(T value)</span> </span>&#123;</span><br><span class="line">Thread t = Thread.currentThread();</span><br><span class="line">ThreadLocalMap map = getMap(t);</span><br><span class="line"><span class="keyword">if</span> (map != <span class="keyword">null</span>) &#123;</span><br><span class="line">map.set(<span class="keyword">this</span>, value);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">createMap(t, value);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>getMap</code>æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Get the map associated with a ThreadLocal. Overridden in</span></span><br><span class="line"><span class="comment"> * InheritableThreadLocal.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span>  t the current thread</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> the map</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">ThreadLocalMap <span class="title">getMap</span><span class="params">(Thread t)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> t.threadLocals;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>createMap</code>æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Create the map associated with a ThreadLocal. Overridden in</span></span><br><span class="line"><span class="comment"> * InheritableThreadLocal.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> t the current thread</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> firstValue value for the initial entry of the map</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">createMap</span><span class="params">(Thread t, T firstValue)</span> </span>&#123;</span><br><span class="line">t.threadLocals = <span class="keyword">new</span> ThreadLocalMap(<span class="keyword">this</span>, firstValue);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>ThreadLocalMap</code>æ„é€ å‡½æ•°ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Construct a new map initially containing (firstKey, firstValue).</span></span><br><span class="line"><span class="comment"> * ThreadLocalMaps are constructed lazily, so we only create</span></span><br><span class="line"><span class="comment"> * one when we have at least one entry to put in it.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">ThreadLocalMap(ThreadLocal&lt;?&gt; firstKey, Object firstValue) &#123;</span><br><span class="line">table = <span class="keyword">new</span> Entry[INITIAL_CAPACITY];</span><br><span class="line"><span class="keyword">int</span> i = firstKey.threadLocalHashCode &amp; (INITIAL_CAPACITY - <span class="number">1</span>);</span><br><span class="line">table[i] = <span class="keyword">new</span> Entry(firstKey, firstValue);</span><br><span class="line">size = <span class="number">1</span>;</span><br><span class="line">setThreshold(INITIAL_CAPACITY);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Set the value associated with key.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> key the thread local object</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> value the value to be set</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">set</span><span class="params">(ThreadLocal&lt;?&gt; key, Object value)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// We don't use a fast path as with get() because it is at</span></span><br><span class="line"><span class="comment">// least as common to use set() to create new entries as</span></span><br><span class="line"><span class="comment">// it is to replace existing ones, in which case, a fast</span></span><br><span class="line"><span class="comment">// path would fail more often than not.</span></span><br><span class="line"></span><br><span class="line">Entry[] tab = table;</span><br><span class="line"><span class="keyword">int</span> len = tab.length;</span><br><span class="line"><span class="keyword">int</span> i = key.threadLocalHashCode &amp; (len-<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (Entry e = tab[i];</span><br><span class="line"> e != <span class="keyword">null</span>;</span><br><span class="line"> e = tab[i = nextIndex(i, len)]) &#123;</span><br><span class="line">ThreadLocal&lt;?&gt; k = e.get();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (k == key) &#123;</span><br><span class="line">e.value = value;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (k == <span class="keyword">null</span>) &#123;</span><br><span class="line">replaceStaleEntry(key, value, i);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tab[i] = <span class="keyword">new</span> Entry(key, value);</span><br><span class="line"><span class="keyword">int</span> sz = ++size;</span><br><span class="line"><span class="keyword">if</span> (!cleanSomeSlots(i, sz) &amp;&amp; sz &gt;= threshold)</span><br><span class="line">rehash();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Removes the current thread's value for this thread-local</span></span><br><span class="line"><span class="comment"> * variable.  If this thread-local variable is subsequently</span></span><br><span class="line"><span class="comment"> * &#123;<span class="doctag">@linkplain</span> #get read&#125; by the current thread, its value will be</span></span><br><span class="line"><span class="comment"> * reinitialized by invoking its &#123;<span class="doctag">@link</span> #initialValue&#125; method,</span></span><br><span class="line"><span class="comment"> * unless its value is &#123;<span class="doctag">@linkplain</span> #set set&#125; by the current thread</span></span><br><span class="line"><span class="comment"> * in the interim.  This may result in multiple invocations of the</span></span><br><span class="line"><span class="comment"> * &#123;<span class="doctag">@code</span> initialValue&#125; method in the current thread.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 1.5</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> ThreadLocalMap m = getMap(Thread.currentThread());</span><br><span class="line"> <span class="keyword">if</span> (m != <span class="keyword">null</span>) &#123;</span><br><span class="line"> m.remove(<span class="keyword">this</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> source code </tag>
            
            <tag> threadlocal </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcodeé¢˜è§£ï¼šç¿»è½¬äºŒå‰æ ‘</title>
      <link href="/blog/2020/09/16/solution-of-invert-binary-tree/"/>
      <url>/blog/2020/09/16/solution-of-invert-binary-tree/</url>
      
        <content type="html"><![CDATA[<h2 id="226-ç¿»è½¬äºŒå‰æ ‘"><a class="header-anchor" href="#226-ç¿»è½¬äºŒå‰æ ‘">#</a><a href="https://leetcode-cn.com/problems/invert-binary-tree/" target="_blank" rel="noopener">226. ç¿»è½¬äºŒå‰æ ‘</a></h2><p>ç¿»è½¬ä¸€æ£µäºŒå‰æ ‘ã€‚</p><p>ç¤ºä¾‹ï¼š</p><p>è¾“å…¥ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">     4</span><br><span class="line">   &#x2F;   \</span><br><span class="line">  2     7</span><br><span class="line"> &#x2F; \   &#x2F; \</span><br><span class="line">1   3 6   9</span><br></pre></td></tr></table></figure><p>è¾“å‡ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">     4</span><br><span class="line">   &#x2F;   \</span><br><span class="line">  7     2</span><br><span class="line"> &#x2F; \   &#x2F; \</span><br><span class="line">9   6 3   1</span><br></pre></td></tr></table></figure><p>å¤‡æ³¨ï¼š</p><p>è¿™ä¸ªé—®é¢˜æ˜¯å—åˆ°<a href="https://twitter.com/mxcl" target="_blank" rel="noopener">Max Howell</a>çš„<a href="https://twitter.com/mxcl/status/608682016205344768" target="_blank" rel="noopener">åŸé—®é¢˜</a>å¯å‘çš„ï¼š</p><blockquote><p>è°·æ­Œï¼šæˆ‘ä»¬ 90ï¼…çš„å·¥ç¨‹å¸ˆä½¿ç”¨æ‚¨ç¼–å†™çš„è½¯ä»¶(Homebrew)ï¼Œä½†æ˜¯æ‚¨å´æ— æ³•åœ¨é¢è¯•æ—¶åœ¨ç™½æ¿ä¸Šå†™å‡ºç¿»è½¬äºŒå‰æ ‘è¿™é“é¢˜ï¼Œè¿™å¤ªç³Ÿç³•äº†ã€‚</p></blockquote><a id="more"></a><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> xyz.onns.leetcode;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> Onns</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/9/16 9:41 AM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Website</span> https://onns.xyz/blog/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InvertBinaryTree</span> </span>&#123;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * public class TreeNode &#123;</span></span><br><span class="line"><span class="comment"> * int val;</span></span><br><span class="line"><span class="comment"> * TreeNode left;</span></span><br><span class="line"><span class="comment"> * TreeNode right;</span></span><br><span class="line"><span class="comment"> * TreeNode(int x) &#123; val = x; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> val;</span><br><span class="line">TreeNode left;</span><br><span class="line">TreeNode right;</span><br><span class="line"></span><br><span class="line">TreeNode(<span class="keyword">int</span> x) &#123;</span><br><span class="line">val = x;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> TreeNode <span class="title">invertTree</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (root == <span class="keyword">null</span>) <span class="keyword">return</span> root;</span><br><span class="line">exchange(root);</span><br><span class="line"><span class="keyword">return</span> root;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">exchange</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">TreeNode t = root.left;</span><br><span class="line">root.left = root.right;</span><br><span class="line">root.right = t;</span><br><span class="line"><span class="keyword">if</span> (root.left != <span class="keyword">null</span>) &#123;</span><br><span class="line">exchange(root.left);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (root.right != <span class="keyword">null</span>) &#123;</span><br><span class="line">exchange(root.right);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> tips </tag>
            
            <tag> leetcode </tag>
            
            <tag> é€’å½’ </tag>
            
            <tag> recursion </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»Šæ—¥çš„å¤§å‘ï¼šsshå¯†é’¥å¤±æ•ˆ</title>
      <link href="/blog/2020/09/16/ssh-key-can-not-work/"/>
      <url>/blog/2020/09/16/ssh-key-can-not-work/</url>
      
        <content type="html"><![CDATA[<p>åƒå¾€å¸¸ä¸€æ ·ï¼Œæ—¥å¸¸å¤‡ä»½ä¸€ä¸‹æœåŠ¡å™¨ä¸Šçš„å¤‡ä»½æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rsync -auv -e <span class="string">"ssh -i /home/deploy/.ssh/mi"</span> --progress /home/deploy/common/ android@xm.onns.xyz:/home/android/</span><br></pre></td></tr></table></figure><p>çªç„¶é—´æˆ‘æœåŠ¡å™¨ç‚¸äº†ï¼Œ<code>ssh</code>ä»€ä¹ˆçš„éƒ½è¿ä¸ä¸Šäº†ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">android@xm.onns.xyz: Permission denied (publickey,gssapi-keyex,gssapi-with-mic).</span><br></pre></td></tr></table></figure><a id="more"></a><p>ä¹‹å‰ä»æ²¡é‡åˆ°è¿‡è¿™æ ·çš„é—®é¢˜ï¼Œæ­£å› ä¸ºä»æ¥æ²¡é‡åˆ°è¿‡ï¼Œæ‰€ä»¥æˆ‘æœåŠ¡å™¨ä¸Šåªæœ‰ä¸€ä¸ªè´¦æˆ·ï¼Œè¿™ä¸ªè´¦æˆ·æ²¡æ³•ç™»å½•ï¼Œæˆ‘æ•´ä¸ªæœåŠ¡å™¨å°±è¿æ¥ä¸ä¸Šäº†ï¼Œç‰©ç†æœºä¹Ÿè¿æ¥ä¸ä¸ŠğŸ˜­ã€‚</p><p>åé¢é‡æ–°å®‰è£…äº†sshä¹‹åæ€»ç®—å¯ä»¥ç™»å½•äº†ï¼Œä¸Šå»æ’æŸ¥é—®é¢˜ã€‚</p><p>é¦–å…ˆç¬¬ä¸€ä¸ªæƒ³åˆ°çš„å¯èƒ½æ˜¯ï¼Œæˆ‘çš„<code>rsync</code>ç›®çš„è·¯å¾„æ˜¯æˆ‘ç”¨æˆ·çš„æ ¹ç›®å½•ï¼Œä¼šä¸ä¼šå‘ç”Ÿäº†<code>è¦†ç›–å†™</code>æ“ä½œï¼ŒæŠŠæˆ‘çš„<code>æ ¹ç›®å½•</code>ä¸‹çš„<code>.ssh/</code>ç›®å½•åˆ é™¤äº†ï¼Œå¯¼è‡´<code>ssh</code>æ‰¾ä¸åˆ°<code>authorized_keys</code>æ–‡ä»¶ã€‚</p><p>è¿™ä¸ªé—®é¢˜é¦–å…ˆå»çœ‹äº†ä¸‹<code>rsync</code>çš„å‚æ•°ï¼Œæˆ‘æ²¡æœ‰å¸¦<code>--delete</code>æ‰€ä»¥è‚¯å®šä¸ä¼šæœ‰<code>åˆ é™¤</code>çš„é—®é¢˜ï¼Œè€Œä¸”åé¢ç™»å½•ä¸Šå»ä¹‹åä¹Ÿç¡®å®<code>æ ¹ç›®å½•</code>ä¸‹çš„æ‰€æœ‰æ–‡ä»¶éƒ½åœ¨ï¼Œæ­¤é—®é¢˜æ’é™¤ã€‚</p><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæ ¹æ®æˆ‘ç°æœ‰çš„çŸ¥è¯†ï¼Œæ²¡æœ‰åŠæ³•ç¡®å®šé—®é¢˜å‘ç”Ÿçš„åŸå› ï¼Œæ‰€ä»¥æˆ‘æ‰“ç®—é‡æ–°é…ç½®ä¸€ä¸‹<code>ssh</code>å¯†é’¥ï¼Œç„¶å<code>å†æ¬¡å¤ç°</code>ä¸€ä¸‹ä¹‹å‰çš„æ“ä½œã€‚</p><p>åˆ°è¿™é‡Œå°±å‡ºç°äº†é—®é¢˜ï¼Œ<code>ssh</code>å¯†é’¥ä¸è®ºæˆ‘æ€ä¹ˆé…ç½®ï¼Œ<code>android</code>ç”¨æˆ·éƒ½æ— æ³•é€šè¿‡<code>å¯†é’¥</code>ç™»å½•ã€‚</p><p>æŸ¥çœ‹äº†ä¸€ä¸‹<code>/etc/ssh/sshd_config</code>ï¼Œå‘ç°ç›¸å…³çš„é…ç½®éƒ½æ²¡é—®é¢˜ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">PubkeyAuthentication yes</span><br><span class="line"></span><br><span class="line"><span class="comment"># The default is to check both .ssh/authorized_keys and .ssh/authorized_keys2</span></span><br><span class="line"><span class="comment"># but this is overridden so installations will only check .ssh/authorized_keys</span></span><br><span class="line">AuthorizedKeysFile      .ssh/authorized_keys</span><br></pre></td></tr></table></figure><p><code>PubkeyAuthentication</code>è®¾ç½®äº†<code>yes</code>ï¼Œå…è®¸å¯†é’¥ç™»å½•ï¼ŒéªŒè¯æ–‡ä»¶ä¹Ÿæ²¡é—®é¢˜ï¼Œæ˜¯<code>.ssh/authorized_keys</code>ã€‚</p><p>æ²¡åŠæ³•è§£å†³ï¼Œæ‰€ä»¥æˆ‘åˆåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ç”¨æˆ·ï¼Œç„¶ååŒæ ·çš„<code>ç”Ÿæˆå¯†é’¥</code>ï¼Œæµ‹è¯•ç™»å½•ï¼Œå‘ç°æ–°ç”¨æˆ·æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œ<code>å¯ä»¥ä½¿ç”¨å¯†é’¥ç™»å½•</code>ã€‚</p><p>å†æ¬¡å›åˆ°<code>android</code>ç”¨æˆ·çš„ç™»å½•æµ‹è¯•ï¼ŒæŠŠæœ¬åœ°çš„ç§é’¥æƒé™è°ƒæˆ<code>777</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ ssh android@192.168.1.116 -i mi</span><br><span class="line">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span><br><span class="line">@         WARNING: UNPROTECTED PRIVATE KEY FILE!          @</span><br><span class="line">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@</span><br><span class="line">Permissions 0777 <span class="keyword">for</span> <span class="string">'mi'</span> are too open.</span><br><span class="line">It is required that your private key files are NOT accessible by others.</span><br><span class="line">This private key will be ignored.</span><br><span class="line">Load key <span class="string">"mi"</span>: bad permissions</span><br></pre></td></tr></table></figure><p>æŒ‰ç†æ¥è¯´æ²¡é—®é¢˜çš„ï¼Œè¿™å·²ç»åœ¨èµ°å¯†é’¥éªŒè¯æµç¨‹äº†ï¼Œæ‰€ä»¥è¯´ï¼Œå¤§æ¦‚ç‡è¿˜æ˜¯<code>android</code>çš„æœåŠ¡å™¨é‚£è¾¹é…ç½®å‡ºäº†ä»€ä¹ˆé—®é¢˜ã€‚</p><p>æ‰¾äº†ä¸€äº›<code>ssh</code>å¯†é’¥ç™»å½•çš„é…ç½®æ•™ç¨‹ï¼Œåœ¨é…ç½®<code>authorized_keys</code>çš„æ—¶å€™ï¼Œæ•™ç¨‹é‡ŒæŠŠ<code>.ssh</code>ç›®å½•çš„æƒé™è®¾ç½®ä¸º<code>700</code>ï¼ŒæŠŠ<code>authorized_keys</code>æ–‡ä»¶çš„æƒé™è®¾ç½®ä¸º<code>600</code>ï¼Œè¿™æ˜¯æˆ‘ä¹‹å‰ä»æ¥ä¸çŸ¥é“çš„ï¼ŒåŸæ¥æœåŠ¡å™¨ç«¯è¿™è¾¹çš„<code>å…¬é’¥</code>ä¹Ÿéœ€è¦ç›¸å…³çš„æƒé™ã€‚</p><p>å—æ­¤å¯å‘ï¼ŒåŒæ—¶æˆ‘åˆå»æŸ¥äº†ä¸€ä¸‹<code>rsync</code>çš„ç›¸å…³æ–‡æ¡£ï¼Œå…¶ä¸­ä¸€ä¸ªæ•™ç¨‹æœ‰å¦‚ä¸‹è¯´æ˜ï¼š</p><blockquote><p>3.æºç›®å½•å¦‚æœä¸å¸¦åç¼€â€œ/â€è¡¨ç¤ºåœ¨ç›®æ ‡ç›®å½•ä¸‹åˆ›å»ºè¯¥ç›®å½•å¹¶æŠŠæºç›®å½•ä¸‹æ–‡ä»¶ä¸€å¹¶åŒæ­¥è¿‡å»ï¼Œå¸¦â€œ/â€è¡¨ç¤ºåªæ˜¯æŠŠæºç›®å½•ä¸‹çš„æ–‡ä»¶å…¨éƒ¨åŒæ­¥è¿‡å»ã€‚</p></blockquote><p>æ‰€ä»¥æˆ‘çš„<code>/home/android/</code>çš„æƒé™ææœ‰å¯èƒ½æ˜¯è¢«ä¿®æ”¹äº†ï¼Œå¯¼è‡´<code>ssh</code>çš„æ–‡ä»¶å¤¹ä¿¡ä»»è·¯å¾„æ²¡æœ‰åŠæ³•èµ°å®Œã€‚</p><p>é‡æ–°ä¿®æ”¹äº†ä¸€ä¸‹<code>/home/android/</code>ç›®å½•çš„æƒé™ï¼Œä¿®æ”¹æˆ<code>700</code>ï¼Œå‘ç°<code>android</code>ç”¨æˆ·çš„<code>ssh</code>å·²ç»å¯ä»¥æ­£å¸¸åœ°ç”¨å¯†é’¥ç™»å½•äº†ã€‚</p><p>å†æ¬¡å¤ç°ä¸€ä¸‹é—®é¢˜ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ rsync -auv -e <span class="string">"ssh -i /home/deploy/.ssh/mi"</span> --progress /home/deploy/common/ android@xm.onns.xyz:/home/android/</span><br><span class="line">sending incremental file list</span><br><span class="line">./</span><br><span class="line"></span><br><span class="line">sent 84 bytes  received 19 bytes  41.20 bytes/sec</span><br><span class="line">total size is 2,183,563  speedup is 21,199.64</span><br></pre></td></tr></table></figure><p>å›åˆ°æœåŠ¡å™¨æŸ¥çœ‹ä¸€ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ ls -l</span><br><span class="line">total 8</span><br><span class="line">drwxrwxr-x. 6 android android    4096 Sep 15 18:37 android</span><br><span class="line">drwx------. 5 onns    aid_system 4096 Sep 15 18:37 onns</span><br></pre></td></tr></table></figure><p>æœç„¶æ˜¯è¿™ä¸ªé—®é¢˜ã€‚</p><p>è‡³æ­¤ï¼ŒèŠ±äº†å‡ ä¸ªå°æ—¶æ—¶é—´ï¼Œç»ˆäºæŠŠé—®é¢˜è§£å†³äº†ï¼Œå› ä¸ºåŒæ­¥çš„æ˜¯æ•°æ®åº“çš„å¤‡ä»½æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘å½“æ—¶ä»¥ä¸ºæœåŠ¡å™¨è¢«é»‘äº†ï¼Œèµ¶ç´§æŠŠæœåŠ¡å™¨ä»äº’è”ç½‘ä¸Šæ–­ç½‘äº†ï¼Œæ‰€å¹¸ï¼Œæ˜¯å°é—®é¢˜ã€‚</p><h2 id="æ€»ç»“"><a class="header-anchor" href="#æ€»ç»“">#</a>æ€»ç»“</h2><p>ä¹Ÿç®—æ˜¯ï¼Œå¤šäº†è§£äº†ä¸€äº›å…³äº<code>ssh</code>çš„ä½¿ç”¨ç›¸å…³é—®é¢˜å§ï¼Œå¦‚æœæœªæ¥æ²¡æœ‰ç›¸å…³çš„ç³»ç»Ÿå­¦ä¹ ï¼Œé‚£ä»Šå¤©æ‰€åšçš„ï¼Œå¾€å¥½äº†è¯´ï¼Œå°±æ˜¯åœ¨æå‰ä¸ºä»¥å<code>å¡«å‘</code>å•¦ï¼</p><ul><li><code>ssh</code>æœ¬åœ°çš„ç§é’¥æƒé™å¿…é¡»ä¿è¯ä¸º<code>600</code>ï¼Œç›¸å…³è·¯å¾„çš„æƒé™ä¸º<code>700</code>ï¼Œè¿™ä¸ªè·¯å¾„æ˜¯ä»<code>/</code>å¼€å§‹ç®—çš„æ‰€æœ‰è·¯å¾„ï¼Œä»»æ„ä¸­é—´ä¸€ç‚¹æƒé™è¿‡é«˜éƒ½ä¸è¡Œã€‚</li><li><code>ssh</code>æœåŠ¡å™¨å…¬é’¥æƒé™å¿…é¡»ä¿è¯ä¸º<code>600</code>ï¼Œç›¸å…³è·¯å¾„çš„æƒé™ä¸º<code>700</code>ï¼Œè¿™ä¸ªè·¯å¾„æ˜¯ä»<code>/</code>å¼€å§‹ç®—çš„æ‰€æœ‰è·¯å¾„ï¼Œä»»æ„ä¸­é—´ä¸€ç‚¹æƒé™è¿‡é«˜éƒ½ä¸è¡Œã€‚</li><li><code>rsync</code>æˆ–è€…è¯´<code>Linux</code>ä¸‹çš„æ–‡ä»¶æ‹·è´å¤åˆ¶ï¼Œç»“å°¾å¸¦<code>/</code>æˆ–è€…ä¸å¸¦<code>/</code>å½±å“çœŸçš„å¾ˆå¤§ï¼Œè¿™ä¸ªè¦æ ¹æ®æ¯ä¸ªæŒ‡ä»¤è‡ªå·±çš„ç›¸å…³å®ç°ï¼Œä»¥<code>rsync</code>ä¸ºä¾‹ï¼Œæºæ–‡ä»¶å¤¹è·¯å¾„å¦‚ä¸‹ï¼š  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;</span><br><span class="line">â”œâ”€â”€ home</span><br><span class="line">|â”œâ”€â”€ deploy</span><br><span class="line">||â”œâ”€â”€ common</span><br><span class="line">|||â”œâ”€â”€ daily_backup.db</span><br><span class="line">|||â”œâ”€â”€ ...</span><br><span class="line">||â”œâ”€â”€ ...</span><br><span class="line">|â”œâ”€â”€ ...</span><br><span class="line">â”œâ”€â”€ ...</span><br></pre></td></tr></table></figure><code>daily_backup.db</code>åŠå…¶ç›¸å…³æ–‡ä»¶æ˜¯æˆ‘ä»¬è¦å¤‡ä»½çš„æ–‡ä»¶ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rsync -auv -e <span class="string">"ssh -i /home/deploy/.ssh/mi"</span> --progress /home/deploy/common/ android@xm.onns.xyz:/home/android/</span><br></pre></td></tr></table></figure>åœ¨ç›®æ ‡æ–‡ä»¶ç”Ÿæˆçš„æ–‡ä»¶ä¼šå¦‚ä¸‹ï¼š  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;</span><br><span class="line">â”œâ”€â”€ home</span><br><span class="line">|â”œâ”€â”€ android</span><br><span class="line">||â”œâ”€â”€ daily_backup.db</span><br><span class="line">||â”œâ”€â”€ ...</span><br><span class="line">|â”œâ”€â”€ ...</span><br><span class="line">â”œâ”€â”€ ...</span><br></pre></td></tr></table></figure>ä¼šç›´æ¥æŠŠæ‰€æœ‰æ–‡ä»¶æ”¾åˆ°æ ¹ç›®å½•ï¼Œæ‰€ä»¥ä¸å¯é¿å…çš„ä¼šä¿®æ”¹æ ¹ç›®å½•çš„ç›¸å…³æƒé™ã€‚ä½†å‡å¦‚æ¢æˆå¦‚ä¸‹å‘½ä»¤ï¼š  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rsync -auv -e <span class="string">"ssh -i /home/deploy/.ssh/mi"</span> --progress /home/deploy/common android@xm.onns.xyz:/home/android/</span><br></pre></td></tr></table></figure>åœ¨ç›®æ ‡æ–‡ä»¶ç”Ÿæˆçš„æ–‡ä»¶ä¼šå¦‚ä¸‹ï¼š  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;</span><br><span class="line">â”œâ”€â”€ home</span><br><span class="line">|â”œâ”€â”€ android</span><br><span class="line">||â”œâ”€â”€ common</span><br><span class="line">|||â”œâ”€â”€ daily_backup.db</span><br><span class="line">|||â”œâ”€â”€ ...</span><br><span class="line">||â”œâ”€â”€ ...</span><br><span class="line">|â”œâ”€â”€ ...</span><br><span class="line">â”œâ”€â”€ ...</span><br></pre></td></tr></table></figure>ä¸€ä¸ª<code>/</code>çœŸçš„å·®åˆ«å¥½å¤§ï¼</li></ul><h2 id="ç›¸å…³é“¾æ¥"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥">#</a>ç›¸å…³é“¾æ¥</h2><ul><li><a href="https://www.cnblogs.com/sunju/p/11073530.html" target="_blank" rel="noopener">å…³äºsshå¯†é’¥é…ç½®è¿˜éœ€è¦è¾“å…¥å¯†ç çš„ç»ˆæè§£å†³åŠæ³•</a></li><li><a href="https://www.cnblogs.com/fanggege/p/10631903.html" target="_blank" rel="noopener">rsync åŒæ­¥</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> work </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> rsync </tag>
            
            <tag> ssh </tag>
            
            <tag> sshd </tag>
            
            <tag> chmod </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcodeé¢˜è§£ï¼šé›¶é’±å…‘æ¢</title>
      <link href="/blog/2020/09/15/solution-of-coin-change/"/>
      <url>/blog/2020/09/15/solution-of-coin-change/</url>
      
        <content type="html"><![CDATA[<h2 id="322-é›¶é’±å…‘æ¢"><a class="header-anchor" href="#322-é›¶é’±å…‘æ¢">#</a><a href="https://leetcode-cn.com/problems/coin-change/" target="_blank" rel="noopener">322. é›¶é’±å…‘æ¢</a></h2><p>ç»™å®šä¸åŒé¢é¢çš„ç¡¬å¸<code>coins</code>å’Œä¸€ä¸ªæ€»é‡‘é¢<code>amount</code>ã€‚ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—å¯ä»¥å‡‘æˆæ€»é‡‘é¢æ‰€éœ€çš„æœ€å°‘çš„ç¡¬å¸ä¸ªæ•°ã€‚å¦‚æœæ²¡æœ‰ä»»ä½•ä¸€ç§ç¡¬å¸ç»„åˆèƒ½ç»„æˆæ€»é‡‘é¢ï¼Œè¿”å›<code>-1</code>ã€‚</p><p>ç¤ºä¾‹<code>1</code>:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: coins &#x3D; [1, 2, 5], amount &#x3D; 11</span><br><span class="line">è¾“å‡º: 3</span><br><span class="line">è§£é‡Š: 11 &#x3D; 5 + 5 + 1</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹<code>2</code>:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: coins &#x3D; [2], amount &#x3D; 3</span><br><span class="line">è¾“å‡º: -1</span><br></pre></td></tr></table></figure><p>è¯´æ˜:<br>ä½ å¯ä»¥è®¤ä¸ºæ¯ç§ç¡¬å¸çš„æ•°é‡æ˜¯<code>æ— é™çš„</code>ã€‚</p><a id="more"></a><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> xyz.onns.leetcode;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> Onns</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/9/15 12:06 PM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Website</span> https://onns.xyz/blog/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CoinChange</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="keyword">new</span> CoinChange().<span class="keyword">new</span> Solution().test();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">coinChange</span><span class="params">(<span class="keyword">int</span>[] coins, <span class="keyword">int</span> amount)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n = coins.length;</span><br><span class="line"><span class="keyword">if</span> (n == <span class="number">0</span>) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span>[] dp = <span class="keyword">new</span> <span class="keyword">int</span>[amount + <span class="number">1</span>];</span><br><span class="line">Arrays.fill(dp, amount + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// base case:</span></span><br><span class="line"><span class="comment">// dp[0] = 0</span></span><br><span class="line">dp[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// all conditions:</span></span><br><span class="line"><span class="comment">// amount from 1 to amount</span></span><br><span class="line"><span class="comment">// coin from 0 to coins.length - 1</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= amount; i++) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line"><span class="comment">// state transition:</span></span><br><span class="line"><span class="comment">// f(i) = f(i-coins[i]) + 1, if f(i-coins[i]) + 1 &lt; f(i)</span></span><br><span class="line"><span class="comment">// f(i) = f(i), otherwise</span></span><br><span class="line"><span class="keyword">int</span> t = i - coins[j];</span><br><span class="line"><span class="keyword">if</span> (t &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">dp[i] = Math.min(dp[t] + <span class="number">1</span>, dp[i]);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> dp[amount] == (amount + <span class="number">1</span>) ? -<span class="number">1</span> : dp[amount];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">System.out.println(coinChange(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>&#125;, <span class="number">5</span>));</span><br><span class="line">System.out.println(coinChange(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>&#125;, <span class="number">10</span>));</span><br><span class="line">System.out.println(coinChange(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>&#125;, <span class="number">11</span>));</span><br><span class="line">System.out.println(coinChange(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">2</span>&#125;, <span class="number">3</span>));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> tips </tag>
            
            <tag> leetcode </tag>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
            <tag> dynamic programming </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcodeé¢˜è§£ï¼šæ–æ³¢é‚£å¥‘æ•°</title>
      <link href="/blog/2020/09/15/solution-of-fibonacci-number/"/>
      <url>/blog/2020/09/15/solution-of-fibonacci-number/</url>
      
        <content type="html"><![CDATA[<h2 id="509-æ–æ³¢é‚£å¥‘æ•°"><a class="header-anchor" href="#509-æ–æ³¢é‚£å¥‘æ•°">#</a><a href="https://leetcode-cn.com/problems/fibonacci-number/" target="_blank" rel="noopener">509. æ–æ³¢é‚£å¥‘æ•°</a></h2><p>æ–æ³¢é‚£å¥‘æ•°ï¼Œé€šå¸¸ç”¨<code>F(n)</code>è¡¨ç¤ºï¼Œå½¢æˆçš„åºåˆ—ç§°ä¸º<strong>æ–æ³¢é‚£å¥‘æ•°åˆ—</strong>ã€‚è¯¥æ•°åˆ—ç”±<code>0</code>å’Œ<code>1</code>å¼€å§‹ï¼Œåé¢çš„æ¯ä¸€é¡¹æ•°å­—éƒ½æ˜¯å‰é¢ä¸¤é¡¹æ•°å­—çš„å’Œã€‚ä¹Ÿå°±æ˜¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">F(0) &#x3D; 0,Â  Â F(1)Â &#x3D; 1</span><br><span class="line">F(N) &#x3D; F(N - 1) + F(N - 2), å…¶ä¸­ N &gt; 1.</span><br></pre></td></tr></table></figure><p>ç»™å®š<code>N</code>ï¼Œè®¡ç®—<code>F(N)</code>ã€‚</p><p>ç¤ºä¾‹<code>1</code>ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼š2</span><br><span class="line">è¾“å‡ºï¼š1</span><br><span class="line">è§£é‡Šï¼šF(2) &#x3D; F(1) + F(0) &#x3D; 1 + 0 &#x3D; 1.</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹<code>2</code>ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼š3</span><br><span class="line">è¾“å‡ºï¼š2</span><br><span class="line">è§£é‡Šï¼šF(3) &#x3D; F(2) + F(1) &#x3D; 1 + 1 &#x3D; 2.</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹<code>3</code>ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥ï¼š4</span><br><span class="line">è¾“å‡ºï¼š3</span><br><span class="line">è§£é‡Šï¼šF(4) &#x3D; F(3) + F(2) &#x3D; 2 + 1 &#x3D; 3.</span><br></pre></td></tr></table></figure><p>æç¤ºï¼š</p><p>0 â‰¤<code>N</code>â‰¤ 30</p><a id="more"></a><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> xyz.onns.leetcode;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> Onns</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/9/15 11:59 AM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Website</span> https://onns.xyz/blog/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FibonacciNumber</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="keyword">new</span> FibonacciNumber().<span class="keyword">new</span> Solution().test();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">fib</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line"><span class="comment">// base case:</span></span><br><span class="line"><span class="comment">// f(0) = 0, f(1) = 1</span></span><br><span class="line"><span class="keyword">int</span> pre = <span class="number">0</span>, cur = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span> (N == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"><span class="comment">// all conditions:</span></span><br><span class="line"><span class="comment">// i from 2 to N</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= N; i++) &#123;</span><br><span class="line"><span class="comment">// state transition:</span></span><br><span class="line"><span class="comment">// f(i) = f(i-1) + f(i-2)</span></span><br><span class="line"><span class="keyword">int</span> t = pre + cur;</span><br><span class="line">pre = cur;</span><br><span class="line">cur = t;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> cur;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">System.out.println(fib(<span class="number">2</span>));</span><br><span class="line">System.out.println(fib(<span class="number">3</span>));</span><br><span class="line">System.out.println(fib(<span class="number">4</span>));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> tips </tag>
            
            <tag> leetcode </tag>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
            <tag> dynamic programming </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcodeé¢˜è§£ï¼šäºŒå‰æ ‘çš„ä¸­åºéå†</title>
      <link href="/blog/2020/09/14/solution-of-binary-tree-inorder-traversal/"/>
      <url>/blog/2020/09/14/solution-of-binary-tree-inorder-traversal/</url>
      
        <content type="html"><![CDATA[<h2 id="94-äºŒå‰æ ‘çš„ä¸­åºéå†"><a class="header-anchor" href="#94-äºŒå‰æ ‘çš„ä¸­åºéå†">#</a><a href="https://leetcode-cn.com/problems/binary-tree-inorder-traversal/" target="_blank" rel="noopener">94. äºŒå‰æ ‘çš„ä¸­åºéå†</a></h2><p>ç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œè¿”å›å®ƒçš„<em>ä¸­åº</em>éå†ã€‚</p><p>ç¤ºä¾‹:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: [1,null,2,3]</span><br><span class="line">   1</span><br><span class="line">    \</span><br><span class="line">     2</span><br><span class="line">    &#x2F;</span><br><span class="line">   3</span><br><span class="line"></span><br><span class="line">è¾“å‡º: [1,3,2]</span><br></pre></td></tr></table></figure><p>è¿›é˜¶:Â  é€’å½’ç®—æ³•å¾ˆç®€å•ï¼Œä½ å¯ä»¥é€šè¿‡è¿­ä»£ç®—æ³•å®Œæˆå—ï¼Ÿ</p><a id="more"></a><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> xyz.onns.leetcode;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.LinkedList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Stack;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> Onns</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/9/14 2:36 PM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Website</span> https://onns.xyz/blog/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BinaryTreeInorderTraversal</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="keyword">new</span> BinaryTreeInorderTraversal().<span class="keyword">new</span> Solution1().test();</span><br><span class="line">System.out.println();</span><br><span class="line"><span class="keyword">new</span> BinaryTreeInorderTraversal().<span class="keyword">new</span> Solution2().test();</span><br><span class="line">System.out.println();</span><br><span class="line"><span class="keyword">new</span> BinaryTreeInorderTraversal().<span class="keyword">new</span> Solution().test();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for a binary tree node.</span></span><br><span class="line"><span class="comment"> * public class TreeNode &#123;</span></span><br><span class="line"><span class="comment"> * int val;</span></span><br><span class="line"><span class="comment"> * TreeNode left;</span></span><br><span class="line"><span class="comment"> * TreeNode right;</span></span><br><span class="line"><span class="comment"> * TreeNode(int x) &#123; val = x; &#125;</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TreeNode</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> val;</span><br><span class="line">TreeNode left;</span><br><span class="line">TreeNode right;</span><br><span class="line"></span><br><span class="line">TreeNode(<span class="keyword">int</span> x) &#123;</span><br><span class="line">val = x;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">inorderTraversal</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">List&lt;Integer&gt; r = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">TreeNode t = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (root != <span class="keyword">null</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (root.left != <span class="keyword">null</span>) &#123;</span><br><span class="line">t = root.left;</span><br><span class="line"><span class="keyword">while</span> (t.right != <span class="keyword">null</span> &amp;&amp; t.right != root) &#123;</span><br><span class="line">t = t.right;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (t.right == <span class="keyword">null</span>) &#123;</span><br><span class="line">t.right = root;</span><br><span class="line">root = root.left;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">r.add(t.right.val);</span><br><span class="line">root = root.right;</span><br><span class="line">t.right = <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">r.add(root.val);</span><br><span class="line">root = root.right;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> r;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">TreeNode root = <span class="keyword">new</span> TreeNode(<span class="number">1</span>);</span><br><span class="line">root.left = <span class="keyword">new</span> TreeNode(<span class="number">2</span>);</span><br><span class="line">root.left.left = <span class="keyword">new</span> TreeNode(<span class="number">4</span>);</span><br><span class="line">root.left.right = <span class="keyword">new</span> TreeNode(<span class="number">5</span>);</span><br><span class="line">root.right = <span class="keyword">new</span> TreeNode(<span class="number">3</span>);</span><br><span class="line">root.right.left = <span class="keyword">new</span> TreeNode(<span class="number">6</span>);</span><br><span class="line">root.right.right = <span class="keyword">new</span> TreeNode(<span class="number">7</span>);</span><br><span class="line">List&lt;Integer&gt; r = inorderTraversal(root);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i : r) &#123;</span><br><span class="line">System.out.print(i + <span class="string">" "</span>); <span class="comment">// 4 2 5 1 6 3 7</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution2</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">inorderTraversal</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">List&lt;Integer&gt; r = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">Stack&lt;TreeNode&gt; s = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line"><span class="keyword">while</span> (root != <span class="keyword">null</span> || !s.isEmpty()) &#123;</span><br><span class="line"><span class="keyword">while</span> (root != <span class="keyword">null</span>) &#123;</span><br><span class="line">s.push(root);</span><br><span class="line">root = root.left;</span><br><span class="line">&#125;</span><br><span class="line">root = s.pop();</span><br><span class="line">r.add(root.val);</span><br><span class="line">root = root.right;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> r;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">TreeNode root = <span class="keyword">new</span> TreeNode(<span class="number">1</span>);</span><br><span class="line">root.left = <span class="keyword">new</span> TreeNode(<span class="number">2</span>);</span><br><span class="line">root.left.left = <span class="keyword">new</span> TreeNode(<span class="number">4</span>);</span><br><span class="line">root.left.right = <span class="keyword">new</span> TreeNode(<span class="number">5</span>);</span><br><span class="line">root.right = <span class="keyword">new</span> TreeNode(<span class="number">3</span>);</span><br><span class="line">root.right.left = <span class="keyword">new</span> TreeNode(<span class="number">6</span>);</span><br><span class="line">root.right.right = <span class="keyword">new</span> TreeNode(<span class="number">7</span>);</span><br><span class="line">List&lt;Integer&gt; r = inorderTraversal(root);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i : r) &#123;</span><br><span class="line">System.out.print(i + <span class="string">" "</span>); <span class="comment">// 4 2 5 1 6 3 7</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution1</span> </span>&#123;</span><br><span class="line">List&lt;Integer&gt; r;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Integer&gt; <span class="title">inorderTraversal</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line">r = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">visit(root);</span><br><span class="line"><span class="keyword">return</span> r;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">visit</span><span class="params">(TreeNode root)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (root.left != <span class="keyword">null</span>) &#123;</span><br><span class="line">visit(root.left);</span><br><span class="line">&#125;</span><br><span class="line">r.add(root.val);</span><br><span class="line"><span class="keyword">if</span> (root.right != <span class="keyword">null</span>) &#123;</span><br><span class="line">visit(root.right);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">TreeNode root = <span class="keyword">new</span> TreeNode(<span class="number">1</span>);</span><br><span class="line">root.left = <span class="keyword">new</span> TreeNode(<span class="number">2</span>);</span><br><span class="line">root.left.left = <span class="keyword">new</span> TreeNode(<span class="number">4</span>);</span><br><span class="line">root.left.right = <span class="keyword">new</span> TreeNode(<span class="number">5</span>);</span><br><span class="line">root.right = <span class="keyword">new</span> TreeNode(<span class="number">3</span>);</span><br><span class="line">root.right.left = <span class="keyword">new</span> TreeNode(<span class="number">6</span>);</span><br><span class="line">root.right.right = <span class="keyword">new</span> TreeNode(<span class="number">7</span>);</span><br><span class="line">List&lt;Integer&gt; r = inorderTraversal(root);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i : r) &#123;</span><br><span class="line">System.out.print(i + <span class="string">" "</span>); <span class="comment">// 4 2 5 1 6 3 7</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Morris éå†ç®—æ³•</strong>æ˜¯å‚ç…§å®˜æ–¹è§£åšçš„ï¼š</p><p><a href="https://leetcode-cn.com/problems/binary-tree-inorder-traversal/solution/er-cha-shu-de-zhong-xu-bian-li-by-leetcode-solutio/" target="_blank" rel="noopener">https://leetcode-cn.com/problems/binary-tree-inorder-traversal/solution/er-cha-shu-de-zhong-xu-bian-li-by-leetcode-solutio/</a></p><p><strong>Morris éå†ç®—æ³•</strong>æ˜¯å¦ä¸€ç§éå†äºŒå‰æ ‘çš„æ–¹æ³•ï¼Œå®ƒèƒ½å°†éé€’å½’çš„ä¸­åºéå†ç©ºé—´å¤æ‚åº¦é™ä¸º <em>O(1)</em>ã€‚</p><p><strong>Morris éå†ç®—æ³•</strong>æ•´ä½“æ­¥éª¤å¦‚ä¸‹ï¼ˆå‡è®¾å½“å‰éå†åˆ°çš„èŠ‚ç‚¹ä¸º <em>x</em>ï¼‰ï¼š</p><ol><li>å¦‚æœ <em>x</em> æ— å·¦å­©å­ï¼Œå…ˆå°† <em>x</em> çš„å€¼åŠ å…¥ç­”æ¡ˆæ•°ç»„ï¼Œå†è®¿é—® <em>x</em> çš„å³å­©å­ï¼Œå³ $x=x.\textit{right}$ ã€‚</li><li>å¦‚æœ <em>x</em> æœ‰å·¦å­©å­ï¼Œåˆ™æ‰¾åˆ° <em>x</em> å·¦å­æ ‘ä¸Šæœ€å³çš„èŠ‚ç‚¹ï¼ˆ<strong>å³å·¦å­æ ‘ä¸­åºéå†çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œ<em>x</em> åœ¨ä¸­åºéå†ä¸­çš„å‰é©±èŠ‚ç‚¹</strong>ï¼‰ï¼Œæˆ‘ä»¬è®°ä¸º $\textit{predecessor}$ ã€‚æ ¹æ® $\textit{predecessor}$ çš„å³å­©å­æ˜¯å¦ä¸ºç©ºï¼Œè¿›è¡Œå¦‚ä¸‹æ“ä½œã€‚<ul><li>å¦‚æœ $\textit{predecessor}$ çš„å³å­©å­ä¸ºç©ºï¼Œåˆ™å°†å…¶å³å­©å­æŒ‡å‘ <em>x</em>ï¼Œç„¶åè®¿é—® <em>x</em> çš„å·¦å­©å­ï¼Œå³ $x=x.\textit{left}$ ã€‚</li><li>å¦‚æœ $\textit{predecessor}$ çš„å³å­©å­ä¸ä¸ºç©ºï¼Œåˆ™æ­¤æ—¶å…¶å³å­©å­æŒ‡å‘ <em>x</em>ï¼Œè¯´æ˜æˆ‘ä»¬å·²ç»éå†å®Œ <em>x</em> çš„å·¦å­æ ‘ï¼Œæˆ‘ä»¬å°† $\textit{predecessor}$ çš„å³å­©å­ç½®ç©ºï¼Œå°† <em>x</em> çš„å€¼åŠ å…¥ç­”æ¡ˆæ•°ç»„ï¼Œç„¶åè®¿é—® <em>x</em> çš„å³å­©å­ï¼Œå³ $x=x.\textit{right}$ ã€‚</li></ul></li><li>é‡å¤ä¸Šè¿°æ“ä½œï¼Œç›´è‡³è®¿é—®å®Œæ•´æ£µæ ‘ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> tips </tag>
            
            <tag> leetcode </tag>
            
            <tag> inorder </tag>
            
            <tag> binary tree </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨MacOSè‡ªå¸¦çš„Quicktime Playerå½•åˆ¶ç³»ç»Ÿå£°éŸ³</title>
      <link href="/blog/2020/09/13/screen-record-with-internal-audio-on-quicktime-player/"/>
      <url>/blog/2020/09/13/screen-record-with-internal-audio-on-quicktime-player/</url>
      
        <content type="html"><![CDATA[<p>ä¹‹å‰èˆå‹ç›´æ’­æ±‚å©šï¼Œå¯æƒœå½•å±çš„æ—¶å€™æ²¡æŠŠå£°éŸ³å½•è¿›å»ï¼Œç ”ç©¶ä¸€ç•ªï¼Œè®°å½•ä¹‹ã€‚</p><a id="more"></a><h2 id="soundflower-blackhole"><a class="header-anchor" href="#soundflower-blackhole">#</a>Soundflower / BlackHole</h2><p>ç¬¬ä¸€æ­¥æ˜¯å®‰è£…ä¸€ä¸ªè™šæ‹Ÿçš„é©±åŠ¨ï¼Œè¿™ä¸ªè™šæ‹Ÿçš„é©±åŠ¨å°±é€šè¿‡è½¯ä»¶çš„æ–¹æ³•æŠŠè¾“å…¥è½¬æˆè¾“å‡ºï¼ŒæŠŠè¾“å‡ºè½¬æˆè¾“å…¥ã€‚</p><p>æœ‰ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼š</p><ul><li><a href="https://soundflower.en.softonic.com/mac" target="_blank" rel="noopener">Soundflower</a></li><li><a href="https://github.com/ExistentialAudio/BlackHole" target="_blank" rel="noopener">BlackHole</a></li></ul><p>æ•ˆæœåº”è¯¥æ˜¯ä¸€æ ·çš„ï¼Œå‰è€…ä¼°è®¡å¾ˆä¹…æ²¡æ›´æ–°äº†ï¼Œä½†æ˜¯ä¾ç„¶å¯ä»¥ç”¨ï¼Œåè€…æ˜¯è¿˜åœ¨æœ‰äººç»´æŠ¤å¹¶æœ‰ç›¸å…³çš„èµåŠ©å’Œæ–‡æ¡£ï¼Œæˆ‘å› ä¸ºå…ˆçŸ¥é“çš„ç¬¬ä¸€ä¸ªï¼Œå°±ç”¨ç¬¬ä¸€ä¸ªåšä¾‹å­äº†ã€‚å¦‚æœéƒ½æ²¡è£…è¿‡ï¼Œå»ºè®®è£…ç¬¬äºŒä¸ª<code>BlackHole</code>ã€‚</p><h3 id="soundflower-å®‰è£…å¤±è´¥"><a class="header-anchor" href="#soundflower-å®‰è£…å¤±è´¥">#</a>Soundflower å®‰è£…å¤±è´¥</h3><p>æ–°ç³»ç»Ÿä¸‹ä¼šæœ‰ç›¸å…³æƒé™é—®é¢˜ï¼Œå¦‚æœå¤±è´¥äº†ï¼Œå°±å‚è€ƒè¿™ä¸ª<a href="https://tieba.baidu.com/p/5765573933" target="_blank" rel="noopener">https://tieba.baidu.com/p/5765573933</a>çš„<code>14æ¥¼</code>ï¼Œå¦‚æœè¿˜ä¸è¡Œï¼Œç›´æ¥ç™¾åº¦ï¼Œè‚¯å®šå¯ä»¥è§£å†³çš„ï¼Œæˆ‘<code>MacOS 10.15</code>éƒ½æ˜¯å¯ä»¥å®‰è£…çš„ã€‚</p><h2 id="è®¾ç½®"><a class="header-anchor" href="#è®¾ç½®">#</a>è®¾ç½®</h2><p>åœ¨åº”ç”¨é‡Œæ‰¾ä¸€ä¸ªå«<code>Audio MIDI Setup</code>çš„åº”ç”¨ï¼š</p><center><p><img src="//onns.xyz/blog/image/20200913-4.png" alt="Audio MIDI Setup"></p></center><p>å³ä¸‹è§’é€‰æ‹©<code>Create Aggregate Device</code>ï¼š</p><center><p><img src="//onns.xyz/blog/image/20200913-5.png" alt="Create Aggregate Device"></p></center><p>æ”¹ä¸ªåå­—å«<code>Quicktime Player Input</code>ï¼Œä¸æ”¹ä¹Ÿæ²¡å…³ç³»ï¼Œæ”¹äº†<code>æ–¹ä¾¿æ‰¾</code>ã€‚ç„¶åæŠŠ<code>Built-in Microphone</code>å’Œ<code>Soundflower (2ch)</code>å‹¾ä¸Šï¼Œå¦‚æœå®‰è£…çš„æ˜¯<code>BlackHole</code>ï¼Œåº”è¯¥ä¹Ÿæ˜¯ä¸ªç±»ä¼¼çš„åå­—ï¼š</p><center><p><img src="//onns.xyz/blog/image/20200913-6.jpg" alt="Quicktime Player Input"></p></center><p>å†æ¥ï¼Œå³ä¸‹è§’é€‰æ‹©<code>Create Multi-Output Device</code>ï¼š</p><center><p><img src="//onns.xyz/blog/image/20200913-7.png" alt="Create Multi-Output Device"></p></center><p>æŠŠ<code>Built-in Output</code>å’Œ<code>Soundflower (2ch)</code>å‹¾ä¸Šï¼Œ<code>Drift Correction</code>éšæ„ï¼š</p><center><p><img src="//onns.xyz/blog/image/20200913-8.jpg" alt="Multi-Output Device"></p></center><h2 id="ä½¿ç”¨"><a class="header-anchor" href="#ä½¿ç”¨">#</a>ä½¿ç”¨</h2><p><code>System Preferences</code> -&gt; <code>Sound</code> -&gt; <code>Output</code> -&gt; <code>Multi-Output Device</code>ï¼š</p><center><p><img src="//onns.xyz/blog/image/20200913-9.jpg" alt="Output"></p></center><p>æ³¨æ„ï¼<br>ä¸æ˜¯ä¹‹å‰æ”¹åçš„é‚£ä¸ª<code>Quicktime Player Input</code>ï¼<br>è¦å…ˆè°ƒæ•´å¥½ç³»ç»ŸéŸ³é‡ï¼Œæ”¹åˆ°è¿™ä¸ªæ¨¡å¼ä¸‹æ˜¯ä¸èƒ½ä¿®æ”¹éŸ³é‡çš„ï¼</p><p>ç„¶åæ‰“å¼€<code>QuickTime Player</code> -&gt; <code>File</code> -&gt; <code>New Screen Recording</code>ï¼š</p><center><p><img src="//onns.xyz/blog/image/20200913-10.png" alt="QuickTime Player"></p></center><p><code>Options</code>é‡Œé€‰<code>Quicktime Player Input</code>ï¼š</p><center><p><img src="//onns.xyz/blog/image/20200913-11.jpg" alt="Options"></p></center><p>å¼€å§‹å½•åˆ¶ï¼</p><p>å®Œã€‚</p><h2 id="ç›¸å…³é“¾æ¥"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥">#</a>ç›¸å…³é“¾æ¥</h2><ul><li><a href="https://tieba.baidu.com/p/5765573933" target="_blank" rel="noopener">æ±‚åŠ©ï¼soundflower ä¸€ç›´å®‰è£…å¤±è´¥æ€ä¹ˆåŠï¼Ÿ</a></li><li><a href="https://soundflower.en.softonic.com/mac" target="_blank" rel="noopener">Soundflower</a></li><li><a href="https://github.com/ExistentialAudio/BlackHole" target="_blank" rel="noopener">BlackHole</a></li><li><a href="https://www.youtube.com/watch?v=K7UE8fZjox4" target="_blank" rel="noopener">How to Screen Record with Internal Audio on QuickTime Player | BlackHole Tutorial on Mac</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> macos </tag>
            
            <tag> quicktime player </tag>
            
            <tag> internal audio </tag>
            
            <tag> screen record </tag>
            
            <tag> blackhole </tag>
            
            <tag> soundflower </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcodeé¢˜è§£ï¼šå•è¯æœç´¢</title>
      <link href="/blog/2020/09/13/solution-of-word-search/"/>
      <url>/blog/2020/09/13/solution-of-word-search/</url>
      
        <content type="html"><![CDATA[<h2 id="79-å•è¯æœç´¢"><a class="header-anchor" href="#79-å•è¯æœç´¢">#</a><a href="https://leetcode-cn.com/problems/word-search/" target="_blank" rel="noopener">79. å•è¯æœç´¢</a></h2><p>ç»™å®šä¸€ä¸ªäºŒç»´ç½‘æ ¼å’Œä¸€ä¸ªå•è¯ï¼Œæ‰¾å‡ºè¯¥å•è¯æ˜¯å¦å­˜åœ¨äºç½‘æ ¼ä¸­ã€‚</p><p>å•è¯å¿…é¡»æŒ‰ç…§å­—æ¯é¡ºåºï¼Œé€šè¿‡ç›¸é‚»çš„å•å…ƒæ ¼å†…çš„å­—æ¯æ„æˆï¼Œå…¶ä¸­â€œç›¸é‚»â€å•å…ƒæ ¼æ˜¯é‚£äº›æ°´å¹³ç›¸é‚»æˆ–å‚ç›´ç›¸é‚»çš„å•å…ƒæ ¼ã€‚åŒä¸€ä¸ªå•å…ƒæ ¼å†…çš„å­—æ¯ä¸å…è®¸è¢«é‡å¤ä½¿ç”¨ã€‚</p><p></p><p>ç¤ºä¾‹:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">board &#x3D;</span><br><span class="line">[</span><br><span class="line">  [&#39;A&#39;,&#39;B&#39;,&#39;C&#39;,&#39;E&#39;],</span><br><span class="line">  [&#39;S&#39;,&#39;F&#39;,&#39;C&#39;,&#39;S&#39;],</span><br><span class="line">  [&#39;A&#39;,&#39;D&#39;,&#39;E&#39;,&#39;E&#39;]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">ç»™å®š word &#x3D; &quot;ABCCED&quot;, è¿”å› true</span><br><span class="line">ç»™å®š word &#x3D; &quot;SEE&quot;, è¿”å› true</span><br><span class="line">ç»™å®š word &#x3D; &quot;ABCB&quot;, è¿”å› false</span><br></pre></td></tr></table></figure><p>æç¤ºï¼š</p><p><code>board</code>å’Œ<code>word</code>ä¸­åªåŒ…å«å¤§å†™å’Œå°å†™è‹±æ–‡å­—æ¯ã€‚<br>1 &lt;= <code>board.length</code> &lt;= 200<br>1 &lt;= <code>board[i].length</code> &lt;= 200<br>1 &lt;= <code>word.length</code> &lt;= 10^3</p><a id="more"></a><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> xyz.onns.leetcode;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> Onns</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/9/13 2:57 PM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Website</span> https://onns.xyz/blog/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WordSearch</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="keyword">new</span> WordSearch().<span class="keyword">new</span> Solution().test();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">exist</span><span class="params">(<span class="keyword">char</span>[][] board, String word)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> n = board.length;</span><br><span class="line"><span class="keyword">int</span> m = board[<span class="number">0</span>].length;</span><br><span class="line"><span class="keyword">boolean</span>[][] use = <span class="keyword">new</span> <span class="keyword">boolean</span>[n][m];</span><br><span class="line"><span class="keyword">char</span> first = word.charAt(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; m; j++) &#123;</span><br><span class="line"><span class="keyword">if</span> (board[i][j] == first) &#123;</span><br><span class="line">use[i][j] = <span class="keyword">true</span>;</span><br><span class="line"><span class="keyword">if</span> (dfs(board, word.toCharArray(), use, <span class="number">1</span>, n, m, i, j)) &#123;</span><br><span class="line">use[i][j] = <span class="keyword">false</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">use[i][j] = <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">dfs</span><span class="params">(<span class="keyword">char</span>[][] board, <span class="keyword">char</span>[] word, <span class="keyword">boolean</span>[][] use, <span class="keyword">int</span> index, <span class="keyword">int</span> n, <span class="keyword">int</span> m, <span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (index == word.length) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span>[] opx = &#123;-<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>&#125;;</span><br><span class="line"><span class="keyword">int</span>[] opy = &#123;<span class="number">0</span>, -<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; opx.length; i++) &#123;</span><br><span class="line"><span class="keyword">int</span> x = a + opx[i];</span><br><span class="line"><span class="keyword">int</span> y = b + opy[i];</span><br><span class="line"><span class="keyword">if</span> (legal(x, y, n, m) &amp;&amp; board[x][y] == word[index] &amp;&amp; !use[x][y]) &#123;</span><br><span class="line">use[x][y] = <span class="keyword">true</span>;</span><br><span class="line"><span class="keyword">if</span> (dfs(board, word, use, index + <span class="number">1</span>, n, m, x, y)) &#123;</span><br><span class="line">use[x][y] = <span class="keyword">false</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;</span><br><span class="line">use[x][y] = <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">legal</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j, <span class="keyword">int</span> n, <span class="keyword">int</span> m)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> i &gt;= <span class="number">0</span> &amp;&amp; i &lt; n &amp;&amp; j &gt;= <span class="number">0</span> &amp;&amp; j &lt; m;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">System.out.println(exist(<span class="keyword">new</span> <span class="keyword">char</span>[][]&#123;&#123;<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>, <span class="string">'E'</span>&#125;, &#123;<span class="string">'S'</span>, <span class="string">'F'</span>, <span class="string">'C'</span>, <span class="string">'S'</span>&#125;, &#123;<span class="string">'A'</span>, <span class="string">'D'</span>, <span class="string">'E'</span>, <span class="string">'E'</span>&#125;&#125;, <span class="string">"ABCCED"</span>));</span><br><span class="line">System.out.println(exist(<span class="keyword">new</span> <span class="keyword">char</span>[][]&#123;&#123;<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>, <span class="string">'E'</span>&#125;, &#123;<span class="string">'S'</span>, <span class="string">'F'</span>, <span class="string">'C'</span>, <span class="string">'S'</span>&#125;, &#123;<span class="string">'A'</span>, <span class="string">'D'</span>, <span class="string">'E'</span>, <span class="string">'E'</span>&#125;&#125;, <span class="string">"SEE"</span>));</span><br><span class="line">System.out.println(exist(<span class="keyword">new</span> <span class="keyword">char</span>[][]&#123;&#123;<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>, <span class="string">'E'</span>&#125;, &#123;<span class="string">'S'</span>, <span class="string">'F'</span>, <span class="string">'C'</span>, <span class="string">'S'</span>&#125;, &#123;<span class="string">'A'</span>, <span class="string">'D'</span>, <span class="string">'E'</span>, <span class="string">'E'</span>&#125;&#125;, <span class="string">"ABCB"</span>));</span><br><span class="line">System.out.println(exist(<span class="keyword">new</span> <span class="keyword">char</span>[][]&#123;&#123;<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>, <span class="string">'E'</span>&#125;, &#123;<span class="string">'S'</span>, <span class="string">'F'</span>, <span class="string">'E'</span>, <span class="string">'S'</span>&#125;, &#123;<span class="string">'A'</span>, <span class="string">'D'</span>, <span class="string">'E'</span>, <span class="string">'E'</span>&#125;&#125;, <span class="string">"ABCESEEEFS"</span>));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> tips </tag>
            
            <tag> leetcode </tag>
            
            <tag> dfs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcodeé¢˜è§£ï¼šæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²</title>
      <link href="/blog/2020/09/13/solution-of-longest-substring-without-repeating-characters/"/>
      <url>/blog/2020/09/13/solution-of-longest-substring-without-repeating-characters/</url>
      
        <content type="html"><![CDATA[<h2 id="3-æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²"><a class="header-anchor" href="#3-æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²">#</a><a href="https://leetcode-cn.com/problems/longest-substring-without-repeating-characters/" target="_blank" rel="noopener">3. æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²</a></h2><p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¯·ä½ æ‰¾å‡ºå…¶ä¸­ä¸å«æœ‰é‡å¤å­—ç¬¦çš„<code>æœ€é•¿å­ä¸²</code>çš„é•¿åº¦ã€‚</p><p>ç¤ºä¾‹<code>1</code>:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: &quot;abcabcbb&quot;</span><br><span class="line">è¾“å‡º: 3</span><br><span class="line">è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ &quot;abc&quot;ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹<code>2</code>:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: &quot;bbbbb&quot;</span><br><span class="line">è¾“å‡º: 1</span><br><span class="line">è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ &quot;b&quot;ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 1ã€‚</span><br></pre></td></tr></table></figure><p>ç¤ºä¾‹<code>3</code>:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: &quot;pwwkew&quot;</span><br><span class="line">è¾“å‡º: 3</span><br><span class="line">è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯Â &quot;wke&quot;ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚</span><br><span class="line">Â     è¯·æ³¨æ„ï¼Œä½ çš„ç­”æ¡ˆå¿…é¡»æ˜¯ å­ä¸² çš„é•¿åº¦ï¼Œ&quot;pwke&quot;Â æ˜¯ä¸€ä¸ªå­åºåˆ—ï¼Œä¸æ˜¯å­ä¸²ã€‚</span><br></pre></td></tr></table></figure><a id="more"></a><p>ç™¾åº¦ä¸€é¢ã€‚ğŸ™ƒ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> xyz.onns.leetcode;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> Onns</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/9/13 2:31 PM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Website</span> https://onns.xyz/blog/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LongestSubstringWithoutRepeatingCharacters</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="keyword">new</span> LongestSubstringWithoutRepeatingCharacters().<span class="keyword">new</span> Solution().test();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line"><span class="keyword">char</span>[] c = s.toCharArray();</span><br><span class="line"><span class="keyword">int</span> n = c.length;</span><br><span class="line"><span class="keyword">int</span> l = <span class="number">0</span>, r = <span class="number">0</span>, max = <span class="number">0</span>;</span><br><span class="line">Set&lt;Character&gt; hashSet = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line"><span class="keyword">while</span> (r &lt; n) &#123;</span><br><span class="line"><span class="keyword">while</span> (hashSet.contains(c[r])) &#123;</span><br><span class="line">hashSet.remove(c[l++]);</span><br><span class="line">&#125;</span><br><span class="line">hashSet.add(c[r++]);</span><br><span class="line">max = Math.max(max, r - l);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line">System.out.println(lengthOfLongestSubstring(<span class="string">"bbbbbbbbb"</span>));</span><br><span class="line">System.out.println(lengthOfLongestSubstring(<span class="string">"abcabcbb"</span>));</span><br><span class="line">System.out.println(lengthOfLongestSubstring(<span class="string">"pwwkew"</span>));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> jobs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> tips </tag>
            
            <tag> interview </tag>
            
            <tag> leetcode </tag>
            
            <tag> double pointer </tag>
            
            <tag> åŒæŒ‡é’ˆ </tag>
            
            <tag> baidu </tag>
            
            <tag> ç™¾åº¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨IntelliJ IDEAä¸­æ·»åŠ è‡ªåŠ¨æ³¨é‡Š</title>
      <link href="/blog/2020/09/13/add-file-header-in-idea/"/>
      <url>/blog/2020/09/13/add-file-header-in-idea/</url>
      
        <content type="html"><![CDATA[<p>æ¯æ¬¡éƒ½è¦ç»™æ–‡æ¡£æ·»åŠ æ—¥æœŸç­‰æ³¨é‡Šå¤ªç¹çï¼Œè®¾ç½®ä¸ªè‡ªåŠ¨æ·»åŠ æ³¨é‡Šã€‚</p><a id="more"></a><p><code>IntelliJ IDEA</code> -&gt; <code>Preferences</code>ï¼š</p><center><p><img src="//onns.xyz/blog/image/20200913-1.png" alt="Preferences"></p></center><p><code>Editor</code> -&gt; <code>File and Code Templates</code> -&gt; <code>Includes</code> -&gt; <code>File Header</code>ï¼š</p><center><p><img src="//onns.xyz/blog/image/20200913-2.png" alt="File Header"></p></center><p>ä»¥ä¸‹ä¸¤ç§ä»…ä¾›å‚è€ƒï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by $&#123;USER&#125; on $&#123;DATE&#125; $&#123;TIME&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> Onns</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> $&#123;DATE&#125; $&#123;TIME&#125;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Website</span> https://onns.xyz/blog/</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><p>ç„¶åä¸‹æ¬¡æ–°å»º<code>class</code>çš„æ—¶å€™ï¼Œå°±ä¼šå‡ºç°è‡ªåŠ¨æ³¨é‡Šäº†ï¼š</p><center><p><img src="//onns.xyz/blog/image/20200913-3.png" alt="æ•ˆæœå›¾"></p></center><h2 id="å‚è€ƒé“¾æ¥"><a class="header-anchor" href="#å‚è€ƒé“¾æ¥">#</a>å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://www.cnblogs.com/miracle-luna/p/10638510.html" target="_blank" rel="noopener">IntelliJ IDEA å¦‚ä½•è®¾ç½®æ–°å»ºç±»æ—¶ï¼Œè‡ªåŠ¨æ³¨é‡Šä½œè€…ä¿¡æ¯å’Œæ—¥æœŸæ—¶é—´</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> idea </tag>
            
            <tag> jetbrain </tag>
            
            <tag> java </tag>
            
            <tag> auto annotation </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcodeé¢˜è§£ï¼šæœ€å¤§å­åºå’Œ</title>
      <link href="/blog/2020/09/13/solution-of-maximum-subarray/"/>
      <url>/blog/2020/09/13/solution-of-maximum-subarray/</url>
      
        <content type="html"><![CDATA[<h2 id="53-æœ€å¤§å­åºå’Œ"><a class="header-anchor" href="#53-æœ€å¤§å­åºå’Œ">#</a><a href="https://leetcode-cn.com/problems/maximum-subarray/" target="_blank" rel="noopener">53. æœ€å¤§å­åºå’Œ</a></h2><p>ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„<code>nums</code>ï¼Œæ‰¾åˆ°ä¸€ä¸ªå…·æœ‰æœ€å¤§å’Œçš„è¿ç»­å­æ•°ç»„ï¼ˆå­æ•°ç»„æœ€å°‘åŒ…å«ä¸€ä¸ªå…ƒç´ ï¼‰ï¼Œè¿”å›å…¶æœ€å¤§å’Œã€‚</p><p>ç¤ºä¾‹:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: [-2,1,-3,4,-1,2,1,-5,4]</span><br><span class="line">è¾“å‡º: 6</span><br><span class="line">è§£é‡Š:Â è¿ç»­å­æ•°ç»„Â [4,-1,2,1] çš„å’Œæœ€å¤§ï¼Œä¸ºÂ 6ã€‚</span><br><span class="line">è¿›é˜¶:</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ å·²ç»å®ç°å¤æ‚åº¦ä¸º<code>O(n)</code>çš„è§£æ³•ï¼Œå°è¯•ä½¿ç”¨æ›´ä¸ºç²¾å¦™çš„åˆ†æ²»æ³•æ±‚è§£ã€‚</p><a id="more"></a><h2 id="å†™åœ¨å‰é¢"><a class="header-anchor" href="#å†™åœ¨å‰é¢">#</a>å†™åœ¨å‰é¢</h2><p>ç¾å›¢äºŒé¢çš„ç¬”è¯•é¢˜ï¼Œè‡ªå·±å½“æ—¶çœŸçš„ä¸€ç‚¹æ€è·¯éƒ½æ²¡æœ‰ï¼Œæ²¡åšå‡ºæ¥ï¼Œä¸»è¦æ˜¯<code>O(n)</code>æ—¶é—´å¤æ‚åº¦çš„é™åˆ¶ï¼Œå†åŠ ä¸Šæˆ‘è„‘å­é‡Œçš„åŠ¨æ€è§„åˆ’ä¸€ç›´éƒ½æ˜¯ï¼Œä»<code>i</code>åˆ°<code>j</code>çš„æœ€å¤§å’Œï¼Œç»“æœå°±æŠŠè‡ªå·±ç»•åœ¨é‚£é‡Œå‡ºä¸æ¥äº†ã€‚</p><p>ä½†å…¶å®ï¼Œå¦‚æœå½“æ—¶çŸ¥é“äº†æ€è·¯ï¼ŒçœŸçš„å°±æ˜¯ä¸€é“ï¼Œå¦‚åŠ›æ‰£æ‰€è¯´çš„ï¼Œä¸€é“<code>ç®€å•éš¾åº¦</code>çš„é¢˜ ğŸ˜­</p><h2 id="åŠ¨æ€è§„åˆ’"><a class="header-anchor" href="#åŠ¨æ€è§„åˆ’">#</a>åŠ¨æ€è§„åˆ’</h2><p>æ€è·¯æ˜¯ç”¨äºŒç»´æ•°ç»„æ¥å­˜å±€éƒ¨çš„å’Œï¼Œè¿™æ ·ä¸å¿…æ¯æ¬¡éƒ½ç®—ä¸€æ¬¡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxSubArray</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> n = nums.length;</span><br><span class="line"><span class="keyword">int</span> max = Integer.MIN_VALUE;</span><br><span class="line"><span class="keyword">int</span>[][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[n][n];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">dp[i][i] = nums[i];</span><br><span class="line"><span class="keyword">if</span> (max &lt; nums[i]) &#123;</span><br><span class="line">max = nums[i];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; n; j++) &#123;</span><br><span class="line">dp[i][j] = dp[i][j - <span class="number">1</span>] + nums[j];</span><br><span class="line"><span class="keyword">if</span> (dp[i][j] &gt; max) &#123;</span><br><span class="line">max = dp[i][j];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span>[] nums = &#123;-<span class="number">2</span>, <span class="number">1</span>, -<span class="number">3</span>, <span class="number">4</span>, -<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, -<span class="number">5</span>, <span class="number">4</span>&#125;;</span><br><span class="line">System.out.println(maxSubArray(nums));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯è¿™ä¸ªä»£ç ï¼Œè¿æµ‹è¯•ç”¨ä¾‹éƒ½è·‘ä¸è¿‡ï¼Œ<strong>è¶…å‡ºå†…å­˜é™åˆ¶</strong>ã€‚</p><h2 id="é™ä½ç©ºé—´å¤æ‚åº¦"><a class="header-anchor" href="#é™ä½ç©ºé—´å¤æ‚åº¦">#</a>é™ä½ç©ºé—´å¤æ‚åº¦</h2><p>é¦–å…ˆè§‚å¯Ÿä»£ç ï¼Œå…¶å®<code>d[i][j]</code>åªä¸<code>d[i][j-1]</code>æœ‰å…³ï¼Œæ‰€ä»¥åªéœ€ä½¿ç”¨ä¸€ä¸ªä¸€ç»´æ•°ç»„ï¼Œå³å¯æ»¡è¶³å­˜å‚¨ä»»åŠ¡ã€‚</p><p>è¿›è€Œï¼Œ<code>d[i][j]</code>æœ¬è´¨ä¸Šåªä¸å‰ä¸€ä¸ªæ•°æœ‰å…³ï¼Œé‚£ä¹ˆå…¶å®åªéœ€ç”¨ä¸€ä¸ªå€¼å»å­˜å‰ä¸€ä¸ªå€¼å³å¯ã€‚ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxSubArray</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> n = nums.length;</span><br><span class="line"><span class="keyword">int</span> max = Integer.MIN_VALUE;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line"><span class="keyword">int</span> t = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &lt; n; j++) &#123;</span><br><span class="line">t += nums[j];</span><br><span class="line"><span class="keyword">if</span> (t &gt; max) max = t;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span>[] nums = &#123;-<span class="number">2</span>, <span class="number">1</span>, -<span class="number">3</span>, <span class="number">4</span>, -<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, -<span class="number">5</span>, <span class="number">4</span>&#125;;</span><br><span class="line">System.out.println(maxSubArray(nums));</span><br><span class="line">System.out.println(maxSubArray(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>&#125;));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Success:</span><br><span class="line">Runtime:137 ms, faster than 5.09% of Java online submissions.</span><br><span class="line">Memory Usage:40.1 MB, less than 5.10% of Java online submissions.</span><br></pre></td></tr></table></figure><p>é€šè¿‡äº†æ˜¯é€šè¿‡äº†ï¼Œä½†æ˜¯è¿™é¢˜æœ¬è´¨ä¸Šæ˜¯éœ€è¦<code>O(n)</code>æ—¶é—´å¤æ‚åº¦æ±‚è§£çš„ï¼Œå¾ˆæ˜æ˜¾ï¼Œæ²¡æœ‰è¾¾åˆ°è¦æ±‚ã€‚</p><h2 id="é™ä½æ—¶é—´å¤æ‚åº¦"><a class="header-anchor" href="#é™ä½æ—¶é—´å¤æ‚åº¦">#</a>é™ä½æ—¶é—´å¤æ‚åº¦</h2><p>å¦‚æœå‰é¢çš„æ•°è´¡çŒ®ä¸º<code>æ­£çš„</code>ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„æœ€å¤§å€¼å°±æ˜¯å‰é¢çš„æ•°åŠ ä¸Šå½“å‰çš„æ•°ï¼Œå¦‚æœå‰é¢çš„æ•°æ˜¯<code>è´Ÿçš„</code>ï¼Œé‚£ä¹ˆå¦‚æœå½“å‰çš„å€¼æ¯”å‰é¢çš„æ•°è¿˜å¤§ï¼Œé‚£è¯æ˜å‰é¢çš„â€œå·¥ä½œâ€è¿˜ä¸å¦‚å½“å‰ä¸€ä¸ªäººçš„å·¥ä½œæ¥å¾—å¤šï¼Œé‚£å‰é¢æ‰€æœ‰äººçš„å·¥ä½œéƒ½å¯ä»¥è¢«å½“å‰çš„äººæ‰€æ›¿ä»£ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxSubArray</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> n = nums.length;</span><br><span class="line"><span class="keyword">int</span> max = Integer.MIN_VALUE;</span><br><span class="line"><span class="keyword">int</span> pre = Integer.MIN_VALUE;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line"><span class="keyword">if</span> (pre &lt; <span class="number">0</span> &amp;&amp; pre &lt; nums[i]) &#123;</span><br><span class="line">pre = nums[i];</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">pre += nums[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (pre &gt; max) &#123;</span><br><span class="line">max = pre;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span>[] nums = &#123;-<span class="number">2</span>, <span class="number">1</span>, -<span class="number">3</span>, <span class="number">4</span>, -<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, -<span class="number">5</span>, <span class="number">4</span>&#125;;</span><br><span class="line">System.out.println(maxSubArray(nums));</span><br><span class="line">System.out.println(maxSubArray(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>&#125;));</span><br><span class="line">System.out.println(maxSubArray(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>, <span class="number">2</span>&#125;));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Success:</span><br><span class="line">Runtime:1 ms, faster than 95.99% of Java online submissions.</span><br><span class="line">Memory Usage:40 MB, less than 17.17% of Java online submissions.</span><br></pre></td></tr></table></figure><h2 id="å®˜æ–¹è§£ç­”"><a class="header-anchor" href="#å®˜æ–¹è§£ç­”">#</a>å®˜æ–¹è§£ç­”</h2><p>å‡è®¾ <code>nums</code> æ•°ç»„çš„é•¿åº¦æ˜¯ <em>n</em>ï¼Œä¸‹æ ‡ä» <em>0</em> åˆ° <em>n - 1</em>ã€‚</p><p>æˆ‘ä»¬ç”¨ <em>a<sub>i</sub></em> ä»£è¡¨ <code>nums[i]</code>ï¼Œç”¨ <em>f(i)</em> ä»£è¡¨ä»¥ç¬¬ <em>i</em> ä¸ªæ•°ç»“å°¾çš„ã€Œè¿ç»­å­æ•°ç»„çš„æœ€å¤§å’Œã€ï¼Œé‚£ä¹ˆå¾ˆæ˜¾ç„¶æˆ‘ä»¬è¦æ±‚çš„ç­”æ¡ˆå°±æ˜¯ï¼š</p>$$\begin{aligned}\max\_{0 \leq i \leq n-1}\{f(i)\}\end{aligned}$$<p>å› æ­¤æˆ‘ä»¬åªéœ€è¦æ±‚å‡ºæ¯ä¸ªä½ç½®çš„ <em>f(i)</em>ï¼Œç„¶åè¿”å› <code>f</code> æ•°ç»„ä¸­çš„æœ€å¤§å€¼å³å¯ã€‚é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•æ±‚ <em>f(i)</em> å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥è€ƒè™‘ <em>a_i</em> å•ç‹¬æˆä¸ºä¸€æ®µè¿˜æ˜¯åŠ å…¥ <em>f(i - 1)</em> å¯¹åº”çš„é‚£ä¸€æ®µï¼Œè¿™å–å†³äº <em>a_i</em> å’Œ <em>f(i - 1) + a_i</em> çš„å¤§å°ï¼Œæˆ‘ä»¬å¸Œæœ›è·å¾—ä¸€ä¸ªæ¯”è¾ƒå¤§çš„ï¼Œäºæ˜¯å¯ä»¥å†™å‡ºè¿™æ ·çš„åŠ¨æ€è§„åˆ’è½¬ç§»æ–¹ç¨‹ï¼š</p>$$\begin{aligned}f(i)=\max\{f(i-1)+a_i,a_i\}\end{aligned}$$<p>ä¸éš¾ç»™å‡ºä¸€ä¸ªæ—¶é—´å¤æ‚åº¦ <em>O(n)</em>ã€ç©ºé—´å¤æ‚åº¦ <em>O(n)</em> çš„å®ç°ï¼Œå³ç”¨ä¸€ä¸ª <code>f</code> æ•°ç»„æ¥ä¿å­˜ <em>f(i)</em> çš„å€¼ï¼Œç”¨ä¸€ä¸ªå¾ªç¯æ±‚å‡ºæ‰€æœ‰ <em>f(i)</em>ã€‚è€ƒè™‘åˆ° <em>f(i)</em> åªå’Œ <em>f(i - 1)</em> ç›¸å…³ï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥åªç”¨ä¸€ä¸ªå˜é‡ <code>pre</code> æ¥ç»´æŠ¤å¯¹äºå½“å‰ <em>f(i)</em> çš„ <em>f(i - 1)</em> çš„å€¼æ˜¯å¤šå°‘ï¼Œä»è€Œè®©ç©ºé—´å¤æ‚åº¦é™ä½åˆ° <em>O(1)</em>ï¼Œè¿™æœ‰ç‚¹ç±»ä¼¼ã€Œæ»šåŠ¨æ•°ç»„ã€çš„æ€æƒ³ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxSubArray</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> max = nums[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">int</span> pre = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> n:nums)&#123;</span><br><span class="line">pre = Math.max(pre+n,n);</span><br><span class="line">max = Math.max(pre,max);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span>[] nums = &#123;-<span class="number">2</span>, <span class="number">1</span>, -<span class="number">3</span>, <span class="number">4</span>, -<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, -<span class="number">5</span>, <span class="number">4</span>&#125;;</span><br><span class="line">System.out.println(maxSubArray(nums));</span><br><span class="line">System.out.println(maxSubArray(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>&#125;));</span><br><span class="line">System.out.println(maxSubArray(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>, <span class="number">2</span>&#125;));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Success:</span><br><span class="line">Runtime:1 ms, faster than 95.99% of Java online submissions.</span><br><span class="line">Memory Usage:39.6 MB, less than 85.18% of Java online submissions.</span><br></pre></td></tr></table></figure><h2 id="åˆ†æ²»"><a class="header-anchor" href="#åˆ†æ²»">#</a>åˆ†æ²»</h2><p>æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæ“ä½œ <code>get(a, l, r)</code> è¡¨ç¤ºæŸ¥è¯¢ <em>a</em> åºåˆ— <em>[l, r]</em> åŒºé—´å†…çš„æœ€å¤§å­æ®µå’Œï¼Œé‚£ä¹ˆæœ€ç»ˆæˆ‘ä»¬è¦æ±‚çš„ç­”æ¡ˆå°±æ˜¯ <code>get(nums, 0, nums.size() - 1)</code>ã€‚å¦‚ä½•åˆ†æ²»å®ç°è¿™ä¸ªæ“ä½œå‘¢ï¼Ÿå¯¹äºä¸€ä¸ªåŒºé—´ <em>[l, r]</em>ï¼Œæˆ‘ä»¬å–$$m=\lfloor\frac{l+r}{2}\rfloor$$ï¼Œå¯¹åŒºé—´ <em>[l, m]</em> å’Œ <em>[m + 1, r]</em> åˆ†æ²»æ±‚è§£ã€‚å½“é€’å½’é€å±‚æ·±å…¥ç›´åˆ°åŒºé—´é•¿åº¦ç¼©å°ä¸º <em>1</em> çš„æ—¶å€™ï¼Œé€’å½’ã€Œå¼€å§‹å›å‡ã€ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬è€ƒè™‘å¦‚ä½•é€šè¿‡ <em>[l, m]</em> åŒºé—´çš„ä¿¡æ¯å’Œ <em>[m + 1, r]</em> åŒºé—´çš„ä¿¡æ¯åˆå¹¶æˆåŒºé—´ <em>[l, r]</em> çš„ä¿¡æ¯ã€‚æœ€å…³é”®çš„ä¸¤ä¸ªé—®é¢˜æ˜¯ï¼š</p><ul><li>æˆ‘ä»¬è¦ç»´æŠ¤åŒºé—´çš„å“ªäº›ä¿¡æ¯å‘¢ï¼Ÿ</li><li>æˆ‘ä»¬å¦‚ä½•åˆå¹¶è¿™äº›ä¿¡æ¯å‘¢ï¼Ÿ</li></ul><p>å¯¹äºä¸€ä¸ªåŒºé—´ <em>[l, r]</em>ï¼Œæˆ‘ä»¬å¯ä»¥ç»´æŠ¤å››ä¸ªé‡ï¼š</p><ul><li><code>lSum</code> è¡¨ç¤º <em>[l, r]</em> å†…ä»¥ <em>l</em> ä¸ºå·¦ç«¯ç‚¹çš„æœ€å¤§å­æ®µå’Œ</li><li><code>rSum</code> è¡¨ç¤º <em>[l, r]</em> å†…ä»¥ <em>r</em> ä¸ºå³ç«¯ç‚¹çš„æœ€å¤§å­æ®µå’Œ</li><li><code>mSum</code> è¡¨ç¤º <em>[l, r]</em> å†…çš„æœ€å¤§å­æ®µå’Œ</li><li><code>iSum</code> è¡¨ç¤º <em>[l, r]</em> çš„åŒºé—´å’Œ</li></ul><p>ä»¥ä¸‹ç®€ç§° <em>[l, m]</em> ä¸º <em>[l, r]</em> çš„ã€Œå·¦å­åŒºé—´ã€ï¼Œ<em>[m + 1, r]</em> ä¸º <em>[l, r]</em> çš„ã€Œå³å­åŒºé—´ã€ã€‚æˆ‘ä»¬è€ƒè™‘å¦‚ä½•ç»´æŠ¤è¿™äº›é‡å‘¢ï¼ˆå¦‚ä½•é€šè¿‡å·¦å³å­åŒºé—´çš„ä¿¡æ¯åˆå¹¶å¾—åˆ° <em>[l, r]</em> çš„ä¿¡æ¯ï¼‰ï¼Ÿå¯¹äºé•¿åº¦ä¸º <em>1</em> çš„åŒºé—´ <em>[i, i]</em>ï¼Œå››ä¸ªé‡çš„å€¼éƒ½å’Œ <em>a<sub>i</sub></em> ç›¸ç­‰ã€‚å¯¹äºé•¿åº¦å¤§äº <em>1</em> çš„åŒºé—´ï¼š</p><ul><li>é¦–å…ˆæœ€å¥½ç»´æŠ¤çš„æ˜¯ <code>iSum</code>ï¼ŒåŒºé—´ <em>[l, r]</em> çš„ <code>iSum</code> å°±ç­‰äºã€Œå·¦å­åŒºé—´ã€çš„ <code>iSum</code> åŠ ä¸Šã€Œå³å­åŒºé—´ã€çš„ <code>iSum</code>ã€‚</li><li>å¯¹äº <em>[l, r]</em> çš„ <code>lSum</code>ï¼Œå­˜åœ¨ä¸¤ç§å¯èƒ½ï¼Œå®ƒè¦ä¹ˆç­‰äºã€Œå·¦å­åŒºé—´ã€çš„ <code>lSum</code>ï¼Œè¦ä¹ˆç­‰äºã€Œå·¦å­åŒºé—´ã€çš„ <code>iSum</code> åŠ ä¸Šã€Œå³å­åŒºé—´ã€çš„ <code>lSum</code>ï¼ŒäºŒè€…å–å¤§ã€‚</li><li>å¯¹äº <em>[l, r]</em> çš„ <code>rSum</code>ï¼ŒåŒç†ï¼Œå®ƒè¦ä¹ˆç­‰äºã€Œå³å­åŒºé—´ã€çš„ <code>rSum</code>ï¼Œè¦ä¹ˆç­‰äºã€Œå³å­åŒºé—´ã€çš„ <code>iSum</code> åŠ ä¸Šã€Œå·¦å­åŒºé—´ã€çš„ <code>rSum</code>ï¼ŒäºŒè€…å–å¤§ã€‚</li><li>å½“è®¡ç®—å¥½ä¸Šé¢çš„ä¸‰ä¸ªé‡ä¹‹åï¼Œå°±å¾ˆå¥½è®¡ç®— <em>[l, r]</em> çš„ <code>mSum</code> äº†ã€‚æˆ‘ä»¬å¯ä»¥è€ƒè™‘ <em>[l, r]</em> çš„ <code>mSum</code> å¯¹åº”çš„åŒºé—´æ˜¯å¦è·¨è¶Š <em>m</em>â€”â€”å®ƒå¯èƒ½ä¸è·¨è¶Š <em>m</em>ï¼Œä¹Ÿå°±æ˜¯è¯´ <em>[l, r]</em> çš„ <code>mSum</code> å¯èƒ½æ˜¯ã€Œå·¦å­åŒºé—´ã€çš„ <code>mSum</code> å’Œ ã€Œå³å­åŒºé—´ã€çš„ <code>mSum</code> ä¸­çš„ä¸€ä¸ªï¼›å®ƒä¹Ÿå¯èƒ½è·¨è¶Š <em>m</em>ï¼Œå¯èƒ½æ˜¯ã€Œå·¦å­åŒºé—´ã€çš„ <code>rSum</code> å’Œ ã€Œå³å­åŒºé—´ã€çš„ <code>lSum</code> æ±‚å’Œã€‚ä¸‰è€…å–å¤§ã€‚</li></ul><p>è¿™æ ·é—®é¢˜å°±å¾—åˆ°äº†è§£å†³ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxSubArray</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> get(nums, <span class="number">0</span>, nums.length - <span class="number">1</span>).mSum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Status <span class="title">get</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (l == r) <span class="keyword">return</span> <span class="keyword">new</span> Status(nums[l], nums[l], nums[l], nums[l]);</span><br><span class="line"><span class="keyword">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">Status lSub = get(nums, l, mid);</span><br><span class="line">Status rSub = get(nums, mid + <span class="number">1</span>, r);</span><br><span class="line"><span class="keyword">int</span> iSum = lSub.iSum + rSub.iSum;</span><br><span class="line"><span class="keyword">int</span> lSum = Math.max(lSub.iSum + rSub.lSum, lSub.lSum);</span><br><span class="line"><span class="keyword">int</span> rSum = Math.max(rSub.iSum + lSub.rSum, rSub.rSum);</span><br><span class="line"><span class="keyword">int</span> mSum = Math.max(Math.max(lSub.mSum, rSub.mSum), lSub.rSum + rSub.lSum);</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> Status(lSum, rSum, mSum, iSum);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span>[] nums = &#123;-<span class="number">2</span>, <span class="number">1</span>, -<span class="number">3</span>, <span class="number">4</span>, -<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, -<span class="number">5</span>, <span class="number">4</span>&#125;;</span><br><span class="line">System.out.println(maxSubArray(nums));</span><br><span class="line">System.out.println(maxSubArray(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>&#125;));</span><br><span class="line">System.out.println(maxSubArray(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>, <span class="number">2</span>&#125;));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Status</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> lSum, rSum, mSum, iSum;</span><br><span class="line"></span><br><span class="line">Status(<span class="keyword">int</span> lSum, <span class="keyword">int</span> rSum, <span class="keyword">int</span> mSum, <span class="keyword">int</span> iSum) &#123;</span><br><span class="line"><span class="keyword">this</span>.lSum = lSum;</span><br><span class="line"><span class="keyword">this</span>.rSum = rSum;</span><br><span class="line"><span class="keyword">this</span>.mSum = mSum;</span><br><span class="line"><span class="keyword">this</span>.iSum = iSum;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Success:</span><br><span class="line">Runtime:1 ms, faster than 95.99% of Java online submissions.</span><br><span class="line">Memory Usage:39.9 MB, less than 30.01% of Java online submissions.</span><br></pre></td></tr></table></figure><h2 id="å®Œæ•´ä»£ç "><a class="header-anchor" href="#å®Œæ•´ä»£ç ">#</a>å®Œæ•´ä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> xyz.onns.leetcode;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> Onns</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2020/9/13 11:10 AM</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Website</span> https://onns.xyz/blog/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MaximumSubarray</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="keyword">new</span> MaximumSubarray().<span class="keyword">new</span> Solution().test();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxSubArray</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> get(nums, <span class="number">0</span>, nums.length - <span class="number">1</span>).mSum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">Status <span class="title">get</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (l == r) <span class="keyword">return</span> <span class="keyword">new</span> Status(nums[l], nums[l], nums[l], nums[l]);</span><br><span class="line"><span class="keyword">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">Status lSub = get(nums, l, mid);</span><br><span class="line">Status rSub = get(nums, mid + <span class="number">1</span>, r);</span><br><span class="line"><span class="keyword">int</span> iSum = lSub.iSum + rSub.iSum;</span><br><span class="line"><span class="keyword">int</span> lSum = Math.max(lSub.iSum + rSub.lSum, lSub.lSum);</span><br><span class="line"><span class="keyword">int</span> rSum = Math.max(rSub.iSum + lSub.rSum, rSub.rSum);</span><br><span class="line"><span class="keyword">int</span> mSum = Math.max(Math.max(lSub.mSum, rSub.mSum), lSub.rSum + rSub.lSum);</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> Status(lSum, rSum, mSum, iSum);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span>[] nums = &#123;-<span class="number">2</span>, <span class="number">1</span>, -<span class="number">3</span>, <span class="number">4</span>, -<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, -<span class="number">5</span>, <span class="number">4</span>&#125;;</span><br><span class="line">System.out.println(maxSubArray(nums));</span><br><span class="line">System.out.println(maxSubArray(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>&#125;));</span><br><span class="line">System.out.println(maxSubArray(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>, <span class="number">2</span>&#125;));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Status</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> lSum, rSum, mSum, iSum;</span><br><span class="line"></span><br><span class="line">Status(<span class="keyword">int</span> lSum, <span class="keyword">int</span> rSum, <span class="keyword">int</span> mSum, <span class="keyword">int</span> iSum) &#123;</span><br><span class="line"><span class="keyword">this</span>.lSum = lSum;</span><br><span class="line"><span class="keyword">this</span>.rSum = rSum;</span><br><span class="line"><span class="keyword">this</span>.mSum = mSum;</span><br><span class="line"><span class="keyword">this</span>.iSum = iSum;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution4</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxSubArray</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> max = nums[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">int</span> pre = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> n : nums) &#123;</span><br><span class="line">pre = Math.max(pre + n, n);</span><br><span class="line">max = Math.max(pre, max);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span>[] nums = &#123;-<span class="number">2</span>, <span class="number">1</span>, -<span class="number">3</span>, <span class="number">4</span>, -<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, -<span class="number">5</span>, <span class="number">4</span>&#125;;</span><br><span class="line">System.out.println(maxSubArray(nums));</span><br><span class="line">System.out.println(maxSubArray(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>&#125;));</span><br><span class="line">System.out.println(maxSubArray(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>, <span class="number">2</span>&#125;));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution3</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxSubArray</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> n = nums.length;</span><br><span class="line"><span class="keyword">int</span> max = Integer.MIN_VALUE;</span><br><span class="line"><span class="keyword">int</span> pre = Integer.MIN_VALUE;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line"><span class="keyword">if</span> (pre &lt; <span class="number">0</span> &amp;&amp; pre &lt; nums[i]) &#123;</span><br><span class="line">pre = nums[i];</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">pre += nums[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (pre &gt; max) &#123;</span><br><span class="line">max = pre;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span>[] nums = &#123;-<span class="number">2</span>, <span class="number">1</span>, -<span class="number">3</span>, <span class="number">4</span>, -<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, -<span class="number">5</span>, <span class="number">4</span>&#125;;</span><br><span class="line">System.out.println(maxSubArray(nums));</span><br><span class="line">System.out.println(maxSubArray(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>&#125;));</span><br><span class="line">System.out.println(maxSubArray(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>, <span class="number">2</span>&#125;));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution2</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxSubArray</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> n = nums.length;</span><br><span class="line"><span class="keyword">int</span> max = Integer.MIN_VALUE;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line"><span class="keyword">int</span> t = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &lt; n; j++) &#123;</span><br><span class="line">t += nums[j];</span><br><span class="line"><span class="keyword">if</span> (t &gt; max) max = t;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span>[] nums = &#123;-<span class="number">2</span>, <span class="number">1</span>, -<span class="number">3</span>, <span class="number">4</span>, -<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, -<span class="number">5</span>, <span class="number">4</span>&#125;;</span><br><span class="line">System.out.println(maxSubArray(nums));</span><br><span class="line">System.out.println(maxSubArray(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>&#125;));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution1</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxSubArray</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> n = nums.length;</span><br><span class="line"><span class="keyword">int</span> max = Integer.MIN_VALUE;</span><br><span class="line"><span class="keyword">int</span>[][] dp = <span class="keyword">new</span> <span class="keyword">int</span>[n][n];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">dp[i][i] = nums[i];</span><br><span class="line"><span class="keyword">if</span> (max &lt; nums[i]) &#123;</span><br><span class="line">max = nums[i];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; n; j++) &#123;</span><br><span class="line">dp[i][j] = dp[i][j - <span class="number">1</span>] + nums[j];</span><br><span class="line"><span class="keyword">if</span> (dp[i][j] &gt; max) &#123;</span><br><span class="line">max = dp[i][j];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span>[] nums = &#123;-<span class="number">2</span>, <span class="number">1</span>, -<span class="number">3</span>, <span class="number">4</span>, -<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, -<span class="number">5</span>, <span class="number">4</span>&#125;;</span><br><span class="line">System.out.println(maxSubArray(nums));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒé“¾æ¥"><a class="header-anchor" href="#å‚è€ƒé“¾æ¥">#</a>å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://blog.csdn.net/wilson_m/article/details/81840214" target="_blank" rel="noopener">ã€Javaã€‘å¦‚ä½•æ±‚æœ€å¤§å­æ•°ç»„ä¹‹å’Œ</a></li><li><a href="https://leetcode-cn.com/problems/maximum-subarray/solution/zui-da-zi-xu-he-by-leetcode-solution/" target="_blank" rel="noopener">æœ€å¤§å­åºå’Œ</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> jobs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> tips </tag>
            
            <tag> interview </tag>
            
            <tag> leetcode </tag>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
            <tag> dynamic programming </tag>
            
            <tag> segment tree </tag>
            
            <tag> çº¿æ®µæ ‘ </tag>
            
            <tag> ç¾å›¢ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>concurrentå·¥å…·ç±»</title>
      <link href="/blog/2020/09/12/concurrent-utility-class/"/>
      <url>/blog/2020/09/12/concurrent-utility-class/</url>
      
        <content type="html"><![CDATA[<p>concurrent å·¥å…·ç±»</p><a id="more"></a><h2 id="countdownlatch"><a class="header-anchor" href="#countdownlatch">#</a>CountDownLatch</h2><p><strong>é˜»å¡ç›´åˆ°æ•°å®Œä¸ºæ­¢</strong></p><p>æ¯”å¦‚è¯´ä¸‹ç­é”é—¨ï¼Œå¿…é¡»è¦ç­‰å±‹å­é‡Œæ‰€æœ‰äººéƒ½èµ°äº†ä¹‹åï¼Œæ‰èƒ½é”é—¨ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> xyz.onns.juc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.CountDownLatch;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CountDownLatchTest</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">CountDownLatch countDownLatch = <span class="keyword">new</span> CountDownLatch(<span class="number">9</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">9</span>; i++) &#123;</span><br><span class="line"><span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">System.out.println(Thread.currentThread().getName() + <span class="string">" count down!"</span>);</span><br><span class="line">countDownLatch.countDown();</span><br><span class="line">&#125;, String.valueOf(i + <span class="number">1</span>)).start();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">countDownLatch.await();</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">"Done"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ /Library/Java/JavaVirtualMachines/jdk-13.0.2.jdk/Contents/Home/bin/java -javaagent:/Applications/IntelliJ IDEA.app/Contents/lib/idea_rt.jar=57648:/Applications/IntelliJ IDEA.app/Contents/bin -Dfile.encoding=UTF-8 -classpath /Users/onns/Documents/code/java/jvm/out/production/jvm xyz.onns.juc.CountDownLatchTest</span><br><span class="line">1 count down!</span><br><span class="line">2 count down!</span><br><span class="line">3 count down!</span><br><span class="line">4 count down!</span><br><span class="line">5 count down!</span><br><span class="line">6 count down!</span><br><span class="line">7 count down!</span><br><span class="line">8 count down!</span><br><span class="line">9 count down!</span><br><span class="line">Done</span><br><span class="line"></span><br><span class="line">Process finished with <span class="built_in">exit</span> code 0</span><br></pre></td></tr></table></figure><p>å‡å¦‚ä¸Šé¢çš„<code>i</code>å˜æˆ<code>10</code>ï¼Œç¬¬åä¸ªäººæ˜¯å¦ä¼šâ€œè¢«é”åœ¨é‡Œé¢â€æ˜¯ä¸å›ºå®šçš„ã€‚</p><h2 id="cyclicbarrier"><a class="header-anchor" href="#cyclicbarrier">#</a>CyclicBarrier</h2><p><strong>ç­‰å¾…å‰ç½®æ¡ä»¶å…¨éƒ¨æ»¡è¶³ä¹‹åï¼Œæ‰ä¼šæ‰§è¡Œåé¢çš„æ“ä½œ</strong></p><p>å¿…é¡»è¦é›†é½<code>ä¸ƒé¢—é¾™ç </code>ï¼Œæ‰èƒ½å¬å”¤ç¥é¾™ ğŸ²ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> xyz.onns.juc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.BrokenBarrierException;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.CyclicBarrier;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CyclicBarrierTest</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">CyclicBarrier cyclicBarrier = <span class="keyword">new</span> CyclicBarrier(<span class="number">7</span>, () -&gt; &#123;</span><br><span class="line">System.out.println(<span class="string">"å¬å”¤ç¥é¾™ï¼"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">7</span>; i++) &#123;</span><br><span class="line"><span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">System.out.println(Thread.currentThread().getName() + <span class="string">"æ”¶é›†ç¬¬"</span> + (i + <span class="number">1</span>) + <span class="string">"ä¸ªé¾™ç "</span>);</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">cyclicBarrier.await();</span><br><span class="line">&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">catch</span> (BrokenBarrierException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;, <span class="string">"çº¿ç¨‹"</span> + String.valueOf(i + <span class="number">1</span>)).start();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å†™ï¼Œç¬¬åä¸‰è¡Œä¼šæŠ¥é”™ï¼š</p><blockquote><p>Variable used in lambda expression should be final or effectively final</p></blockquote><p>æŸ¥äº†ä¸€ä¸‹ï¼Œé¦–å…ˆï¼Œè¿™æ ·åšçš„åŸå› æ˜¯ï¼Œå› ä¸º Java æ˜¯è¿™æ ·è§„å®šçš„ï¼š<a href="https://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.27.2" target="_blank" rel="noopener">Lambda Expressions</a></p><blockquote><p>Any local variable, formal parameter, or exception parameter used but not declared in a lambda expression must either be declared final or be effectively final (Â§4.12.4), or a compile-time error occurs where the use is attempted.</p></blockquote><p>è‡³äºä¸ºä»€ä¹ˆä¼šè¿™æ ·è§„å®šï¼Œå‚ç…§è¿™é‡Œï¼š<a href="https://stackoverflow.com/a/4732617/13182099" target="_blank" rel="noopener">Why are only final variables accessible in anonymous class?</a></p><blockquote><p>When you create an instance of an anonymous inner class, any variables which are used within that class have their values copied in via the autogenerated constructor. This avoids the compiler having to autogenerate various extra types to hold the logical state of the â€œlocal variablesâ€, as for example the C# compiler doesâ€¦ (When C# captures a variable in an anonymous function, it really captures the variable - the closure can update the variable in a way which is seen by the main body of the method, and vice versa.)<br>As the value has been copied into the instance of the anonymous inner class, it would look odd if the variable could be modified by the rest of the method - you could have code which appeared to be working with an out-of-date variable (because thatâ€™s effectively what would be happeningâ€¦ youâ€™d be working with a copy taken at a different time). Likewise if you could make changes within the anonymous inner class, developers might expect those changes to be visible within the body of the enclosing method.<br>Making the variable final removes all these possibilities - as the value canâ€™t be changed at all, you donâ€™t need to worry about whether such changes will be visible. The only ways to allow the method and the anonymous inner class see each otherâ€™s changes is to use a mutable type of some description. This could be the enclosing class itself, an array, a mutable wrapper typeâ€¦ anything like that. Basically itâ€™s a bit like communicating between one method and another: changes made to the parameters of one method arenâ€™t seen by its caller, but changes made to the objects referred to by the parameters are seen.</p></blockquote><p>ç®€å•æ¥è¯´ï¼Œå®ç°å¯ä¿®æ”¹çš„å˜é‡åŠŸèƒ½æ‰€å¸¦æ¥ä¾¿åˆ©ï¼Œæ²¡æœ‰éšä¹‹è€Œæ¥çš„é—®é¢˜å¤šã€‚</p><p>è§£å†³åŠæ³•å°±æ˜¯ï¼ŒåŠ ä¸€ä¸ª<code>final</code>å˜é‡ï¼Œå…¶å®ä»<code>Java 1.8</code>ä¹‹åï¼Œä½ ä¸åŠ <code>final</code>å…³é”®å­—ï¼Œåªè¦è¿™ä¸ªå€¼æ²¡è¢«ä¿®æ”¹ï¼Œä¹Ÿä¼šé»˜è®¤è§†ä½œ<code>final</code>çš„ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> xyz.onns.juc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.BrokenBarrierException;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.CyclicBarrier;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CyclicBarrierTest</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">CyclicBarrier cyclicBarrier = <span class="keyword">new</span> CyclicBarrier(<span class="number">7</span>, () -&gt; &#123;</span><br><span class="line">System.out.println(<span class="string">"å¬å”¤ç¥é¾™ï¼"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">7</span>; i++) &#123;</span><br><span class="line"><span class="keyword">int</span> finalI = i;</span><br><span class="line"><span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">System.out.println(Thread.currentThread().getName() + <span class="string">"æ”¶é›†ç¬¬"</span> + (finalI + <span class="number">1</span>) + <span class="string">"ä¸ªé¾™ç "</span>);</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">cyclicBarrier.await();</span><br><span class="line">&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">catch</span> (BrokenBarrierException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;, <span class="string">"çº¿ç¨‹"</span> + String.valueOf(i + <span class="number">1</span>)).start();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ /Library/Java/JavaVirtualMachines/jdk-13.0.2.jdk/Contents/Home/bin/java -javaagent:/Applications/IntelliJ IDEA.app/Contents/lib/idea_rt.jar=57758:/Applications/IntelliJ IDEA.app/Contents/bin -Dfile.encoding=UTF-8 -classpath /Users/onns/Documents/code/java/jvm/out/production/jvm xyz.onns.juc.CyclicBarrierTest</span><br><span class="line">çº¿ç¨‹4æ”¶é›†ç¬¬4ä¸ªé¾™ç </span><br><span class="line">çº¿ç¨‹5æ”¶é›†ç¬¬5ä¸ªé¾™ç </span><br><span class="line">çº¿ç¨‹7æ”¶é›†ç¬¬7ä¸ªé¾™ç </span><br><span class="line">çº¿ç¨‹6æ”¶é›†ç¬¬6ä¸ªé¾™ç </span><br><span class="line">çº¿ç¨‹2æ”¶é›†ç¬¬2ä¸ªé¾™ç </span><br><span class="line">çº¿ç¨‹3æ”¶é›†ç¬¬3ä¸ªé¾™ç </span><br><span class="line">çº¿ç¨‹1æ”¶é›†ç¬¬1ä¸ªé¾™ç </span><br><span class="line">å¬å”¤ç¥é¾™ï¼</span><br><span class="line"></span><br><span class="line">Process finished with <span class="built_in">exit</span> code 0</span><br></pre></td></tr></table></figure><h2 id="ç›¸å…³é“¾æ¥"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥">#</a>ç›¸å…³é“¾æ¥</h2><ul><li><a href="https://blog.csdn.net/qq_36221788/article/details/100584500" target="_blank" rel="noopener">Variable used in lambda expression should be final or effectively final</a></li><li><a href="https://www.jianshu.com/p/e7a51617c568" target="_blank" rel="noopener">ç¼–è¯‘å™¨è¯´ Lambda è¡¨è¾¾å¼ä¸­çš„å˜é‡å¿…é¡»æ˜¯ final çš„ï¼Œæˆ‘åä¸ä¿¡</a></li><li><a href="https://stackoverflow.com/questions/50456920/why-does-variables-in-lambdas-have-to-be-final-or-effectively-final/50457016" target="_blank" rel="noopener">Why does variables in lambdas have to be final or effectively final? [duplicate]</a></li><li><a href="https://stackoverflow.com/questions/25055392/lambdas-local-variables-need-final-instance-variables-dont" target="_blank" rel="noopener">Lambdas: local variables need final, instance variables donâ€™t</a></li><li><a href="https://stackoverflow.com/a/4732617/13182099" target="_blank" rel="noopener">Why are only final variables accessible in anonymous class?</a></li></ul><h2 id="semaphore"><a class="header-anchor" href="#semaphore">#</a>Semaphore</h2><p><strong>ä¿¡å·é‡</strong></p><p>æŠ¢è½¦ä½ï¼Œæœ‰ç©ºè½¦ä½æ‰èƒ½åœè½¦</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> xyz.onns.juc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Semaphore;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SemaphoreTest</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">Semaphore semaphore = <span class="keyword">new</span> Semaphore(<span class="number">3</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">9</span>; i++) &#123;</span><br><span class="line"><span class="keyword">int</span> finalI = i % <span class="number">3</span> + <span class="number">1</span>;</span><br><span class="line"><span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">semaphore.acquire(finalI);</span><br><span class="line">System.out.println(Thread.currentThread().getName() + <span class="string">"è·å¾—äº†"</span> + finalI + <span class="string">"ä¸ªè½¦ä½"</span>);</span><br><span class="line">TimeUnit.SECONDS.sleep(<span class="number">2</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; finalI; j++) &#123;</span><br><span class="line">semaphore.release();</span><br><span class="line">System.out.println(Thread.currentThread().getName() + <span class="string">"é‡Šæ”¾äº†ç¬¬"</span> + (j + <span class="number">1</span>) + <span class="string">"ä¸ªè½¦ä½"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;, String.valueOf(i + <span class="number">1</span>)).start();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">$ /Library/Java/JavaVirtualMachines/jdk-13.0.2.jdk/Contents/Home/bin/java -javaagent:/Applications/IntelliJ IDEA.app/Contents/lib/idea_rt.jar=58074:/Applications/IntelliJ IDEA.app/Contents/bin -Dfile.encoding=UTF-8 -classpath /Users/onns/Documents/code/java/jvm/out/production/jvm xyz.onns.juc.SemaphoreTest</span><br><span class="line">1è·å¾—äº†1ä¸ªè½¦ä½</span><br><span class="line">2è·å¾—äº†2ä¸ªè½¦ä½</span><br><span class="line">1é‡Šæ”¾äº†ç¬¬1ä¸ªè½¦ä½</span><br><span class="line">2é‡Šæ”¾äº†ç¬¬1ä¸ªè½¦ä½</span><br><span class="line">2é‡Šæ”¾äº†ç¬¬2ä¸ªè½¦ä½</span><br><span class="line">3è·å¾—äº†3ä¸ªè½¦ä½</span><br><span class="line">4è·å¾—äº†1ä¸ªè½¦ä½</span><br><span class="line">3é‡Šæ”¾äº†ç¬¬1ä¸ªè½¦ä½</span><br><span class="line">3é‡Šæ”¾äº†ç¬¬2ä¸ªè½¦ä½</span><br><span class="line">3é‡Šæ”¾äº†ç¬¬3ä¸ªè½¦ä½</span><br><span class="line">5è·å¾—äº†2ä¸ªè½¦ä½</span><br><span class="line">5é‡Šæ”¾äº†ç¬¬1ä¸ªè½¦ä½</span><br><span class="line">4é‡Šæ”¾äº†ç¬¬1ä¸ªè½¦ä½</span><br><span class="line">6è·å¾—äº†3ä¸ªè½¦ä½</span><br><span class="line">5é‡Šæ”¾äº†ç¬¬2ä¸ªè½¦ä½</span><br><span class="line">6é‡Šæ”¾äº†ç¬¬1ä¸ªè½¦ä½</span><br><span class="line">6é‡Šæ”¾äº†ç¬¬2ä¸ªè½¦ä½</span><br><span class="line">7è·å¾—äº†1ä¸ªè½¦ä½</span><br><span class="line">6é‡Šæ”¾äº†ç¬¬3ä¸ªè½¦ä½</span><br><span class="line">8è·å¾—äº†2ä¸ªè½¦ä½</span><br><span class="line">8é‡Šæ”¾äº†ç¬¬1ä¸ªè½¦ä½</span><br><span class="line">8é‡Šæ”¾äº†ç¬¬2ä¸ªè½¦ä½</span><br><span class="line">7é‡Šæ”¾äº†ç¬¬1ä¸ªè½¦ä½</span><br><span class="line">9è·å¾—äº†3ä¸ªè½¦ä½</span><br><span class="line">9é‡Šæ”¾äº†ç¬¬1ä¸ªè½¦ä½</span><br><span class="line">9é‡Šæ”¾äº†ç¬¬2ä¸ªè½¦ä½</span><br><span class="line">9é‡Šæ”¾äº†ç¬¬3ä¸ªè½¦ä½</span><br><span class="line"></span><br><span class="line">Process finished with <span class="built_in">exit</span> code 0</span><br></pre></td></tr></table></figure><p>åœ¨æ•™ç¨‹çš„åŸºç¡€ä¸Šæ”¹å˜äº†äº›ï¼Œå‘ç°å‡º bug äº†= =</p><center><p><img src="//onns.xyz/blog/image/20200912-14.jpg" alt="å‡ºç°é—®é¢˜"></p></center><p>æ‰¾äº†åŠä¸ªå¤šå°æ—¶ï¼Œè§£å†³äº†ï¼</p><p>é‡Šæ”¾è½¦ä½è¾“å‡ºåˆ°æ§åˆ¶å°ï¼Œä¸åº”è¯¥åœ¨åœ¨é‡Šæ”¾ä¹‹åï¼Œè¿™æ ·å¯èƒ½ä¼šï¼Œé‡Šæ”¾äº†ä½†æ˜¯æ¥ä¸åŠæ‰“å°ï¼Œé‚£è¾¹çº¿ç¨‹å°±å·²ç»æ‹¿åˆ°è½¦ä½äº†ã€‚</p><p><code>é‡Šæ”¾è½¦ä½</code> -&gt; <code>è·å¾—è½¦ä½</code> -&gt; <code>æ‰“å°è¾“å‡º</code></p><p><code>é‡Šæ”¾è½¦ä½</code> -&gt; <code>æ‰“å°è¾“å‡º</code> -&gt; <code>è·å¾—è½¦ä½</code></p><p>ç¬¬ä¸€æ­¥ä¹‹åï¼Œå¦å¤–çš„ä¸¤æ­¥æ˜¯æ²¡æœ‰åŠæ³•ä¿è¯é¡ºåºçš„ï¼æ‰€ä»¥æ”¹ä¸ºï¼š</p><p><code>æ‰“å°è¾“å‡º</code> -&gt; <code>é‡Šæ”¾è½¦ä½</code> -&gt; <code>è·å¾—è½¦ä½</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> xyz.onns.juc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Semaphore;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SemaphoreTest</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">Semaphore semaphore = <span class="keyword">new</span> Semaphore(<span class="number">3</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">9</span>; i++) &#123;</span><br><span class="line"><span class="keyword">int</span> finalI = i % <span class="number">3</span> + <span class="number">1</span>;</span><br><span class="line"><span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">semaphore.acquire(finalI);</span><br><span class="line">System.out.println(<span class="string">"çº¿ç¨‹"</span> + Thread.currentThread().getName() + <span class="string">"è·å¾—äº†"</span> + finalI + <span class="string">"ä¸ªè½¦ä½"</span>);</span><br><span class="line">TimeUnit.SECONDS.sleep(<span class="number">2</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; finalI; j++) &#123;</span><br><span class="line">System.out.println(<span class="string">"çº¿ç¨‹"</span> + Thread.currentThread().getName() + <span class="string">"é‡Šæ”¾ç¬¬"</span> + (j + <span class="number">1</span>) + <span class="string">"ä¸ªè½¦ä½"</span>);</span><br><span class="line">semaphore.release();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;, String.valueOf(i + <span class="number">1</span>)).start();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">$ /Library/Java/JavaVirtualMachines/jdk-13.0.2.jdk/Contents/Home/bin/java -javaagent:/Applications/IntelliJ IDEA.app/Contents/lib/idea_rt.jar=58503:/Applications/IntelliJ IDEA.app/Contents/bin -Dfile.encoding=UTF-8 -classpath /Users/onns/Documents/code/java/jvm/out/production/jvm xyz.onns.juc.SemaphoreTest</span><br><span class="line">çº¿ç¨‹1è·å¾—äº†1ä¸ªè½¦ä½</span><br><span class="line">çº¿ç¨‹2è·å¾—äº†2ä¸ªè½¦ä½</span><br><span class="line">çº¿ç¨‹1é‡Šæ”¾ç¬¬1ä¸ªè½¦ä½</span><br><span class="line">çº¿ç¨‹2é‡Šæ”¾ç¬¬1ä¸ªè½¦ä½</span><br><span class="line">çº¿ç¨‹2é‡Šæ”¾ç¬¬2ä¸ªè½¦ä½</span><br><span class="line">çº¿ç¨‹3è·å¾—äº†3ä¸ªè½¦ä½</span><br><span class="line">çº¿ç¨‹3é‡Šæ”¾ç¬¬1ä¸ªè½¦ä½</span><br><span class="line">çº¿ç¨‹3é‡Šæ”¾ç¬¬2ä¸ªè½¦ä½</span><br><span class="line">çº¿ç¨‹4è·å¾—äº†1ä¸ªè½¦ä½</span><br><span class="line">çº¿ç¨‹3é‡Šæ”¾ç¬¬3ä¸ªè½¦ä½</span><br><span class="line">çº¿ç¨‹5è·å¾—äº†2ä¸ªè½¦ä½</span><br><span class="line">çº¿ç¨‹4é‡Šæ”¾ç¬¬1ä¸ªè½¦ä½</span><br><span class="line">çº¿ç¨‹5é‡Šæ”¾ç¬¬1ä¸ªè½¦ä½</span><br><span class="line">çº¿ç¨‹5é‡Šæ”¾ç¬¬2ä¸ªè½¦ä½</span><br><span class="line">çº¿ç¨‹6è·å¾—äº†3ä¸ªè½¦ä½</span><br><span class="line">çº¿ç¨‹6é‡Šæ”¾ç¬¬1ä¸ªè½¦ä½</span><br><span class="line">çº¿ç¨‹6é‡Šæ”¾ç¬¬2ä¸ªè½¦ä½</span><br><span class="line">çº¿ç¨‹7è·å¾—äº†1ä¸ªè½¦ä½</span><br><span class="line">çº¿ç¨‹6é‡Šæ”¾ç¬¬3ä¸ªè½¦ä½</span><br><span class="line">çº¿ç¨‹8è·å¾—äº†2ä¸ªè½¦ä½</span><br><span class="line">çº¿ç¨‹8é‡Šæ”¾ç¬¬1ä¸ªè½¦ä½</span><br><span class="line">çº¿ç¨‹7é‡Šæ”¾ç¬¬1ä¸ªè½¦ä½</span><br><span class="line">çº¿ç¨‹8é‡Šæ”¾ç¬¬2ä¸ªè½¦ä½</span><br><span class="line">çº¿ç¨‹9è·å¾—äº†3ä¸ªè½¦ä½</span><br><span class="line">çº¿ç¨‹9é‡Šæ”¾ç¬¬1ä¸ªè½¦ä½</span><br><span class="line">çº¿ç¨‹9é‡Šæ”¾ç¬¬2ä¸ªè½¦ä½</span><br><span class="line">çº¿ç¨‹9é‡Šæ”¾ç¬¬3ä¸ªè½¦ä½</span><br><span class="line"></span><br><span class="line">Process finished with <span class="built_in">exit</span> code 0</span><br></pre></td></tr></table></figure><p>å®Œã€‚</p>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> juc </tag>
            
            <tag> concurrent </tag>
            
            <tag> countdownlatch </tag>
            
            <tag> cyclicbarrier </tag>
            
            <tag> semaphore </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨Excelä¸­ä½¿ç”¨å®</title>
      <link href="/blog/2020/09/12/use-vba-in-excel/"/>
      <url>/blog/2020/09/12/use-vba-in-excel/</url>
      
        <content type="html"><![CDATA[<p>å·¥ä½œäº¤æ¥ï½</p><a id="more"></a><h2 id="xls-è½¬-xlsx"><a class="header-anchor" href="#xls-è½¬-xlsx">#</a>xls è½¬ xlsx</h2><p>ä¸€èˆ¬æ‹¿åˆ°çš„è¯¾ç¨‹<code>excel</code>æ–‡ä»¶éƒ½æ˜¯<code>xls</code>çš„è€ç‰ˆåç¼€ï¼Œæ‰€ä»¥ç¬¬ä¸€æ­¥æ˜¯å¦å­˜ä¸ºä¸€ä¸ªæ–°ç‰ˆçš„<code>xlsx</code>åç¼€çš„æ–‡ä»¶ï¼š<code>new.xlsx</code>ã€‚</p><center><p><img src="//onns.xyz/blog/image/20200912-1.png" alt="å¦å­˜ä¸º"></p></center><h2 id="å»æ‰è¯¾ç¨‹ç¼–å·"><a class="header-anchor" href="#å»æ‰è¯¾ç¨‹ç¼–å·">#</a>å»æ‰è¯¾ç¨‹ç¼–å·</h2><p>æ­£å¸¸ä¸€ä¸ªè¯¾ç¨‹çš„åå­—æ˜¯<code>è¯¾ç¨‹ä»£å·-è¯¾ç¨‹å</code>è¿™ç§æ ¼å¼ï¼Œæ¯”å¦‚ï¼š<code>0410303-ä¸­å…±é‡è¦ä¼šè®®è¿°è¯„åŠä¸“é¢˜ç ”ç©¶</code>ï¼Œéœ€è¦å…ˆæŠŠå‰é¢çš„<code>è¯¾ç¨‹ä»£å·</code>å’Œ<code>-</code>å»æ‰ã€‚</p><center><p><img src="//onns.xyz/blog/image/20200912-2.png" alt="è¯¾ç¨‹å"></p></center><p>é€‰ä¸­è¯¾ç¨‹çš„åˆ—ï¼Œ<code>å³é”®</code>-&gt;<code>æ’å…¥</code>ï¼š</p><center><p><img src="//onns.xyz/blog/image/20200912-3.png" alt="æ’å…¥"></p></center><h2 id="é”®å…¥å…¬å¼"><a class="header-anchor" href="#é”®å…¥å…¬å¼">#</a>é”®å…¥å…¬å¼</h2><p>å»é™¤çš„å…¬å¼å¦‚ä¸‹ï¼š</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">=<span class="built_in">MID</span>(<span class="symbol">F2</span>,<span class="built_in">SEARCH</span>(<span class="string">"-"</span>,<span class="symbol">F2</span>)+<span class="number">1</span>,<span class="built_in">LEN</span>(<span class="symbol">F2</span>))</span><br></pre></td></tr></table></figure><center><p><img src="//onns.xyz/blog/image/20200912-4.png" alt="å…¬å¼"></p></center><p>è¿™é‡Œé¢çš„<code>F2</code>æ˜¯åŒè¡Œçš„è¯¾ç¨‹ç¼–å·æ‰€åœ¨çš„è¡¨æ ¼ä½ç½®ï¼Œåˆ°æ—¶å€™ä½ çœ‹ç€æ”¹ã€‚</p><center><p><img src="//onns.xyz/blog/image/20200912-5.png" alt="æ‹–åŠ¨"></p></center><p>ç„¶å<code>å·¦é”®</code>æ”¾åˆ°<code>å•å…ƒæ ¼</code>çš„<code>å³ä¸‹è§’</code>ï¼Œæ‹‰åŠ¨åˆ°æœ€åä¸€è¡Œï¼Œå°±å¯ä»¥å®Œæˆæ‰€æœ‰çš„æ›¿æ¢ï¼š</p><center><p><img src="//onns.xyz/blog/image/20200912-6.png" alt="æ•ˆæœå›¾"></p></center><p>å¯¹äº†ï¼Œè®°å¾—æŠŠ<code>æ ‡é¢˜æ </code>é‚£è¡Œå¡«ä¸€ç‚¹ä¸œè¥¿ï¼Œä¸ç„¶å¾…ä¼šä¼šæŠ¥é”™ï¼Œéšä¾¿å¡«ä»€ä¹ˆéƒ½è¡Œï¼š</p><center><p><img src="//onns.xyz/blog/image/20200912-13.png" alt="æ ‡é¢˜æ "></p></center><h2 id="å¼€å¯å®"><a class="header-anchor" href="#å¼€å¯å®">#</a>å¼€å¯å®</h2><p><code>è§†å›¾</code> -&gt; <code>å®</code> -&gt; <code>å½•åˆ¶å®</code>ï¼š</p><center><p><img src="//onns.xyz/blog/image/20200912-7.png" alt="å½•åˆ¶å®"></p></center><p><code>ç¡®å®š</code>ï¼š</p><center><p><img src="//onns.xyz/blog/image/20200912-8.png" alt="ç¡®å®š"></p></center><p>ç„¶åä»€ä¹ˆéƒ½ä¸ç”¨ç‚¹ï¼Œ<code>è§†å›¾</code> -&gt; <code>å®</code> -&gt; <code>åœæ­¢å½•åˆ¶</code>ï¼š</p><center><p><img src="//onns.xyz/blog/image/20200912-9.png" alt="åœæ­¢å½•åˆ¶"></p></center><p><code>è§†å›¾</code> -&gt; <code>å®</code> -&gt; <code>æŸ¥çœ‹å®</code>ï¼š</p><center><p><img src="//onns.xyz/blog/image/20200912-10.png" alt="æŸ¥çœ‹å®"></p></center><p><code>ç¼–è¾‘</code>ï¼š</p><center><p><img src="//onns.xyz/blog/image/20200912-11.png" alt="ç¼–è¾‘"></p></center><p>ç„¶åä¼šæœ‰ä¸€ä¸ªå¦‚ä¸‹çš„é¡µé¢ï¼š</p><center><p><img src="//onns.xyz/blog/image/20200912-12.png" alt="vbaç•Œé¢"></p></center><h2 id="é”®å…¥å®"><a class="header-anchor" href="#é”®å…¥å®">#</a>é”®å…¥å®</h2><p>å‚è€ƒ<a href="https://onns.xyz/blog/2020/02/19/find-string-in-excel/#%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81">å®Œæ•´ä»£ç </a>ï¼ŒæŠŠ<code>1-64</code>è¡Œçš„ä»£ç ï¼Œ<code>ctrl c</code>å¤åˆ¶ä¸€ä¸‹ï¼Œå›åˆ°ä¸Šä¸€ä¸ªç•Œé¢ï¼Œ<code>ctrl a</code>é€‰æ‹©å½“å‰æ‰€æœ‰å†…å®¹ï¼Œ<code>ctrl v</code>æ›¿æ¢ã€‚</p><p>æ³¨æ„çš„æ˜¯<code>nameRow</code>è¿™ä¸ªå˜é‡æ˜¯æ¯æ¬¡éƒ½å˜çš„ï¼Œè¿™æ¬¡æˆ‘ä»¬æ˜¯<code>E</code>åˆ—ï¼Œæ‰€ä»¥æ˜¯<code>5</code>ï¼š</p><center><p><img src="//onns.xyz/blog/image/20200912-14.png" alt="Eåˆ—"></p></center><center><p><img src="//onns.xyz/blog/image/20200912-15.png" alt="5"></p></center><p><code>ä¿å­˜</code>æŒ‰é’®ï¼š</p><center><p><img src="//onns.xyz/blog/image/20200912-16.png" alt="ä¿å­˜"></p></center><p><code>æ˜¯</code>ï¼š</p><center><p><img src="//onns.xyz/blog/image/20200912-17.png" alt="æ˜¯"></p></center><p><code>è§†å›¾</code> -&gt; <code>å®</code> -&gt; <code>æŸ¥çœ‹å®</code> -&gt; <code>FindAndMark</code> -&gt; <code>æ‰§è¡Œ</code>ï¼š</p><center><p><img src="//onns.xyz/blog/image/20200912-18.png" alt="æ‰§è¡Œ"></p></center><p>æ”¶å·¥</p><h2 id="åç»­"><a class="header-anchor" href="#åç»­">#</a>åç»­</h2><p>æ³¨æ„äº‹é¡¹éƒ½åœ¨è¿™è¾¹ï¼š<a href="https://onns.xyz/blog/2020/02/19/find-string-in-excel/">https://onns.xyz/blog/2020/02/19/find-string-in-excel/</a>ï¼Œä¹Ÿå»çœ‹ä¸‹ã€‚</p><p>å®Œã€‚</p>]]></content>
      
      
      <categories>
          
          <category> xmu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> excel </tag>
            
            <tag> windows </tag>
            
            <tag> vba </tag>
            
            <tag> liberal </tag>
            
            <tag> xls </tag>
            
            <tag> xlsx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JSP</title>
      <link href="/blog/2020/09/10/jsp-1/"/>
      <url>/blog/2020/09/10/jsp-1/</url>
      
        <content type="html"><![CDATA[<h2 id="jsp-çƒ­æ›´æ–°"><a class="header-anchor" href="#jsp-çƒ­æ›´æ–°">#</a>JSP çƒ­æ›´æ–°</h2><p>ä¹‹å‰å†™ Java Servlet çš„æ—¶å€™ï¼Œæ¯å†™ä¸€ä¸ªå°±è¦é‡æ–°å¯åŠ¨ä¸€æ¬¡<code>tomcat</code>ï¼Œéº»çƒ¦æ­»ï¼Œç»ˆäºåˆ°<code>jsp</code>è¿™é‡Œå¯ä»¥çƒ­æ›´æ–°äº†ã€‚</p><p>åœ¨<code>Deployment</code>çš„ç•Œé¢é‡Œé€‰å¸¦<strong>exploded</strong>åç¼€çš„ã€‚</p><center><p><img src="//onns.xyz/blog/image/20200910-9.png" alt="Deploymentç•Œé¢"></p></center><p>ç„¶ååœ¨<code>Server</code>ç•Œé¢ï¼ŒæŠŠ<code>On 'Update' action:</code>å’Œ<code>On frame deactivation:</code>æ”¹æ‰ï¼Œé‡å¯å°±å¯ä»¥äº†ã€‚</p><center><p><img src="//onns.xyz/blog/image/20200910-10.png" alt="Serverç•Œé¢"></p></center><p>æˆ‘è¿™æ ·é…äº†ä¹‹åä¸ç”Ÿæ•ˆï¼Œæ‰¾äº†åŠå¤©åŸå› ï¼Œå‘ç°é‡å¯å°±å¯ä»¥äº†ï¼Œå”‰ â•®(â•¯â–½â•°)â•­</p><a id="more"></a><h2 id="jsp-è¯­æ³•"><a class="header-anchor" href="#jsp-è¯­æ³•">#</a>JSP è¯­æ³•</h2><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;%----%&gt;</span><br><span class="line">&lt;%%&gt;</span><br><span class="line">&lt;%=%&gt;</span><br><span class="line">&lt;%!%&gt;</span><br></pre></td></tr></table></figure><h2 id="jsp-æŒ‡ä»¤"><a class="header-anchor" href="#jsp-æŒ‡ä»¤">#</a>JSP æŒ‡ä»¤</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: onns</span><br><span class="line">  Date: <span class="number">2020</span>/<span class="number">9</span>/<span class="number">10</span></span><br><span class="line">  Time: <span class="number">12</span>:<span class="number">11</span> AM</span><br><span class="line">  To change <span class="keyword">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%<span class="meta">@include</span> file=<span class="string">"common/header.jsp"</span>%&gt;</span><br><span class="line">&lt;h1&gt;Main!&lt;/h1&gt;</span><br><span class="line">&lt;%<span class="meta">@include</span> file=<span class="string">"common/footer.jsp"</span>%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h2 id="ç›¸å…³é”™è¯¯é¡µ"><a class="header-anchor" href="#ç›¸å…³é”™è¯¯é¡µ">#</a>ç›¸å…³é”™è¯¯é¡µ</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">error-page</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">error-code</span>&gt;</span>404<span class="tag">&lt;/<span class="name">error-code</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">location</span>&gt;</span>/error/404.jsp<span class="tag">&lt;/<span class="name">location</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">error-page</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">error-page</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">error-code</span>&gt;</span>500<span class="tag">&lt;/<span class="name">error-code</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">location</span>&gt;</span>/error/500.jsp<span class="tag">&lt;/<span class="name">location</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">error-page</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="jsp-æœ¬è´¨"><a class="header-anchor" href="#jsp-æœ¬è´¨">#</a>JSP æœ¬è´¨</h2><p><code>JSP</code>çš„æœ¬è´¨æ˜¯ï¼Œåœ¨è®¿é—®æŸä¸€ä¸ªæ¯”å¦‚<code>hello.jsp</code>é¡µé¢çš„æ—¶å€™ï¼Œ<code>tomcat</code>å°†<code>hello.jsp</code>æ–‡ä»¶ç”Ÿæˆäº†<code>hello.java</code>æ–‡ä»¶ï¼Œå¹¶ç¼–è¯‘æˆ<code>hello.class</code>æ–‡ä»¶ï¼Œæœ€ç»ˆè¢«<code>tomcat</code>æ‰€è§£æï¼Œç„¶åè¿”å›ç»™æµè§ˆå™¨ã€‚</p><h2 id="jsp-å†…ç½®å¯¹è±¡"><a class="header-anchor" href="#jsp-å†…ç½®å¯¹è±¡">#</a>JSP å†…ç½®å¯¹è±¡</h2><ul><li>PageContext å­˜ä¸œè¥¿</li><li>Request å­˜ä¸œè¥¿</li><li>Response</li><li>Session å­˜ä¸œè¥¿</li><li>Application (ServletContext) å­˜ä¸œè¥¿</li><li>Config (ServletConfig)</li><li>Out</li><li>Page</li><li>Exception</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pageContext.setAttribute(<span class="string">"nameCon"</span>,<span class="string">"Con"</span>); <span class="comment">// ä¿å­˜çš„æ•°æ®åªä¼šåœ¨ä¸€ä¸ªé¡µé¢ä¸­æœ‰æ•ˆ</span></span><br><span class="line">request.setAttribute(<span class="string">"nameReq"</span>,<span class="string">"Req"</span>); <span class="comment">// ä¿å­˜çš„æ•°æ®åªä¼šåœ¨ä¸€æ¬¡è¯·æ±‚ä¸­æœ‰æ•ˆï¼Œè¯·æ±‚è½¬å‘ä¼šæºå¸¦è¿™ä¸ªæ•°æ®</span></span><br><span class="line">session.setAttribute(<span class="string">"nameSes"</span>,<span class="string">"Ses"</span>); <span class="comment">// ä¿å­˜çš„æ•°æ®åªä¼šåœ¨ä¸€æ¬¡ä¼šè¯ä¸­æœ‰æ•ˆï¼Œä»æ‰“å¼€æµè§ˆå™¨åˆ°å…³é—­æµè§ˆå™¨</span></span><br><span class="line">application.setAttribute(<span class="string">"nameApp"</span>,<span class="string">"App"</span>); <span class="comment">// ä¿å­˜çš„æ•°æ®ä¼šåœ¨æœåŠ¡å™¨è¿è¡Œæ—¶ä¸€ç›´æœ‰æ•ˆï¼Œä»æ‰“å¼€æœåŠ¡å™¨åˆ°å…³é—­æœåŠ¡å™¨</span></span><br></pre></td></tr></table></figure><h2 id="ç›¸å…³é“¾æ¥"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥">#</a>ç›¸å…³é“¾æ¥</h2><ul><li><a href="https://www.bilibili.com/video/BV12J411M7Sj?p=19" target="_blank" rel="noopener">æ•™ç¨‹åœ°å€</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> idea </tag>
            
            <tag> java </tag>
            
            <tag> macos </tag>
            
            <tag> servlet </tag>
            
            <tag> maven </tag>
            
            <tag> jsp </tag>
            
            <tag> tomcat </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‘¨æŠ¥-20200910</title>
      <link href="/blog/2020/09/10/weekly-report-20200910/"/>
      <url>/blog/2020/09/10/weekly-report-20200910/</url>
      
        <content type="html"><![CDATA[<center><table><thead><tr><th style="text-align:center">2020-09-10</th><th style="text-align:center">å‘¨æŠ¥#04</th><th style="text-align:center">åˆ˜æ½˜</th></tr></thead><tbody></tbody></table></center><a id="more"></a><h2 id="i-task-achieved-last-week"><a class="header-anchor" href="#i-task-achieved-last-week">#</a>I. Task achieved last week</h2><hr><ul><li>ã€ŠGate-Shift Networks for Video Action Recognitionã€‹</li><li>ã€ŠTSM Temporal Shift Module for Efficient Video Understandingã€‹</li><li>ã€ŠPAN: Towards Fast Action Recognition via Learning Persistence of Appearanceã€‹è¿™ç¯‡æ˜¯ä»Šå¹´å…«æœˆæ–°å‘çš„ï¼Œåœ¨something-something-v1æ•°æ®é›†æ˜¯ç›®å‰çš„top1ã€‚</li><li>TSMå’ŒPANè·‘äº†å®éªŒæµ‹è¯•äº†ä¸€ä¸‹ã€‚</li></ul><h2 id="ii-reports"><a class="header-anchor" href="#ii-reports">#</a>II. Reports</h2><hr><h3 id="gate-shift-networks-for-video-action-recognition"><a class="header-anchor" href="#gate-shift-networks-for-video-action-recognition">#</a>Gate-Shift Networks for Video Action Recognition</h3><p>ç”¨äºè¡Œä¸ºè¯†åˆ«çš„<code>Gate-Shift</code>ç½‘ç»œ</p><p>åœ¨å®è·µä¸­ï¼Œç”±äºæ¶‰åŠå¤§é‡çš„å‚æ•°å’Œè®¡ç®—ï¼Œåœ¨ç¼ºä¹è¶³å¤Ÿå¤§çš„æ•°æ®é›†è¿›è¡Œå¤§è§„æ¨¡è®­ç»ƒçš„æƒ…å†µä¸‹ï¼Œ<code>C3D</code>å¯èƒ½è¡¨ç°ä¸ä½³ã€‚</p><center><p><img src="//onns.xyz/blog/image/20200910-5.png" alt="GSM"></p></center><p>æå‡ºäº†ä¸€ç§<code>Gate-Shift Module(GSM)</code>ï¼Œå°†<code>2D-CNN</code>è½¬æ¢ä¸ºé«˜æ•ˆçš„æ—¶ç©ºç‰¹å¾æŠ½å–å™¨ã€‚</p><p>é€šè¿‡<code>GSM</code>æ’ä»¶ï¼Œä¸€ä¸ª<code>2D-CNN</code>å¯ä»¥é€‚åº”æ€§åœ°å­¦ä¹ æ—¶é—´è·¯ç”±ç‰¹æ€§å¹¶å°†å®ƒä»¬ç»“åˆèµ·æ¥ï¼Œå¹¶ä¸”å‡ ä¹æ²¡æœ‰é¢å¤–çš„é™„åŠ å‚æ•°å’Œè®¡ç®—å¼€é”€ã€‚</p><center><p><img src="//onns.xyz/blog/image/20200910-4.png" alt="æ€è·¯å¯¹æ¯”"></p></center><p>ä¼ ç»Ÿçš„æ–¹æ³•æ¼”å˜ï¼š<code>C3D</code> -&gt; <code>2D spatial + 1D temporal</code> -&gt; <code>CSN</code> -&gt; <code>GST</code>ï¼ˆä¸åˆ†ç¦»ä¿¡é“ç»„ä¸Šçš„äºŒç»´å’Œä¸‰ç»´å·ç§¯å¹¶è¡Œç©ºé—´å’Œæ—¶ç©ºäº¤äº’å»ºæ¨¡ï¼‰ -&gt; <code>TSM</code>ï¼ˆæ—¶åŸŸå·ç§¯å¯ä»¥è¢«é™åˆ¶ä¸ºç¡¬ç¼–ç çš„æ—¶ç§»ï¼Œä½¿ä¸€äº›ä¿¡é“åœ¨æ—¶é—´ä¸Šå‘å‰æˆ–å‘åç§»åŠ¨ï¼‰</p><p>æ‰€æœ‰è¿™äº›ç°æœ‰çš„æ–¹æ³•éƒ½å­¦ä¹ å…·æœ‰ç¡¬è¿çº¿è¿æ¥å’Œè·¨ç½‘ç»œä¼ æ’­æ¨¡å¼çš„ç»“æ„åŒ–å†…æ ¸ã€‚<br>åœ¨ç½‘ç»œä¸­çš„ä»»ä½•ä¸€ç‚¹ä¸Šéƒ½æ²¡æœ‰æ•°æ®ä¾èµ–çš„å†³ç­–æ¥é€‰æ‹©åœ°é€šè¿‡ä¸åŒçš„åˆ†æ”¯æ¥è·¯ç”±ç‰¹æ€§ï¼Œåˆ†ç»„å’Œéšæœºçš„æ¨¡å¼æ˜¯åœ¨è®¾è®¡ä¹‹åˆå°±å›ºå®šçš„ï¼Œå¹¶ä¸”å­¦ä¹ å¦‚ä½•éšæœºæ˜¯å…·æœ‰ç»„åˆå¤æ‚æ€§çš„ã€‚</p><center><p><img src="//onns.xyz/blog/image/20200910-6.png" alt="å®éªŒ"></p></center><blockquote><p>From the experiments we conclude that adding GSM to the branch with the least number of convolution layers performs the best.</p></blockquote><p>åœ¨å·ç§¯å±‚æœ€å°‘çš„åˆ†æ”¯ä¸Šæ·»åŠ <code>GSM</code>æ¨¡å—è¡¨ç°æœ€å¥½ã€‚</p><h3 id="tsm-temporal-shift-module-for-efficient-video-understanding"><a class="header-anchor" href="#tsm-temporal-shift-module-for-efficient-video-understanding">#</a>TSM Temporal Shift Module for Efficient Video Understanding</h3><center><p><img src="//onns.xyz/blog/image/20200910-1.png" alt="æ ¸å¿ƒæ€æƒ³"></p></center><p>å®ç°åœ¨ 2D æ¨¡å‹ä¸Šè¾¾åˆ° 3D æ¨¡å‹çš„ç²¾åº¦ï¼Œæå¤§çš„é™ä½äº†è®¡ç®—ã€‚</p><p>å¹¶ä¸æ˜¯æ‰€æœ‰çš„<code>shift</code>æ“ä½œéƒ½å¯ä»¥è¾¾åˆ°æ•ˆæœçš„ï¼Œè™½ç„¶<code>shift</code>æ“ä½œä¸éœ€è¦é¢å¤–çš„è¿ç®—ä½†æ˜¯ä»ç„¶éœ€è¦æ•°æ®çš„ç§»åŠ¨ï¼Œå¤ªå¤šçš„ç§»åŠ¨ä¼šå¸¦æ¥å»¶è¿Ÿã€‚</p><p><code>shift</code>æ˜¯å¢åŠ æ—¶é—´ç‰¹å¾çš„æå–ï¼Œå¤ªå¤šçš„<code>shift</code>æ“ä½œä¹Ÿä¼šå¯¼è‡´ç©ºé—´ç‰¹å¾çš„æå–å—åˆ°å½±å“ã€‚</p><center><p><img src="//onns.xyz/blog/image/20200910-2.png" alt="ä½œè€…æ€è·¯"></p></center><p>æ”¹è¿›çš„<code>shift</code>ç­–ç•¥ï¼šå¹¶ä¸æ˜¯<code>shift</code>æ‰€æœ‰çš„<code>channels</code>ï¼Œè€Œæ˜¯åªé€‰æ‹©æ€§çš„<code>shift</code>å…¶ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œè¯¥ç­–ç•¥èƒ½å¤Ÿæœ‰æ•ˆçš„å‡å°‘æ•°æ®ç§»åŠ¨æ‰€å¸¦æ¥çš„æ—¶é—´å¤æ‚åº¦ã€‚</p><p>TSM å¹¶ä¸æ˜¯ç›´æ¥è¢«æ’å…¥åˆ°ä»å‰å¾€åçš„å¹²é“ä¸­çš„ï¼Œè€Œæ˜¯ä»¥æ—è·¯çš„å½¢å¼è¿›è¡Œï¼Œå› æ­¤åœ¨è·å¾—äº†æ—¶åºä¿¡æ¯çš„åŒæ—¶ä¸ä¼šå¯¹äºŒç»´å·ç§¯çš„ç©ºé—´ä¿¡æ¯è¿›è¡ŒæŸå®³ã€‚</p><p>åŒæ—¶ä½œè€…å¯¹äºä¸€äº›å®æ—¶çš„åœ¨çº¿æ£€æµ‹æå‡ºäº†ç›¸åº”çš„æ¨¡å‹ç­–ç•¥ï¼Œä¸åŒäºå°†ç¬¬ä¸€å±‚ä¸‹ç§»ç¬¬äºŒå±‚ä¸Šç§»è¿™ç§ï¼š</p><center><p><img src="//onns.xyz/blog/image/20200910-3.png" alt="åœ¨çº¿æ¨¡å‹"></p></center><p>å¯ä»¥æœ‰ç›¸åº”çš„å€Ÿé‰´æ€è·¯ï¼Œå¹¶ä¸”è¿™ç¯‡ä¹Ÿæ˜¯ä¸Šä¸€ç¯‡çš„åŸºå‡†ä¹‹ä¸€ã€‚</p><h4 id="å®éªŒç»“æœ"><a class="header-anchor" href="#å®éªŒç»“æœ">#</a>å®éªŒç»“æœ</h4><center><p><img src="//onns.xyz/blog/image/20200910-7.png" alt="è¿‡ç¨‹"></p></center><center><p><img src="//onns.xyz/blog/image/20200910-8.png" alt="ç»“æœ"></p></center><h4 id="ç›¸å…³é“¾æ¥"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥">#</a>ç›¸å…³é“¾æ¥</h4><ul><li><a href="https://github.com/mit-han-lab/temporal-shift-module" target="_blank" rel="noopener">https://github.com/mit-han-lab/temporal-shift-module</a></li><li><a href="https://blog.csdn.net/justsolow/article/details/105127296" target="_blank" rel="noopener">ã€ŠTSM: Temporal Shift Module for Efficient Video Understandingã€‹å­¦ä¹ å°è®°</a></li><li><a href="https://zhuanlan.zhihu.com/p/66251207" target="_blank" rel="noopener">Temporal Shift Module</a></li><li><a href="https://zhuanlan.zhihu.com/p/64525610" target="_blank" rel="noopener">TSMï¼šTemporal Shift Module for è§†é¢‘ç†è§£</a></li><li><a href="https://blog.csdn.net/Amazingren/article/details/100715768" target="_blank" rel="noopener">ã€è§†é¢‘ç†è§£è®ºæ–‡ã€‘â€”â€”TSMï¼šTemporal Shift Module for Efficient Video Understanding</a></li><li><a href="https://zhuanlan.zhihu.com/p/64525610" target="_blank" rel="noopener">TSMï¼šTemporal Shift Module for è§†é¢‘ç†è§£</a></li><li><a href="https://blog.csdn.net/strawqqhat/article/details/105292687" target="_blank" rel="noopener">Temporal Shift Module for Efficient Video Understanding</a></li></ul><h3 id="pan-towards-fast-action-recognition-via-learning-persistence-of-appearance"><a class="header-anchor" href="#pan-towards-fast-action-recognition-via-learning-persistence-of-appearance">#</a>PAN: Towards Fast Action Recognition via Learning Persistence of Appearance</h3><p>æ¯”å…‰æµç½‘ç»œå¿«äº†1000å€</p><blockquote><p>Our PA is over 1000Ã— faster (8196fps vs. 8fps) than conventional optical flow in terms of motion modeling speed</p></blockquote><p>è¿åŠ¨è¾¹ç•Œçš„å¾®å°ä½ç§»åœ¨åŠ¨ä½œè¯†åˆ«ä¸­èµ·é‡è¦ä½œç”¨çš„è§’è‰²ã€‚</p><blockquote><p>According to the aforementioned anal- ysis, we can conclude that small displacements of motion boundaries play a vital role in action recognition.</p></blockquote><p>ä½å±‚çš„<code>feature map</code>ä¹‹é—´çš„å·®å¼‚èƒ½æ›´å¤šåœ°å…³æ³¨è¾¹ç•Œçš„å˜åŒ–ã€‚</p><blockquote><p>the differences among low-level feature maps will pay more attention to the variations at boundaries.<br>In summary, differences in low-level feature maps can reflect small displacements of motion boundaries due to convolutional operations.</p></blockquote><p>åœ¨<code>UCF101</code>ä¸Šåšå®éªŒè¡¨æ˜åœ¨ç¬¬ä¸€å±‚æ•ˆæœæœ€å¥½ã€‚</p><blockquote><p>We define the basic conv-layer as eight 7Ã—7 convolutions with stride=1 and padding=3, so that the spatial resolutions of the obtained feature maps are not reduced.</p></blockquote><p>ä¸¤ç§ç¼–ç ç­–ç•¥ï¼š</p><p><strong>PA as motion modality</strong></p><p><strong>PA as attention</strong></p><p>ç¬¬ä¸€ç§æ— è®ºæ˜¯ä»è®¡ç®—é‡ä¸Šè¿˜æ˜¯ä»å‡†ç¡®ç‡ä¸Šéƒ½è¦æ›´å¥½ã€‚</p><p>å¯èƒ½åŸå› æ˜¯ç¬¬äºŒç§èåˆæ–¹æ³•å¯¼è‡´å›¾åƒçš„ä¸å¹³è¡¡ã€‚</p><blockquote><p>However, for e2, attending appearance feature maps with PA will highlight the motion boundaries, leading to the imbalanced appearance responses both inside and at the boundaries of the moving objects.</p></blockquote><p><strong>Various-timescale Aggregation Pooling</strong></p><h4 id="å®éªŒç»“æœ-2"><a class="header-anchor" href="#å®éªŒç»“æœ-2">#</a>å®éªŒç»“æœ</h4><h5 id="lite"><a class="header-anchor" href="#lite">#</a>Lite</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">somethingv2: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Downloading: <span class="string">"https://download.pytorch.org/models/resnet50-19c8e357.pth"</span> to /home/xiangyi/.cache/torch/hub/checkpoints/resnet50-19c8e357.pth</span><br><span class="line">100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 97.8M/97.8M [00:06&lt;00:00, 14.8MB/s]</span><br><span class="line">=&gt; Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">=&gt; Converting the ImageNet model to a PAN_Lite init model</span><br><span class="line">=&gt; Done. PAN_lite model ready...</span><br><span class="line">video number:24777</span><br><span class="line">video 0 <span class="keyword">done</span>, total 0/24777, average 0.879 sec/video, moving Prec@1 65.625 Prec@5 87.500</span><br><span class="line">video 1280 <span class="keyword">done</span>, total 1280/24777, average 0.239 sec/video, moving Prec@1 60.491 Prec@5 85.640</span><br><span class="line">video 2560 <span class="keyword">done</span>, total 2560/24777, average 0.230 sec/video, moving Prec@1 60.518 Prec@5 85.671</span><br><span class="line">video 3840 <span class="keyword">done</span>, total 3840/24777, average 0.227 sec/video, moving Prec@1 60.015 Prec@5 85.374</span><br><span class="line">video 5120 <span class="keyword">done</span>, total 5120/24777, average 0.225 sec/video, moving Prec@1 60.031 Prec@5 85.475</span><br><span class="line">video 6400 <span class="keyword">done</span>, total 6400/24777, average 0.226 sec/video, moving Prec@1 59.855 Prec@5 85.334</span><br><span class="line">video 7680 <span class="keyword">done</span>, total 7680/24777, average 0.224 sec/video, moving Prec@1 59.775 Prec@5 85.292</span><br><span class="line">video 8960 <span class="keyword">done</span>, total 8960/24777, average 0.223 sec/video, moving Prec@1 59.519 Prec@5 85.284</span><br><span class="line">video 10240 <span class="keyword">done</span>, total 10240/24777, average 0.224 sec/video, moving Prec@1 59.530 Prec@5 85.423</span><br><span class="line">video 11520 <span class="keyword">done</span>, total 11520/24777, average 0.224 sec/video, moving Prec@1 59.686 Prec@5 85.497</span><br><span class="line">video 12800 <span class="keyword">done</span>, total 12800/24777, average 0.224 sec/video, moving Prec@1 59.678 Prec@5 85.487</span><br><span class="line">video 14080 <span class="keyword">done</span>, total 14080/24777, average 0.225 sec/video, moving Prec@1 59.637 Prec@5 85.464</span><br><span class="line">video 15360 <span class="keyword">done</span>, total 15360/24777, average 0.225 sec/video, moving Prec@1 59.349 Prec@5 85.315</span><br><span class="line">video 16640 <span class="keyword">done</span>, total 16640/24777, average 0.225 sec/video, moving Prec@1 59.327 Prec@5 85.327</span><br><span class="line">video 17920 <span class="keyword">done</span>, total 17920/24777, average 0.226 sec/video, moving Prec@1 59.058 Prec@5 85.204</span><br><span class="line">video 19200 <span class="keyword">done</span>, total 19200/24777, average 0.226 sec/video, moving Prec@1 59.121 Prec@5 85.206</span><br><span class="line">video 20480 <span class="keyword">done</span>, total 20480/24777, average 0.226 sec/video, moving Prec@1 59.200 Prec@5 85.295</span><br><span class="line">video 21760 <span class="keyword">done</span>, total 21760/24777, average 0.227 sec/video, moving Prec@1 59.283 Prec@5 85.337</span><br><span class="line">video 23040 <span class="keyword">done</span>, total 23040/24777, average 0.227 sec/video, moving Prec@1 59.254 Prec@5 85.422</span><br><span class="line">video 24320 <span class="keyword">done</span>, total 24320/24777, average 0.227 sec/video, moving Prec@1 59.277 Prec@5 85.421</span><br><span class="line">[0.84482759 0.38815789 0.51633987 0.58252427 0.58974359 0.54385965</span><br><span class="line"> 0.76738609 0.63636364 0.67716535 0.60264901 0.53932584 0.68613139</span><br><span class="line"> 0.26923077 0.425      0.7122807  0.51914894 0.42639594 0.38157895</span><br><span class="line"> 0.46025105 0.57345972 0.51574803 0.62280702 0.55232558 0.56382979</span><br><span class="line"> 0.56818182 0.52631579 0.6        0.48514851 0.71818182 0.77394636</span><br><span class="line"> 0.78378378 0.77477477 0.82954545 0.11650485 0.36144578 0.203125</span><br><span class="line"> 0.84331797 0.82129278 0.22222222 0.79411765 0.71584699 0.73214286</span><br><span class="line"> 0.59624413 0.62057878 0.72972973 0.51253482 0.5873494  0.40703518</span><br><span class="line"> 0.42857143 0.80430108 0.7257384  0.06666667 0.40625    0.68571429</span><br><span class="line"> 0.25       0.42       0.4109589  0.60377358 0.17647059 0.81654676</span><br><span class="line"> 0.92       0.21568627 0.73417722 0.30841121 0.21621622 0.53301887</span><br><span class="line"> 0.30188679 0.40298507 0.6754386  0.43       0.64285714 0.47826087</span><br><span class="line"> 0.54411765 0.61538462 0.66981132 0.36842105 0.5        0.30769231</span><br><span class="line"> 0.2962963  0.77586207 0.296875   0.168      0.36170213 0.44680851</span><br><span class="line"> 0.64       0.44444444 0.85882353 0.792      0.25       0.19277108</span><br><span class="line"> 0.56521739 0.85       0.57894737 0.764      0.76694915 0.13888889</span><br><span class="line"> 0.14705882 0.2892562  0.51020408 0.67765568 0.46792453 0.62637363</span><br><span class="line"> 0.29310345 0.8125     0.7480315  0.73333333 0.52054795 0.66502463</span><br><span class="line"> 0.39189189 0.48       0.6056338  0.05555556 0.49640288 0.27777778</span><br><span class="line"> 0.69097222 0.54347826 0.25925926 0.77777778 0.40677966 0.64356436</span><br><span class="line"> 0.80314961 0.80681818 0.34975369 0.69230769 0.36538462 0.63761468</span><br><span class="line"> 0.55339806 0.42608696 0.1302682  0.70955882 0.32142857 0.35616438</span><br><span class="line"> 0.44827586 0.24561404 0.79619565 0.62269939 0.23529412 0.45</span><br><span class="line"> 0.24770642 0.72727273 0.6627907  0.359375   0.59375    0.63311688</span><br><span class="line"> 0.56050955 0.44680851 0.74166667 0.0859375  0.55230126 0.90754717</span><br><span class="line"> 0.76902174 0.33152174 0.3877551  0.75229358 0.51181102 0.29268293</span><br><span class="line"> 0.5        0.58695652 0.55045872 0.34545455 0.41284404 0.46052632</span><br><span class="line"> 0.43925234 0.45       0.84398977 0.88709677 0.96428571 0.94444444</span><br><span class="line"> 0.81666667 0.70666667 0.45098039 0.72115385 0.74418605 0.65693431]</span><br><span class="line">upper bound: 0.548518228331384</span><br><span class="line">-----Evaluation is finished------</span><br><span class="line">Class Accuracy 53.84%</span><br><span class="line">Overall Prec@1 59.26% Prec@5 85.45%</span><br><span class="line">/home/xiangyi/miniconda3/envs/pan/lib/python3.7/site-packages/numpy/core/_asarray.py:136: VisibleDeprecationWarning: Creating an ndarray from ragged nested sequences (<span class="built_in">which</span> is a list-or-tuple of lists-or-tuples-or ndarrays with different lengths or shapes) is deprecated. If you meant to <span class="keyword">do</span> this, you must specify <span class="string">'dtype=object'</span> when creating the ndarray</span><br><span class="line">  <span class="built_in">return</span> array(a, dtype, copy=False, order=order, subok=True)</span><br></pre></td></tr></table></figure><h4 id="ç›¸å…³é“¾æ¥-2"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥-2">#</a>ç›¸å…³é“¾æ¥</h4><ul><li><a href="https://arxiv.org/pdf/2008.03462v1.pdf" target="_blank" rel="noopener">https://arxiv.org/pdf/2008.03462v1.pdf</a></li><li><a href="https://github.com/zhang-can/PAN-PyTorch" target="_blank" rel="noopener">https://github.com/zhang-can/PAN-PyTorch</a></li></ul><h2 id="iii-plan-for-this-week"><a class="header-anchor" href="#iii-plan-for-this-week">#</a>III. Plan for this week</h2><hr><ul><li>çœ‹ä¸€ä¸‹ç›¸å…³ä»£ç ï¼Œäº†è§£ä¸€ä¸‹ä»–ä»¬æ”¹è¿›çš„æ€è·¯ã€‚</li><li>ç»§ç»­è¯»è®ºæ–‡ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lab406 </tag>
            
            <tag> weekly report </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ–°çš„é™æ€åšå®¢æ‰˜ç®¡å•†</title>
      <link href="/blog/2020/09/09/new-site-host/"/>
      <url>/blog/2020/09/09/new-site-host/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©ç»ˆäºä¸‹å®šå†³å¿ƒè¦æ¢åšå®¢æ‰˜ç®¡äº†ï¼Œä¹‹å‰ä¸€ç›´åœ¨<code>GitHub Page</code>ï¼Œå›½å†…è®¿é—®ç®€ç›´é¾Ÿé€Ÿï¼Œå…¶å®è‡ªå·±æœ‰æœåŠ¡å™¨çš„ï¼Œä½†æ˜¯çº¯é™æ€æ”¾ä¸Šå»æ„Ÿè§‰æœ‰ç‚¹æµªè´¹ï¼Œæœç´¢äº†ä¸€ä¸‹ï¼Œè¿™ä¸ªçœŸçš„å¯ä»¥çš„ï¼ä¼ é€é—¨ï¼š<a href="https://vercel.com/dashboard" target="_blank" rel="noopener">https://vercel.com/dashboard</a>ã€‚</p><a id="more"></a><center><p><img src="//onns.xyz/blog/image/20200909-1.png" alt="è®¿é—®æµ‹é€Ÿ"></p></center><p>Happy Using!</p><p>å’Œ GitHub æ˜¯ç›¸è¿çš„ï¼Œè‡ªåŠ¨éƒ¨ç½²ï¼Œä¸ç”¨å¤šæ¬¡æ“ä½œï¼Œå¾€ GitHub<code>push</code>å³å¯ï¼</p>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
      </categories>
      
      
        <tags>
            
            <tag> blog </tag>
            
            <tag> github </tag>
            
            <tag> onns.xyz </tag>
            
            <tag> host </tag>
            
            <tag> static </tag>
            
            <tag> vercel </tag>
            
            <tag> github page </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginxä»£ç†websocket</title>
      <link href="/blog/2020/09/09/nginx-proxy-websocket/"/>
      <url>/blog/2020/09/09/nginx-proxy-websocket/</url>
      
        <content type="html"><![CDATA[<p>ä¹‹å‰åšçš„é‚£ä¸ª<code>chromeæ’ä»¶</code>çš„é¡¹ç›®<code>Sync Sofa</code>ï¼Œå…¶å®ä¸šåŠ¡é‡å¾ˆå°ä½†æ˜¯å¿…é¡»è¦èµ°<code>443</code>çš„ç«¯å£ï¼Œå¼ºè¡Œå äº†ä¸€å°æœåŠ¡å™¨ï¼ä¸èƒ½å¿ï¼Œæ— å¥ˆå¥½å‡ æ¬¡<code>Nginx</code>åå‘ä»£ç†éƒ½å¤±è´¥äº†ï¼Œå‰ä¸¤æ¬¡ç´¯è®¡èŠ±äº†<strong>ä¸ƒå…«ä¸ªå°æ—¶</strong>éƒ½æ²¡æˆåŠŸï¼Œåœ¨æœ‹å‹çš„å¸®åŠ©ä¸‹<code>3å°æ—¶</code>æ‰‹å·¥ï¼</p><p>æ„Ÿè°¢ï¼<a href="https://her-cat.com/" target="_blank" rel="noopener">å¥¹å’Œå¥¹çš„çŒ«</a></p><a id="more"></a><h2 id="é…ç½®-websocket"><a class="header-anchor" href="#é…ç½®-websocket">#</a>é…ç½® websocket</h2><p>é¦–å…ˆç¡®ä¿æœ‰<code>golang</code>çš„ç¯å¢ƒï¼Œå¦‚æœæ²¡æœ‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install golang -y</span><br></pre></td></tr></table></figure><p>å®‰è£…å®¢æˆ·ç«¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å›½å†…è®¿é—®ç‚’é¸¡æ…¢ï¼ŒæŒ‚ä¸ªä»£ç†</span></span><br><span class="line"><span class="built_in">export</span> GOPROXY=https://goproxy.io</span><br><span class="line"></span><br><span class="line">go get github.com/LouisYLWang/Sync-Sofa/server</span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$GOPATH</span>/src/github.com/LouisYLWang/Sync-Sofa/server</span><br><span class="line">go install</span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$GOPATH</span>/bin</span><br></pre></td></tr></table></figure><p>åˆ›å»ºä¸€ä¸ª<code>config.json</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi config.json</span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"addr"</span>: <span class="string">":81"</span>,</span><br><span class="line">  <span class="attr">"runmode"</span>: <span class="string">"dev"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é…ç½®-nginx"><a class="header-anchor" href="#é…ç½®-nginx">#</a>é…ç½® nginx</h2><p>æŠŠ<code>SSL</code>çš„ç›¸å…³è¯ä¹¦æ‹·è´åˆ° nginx ç›¸å…³ç›®å½•ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mv sync.pem /etc/nginx/cert/</span><br><span class="line">mv sync.key /etc/nginx/cert/</span><br></pre></td></tr></table></figure><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">...</span><br><span class="line"><span class="attribute">map</span> <span class="variable">$http_upgrade</span> <span class="variable">$connection_upgrade</span> &#123;</span><br><span class="line"><span class="attribute">default</span> upgrade;</span><br><span class="line">'' close;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attribute">upstream</span> websocket &#123;</span><br><span class="line"><span class="attribute">server</span> <span class="number">127.0.0.1:81</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="attribute">upstream</span> web&#123;</span><br><span class="line"><span class="attribute">server</span> <span class="number">127.0.0.1:81</span>;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line"><span class="attribute">listen</span> <span class="number">443</span>  default ssl;</span><br><span class="line"><span class="attribute">server_name</span> sync-cn.onns.xyz;</span><br><span class="line"><span class="attribute">ssl_certificate</span> /etc/nginx/cert/sync.pem;</span><br><span class="line"><span class="attribute">ssl_certificate_key</span> /etc/nginx/cert/sync.key;</span><br><span class="line"><span class="attribute">ssl_session_timeout</span> <span class="number">5m</span>;</span><br><span class="line"><span class="attribute">ssl_ciphers</span> ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;</span><br><span class="line"><span class="attribute">ssl_protocols</span> TLSv1 TLSv1.<span class="number">1</span> TLSv1.<span class="number">2</span>;</span><br><span class="line"><span class="attribute">ssl_prefer_server_ciphers</span> <span class="literal">on</span>;</span><br><span class="line"></span><br><span class="line"><span class="attribute">location</span> / &#123;</span><br><span class="line"><span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line"><span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line"><span class="attribute">proxy_set_header</span> Host  <span class="variable">$http_host</span>;</span><br><span class="line"><span class="attribute">proxy_set_header</span> X-Nginx-Proxy <span class="literal">true</span>;</span><br><span class="line"><span class="attribute">proxy_set_header</span> Connection <span class="string">""</span>;</span><br><span class="line"><span class="attribute">proxy_pass</span> http://web;</span><br><span class="line">&#125;</span><br><span class="line"><span class="attribute">location</span> /ws &#123;</span><br><span class="line"><span class="attribute">proxy_pass</span> http://websocket;</span><br><span class="line"><span class="attribute">proxy_http_version</span> <span class="number">1</span>.<span class="number">1</span>;</span><br><span class="line"><span class="attribute">proxy_set_header</span> Upgrade <span class="variable">$http_upgrade</span>;</span><br><span class="line"><span class="attribute">proxy_set_header</span> Connection <span class="variable">$connection_upgrade</span>;</span><br><span class="line"><span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line"><span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸»è¦å¯ä»¥å‚è€ƒä¸€ä¸‹ Nginx çš„å®˜æ–¹åšå®¢ï¼š<a href="https://www.nginx.com/blog/websocket-nginx/" target="_blank" rel="noopener">NGINX as a WebSocket Proxy</a>ï¼Œä½†æ˜¯ä¹Ÿåªæ˜¯èƒ½å‚è€ƒã€‚ã€‚é‡Œé¢ç»™çš„å‘½ä»¤éƒ½è¿‡æœŸäº†ï¼Œå°¤å…¶æ˜¯ï¼Œ<code>node</code>ä¸è¦ç”¨<code>yum</code>è£…ï¼Œå„ç§æ—§ç‰ˆæœ¬ã€‚</p><h2 id="å‚è€ƒé“¾æ¥"><a class="header-anchor" href="#å‚è€ƒé“¾æ¥">#</a>å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://www.nginx.com/blog/websocket-nginx/" target="_blank" rel="noopener">NGINX as a WebSocket Proxy</a></li><li><a href="https://blog.csdn.net/nfq6612/article/details/88555092" target="_blank" rel="noopener">nginx é…ç½® ws wss å’Œ http https å’Œè®¿é—®å®ä¾‹</a></li><li><a href="https://help.aliyun.com/document_detail/98728.html" target="_blank" rel="noopener">åœ¨ Nginx æˆ– Tengine æœåŠ¡å™¨ä¸Šå®‰è£…è¯ä¹¦</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> nginx </tag>
            
            <tag> socket </tag>
            
            <tag> websocket </tag>
            
            <tag> ws </tag>
            
            <tag> golang </tag>
            
            <tag> wss </tag>
            
            <tag> ssl </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>rsyncå®ç°æ–‡ä»¶åŒæ­¥</title>
      <link href="/blog/2020/09/08/rsync-usage/"/>
      <url>/blog/2020/09/08/rsync-usage/</url>
      
        <content type="html"><![CDATA[<p>Linux ä¸‹çš„æ–‡ä»¶åŒæ­¥ï¼Œ<code>rsync</code>çœŸçš„å¥½ç”¨ï¼</p><a id="more"></a><p>å› ä¸ºæˆ‘çš„<code>Mac</code>å’Œ<code>Ubuntu</code>éƒ½è‡ªå¸¦è¿™ä¸ª<code>rsync</code>äº†ï¼Œä¸å¿…è‡ªå·±è£…ï¼Œæƒ³è£…çš„å¯ä»¥å»å®˜ç½‘ï¼Œå¼€æºè½¯ä»¶ï¼š<a href="http://rsync.samba.org/" target="_blank" rel="noopener">å¼€æºåœ°å€</a>ï¼Œä¹Ÿæœ‰<code>Windows</code>ä¸‹çš„å®ç°ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br></pre></td><td class="code"><pre><span class="line">$ rsync -h</span><br><span class="line">rsync  version 2.6.9  protocol version 29</span><br><span class="line">Copyright (C) 1996-2006 by Andrew Tridgell, Wayne Davison, and others.</span><br><span class="line">&lt;http://rsync.samba.org/&gt;</span><br><span class="line">Capabilities: 64-bit files, socketpairs, hard links, symlinks, batchfiles,</span><br><span class="line">              inplace, IPv6, 64-bit system inums, 64-bit internal inums</span><br><span class="line"></span><br><span class="line">rsync comes with ABSOLUTELY NO WARRANTY.  This is free software, and you</span><br><span class="line">are welcome to redistribute it under certain conditions.  See the GNU</span><br><span class="line">General Public Licence <span class="keyword">for</span> details.</span><br><span class="line"></span><br><span class="line">rsync is a file transfer program capable of efficient remote update</span><br><span class="line">via a fast differencing algorithm.</span><br><span class="line"></span><br><span class="line">Usage: rsync [OPTION]... SRC [SRC]... DEST</span><br><span class="line">  or   rsync [OPTION]... SRC [SRC]... [USER@]HOST:DEST</span><br><span class="line">  or   rsync [OPTION]... SRC [SRC]... [USER@]HOST::DEST</span><br><span class="line">  or   rsync [OPTION]... SRC [SRC]... rsync://[USER@]HOST[:PORT]/DEST</span><br><span class="line">  or   rsync [OPTION]... [USER@]HOST:SRC [DEST]</span><br><span class="line">  or   rsync [OPTION]... [USER@]HOST::SRC [DEST]</span><br><span class="line">  or   rsync [OPTION]... rsync://[USER@]HOST[:PORT]/SRC [DEST]</span><br><span class="line">The <span class="string">':'</span> usages connect via remote shell, <span class="keyword">while</span> <span class="string">'::'</span> &amp; <span class="string">'rsync://'</span> usages connect</span><br><span class="line">to an rsync daemon, and require SRC or DEST to start with a module name.</span><br><span class="line"></span><br><span class="line">Options</span><br><span class="line"> -v, --verbose               increase verbosity</span><br><span class="line"> -q, --quiet                 suppress non-error messages</span><br><span class="line">     --no-motd               suppress daemon-mode MOTD (see manpage caveat)</span><br><span class="line"> -c, --checksum              skip based on checksum, not mod-time &amp; size</span><br><span class="line"> -a, --archive               archive mode; same as -rlptgoD (no -H)</span><br><span class="line">     --no-OPTION             turn off an implied OPTION (e.g. --no-D)</span><br><span class="line"> -r, --recursive             recurse into directories</span><br><span class="line"> -R, --relative              use relative path names</span><br><span class="line">     --no-implied-dirs       don<span class="string">'t send implied dirs with --relative</span></span><br><span class="line"><span class="string"> -b, --backup                make backups (see --suffix &amp; --backup-dir)</span></span><br><span class="line"><span class="string">     --backup-dir=DIR        make backups into hierarchy based in DIR</span></span><br><span class="line"><span class="string">     --suffix=SUFFIX         set backup suffix (default ~ w/o --backup-dir)</span></span><br><span class="line"><span class="string"> -u, --update                skip files that are newer on the receiver</span></span><br><span class="line"><span class="string">     --inplace               update destination files in-place (SEE MAN PAGE)</span></span><br><span class="line"><span class="string">     --append                append data onto shorter files</span></span><br><span class="line"><span class="string"> -d, --dirs                  transfer directories without recursing</span></span><br><span class="line"><span class="string"> -l, --links                 copy symlinks as symlinks</span></span><br><span class="line"><span class="string"> -L, --copy-links            transform symlink into referent file/dir</span></span><br><span class="line"><span class="string">     --copy-unsafe-links     only "unsafe" symlinks are transformed</span></span><br><span class="line"><span class="string">     --safe-links            ignore symlinks that point outside the source tree</span></span><br><span class="line"><span class="string"> -k, --copy-dirlinks         transform symlink to a dir into referent dir</span></span><br><span class="line"><span class="string"> -K, --keep-dirlinks         treat symlinked dir on receiver as dir</span></span><br><span class="line"><span class="string"> -H, --hard-links            preserve hard links</span></span><br><span class="line"><span class="string"> -p, --perms                 preserve permissions</span></span><br><span class="line"><span class="string">     --executability         preserve the file'</span>s executability</span><br><span class="line">     --chmod=CHMOD           affect file and/or directory permissions</span><br><span class="line"> -o, --owner                 preserve owner (super-user only)</span><br><span class="line"> -g, --group                 preserve group</span><br><span class="line">     --devices               preserve device files (super-user only)</span><br><span class="line">     --specials              preserve special files</span><br><span class="line"> -D                          same as --devices --specials</span><br><span class="line"> -t, --<span class="built_in">times</span>                 preserve <span class="built_in">times</span></span><br><span class="line"> -O, --omit-dir-times        omit directories when preserving <span class="built_in">times</span></span><br><span class="line">     --super                 receiver attempts super-user activities</span><br><span class="line"> -S, --sparse                handle sparse files efficiently</span><br><span class="line"> -n, --dry-run               show what would have been transferred</span><br><span class="line"> -W, --whole-file            copy files whole (without rsync algorithm)</span><br><span class="line"> -x, --one-file-system       don<span class="string">'t cross filesystem boundaries</span></span><br><span class="line"><span class="string"> -B, --block-size=SIZE       force a fixed checksum block-size</span></span><br><span class="line"><span class="string"> -e, --rsh=COMMAND           specify the remote shell to use</span></span><br><span class="line"><span class="string">     --rsync-path=PROGRAM    specify the rsync to run on the remote machine</span></span><br><span class="line"><span class="string">     --existing              skip creating new files on receiver</span></span><br><span class="line"><span class="string">     --ignore-existing       skip updating files that already exist on receiver</span></span><br><span class="line"><span class="string">     --remove-source-files   sender removes synchronized files (non-dirs)</span></span><br><span class="line"><span class="string">     --del                   an alias for --delete-during</span></span><br><span class="line"><span class="string">     --delete                delete extraneous files from destination dirs</span></span><br><span class="line"><span class="string">     --delete-before         receiver deletes before transfer (default)</span></span><br><span class="line"><span class="string">     --delete-during         receiver deletes during transfer, not before</span></span><br><span class="line"><span class="string">     --delete-after          receiver deletes after transfer, not before</span></span><br><span class="line"><span class="string">     --delete-excluded       also delete excluded files from destination dirs</span></span><br><span class="line"><span class="string">     --ignore-errors         delete even if there are I/O errors</span></span><br><span class="line"><span class="string">     --force                 force deletion of directories even if not empty</span></span><br><span class="line"><span class="string">     --max-delete=NUM        don'</span>t delete more than NUM files</span><br><span class="line">     --max-size=SIZE         don<span class="string">'t transfer any file larger than SIZE</span></span><br><span class="line"><span class="string">     --min-size=SIZE         don'</span>t transfer any file smaller than SIZE</span><br><span class="line">     --partial               keep partially transferred files</span><br><span class="line">     --partial-dir=DIR       put a partially transferred file into DIR</span><br><span class="line">     --delay-updates         put all updated files into place at transfer<span class="string">'s end</span></span><br><span class="line"><span class="string"> -m, --prune-empty-dirs      prune empty directory chains from the file-list</span></span><br><span class="line"><span class="string">     --numeric-ids           don'</span>t map uid/gid values by user/group name</span><br><span class="line">     --timeout=TIME          <span class="built_in">set</span> I/O timeout <span class="keyword">in</span> seconds</span><br><span class="line"> -I, --ignore-times          don<span class="string">'t skip files that match in size and mod-time</span></span><br><span class="line"><span class="string">     --size-only             skip files that match in size</span></span><br><span class="line"><span class="string">     --modify-window=NUM     compare mod-times with reduced accuracy</span></span><br><span class="line"><span class="string"> -T, --temp-dir=DIR          create temporary files in directory DIR</span></span><br><span class="line"><span class="string"> -y, --fuzzy                 find similar file for basis if no dest file</span></span><br><span class="line"><span class="string">     --compare-dest=DIR      also compare destination files relative to DIR</span></span><br><span class="line"><span class="string">     --copy-dest=DIR         ... and include copies of unchanged files</span></span><br><span class="line"><span class="string">     --link-dest=DIR         hardlink to files in DIR when unchanged</span></span><br><span class="line"><span class="string"> -z, --compress              compress file data during the transfer</span></span><br><span class="line"><span class="string">     --compress-level=NUM    explicitly set compression level</span></span><br><span class="line"><span class="string"> -C, --cvs-exclude           auto-ignore files the same way CVS does</span></span><br><span class="line"><span class="string"> -f, --filter=RULE           add a file-filtering RULE</span></span><br><span class="line"><span class="string"> -F                          same as --filter='</span>dir-merge /.rsync-filter<span class="string">'</span></span><br><span class="line"><span class="string">                             repeated: --filter='</span>- .rsync-filter<span class="string">'</span></span><br><span class="line"><span class="string">     --exclude=PATTERN       exclude files matching PATTERN</span></span><br><span class="line"><span class="string">     --exclude-from=FILE     read exclude patterns from FILE</span></span><br><span class="line"><span class="string">     --include=PATTERN       don'</span>t exclude files matching PATTERN</span><br><span class="line">     --include-from=FILE     <span class="built_in">read</span> include patterns from FILE</span><br><span class="line">     --files-from=FILE       <span class="built_in">read</span> list of <span class="built_in">source</span>-file names from FILE</span><br><span class="line"> -0, --from0                 all *-from/filter files are delimited by 0s</span><br><span class="line">     --address=ADDRESS       <span class="built_in">bind</span> address <span class="keyword">for</span> outgoing socket to daemon</span><br><span class="line">     --port=PORT             specify double-colon alternate port number</span><br><span class="line">     --sockopts=OPTIONS      specify custom TCP options</span><br><span class="line">     --blocking-io           use blocking I/O <span class="keyword">for</span> the remote shell</span><br><span class="line">     --stats                 give some file-transfer stats</span><br><span class="line"> -8, --8-bit-output          leave high-bit chars unescaped <span class="keyword">in</span> output</span><br><span class="line"> -h, --human-readable        output numbers <span class="keyword">in</span> a human-readable format</span><br><span class="line">     --progress              show progress during transfer</span><br><span class="line"> -P                          same as --partial --progress</span><br><span class="line"> -i, --itemize-changes       output a change-summary <span class="keyword">for</span> all updates</span><br><span class="line">     --out-format=FORMAT     output updates using the specified FORMAT</span><br><span class="line">     --<span class="built_in">log</span>-file=FILE         <span class="built_in">log</span> what we<span class="string">'re doing to the specified FILE</span></span><br><span class="line"><span class="string">     --log-file-format=FMT   log updates using the specified FMT</span></span><br><span class="line"><span class="string">     --password-file=FILE    read password from FILE</span></span><br><span class="line"><span class="string">     --list-only             list the files instead of copying them</span></span><br><span class="line"><span class="string">     --bwlimit=KBPS          limit I/O bandwidth; KBytes per second</span></span><br><span class="line"><span class="string">     --write-batch=FILE      write a batched update to FILE</span></span><br><span class="line"><span class="string">     --only-write-batch=FILE like --write-batch but w/o updating destination</span></span><br><span class="line"><span class="string">     --read-batch=FILE       read a batched update from FILE</span></span><br><span class="line"><span class="string">     --protocol=NUM          force an older protocol version to be used</span></span><br><span class="line"><span class="string"> -E, --extended-attributes   copy extended attributes</span></span><br><span class="line"><span class="string">     --cache                 disable fcntl(F_NOCACHE)</span></span><br><span class="line"><span class="string"> -4, --ipv4                  prefer IPv4</span></span><br><span class="line"><span class="string"> -6, --ipv6                  prefer IPv6</span></span><br><span class="line"><span class="string">     --version               print version number</span></span><br><span class="line"><span class="string">(-h) --help                  show this help (-h works with no other options)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Use "rsync --daemon --help" to see the daemon-mode command-line options.</span></span><br><span class="line"><span class="string">Please see the rsync(1) and rsyncd.conf(5) man pages for full documentation.</span></span><br><span class="line"><span class="string">See http://rsync.samba.org/ for updates, bug reports, and answers</span></span><br></pre></td></tr></table></figure><p>æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„æ¨¡å¼è¦é…ç½®å¤§é‡çš„ä¿¡æ¯ï¼Œä¸‹æ¬¡ç”¨åˆ°å†è¯´å§ï¼Œè¿™æ¬¡å°±ç”¨ç®€å•çš„ ssh æ¨¡å¼ã€‚</p><p>æŠŠè‡ªå·±çš„ç”µè„‘æš´éœ²åœ¨å…¬ç½‘ä¸å¤ªå¥½ï¼Œæ‰¾è‡ªå·±çš„å°ç±³æ‰‹æœºåšäº†ä¸ªä¸­è½¬ï¼Œå› ä¸ºæˆ‘çš„ç™»å½•å¯†ç å®åœ¨å¤ªç®€å•äº†å¯æ˜¯æˆ‘åˆ<code>ä¸æƒ³æ”¹</code>ã€‚</p><p>é¦–å…ˆéœ€è¦æŠŠè‡ªå·±çš„æ–‡ä»¶åŒæ­¥åˆ°ä¸­è½¬ç«¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rsync -auv -e <span class="string">"ssh -i ~/Documents/common/key/mi"</span> --progress /Users/onns/Documents/common android@xm.onns.xyz:/home/android/</span><br></pre></td></tr></table></figure><p>ä¸ºäº†æ–¹ä¾¿èƒ½åœ¨ä»»ä½•ä½ç½®ä½¿ç”¨å‘½ä»¤ï¼Œå»ºè®®æ‰€æœ‰çš„æ–‡ä»¶/æ–‡ä»¶å¤¹éƒ½æ˜¯ç»å¯¹è·¯å¾„ã€‚</p><p>æ³¨æ„ä¸€ä¸‹<code>-e</code>å‚æ•°ï¼Œå› ä¸ºæœåŠ¡å™¨è®¾ç½®äº†<code>å¯†é’¥ä½“ç³»</code>ï¼Œæ‰€ä»¥è¿™ä¸ª<code>-e</code>çš„å‚æ•°å…¶å®æ˜¯åœ¨å‘Šè¯‰<code>rsync</code>æ€ä¹ˆè¿æœåŠ¡å™¨ï¼Œç­‰ä»·äºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh android@xm.onns.xyz -i /Users/onns/mi</span><br></pre></td></tr></table></figure><p>å¹³æ—¶<code>ssh</code>åŠ å¯†é’¥çš„æ—¶å€™éƒ½æ˜¯<code>-i</code>å‚æ•°ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ rsync -auv -e <span class="string">"ssh -i ~/Documents/common/key/mi"</span> --progress /Users/onns/Documents/common android@xm.onns.xyz:/home/android/</span><br><span class="line">building file list ...</span><br><span class="line">196 files to consider</span><br><span class="line"></span><br><span class="line">sent 4488 bytes  received 20 bytes  3005.33 bytes/sec</span><br><span class="line">total size is 719894  speedup is 159.69</span><br></pre></td></tr></table></figure><p>åŒæ ·åœ°ï¼Œè¿œç¨‹å†æ‹‰å–ä¸€ä¸‹ä¸­è½¬ç«¯çš„æ•°æ®å°±å¥½äº†ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rsync -auv -e <span class="string">"ssh -i ~/Documents/common/key/mi"</span> --progress android@xm.onns.xyz:/home/android/common ~/Documents/</span><br></pre></td></tr></table></figure><p>è¿˜æœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„äº‹æƒ…æ˜¯ï¼Œç±»ä¼¼<code>cp</code>å’Œ<code>mv</code>ä¸€æ ·ï¼Œ<code>from</code>ç«¯æ˜¯è¦æŒ‡æ˜å½“å‰ç›®å½•çš„ï¼Œä½†æ˜¯<code>to</code>ç›®å½•åªéœ€è¦æŒ‡æ˜ä½ æƒ³è¦æ”¾çš„ç›®å½•çš„ä¸Šä¸€çº§ç›®å½•å³å¯ã€‚çœ‹ä¸æ‡‚ï¼Œæ‹·è´ä¸€æ¬¡å°±ç†è§£äº†ï¼</p><h2 id="å‚è€ƒé“¾æ¥"><a class="header-anchor" href="#å‚è€ƒé“¾æ¥">#</a>å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://blog.csdn.net/super_YC/article/details/83543088" target="_blank" rel="noopener">rsync è¿œç¨‹èµ„æºåŒæ­¥</a></li><li><a href="https://www.91linux.org/archives/77.html" target="_blank" rel="noopener">rsync ä½¿ç”¨ ssh å¯†é’¥åŒæ­¥æ–‡ä»¶</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> macos </tag>
            
            <tag> rsync </tag>
            
            <tag> ssh </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windowsä¸‹åˆ†å·å‹ç¼©åŒ…è§£å‹</title>
      <link href="/blog/2020/09/07/multi-part-archive-extract-in-windows/"/>
      <url>/blog/2020/09/07/multi-part-archive-extract-in-windows/</url>
      
        <content type="html"><![CDATA[<blockquote><p>The video data is provided as one large TGZ archive, split into parts of 1 GB max. The total download size is 19.4 GB. The archive contains webm-files using the VP9 codec. Files are numbered from 1 to 220847.</p></blockquote><p>20bn-something-something-v2-00<br>20bn-something-something-v2-01<br>20bn-something-something-v2-02<br>20bn-something-something-v2-03<br>20bn-something-something-v2-04<br>20bn-something-something-v2-05<br>20bn-something-something-v2-06<br>20bn-something-something-v2-07<br>20bn-something-something-v2-08<br>20bn-something-something-v2-09<br>20bn-something-something-v2-10<br>20bn-something-something-v2-11<br>20bn-something-something-v2-12<br>20bn-something-something-v2-13<br>20bn-something-something-v2-14<br>20bn-something-something-v2-15<br>20bn-something-something-v2-16<br>20bn-something-something-v2-17<br>20bn-something-something-v2-18<br>20bn-something-something-v2-19</p><p><code>Linux</code>ä¸‹å¾ˆå¥½è§£å‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat 20bn-something-something-v2-?? | tar zx</span><br></pre></td></tr></table></figure><p><code>Windows</code>ä¸‹éœ€è¦å°†æ‰€æœ‰çš„åˆ†å·å…ˆåˆå¹¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">copy /b 20bn* temp.tar.gz</span><br></pre></td></tr></table></figure><p>ç„¶åç”¨è§£å‹è½¯ä»¶æ‰“å¼€å³å¯ã€‚</p><h2 id="ç›¸å…³é“¾æ¥"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥">#</a>ç›¸å…³é“¾æ¥</h2><ul><li><a href="https://blog.csdn.net/XX_123_1_RJ/article/details/95237636" target="_blank" rel="noopener">Windows ä¸­è§£å‹ Linux ä¸­äº§ç”Ÿçš„ tar.gz åˆ†å·å‹ç¼©åŒ…</a></li><li><a href="https://20bn.com/datasets/something-something/v2#download" target="_blank" rel="noopener">The 20BN-something-something Dataset V2</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> windows </tag>
            
            <tag> tar </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxä¸‹å¯†é’¥ç™»å½•</title>
      <link href="/blog/2020/09/07/ssh-key-in-linux/"/>
      <url>/blog/2020/09/07/ssh-key-in-linux/</url>
      
        <content type="html"><![CDATA[<p>æ¯æ¬¡éƒ½æ•™ä¸€éï¼Œè®°å½•ä¸€ä¸‹ï¼Œä¸‹æ¬¡ç›´æ¥ç”©é“¾æ¥å§ã€‚</p><a id="more"></a><h2 id="ç”Ÿæˆå¯†é’¥å¯¹"><a class="header-anchor" href="#ç”Ÿæˆå¯†é’¥å¯¹">#</a>ç”Ÿæˆå¯†é’¥å¯¹</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ ssh-keygen -t rsa -m PEM</span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file <span class="keyword">in</span> <span class="built_in">which</span> to save the key (/root/.ssh/id_rsa):</span><br><span class="line"><span class="comment"># å›è½¦</span></span><br><span class="line">Enter passphrase (empty <span class="keyword">for</span> no passphrase):</span><br><span class="line"><span class="comment"># å›è½¦</span></span><br><span class="line">Enter same passphrase again:</span><br><span class="line"><span class="comment"># å›è½¦</span></span><br><span class="line">Your identification has been saved <span class="keyword">in</span> /root/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved <span class="keyword">in</span> /root/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is:</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h2 id="æ‹·è´ç”Ÿæ•ˆ"><a class="header-anchor" href="#æ‹·è´ç”Ÿæ•ˆ">#</a>æ‹·è´ç”Ÿæ•ˆ</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> .ssh/</span><br><span class="line">$ ls</span><br><span class="line">authorized_keys  id_rsa  id_rsa.pub</span><br><span class="line">$ cp id_rsa.pub authorized_keys</span><br><span class="line">cp: overwrite â€˜authorized_keysâ€™? y</span><br><span class="line"><span class="comment"># è¦†ç›–ä¹‹å‰ç¡®è®¤ä¸€ä¸‹ç¡®å®æ˜¯å¯ä»¥è¦†ç›–çš„</span></span><br><span class="line"><span class="comment"># å½“ç„¶å¦‚æœä¸èƒ½è¦†ç›–é‚£å°±è¿½åŠ </span></span><br><span class="line">$ cat id_rsa.pub &gt;&gt; authorized_keys</span><br></pre></td></tr></table></figure><h2 id="ä¿å­˜ç§é’¥"><a class="header-anchor" href="#ä¿å­˜ç§é’¥">#</a>ä¿å­˜ç§é’¥</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ cat id_rsa</span><br><span class="line">-----BEGIN RSA PRIVATE KEY-----</span><br><span class="line">...</span><br><span class="line">-----END RSA PRIVATE KEY-----</span><br></pre></td></tr></table></figure><p>æ‰“å¼€è®°äº‹æœ¬ï¼Œéšä¾¿å‘½åä¸€ä¸ªç©ºåç¼€æ–‡ä»¶ï¼šæ¯”å¦‚æˆ‘å‘½åä¸ºï¼š<code>node</code>ï¼ŒæŠŠä»<code>-----BEGIN RSA PRIVATE KEY-----</code>åˆ°<code>-----END RSA PRIVATE KEY-----</code>ç²˜è´´è¿›å»ï¼Œä¿å­˜ã€‚</p><h2 id="ä¿®æ”¹ç§é’¥æƒé™"><a class="header-anchor" href="#ä¿®æ”¹ç§é’¥æƒé™">#</a>ä¿®æ”¹ç§é’¥æƒé™</h2><p><code>Linux</code>å’Œ<code>MacOS</code>å°±å¾ˆç®€å•äº†ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 600 node</span><br></pre></td></tr></table></figure><p><code>Windows</code>æ¯”è¾ƒéº»çƒ¦ï¼Œå‚ç…§è¿™ç¯‡ï¼š<a href="https://onns.xyz/blog/2020/08/10/log-write-test/#%E4%BF%AE%E6%94%B9%E7%A7%81%E9%92%A5%E6%9D%83%E9%99%90">Linux è¿½åŠ æ—¥å¿—æµ‹è¯•</a>ã€‚</p><h2 id="ä¿®æ”¹-sshd-config"><a class="header-anchor" href="#ä¿®æ”¹-sshd-config">#</a>ä¿®æ”¹ sshd_config</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure><p>æ‰¾åˆ°å¦‚ä¸‹ä¸€è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># PubkeyAuthentication yes</span></span><br><span class="line"><span class="comment"># æŠŠ"#"å»æ‰</span></span><br><span class="line">PubkeyAuthentication yes</span><br></pre></td></tr></table></figure><p>ä¿å­˜ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service sshd restart</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ ssh root@node.onns.xyz -i node</span><br><span class="line">Last login: Mon Sep  7 13:27:19 2020 from 120.35.73.25</span><br><span class="line"></span><br><span class="line">Welcome to Alibaba Cloud Elastic Compute Service !</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> work </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> ssh </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Late Temporal Modeling in 3D CNN Architectures with BERT for Action Recognition</title>
      <link href="/blog/2020/09/07/late-temporal-modeling-in-3d-cnn-architectures-with-bert-for-action-recognition/"/>
      <url>/blog/2020/09/07/late-temporal-modeling-in-3d-cnn-architectures-with-bert-for-action-recognition/</url>
      
        <content type="html"><![CDATA[<h2 id="late-temporal-modeling-in-3d-cnn-architectures-with-bert-for-action-recognition"><a class="header-anchor" href="#late-temporal-modeling-in-3d-cnn-architectures-with-bert-for-action-recognition">#</a>Late Temporal Modeling in 3D CNN Architectures with BERT for Action Recognition</h2><p><code>HMDB51</code>å’Œ<code>UCF101</code>çš„<code>top-1</code>è¾¾åˆ°ç°é˜¶æ®µæœ€å¥½çš„æ°´å¹³ï¼Œåˆ†åˆ«ä¸º<code>85.10%</code>å’Œ<code>98.69%</code>ã€‚</p><p>æ—¶åºå…¨å±€å¹³å‡æ± åŒ–é˜»ç¢äº†æ—¶åºä¿¡æ¯çš„æ›´ä¸°å¯Œè¡¨è¾¾ã€‚è™½ç„¶æ„Ÿå—é‡å¯èƒ½åˆ†å¸ƒåœ¨æ•´ä¸ªè§†é¢‘åˆ‡ç‰‡ä¸­ï¼Œä½†æ˜¯å¯¹äºä¸åŒçš„åˆ‡ç‰‡ï¼Œå®ƒæ‰€èƒ½æä¾›çš„ä¿¡æ¯æ˜¯æœä»é«˜æ–¯åˆ†å¸ƒçš„ï¼Œç®€å•çš„å¹³å‡å¯èƒ½ä¼šæŸå¤±ä¿¡æ¯ã€‚</p><blockquote><p>temporal global average pooling (TGAP) layer is used at the end of all 3D CNN architectures hinders the richness of final temporal information.<br>the receptive field might cover the whole clip, the effective receptive field has a Gaussian distribution</p></blockquote><h2 id="ç›¸å…³é“¾æ¥"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥">#</a>ç›¸å…³é“¾æ¥</h2><ul><li><a href="https://github.com/artest08/LateTemporalModeling3DCNN" target="_blank" rel="noopener">https://github.com/artest08/LateTemporalModeling3DCNN</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¡Œä¸ºè¯†åˆ« </tag>
            
            <tag> action recognition </tag>
            
            <tag> bert </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…‰æµæ³•</title>
      <link href="/blog/2020/09/07/optical-flow/"/>
      <url>/blog/2020/09/07/optical-flow/</url>
      
        <content type="html"><![CDATA[<center><p><img src="//onns.xyz/blog/image/20200907-1.png" alt="è®¡ç®—å…¬å¼"></p></center><h2 id="å‚è€ƒé“¾æ¥"><a class="header-anchor" href="#å‚è€ƒé“¾æ¥">#</a>å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://blog.csdn.net/qq_41368247/article/details/82562165" target="_blank" rel="noopener">è®¡ç®—æœºè§†è§‰â€“å…‰æµæ³•(optical flow)ç®€ä»‹</a></li><li><a href="https://zhuanlan.zhihu.com/p/42942198" target="_blank" rel="noopener">è¿åŠ¨ç›®æ ‡æ£€æµ‹(3)â€”å…‰æµæ³•</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¡Œä¸ºè¯†åˆ« </tag>
            
            <tag> action recognition </tag>
            
            <tag> optical flow </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»æµä¸­è·å– properties</title>
      <link href="/blog/2020/09/06/servlet-in-java-1/"/>
      <url>/blog/2020/09/06/servlet-in-java-1/</url>
      
        <content type="html"><![CDATA[<h2 id="idea-å°æŠ€å·§"><a class="header-anchor" href="#idea-å°æŠ€å·§">#</a>IDEA å°æŠ€å·§</h2><ul><li><code>alt</code>æŒ‰ä½ç§»åŠ¨é¼ æ ‡å¯ä»¥å¤šè¡Œç¼–è¾‘ã€‚</li><li><code>cmd + n</code>å¯ä»¥å¿«é€Ÿåˆ›å»ºæ„é€ å™¨ï¼ˆè‡ªè¡Œé€‰æ‹©å‚æ•°ï¼‰æˆ–è€…é‡å†™ç»§æ‰¿æ–¹æ³•ã€‚</li></ul><a id="more"></a><h2 id="ä»æµä¸­è·å–-properties"><a class="header-anchor" href="#ä»æµä¸­è·å–-properties">#</a>ä»æµä¸­è·å– properties</h2><p>æ–°å»ºäº†ä¸€ä¸ª<code>Maven Module</code>ï¼Œä»<code>archetype</code>ä¸­åˆ›å»ºçš„ã€‚</p><center><p><img src="//onns.xyz/blog/image/20200906-1.png" alt="Maven Moduleæˆªå›¾"></p></center><h3 id="åˆ›å»º-properties-æ–‡ä»¶"><a class="header-anchor" href="#åˆ›å»º-properties-æ–‡ä»¶">#</a>åˆ›å»º properties æ–‡ä»¶</h3><p>æ–‡ä»¶è·¯å¾„ä¸ºï¼š<code>servlet-02/src/main/resources/</code></p><p>æ–‡ä»¶åï¼š<code>db.properties</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">username&#x3D;root</span><br><span class="line">password&#x3D;123456</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»º-class"><a class="header-anchor" href="#åˆ›å»º-class">#</a>åˆ›å»º class</h3><p>æ–‡ä»¶è·¯å¾„ä¸ºï¼š<code>servlet-02/src/main/java/</code></p><p>åŒ…åä¸ºï¼š<code>xyz.onns.servlet</code></p><p>æ–‡ä»¶åï¼š<code>TestResourceStream.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> xyz.onns.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestResourceStream</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">InputStream resourceAsStream = <span class="keyword">this</span>.getServletContext().getResourceAsStream(<span class="string">"/WEB-INF/classes/db.properties"</span>);</span><br><span class="line">Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">properties.load(resourceAsStream);</span><br><span class="line">String username = properties.getProperty(<span class="string">"username"</span>);</span><br><span class="line">String password = properties.getProperty(<span class="string">"password"</span>);</span><br><span class="line">String maybenull = properties.getProperty(<span class="string">"maybenull"</span>);</span><br><span class="line">System.out.println(<span class="string">"TestResourceStream"</span>);</span><br><span class="line">resp.setHeader(<span class="string">"Content-Type"</span>, <span class="string">"text/html;charset=utf-8"</span>);</span><br><span class="line"></span><br><span class="line">PrintWriter writer = resp.getWriter();</span><br><span class="line">writer.print(<span class="string">"Success!æˆåŠŸäº†ï¼"</span>);</span><br><span class="line">writer.print(<span class="string">"&lt;br/&gt;"</span>);</span><br><span class="line">writer.print(username);</span><br><span class="line">writer.print(password);</span><br><span class="line">writer.print(maybenull);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">doGet(req, resp);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºè·¯ç”±"><a class="header-anchor" href="#åˆ›å»ºè·¯ç”±">#</a>åˆ›å»ºè·¯ç”±</h3><p>æ–‡ä»¶è·¯å¾„ä¸ºï¼š<code>servlet-02/src/main/webapp/WEB-INF/</code></p><p>æ–‡ä»¶åï¼š<code>web.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee</span></span></span><br><span class="line"><span class="tag"><span class="string">                      http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">"4.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">metadata-complete</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>TestResourceStream<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>xyz.onns.servlet.TestResourceStream<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>TestResourceStream<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/testr<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="å°ç»“"><a class="header-anchor" href="#å°ç»“">#</a>å°ç»“</h2><p>å¦‚æœå…ˆå†™è¿™å¥è¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PrintWriter writer = resp.getWriter();</span><br></pre></td></tr></table></figure><p>å†å†™è¿™å¥è¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">resp.setHeader(<span class="string">"Content-Type"</span>, <span class="string">"text/html;charset=utf-8"</span>);</span><br></pre></td></tr></table></figure><p>åœ¨å¤„ç†ä¸­æ–‡çš„æ—¶å€™ä¹Ÿè¿˜æ˜¯ä¼šä¹±ç ï¼Œå¤§æ¦‚åœ¨åˆ›å»º<code>PrintWriter</code>å¯¹è±¡çš„æ—¶å€™å°±å·²ç»æŠŠç›¸å…³å‚æ•°ä¼ è¿‡å»äº†å§ã€‚</p><h2 id="ç›¸å…³é“¾æ¥"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥">#</a>ç›¸å…³é“¾æ¥</h2><ul><li><a href="https://www.bilibili.com/video/BV12J411M7Sj?p=11" target="_blank" rel="noopener">æ•™ç¨‹åœ°å€</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> idea </tag>
            
            <tag> java </tag>
            
            <tag> tips </tag>
            
            <tag> macos </tag>
            
            <tag> servlet </tag>
            
            <tag> maven </tag>
            
            <tag> idea tips </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GFNET A LIGHTWEIGHT GROUP FRAME NETWORK FOR EFFICIENT HUMAN ACTION RECOGNITION</title>
      <link href="/blog/2020/09/05/gfnet-a-lightweight-group-frame-network-for-efficient-human-action-recognition/"/>
      <url>/blog/2020/09/05/gfnet-a-lightweight-group-frame-network-for-efficient-human-action-recognition/</url>
      
        <content type="html"><![CDATA[<h2 id="gfnet-a-lightweight-group-frame-network-for-efficient-human-action-recognition"><a class="header-anchor" href="#gfnet-a-lightweight-group-frame-network-for-efficient-human-action-recognition">#</a>GFNET: A LIGHTWEIGHT GROUP FRAME NETWORK FOR EFFICIENT HUMAN ACTION RECOGNITION</h2><p>ä¸ºäº†è§£å†³ç°æœ‰çš„è¡Œä¸ºè¯†åˆ«æ–¹æ³•<code>è®¡ç®—é‡å¤§</code>ã€<code>å‚æ•°å¤š</code>çš„é—®é¢˜ï¼Œä½œè€…æå‡ºäº†<code>GFNet</code>ã€‚</p><blockquote><p>To handle these issues, we propose a lightweight neural network called Group Frame Network (GFNet).</p></blockquote><p>GFNet é€šè¿‡å¸§çº§åˆ†è§£ï¼Œä»¥æå°çš„ä»£ä»·æå–æ¯ä¸€å¸§çš„ç‰¹å¾ã€‚</p><blockquote><p>GFNet adds frame-level decomposition to extract features of each frame at a minuscule cost.</p></blockquote><p>è®¾è®¡äº†ä¸¤ä¸ªæ ¸å¿ƒç»„ä»¶ï¼Œèƒ½å¤Ÿä»…ä»<code>RGBå›¾åƒ</code>ä¸­æå–æ—¶ç©ºä¿¡æ¯ï¼Œè€Œä¸éœ€è¦å€ŸåŠ©<code>å…‰æµ</code>æˆ–<code>multi-scale testing</code>ç­‰ã€‚</p><blockquote><p>There are two core components: <code>Group Temporal Module</code> (GTM) and <code>Group Spatial Module</code> (GSM). These two modules enable GFNet to obtain temporal-spatial information only from RGB images.</p></blockquote><p>ä¸ºäº†è¯æ˜æ¨¡å‹çš„æœ‰æ•ˆæ€§ï¼Œä»–ä»¬æ²¡æœ‰ä½¿ç”¨é¢„è®­ç»ƒç­–ç•¥ã€‚</p><blockquote><p>To verify the validity of the model, no pre-training strategy is used in our experiments.</p></blockquote><p>ç½‘ç»œçš„è¾“å…¥æ˜¯<code>ä¸€å®šæ•°é‡</code>çš„<code>è§†é¢‘å¸§</code>ï¼Œå¯¹è§†é¢‘è¿›è¡Œåˆ†æ®µé‡‡æ ·å¾—åˆ°ç»“æœã€‚</p><blockquote><p>The entire video with a variable number of frames is provided as the input of the network. Through an average sampling strategy, the video is divided into N equal-length segments and only one frame is selected from each segment. Due to the repeatability of adjacent frames, this sampling strategy can reduce inter-frame redundancy while preserving long-temporal information.</p></blockquote><p>K ä¸ªå±‚åŒæ—¶è¾“å…¥ç½‘ç»œè·å–æ—¶é—´ä¿¡æ¯ã€‚</p><blockquote><p>The first part is a feature extraction layer consisting of K separated branches. The sampled frames are simultaneously fed into the network to maintain the temporal information among these frames.</p></blockquote><p>å„è‡ªçš„åˆ†æ”¯ç‹¬ç«‹è®¡ç®—è·å¾—ç©ºé—´ä¿¡æ¯ã€‚</p><blockquote><p>In the feature extraction layer, each frame is learned independently using a network branch to get its spatial features.</p></blockquote><p>æ²¡å¤ªç†è§£ã€‚</p><blockquote><p>all the sampled frames are stacked by channel-wise convolution.<br>It means that the input channel of GFNet is 3N when using RGB images as input.</p></blockquote><p>ç”±äºæ®‹å·®ç½‘ç»œå…·æœ‰é«˜åº¦çš„æ³›åŒ–èƒ½åŠ›å’Œæ€§èƒ½ï¼Œæ‰€ä»¥åç»­çš„å—é€‰æ‹©é«˜åº¦æ¨¡å—åŒ–æ®‹å·®å•å…ƒã€‚</p><blockquote><p>Owing to the impressive performance and strong generalization abil- ity of residual architecture, the block is based on the highly modularized residual unit.</p></blockquote><p>è¿™å¥è¯æ²¡å¤ªç†è§£ã€‚</p><blockquote><p>Considering the extraneous motion and identical texture features in sampled frames, GFNet decomposes frames and reduces the number of channels for each frame to lessen spatial redundancy. To be specific, the number of channels is equally divided among branches. It means that only a small number of channels are used per frame.</p></blockquote><h2 id="group-temporal-module"><a class="header-anchor" href="#group-temporal-module">#</a>Group Temporal Module</h2><p>å› ä¸ºæ¯ä¸ªåˆ†æ”¯éƒ½æ˜¯å•ç‹¬è®¡ç®—çš„ï¼Œæ‰€ä»¥åŠ¿å¿…ä¼šé™ä½å‡†ç¡®ç‡ï¼ˆæ²¡æœ‰æå–å¸§é—´çš„è”ç³»ï¼‰ï¼Œæ‰€ä»¥æå‡ºäº†<code>GTM</code>æ¨¡å—ã€‚</p><blockquote><p>To leverage the inter-frame information effectively and better strengthen temporal relationships, GTM is proposed to efficiently overcome the side effects brought by the separated branch.</p></blockquote><blockquote><p>GTM consists of a translation layer and a 3D convolution layer.</p></blockquote><blockquote><p>The translation layer makes the replacement of the data dimension. It includes the channel merger and the channel separation, which achieves the conversion of the feature map from four-dimensional data to five-dimensional data.</p></blockquote><h2 id="group-spatial-module"><a class="header-anchor" href="#group-spatial-module">#</a>Group Spatial Module</h2><p>For the convolution layer of ResNet50, the computational cost is closely related to the number of channels. Motivated by this, a novel module called GSM is designed to significantly decrease the number of parameters and computational efforts.</p><p>GSM ä¹Ÿæ˜¯é€šè¿‡åªå–çº¹ç†æ¥æœ€å°åŒ–è®¡ç®—æˆæœ¬ã€‚</p><blockquote><p>Because of the similarity among frames, the texture information is repetitive. Meanwhile, irrelevant motion inside frames increases the intra-frame redundancy. Aiming at minimizing the interference of redundant information, GSM diminishes the number of channels to extract features per frame.</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¡Œä¸ºè¯†åˆ« </tag>
            
            <tag> action recognition </tag>
            
            <tag> gfnet </tag>
            
            <tag> group frame network </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MacOSä¸‹é…ç½®maven</title>
      <link href="/blog/2020/09/02/maven-in-mac/"/>
      <url>/blog/2020/09/02/maven-in-mac/</url>
      
        <content type="html"><![CDATA[<p>å®˜æ–¹ä¸‹è½½åœ°å€ï¼š<a href="http://maven.apache.org/download.cgi" target="_blank" rel="noopener">http://maven.apache.org/download.cgi</a></p><p>ä¸‹è½½ï¼š<a href="https://mirrors.tuna.tsinghua.edu.cn/apache/maven/maven-3/3.6.3/binaries/apache-maven-3.6.3-bin.tar.gz" target="_blank" rel="noopener">https://mirrors.tuna.tsinghua.edu.cn/apache/maven/maven-3/3.6.3/binaries/apache-maven-3.6.3-bin.tar.gz</a></p><p>è§£å‹ä¹‹åï¼Œå¤åˆ¶ç›®å½•ï¼š<code>/Users/onns/Downloads/java/apache-maven-3.6.3</code></p><p>å› ä¸ºç³»ç»Ÿæ›´æ–°åï¼Œå‘½ä»¤è¡Œä»<code>bash</code>æ¢æˆäº†<code>zsh</code>æ‰€ä»¥ç¯å¢ƒå˜é‡æ–‡ä»¶ä¹Ÿæ”¹äº†ï¼š<code>.zshrc</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">'export M2_HOME=/Users/onns/Downloads/java/apache-maven-3.6.3/bin'</span> &gt;&gt; .zshrc</span><br><span class="line"><span class="built_in">echo</span> <span class="string">'export MAVEN_HOME=/Users/onns/Downloads/java/apache-maven-3.6.3'</span> &gt;&gt; .zshrc</span><br><span class="line"><span class="built_in">echo</span> <span class="string">'export PATH=$MAVEN_HOME/bin:$PATH'</span> &gt;&gt; .zshrc</span><br></pre></td></tr></table></figure><p>è®©ç¯å¢ƒå˜é‡ç”Ÿæ•ˆï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> .zshrc</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ mvn --version</span><br><span class="line">Apache Maven 3.6.3 (cecedd343002696d0abb50b32b541b8a6ba2883f)</span><br><span class="line">Maven home: &#x2F;Users&#x2F;onns&#x2F;Downloads&#x2F;java&#x2F;apache-maven-3.6.3</span><br><span class="line">Java version: 13.0.2, vendor: Oracle Corporation, runtime: &#x2F;Library&#x2F;Java&#x2F;JavaVirtualMachines&#x2F;jdk-13.0.2.jdk&#x2F;Contents&#x2F;Home</span><br><span class="line">Default locale: en_CN, platform encoding: UTF-8</span><br><span class="line">OS name: &quot;mac os x&quot;, version: &quot;10.15.5&quot;, arch: &quot;x86_64&quot;, family: &quot;mac&quot;</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹é•œåƒæº"><a class="header-anchor" href="#ä¿®æ”¹é•œåƒæº">#</a>ä¿®æ”¹é•œåƒæº</h2><p>å‚ç…§é˜¿é‡Œäº‘çš„ä½¿ç”¨æŒ‡å—ï¼š<a href="https://maven.aliyun.com/mvn/guide" target="_blank" rel="noopener">https://maven.aliyun.com/mvn/guide</a></p><p>æ‰“å¼€<code>$MAVEN_HOME/conf/settings.xml</code></p><p>åœ¨<code>&lt;mirrors&gt;&lt;/mirrors&gt;</code>æ ‡ç­¾ä¸­æ·»åŠ <code>mirror</code>å­èŠ‚ç‚¹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">id</span>&gt;</span>aliyunmaven<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>é˜¿é‡Œäº‘å…¬å…±ä»“åº“<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://maven.aliyun.com/repository/public<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="é…ç½®æœ¬åœ°ä»“åº“"><a class="header-anchor" href="#é…ç½®æœ¬åœ°ä»“åº“">#</a>é…ç½®æœ¬åœ°ä»“åº“</h2><p>æ‰“å¼€<code>$MAVEN_HOME/conf/settings.xml</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- localRepository</span></span><br><span class="line"><span class="comment"> | The path to the local repository maven will use to store artifacts.</span></span><br><span class="line"><span class="comment"> |</span></span><br><span class="line"><span class="comment"> | Default: $&#123;user.home&#125;/.m2/repository</span></span><br><span class="line"><span class="comment">&lt;localRepository&gt;/path/to/local/repo&lt;/localRepository&gt;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">localRepository</span>&gt;</span>/Users/onns/Downloads/java/apache-maven-3.6.3/repo<span class="tag">&lt;/<span class="name">localRepository</span>&gt;</span></span><br></pre></td></tr></table></figure><p>å®Œ</p><h2 id="ç›¸å…³é“¾æ¥"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥">#</a>ç›¸å…³é“¾æ¥</h2><ul><li><a href="https://www.bilibili.com/video/BV12J411M7Sj?p=5" target="_blank" rel="noopener">æ•™ç¨‹åœ°å€</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> zsh </tag>
            
            <tag> macos </tag>
            
            <tag> maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PAN Towards Fast Action Recognition via Learning Persistence of Appearance</title>
      <link href="/blog/2020/09/01/pan-towards-fast-action-recognition-via-learning-persistence-of-appearance/"/>
      <url>/blog/2020/09/01/pan-towards-fast-action-recognition-via-learning-persistence-of-appearance/</url>
      
        <content type="html"><![CDATA[<h2 id="pan-towards-fast-action-recognition-via-learning-persistence-of-appearance"><a class="header-anchor" href="#pan-towards-fast-action-recognition-via-learning-persistence-of-appearance">#</a>PAN: Towards Fast Action Recognition via Learning Persistence of Appearance</h2><p>æ¯”å…‰æµç½‘ç»œå¿«äº†1000å€</p><blockquote><p>Our PA is over 1000Ã— faster (8196fps vs. 8fps) than conventional optical flow in terms of motion modeling speed</p></blockquote><p>è¿åŠ¨è¾¹ç•Œçš„å¾®å°ä½ç§»åœ¨åŠ¨ä½œè¯†åˆ«ä¸­èµ·é‡è¦ä½œç”¨çš„è§’è‰²ã€‚</p><blockquote><p>According to the aforementioned anal- ysis, we can conclude that small displacements of motion boundaries play a vital role in action recognition.</p></blockquote><p>ä½å±‚çš„<code>feature map</code>ä¹‹é—´çš„å·®å¼‚èƒ½æ›´å¤šåœ°å…³æ³¨è¾¹ç•Œçš„å˜åŒ–ã€‚</p><blockquote><p>the differences among low-level feature maps will pay more attention to the variations at boundaries.<br>In summary, differences in low-level feature maps can reflect small displacements of motion boundaries due to convolutional operations.</p></blockquote><p>åœ¨<code>UCF101</code>ä¸Šåšå®éªŒè¡¨æ˜åœ¨ç¬¬ä¸€å±‚æ•ˆæœæœ€å¥½ã€‚</p><blockquote><p>We define the basic conv-layer as eight 7Ã—7 convolutions with stride=1 and padding=3, so that the spatial resolutions of the obtained feature maps are not reduced.</p></blockquote><p>ä¸¤ç§ç¼–ç ç­–ç•¥ï¼š</p><p><strong>PA as motion modality</strong></p><p><strong>PA as attention</strong></p><p>ç¬¬ä¸€ç§æ— è®ºæ˜¯ä»è®¡ç®—é‡ä¸Šè¿˜æ˜¯ä»å‡†ç¡®ç‡ä¸Šéƒ½è¦æ›´å¥½ã€‚</p><p>å¯èƒ½åŸå› æ˜¯ç¬¬äºŒç§èåˆæ–¹æ³•å¯¼è‡´å›¾åƒçš„ä¸å¹³è¡¡ã€‚</p><blockquote><p>However, for e2, attending appearance feature maps with PA will highlight the motion boundaries, leading to the imbalanced appearance responses both inside and at the boundaries of the moving objects.</p></blockquote><p><strong>Various-timescale Aggregation Pooling</strong></p><h2 id="å®‰è£…æµ‹è¯•"><a class="header-anchor" href="#å®‰è£…æµ‹è¯•">#</a>å®‰è£…æµ‹è¯•</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pip install torch torchvision</span><br><span class="line">pip install tensorboardX</span><br><span class="line">pip install tqdm</span><br><span class="line">pip install scikit-learn</span><br><span class="line">pip install lmdb</span><br></pre></td></tr></table></figure><h2 id="å®éªŒç»“æœ"><a class="header-anchor" href="#å®éªŒç»“æœ">#</a>å®éªŒç»“æœ</h2><h3 id="lite"><a class="header-anchor" href="#lite">#</a>Lite</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">somethingv2: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">Downloading: <span class="string">"https://download.pytorch.org/models/resnet50-19c8e357.pth"</span> to /home/xiangyi/.cache/torch/hub/checkpoints/resnet50-19c8e357.pth</span><br><span class="line">100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 97.8M/97.8M [00:06&lt;00:00, 14.8MB/s]</span><br><span class="line">=&gt; Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">=&gt; Converting the ImageNet model to a PAN_Lite init model</span><br><span class="line">=&gt; Done. PAN_lite model ready...</span><br><span class="line">video number:24777</span><br><span class="line">video 0 <span class="keyword">done</span>, total 0/24777, average 0.879 sec/video, moving Prec@1 65.625 Prec@5 87.500</span><br><span class="line">video 1280 <span class="keyword">done</span>, total 1280/24777, average 0.239 sec/video, moving Prec@1 60.491 Prec@5 85.640</span><br><span class="line">video 2560 <span class="keyword">done</span>, total 2560/24777, average 0.230 sec/video, moving Prec@1 60.518 Prec@5 85.671</span><br><span class="line">video 3840 <span class="keyword">done</span>, total 3840/24777, average 0.227 sec/video, moving Prec@1 60.015 Prec@5 85.374</span><br><span class="line">video 5120 <span class="keyword">done</span>, total 5120/24777, average 0.225 sec/video, moving Prec@1 60.031 Prec@5 85.475</span><br><span class="line">video 6400 <span class="keyword">done</span>, total 6400/24777, average 0.226 sec/video, moving Prec@1 59.855 Prec@5 85.334</span><br><span class="line">video 7680 <span class="keyword">done</span>, total 7680/24777, average 0.224 sec/video, moving Prec@1 59.775 Prec@5 85.292</span><br><span class="line">video 8960 <span class="keyword">done</span>, total 8960/24777, average 0.223 sec/video, moving Prec@1 59.519 Prec@5 85.284</span><br><span class="line">video 10240 <span class="keyword">done</span>, total 10240/24777, average 0.224 sec/video, moving Prec@1 59.530 Prec@5 85.423</span><br><span class="line">video 11520 <span class="keyword">done</span>, total 11520/24777, average 0.224 sec/video, moving Prec@1 59.686 Prec@5 85.497</span><br><span class="line">video 12800 <span class="keyword">done</span>, total 12800/24777, average 0.224 sec/video, moving Prec@1 59.678 Prec@5 85.487</span><br><span class="line">video 14080 <span class="keyword">done</span>, total 14080/24777, average 0.225 sec/video, moving Prec@1 59.637 Prec@5 85.464</span><br><span class="line">video 15360 <span class="keyword">done</span>, total 15360/24777, average 0.225 sec/video, moving Prec@1 59.349 Prec@5 85.315</span><br><span class="line">video 16640 <span class="keyword">done</span>, total 16640/24777, average 0.225 sec/video, moving Prec@1 59.327 Prec@5 85.327</span><br><span class="line">video 17920 <span class="keyword">done</span>, total 17920/24777, average 0.226 sec/video, moving Prec@1 59.058 Prec@5 85.204</span><br><span class="line">video 19200 <span class="keyword">done</span>, total 19200/24777, average 0.226 sec/video, moving Prec@1 59.121 Prec@5 85.206</span><br><span class="line">video 20480 <span class="keyword">done</span>, total 20480/24777, average 0.226 sec/video, moving Prec@1 59.200 Prec@5 85.295</span><br><span class="line">video 21760 <span class="keyword">done</span>, total 21760/24777, average 0.227 sec/video, moving Prec@1 59.283 Prec@5 85.337</span><br><span class="line">video 23040 <span class="keyword">done</span>, total 23040/24777, average 0.227 sec/video, moving Prec@1 59.254 Prec@5 85.422</span><br><span class="line">video 24320 <span class="keyword">done</span>, total 24320/24777, average 0.227 sec/video, moving Prec@1 59.277 Prec@5 85.421</span><br><span class="line">[0.84482759 0.38815789 0.51633987 0.58252427 0.58974359 0.54385965</span><br><span class="line"> 0.76738609 0.63636364 0.67716535 0.60264901 0.53932584 0.68613139</span><br><span class="line"> 0.26923077 0.425      0.7122807  0.51914894 0.42639594 0.38157895</span><br><span class="line"> 0.46025105 0.57345972 0.51574803 0.62280702 0.55232558 0.56382979</span><br><span class="line"> 0.56818182 0.52631579 0.6        0.48514851 0.71818182 0.77394636</span><br><span class="line"> 0.78378378 0.77477477 0.82954545 0.11650485 0.36144578 0.203125</span><br><span class="line"> 0.84331797 0.82129278 0.22222222 0.79411765 0.71584699 0.73214286</span><br><span class="line"> 0.59624413 0.62057878 0.72972973 0.51253482 0.5873494  0.40703518</span><br><span class="line"> 0.42857143 0.80430108 0.7257384  0.06666667 0.40625    0.68571429</span><br><span class="line"> 0.25       0.42       0.4109589  0.60377358 0.17647059 0.81654676</span><br><span class="line"> 0.92       0.21568627 0.73417722 0.30841121 0.21621622 0.53301887</span><br><span class="line"> 0.30188679 0.40298507 0.6754386  0.43       0.64285714 0.47826087</span><br><span class="line"> 0.54411765 0.61538462 0.66981132 0.36842105 0.5        0.30769231</span><br><span class="line"> 0.2962963  0.77586207 0.296875   0.168      0.36170213 0.44680851</span><br><span class="line"> 0.64       0.44444444 0.85882353 0.792      0.25       0.19277108</span><br><span class="line"> 0.56521739 0.85       0.57894737 0.764      0.76694915 0.13888889</span><br><span class="line"> 0.14705882 0.2892562  0.51020408 0.67765568 0.46792453 0.62637363</span><br><span class="line"> 0.29310345 0.8125     0.7480315  0.73333333 0.52054795 0.66502463</span><br><span class="line"> 0.39189189 0.48       0.6056338  0.05555556 0.49640288 0.27777778</span><br><span class="line"> 0.69097222 0.54347826 0.25925926 0.77777778 0.40677966 0.64356436</span><br><span class="line"> 0.80314961 0.80681818 0.34975369 0.69230769 0.36538462 0.63761468</span><br><span class="line"> 0.55339806 0.42608696 0.1302682  0.70955882 0.32142857 0.35616438</span><br><span class="line"> 0.44827586 0.24561404 0.79619565 0.62269939 0.23529412 0.45</span><br><span class="line"> 0.24770642 0.72727273 0.6627907  0.359375   0.59375    0.63311688</span><br><span class="line"> 0.56050955 0.44680851 0.74166667 0.0859375  0.55230126 0.90754717</span><br><span class="line"> 0.76902174 0.33152174 0.3877551  0.75229358 0.51181102 0.29268293</span><br><span class="line"> 0.5        0.58695652 0.55045872 0.34545455 0.41284404 0.46052632</span><br><span class="line"> 0.43925234 0.45       0.84398977 0.88709677 0.96428571 0.94444444</span><br><span class="line"> 0.81666667 0.70666667 0.45098039 0.72115385 0.74418605 0.65693431]</span><br><span class="line">upper bound: 0.548518228331384</span><br><span class="line">-----Evaluation is finished------</span><br><span class="line">Class Accuracy 53.84%</span><br><span class="line">Overall Prec@1 59.26% Prec@5 85.45%</span><br><span class="line">/home/xiangyi/miniconda3/envs/pan/lib/python3.7/site-packages/numpy/core/_asarray.py:136: VisibleDeprecationWarning: Creating an ndarray from ragged nested sequences (<span class="built_in">which</span> is a list-or-tuple of lists-or-tuples-or ndarrays with different lengths or shapes) is deprecated. If you meant to <span class="keyword">do</span> this, you must specify <span class="string">'dtype=object'</span> when creating the ndarray</span><br><span class="line">  <span class="built_in">return</span> array(a, dtype, copy=False, order=order, subok=True)</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line">$ python test_models.py somethingv2 --VAP --batch_size=16 -j=4 --test_crops=1 --test_segments=8 --weights=pretrained/PAN_Lite_somethingv2_resnet50_shift8_blockres_avg_segment8_e80.pth.tar</span><br><span class="line">somethingv2: 174 classes</span><br><span class="line">=&gt; <span class="built_in">shift</span>: True, shift_div: 8, shift_place: blockres</span><br><span class="line">=&gt; base model: resnet50</span><br><span class="line">=&gt; Adding temporal <span class="built_in">shift</span>...</span><br><span class="line">=&gt; Using 3-level VAP</span><br><span class="line">=&gt; Converting the ImageNet model to a PAN_Lite init model</span><br><span class="line">=&gt; Done. PAN_lite model ready...</span><br><span class="line">video number:24777</span><br><span class="line">video 0 <span class="keyword">done</span>, total 0/24777, average 4.263 sec/video, moving Prec@1 56.250 Prec@5 81.250</span><br><span class="line">video 320 <span class="keyword">done</span>, total 320/24777, average 0.481 sec/video, moving Prec@1 65.476 Prec@5 86.310</span><br><span class="line">video 640 <span class="keyword">done</span>, total 640/24777, average 0.399 sec/video, moving Prec@1 60.976 Prec@5 85.213</span><br><span class="line">video 960 <span class="keyword">done</span>, total 960/24777, average 0.452 sec/video, moving Prec@1 60.246 Prec@5 85.348</span><br><span class="line">video 1280 <span class="keyword">done</span>, total 1280/24777, average 0.424 sec/video, moving Prec@1 60.880 Prec@5 85.802</span><br><span class="line">video 1600 <span class="keyword">done</span>, total 1600/24777, average 0.400 sec/video, moving Prec@1 60.458 Prec@5 85.334</span><br><span class="line">video 1920 <span class="keyword">done</span>, total 1920/24777, average 0.397 sec/video, moving Prec@1 60.227 Prec@5 85.537</span><br><span class="line">video 2240 <span class="keyword">done</span>, total 2240/24777, average 0.398 sec/video, moving Prec@1 60.151 Prec@5 85.594</span><br><span class="line">video 2560 <span class="keyword">done</span>, total 2560/24777, average 0.390 sec/video, moving Prec@1 60.404 Prec@5 85.637</span><br><span class="line">video 2880 <span class="keyword">done</span>, total 2880/24777, average 0.388 sec/video, moving Prec@1 60.290 Prec@5 85.463</span><br><span class="line">video 3200 <span class="keyword">done</span>, total 3200/24777, average 0.386 sec/video, moving Prec@1 60.261 Prec@5 85.572</span><br><span class="line">video 3520 <span class="keyword">done</span>, total 3520/24777, average 0.380 sec/video, moving Prec@1 60.436 Prec@5 85.605</span><br><span class="line">video 3840 <span class="keyword">done</span>, total 3840/24777, average 0.372 sec/video, moving Prec@1 60.062 Prec@5 85.425</span><br><span class="line">video 4160 <span class="keyword">done</span>, total 4160/24777, average 0.368 sec/video, moving Prec@1 59.962 Prec@5 85.321</span><br><span class="line">video 4480 <span class="keyword">done</span>, total 4480/24777, average 0.367 sec/video, moving Prec@1 59.831 Prec@5 85.343</span><br><span class="line">video 4800 <span class="keyword">done</span>, total 4800/24777, average 0.365 sec/video, moving Prec@1 59.884 Prec@5 85.507</span><br><span class="line">video 5120 <span class="keyword">done</span>, total 5120/24777, average 0.362 sec/video, moving Prec@1 60.008 Prec@5 85.533</span><br><span class="line">video 5440 <span class="keyword">done</span>, total 5440/24777, average 0.358 sec/video, moving Prec@1 60.392 Prec@5 85.521</span><br><span class="line">video 5760 <span class="keyword">done</span>, total 5760/24777, average 0.355 sec/video, moving Prec@1 60.336 Prec@5 85.457</span><br><span class="line">video 6080 <span class="keyword">done</span>, total 6080/24777, average 0.352 sec/video, moving Prec@1 60.285 Prec@5 85.400</span><br><span class="line">video 6400 <span class="keyword">done</span>, total 6400/24777, average 0.351 sec/video, moving Prec@1 59.804 Prec@5 85.318</span><br><span class="line">video 6720 <span class="keyword">done</span>, total 6720/24777, average 0.348 sec/video, moving Prec@1 59.650 Prec@5 85.125</span><br><span class="line">video 7040 <span class="keyword">done</span>, total 7040/24777, average 0.347 sec/video, moving Prec@1 59.736 Prec@5 85.204</span><br><span class="line">video 7360 <span class="keyword">done</span>, total 7360/24777, average 0.344 sec/video, moving Prec@1 59.585 Prec@5 85.182</span><br><span class="line">video 7680 <span class="keyword">done</span>, total 7680/24777, average 0.342 sec/video, moving Prec@1 59.771 Prec@5 85.265</span><br><span class="line">video 8000 <span class="keyword">done</span>, total 8000/24777, average 0.341 sec/video, moving Prec@1 59.681 Prec@5 85.292</span><br><span class="line">video 8320 <span class="keyword">done</span>, total 8320/24777, average 0.339 sec/video, moving Prec@1 59.633 Prec@5 85.281</span><br><span class="line">video 8640 <span class="keyword">done</span>, total 8640/24777, average 0.337 sec/video, moving Prec@1 59.635 Prec@5 85.386</span><br><span class="line">video 8960 <span class="keyword">done</span>, total 8960/24777, average 0.336 sec/video, moving Prec@1 59.548 Prec@5 85.316</span><br><span class="line">video 9280 <span class="keyword">done</span>, total 9280/24777, average 0.334 sec/video, moving Prec@1 59.477 Prec@5 85.273</span><br><span class="line">video 9600 <span class="keyword">done</span>, total 9600/24777, average 0.333 sec/video, moving Prec@1 59.536 Prec@5 85.358</span><br><span class="line">video 9920 <span class="keyword">done</span>, total 9920/24777, average 0.331 sec/video, moving Prec@1 59.652 Prec@5 85.397</span><br><span class="line">video 10240 <span class="keyword">done</span>, total 10240/24777, average 0.331 sec/video, moving Prec@1 59.565 Prec@5 85.413</span><br><span class="line">video 10560 <span class="keyword">done</span>, total 10560/24777, average 0.330 sec/video, moving Prec@1 59.503 Prec@5 85.354</span><br><span class="line">video 10880 <span class="keyword">done</span>, total 10880/24777, average 0.329 sec/video, moving Prec@1 59.554 Prec@5 85.380</span><br><span class="line">video 11200 <span class="keyword">done</span>, total 11200/24777, average 0.330 sec/video, moving Prec@1 59.576 Prec@5 85.396</span><br><span class="line">video 11520 <span class="keyword">done</span>, total 11520/24777, average 0.329 sec/video, moving Prec@1 59.639 Prec@5 85.480</span><br><span class="line">video 11840 <span class="keyword">done</span>, total 11840/24777, average 0.327 sec/video, moving Prec@1 59.691 Prec@5 85.417</span><br><span class="line">video 12160 <span class="keyword">done</span>, total 12160/24777, average 0.326 sec/video, moving Prec@1 59.675 Prec@5 85.422</span><br><span class="line">video 12480 <span class="keyword">done</span>, total 12480/24777, average 0.325 sec/video, moving Prec@1 59.675 Prec@5 85.451</span><br><span class="line">video 12800 <span class="keyword">done</span>, total 12800/24777, average 0.325 sec/video, moving Prec@1 59.691 Prec@5 85.471</span><br><span class="line">video 13120 <span class="keyword">done</span>, total 13120/24777, average 0.324 sec/video, moving Prec@1 59.645 Prec@5 85.490</span><br><span class="line">video 13440 <span class="keyword">done</span>, total 13440/24777, average 0.323 sec/video, moving Prec@1 59.617 Prec@5 85.486</span><br><span class="line">video 13760 <span class="keyword">done</span>, total 13760/24777, average 0.322 sec/video, moving Prec@1 59.640 Prec@5 85.475</span><br><span class="line">video 14080 <span class="keyword">done</span>, total 14080/24777, average 0.321 sec/video, moving Prec@1 59.641 Prec@5 85.464</span><br><span class="line">video 14400 <span class="keyword">done</span>, total 14400/24777, average 0.322 sec/video, moving Prec@1 59.600 Prec@5 85.502</span><br><span class="line">video 14720 <span class="keyword">done</span>, total 14720/24777, average 0.323 sec/video, moving Prec@1 59.521 Prec@5 85.437</span><br><span class="line">video 15040 <span class="keyword">done</span>, total 15040/24777, average 0.323 sec/video, moving Prec@1 59.358 Prec@5 85.355</span><br><span class="line">video 15360 <span class="keyword">done</span>, total 15360/24777, average 0.323 sec/video, moving Prec@1 59.365 Prec@5 85.341</span><br><span class="line">video 15680 <span class="keyword">done</span>, total 15680/24777, average 0.322 sec/video, moving Prec@1 59.353 Prec@5 85.302</span><br><span class="line">video 16000 <span class="keyword">done</span>, total 16000/24777, average 0.321 sec/video, moving Prec@1 59.328 Prec@5 85.340</span><br><span class="line">video 16320 <span class="keyword">done</span>, total 16320/24777, average 0.322 sec/video, moving Prec@1 59.341 Prec@5 85.327</span><br><span class="line">video 16640 <span class="keyword">done</span>, total 16640/24777, average 0.320 sec/video, moving Prec@1 59.312 Prec@5 85.315</span><br><span class="line">video 16960 <span class="keyword">done</span>, total 16960/24777, average 0.320 sec/video, moving Prec@1 59.295 Prec@5 85.315</span><br><span class="line">video 17280 <span class="keyword">done</span>, total 17280/24777, average 0.320 sec/video, moving Prec@1 59.256 Prec@5 85.291</span><br><span class="line">video 17600 <span class="keyword">done</span>, total 17600/24777, average 0.321 sec/video, moving Prec@1 59.191 Prec@5 85.280</span><br><span class="line">video 17920 <span class="keyword">done</span>, total 17920/24777, average 0.321 sec/video, moving Prec@1 59.066 Prec@5 85.220</span><br><span class="line">video 18240 <span class="keyword">done</span>, total 18240/24777, average 0.321 sec/video, moving Prec@1 59.109 Prec@5 85.232</span><br><span class="line">video 18560 <span class="keyword">done</span>, total 18560/24777, average 0.321 sec/video, moving Prec@1 59.189 Prec@5 85.255</span><br><span class="line">video 18880 <span class="keyword">done</span>, total 18880/24777, average 0.320 sec/video, moving Prec@1 59.113 Prec@5 85.198</span><br><span class="line">video 19200 <span class="keyword">done</span>, total 19200/24777, average 0.319 sec/video, moving Prec@1 59.128 Prec@5 85.205</span><br><span class="line">video 19520 <span class="keyword">done</span>, total 19520/24777, average 0.319 sec/video, moving Prec@1 59.142 Prec@5 85.227</span><br><span class="line">video 19840 <span class="keyword">done</span>, total 19840/24777, average 0.319 sec/video, moving Prec@1 59.136 Prec@5 85.244</span><br><span class="line">video 20160 <span class="keyword">done</span>, total 20160/24777, average 0.320 sec/video, moving Prec@1 59.199 Prec@5 85.255</span><br><span class="line">video 20480 <span class="keyword">done</span>, total 20480/24777, average 0.320 sec/video, moving Prec@1 59.202 Prec@5 85.290</span><br><span class="line">video 20800 <span class="keyword">done</span>, total 20800/24777, average 0.319 sec/video, moving Prec@1 59.204 Prec@5 85.295</span><br><span class="line">video 21120 <span class="keyword">done</span>, total 21120/24777, average 0.319 sec/video, moving Prec@1 59.226 Prec@5 85.328</span><br><span class="line">video 21440 <span class="keyword">done</span>, total 21440/24777, average 0.318 sec/video, moving Prec@1 59.270 Prec@5 85.314</span><br><span class="line">video 21760 <span class="keyword">done</span>, total 21760/24777, average 0.318 sec/video, moving Prec@1 59.285 Prec@5 85.342</span><br><span class="line">video 22080 <span class="keyword">done</span>, total 22080/24777, average 0.318 sec/video, moving Prec@1 59.314 Prec@5 85.355</span><br><span class="line">video 22400 <span class="keyword">done</span>, total 22400/24777, average 0.318 sec/video, moving Prec@1 59.284 Prec@5 85.377</span><br><span class="line">video 22720 <span class="keyword">done</span>, total 22720/24777, average 0.318 sec/video, moving Prec@1 59.236 Prec@5 85.340</span><br><span class="line">video 23040 <span class="keyword">done</span>, total 23040/24777, average 0.317 sec/video, moving Prec@1 59.256 Prec@5 85.414</span><br><span class="line">video 23360 <span class="keyword">done</span>, total 23360/24777, average 0.317 sec/video, moving Prec@1 59.274 Prec@5 85.417</span><br><span class="line">video 23680 <span class="keyword">done</span>, total 23680/24777, average 0.317 sec/video, moving Prec@1 59.246 Prec@5 85.403</span><br><span class="line">video 24000 <span class="keyword">done</span>, total 24000/24777, average 0.318 sec/video, moving Prec@1 59.231 Prec@5 85.389</span><br><span class="line">video 24320 <span class="keyword">done</span>, total 24320/24777, average 0.317 sec/video, moving Prec@1 59.291 Prec@5 85.413</span><br><span class="line">video 24640 <span class="keyword">done</span>, total 24640/24777, average 0.317 sec/video, moving Prec@1 59.259 Prec@5 85.436</span><br><span class="line">[0.84482759 0.38815789 0.51633987 0.58252427 0.58974359 0.54385965</span><br><span class="line"> 0.76738609 0.63636364 0.67716535 0.60264901 0.53932584 0.68613139</span><br><span class="line"> 0.26923077 0.425      0.7122807  0.51914894 0.42639594 0.38157895</span><br><span class="line"> 0.46025105 0.57345972 0.51574803 0.62280702 0.55232558 0.56382979</span><br><span class="line"> 0.56818182 0.52631579 0.6        0.48514851 0.71818182 0.77394636</span><br><span class="line"> 0.78378378 0.77477477 0.82954545 0.11650485 0.36144578 0.203125</span><br><span class="line"> 0.84331797 0.82129278 0.22222222 0.79411765 0.71584699 0.73214286</span><br><span class="line"> 0.59624413 0.62057878 0.72972973 0.51253482 0.5873494  0.40703518</span><br><span class="line"> 0.42857143 0.80430108 0.7257384  0.06666667 0.40625    0.68571429</span><br><span class="line"> 0.25       0.42       0.4109589  0.60377358 0.17647059 0.81654676</span><br><span class="line"> 0.92       0.21568627 0.73417722 0.30841121 0.21621622 0.53301887</span><br><span class="line"> 0.30188679 0.40298507 0.6754386  0.43       0.64285714 0.47826087</span><br><span class="line"> 0.54411765 0.61538462 0.66981132 0.36842105 0.5        0.30769231</span><br><span class="line"> 0.2962963  0.77586207 0.296875   0.168      0.36170213 0.44680851</span><br><span class="line"> 0.64       0.44444444 0.85882353 0.792      0.25       0.19277108</span><br><span class="line"> 0.56521739 0.85       0.57894737 0.764      0.76694915 0.13888889</span><br><span class="line"> 0.14705882 0.2892562  0.51020408 0.67765568 0.46792453 0.62637363</span><br><span class="line"> 0.29310345 0.8125     0.7480315  0.73333333 0.52054795 0.66502463</span><br><span class="line"> 0.39189189 0.48       0.6056338  0.05555556 0.49640288 0.27777778</span><br><span class="line"> 0.69097222 0.54347826 0.25925926 0.77777778 0.40677966 0.64356436</span><br><span class="line"> 0.80314961 0.80681818 0.34975369 0.69230769 0.36538462 0.63761468</span><br><span class="line"> 0.55339806 0.42608696 0.1302682  0.70955882 0.32142857 0.35616438</span><br><span class="line"> 0.44827586 0.24561404 0.79619565 0.62269939 0.23529412 0.45</span><br><span class="line"> 0.24770642 0.72727273 0.6627907  0.359375   0.59375    0.63311688</span><br><span class="line"> 0.56050955 0.44680851 0.74166667 0.0859375  0.55230126 0.90754717</span><br><span class="line"> 0.76902174 0.33152174 0.3877551  0.75229358 0.51181102 0.29268293</span><br><span class="line"> 0.5        0.58695652 0.55045872 0.34545455 0.41284404 0.46052632</span><br><span class="line"> 0.43925234 0.45       0.84398977 0.88709677 0.96428571 0.94444444</span><br><span class="line"> 0.81666667 0.70666667 0.45098039 0.72115385 0.74418605 0.65693431]</span><br><span class="line">upper bound: 0.548518228331384</span><br><span class="line">-----Evaluation is finished------</span><br><span class="line">Class Accuracy 53.84%</span><br><span class="line">Overall Prec@1 59.26% Prec@5 85.45%</span><br><span class="line">E:\Program Files\Anaconda3\envs\tsm\lib\site-packages\numpy\core\_asarray.py:136: VisibleDeprecationWarning: Creating an ndarray from ragged nested sequences (<span class="built_in">which</span> is a list-or-tuple of lists-or-tuples-or ndarrays with different lengths or shapes) is deprecated. If you meant to <span class="keyword">do</span> this, you must specify <span class="string">'dtype=object'</span> when creating the ndarray</span><br><span class="line">  <span class="built_in">return</span> array(a, dtype, copy=False, order=order, subok=True)</span><br></pre></td></tr></table></figure><h2 id="ç›¸å…³é“¾æ¥"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥">#</a>ç›¸å…³é“¾æ¥</h2><ul><li><a href="https://arxiv.org/pdf/2008.03462v1.pdf" target="_blank" rel="noopener">https://arxiv.org/pdf/2008.03462v1.pdf</a></li><li><a href="https://github.com/zhang-can/PAN-PyTorch" target="_blank" rel="noopener">https://github.com/zhang-can/PAN-PyTorch</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¡Œä¸ºè¯†åˆ« </tag>
            
            <tag> action recognition </tag>
            
            <tag> pan </tag>
            
            <tag> persistent appearance network </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TSM Temporal Shift Module for Efficient Video Understanding</title>
      <link href="/blog/2020/08/30/tsm-temporal-shift-module-for-efficient-video-understanding/"/>
      <url>/blog/2020/08/30/tsm-temporal-shift-module-for-efficient-video-understanding/</url>
      
        <content type="html"><![CDATA[<h1 id="tsm-temporal-shift-module-for-efficient-video-understanding"><a class="header-anchor" href="#tsm-temporal-shift-module-for-efficient-video-understanding">#</a>TSM: Temporal Shift Module for Efficient Video Understanding</h1><center><p><img src="//onns.xyz/blog/image/20200910-1.png" alt="æ ¸å¿ƒæ€æƒ³"></p></center><p>æ–‡ç« å®ç°äº†åœ¨ 2D æ¨¡å‹ä¸Šè¾¾åˆ° 3D æ¨¡å‹çš„ç²¾åº¦ï¼Œæå¤§çš„é™ä½äº†è®¡ç®—ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡ä¸€ç§<code>shift</code>æ“ä½œï¼Œå°†æ—¶é—´çº¬åº¦ä¸Šçš„ä¸åŒå¸§ä¹‹é—´çš„é€šé“è¿›è¡Œåç§»ï¼Œä»¥è¾¾åˆ°å…±äº«æ—¶é—´ç‰¹å¾çš„ç›®çš„ã€‚</p><p>ç„¶è€Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„<code>shift</code>æ“ä½œéƒ½å¯ä»¥è¾¾åˆ°æ•ˆæœçš„ï¼Œè™½ç„¶<code>shift</code>æ“ä½œä¸éœ€è¦é¢å¤–çš„è¿ç®—ä½†æ˜¯ä»ç„¶éœ€è¦æ•°æ®çš„ç§»åŠ¨ï¼Œå¤ªå¤šçš„ç§»åŠ¨ä¼šå¸¦æ¥å»¶è¿Ÿã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œ<code>shift</code>æ˜¯å¢åŠ æ—¶é—´ç‰¹å¾çš„æå–ï¼Œå¤ªå¤šçš„<code>shift</code>æ“ä½œä¹Ÿä¼šå¯¼è‡´ç©ºé—´ç‰¹å¾çš„æå–å—åˆ°å½±å“ã€‚</p><center><p><img src="//onns.xyz/blog/image/20200910-2.png" alt="ä½œè€…æ€è·¯"></p></center><p>æ•…æ–‡ç« ä¸­æ‰€æå‡ºçš„æ˜¯ä¸€ç§æ”¹è¿›çš„<code>shift</code>ç­–ç•¥ï¼šå¹¶ä¸æ˜¯<code>shift</code>æ‰€æœ‰çš„<code>channels</code>ï¼Œè€Œæ˜¯åªé€‰æ‹©æ€§çš„<code>shift</code>å…¶ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œè¯¥ç­–ç•¥èƒ½å¤Ÿæœ‰æ•ˆçš„å‡å°‘æ•°æ®ç§»åŠ¨æ‰€å¸¦æ¥çš„æ—¶é—´å¤æ‚åº¦ã€‚</p><p>å¦å¤–<code>TSM</code>å¹¶ä¸æ˜¯ç›´æ¥è¢«æ’å…¥åˆ°ä»å‰å¾€åçš„å¹²é“ä¸­çš„ï¼Œè€Œæ˜¯ä»¥æ—è·¯çš„å½¢å¼è¿›è¡Œï¼Œå› æ­¤åœ¨è·å¾—äº†æ—¶åºä¿¡æ¯çš„åŒæ—¶ä¸ä¼šå¯¹äºŒç»´å·ç§¯çš„ç©ºé—´ä¿¡æ¯è¿›è¡ŒæŸå®³ã€‚</p><p>åŒæ—¶ä½œè€…å¯¹äºä¸€äº›å®æ—¶çš„åœ¨çº¿æ£€æµ‹æå‡ºäº†ç›¸åº”çš„æ¨¡å‹ç­–ç•¥ï¼Œä¸åŒäºå°†ç¬¬ä¸€å±‚ä¸‹ç§»ç¬¬äºŒå±‚ä¸Šç§»è¿™ç§ï¼š</p><center><p><img src="//onns.xyz/blog/image/20200910-3.png" alt="åœ¨çº¿æ¨¡å‹"></p></center><p>å¯ä»¥æœ‰ç›¸åº”çš„å€Ÿé‰´æ€è·¯ï¼Œå¹¶ä¸”è¿™ç¯‡ä¹Ÿæ˜¯ä¸Šä¸€ç¯‡çš„åŸºå‡†ä¹‹ä¸€ã€‚</p><h2 id="å®éªŒç»“æœ"><a class="header-anchor" href="#å®éªŒç»“æœ">#</a>å®éªŒç»“æœ</h2><center><p><img src="//onns.xyz/blog/image/20200910-7.png" alt="è¿‡ç¨‹"></p></center><center><p><img src="//onns.xyz/blog/image/20200910-8.png" alt="ç»“æœ"></p></center><h2 id="ç›¸å…³é“¾æ¥"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥">#</a>ç›¸å…³é“¾æ¥</h2><ul><li><a href="https://github.com/mit-han-lab/temporal-shift-module" target="_blank" rel="noopener">https://github.com/mit-han-lab/temporal-shift-module</a></li><li><a href="https://blog.csdn.net/justsolow/article/details/105127296" target="_blank" rel="noopener">ã€ŠTSM: Temporal Shift Module for Efficient Video Understandingã€‹å­¦ä¹ å°è®°</a></li><li><a href="https://zhuanlan.zhihu.com/p/66251207" target="_blank" rel="noopener">Temporal Shift Module</a></li><li><a href="https://zhuanlan.zhihu.com/p/64525610" target="_blank" rel="noopener">TSMï¼šTemporal Shift Module for è§†é¢‘ç†è§£</a></li><li><a href="https://blog.csdn.net/Amazingren/article/details/100715768" target="_blank" rel="noopener">ã€è§†é¢‘ç†è§£è®ºæ–‡ã€‘â€”â€”TSMï¼šTemporal Shift Module for Efficient Video Understanding</a></li><li><a href="https://zhuanlan.zhihu.com/p/64525610" target="_blank" rel="noopener">TSMï¼šTemporal Shift Module for è§†é¢‘ç†è§£</a></li><li><a href="https://blog.csdn.net/strawqqhat/article/details/105292687" target="_blank" rel="noopener">Temporal Shift Module for Efficient Video Understanding</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¡Œä¸ºè¯†åˆ« </tag>
            
            <tag> action recognition </tag>
            
            <tag> tsm </tag>
            
            <tag> temporal shift module </tag>
            
            <tag> shift </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gate-Shift Networks for Video Action Recognition</title>
      <link href="/blog/2020/08/30/gate-shift-networks-for-video-action-recognition/"/>
      <url>/blog/2020/08/30/gate-shift-networks-for-video-action-recognition/</url>
      
        <content type="html"><![CDATA[<h2 id="gate-shift-networks-for-video-action-recognition"><a class="header-anchor" href="#gate-shift-networks-for-video-action-recognition">#</a>Gate-Shift Networks for Video Action Recognition</h2><p>ç”¨äºè¡Œä¸ºè¯†åˆ«çš„<code>Gate-Shift</code>ç½‘ç»œ</p><p>åœ¨å®è·µä¸­ï¼Œç”±äºæ¶‰åŠå¤§é‡çš„å‚æ•°å’Œè®¡ç®—ï¼Œåœ¨ç¼ºä¹è¶³å¤Ÿå¤§çš„æ•°æ®é›†è¿›è¡Œå¤§è§„æ¨¡è®­ç»ƒçš„æƒ…å†µä¸‹ï¼Œ<code>C3D</code>å¯èƒ½è¡¨ç°ä¸ä½³ã€‚</p><center><p><img src="//onns.xyz/blog/image/20200910-5.png" alt="GSM"></p></center><p>æ–‡ç« æå‡ºäº†ä¸€ç§<code>Gate-Shift Module(GSM)</code>ï¼Œå°†<code>2D-CNN</code>è½¬æ¢ä¸ºé«˜æ•ˆçš„æ—¶ç©ºç‰¹å¾æŠ½å–å™¨ã€‚</p><p>é€šè¿‡<code>GSM</code>æ’ä»¶ï¼Œä¸€ä¸ª<code>2D-CNN</code>å¯ä»¥é€‚åº”æ€§åœ°å­¦ä¹ æ—¶é—´è·¯ç”±ç‰¹æ€§å¹¶å°†å®ƒä»¬ç»“åˆèµ·æ¥ï¼Œå¹¶ä¸”å‡ ä¹æ²¡æœ‰é¢å¤–çš„é™„åŠ å‚æ•°å’Œè®¡ç®—å¼€é”€ã€‚</p><center><p><img src="//onns.xyz/blog/image/20200910-4.png" alt="æ€è·¯å¯¹æ¯”"></p></center><p>ä¼ ç»Ÿçš„æ–¹æ³•æ¼”å˜ï¼š<code>C3D</code> -&gt; <code>2D spatial + 1D temporal</code> -&gt; <code>CSN</code> -&gt; <code>GST</code>ï¼ˆä¸åˆ†ç¦»ä¿¡é“ç»„ä¸Šçš„äºŒç»´å’Œä¸‰ç»´å·ç§¯å¹¶è¡Œç©ºé—´å’Œæ—¶ç©ºäº¤äº’å»ºæ¨¡ï¼‰ -&gt; <code>TSM</code>ï¼ˆæ—¶åŸŸå·ç§¯å¯ä»¥è¢«é™åˆ¶ä¸ºç¡¬ç¼–ç çš„æ—¶ç§»ï¼Œä½¿ä¸€äº›ä¿¡é“åœ¨æ—¶é—´ä¸Šå‘å‰æˆ–å‘åç§»åŠ¨ï¼‰</p><p>æ‰€æœ‰è¿™äº›ç°æœ‰çš„æ–¹æ³•éƒ½å­¦ä¹ å…·æœ‰ç¡¬è¿çº¿è¿æ¥å’Œè·¨ç½‘ç»œä¼ æ’­æ¨¡å¼çš„ç»“æ„åŒ–å†…æ ¸ã€‚<br>åœ¨ç½‘ç»œä¸­çš„ä»»ä½•ä¸€ç‚¹ä¸Šéƒ½æ²¡æœ‰æ•°æ®ä¾èµ–çš„å†³ç­–æ¥é€‰æ‹©åœ°é€šè¿‡ä¸åŒçš„åˆ†æ”¯æ¥è·¯ç”±ç‰¹æ€§ï¼Œåˆ†ç»„å’Œéšæœºçš„æ¨¡å¼æ˜¯åœ¨è®¾è®¡ä¹‹åˆå°±å›ºå®šçš„ï¼Œå¹¶ä¸”å­¦ä¹ å¦‚ä½•éšæœºæ˜¯å…·æœ‰ç»„åˆå¤æ‚æ€§çš„ã€‚</p><center><p><img src="//onns.xyz/blog/image/20200910-6.png" alt="å®éªŒ"></p></center><blockquote><p>From the experiments we conclude that adding GSM to the branch with the least number of convolution layers performs the best.</p></blockquote><p><code>GSM</code>é€šè¿‡ä¸€ç§é—¨ç§»æ¨¡å—ï¼Œæ¥è®©ç½‘ç»œè‡ªå·±å­¦ä¹ <code>TSM</code>ä¸­çš„<code>shift</code>æ“ä½œï¼Œå¹¶é€šè¿‡å®éªŒè¯æ˜åœ¨å·ç§¯å±‚æœ€å°‘çš„åˆ†æ”¯ä¸Šæ·»åŠ <code>GSM</code>æ¨¡å—è¡¨ç°æœ€å¥½ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¡Œä¸ºè¯†åˆ« </tag>
            
            <tag> action recognition </tag>
            
            <tag> CVPR </tag>
            
            <tag> gsm </tag>
            
            <tag> CVPR 2020 </tag>
            
            <tag> 2020 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å‘¨æŠ¥-20200830</title>
      <link href="/blog/2020/08/30/weekly-report-20200830/"/>
      <url>/blog/2020/08/30/weekly-report-20200830/</url>
      
        <content type="html"><![CDATA[<center><table><thead><tr><th style="text-align:center">2020-08-30</th><th style="text-align:center">å‘¨æŠ¥#03</th><th style="text-align:center">åˆ˜æ½˜</th></tr></thead><tbody></tbody></table></center><a id="more"></a><h2 id="i-task-achieved-last-week"><a class="header-anchor" href="#i-task-achieved-last-week">#</a>I. Task achieved last week</h2><hr><ul><li>é˜…è¯» CVPR2020 è®ºæ–‡ã€ŠDisentangling and Unifying Graph Convolutionsfor Skeleton-Based Action Recognitionã€‹ã€‚</li><li>é˜…è¯»ã€Šä¸€ç§åŸºäº 2D æ—¶ç©ºä¿¡æ¯æå–çš„è¡Œä¸ºè¯†åˆ«ç®—æ³•ã€‹ã€‚</li></ul><h2 id="ii-reports"><a class="header-anchor" href="#ii-reports">#</a>II. Reports</h2><hr><h3 id="disentangling-and-unifying-graph-convolutionsfor-skeleton-based-action-recognition"><a class="header-anchor" href="#disentangling-and-unifying-graph-convolutionsfor-skeleton-based-action-recognition">#</a>Disentangling and Unifying Graph Convolutionsfor Skeleton-Based Action Recognition</h3><p>åŸºäºéª¨æ¶çš„åŠ¨ä½œè¯†åˆ«çš„åˆ†ç¦»ç»Ÿä¸€å›¾å·ç§¯</p><p>åˆ›æ–°ç‚¹ï¼š</p><ol><li>åœ¨å¤šå°ºåº¦ç®—å­ä¸‹æ— åçš„è¿œç¨‹è”åˆå…³ç³»å»ºæ¨¡</li><li>åœ¨ä¿¡æ¯æµä¸­æ— éšœç¢çš„è·¨æ—¶ç©ºæ•è·å¤æ‚çš„æ—¶ç©ºä¾èµ–æ€§</li></ol><p>é¦–å…ˆä»‹ç»äº†ä¸€ä¸‹åŸºäºäººä½“éª¨æ¶çš„è¡Œä¸ºè¯†åˆ«çš„é«˜æ•ˆæ€§å’Œå¹¿é˜”å‰æ™¯ã€‚</p><p>å¯¹äºéª¨æ¶å›¾çš„é²æ£’åŠ¨ä½œè¯†åˆ«ï¼Œä¸€ä¸ªç†æƒ³çš„ç®—æ³•åº”è¯¥ä¸ä»…ä»…å±€é™äºå±€éƒ¨å…³èŠ‚è¿é€šæ€§ï¼Œæå–å¤šå°ºåº¦ç»“æ„ç‰¹å¾å’Œé•¿è·ç¦»ä¾èµ–å…³ç³»ï¼Œå› ä¸ºç»“æ„ä¸Šåˆ†ç¦»çš„å…³èŠ‚ä¹Ÿå…·æœ‰å¾ˆå¼ºçš„ç›¸å…³æ€§ã€‚</p><p>ç°æœ‰çš„æ–¹æ³•æ˜¯é€šè¿‡å›¾å·ç§¯çš„éª¨æ¶é‚»æ¥çŸ©é˜µçš„é«˜é˜¶å¤šé¡¹å¼ï¼Œé‚»æ¥å¤šé¡¹å¼é€šè¿‡ä½¿è¿œé‚»å¯åˆ°è¾¾è€Œå¢åŠ äº†å›¾å·ç§¯çš„æ„Ÿå—é‡ã€‚</p><p>ä½†å› æ­¤å°±ä¼šå‡ºç°<code>biased weighting problem</code>ï¼Œå³<code>ååŠ æƒé—®é¢˜</code>ã€‚æ›´é«˜çš„å¤šé¡¹å¼é˜¶åœ¨ä»è¿œç«¯å…³èŠ‚è·å–ä¿¡æ¯æ–¹é¢ä»…å…·æœ‰ä¸€ç‚¹ç‚¹çš„æ•ˆæœï¼Œå› ä¸ºèšé›†çš„ç‰¹å¾å°†ç”±æ¥è‡ªå±€éƒ¨èº«ä½“éƒ¨ä½çš„å…³èŠ‚æ§åˆ¶ã€‚è¿™æ˜¯é™åˆ¶ç°æœ‰å¤šå°ºåº¦èšåˆå™¨å¯æ‰©å±•æ€§çš„ä¸€ä¸ªå…³é”®ç¼ºç‚¹ã€‚</p><p>é²æ£’ç®—æ³•çš„å¦ä¸€ä¸ªå¯å–ç‰¹å¾æ˜¯èƒ½å¤Ÿåˆ©ç”¨å¤æ‚çš„è·¨æ—¶ç©ºè”åˆå…³ç³»è¿›è¡ŒåŠ¨ä½œè¯†åˆ«ã€‚ç„¶è€Œï¼Œä¸ºäº†è¾¾åˆ°è¿™ä¸€ç›®çš„ï¼Œå¤§å¤šæ•°ç°æœ‰çš„æ–¹æ³•éƒ½æ˜¯ä½¿ç”¨äº¤é”™çš„ç©ºé—´ç‹¬ç«‹ï¼ˆspatial-onlyï¼‰å’Œæ—¶é—´ç‹¬ç«‹ï¼ˆtemporal-onlyï¼‰æ¨¡å‹ï¼Œç±»ä¼¼äºåˆ†è§£çš„ä¸‰ç»´å·ç§¯ã€‚ä¸€ç§å…¸å‹çš„æ–¹æ³•æ˜¯é¦–å…ˆä½¿ç”¨å›¾å·ç§¯æå–æ¯ä¸ªæ—¶é—´ç‰‡çš„ç©ºé—´å…³ç³»ï¼Œç„¶åä½¿ç”¨å¾ªç¯çš„æˆ–ä¸€ç»´å·ç§¯å±‚æ¥æ¨¡æ‹Ÿæ—¶é—´åŠ¨æ€ã€‚è¿™ç§<code>å› å¼åˆ†è§£</code>å…è®¸é«˜æ•ˆçš„è¿œç¨‹å»ºæ¨¡ï¼Œå®ƒæ”¯æŒè·¨æ—¶ç©ºçš„ç›´æ¥ä¿¡æ¯æµï¼Œä½†æ˜¯å®ƒæ— æ³•æ•è·å¤æ‚çš„åŒºåŸŸæ—¶ç©ºè”åˆä¾èµ–å…³ç³»ã€‚ä¾‹å¦‚ï¼Œâ€œç«™èµ·æ¥â€çš„åŠ¨ä½œå¸¸å¸¸åŒæ—¶å‘ç”Ÿä¸Šä¸‹èº«ä½“è·¨è¶Šæ—¶ç©ºçš„è¿åŠ¨ï¼Œä¸ŠåŠèº«çš„è¿åŠ¨ï¼ˆå‰å€¾ï¼‰ä¸ä¸‹åŠèº«çš„è¿åŠ¨ï¼ˆç«™èµ·æ¥ï¼‰æœ‰ç€å¼ºçƒˆçš„å…³è”ã€‚<code>å› å¼åˆ†è§£</code>å»ºæ¨¡å¯èƒ½æ— æ³•æœ‰æ•ˆåœ°æ•æ‰åˆ°åšå‡ºé¢„æµ‹çš„æœ‰åŠ›çº¿ç´¢ã€‚</p><ol><li>æˆ‘ä»¬æå‡ºäº†ä¸€ä¸ªåˆ†ç¦»çš„å¤šå°ºåº¦èšåˆæ–¹æ¡ˆï¼Œè¯¥æ–¹æ¡ˆæ¶ˆé™¤äº†æ¥è‡ªä¸åŒé‚»åŸŸçš„èŠ‚ç‚¹ç‰¹å¾ä¹‹é—´çš„å†—ä½™ä¾èµ–å…³ç³»ï¼Œä»è€Œä½¿å¼ºå¤§çš„å¤šå°ºåº¦èšåˆå™¨èƒ½å¤Ÿæœ‰æ•ˆåœ°æ•è·äººç±»éª¨éª¼ä¸Šçš„å›¾å½¢èŒƒå›´çš„å…³èŠ‚å…³ç³»ã€‚</li><li>æˆ‘ä»¬æå‡ºäº†ä¸€ä¸ª<code>G3D</code>æ“ä½œå•å…ƒã€‚å®ƒä¿ƒè¿›äº†ä¿¡æ¯åœ¨æ—¶ç©ºä¸­çš„ç›´æ¥æµåŠ¨ï¼Œä»è€Œæœ‰æ•ˆåœ°è¿›è¡Œç‰¹å¾å­¦ä¹ ã€‚</li><li>å°†åˆ†ç¦»çš„èšé›†æ–¹æ¡ˆä¸ G3D é›†æˆï¼Œæä¾›äº†ä¸€ä¸ªå¼ºå¤§çš„ç‰¹å¾æŠ½å–å™¨ï¼ˆMS-G3Dï¼‰ï¼Œå…·æœ‰è·¨ç©ºé—´å’Œæ—¶é—´ç»´åº¦çš„å¤šå°ºåº¦æ„Ÿå—é‡ã€‚æ—¶ç©ºç‰¹æ€§çš„ç›´æ¥å¤šå°ºåº¦èšåˆè¿›ä¸€æ­¥æé«˜äº†æ¨¡å‹æ€§èƒ½ã€‚</li></ol><h3 id="ç›¸å…³é“¾æ¥"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥">#</a>ç›¸å…³é“¾æ¥</h3><ul><li><a href="https://www.pianshen.com/article/75261564402/" target="_blank" rel="noopener">åˆ«äººçš„ç¬”è®° 1</a></li><li><a href="https://blog.csdn.net/qq_36852840/article/details/106374430" target="_blank" rel="noopener">åˆ«äººçš„ç¬”è®° 2</a></li><li><a href="https://blog.csdn.net/m0_37852937/article/details/106565861" target="_blank" rel="noopener">åˆ«äººçš„ç¬”è®° 3</a></li><li><a href="https://github.com/kenziyuliu/ms-g3d" target="_blank" rel="noopener">github æºç </a></li></ul><h3 id="spatiotemporal-fusion-in-3d-cnns-a-probabilistic-view"><a class="header-anchor" href="#spatiotemporal-fusion-in-3d-cnns-a-probabilistic-view">#</a>Spatiotemporal Fusion in 3D CNNs A Probabilistic View</h3><p>æ„Ÿè§‰æ˜¯çº¯ç†è®ºæ€§è´¨çš„ç ”ç©¶â€¦ä¸æ˜¯å¾ˆèƒ½å‚è€ƒã€‚</p><p>æ—¶é—´ç©ºé—´çš„èåˆæ–¹æ³•æœ‰å¾ˆå¤šç§ï¼Œä»¥å¾€çš„æ¢ç©¶æ–¹æ³•æ˜¯å‡è®¾ä¸€ç§èåˆæ–¹æ³•ï¼Œç„¶åè¿›è¡Œå‡è®¾éªŒè¯ã€‚è¿™æ ·åšçš„ç¼ºç‚¹æ˜¯ï¼šå› ä¸ºè®­ç»ƒéœ€è¦å¾ˆä¹…çš„æ—¶é—´ï¼Œæ‰€ä»¥éªŒè¯è¦èŠ±è´¹å¾ˆé•¿æ—¶é—´ã€‚</p><p>æ‰€ä»¥æ–‡ç« é€šè¿‡å°†èåˆæ–¹æ³•æ˜ å°„åˆ°æ¦‚ç‡ç©ºé—´ï¼Œé€šè¿‡ç†è®ºæ¨¡æ‹Ÿæ¥æé«˜éªŒè¯æ•ˆç‡ã€‚</p><h3 id="ç›¸å…³é“¾æ¥-2"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥-2">#</a>ç›¸å…³é“¾æ¥</h3><ul><li><a href="https://mp.weixin.qq.com/s/qZOCUuLt98fTpstGpC1ilg" target="_blank" rel="noopener">CVPR 2020 ä¸¨ Variational DropPathï¼šæé«˜ 3D CNN æ—¶ç©ºèåˆåˆ†ææ•ˆç‡çš„ç§˜è¯€</a></li><li><a href="https://github.com/scenarios/Probabilistic3DCNN" target="_blank" rel="noopener">https://github.com/scenarios/Probabilistic3DCNN</a></li></ul><h3 id="ä¸€ç§åŸºäº-2d-æ—¶ç©ºä¿¡æ¯æå–çš„è¡Œä¸ºè¯†åˆ«ç®—æ³•"><a class="header-anchor" href="#ä¸€ç§åŸºäº-2d-æ—¶ç©ºä¿¡æ¯æå–çš„è¡Œä¸ºè¯†åˆ«ç®—æ³•">#</a>ä¸€ç§åŸºäº 2D æ—¶ç©ºä¿¡æ¯æå–çš„è¡Œä¸ºè¯†åˆ«ç®—æ³•</h3><p>åœ¨<code>UCF101</code>æ•°æ®é›†ä¸Šå‡†ç¡®ç‡<code>94.46%</code>ã€‚</p><p>é‡‡ç”¨<code>DenseNet</code>åšä¸ºç½‘ç»œçš„æ¶æ„ã€‚</p><p>ä»ä¸€ä¸ªè§†é¢‘ç‰‡æ®µæå–å‡º <code>16</code> å¸§çš„ <code>64 Ã— 64 Ã— 3</code> çš„æœ‰æ—¶åºé¡ºåºçš„å›¾åƒï¼Œç»„ç»‡æˆ <code>4 Ã— 4</code> çš„å›¾åƒã€‚</p><center><p><img src="//onns.xyz/blog/image/20200829-1.png" alt="å›¾åƒç¿»è½¬è®¾è®¡"></p></center><center><p><img src="//onns.xyz/blog/image/20200829-2.png" alt="å®éªŒç»“æœ"></p></center><p>æ–‡ç« æ²¡æœ‰å…·ä½“è¯´æ˜æ‰§è¡Œé€Ÿåº¦ï¼Œä½†æ˜¯æˆ‘è§‰å¾—åº”è¯¥æ¯”åŸºäºè§†é¢‘çš„å¿«å¾ˆå¤šï¼Œä¹Ÿç›¸å¯¹æ¥è®²æ›´æœ‰å®è·µæ€§ã€‚</p><h2 id="iii-plan-for-this-week"><a class="header-anchor" href="#iii-plan-for-this-week">#</a>III. Plan for this week</h2><hr><ul><li>ç”³è¯·äº† UCF101 çš„æ•°æ®é›†ï¼Œçœ‹çœ‹å…ˆè·‘ä¸€ä¸ªåˆ«äººçš„ demo è¯•ä¸€ä¸‹ã€‚</li><li>ç»§ç»­è¯»è®ºæ–‡ã€‚</li><li>2D æ—¶ç©ºä¿¡æ¯æå–çš„æ–¹æ³•ï¼Œè¯´ä¸å®šå¯ä»¥ä»å›¾åƒçš„æ‘†æ”¾å’Œå¸§é€‰å–ç­‰æ–¹é¢è¿›è¡Œåˆ›æ–°ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lab406 </tag>
            
            <tag> weekly report </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Markdownæ ¼å¼çš„å‘¨æŠ¥æ¨¡æ¿</title>
      <link href="/blog/2020/08/30/weekly-report-template/"/>
      <url>/blog/2020/08/30/weekly-report-template/</url>
      
        <content type="html"><![CDATA[<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">center</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">| date | report#ID | name |</span><br><span class="line">| :--: | :-------: | :--: |</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">center</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="section">## I. Task achieved last week</span></span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line"><span class="section">## II. Reports</span></span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line"><span class="section">## III. Plan for this week</span></span><br><span class="line"></span><br><span class="line">---</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lab406 </tag>
            
            <tag> weekly report </tag>
            
            <tag> template </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€ç§åŸºäº 2D æ—¶ç©ºä¿¡æ¯æå–çš„è¡Œä¸ºè¯†åˆ«ç®—æ³•</title>
      <link href="/blog/2020/08/29/a-behavioral-recognition-algorithm-based-on-2d-spatiotemporal-information-extraction/"/>
      <url>/blog/2020/08/29/a-behavioral-recognition-algorithm-based-on-2d-spatiotemporal-information-extraction/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ç§åŸºäº-2d-æ—¶ç©ºä¿¡æ¯æå–çš„è¡Œä¸ºè¯†åˆ«ç®—æ³•"><a class="header-anchor" href="#ä¸€ç§åŸºäº-2d-æ—¶ç©ºä¿¡æ¯æå–çš„è¡Œä¸ºè¯†åˆ«ç®—æ³•">#</a>ä¸€ç§åŸºäº 2D æ—¶ç©ºä¿¡æ¯æå–çš„è¡Œä¸ºè¯†åˆ«ç®—æ³•</h2><p>åœ¨<code>UCF101</code>æ•°æ®é›†ä¸Šå‡†ç¡®ç‡<code>94.46%</code>ã€‚</p><p>é‡‡ç”¨<code>DenseNet</code>åšä¸ºç½‘ç»œçš„æ¶æ„ã€‚</p><p>ä»ä¸€ä¸ªè§†é¢‘ç‰‡æ®µæå–å‡º <code>16</code> å¸§çš„ <code>64 Ã— 64 Ã— 3</code> çš„æœ‰æ—¶åºé¡ºåºçš„å›¾åƒï¼Œç»„ç»‡æˆ <code>4 Ã— 4</code> çš„å›¾åƒã€‚</p><center><p><img src="//onns.xyz/blog/image/20200829-1.png" alt="å›¾åƒç¿»è½¬è®¾è®¡"></p></center><center><p><img src="//onns.xyz/blog/image/20200829-2.png" alt="å®éªŒç»“æœ"></p></center><p>æ–‡ç« æ²¡æœ‰å…·ä½“è¯´æ˜æ‰§è¡Œé€Ÿåº¦ï¼Œä½†æ˜¯æˆ‘è§‰å¾—åº”è¯¥æ¯”åŸºäºè§†é¢‘çš„å¿«å¾ˆå¤šï¼Œä¹Ÿç›¸å¯¹æ¥è®²æ›´æœ‰å®è·µæ€§ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¡Œä¸ºè¯†åˆ« </tag>
            
            <tag> action recognition </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Disentangling and Unifying Graph Convolutionsfor Skeleton-Based Action Recognition</title>
      <link href="/blog/2020/08/28/disentangling-and-unifying-graph-convolutionsfor-skeleton-based-action-recognition/"/>
      <url>/blog/2020/08/28/disentangling-and-unifying-graph-convolutionsfor-skeleton-based-action-recognition/</url>
      
        <content type="html"><![CDATA[<h2 id="disentangling-and-unifying-graph-convolutionsfor-skeleton-based-action-recognition"><a class="header-anchor" href="#disentangling-and-unifying-graph-convolutionsfor-skeleton-based-action-recognition">#</a>Disentangling and Unifying Graph Convolutionsfor Skeleton-Based Action Recognition</h2><p>åŸºäºéª¨æ¶çš„åŠ¨ä½œè¯†åˆ«çš„åˆ†ç¦»ç»Ÿä¸€å›¾å·ç§¯</p><p>åœ¨å¤šå°ºåº¦ç®—å­ä¸‹æ— åçš„è¿œç¨‹è”åˆå…³ç³»å»ºæ¨¡<br>åœ¨ä¿¡æ¯æµä¸­æ— éšœç¢çš„è·¨æ—¶ç©ºæ•è·å¤æ‚çš„æ—¶ç©ºä¾èµ–æ€§</p><h2 id="introduction"><a class="header-anchor" href="#introduction">#</a>Introduction</h2><p>é¦–å…ˆä»‹ç»äº†ä¸€ä¸‹åŸºäºäººä½“éª¨æ¶çš„è¡Œä¸ºè¯†åˆ«çš„é«˜æ•ˆæ€§å’Œå¹¿é˜”å‰æ™¯ã€‚</p><p>å¯¹äºéª¨æ¶å›¾çš„é²æ£’åŠ¨ä½œè¯†åˆ«ï¼Œä¸€ä¸ªç†æƒ³çš„ç®—æ³•åº”è¯¥ä¸ä»…ä»…å±€é™äºå±€éƒ¨å…³èŠ‚è¿é€šæ€§ï¼Œæå–å¤šå°ºåº¦ç»“æ„ç‰¹å¾å’Œé•¿è·ç¦»ä¾èµ–å…³ç³»ï¼Œå› ä¸ºç»“æ„ä¸Šåˆ†ç¦»çš„å…³èŠ‚ä¹Ÿå…·æœ‰å¾ˆå¼ºçš„ç›¸å…³æ€§ã€‚</p><p>ç°æœ‰çš„æ–¹æ³•æ˜¯é€šè¿‡å›¾å·ç§¯çš„éª¨æ¶é‚»æ¥çŸ©é˜µçš„é«˜é˜¶å¤šé¡¹å¼ï¼Œé‚»æ¥å¤šé¡¹å¼é€šè¿‡ä½¿è¿œé‚»å¯åˆ°è¾¾è€Œå¢åŠ äº†å›¾å·ç§¯çš„æ„Ÿå—é‡ã€‚</p><p>ä½†å› æ­¤å°±ä¼šå‡ºç°<code>biased weighting problem</code>ï¼Œå³<code>ååŠ æƒé—®é¢˜</code>ã€‚æ›´é«˜çš„å¤šé¡¹å¼é˜¶åœ¨ä»è¿œç«¯å…³èŠ‚è·å–ä¿¡æ¯æ–¹é¢ä»…å…·æœ‰ä¸€ç‚¹ç‚¹çš„æ•ˆæœï¼Œå› ä¸ºèšé›†çš„ç‰¹å¾å°†ç”±æ¥è‡ªå±€éƒ¨èº«ä½“éƒ¨ä½çš„å…³èŠ‚æ§åˆ¶ã€‚è¿™æ˜¯é™åˆ¶ç°æœ‰å¤šå°ºåº¦èšåˆå™¨å¯æ‰©å±•æ€§çš„ä¸€ä¸ªå…³é”®ç¼ºç‚¹ã€‚</p><p>é²æ£’ç®—æ³•çš„å¦ä¸€ä¸ªå¯å–ç‰¹å¾æ˜¯èƒ½å¤Ÿåˆ©ç”¨å¤æ‚çš„è·¨æ—¶ç©ºè”åˆå…³ç³»è¿›è¡ŒåŠ¨ä½œè¯†åˆ«ã€‚ç„¶è€Œï¼Œä¸ºäº†è¾¾åˆ°è¿™ä¸€ç›®çš„ï¼Œå¤§å¤šæ•°ç°æœ‰çš„æ–¹æ³•éƒ½æ˜¯ä½¿ç”¨äº¤é”™çš„ç©ºé—´ç‹¬ç«‹ï¼ˆspatial-onlyï¼‰å’Œæ—¶é—´ç‹¬ç«‹ï¼ˆtemporal-onlyï¼‰æ¨¡å‹ï¼Œç±»ä¼¼äºåˆ†è§£çš„ä¸‰ç»´å·ç§¯ã€‚ä¸€ç§å…¸å‹çš„æ–¹æ³•æ˜¯é¦–å…ˆä½¿ç”¨å›¾å·ç§¯æå–æ¯ä¸ªæ—¶é—´ç‰‡çš„ç©ºé—´å…³ç³»ï¼Œç„¶åä½¿ç”¨å¾ªç¯çš„æˆ–ä¸€ç»´å·ç§¯å±‚æ¥æ¨¡æ‹Ÿæ—¶é—´åŠ¨æ€ã€‚è¿™ç§<code>å› å¼åˆ†è§£</code>å…è®¸é«˜æ•ˆçš„è¿œç¨‹å»ºæ¨¡ï¼Œå®ƒæ”¯æŒè·¨æ—¶ç©ºçš„ç›´æ¥ä¿¡æ¯æµï¼Œä½†æ˜¯å®ƒæ— æ³•æ•è·å¤æ‚çš„åŒºåŸŸæ—¶ç©ºè”åˆä¾èµ–å…³ç³»ã€‚ä¾‹å¦‚ï¼Œâ€œç«™èµ·æ¥â€çš„åŠ¨ä½œå¸¸å¸¸åŒæ—¶å‘ç”Ÿä¸Šä¸‹èº«ä½“è·¨è¶Šæ—¶ç©ºçš„è¿åŠ¨ï¼Œä¸ŠåŠèº«çš„è¿åŠ¨ï¼ˆå‰å€¾ï¼‰ä¸ä¸‹åŠèº«çš„è¿åŠ¨ï¼ˆç«™èµ·æ¥ï¼‰æœ‰ç€å¼ºçƒˆçš„å…³è”ã€‚<code>å› å¼åˆ†è§£</code>å»ºæ¨¡å¯èƒ½æ— æ³•æœ‰æ•ˆåœ°æ•æ‰åˆ°åšå‡ºé¢„æµ‹çš„æœ‰åŠ›çº¿ç´¢ã€‚</p><ol><li>æˆ‘ä»¬æå‡ºäº†ä¸€ä¸ªåˆ†ç¦»çš„å¤šå°ºåº¦èšåˆæ–¹æ¡ˆï¼Œè¯¥æ–¹æ¡ˆæ¶ˆé™¤äº†æ¥è‡ªä¸åŒé‚»åŸŸçš„èŠ‚ç‚¹ç‰¹å¾ä¹‹é—´çš„å†—ä½™ä¾èµ–å…³ç³»ï¼Œä»è€Œä½¿å¼ºå¤§çš„å¤šå°ºåº¦èšåˆå™¨èƒ½å¤Ÿæœ‰æ•ˆåœ°æ•è·äººç±»éª¨éª¼ä¸Šçš„å›¾å½¢èŒƒå›´çš„å…³èŠ‚å…³ç³»ã€‚</li><li>æˆ‘ä»¬æå‡ºäº†ä¸€ä¸ª<code>G3D</code>æ“ä½œå•å…ƒã€‚å®ƒä¿ƒè¿›äº†ä¿¡æ¯åœ¨æ—¶ç©ºä¸­çš„ç›´æ¥æµåŠ¨ï¼Œä»è€Œæœ‰æ•ˆåœ°è¿›è¡Œç‰¹å¾å­¦ä¹ ã€‚</li><li>å°†åˆ†ç¦»çš„èšé›†æ–¹æ¡ˆä¸ G3D é›†æˆï¼Œæä¾›äº†ä¸€ä¸ªå¼ºå¤§çš„ç‰¹å¾æŠ½å–å™¨ï¼ˆMS-G3Dï¼‰ï¼Œå…·æœ‰è·¨ç©ºé—´å’Œæ—¶é—´ç»´åº¦çš„å¤šå°ºåº¦æ„Ÿå—é‡ã€‚æ—¶ç©ºç‰¹æ€§çš„ç›´æ¥å¤šå°ºåº¦èšåˆè¿›ä¸€æ­¥æé«˜äº†æ¨¡å‹æ€§èƒ½ã€‚</li></ol><h2 id="ç›¸å…³é“¾æ¥"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥">#</a>ç›¸å…³é“¾æ¥</h2><ul><li><a href="https://www.pianshen.com/article/75261564402/" target="_blank" rel="noopener">åˆ«äººçš„ç¬”è®° 1</a></li><li><a href="https://blog.csdn.net/qq_36852840/article/details/106374430" target="_blank" rel="noopener">åˆ«äººçš„ç¬”è®° 2</a></li><li><a href="https://blog.csdn.net/m0_37852937/article/details/106565861" target="_blank" rel="noopener">åˆ«äººçš„ç¬”è®° 3</a></li><li><a href="https://github.com/kenziyuliu/ms-g3d" target="_blank" rel="noopener">github æºç </a></li></ul>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¡Œä¸ºè¯†åˆ« </tag>
            
            <tag> action recognition </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spatiotemporal Fusion in 3D CNNs A Probabilistic View</title>
      <link href="/blog/2020/08/28/spatiotemporal-fusion-in-3d-cnns-a-probabilistic-view/"/>
      <url>/blog/2020/08/28/spatiotemporal-fusion-in-3d-cnns-a-probabilistic-view/</url>
      
        <content type="html"><![CDATA[<h2 id="spatiotemporal-fusion-in-3d-cnns-a-probabilistic-view"><a class="header-anchor" href="#spatiotemporal-fusion-in-3d-cnns-a-probabilistic-view">#</a>Spatiotemporal Fusion in 3D CNNs A Probabilistic View</h2><p>æ„Ÿè§‰æ˜¯çº¯ç†è®ºæ€§è´¨çš„ç ”ç©¶â€¦ä¸æ˜¯å¾ˆèƒ½å‚è€ƒã€‚</p><p>æ—¶é—´ç©ºé—´çš„èåˆæ–¹æ³•æœ‰å¾ˆå¤šç§ï¼Œä»¥å¾€çš„æ¢ç©¶æ–¹æ³•æ˜¯å‡è®¾ä¸€ç§èåˆæ–¹æ³•ï¼Œç„¶åè¿›è¡Œå‡è®¾éªŒè¯ã€‚è¿™æ ·åšçš„ç¼ºç‚¹æ˜¯ï¼šå› ä¸ºè®­ç»ƒéœ€è¦å¾ˆä¹…çš„æ—¶é—´ï¼Œæ‰€ä»¥éªŒè¯è¦èŠ±è´¹å¾ˆé•¿æ—¶é—´ã€‚</p><p>æ‰€ä»¥æ–‡ç« é€šè¿‡å°†èåˆæ–¹æ³•æ˜ å°„åˆ°æ¦‚ç‡ç©ºé—´ï¼Œé€šè¿‡ç†è®ºæ¨¡æ‹Ÿæ¥æé«˜éªŒè¯æ•ˆç‡ã€‚</p><h2 id="ç›¸å…³é“¾æ¥"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥">#</a>ç›¸å…³é“¾æ¥</h2><ul><li><a href="https://mp.weixin.qq.com/s/qZOCUuLt98fTpstGpC1ilg" target="_blank" rel="noopener">CVPR 2020 ä¸¨ Variational DropPathï¼šæé«˜ 3D CNN æ—¶ç©ºèåˆåˆ†ææ•ˆç‡çš„ç§˜è¯€</a></li><li><a href="https://github.com/scenarios/Probabilistic3DCNN" target="_blank" rel="noopener">https://github.com/scenarios/Probabilistic3DCNN</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è¡Œä¸ºè¯†åˆ« </tag>
            
            <tag> action recognition </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±å…¥åˆ†æJava WebæŠ€æœ¯å†…å¹•ï¼ˆä¸€ï¼‰</title>
      <link href="/blog/2020/08/27/jvm-web-1/"/>
      <url>/blog/2020/08/27/jvm-web-1/</url>
      
        <content type="html"><![CDATA[<p>æ·±å…¥åˆ†æ Java Web æŠ€æœ¯å†…å¹•</p><h2 id="æ·±å…¥åˆ†æ-java-i-o-çš„å·¥ä½œæœºåˆ¶"><a class="header-anchor" href="#æ·±å…¥åˆ†æ-java-i-o-çš„å·¥ä½œæœºåˆ¶">#</a>æ·±å…¥åˆ†æ Java I/O çš„å·¥ä½œæœºåˆ¶</h2><a id="more"></a><p>Java çš„ I/O æ“ä½œç±»åœ¨åŒ… <a href="http://java.io" target="_blank" rel="noopener">java.io</a> ä¸‹ï¼Œå¤§æ¦‚åˆ†ä¸ºå››ç±»ï¼š</p><ul><li>åŸºäºå­—èŠ‚æ“ä½œçš„ I/O æ¥å£ï¼š<code>InputStream</code> å’Œ <code>OutputStream</code>ã€‚</li><li>åŸºäºå­—ç¬¦æ“ä½œçš„ I/O æ¥å£ï¼š<code>Writer</code> å’Œ <code>Reader</code>ã€‚</li><li>åŸºäºç£ç›˜æ“ä½œçš„ I/O æ¥å£ï¼š<code>File</code>ã€‚</li><li>åŸºäºç½‘ç»œæ“ä½œçš„ I/O æ¥å£ï¼š<code>Socket</code>ã€‚</li></ul><h3 id="java-åºåˆ—åŒ–æŠ€æœ¯"><a class="header-anchor" href="#java-åºåˆ—åŒ–æŠ€æœ¯">#</a>Java åºåˆ—åŒ–æŠ€æœ¯</h3>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> java web </tag>
            
            <tag> java web note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºï¼ˆå››ï¼‰</title>
      <link href="/blog/2020/08/25/jvm-note-4/"/>
      <url>/blog/2020/08/25/jvm-note-4/</url>
      
        <content type="html"><![CDATA[<p>æ·±å…¥ç†è§£ Java è™šæ‹Ÿæœºï¼šJVM é«˜çº§ç‰¹æ€§ä¸æœ€ä½³å®è·µï¼ˆç¬¬ 3 ç‰ˆï¼‰</p><h1 id="è‡ªåŠ¨å†…å­˜ç®¡ç†"><a class="header-anchor" href="#è‡ªåŠ¨å†…å­˜ç®¡ç†">#</a>è‡ªåŠ¨å†…å­˜ç®¡ç†</h1><h2 id="åƒåœ¾æ”¶é›†å™¨ä¸å†…å­˜åˆ†é…ç­–ç•¥"><a class="header-anchor" href="#åƒåœ¾æ”¶é›†å™¨ä¸å†…å­˜åˆ†é…ç­–ç•¥">#</a>åƒåœ¾æ”¶é›†å™¨ä¸å†…å­˜åˆ†é…ç­–ç•¥</h2><a id="more"></a><h3 id="å¯è¾¾æ€§åˆ†æç®—æ³•"><a class="header-anchor" href="#å¯è¾¾æ€§åˆ†æç®—æ³•">#</a>å¯è¾¾æ€§åˆ†æç®—æ³•</h3><p>åœ¨ Java æŠ€æœ¯ä½“ç³»é‡Œé¢ï¼Œå›ºå®šå¯ä½œä¸º<code>GC Roots</code>çš„å¯¹è±¡åŒ…æ‹¬ä»¥ä¸‹å‡ ç§ï¼š</p><ul><li>åœ¨è™šæ‹Ÿæœºæ ˆ(æ ˆå¸§ä¸­çš„æœ¬åœ°å˜é‡è¡¨)ä¸­å¼•ç”¨çš„å¯¹è±¡ï¼Œè­¬å¦‚å„ä¸ªçº¿ç¨‹è¢«è°ƒç”¨çš„æ–¹æ³•å †æ ˆä¸­ä½¿ç”¨åˆ°çš„ å‚æ•°ã€å±€éƒ¨å˜é‡ã€ä¸´æ—¶å˜é‡ç­‰ã€‚</li><li>åœ¨æ–¹æ³•åŒºä¸­ç±»é™æ€å±æ€§å¼•ç”¨çš„å¯¹è±¡ï¼Œè­¬å¦‚ Java ç±»çš„å¼•ç”¨ç±»å‹é™æ€å˜é‡ã€‚</li><li>åœ¨æ–¹æ³•åŒºä¸­å¸¸é‡å¼•ç”¨çš„å¯¹è±¡ï¼Œè­¬å¦‚å­—ç¬¦ä¸²å¸¸é‡æ± (String Table)é‡Œçš„å¼•ç”¨ã€‚</li><li>åœ¨æœ¬åœ°æ–¹æ³•æ ˆä¸­ JNI(å³é€šå¸¸æ‰€è¯´çš„ Native æ–¹æ³•)å¼•ç”¨çš„å¯¹è±¡ã€‚</li><li>Java è™šæ‹Ÿæœºå†…éƒ¨çš„å¼•ç”¨ï¼Œå¦‚åŸºæœ¬æ•°æ®ç±»å‹å¯¹åº”çš„ Class å¯¹è±¡ï¼Œä¸€äº›å¸¸é©»çš„å¼‚å¸¸å¯¹è±¡(æ¯”å¦‚ NullPointExcepitonã€OutOfMemoryError)ç­‰ï¼Œè¿˜æœ‰ç³»ç»Ÿç±»åŠ è½½å™¨ã€‚</li><li>æ‰€æœ‰è¢«åŒæ­¥é”(synchronized å…³é”®å­—)æŒæœ‰çš„å¯¹è±¡ã€‚</li><li>åæ˜  Java è™šæ‹Ÿæœºå†…éƒ¨æƒ…å†µçš„ JM XBeanã€JVM TI ä¸­æ³¨å†Œçš„å›è°ƒã€æœ¬åœ°ä»£ç ç¼“å­˜ç­‰ã€‚</li></ul><p>é™¤äº†è¿™äº›å›ºå®šçš„<code>GC Roots</code>é›†åˆä»¥å¤–ï¼Œæ ¹æ®ç”¨æˆ·æ‰€é€‰ç”¨çš„åƒåœ¾æ”¶é›†å™¨ä»¥åŠå½“å‰å›æ”¶çš„å†…å­˜åŒºåŸŸä¸åŒï¼Œè¿˜å¯ä»¥æœ‰å…¶ä»–å¯¹è±¡â€œä¸´æ—¶æ€§â€åœ°åŠ å…¥ï¼Œå…±åŒæ„æˆå®Œæ•´<code>GC Roots</code>é›†åˆã€‚</p><h3 id="å¼•ç”¨"><a class="header-anchor" href="#å¼•ç”¨">#</a>å¼•ç”¨</h3><p>åœ¨<code>JDK 1.2</code>ç‰ˆä¹‹åï¼ŒJava å¯¹å¼•ç”¨çš„æ¦‚å¿µè¿›è¡Œäº†æ‰©å……ï¼Œå°†å¼•ç”¨åˆ†ä¸º<code>å¼ºå¼•ç”¨</code>(Strongly Reference)ã€<code>è½¯å¼•ç”¨</code>(Soft Reference)ã€<code>å¼±å¼•ç”¨</code>(Weak Reference)å’Œ<code>è™šå¼•ç”¨</code>(Phantom Reference)4 ç§ï¼Œè¿™ 4 ç§å¼•ç”¨å¼ºåº¦ä¾æ¬¡é€æ¸å‡å¼±ã€‚</p><ul><li><code>å¼ºå¼•ç”¨</code>æ˜¯æœ€ä¼ ç»Ÿçš„â€œå¼•ç”¨â€çš„å®šä¹‰ï¼Œæ˜¯æŒ‡åœ¨ç¨‹åºä»£ç ä¹‹ä¸­æ™®éå­˜åœ¨çš„å¼•ç”¨èµ‹å€¼ï¼Œå³ç±»ä¼¼â€œObject obj=new Object()â€è¿™ç§å¼•ç”¨å…³ç³»ã€‚æ— è®ºä»»ä½•æƒ…å†µä¸‹ï¼Œåªè¦å¼ºå¼•ç”¨å…³ç³»è¿˜å­˜åœ¨ï¼Œåƒåœ¾æ”¶é›†å™¨å°±æ°¸è¿œä¸ä¼šå›æ”¶æ‰è¢«å¼•ç”¨çš„å¯¹è±¡ã€‚</li><li><code>è½¯å¼•ç”¨</code>æ˜¯ç”¨æ¥æè¿°ä¸€äº›è¿˜æœ‰ç”¨ï¼Œä½†éå¿…é¡»çš„å¯¹è±¡ã€‚åªè¢«è½¯å¼•ç”¨å…³è”ç€çš„å¯¹è±¡ï¼Œåœ¨ç³»ç»Ÿå°†è¦å‘ç”Ÿå†…å­˜æº¢å‡ºå¼‚å¸¸å‰ï¼Œä¼šæŠŠè¿™äº›å¯¹è±¡åˆ—è¿›å›æ”¶èŒƒå›´ä¹‹ä¸­è¿›è¡Œç¬¬äºŒæ¬¡å›æ”¶ï¼Œå¦‚æœè¿™æ¬¡å›æ”¶è¿˜æ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜ï¼Œæ‰ä¼šæŠ›å‡ºå†…å­˜æº¢å‡ºå¼‚å¸¸ã€‚åœ¨ JDK 1.2 ç‰ˆä¹‹åæä¾›äº† SoftReference ç±»æ¥å®ç°è½¯å¼•ç”¨ã€‚</li><li><code>å¼±å¼•ç”¨</code>ä¹Ÿæ˜¯ç”¨æ¥æè¿°é‚£äº›éå¿…é¡»å¯¹è±¡ï¼Œä½†æ˜¯å®ƒçš„å¼ºåº¦æ¯”è½¯å¼•ç”¨æ›´å¼±ä¸€äº›ï¼Œè¢«å¼±å¼•ç”¨å…³è”çš„å¯¹è±¡åªèƒ½ç”Ÿå­˜åˆ°ä¸‹ä¸€æ¬¡åƒåœ¾æ”¶é›†å‘ç”Ÿä¸ºæ­¢ã€‚å½“åƒåœ¾æ”¶é›†å™¨å¼€å§‹å·¥ä½œï¼Œæ— è®ºå½“å‰å†…å­˜æ˜¯å¦è¶³å¤Ÿï¼Œéƒ½ä¼šå›æ”¶æ‰åªè¢«å¼±å¼•ç”¨å…³è”çš„å¯¹è±¡ã€‚åœ¨ JDK 1.2 ç‰ˆä¹‹åæä¾›äº† WeakReference ç±»æ¥å®ç°å¼±å¼•ç”¨ã€‚</li><li><code>è™šå¼•ç”¨</code>ä¹Ÿç§°ä¸ºâ€œå¹½çµå¼•ç”¨â€æˆ–è€…â€œå¹»å½±å¼•ç”¨â€ï¼Œå®ƒæ˜¯æœ€å¼±çš„ä¸€ç§å¼•ç”¨å…³ç³»ã€‚ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æœ‰è™šå¼•ç”¨çš„å­˜åœ¨ï¼Œå®Œå…¨ä¸ä¼šå¯¹å…¶ç”Ÿå­˜æ—¶é—´æ„æˆå½±å“ï¼Œä¹Ÿæ— æ³•é€šè¿‡è™šå¼•ç”¨æ¥å–å¾—ä¸€ä¸ªå¯¹è±¡å®ä¾‹ã€‚ä¸ºä¸€ä¸ªå¯¹è±¡è®¾ç½®è™šå¼•ç”¨å…³è”çš„å”¯ä¸€ç›®çš„åªæ˜¯ä¸ºäº†èƒ½åœ¨è¿™ä¸ªå¯¹è±¡è¢«æ”¶é›†å™¨å›æ”¶æ—¶æ”¶åˆ°ä¸€ä¸ªç³»ç»Ÿé€šçŸ¥ã€‚åœ¨ JDK 1.2 ç‰ˆä¹‹åæä¾› äº† Phant omReference ç±»æ¥å®ç°è™šå¼•ç”¨ã€‚</li></ul><h3 id="finalize-æ–¹æ³•"><a class="header-anchor" href="#finalize-æ–¹æ³•">#</a>finalize()æ–¹æ³•</h3><p>è¦çœŸæ­£å®£å‘Šä¸€ä¸ªå¯¹è±¡æ­»äº¡ï¼Œè‡³å°‘è¦ç»å†ä¸¤æ¬¡æ ‡è®°è¿‡ç¨‹:å¦‚æœå¯¹è±¡åœ¨è¿›è¡Œå¯è¾¾æ€§åˆ†æåå‘ç°æ²¡æœ‰ä¸<code>GC Roots</code>ç›¸è¿æ¥çš„å¼•ç”¨é“¾ï¼Œé‚£å®ƒå°†ä¼šè¢«ç¬¬ä¸€æ¬¡æ ‡è®°ï¼Œéšåè¿›è¡Œä¸€æ¬¡ç­›é€‰ï¼Œç­›é€‰çš„æ¡ä»¶æ˜¯æ­¤å¯¹è±¡æ˜¯å¦æœ‰å¿…è¦æ‰§è¡Œ<code>finalize()</code>æ–¹æ³•ã€‚å‡å¦‚å¯¹è±¡æ²¡æœ‰è¦†ç›–<code>finalize()</code>æ–¹æ³•ï¼Œæˆ–è€…<code>finalize()</code>æ–¹æ³•å·²ç»è¢«è™šæ‹Ÿæœºè°ƒç”¨è¿‡ï¼Œé‚£ä¹ˆè™šæ‹Ÿæœºå°†è¿™ä¸¤ç§æƒ…å†µéƒ½è§†ä¸ºâ€œæ²¡æœ‰å¿…è¦æ‰§è¡Œâ€ã€‚</p><p>å¦‚æœè¿™ä¸ªå¯¹è±¡è¢«åˆ¤å®šä¸ºç¡®æœ‰å¿…è¦æ‰§è¡Œ<code>finalize()</code>æ–¹æ³•ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡å°†ä¼šè¢«æ”¾ç½®åœ¨ä¸€ä¸ªåä¸º<code>F-Queue</code>çš„é˜Ÿåˆ—ä¹‹ä¸­ï¼Œå¹¶åœ¨ç¨åç”±ä¸€æ¡ç”±è™šæ‹Ÿæœºè‡ªåŠ¨å»ºç«‹çš„ã€ä½è°ƒåº¦ä¼˜å…ˆçº§çš„<code>Finalizer</code>çº¿ç¨‹å»æ‰§è¡Œå®ƒä»¬çš„<code>finalize()</code>æ–¹æ³•ã€‚è¿™é‡Œæ‰€è¯´çš„â€œæ‰§è¡Œâ€æ˜¯æŒ‡è™šæ‹Ÿæœºä¼šè§¦å‘è¿™ä¸ªæ–¹æ³•å¼€å§‹è¿è¡Œï¼Œä½†<code>å¹¶ä¸æ‰¿è¯ºä¸€å®šä¼šç­‰å¾…å®ƒè¿è¡Œç»“æŸ</code>ã€‚</p><p>ä»»ä½•ä¸€ä¸ªå¯¹è±¡çš„<code>finalize()</code>æ–¹æ³•éƒ½åªä¼šè¢«ç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨ä¸€æ¬¡ï¼Œå¦‚æœå¯¹è±¡é¢ä¸´ä¸‹ä¸€æ¬¡å›æ”¶ï¼Œå®ƒçš„<code>finalize()</code>æ–¹æ³•ä¸ä¼šè¢«å†æ¬¡æ‰§è¡Œã€‚</p><p><code>finalize()</code>æ–¹æ³•è¿è¡Œä»£ä»·é«˜æ˜‚ï¼Œä¸ç¡®å®šæ€§å¤§ï¼Œæ— æ³•ä¿è¯å„ä¸ªå¯¹è±¡çš„è°ƒç”¨é¡ºåºï¼Œå¦‚ä»Šå·²è¢«å®˜æ–¹æ˜ç¡®å£°æ˜ä¸º<code>ä¸æ¨èä½¿ç”¨</code>çš„è¯­æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> xyz.onns.jvm;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ­¤ä»£ç æ¼”ç¤ºäº†ä¸¤ç‚¹:</span></span><br><span class="line"><span class="comment"> * 1.å¯¹è±¡å¯ä»¥åœ¨è¢«GCæ—¶è‡ªæˆ‘æ‹¯æ•‘ã€‚</span></span><br><span class="line"><span class="comment"> * 2.è¿™ç§è‡ªæ•‘çš„æœºä¼šåªæœ‰ä¸€æ¬¡ï¼Œå› ä¸ºä¸€ä¸ªå¯¹è±¡çš„finalize()æ–¹æ³•æœ€å¤šåªä¼šè¢«ç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨ä¸€æ¬¡ * <span class="doctag">@author</span> zzm</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FinalizeEscapeGC</span> </span>&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> FinalizeEscapeGC SAVE_HOOK = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">SAVE_HOOK = <span class="keyword">new</span> FinalizeEscapeGC();</span><br><span class="line"><span class="comment">// å¯¹è±¡ç¬¬ä¸€æ¬¡æˆåŠŸæ‹¯æ•‘è‡ªå·±</span></span><br><span class="line">SAVE_HOOK = <span class="keyword">null</span>;</span><br><span class="line">System.gc();</span><br><span class="line"><span class="comment">// å› ä¸ºFinalizeræ–¹æ³•ä¼˜å…ˆçº§å¾ˆä½ï¼Œæš‚åœ0.5ç§’ï¼Œä»¥ç­‰å¾…å®ƒ</span></span><br><span class="line">Thread.sleep(<span class="number">500</span>);</span><br><span class="line"><span class="keyword">if</span> (SAVE_HOOK != <span class="keyword">null</span>) &#123;</span><br><span class="line">SAVE_HOOK.isAlive();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">System.out.println(<span class="string">"no, i am dead :("</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸‹é¢è¿™æ®µä»£ç ä¸ä¸Šé¢çš„å®Œå…¨ç›¸åŒï¼Œä½†æ˜¯è¿™æ¬¡è‡ªæ•‘å´å¤±è´¥äº†</span></span><br><span class="line"></span><br><span class="line">SAVE_HOOK = <span class="keyword">null</span>;</span><br><span class="line">System.gc();</span><br><span class="line"><span class="comment">// å› ä¸ºFinalizeræ–¹æ³•ä¼˜å…ˆçº§å¾ˆä½ï¼Œæš‚åœ0.5ç§’ï¼Œä»¥ç­‰å¾…å®ƒ</span></span><br><span class="line">Thread.sleep(<span class="number">500</span>);</span><br><span class="line"><span class="keyword">if</span> (SAVE_HOOK != <span class="keyword">null</span>) &#123;</span><br><span class="line">SAVE_HOOK.isAlive();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">System.out.println(<span class="string">"no, i am dead :("</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">isAlive</span><span class="params">()</span> </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"yes, i am still alive :)"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">finalize</span><span class="params">()</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line"><span class="keyword">super</span>.finalize();</span><br><span class="line">System.out.println(<span class="string">"finalize method executed!"</span>);</span><br><span class="line">FinalizeEscapeGC.SAVE_HOOK = <span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ /Library/Java/JavaVirtualMachines/jdk-13.0.2.jdk/Contents/Home/bin/java -javaagent:/Applications/IntelliJ IDEA.app/Contents/lib/idea_rt.jar=63179:/Applications/IntelliJ IDEA.app/Contents/bin -Dfile.encoding=UTF-8 -classpath /Users/onns/Documents/code/java/jvm/out/production/jvm xyz.onns.jvm.FinalizeEscapeGC</span><br><span class="line">finalize method executed!</span><br><span class="line">yes, i am still alive :)</span><br><span class="line">no, i am dead :(</span><br><span class="line"></span><br><span class="line">Process finished with <span class="built_in">exit</span> code 0</span><br></pre></td></tr></table></figure><h3 id="å›æ”¶æ–¹æ³•åŒº"><a class="header-anchor" href="#å›æ”¶æ–¹æ³•åŒº">#</a>å›æ”¶æ–¹æ³•åŒº</h3><p>æ–¹æ³•åŒºçš„åƒåœ¾æ”¶é›†ä¸»è¦å›æ”¶ä¸¤éƒ¨åˆ†å†…å®¹:<code>åºŸå¼ƒçš„å¸¸é‡</code>å’Œ<code>ä¸å†ä½¿ç”¨çš„ç±»å‹</code>ã€‚</p><p>åˆ¤å®šä¸€ä¸ªç±»å‹æ˜¯å¦å±äºâ€œä¸å†è¢«ä½¿ç”¨çš„ç±»â€ï¼š</p><ul><li>è¯¥ç±»æ‰€æœ‰çš„å®ä¾‹éƒ½å·²ç»è¢«å›æ”¶ï¼Œä¹Ÿå°±æ˜¯ Java å †ä¸­ä¸å­˜åœ¨è¯¥ç±»åŠå…¶ä»»ä½•æ´¾ç”Ÿå­ç±»çš„å®ä¾‹ã€‚</li><li>åŠ è½½è¯¥ç±»çš„ç±»åŠ è½½å™¨å·²ç»è¢«å›æ”¶ï¼Œè¿™ä¸ªæ¡ä»¶é™¤éæ˜¯ç»è¿‡ç²¾å¿ƒè®¾è®¡çš„å¯æ›¿æ¢ç±»åŠ è½½å™¨çš„åœºæ™¯ï¼Œå¦‚ OSGiã€JSP çš„é‡åŠ è½½ç­‰ï¼Œå¦åˆ™é€šå¸¸æ˜¯å¾ˆéš¾è¾¾æˆçš„ã€‚</li><li>è¯¥ç±»å¯¹åº”çš„<code>java.lang.Class</code>å¯¹è±¡æ²¡æœ‰åœ¨ä»»ä½•åœ°æ–¹è¢«å¼•ç”¨ï¼Œæ— æ³•åœ¨ä»»ä½•åœ°æ–¹é€šè¿‡åå°„è®¿é—®è¯¥ç±»çš„æ–¹æ³•ã€‚</li></ul><p>åœ¨å¤§é‡ä½¿ç”¨åå°„ã€åŠ¨æ€ä»£ç†ã€CGLib ç­‰å­—èŠ‚ç æ¡†æ¶ï¼ŒåŠ¨æ€ç”Ÿæˆ JSP ä»¥åŠ OSGi è¿™ç±»é¢‘ç¹è‡ªå®šä¹‰ç±»åŠ è½½å™¨çš„åœºæ™¯ä¸­ï¼Œé€šå¸¸éƒ½éœ€è¦ Java è™šæ‹Ÿæœºå…·å¤‡ç±»å‹å¸è½½çš„èƒ½åŠ›ï¼Œä»¥ä¿è¯ä¸ä¼šå¯¹æ–¹æ³•åŒºé€ æˆè¿‡å¤§çš„å†…å­˜å‹ åŠ›ã€‚</p><h3 id="åˆ†ä»£æ”¶é›†ç†è®º"><a class="header-anchor" href="#åˆ†ä»£æ”¶é›†ç†è®º">#</a>åˆ†ä»£æ”¶é›†ç†è®º</h3><ol><li><code>å¼±åˆ†ä»£å‡è¯´</code>(Weak Generational Hypothesis):ç»å¤§å¤šæ•°å¯¹è±¡éƒ½æ˜¯æœç”Ÿå¤•ç­çš„ã€‚</li><li><code>å¼ºåˆ†ä»£å‡è¯´</code>(Strong Generational Hypothesis):ç†¬è¿‡è¶Šå¤šæ¬¡åƒåœ¾æ”¶é›†è¿‡ç¨‹çš„å¯¹è±¡å°±è¶Šéš¾ä»¥æ¶ˆäº¡ã€‚</li><li><code>è·¨ä»£å¼•ç”¨å‡è¯´</code>(Intergenerational Reference Hypothesis):è·¨ä»£å¼•ç”¨ç›¸å¯¹äºåŒä»£å¼•ç”¨æ¥è¯´ä»…å æå°‘æ•°ã€‚</li></ol><p>åœ¨æ–°ç”Ÿä»£ä¸Šå»ºç«‹ä¸€ä¸ªå…¨å±€çš„æ•°æ®ç»“æ„(è¯¥ç»“æ„è¢«ç§°ä¸ºâ€œ<code>è®°å¿†é›†</code>â€ï¼Œ<code>Remembered Set</code>)ï¼Œè¿™ä¸ªç»“æ„æŠŠè€å¹´ä»£åˆ’åˆ†æˆè‹¥å¹²å°å—ï¼Œæ ‡è¯†å‡ºè€å¹´ä»£çš„å“ªä¸€å—å†…å­˜ä¼šå­˜åœ¨è·¨ä»£å¼•ç”¨ã€‚æ­¤åå½“å‘ç”Ÿ<code>Minor GC</code>æ—¶ï¼Œåªæœ‰åŒ…å«äº†è·¨ä»£å¼•ç”¨çš„å°å—å†…å­˜é‡Œçš„å¯¹è±¡æ‰ä¼šè¢«åŠ å…¥åˆ°<code>GC Roots</code>è¿›è¡Œæ‰«æã€‚</p><p><code>éƒ¨åˆ†æ”¶é›†</code>(<code>Partial GC</code>):æŒ‡ç›®æ ‡ä¸æ˜¯å®Œæ•´æ”¶é›†æ•´ä¸ª Java å †çš„åƒåœ¾æ”¶é›†ï¼Œå…¶ä¸­åˆåˆ†ä¸º:</p><ul><li><code>æ–°ç”Ÿä»£æ”¶é›†</code>(<code>Minor GC</code>/<code>Young GC</code>):æŒ‡ç›®æ ‡åªæ˜¯æ–°ç”Ÿä»£çš„åƒåœ¾æ”¶é›†ã€‚</li><li><code>è€å¹´ä»£æ”¶é›†</code>(<code>Major GC</code>/<code>Old GC</code>):æŒ‡ç›®æ ‡åªæ˜¯è€å¹´ä»£çš„åƒåœ¾æ”¶é›†ã€‚ç›®å‰åªæœ‰ CMS æ”¶é›†å™¨ä¼šæœ‰å•ç‹¬æ”¶é›†è€å¹´ä»£çš„è¡Œä¸ºã€‚</li><li><code>æ··åˆæ”¶é›†</code>(<code>Mixed GC</code>):æŒ‡ç›®æ ‡æ˜¯æ”¶é›†æ•´ä¸ªæ–°ç”Ÿä»£ä»¥åŠéƒ¨åˆ†è€å¹´ä»£çš„åƒåœ¾æ”¶é›†ã€‚ç›®å‰åªæœ‰ G1 æ”¶é›†å™¨ä¼šæœ‰è¿™ç§è¡Œä¸ºã€‚</li></ul><p><code>æ•´å †æ”¶é›†</code>(<code>Full GC</code>):æ”¶é›†æ•´ä¸ª Java å †å’Œæ–¹æ³•åŒºçš„åƒåœ¾æ”¶é›†ã€‚</p><h3 id="â€œæ ‡è®°-æ¸…é™¤â€-mark-sweep-ç®—æ³•"><a class="header-anchor" href="#â€œæ ‡è®°-æ¸…é™¤â€-mark-sweep-ç®—æ³•">#</a>â€œæ ‡è®°-æ¸…é™¤â€(Mark-Sweep)ç®—æ³•</h3><p>â€œ<code>æ ‡è®°-æ¸…é™¤</code>â€(<code>Mark-Sweep</code>)ç®—æ³•ï¼šé¦–å…ˆæ ‡è®°å‡ºæ‰€æœ‰éœ€è¦å›æ”¶çš„å¯¹è±¡ï¼Œåœ¨æ ‡è®°å®Œæˆåï¼Œç»Ÿä¸€å›æ”¶æ‰æ‰€æœ‰è¢«æ ‡è®°çš„å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥åè¿‡æ¥ï¼Œæ ‡è®°å­˜æ´»çš„å¯¹è±¡ï¼Œç»Ÿä¸€å›æ”¶æ‰€æœ‰æœªè¢«æ ‡è®°çš„å¯¹è±¡ã€‚</p><p>ä¸»è¦ç¼ºç‚¹æœ‰ä¸¤ä¸ª:</p><ul><li>ç¬¬ä¸€ä¸ªæ˜¯æ‰§è¡Œæ•ˆç‡ä¸ç¨³å®šï¼Œå¦‚æœ Java å †ä¸­åŒ…å«å¤§é‡å¯¹è±¡ï¼Œè€Œä¸”å…¶ä¸­å¤§éƒ¨åˆ†æ˜¯éœ€è¦è¢«å›æ”¶çš„ï¼Œè¿™æ—¶å¿…é¡»è¿›è¡Œå¤§é‡æ ‡è®°å’Œæ¸…é™¤çš„åŠ¨ä½œï¼Œå¯¼è‡´æ ‡è®°å’Œæ¸…é™¤ä¸¤ä¸ªè¿‡ç¨‹çš„æ‰§è¡Œæ•ˆç‡éƒ½éšå¯¹è±¡æ•°é‡å¢é•¿è€Œé™ä½;</li><li>ç¬¬äºŒä¸ªæ˜¯å†…å­˜ç©ºé—´çš„ç¢ç‰‡åŒ–é—®é¢˜ï¼Œæ ‡è®°ã€æ¸…é™¤ä¹‹åä¼šäº§ç”Ÿå¤§é‡ä¸è¿ç»­çš„å†…å­˜ç¢ç‰‡ï¼Œç©ºé—´ç¢ç‰‡å¤ªå¤šå¯èƒ½ä¼šå¯¼è‡´å½“ä»¥ååœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­éœ€è¦åˆ†é…è¾ƒå¤§å¯¹è±¡æ—¶æ— æ³•æ‰¾åˆ°è¶³å¤Ÿçš„è¿ç»­å†…å­˜è€Œä¸å¾—ä¸æå‰è§¦å‘å¦ä¸€æ¬¡åƒåœ¾æ”¶é›†åŠ¨ä½œã€‚</li></ul><h3 id="æ ‡è®°-å¤åˆ¶ç®—æ³•"><a class="header-anchor" href="#æ ‡è®°-å¤åˆ¶ç®—æ³•">#</a>æ ‡è®°-å¤åˆ¶ç®—æ³•</h3><p>å°†å¯ç”¨å†…å­˜æŒ‰å®¹é‡åˆ’åˆ†ä¸ºå¤§å°ç›¸ç­‰çš„ä¸¤å—ï¼Œæ¯æ¬¡åªä½¿ç”¨å…¶ä¸­çš„ä¸€å—ã€‚å½“è¿™ä¸€å—çš„å†…å­˜ç”¨å®Œäº†ï¼Œå°±å°†è¿˜å­˜æ´»ç€çš„å¯¹è±¡å¤åˆ¶åˆ°å¦å¤–ä¸€å—ä¸Šé¢ï¼Œç„¶åå†æŠŠå·²ä½¿ç”¨è¿‡çš„å†…å­˜ç©ºé—´ä¸€æ¬¡æ¸…ç†æ‰ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> jvm </tag>
            
            <tag> jvm note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaé™æ€åŠ è½½é¡ºåº</title>
      <link href="/blog/2020/08/24/static-test/"/>
      <url>/blog/2020/08/24/static-test/</url>
      
        <content type="html"><![CDATA[<style type="text/css">.question-right:hover { color:#1CDDB1; } .question-wrong:hover { color:#FE4C40; } </style><p>ä»¥ä¸‹ä»£ç çš„è¾“å‡ºç»“æœæ˜¯ï¼Ÿ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StaticTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> StaticTest t1 = <span class="keyword">new</span> StaticTest();</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> StaticTest t2 = <span class="keyword">new</span> StaticTest();</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> &#123;</span><br><span class="line">System.out.println(<span class="string">"é™æ€å—"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">System.out.println(<span class="string">"æ„é€ å—"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">StaticTest t = <span class="keyword">new</span> StaticTest();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><a id="more"></a><p><span class="question-wrong">A. é™æ€å— æ„é€ å— æ„é€ å— æ„é€ å—</span><br><span class="question-wrong">B. æ„é€ å— é™æ€å— æ„é€ å— æ„é€ å—</span><br><span class="question-right">C. æ„é€ å— æ„é€ å— é™æ€å— æ„é€ å—</span><br><span class="question-wrong">D. æ„é€ å— æ„é€ å— æ„é€ å— é™æ€å—</span></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ /Library/Java/JavaVirtualMachines/jdk-13.0.2.jdk/Contents/Home/bin/java -javaagent:/Applications/IntelliJ IDEA.app/Contents/lib/idea_rt.jar=51677:/Applications/IntelliJ IDEA.app/Contents/bin -Dfile.encoding=UTF-8 -classpath /Users/onns/Documents/code/java/jvm/out/production/jvm xyz.onns.nowcoder.StaticTest</span><br><span class="line">æ„é€ å—</span><br><span class="line">æ„é€ å—</span><br><span class="line">é™æ€å—</span><br><span class="line">æ„é€ å—</span><br><span class="line"></span><br><span class="line">Process finished with <span class="built_in">exit</span> code 0</span><br></pre></td></tr></table></figure><ol><li>å¼€å§‹æ—¶ JVM åŠ è½½ StaticTest.classï¼Œå¯¹æ‰€æœ‰çš„é™æ€æˆå‘˜è¿›è¡Œå£°æ˜ï¼Œt1ã€t2 è¢«åˆå§‹åŒ–ä¸ºé»˜è®¤å€¼<code>null</code>ã€‚</li><li>åˆå› ä¸º t1ã€t2 éœ€è¦è¢«æ˜¾å¼åˆå§‹åŒ–ï¼Œæ‰€ä»¥å¯¹ t1 è¿›è¡Œæ˜¾å¼åˆå§‹åŒ–ï¼Œåˆå§‹åŒ–ä»£ç å— â†’ æ„é€ å‡½æ•°ï¼ˆæ²¡æœ‰å°±æ˜¯è°ƒç”¨é»˜è®¤çš„æ„é€ å‡½æ•°ï¼‰ã€‚</li><li>å› ä¸ºåœ¨å¼€å§‹æ—¶å·²ç»å¯¹ static éƒ¨åˆ†è¿›è¡Œäº†åˆå§‹åŒ–ï¼Œè™½ç„¶åªå¯¹ static å˜é‡è¿›è¡Œäº†åˆå§‹åŒ–ï¼Œä½†åœ¨åˆå§‹åŒ– t1 æ—¶ä¹Ÿä¸ä¼šå†æ‰§è¡Œ static å—äº†ï¼Œå› ä¸º JVM è®¤ä¸ºè¿™æ˜¯ç¬¬äºŒæ¬¡åŠ è½½ç±» B äº†ï¼Œ</li><li>æ‰€ä»¥ static ä¼šåœ¨ t1 åˆå§‹åŒ–æ—¶è¢«å¿½ç•¥æ‰ï¼Œæ‰€ä»¥ç›´æ¥åˆå§‹åŒ–é static éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯æ„é€ å—éƒ¨åˆ†ï¼ˆè¾“å‡ºâ€™æ„é€ å—â€™ï¼‰æ¥ç€æ„é€ å‡½æ•°ï¼ˆæ— è¾“å‡ºï¼‰ã€‚</li><li>æ¥ç€å¯¹ t2 è¿›è¡Œåˆå§‹åŒ–è¿‡ç¨‹åŒ t1 ç›¸åŒï¼ˆè¾“å‡ºâ€™æ„é€ å—â€™ï¼‰ã€‚</li><li>æ­¤æ—¶å°±å¯¹æ‰€æœ‰çš„ static å˜é‡éƒ½å®Œæˆäº†åˆå§‹åŒ–ï¼Œæ¥ç€å°±æ‰§è¡Œ static å—éƒ¨åˆ†ï¼ˆè¾“å‡ºâ€™é™æ€å—â€™ï¼‰ã€‚</li><li>æ¥ç€æ‰§è¡Œï¼Œmain æ–¹æ³•ï¼ŒåŒæ ·ä¹Ÿï¼Œnew äº†å¯¹è±¡ï¼Œè°ƒç”¨æ„é€ å‡½æ•°è¾“å‡ºï¼ˆâ€˜æ„é€ å—â€™ï¼‰ã€‚</li></ol><h2 id="è¿›é˜¶"><a class="header-anchor" href="#è¿›é˜¶">#</a>è¿›é˜¶</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//çˆ¶ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">B</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> B t1 = <span class="keyword">new</span> B();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> B t2 = <span class="keyword">new</span> B();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">B</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">super</span>();</span><br><span class="line">        System.out.println(<span class="string">"Bç±»æ„é€ å—"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">"Bç±»é™æ€å—"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å­ç±»</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">A</span> <span class="keyword">extends</span> <span class="title">B</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> A t1 = <span class="keyword">new</span> A();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> A t2 = <span class="keyword">new</span> A();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">A</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">super</span>();</span><br><span class="line">        System.out.println(<span class="string">"Aç±»æ„é€ å—"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">"Aç±»é™æ€å—"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        A t = <span class="keyword">new</span> A();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒé“¾æ¥"><a class="header-anchor" href="#å‚è€ƒé“¾æ¥">#</a>å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://www.nowcoder.com/questionTerminal/ab6eb06face84c4e81ab5bc6f0f7f258" target="_blank" rel="noopener">ä»¥ä¸‹ä»£ç çš„è¾“å‡ºç»“æœæ˜¯ï¼Ÿ</a></li><li><a href="https://www.cnblogs.com/leiqiannian/p/7922824.html" target="_blank" rel="noopener">JAVA ä¸­é™æ€å—ã€é™æ€å˜é‡åŠ è½½é¡ºåºè¯¦è§£</a></li><li><a href="https://blog.csdn.net/niufeihu/article/details/89216243" target="_blank" rel="noopener">Java é™æ€ä»£ç å—å’Œé™æ€å±æ€§åŠ è½½é¡ºåº</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> static </tag>
            
            <tag> nowcoder </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºï¼ˆä¸‰ï¼‰</title>
      <link href="/blog/2020/08/24/jvm-note-3/"/>
      <url>/blog/2020/08/24/jvm-note-3/</url>
      
        <content type="html"><![CDATA[<p>æ·±å…¥ç†è§£ Java è™šæ‹Ÿæœºï¼šJVM é«˜çº§ç‰¹æ€§ä¸æœ€ä½³å®è·µï¼ˆç¬¬ 3 ç‰ˆï¼‰</p><h1 id="è‡ªåŠ¨å†…å­˜ç®¡ç†"><a class="header-anchor" href="#è‡ªåŠ¨å†…å­˜ç®¡ç†">#</a>è‡ªåŠ¨å†…å­˜ç®¡ç†</h1><h2 id="java-å†…å­˜åŒºåŸŸä¸å†…å­˜æº¢å‡ºå¼‚å¸¸"><a class="header-anchor" href="#java-å†…å­˜åŒºåŸŸä¸å†…å­˜æº¢å‡ºå¼‚å¸¸">#</a>Java å†…å­˜åŒºåŸŸä¸å†…å­˜æº¢å‡ºå¼‚å¸¸</h2><center><p><img src="//onns.xyz/blog/image/20200822-1.jpg" alt="Javaè™šæ‹Ÿæœºè¿è¡Œæ—¶æ•°æ®åŒº"></p><p>Java è™šæ‹Ÿæœºè¿è¡Œæ—¶æ•°æ®åŒº</p></center><a id="more"></a><h3 id="è™šæ‹Ÿæœºæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆæº¢å‡º"><a class="header-anchor" href="#è™šæ‹Ÿæœºæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆæº¢å‡º">#</a>è™šæ‹Ÿæœºæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆæº¢å‡º</h3><p>ç”±äº HotSpot è™šæ‹Ÿæœºä¸­å¹¶ä¸åŒºåˆ†è™šæ‹Ÿæœºæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆï¼Œå› æ­¤å¯¹äº HotSpot æ¥è¯´ï¼Œ<code>-Xoss</code>å‚æ•°ï¼ˆè®¾ç½®æœ¬åœ°æ–¹æ³•æ ˆå¤§å°ï¼‰è™½ç„¶å­˜åœ¨ï¼Œä½†å®é™…ä¸Šæ˜¯æ²¡æœ‰ä»»ä½•æ•ˆæœçš„ï¼Œæ ˆå®¹é‡åªèƒ½ç”±<code>-Xss</code>å‚æ•°æ¥è®¾å®šã€‚</p><p>å…³äºè™šæ‹Ÿæœºæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆï¼Œåœ¨ã€ŠJava è™šæ‹Ÿæœºè§„èŒƒã€‹ä¸­æè¿°äº†ä¸¤ç§å¼‚å¸¸ï¼š</p><ol><li>å¦‚æœçº¿ç¨‹è¯·æ±‚çš„æ ˆæ·±åº¦å¤§äºè™šæ‹Ÿæœºæ‰€å…è®¸çš„æœ€å¤§æ·±åº¦ï¼Œå°†æŠ›å‡º<code>StackOverflowError</code>å¼‚å¸¸ã€‚</li><li>å¦‚æœè™šæ‹Ÿæœºçš„æ ˆå†…å­˜å…è®¸åŠ¨æ€æ‰©å±•ï¼Œå½“æ‰©å±•æ ˆå®¹é‡æ— æ³•ç”³è¯·åˆ°è¶³å¤Ÿçš„å†…å­˜æ—¶ï¼Œå°†æŠ›å‡º<code>OutOfMemoryError</code>å¼‚å¸¸ã€‚</li></ol><p>Java è™šæ‹Ÿæœºè§„èŒƒã€‹æ˜ç¡®å…è®¸ Java è™šæ‹Ÿæœºå®ç°è‡ªè¡Œé€‰æ‹©æ˜¯å¦æ”¯æŒæ ˆçš„åŠ¨æ€æ‰©å±•ï¼Œè€Œ HotSpot è™šæ‹Ÿæœºçš„é€‰æ‹©æ˜¯ä¸æ”¯æŒæ‰©å±•ï¼Œæ‰€ä»¥é™¤éåœ¨åˆ›å»ºçº¿ç¨‹ç”³è¯·å†…å­˜æ—¶å°±å› æ— æ³•è·å¾—è¶³å¤Ÿå†…å­˜è€Œå‡ºç°<code>OutOfMemoryError</code>å¼‚å¸¸ï¼Œå¦åˆ™åœ¨çº¿ç¨‹è¿è¡Œæ—¶æ˜¯ä¸ä¼šå› ä¸ºæ‰©å±•è€Œå¯¼è‡´å†…å­˜æº¢å‡ºçš„ï¼Œåªä¼šå› ä¸ºæ ˆå®¹é‡æ— æ³•å®¹çº³æ–°çš„æ ˆå¸§è€Œå¯¼è‡´<code>StackOverflowError</code>å¼‚å¸¸ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> xyz.onns.jvm;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * VM Argsï¼š -Xss128k</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zzm</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaVMStackSOF</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> stackLength = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">JavaVMStackSOF oom = <span class="keyword">new</span> JavaVMStackSOF();</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">oom.stackLeak();</span><br><span class="line">&#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">System.out.println(<span class="string">"stack length:"</span> + oom.stackLength);</span><br><span class="line"><span class="keyword">throw</span> e;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">stackLeak</span><span class="params">()</span> </span>&#123;</span><br><span class="line">stackLength++;</span><br><span class="line">stackLeak();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"D:\Program Files\java\jdk-13.0.1\bin\java.exe"</span> -Xss128k <span class="string">"-javaagent:D:\Program Files\JetBrains\IntelliJ IDEA 2020.2\lib\idea_rt.jar=57372:D:\Program Files\JetBrains\IntelliJ IDEA 2020.2\bin"</span> -Dfile.encoding=UTF-8 -classpath D:\weiyun\Code\java\jvm\out\production\jvm xyz.onns.jvm.JavaVMStackSOF</span><br><span class="line">Error: Could not create the Java Virtual Machine.</span><br><span class="line">Error: A fatal exception has occurred. Program will <span class="built_in">exit</span>.</span><br><span class="line"></span><br><span class="line">The Java thread stack size specified is too small. Specify at least 180k</span><br><span class="line"></span><br><span class="line">Process finished with <span class="built_in">exit</span> code 1</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹å‚æ•°ä¸º<code>-Xss180k</code>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"D:\Program Files\java\jdk-13.0.1\bin\java.exe"</span> -Xss180k <span class="string">"-javaagent:D:\Program Files\JetBrains\IntelliJ IDEA 2020.2\lib\idea_rt.jar=57575:D:\Program Files\JetBrains\IntelliJ IDEA 2020.2\bin"</span> -Dfile.encoding=UTF-8 -classpath D:\weiyun\Code\java\jvm\out\production\jvm xyz.onns.jvm.JavaVMStackSOF</span><br><span class="line">stack length:1854</span><br><span class="line">Exception <span class="keyword">in</span> thread <span class="string">"main"</span> java.lang.StackOverflowError</span><br><span class="line">at xyz.onns.jvm.JavaVMStackSOF.stackLeak(JavaVMStackSOF.java:23)</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">Process finished with <span class="built_in">exit</span> code 1</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> xyz.onns.jvm;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zzm</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaVMStackSOF2</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> stackLength = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">long</span> unused1, unused2, unused3, unused4, unused5,</span><br><span class="line">unused6, unused7, unused8, unused9, unused10,</span><br><span class="line">unused11, unused12, unused13, unused14, unused15,</span><br><span class="line">unused16, unused17, unused18, unused19, unused20,</span><br><span class="line">unused21, unused22, unused23, unused24, unused25,</span><br><span class="line">unused26, unused27, unused28, unused29, unused30,</span><br><span class="line">unused31, unused32, unused33, unused34, unused35,</span><br><span class="line">unused36, unused37, unused38, unused39, unused40,</span><br><span class="line">unused41, unused42, unused43, unused44, unused45,</span><br><span class="line">unused46, unused47, unused48, unused49, unused50,</span><br><span class="line">unused51, unused52, unused53, unused54, unused55,</span><br><span class="line">unused56, unused57, unused58, unused59, unused60,</span><br><span class="line">unused61, unused62, unused63, unused64, unused65,</span><br><span class="line">unused66, unused67, unused68, unused69, unused70,</span><br><span class="line">unused71, unused72, unused73, unused74, unused75,</span><br><span class="line">unused76, unused77, unused78, unused79, unused80,</span><br><span class="line">unused81, unused82, unused83, unused84, unused85,</span><br><span class="line">unused86, unused87, unused88, unused89, unused90,</span><br><span class="line">unused91, unused92, unused93, unused94, unused95,</span><br><span class="line">unused96, unused97, unused98, unused99, unused100;</span><br><span class="line">stackLength++;</span><br><span class="line">test();</span><br><span class="line">unused1 = unused2 = unused3 = unused4 = unused5 = unused6 = unused7 = unused8 = unused9 = unused10 = unused11 = unused12 = unused13 = unused14 = unused15 = unused16 = unused17 = unused18 = unused19 = unused20 = unused21 = unused22 = unused23 = unused24 = unused25 = unused26 = unused27 = unused28 = unused29 = unused30 = unused31 = unused32 = unused33 = unused34 = unused35 = unused36 = unused37 = unused38 = unused39 = unused40 = unused41 = unused42 = unused43 = unused44 = unused45 = unused46 = unused47 = unused48 = unused49 = unused50 = unused51 = unused52 = unused53 = unused54 = unused55 = unused56 = unused57 = unused58 = unused59 = unused60 = unused61 = unused62 = unused63 = unused64 = unused65 = unused66 = unused67 = unused68 = unused69 = unused70 = unused71 = unused72 = unused73 = unused74 = unused75 = unused76 = unused77 = unused78 = unused79 = unused80 = unused81 = unused82 = unused83 = unused84 = unused85 = unused86 = unused87 = unused88 = unused89 = unused90 = unused91 = unused92 = unused93 = unused94 = unused95 = unused96 = unused97 = unused98 = unused99 = unused100 = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">test();</span><br><span class="line">&#125; <span class="keyword">catch</span> (Error e) &#123;</span><br><span class="line">System.out.println(<span class="string">"stack length:"</span> + stackLength);</span><br><span class="line"><span class="keyword">throw</span> e;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"D:\Program Files\java\jdk-13.0.1\bin\java.exe"</span> -Xss180k <span class="string">"-javaagent:D:\Program Files\JetBrains\IntelliJ IDEA 2020.2\lib\idea_rt.jar=58065:D:\Program Files\JetBrains\IntelliJ IDEA 2020.2\bin"</span> -Dfile.encoding=UTF-8 -classpath D:\weiyun\Code\java\jvm\out\production\jvm xyz.onns.jvm.JavaVMStackSOF2</span><br><span class="line">stack length:87</span><br><span class="line">Exception <span class="keyword">in</span> thread <span class="string">"main"</span> java.lang.StackOverflowError</span><br><span class="line">at xyz.onns.jvm.JavaVMStackSOF2.test(JavaVMStackSOF2.java:30)</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">Process finished with <span class="built_in">exit</span> code 1</span><br></pre></td></tr></table></figure><p>æ— è®ºæ˜¯ç”±äºæ ˆå¸§å¤ªå¤§è¿˜æ˜¯è™šæ‹Ÿæœºæ ˆå®¹é‡å¤ªå°ï¼Œå½“æ–°çš„æ ˆå¸§å†…å­˜æ— æ³•åˆ†é…çš„æ—¶å€™ï¼Œ<br>HotSpot è™šæ‹ŸæœºæŠ›å‡ºçš„éƒ½æ˜¯<code>StackOverflowError</code>å¼‚å¸¸ã€‚</p><h3 id="æ–¹æ³•åŒºå’Œè¿è¡Œæ—¶å¸¸é‡æ± æº¢å‡º"><a class="header-anchor" href="#æ–¹æ³•åŒºå’Œè¿è¡Œæ—¶å¸¸é‡æ± æº¢å‡º">#</a>æ–¹æ³•åŒºå’Œè¿è¡Œæ—¶å¸¸é‡æ± æº¢å‡º</h3><p><code>String::intern()</code>æ˜¯ä¸€ä¸ªæœ¬åœ°æ–¹æ³•ï¼Œå®ƒçš„ä½œç”¨æ˜¯å¦‚æœå­—ç¬¦ä¸²å¸¸é‡æ± ä¸­å·²ç»åŒ…å«ä¸€ä¸ªç­‰äºæ­¤ String å¯¹è±¡çš„å­—ç¬¦ä¸²ï¼Œåˆ™è¿”å›ä»£è¡¨æ± ä¸­è¿™ä¸ªå­—ç¬¦ä¸²çš„ String å¯¹è±¡çš„å¼•ç”¨;å¦åˆ™ï¼Œä¼šå°†æ­¤ String å¯¹è±¡åŒ…å«çš„å­—ç¬¦ä¸²æ·»åŠ åˆ°å¸¸é‡æ± ä¸­ï¼Œå¹¶ä¸”è¿”å›æ­¤ String å¯¹è±¡çš„å¼•ç”¨ã€‚</p><p>åœ¨ JDK 6 æˆ–æ›´æ—©ä¹‹å‰çš„ HotSpot è™šæ‹Ÿæœºä¸­ï¼Œå¸¸é‡æ± éƒ½æ˜¯åˆ†é…åœ¨æ°¸ä¹…ä»£ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>-XX:PermSize</code>å’Œ<code>-XX:MaxPermSize</code>é™åˆ¶æ°¸ä¹…ä»£çš„å¤§å°ï¼Œå³å¯é—´æ¥é™åˆ¶å…¶ä¸­å¸¸é‡æ± çš„å®¹é‡ã€‚</p><p>è‡ª JDK 7 èµ·ï¼ŒåŸæœ¬å­˜æ”¾åœ¨æ°¸ä¹…ä»£çš„å­—ç¬¦ä¸²å¸¸é‡æ± è¢«ç§»è‡³ Java å †ä¹‹ä¸­ã€‚</p><p>ä¸ºäº†è®©ä½¿ç”¨è€…æœ‰é¢„é˜²å®é™…åº”ç”¨é‡Œå‡ºç°ç±»ä¼¼äºâ€œè¿«ä½¿è™šæ‹Ÿæœºäº§ç”Ÿæ–¹æ³•åŒºçš„æº¢å‡ºå¼‚å¸¸â€çš„ç ´åæ€§çš„æ“ä½œï¼ŒHotSpot è¿˜æ˜¯æä¾›äº†ä¸€äº›å‚æ•°ä½œä¸ºå…ƒç©ºé—´çš„é˜²å¾¡æªæ–½ï¼Œä¸»è¦åŒ…æ‹¬ï¼š</p><ul><li><code>-XX:MaxMetaspaceSize</code>:è®¾ç½®å…ƒç©ºé—´æœ€å¤§å€¼ï¼Œé»˜è®¤æ˜¯-1ï¼Œå³ä¸é™åˆ¶ï¼Œæˆ–è€…è¯´åªå—é™äºæœ¬åœ°å†…å­˜å¤§å°ã€‚</li><li><code>-XX:MetaspaceSize</code>:æŒ‡å®šå…ƒç©ºé—´çš„åˆå§‹ç©ºé—´å¤§å°ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½ï¼Œè¾¾åˆ°è¯¥å€¼å°±ä¼šè§¦å‘åƒåœ¾æ”¶é›†è¿›è¡Œç±»å‹å¸è½½ï¼ŒåŒæ—¶æ”¶é›†å™¨ä¼šå¯¹è¯¥å€¼è¿›è¡Œè°ƒæ•´:å¦‚æœé‡Šæ”¾äº†å¤§é‡çš„ç©ºé—´ï¼Œå°±é€‚å½“é™ä½è¯¥å€¼;å¦‚æœé‡Šæ”¾äº†å¾ˆå°‘çš„ç©ºé—´ï¼Œé‚£ä¹ˆåœ¨ä¸è¶…è¿‡<code>-XX:MaxMetaspaceSize</code>(å¦‚æœè®¾ç½®äº†çš„è¯)çš„æƒ…å†µä¸‹ï¼Œé€‚å½“æé«˜è¯¥å€¼ã€‚</li><li><code>-XX:MinMetaspaceFreeRatio</code>:ä½œç”¨æ˜¯åœ¨åƒåœ¾æ”¶é›†ä¹‹åæ§åˆ¶æœ€å°çš„å…ƒç©ºé—´å‰©ä½™å®¹é‡çš„ç™¾åˆ†æ¯”ï¼Œå¯å‡å°‘å› ä¸ºå…ƒç©ºé—´ä¸è¶³å¯¼è‡´çš„åƒåœ¾æ”¶é›†çš„é¢‘ç‡ã€‚ç±»ä¼¼çš„è¿˜æœ‰<code>-XX:Max-MetaspaceFreeRatio</code>ï¼Œç”¨äºæ§åˆ¶æœ€å¤§çš„å…ƒç©ºé—´å‰©ä½™å®¹é‡çš„ç™¾åˆ†æ¯”ã€‚</li></ul><h3 id="æœ¬æœºç›´æ¥å†…å­˜æº¢å‡º"><a class="header-anchor" href="#æœ¬æœºç›´æ¥å†…å­˜æº¢å‡º">#</a>æœ¬æœºç›´æ¥å†…å­˜æº¢å‡º</h3><p><code>ç›´æ¥å†…å­˜</code>(Direct Memory)çš„å®¹é‡å¤§å°å¯é€šè¿‡<code>-XX:MaxDirectMemorySize</code>å‚æ•°æ¥æŒ‡å®šï¼Œå¦‚æœä¸å»æŒ‡å®šï¼Œåˆ™é»˜è®¤ä¸ Java å †æœ€å¤§å€¼(ç”±<code>-Xmx</code>æŒ‡å®š)ä¸€è‡´ã€‚</p><p>ç”±ç›´æ¥å†…å­˜å¯¼è‡´çš„å†…å­˜æº¢å‡ºï¼Œä¸€ä¸ªæ˜æ˜¾çš„ç‰¹å¾æ˜¯åœ¨<code>Heap Dump</code>æ–‡ä»¶ä¸­ä¸ä¼šçœ‹è§æœ‰ä»€ä¹ˆæ˜æ˜¾çš„å¼‚å¸¸æƒ…å†µï¼Œå¦‚æœè¯»è€…å‘ç°å†…å­˜æº¢å‡ºä¹‹åäº§ç”Ÿçš„ Dump æ–‡ä»¶å¾ˆå°ï¼Œè€Œç¨‹åºä¸­åˆç›´æ¥æˆ–é—´æ¥ä½¿ç”¨äº† DirectMemory(å…¸å‹çš„é—´æ¥ä½¿ç”¨å°±æ˜¯ NIO)ï¼Œé‚£å°±å¯ä»¥è€ƒè™‘é‡ç‚¹æ£€æŸ¥ä¸€ä¸‹ç›´æ¥å†…å­˜æ–¹é¢çš„åŸå› äº†ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> xyz.onns.jvm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sun.misc.Unsafe;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * VM Args:-Xmx20M -XX:MaxDirectMemorySize=10M</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> zzm</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DirectMemoryOOM</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> _1MB = <span class="number">1024</span> * <span class="number">1024</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">Field unsafeField = Unsafe.class.getDeclaredFields()[0];</span><br><span class="line">unsafeField.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">Unsafe unsafe = (Unsafe) unsafeField.get(<span class="keyword">null</span>);</span><br><span class="line"><span class="keyword">int</span> i = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">System.out.println(i++);</span><br><span class="line">unsafe.allocateMemory(_1MB);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¾ˆå¥‡æ€ªï¼Œåœ¨ IDEA è¿è¡Œè¿™æ®µä»£ç çš„æ—¶å€™æˆ‘ä¸ä¼šæœ‰å¼‚å¸¸æŠ›å‡ºâ€¦æˆ‘çš„ Java ç‰ˆæœ¬æ˜¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ java --version</span><br><span class="line">java 13.0.2 2020-01-14</span><br><span class="line">Java(TM) SE Runtime Environment (build 13.0.2+8)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 13.0.2+8, mixed mode, sharing)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> jvm </tag>
            
            <tag> jvm note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºï¼ˆäºŒï¼‰</title>
      <link href="/blog/2020/08/23/jvm-note-2/"/>
      <url>/blog/2020/08/23/jvm-note-2/</url>
      
        <content type="html"><![CDATA[<p>æ·±å…¥ç†è§£ Java è™šæ‹Ÿæœºï¼šJVM é«˜çº§ç‰¹æ€§ä¸æœ€ä½³å®è·µï¼ˆç¬¬ 3 ç‰ˆï¼‰</p><h1 id="è‡ªåŠ¨å†…å­˜ç®¡ç†"><a class="header-anchor" href="#è‡ªåŠ¨å†…å­˜ç®¡ç†">#</a>è‡ªåŠ¨å†…å­˜ç®¡ç†</h1><h2 id="java-å†…å­˜åŒºåŸŸä¸å†…å­˜æº¢å‡ºå¼‚å¸¸"><a class="header-anchor" href="#java-å†…å­˜åŒºåŸŸä¸å†…å­˜æº¢å‡ºå¼‚å¸¸">#</a>Java å†…å­˜åŒºåŸŸä¸å†…å­˜æº¢å‡ºå¼‚å¸¸</h2><center><p><img src="//onns.xyz/blog/image/20200822-1.jpg" alt="Javaè™šæ‹Ÿæœºè¿è¡Œæ—¶æ•°æ®åŒº"></p><p>Java è™šæ‹Ÿæœºè¿è¡Œæ—¶æ•°æ®åŒº</p></center><a id="more"></a><h3 id="java-å †"><a class="header-anchor" href="#java-å †">#</a>Java å †</h3><p>å¯¹äº Java åº”ç”¨ç¨‹åºæ¥è¯´ï¼Œ<code>Javaå †</code>(Java Heap)æ˜¯è™šæ‹Ÿæœºæ‰€ç®¡ç†çš„å†…å­˜ä¸­æœ€å¤§çš„ä¸€å—ã€‚</p><p>Java å †æ˜¯è¢«æ‰€æœ‰çº¿ç¨‹å…±äº«çš„ä¸€å—å†…å­˜åŒºåŸŸï¼Œåœ¨è™šæ‹Ÿæœºå¯åŠ¨æ—¶åˆ›å»ºã€‚æ­¤å†…å­˜åŒºåŸŸçš„å”¯ä¸€ç›®çš„å°±æ˜¯å­˜æ”¾å¯¹è±¡å®ä¾‹ï¼ŒJava é‡Œâ€œå‡ ä¹â€æ‰€æœ‰çš„å¯¹è±¡å®ä¾‹éƒ½åœ¨è¿™é‡Œåˆ†é…å†…å­˜ã€‚</p><p>å¦‚æœä»åˆ†é…å†…å­˜çš„è§’åº¦çœ‹ï¼Œæ‰€æœ‰çº¿ç¨‹å…±äº«çš„ Java å †ä¸­å¯ä»¥åˆ’åˆ†å‡ºå¤šä¸ª<code>çº¿ç¨‹ç§æœ‰</code>çš„<code>åˆ†é…ç¼“å†²åŒº</code>(Thread Local Allocation Bufferï¼ŒTLAB)ï¼Œä»¥æå‡å¯¹è±¡åˆ†é…æ—¶çš„æ•ˆç‡ã€‚</p><p>Java å †å¯ä»¥å¤„äºç‰©ç†ä¸Šä¸è¿ç»­çš„å†…å­˜ç©ºé—´ä¸­ï¼Œä½†åœ¨é€»è¾‘ä¸Šå®ƒåº”è¯¥è¢«è§†ä¸ºè¿ç»­çš„ï¼Œè¿™ç‚¹å°±åƒæˆ‘ä»¬ç”¨ç£ç›˜ç©ºé—´å»å­˜å‚¨æ–‡ä»¶ä¸€æ ·ï¼Œå¹¶ä¸è¦æ±‚æ¯ä¸ªæ–‡ä»¶éƒ½è¿ç»­å­˜æ”¾ã€‚ä½†å¯¹äºå¤§å¯¹è±¡(å…¸å‹çš„å¦‚æ•°ç»„å¯¹è±¡)ï¼Œå¤šæ•°è™šæ‹Ÿæœºå®ç°å‡ºäºå®ç°ç®€å•ã€å­˜å‚¨é«˜æ•ˆçš„è€ƒè™‘ï¼Œå¾ˆå¯èƒ½ä¼šè¦æ±‚è¿ç»­çš„å†…å­˜ç©ºé—´ã€‚</p><p>Java å †æ—¢å¯ä»¥è¢«å®ç°æˆå›ºå®šå¤§å°çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯å¯æ‰©å±•çš„ï¼Œä¸è¿‡å½“å‰ä¸»æµçš„ Java è™šæ‹Ÿæœºéƒ½æ˜¯æŒ‰ç…§å¯æ‰©å±•æ¥å®ç°çš„(é€šè¿‡å‚æ•°-Xmx å’Œ-Xms è®¾å®š)ã€‚å¦‚æœåœ¨ Java å †ä¸­æ²¡æœ‰å†…å­˜å®Œæˆå®ä¾‹åˆ†é…ï¼Œå¹¶ä¸”å †ä¹Ÿæ— æ³•å†æ‰©å±•æ—¶ï¼ŒJava è™šæ‹Ÿæœºå°†ä¼šæŠ›å‡º OutOfMemoryError å¼‚å¸¸ã€‚</p><h3 id="æ–¹æ³•åŒº"><a class="header-anchor" href="#æ–¹æ³•åŒº">#</a>æ–¹æ³•åŒº</h3><p><code>æ–¹æ³•åŒº</code>(Method Area)ä¸ Java å †ä¸€æ ·ï¼Œæ˜¯å„ä¸ªçº¿ç¨‹å…±äº«çš„å†…å­˜åŒºåŸŸï¼Œå®ƒç”¨äºå­˜å‚¨å·²è¢«è™šæ‹ŸæœºåŠ è½½çš„ç±»å‹ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç¼“å­˜ç­‰æ•°æ®ã€‚è™½ç„¶ã€ŠJava è™šæ‹Ÿæœºè§„èŒƒã€‹ä¸­æŠŠæ–¹æ³•åŒºæè¿°ä¸ºå †çš„ä¸€ä¸ªé€»è¾‘éƒ¨åˆ†ï¼Œä½†æ˜¯å®ƒå´æœ‰ä¸€ä¸ªåˆ«åå«ä½œâ€œ<code>éå †</code>â€(Non-Heap)ï¼Œç›®çš„æ˜¯ä¸ Java å †åŒºåˆ†å¼€æ¥ã€‚</p><p>â€œ<code>æ°¸ä¹…ä»£</code>â€(Permanent Generation)ï¼šè€ƒè™‘åˆ° HotSpot æœªæ¥çš„å‘å±•ï¼Œåœ¨ JDK 6 çš„æ—¶å€™ HotSpot å¼€å‘å›¢é˜Ÿå°±æœ‰æ”¾å¼ƒæ°¸ä¹…ä»£ï¼Œé€æ­¥æ”¹ä¸ºé‡‡ç”¨<code>æœ¬åœ°å†…å­˜</code>(Native Memory)æ¥å®ç°æ–¹æ³•åŒºçš„è®¡åˆ’äº†ï¼Œåˆ°äº† JDK 7 çš„ HotSpotï¼Œå·²ç»æŠŠåŸæœ¬æ”¾åœ¨æ°¸ä¹…ä»£çš„å­—ç¬¦ä¸²å¸¸é‡æ± ã€é™æ€å˜é‡ç­‰ç§»å‡ºã€‚è€Œåˆ°äº† JDK 8ï¼Œç»ˆäºå®Œå…¨åºŸå¼ƒäº†æ°¸ä¹…ä»£çš„æ¦‚å¿µï¼Œæ”¹ç”¨ä¸ JRockitã€J9 ä¸€æ ·åœ¨æœ¬åœ°å†…å­˜ä¸­å®ç°çš„<code>å…ƒç©ºé—´</code>(Meta-space)æ¥ä»£æ›¿ï¼ŒæŠŠ JDK 7 ä¸­æ°¸ä¹…ä»£è¿˜å‰©ä½™çš„å†…å®¹(ä¸»è¦æ˜¯ç±»å‹ä¿¡æ¯)å…¨éƒ¨ç§»åˆ°å…ƒç©ºé—´ä¸­ã€‚</p><p>Java è™šæ‹Ÿæœºè§„èŒƒã€‹å¯¹æ–¹æ³•åŒºçš„çº¦æŸæ˜¯éå¸¸å®½æ¾çš„ï¼Œé™¤äº†å’Œ Java å †ä¸€æ ·ä¸éœ€è¦è¿ç»­çš„å†…å­˜å’Œå¯ä»¥é€‰æ‹©å›ºå®šå¤§å°æˆ–è€…å¯æ‰©å±•å¤–ï¼Œç”šè‡³è¿˜å¯ä»¥é€‰æ‹©ä¸å®ç°åƒåœ¾æ”¶é›†ã€‚è¿™åŒºåŸŸçš„å†…å­˜å›æ”¶ç›®æ ‡ä¸»è¦æ˜¯<code>é’ˆå¯¹å¸¸é‡æ± çš„å›æ”¶</code>å’Œ<code>å¯¹ç±»å‹çš„å¸è½½</code>ï¼Œä¸€èˆ¬æ¥è¯´è¿™ä¸ªåŒºåŸŸçš„å›æ”¶æ•ˆæœæ¯”è¾ƒéš¾ä»¤äººæ»¡æ„ï¼Œå°¤å…¶æ˜¯ç±»å‹çš„å¸è½½ï¼Œæ¡ä»¶ç›¸å½“è‹›åˆ»ï¼Œä½†æ˜¯è¿™éƒ¨åˆ†åŒºåŸŸçš„å›æ”¶æœ‰æ—¶åˆç¡®å®æ˜¯å¿…è¦çš„ã€‚</p><p>æ ¹æ®ã€ŠJava è™šæ‹Ÿæœºè§„èŒƒã€‹çš„è§„å®šï¼Œå¦‚æœæ–¹æ³•åŒºæ— æ³•æ»¡è¶³æ–°çš„å†…å­˜åˆ†é…éœ€æ±‚æ—¶ï¼Œå°†æŠ›å‡º OutOfMemoryError å¼‚å¸¸ã€‚</p><h3 id="è¿è¡Œæ—¶å¸¸é‡æ± "><a class="header-anchor" href="#è¿è¡Œæ—¶å¸¸é‡æ± ">#</a>è¿è¡Œæ—¶å¸¸é‡æ± </h3><p><code>è¿è¡Œæ—¶å¸¸é‡æ± </code>(Runtime Constant Pool)æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ã€‚Class æ–‡ä»¶ä¸­é™¤äº†æœ‰ç±»çš„ç‰ˆæœ¬ã€å­—æ®µã€æ–¹æ³•ã€æ¥å£ç­‰æè¿°ä¿¡æ¯å¤–ï¼Œè¿˜æœ‰ä¸€é¡¹ä¿¡æ¯æ˜¯å¸¸é‡æ± è¡¨(Constant Pool Table)ï¼Œç”¨äºå­˜æ”¾ç¼–è¯‘æœŸç”Ÿæˆçš„å„ç§å­—é¢é‡ä¸ç¬¦å·å¼•ç”¨ï¼Œè¿™éƒ¨åˆ†å†…å®¹å°†åœ¨ç±»åŠ è½½åå­˜æ”¾åˆ°æ–¹æ³•åŒºçš„è¿è¡Œæ—¶å¸¸é‡æ± ä¸­ã€‚</p><p>ä¸€èˆ¬æ¥è¯´ï¼Œé™¤äº†ä¿å­˜ Class æ–‡ä»¶ä¸­æè¿°çš„ç¬¦å·å¼•ç”¨å¤–ï¼Œè¿˜ä¼šæŠŠç”±ç¬¦å·å¼•ç”¨ç¿»è¯‘å‡ºæ¥çš„ç›´æ¥å¼•ç”¨ä¹Ÿå­˜å‚¨åœ¨è¿è¡Œæ—¶å¸¸é‡æ± ä¸­ã€‚</p><p>è¿è¡Œæ—¶å¸¸é‡æ± ç›¸å¯¹äº Class æ–‡ä»¶å¸¸é‡æ± çš„å¦å¤–ä¸€ä¸ªé‡è¦ç‰¹å¾æ˜¯å…·å¤‡åŠ¨æ€æ€§ï¼ŒJava è¯­è¨€å¹¶ä¸è¦æ±‚å¸¸é‡ä¸€å®šåªæœ‰ç¼–è¯‘æœŸæ‰èƒ½äº§ç”Ÿï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¹¶éé¢„ç½®å…¥ Class æ–‡ä»¶ä¸­å¸¸é‡æ± çš„å†…å®¹æ‰èƒ½è¿›å…¥æ–¹æ³•åŒºè¿è¡Œæ—¶å¸¸é‡æ± ï¼Œè¿è¡ŒæœŸé—´ä¹Ÿå¯ä»¥å°†æ–°çš„å¸¸é‡æ”¾å…¥æ± ä¸­ï¼Œè¿™ç§ç‰¹æ€§è¢«å¼€å‘äººå‘˜åˆ©ç”¨å¾—æ¯”è¾ƒå¤šçš„ä¾¿æ˜¯ String ç±»çš„ intern()æ–¹æ³•ã€‚</p><p>è¿è¡Œæ—¶å¸¸é‡æ± æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ï¼Œå—åˆ°æ–¹æ³•åŒºå†…å­˜çš„é™åˆ¶ï¼Œå½“å¸¸é‡æ± æ— æ³•å†ç”³è¯·åˆ°å†…å­˜æ—¶ä¼šæŠ›å‡º OutOfMemoryError å¼‚å¸¸ã€‚</p><h3 id="ç›´æ¥å†…å­˜"><a class="header-anchor" href="#ç›´æ¥å†…å­˜">#</a>ç›´æ¥å†…å­˜</h3><p>åœ¨ JDK 1.4 ä¸­æ–°åŠ å…¥äº† NIO(New Input/Output)ç±»ï¼Œå¼•å…¥äº†ä¸€ç§åŸºäºé€šé“(Channel)ä¸ç¼“å†²åŒº(Buffer)çš„ I/O æ–¹å¼ï¼Œå®ƒå¯ä»¥ä½¿ç”¨ Native å‡½æ•°åº“ç›´æ¥åˆ†é…å †å¤–å†…å­˜ï¼Œç„¶åé€šè¿‡ä¸€ä¸ªå­˜å‚¨åœ¨ Java å †é‡Œé¢çš„ DirectByteBuffer å¯¹è±¡ä½œä¸ºè¿™å—å†…å­˜çš„å¼•ç”¨è¿›è¡Œæ“ä½œã€‚è¿™æ ·èƒ½åœ¨ä¸€äº›åœºæ™¯ä¸­æ˜¾è‘—æé«˜æ€§èƒ½ï¼Œå› ä¸ºé¿å…äº†åœ¨ Java å †å’Œ Native å †ä¸­æ¥å›å¤åˆ¶æ•°æ®ã€‚<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p><h3 id="å¯¹è±¡çš„åˆ›å»º"><a class="header-anchor" href="#å¯¹è±¡çš„åˆ›å»º">#</a>å¯¹è±¡çš„åˆ›å»º</h3><p>å½“ Java è™šæ‹Ÿæœºé‡åˆ°ä¸€æ¡å­—èŠ‚ç  new æŒ‡ä»¤æ—¶ï¼Œé¦–å…ˆå°†å»æ£€æŸ¥è¿™ä¸ªæŒ‡ä»¤çš„å‚æ•°æ˜¯å¦èƒ½åœ¨å¸¸é‡æ± ä¸­å®šä½åˆ°ä¸€ä¸ªç±»çš„ç¬¦å·å¼•ç”¨ï¼Œå¹¶ä¸”æ£€æŸ¥è¿™ä¸ªç¬¦å·å¼•ç”¨ä»£è¡¨çš„ç±»æ˜¯å¦å·²è¢«åŠ è½½ã€è§£æå’Œåˆå§‹åŒ–è¿‡ã€‚å¦‚æœæ²¡æœ‰ï¼Œé‚£å¿…é¡»å…ˆæ‰§è¡Œç›¸åº”çš„ç±»åŠ è½½è¿‡ç¨‹ã€‚</p><p>åœ¨ç±»åŠ è½½æ£€æŸ¥é€šè¿‡åï¼Œæ¥ä¸‹æ¥è™šæ‹Ÿæœºå°†ä¸ºæ–°ç”Ÿå¯¹è±¡åˆ†é…å†…å­˜ã€‚å¯¹è±¡æ‰€éœ€å†…å­˜çš„å¤§å°åœ¨ç±»åŠ è½½å®Œæˆåä¾¿å¯å®Œå…¨ç¡®å®šï¼Œä¸ºå¯¹è±¡åˆ†é…ç©ºé—´çš„ä»»åŠ¡å®é™…ä¸Šä¾¿ç­‰åŒäºæŠŠä¸€å—ç¡®å®šå¤§å°çš„å†…å­˜å—ä» Java å †ä¸­åˆ’åˆ†å‡ºæ¥ã€‚</p><p>å‡è®¾ Java å †ä¸­å†…å­˜æ˜¯ç»å¯¹è§„æ•´çš„ï¼Œæ‰€æœ‰è¢«ä½¿ç”¨è¿‡çš„å†…å­˜éƒ½è¢«æ”¾åœ¨ä¸€è¾¹ï¼Œç©ºé—²çš„å†…å­˜è¢«æ”¾åœ¨å¦ä¸€è¾¹ï¼Œä¸­é—´æ”¾ç€ä¸€ä¸ªæŒ‡é’ˆä½œä¸ºåˆ†ç•Œç‚¹çš„æŒ‡ç¤ºå™¨ï¼Œé‚£æ‰€åˆ†é…å†…å­˜å°±ä»…ä»…æ˜¯æŠŠé‚£ä¸ªæŒ‡é’ˆå‘ç©ºé—²ç©ºé—´æ–¹å‘æŒªåŠ¨ä¸€æ®µä¸å¯¹è±¡å¤§å°ç›¸ç­‰çš„è·ç¦»ï¼Œè¿™ç§åˆ†é…æ–¹å¼ç§°ä¸ºâ€œ<code>æŒ‡é’ˆç¢°æ’</code>â€(Bump The Pointer)ã€‚</p><p>ä½†å¦‚æœ Java å †ä¸­çš„å†…å­˜å¹¶ä¸æ˜¯è§„æ•´çš„ï¼Œå·²è¢«ä½¿ç”¨çš„å†…å­˜å’Œç©ºé—²çš„å†…å­˜ç›¸äº’äº¤é”™åœ¨ä¸€èµ·ï¼Œé‚£å°±æ²¡æœ‰åŠæ³•ç®€å•åœ°è¿›è¡ŒæŒ‡é’ˆç¢°æ’äº†ï¼Œè™šæ‹Ÿæœºå°±å¿…é¡»ç»´æŠ¤ä¸€ä¸ªåˆ—è¡¨ï¼Œè®°å½•ä¸Šå“ªäº›å†…å­˜å—æ˜¯å¯ç”¨çš„ï¼Œåœ¨åˆ†é…çš„æ—¶å€™ä»åˆ—è¡¨ä¸­æ‰¾åˆ°ä¸€å—è¶³å¤Ÿå¤§çš„ç©ºé—´åˆ’åˆ†ç»™å¯¹è±¡å®ä¾‹ï¼Œå¹¶æ›´æ–°åˆ—è¡¨ä¸Šçš„è®°å½•ï¼Œè¿™ç§åˆ†é…æ–¹å¼ç§°ä¸ºâ€œ<code>ç©ºé—²åˆ—è¡¨</code>â€(Free List)ã€‚</p><p>é€‰æ‹©å“ªç§åˆ†é…æ–¹å¼ç”± Java å †æ˜¯å¦è§„æ•´å†³å®šï¼Œè€Œ Java å †æ˜¯å¦è§„æ•´åˆç”±æ‰€é‡‡ç”¨çš„åƒåœ¾æ”¶é›†å™¨æ˜¯å¦å¸¦æœ‰ç©ºé—´å‹ç¼©æ•´ç†(Compact)çš„èƒ½åŠ›å†³å®šã€‚å› æ­¤ï¼Œå½“ä½¿ç”¨ Serialã€ParNew ç­‰å¸¦å‹ç¼©æ•´ç†è¿‡ç¨‹çš„æ”¶é›†å™¨æ—¶ï¼Œç³»ç»Ÿé‡‡ç”¨çš„åˆ†é…ç®—æ³•æ˜¯æŒ‡é’ˆç¢°æ’ï¼Œæ—¢ç®€å•åˆé«˜æ•ˆï¼›è€Œå½“ä½¿ç”¨ CMS è¿™ç§åŸºäºæ¸…é™¤(Sweep)ç®—æ³•çš„æ”¶é›†å™¨æ—¶ï¼Œç†è®ºä¸Šå°±åªèƒ½é‡‡ç”¨è¾ƒä¸ºå¤æ‚çš„ç©ºé—²åˆ—è¡¨æ¥åˆ†é…å†…å­˜ã€‚</p><p>ä¸€ä¸ªéœ€è¦è€ƒè™‘çš„é—®é¢˜ï¼šå¯¹è±¡åˆ›å»ºåœ¨è™šæ‹Ÿæœºä¸­æ˜¯éå¸¸é¢‘ç¹çš„è¡Œä¸ºï¼Œå³ä½¿ä»…ä»…ä¿®æ”¹ä¸€ä¸ªæŒ‡é’ˆæ‰€æŒ‡å‘çš„ä½ç½®ï¼Œåœ¨å¹¶å‘æƒ…å†µä¸‹ä¹Ÿå¹¶ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¯èƒ½å‡ºç°æ­£åœ¨ç»™å¯¹è±¡ A åˆ†é…å†…å­˜ï¼ŒæŒ‡é’ˆè¿˜æ²¡æ¥å¾—åŠä¿®æ”¹ï¼Œå¯¹è±¡ B åˆåŒæ—¶ä½¿ç”¨äº†åŸæ¥çš„æŒ‡é’ˆæ¥åˆ†é…å†…å­˜çš„æƒ…å†µã€‚</p><p>ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼šä¸€ç§æ˜¯å¯¹åˆ†é…å†…å­˜ç©ºé—´çš„åŠ¨ä½œè¿›è¡ŒåŒæ­¥å¤„ç†â€”â€”å®é™…ä¸Šè™šæ‹Ÿæœºæ˜¯é‡‡ç”¨ CAS é…ä¸Šå¤±è´¥é‡è¯•çš„æ–¹å¼ä¿è¯æ›´æ–°æ“ä½œçš„åŸå­æ€§ï¼›å¦å¤–ä¸€ç§æ˜¯æŠŠå†…å­˜åˆ†é…çš„åŠ¨ä½œæŒ‰ç…§çº¿ç¨‹åˆ’åˆ†åœ¨ä¸åŒçš„ç©ºé—´ä¹‹ä¸­è¿›è¡Œï¼Œå³æ¯ä¸ªçº¿ç¨‹åœ¨ Java å †ä¸­é¢„å…ˆåˆ†é…ä¸€å°å—å†…å­˜ï¼Œç§°ä¸º<code>æœ¬åœ°çº¿ç¨‹åˆ†é…ç¼“å†²</code>(Thread Local Allocation Bufferï¼ŒTLAB)ï¼Œå“ªä¸ªçº¿ç¨‹è¦åˆ†é…å†…å­˜ï¼Œå°±åœ¨å“ªä¸ªçº¿ç¨‹çš„æœ¬åœ°ç¼“å†²åŒºä¸­åˆ†é…ï¼Œåªæœ‰æœ¬åœ°ç¼“å†²åŒºç”¨å®Œäº†ï¼Œåˆ†é…æ–°çš„ç¼“å­˜åŒºæ—¶æ‰éœ€è¦åŒæ­¥é”å®šã€‚è™šæ‹Ÿæœºæ˜¯å¦ä½¿ç”¨ TLABï¼Œå¯ä»¥é€šè¿‡<code>-XX:+/-UseTLAB</code>å‚æ•°æ¥è®¾å®šã€‚</p><p>å†…å­˜åˆ†é…å®Œæˆä¹‹åï¼Œè™šæ‹Ÿæœºå¿…é¡»å°†åˆ†é…åˆ°çš„å†…å­˜ç©ºé—´(ä½†ä¸åŒ…æ‹¬å¯¹è±¡å¤´)éƒ½åˆå§‹åŒ–ä¸ºé›¶å€¼ï¼Œå¦‚æœä½¿ç”¨äº† TLAB çš„è¯ï¼Œè¿™ä¸€é¡¹å·¥ä½œä¹Ÿå¯ä»¥æå‰è‡³ TLAB åˆ†é…æ—¶é¡ºä¾¿è¿›è¡Œã€‚è¿™æ­¥æ“ä½œä¿è¯äº†å¯¹è±¡çš„å®ä¾‹å­—æ®µåœ¨ Java ä»£ç ä¸­å¯ä»¥ä¸èµ‹åˆå§‹å€¼å°±ç›´æ¥ä½¿ç”¨ï¼Œä½¿ç¨‹åºèƒ½è®¿é—®åˆ°è¿™äº›å­—æ®µçš„æ•°æ®ç±»å‹æ‰€å¯¹åº”çš„é›¶å€¼ã€‚</p><p>æ¥ä¸‹æ¥ï¼ŒJava è™šæ‹Ÿæœºè¿˜è¦å¯¹å¯¹è±¡è¿›è¡Œå¿…è¦çš„è®¾ç½®ï¼Œä¾‹å¦‚è¿™ä¸ªå¯¹è±¡æ˜¯å“ªä¸ªç±»çš„å®ä¾‹ã€å¦‚ä½•æ‰èƒ½æ‰¾åˆ°ç±»çš„å…ƒæ•°æ®ä¿¡æ¯ã€å¯¹è±¡çš„å“ˆå¸Œç (å®é™…ä¸Šå¯¹è±¡çš„å“ˆå¸Œç ä¼šå»¶ååˆ°çœŸæ­£è°ƒç”¨<code>Object::hashCode()</code>æ–¹æ³•æ—¶æ‰è®¡ç®—)ã€å¯¹è±¡çš„ GC åˆ†ä»£å¹´é¾„ç­‰ä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯å­˜æ”¾åœ¨å¯¹è±¡çš„<code>å¯¹è±¡å¤´</code>(Object Header)ä¹‹ä¸­ã€‚æ ¹æ®è™šæ‹Ÿæœºå½“å‰è¿è¡ŒçŠ¶æ€çš„ä¸åŒï¼Œå¦‚æ˜¯å¦å¯ç”¨åå‘é”ç­‰ï¼Œå¯¹è±¡å¤´ä¼šæœ‰ä¸åŒçš„è®¾ç½®æ–¹å¼ã€‚</p><p>åœ¨ä¸Šé¢å·¥ä½œéƒ½å®Œæˆä¹‹åï¼Œä»è™šæ‹Ÿæœºçš„è§†è§’æ¥çœ‹ï¼Œä¸€ä¸ªæ–°çš„å¯¹è±¡å·²ç»äº§ç”Ÿäº†ã€‚ä½†æ˜¯ä» Java ç¨‹åºçš„è§†è§’çœ‹æ¥ï¼Œå¯¹è±¡åˆ›å»ºæ‰åˆšåˆšå¼€å§‹â€”â€”æ„é€ å‡½æ•°ï¼Œå³ Class æ–‡ä»¶ä¸­çš„<code>&lt;init&gt;()</code>æ–¹æ³•è¿˜æ²¡æœ‰æ‰§è¡Œï¼Œæ‰€æœ‰çš„å­—æ®µéƒ½ä¸ºé»˜è®¤çš„é›¶å€¼ï¼Œå¯¹è±¡éœ€è¦çš„å…¶ä»–èµ„æºå’ŒçŠ¶æ€ä¿¡æ¯ä¹Ÿè¿˜æ²¡æœ‰æŒ‰ç…§é¢„å®šçš„æ„å›¾æ„é€ å¥½ã€‚ä¸€èˆ¬æ¥è¯´(ç”±å­—èŠ‚ç æµä¸­ new æŒ‡ä»¤åé¢æ˜¯å¦è·Ÿéš<code>invokespecialæŒ‡ä»¤</code>æ‰€å†³å®šï¼ŒJava ç¼–è¯‘å™¨ä¼šåœ¨é‡åˆ° new å…³é”®å­—çš„åœ°æ–¹åŒæ—¶ç”Ÿæˆè¿™ä¸¤æ¡å­—èŠ‚ç æŒ‡ä»¤ï¼Œä½†å¦‚æœç›´æ¥é€šè¿‡å…¶ä»–æ–¹å¼äº§ç”Ÿçš„åˆ™ä¸ä¸€å®šå¦‚æ­¤)ï¼Œnew æŒ‡ä»¤ä¹‹åä¼šæ¥ç€æ‰§è¡Œ<code>&lt;init&gt;()</code>æ–¹æ³•ï¼ŒæŒ‰ç…§ç¨‹åºå‘˜çš„æ„æ„¿å¯¹å¯¹è±¡è¿›è¡Œåˆå§‹åŒ–ï¼Œè¿™æ ·ä¸€ä¸ªçœŸæ­£å¯ç”¨çš„å¯¹è±¡æ‰ç®—å®Œå…¨è¢«æ„é€ å‡ºæ¥ã€‚</p><h3 id="å¯¹è±¡çš„å†…å­˜å¸ƒå±€"><a class="header-anchor" href="#å¯¹è±¡çš„å†…å­˜å¸ƒå±€">#</a>å¯¹è±¡çš„å†…å­˜å¸ƒå±€</h3><p>åœ¨ HotSpot è™šæ‹Ÿæœºé‡Œï¼Œå¯¹è±¡åœ¨å †å†…å­˜ä¸­çš„å­˜å‚¨å¸ƒå±€å¯ä»¥åˆ’åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†:<code>å¯¹è±¡å¤´</code>(Header)ã€<code>å®ä¾‹æ•°æ®</code>(Instance Data)å’Œ<code>å¯¹é½å¡«å……</code>(Padding)ã€‚</p><p>HotSpot è™šæ‹Ÿæœºå¯¹è±¡çš„å¯¹è±¡å¤´éƒ¨åˆ†åŒ…æ‹¬ä¸¤ç±»ä¿¡æ¯ã€‚ç¬¬ä¸€ç±»æ˜¯ç”¨äºå­˜å‚¨å¯¹è±¡è‡ªèº«çš„è¿è¡Œæ—¶æ•°æ®ï¼Œå¦‚å“ˆå¸Œç (HashCode)ã€GC åˆ†ä»£å¹´é¾„ã€é”çŠ¶æ€æ ‡å¿—ã€çº¿ç¨‹æŒæœ‰çš„é”ã€åå‘çº¿ç¨‹ IDã€åå‘æ—¶é—´æˆ³ç­‰ï¼Œè¿™éƒ¨åˆ†æ•°æ®çš„é•¿åº¦åœ¨ 32 ä½å’Œ 64 ä½çš„è™šæ‹Ÿæœº(æœªå¼€å¯å‹ç¼©æŒ‡é’ˆ)ä¸­åˆ†åˆ«ä¸º 32 ä¸ªæ¯”ç‰¹å’Œ 64 ä¸ªæ¯”ç‰¹ï¼Œå®˜æ–¹ç§°å®ƒä¸ºâ€œ<code>Mark Word</code>â€ã€‚</p><p>è€ƒè™‘åˆ°è™šæ‹Ÿæœºçš„ç©ºé—´æ•ˆç‡ï¼Œ<code>Mark Word</code>è¢«è®¾è®¡æˆä¸€ä¸ªæœ‰ç€åŠ¨æ€å®šä¹‰çš„æ•°æ®ç»“æ„ï¼Œä»¥ä¾¿åœ¨æå°çš„ç©ºé—´å†…å­˜å‚¨å°½é‡å¤šçš„æ•°æ®ï¼Œæ ¹æ®å¯¹è±¡çš„çŠ¶æ€å¤ç”¨è‡ªå·±çš„å­˜å‚¨ç©ºé—´ã€‚ä¾‹å¦‚åœ¨ 32 ä½çš„ HotSpot è™šæ‹Ÿæœºä¸­ï¼Œå¦‚å¯¹è±¡æœªè¢«åŒæ­¥é”é”å®šçš„çŠ¶æ€ä¸‹ï¼Œ<code>Mark Word</code>çš„ 32 ä¸ªæ¯”ç‰¹å­˜å‚¨ç©ºé—´ä¸­çš„ 25 ä¸ªæ¯”ç‰¹ç”¨äºå­˜å‚¨å¯¹è±¡å“ˆå¸Œç ï¼Œ4 ä¸ªæ¯”ç‰¹ç”¨äºå­˜å‚¨å¯¹è±¡åˆ†ä»£å¹´é¾„ï¼Œ2 ä¸ªæ¯”ç‰¹ç”¨äºå­˜å‚¨é”æ ‡å¿—ä½ï¼Œ1 ä¸ªæ¯”ç‰¹å›ºå®šä¸º 0ï¼Œåœ¨å…¶ä»–çŠ¶æ€(è½»é‡çº§é”å®šã€é‡é‡çº§é”å®šã€GC æ ‡è®°ã€å¯åå‘)ä¸‹å¯¹è±¡çš„å­˜å‚¨å†…å®¹å¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚</p><center><table><thead><tr><th style="text-align:center">å­˜å‚¨å†…å®¹</th><th style="text-align:center">æ ‡å¿—ä½</th><th style="text-align:center">çŠ¶æ€</th></tr></thead><tbody><tr><td style="text-align:center">å¯¹è±¡å“ˆå¸Œç ã€å¯¹è±¡åˆ†ä»£å¹´é¾„</td><td style="text-align:center">01</td><td style="text-align:center">æœªé”å®š</td></tr><tr><td style="text-align:center">æŒ‡å‘é”è®°å½•çš„æŒ‡é’ˆ</td><td style="text-align:center">00</td><td style="text-align:center">è½»é‡çº§é”å®š</td></tr><tr><td style="text-align:center">æŒ‡å‘é‡é‡çº§é”çš„æŒ‡é’ˆ</td><td style="text-align:center">10</td><td style="text-align:center">è†¨èƒ€ï¼ˆé‡é‡çº§é”å®šï¼‰</td></tr><tr><td style="text-align:center">ç©ºï¼Œä¸éœ€è¦è®°å½•ä¿¡æ¯</td><td style="text-align:center">11</td><td style="text-align:center">GC æ ‡è®°</td></tr><tr><td style="text-align:center">åå‘çº¿ç¨‹ IDã€åå‘æ—¶é—´æˆ³ã€å¯¹è±¡åˆ†ä»£å¹´é¾„</td><td style="text-align:center">01</td><td style="text-align:center">å¯åå‘</td></tr></tbody></table></center><p>å¯¹è±¡å¤´çš„å¦å¤–ä¸€éƒ¨åˆ†æ˜¯ç±»å‹æŒ‡é’ˆï¼Œå³å¯¹è±¡æŒ‡å‘å®ƒçš„ç±»å‹å…ƒæ•°æ®çš„æŒ‡é’ˆï¼ŒJava è™šæ‹Ÿæœºé€šè¿‡è¿™ä¸ªæŒ‡é’ˆæ¥ç¡®å®šè¯¥å¯¹è±¡æ˜¯å“ªä¸ªç±»çš„å®ä¾‹ã€‚å¹¶ä¸æ˜¯æ‰€æœ‰çš„è™šæ‹Ÿæœºå®ç°éƒ½å¿…é¡»åœ¨å¯¹è±¡æ•°æ®ä¸Šä¿ç•™ç±»å‹æŒ‡é’ˆï¼Œæ¢å¥è¯è¯´ï¼ŒæŸ¥æ‰¾å¯¹è±¡çš„å…ƒæ•°æ®ä¿¡æ¯å¹¶ä¸ä¸€å®šè¦ç»è¿‡å¯¹è±¡æœ¬èº«ã€‚</p><p>å¦‚æœå¯¹è±¡æ˜¯ä¸€ä¸ª Java æ•°ç»„ï¼Œé‚£åœ¨å¯¹è±¡å¤´ä¸­è¿˜å¿…é¡»æœ‰ä¸€å—ç”¨äºè®°å½•æ•°ç»„é•¿åº¦çš„æ•°æ®ï¼Œå› ä¸ºè™šæ‹Ÿæœºå¯ä»¥é€šè¿‡æ™®é€š Java å¯¹è±¡çš„å…ƒæ•°æ®ä¿¡æ¯ç¡®å®š Java å¯¹è±¡çš„å¤§å°ï¼Œä½†æ˜¯å¦‚æœæ•°ç»„çš„é•¿åº¦æ˜¯ä¸ç¡®å®šçš„ï¼Œå°†æ— æ³•é€šè¿‡å…ƒæ•°æ®ä¸­çš„ä¿¡æ¯æ¨æ–­å‡ºæ•°ç»„çš„å¤§å°ã€‚</p><p>æˆ‘ä»¬åœ¨ç¨‹åºä»£ç é‡Œé¢æ‰€å®šä¹‰çš„å„ç§ç±»å‹çš„å­—æ®µå†…å®¹ï¼Œæ— è®ºæ˜¯ä»çˆ¶ç±»ç»§æ‰¿ä¸‹æ¥çš„ï¼Œè¿˜æ˜¯åœ¨å­ç±»ä¸­å®šä¹‰çš„å­—æ®µéƒ½å¿…é¡»è®°å½•èµ·æ¥ã€‚è¿™éƒ¨åˆ†çš„å­˜å‚¨é¡ºåºä¼šå—åˆ°è™šæ‹Ÿæœºåˆ†é…ç­–ç•¥å‚æ•°(<code>-XX:FieldsAllocationStyle</code>å‚æ•°)å’Œå­—æ®µåœ¨ Java æºç ä¸­å®šä¹‰é¡ºåºçš„å½±å“ã€‚HotSpot è™šæ‹Ÿæœºé»˜è®¤çš„åˆ†é…é¡ºåºä¸º longs/doublesã€intsã€shorts/charsã€bytes/booleansã€oops(Ordinary Object Pointersï¼ŒOOPs)ï¼Œä»ä»¥ä¸Šé»˜è®¤çš„åˆ†é…ç­–ç•¥ä¸­å¯ä»¥çœ‹åˆ°ï¼Œç›¸åŒå®½åº¦çš„å­—æ®µæ€»æ˜¯è¢«åˆ†é…åˆ°ä¸€èµ·å­˜æ”¾ï¼Œåœ¨æ»¡è¶³è¿™ä¸ªå‰ææ¡ä»¶çš„æƒ…å†µä¸‹ï¼Œåœ¨çˆ¶ç±»ä¸­å®šä¹‰çš„å˜é‡ä¼šå‡ºç°åœ¨å­ç±»ä¹‹å‰ã€‚å¦‚æœ HotSpot è™šæ‹Ÿæœºçš„<code>+XX:CompactFields</code>å‚æ•°å€¼ä¸º true(é»˜è®¤å°±ä¸º true)ï¼Œé‚£å­ç±»ä¹‹ä¸­è¾ƒçª„çš„å˜é‡ä¹Ÿå…è®¸æ’å…¥çˆ¶ç±»å˜é‡çš„ç©ºéš™ä¹‹ä¸­ï¼Œä»¥èŠ‚çœå‡ºä¸€ç‚¹ç‚¹ç©ºé—´ã€‚</p><p>å¯¹è±¡çš„ç¬¬ä¸‰éƒ¨åˆ†æ˜¯å¯¹é½å¡«å……ï¼Œè¿™å¹¶ä¸æ˜¯å¿…ç„¶å­˜åœ¨çš„ï¼Œä¹Ÿæ²¡æœ‰ç‰¹åˆ«çš„å«ä¹‰ï¼Œå®ƒä»…ä»…èµ·ç€å ä½ç¬¦çš„ä½œç”¨ã€‚ç”±äº HotSpot è™šæ‹Ÿæœºçš„è‡ªåŠ¨å†…å­˜ç®¡ç†ç³»ç»Ÿè¦æ±‚å¯¹è±¡èµ·å§‹åœ°å€å¿…é¡»æ˜¯ 8 å­—èŠ‚çš„æ•´æ•°å€ï¼Œæ¢å¥è¯è¯´å°±æ˜¯ä»»ä½•å¯¹è±¡çš„å¤§å°éƒ½å¿…é¡»æ˜¯ 8 å­—èŠ‚çš„æ•´æ•°å€ã€‚å¯¹è±¡å¤´éƒ¨åˆ†å·²ç»è¢«ç²¾å¿ƒè®¾è®¡æˆæ­£å¥½æ˜¯ 8 å­—èŠ‚çš„å€æ•°(1 å€æˆ–è€… 2 å€)ï¼Œå› æ­¤ï¼Œå¦‚æœå¯¹è±¡å®ä¾‹æ•°æ®éƒ¨åˆ†æ²¡æœ‰å¯¹é½çš„è¯ï¼Œå°±éœ€è¦é€šè¿‡å¯¹é½å¡«å……æ¥è¡¥å…¨ã€‚</p><h3 id="å¯¹è±¡çš„è®¿é—®å®šä½"><a class="header-anchor" href="#å¯¹è±¡çš„è®¿é—®å®šä½">#</a>å¯¹è±¡çš„è®¿é—®å®šä½</h3><p>Java ç¨‹åºä¼šé€šè¿‡æ ˆä¸Šçš„ reference æ•°æ®æ¥æ“ä½œå †ä¸Šçš„å…·ä½“å¯¹è±¡ã€‚ä¸»æµçš„è®¿é—®æ–¹å¼ä¸»è¦æœ‰ä½¿ç”¨å¥æŸ„å’Œç›´æ¥æŒ‡é’ˆä¸¤ç§ï¼š</p><ol><li>å¦‚æœä½¿ç”¨å¥æŸ„è®¿é—®çš„è¯ï¼ŒJava å †ä¸­å°†å¯èƒ½ä¼šåˆ’åˆ†å‡ºä¸€å—å†…å­˜æ¥ä½œä¸ºå¥æŸ„æ± ï¼Œreference ä¸­å­˜å‚¨çš„å°±æ˜¯å¯¹è±¡çš„å¥æŸ„åœ°å€ï¼Œè€Œå¥æŸ„ä¸­åŒ…å«äº†å¯¹è±¡å®ä¾‹æ•°æ®ä¸ç±»å‹æ•°æ®å„è‡ªå…·ä½“çš„åœ°å€ä¿¡æ¯ã€‚</li></ol><center><p><img src="//onns.xyz/blog/image/20200823-1.jpg" alt="é€šè¿‡å¥æŸ„è®¿é—®å¯¹è±¡"></p><p>é€šè¿‡å¥æŸ„è®¿é—®å¯¹è±¡</p></center><ol start="2"><li>å¦‚æœä½¿ç”¨ç›´æ¥æŒ‡é’ˆè®¿é—®çš„è¯ï¼ŒJava å †ä¸­å¯¹è±¡çš„å†…å­˜å¸ƒå±€å°±å¿…é¡»è€ƒè™‘å¦‚ä½•æ”¾ç½®è®¿é—®ç±»å‹æ•°æ®çš„ç›¸å…³ä¿¡æ¯ï¼Œreference ä¸­å­˜å‚¨çš„ç›´æ¥å°±æ˜¯å¯¹è±¡åœ°å€ï¼Œå¦‚æœåªæ˜¯è®¿é—®å¯¹è±¡æœ¬èº«çš„è¯ï¼Œå°±ä¸éœ€è¦å¤šä¸€æ¬¡é—´æ¥è®¿é—®çš„å¼€é”€ï¼Œ</li></ol><center><p><img src="//onns.xyz/blog/image/20200823-2.jpg" alt="é€šè¿‡ç›´æ¥æŒ‡é’ˆè®¿é—®å¯¹è±¡"></p><p>é€šè¿‡ç›´æ¥æŒ‡é’ˆè®¿é—®å¯¹è±¡</p></center><p>è¿™ä¸¤ç§å¯¹è±¡è®¿é—®æ–¹å¼å„æœ‰ä¼˜åŠ¿ï¼Œä½¿ç”¨å¥æŸ„æ¥è®¿é—®çš„æœ€å¤§å¥½å¤„å°±æ˜¯ reference ä¸­å­˜å‚¨çš„æ˜¯ç¨³å®šå¥æŸ„åœ°å€ï¼Œåœ¨å¯¹è±¡è¢«ç§»åŠ¨(åƒåœ¾æ”¶é›†æ—¶ç§»åŠ¨å¯¹è±¡æ˜¯éå¸¸æ™®éçš„è¡Œä¸º)æ—¶åªä¼šæ”¹å˜å¥æŸ„ä¸­çš„å®ä¾‹æ•°æ®æŒ‡é’ˆï¼Œè€Œ reference æœ¬èº«ä¸éœ€è¦è¢«ä¿®æ”¹ã€‚</p><p>ä½¿ç”¨ç›´æ¥æŒ‡é’ˆæ¥è®¿é—®æœ€å¤§çš„å¥½å¤„å°±æ˜¯é€Ÿåº¦æ›´å¿«ï¼Œå®ƒèŠ‚çœäº†ä¸€æ¬¡æŒ‡é’ˆå®šä½çš„æ—¶é—´å¼€é”€ï¼Œç”±äºå¯¹è±¡è®¿é—®åœ¨ Java ä¸­éå¸¸é¢‘ç¹ï¼Œå› æ­¤è¿™ç±»å¼€é”€ç§¯å°‘æˆå¤šä¹Ÿæ˜¯ä¸€é¡¹æä¸ºå¯è§‚çš„æ‰§è¡Œæˆæœ¬ï¼Œå°±æœ¬ä¹¦è®¨è®ºçš„ä¸»è¦è™šæ‹Ÿæœº HotSpot è€Œè¨€ï¼Œå®ƒä¸»è¦ä½¿ç”¨ç¬¬äºŒç§æ–¹å¼è¿›è¡Œå¯¹è±¡è®¿é—®ï¼Œä½†ä»æ•´ä¸ªè½¯ä»¶å¼€å‘çš„èŒƒå›´æ¥çœ‹ï¼Œåœ¨å„ç§è¯­è¨€ã€æ¡†æ¶ä¸­ä½¿ç”¨å¥æŸ„æ¥è®¿é—®çš„æƒ…å†µä¹Ÿååˆ†å¸¸è§ã€‚</p><h3 id="java-å †æº¢å‡º"><a class="header-anchor" href="#java-å †æº¢å‡º">#</a>Java å †æº¢å‡º</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> xyz.onns.jvm;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OOMTest</span> </span>&#123;</span><br><span class="line">    Byte[] bytes = <span class="keyword">new</span> Byte[<span class="number">1024</span> * <span class="number">1024</span>];</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ArrayList&lt;OOMTest&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">                list.add(<span class="keyword">new</span> OOMTest());</span><br><span class="line">                count++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            System.out.println(<span class="string">"count"</span> + count);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">/Library/Java/JavaVirtualMachines/jdk-13.0.2.jdk/Contents/Home/bin/java -Xms1m -Xmx8m -XX:+HeapDumpOnOutOfMemoryError -javaagent:/Applications/IntelliJ IDEA.app/Contents/lib/idea_rt.jar=58766:/Applications/IntelliJ IDEA.app/Contents/bin -Dfile.encoding=UTF-8 -classpath /Users/onns/Documents/code/java/study/out/production/study xyz.onns.jvm.OOMTest</span><br><span class="line">java.lang.OutOfMemoryError: Java heap space</span><br><span class="line">Dumping heap to java_pid86774.hprof ...</span><br><span class="line">Heap dump file created [11811120 bytes <span class="keyword">in</span> 0.171 secs]</span><br><span class="line">Exception <span class="keyword">in</span> thread <span class="string">"Monitor Ctrl-Break"</span> Exception <span class="keyword">in</span> thread <span class="string">"main"</span> java.lang.OutOfMemoryError: Java heap space</span><br><span class="line">at java.base/java.lang.invoke.MethodHandles<span class="variable">$Lookup</span>.resolveOrFail(MethodHandles.java:2046)</span><br><span class="line">at java.base/java.lang.invoke.MethodHandles<span class="variable">$Lookup</span>.findVarHandle(MethodHandles.java:1526)</span><br><span class="line">at java.base/java.util.concurrent.ConcurrentSkipListMap.&lt;clinit&gt;(ConcurrentSkipListMap.java:3405)</span><br><span class="line">at java.base/java.util.concurrent.ConcurrentSkipListSet.&lt;init&gt;(ConcurrentSkipListSet.java:113)</span><br><span class="line">at java.base/java.net.InetAddress.&lt;clinit&gt;(InetAddress.java:773)</span><br><span class="line">at java.base/java.net.InetSocketAddress.&lt;init&gt;(InetSocketAddress.java:220)</span><br><span class="line">at java.base/java.net.Socket.&lt;init&gt;(Socket.java:249)</span><br><span class="line">at com.intellij.rt.execution.application.AppMainV2<span class="variable">$1</span>.run(AppMainV2.java:56)</span><br><span class="line">java.lang.OutOfMemoryError: Java heap space</span><br><span class="line"></span><br><span class="line">Process finished with <span class="built_in">exit</span> code 1</span><br></pre></td></tr></table></figure><p>IDE æ˜¯<code>IntelliJ IDEA</code>ã€‚</p><p>ç›¸å…³å‚æ•°ï¼š</p><center><p><img src="//onns.xyz/blog/image/20200823-3.jpg" alt="IDEAå‚æ•°"></p><p>IDEA å‚æ•°</p></center><p><code>-Xms1m</code>ï¼šJVM åˆå§‹åˆ†é…çš„å†…å­˜ç”±<code>-Xms</code>æŒ‡å®šï¼Œé»˜è®¤æ˜¯ç‰©ç†å†…å­˜çš„<code>1/64</code>ã€‚<br><code>-Xmx8m</code>ï¼šJVM æœ€å¤§åˆ†é…çš„å†…å­˜ç”±<code>-Xmx</code>æŒ‡å®šï¼Œé»˜è®¤æ˜¯ç‰©ç†å†…å­˜çš„<code>1/4</code>ã€‚<br><code>-XX:+HeapDumpOnOutOfMemoryError</code>ï¼šè®©è™šæ‹Ÿæœºåœ¨å‡ºç°å†…å­˜æº¢å‡ºå¼‚å¸¸çš„æ—¶å€™ Dump å‡ºå½“å‰çš„å†…å­˜å †è½¬å‚¨å¿«ç…§ä»¥ä¾¿è¿›è¡Œäº‹ååˆ†æã€‚</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>æ˜¾ç„¶ï¼Œæœ¬æœºç›´æ¥å†…å­˜çš„åˆ†é…ä¸ä¼šå—åˆ° Java å †å¤§å°çš„é™åˆ¶ï¼Œä½†æ˜¯ï¼Œæ—¢ç„¶æ˜¯å†…å­˜ï¼Œåˆ™è‚¯å®šè¿˜æ˜¯ä¼šå—åˆ°æœ¬æœºæ€»å†…å­˜(åŒ…æ‹¬ç‰©ç†å†…å­˜ã€SWAP åˆ†åŒºæˆ–è€…åˆ†é¡µæ–‡ä»¶)å¤§å°ä»¥åŠå¤„ç†å™¨å¯»å€ç©ºé—´çš„é™åˆ¶ï¼Œä¸€èˆ¬æœåŠ¡å™¨ç®¡ç†å‘˜é…ç½®è™šæ‹Ÿæœºå‚æ•°æ—¶ï¼Œä¼šæ ¹æ®å®é™…å†…å­˜å»è®¾ç½®<code>-Xmx</code>ç­‰å‚æ•°ä¿¡æ¯ï¼Œä½†ç»å¸¸å¿½ç•¥æ‰ç›´æ¥å†…å­˜ï¼Œä½¿å¾—å„ä¸ªå†…å­˜åŒºåŸŸæ€»å’Œå¤§äºç‰©ç†å†…å­˜é™åˆ¶(åŒ…æ‹¬ç‰©ç†çš„å’Œæ“ä½œç³»ç»Ÿçº§çš„é™åˆ¶)ï¼Œä»è€Œå¯¼è‡´åŠ¨æ€æ‰©å±•æ—¶å‡ºç° OutOfMemoryError å¼‚å¸¸ã€‚ <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> jvm </tag>
            
            <tag> jvm note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxå®‰è£…Nodejs</title>
      <link href="/blog/2020/08/22/nodejs-in-linux/"/>
      <url>/blog/2020/08/22/nodejs-in-linux/</url>
      
        <content type="html"><![CDATA[<p><code>MacOS</code>æ–°ç‰ˆæœ¬è¿æ¥ SSH åä¼šæŠ¥å¦‚ä¸‹é”™è¯¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-bash: warning: setlocale: LC_CTYPE: cannot change locale (UTF-8): No such file or directory</span><br></pre></td></tr></table></figure><p>è™½ç„¶æ¯æ¬¡ç™¾åº¦éƒ½ç™¾åº¦å¾—åˆ°ï¼Œä½†æ˜¯å·²ç»ç¬¬äºŒæ¬¡é‡è§äº†ï¼Œåé¢æ— æ•°æ¬¡é…ç½®æœåŠ¡å™¨å¯èƒ½è¿˜ä¼šé‡è§ï¼Œè®°å½•ä¸‹å­ã€‚</p><a id="more"></a><h2 id="è§£å†³-â€œ-bash-warningâ€"><a class="header-anchor" href="#è§£å†³-â€œ-bash-warningâ€">#</a>è§£å†³ â€œ-bash: warningâ€</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ cat /etc/locale.conf</span><br><span class="line">LANG=en_US.UTF-8</span><br><span class="line">$ vi /etc/locale.conf</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ä¸ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">LC_ALL=en_US.UTF-8</span><br><span class="line">LC_CTYPE=en_US.UTF-8</span><br><span class="line">LANG=en_US.UTF-8</span><br></pre></td></tr></table></figure><p>æ”¶å·¥ã€‚</p><h2 id="å®‰è£…-nodejs"><a class="header-anchor" href="#å®‰è£…-nodejs">#</a>å®‰è£… Nodejs</h2><ol><li>æŸ¥çœ‹ç³»ç»Ÿæ¶æ„ï¼Œæœ€åä¸€è¡Œæ˜¾ç¤ºæ˜¯<code>x86-64</code><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ hostnamectl</span><br><span class="line">   Static hostname: iZbp1hm7xn587qhxan003bZ</span><br><span class="line">         Icon name: computer-vm</span><br><span class="line">           Chassis: vm</span><br><span class="line">        Machine ID: 20190711105006363114529432776998</span><br><span class="line">           Boot ID: c753a670761d4b6e9c3557a03056de8e</span><br><span class="line">    Virtualization: kvm</span><br><span class="line">  Operating System: CentOS Linux 7 (Core)</span><br><span class="line">       CPE OS Name: cpe:/o:centos:centos:7</span><br><span class="line">            Kernel: Linux 3.10.0-957.21.3.el7.x86_64</span><br><span class="line">      Architecture: x86-64</span><br></pre></td></tr></table></figure></li><li>æ‰“å¼€å®˜ç½‘ï¼š<a href="https://nodejs.org/en/download/" target="_blank" rel="noopener">https://nodejs.org/en/download/</a></li><li>é€‰æ‹©å»¶é•¿æ”¯æŒç‰ˆæœ¬ LTSï¼Œé€‰æ‹©ç‰ˆæœ¬<code>Linux Binaries (x64)</code>ï¼Œå¤åˆ¶ä¸‹è½½åœ°å€ï¼š<a href="https://nodejs.org/dist/v12.18.3/node-v12.18.3-linux-x64.tar.xz" target="_blank" rel="noopener">https://nodejs.org/dist/v12.18.3/node-v12.18.3-linux-x64.tar.xz</a></li><li>å›åˆ°æœåŠ¡å™¨ï¼Œä¸‹è½½ä»£ç <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://nodejs.org/dist/v12.18.3/node-v12.18.3-linux-x64.tar.xz</span><br></pre></td></tr></table></figure></li><li>è§£å‹<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xz -d node-v12.18.3-linux-x64.tar.xz</span><br><span class="line">tar -xvf node-v12.18.3-linux-x64.tar</span><br></pre></td></tr></table></figure></li><li>è½¯é“¾æ¥åˆ°æ‰§è¡Œç›®å½•ä¸­<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ ls</span><br><span class="line">node-v12.18.3-linux-x64  node-v12.18.3-linux-x64.tar</span><br><span class="line">$ ln -s ~/node-v12.18.3-linux-x64/bin/node /usr/bin/node</span><br><span class="line">$ ln -s ~/node-v12.18.3-linux-x64/bin/npm /usr/bin/npm</span><br><span class="line">$ ln -s ~/node-v12.18.3-linux-x64/bin/npx /usr/bin/npx</span><br></pre></td></tr></table></figure></li></ol><h2 id="å‚è€ƒé“¾æ¥"><a class="header-anchor" href="#å‚è€ƒé“¾æ¥">#</a>å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://blog.csdn.net/maxmao1024/article/details/84401372" target="_blank" rel="noopener">-bash: warning: setlocale: LC_CTYPE: cannot change locale (UTF-8): No such file or directory</a></li><li><a href="https://www.jianshu.com/p/657d58a149d0" target="_blank" rel="noopener">CentOS7 å®‰è£… NodeJS</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> work </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> centos </tag>
            
            <tag> mac </tag>
            
            <tag> ssh </tag>
            
            <tag> nodejs </tag>
            
            <tag> xz </tag>
            
            <tag> hostnamectl </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºï¼ˆä¸€ï¼‰</title>
      <link href="/blog/2020/08/22/jvm-note-1/"/>
      <url>/blog/2020/08/22/jvm-note-1/</url>
      
        <content type="html"><![CDATA[<p>æ·±å…¥ç†è§£ Java è™šæ‹Ÿæœºï¼šJVM é«˜çº§ç‰¹æ€§ä¸æœ€ä½³å®è·µï¼ˆç¬¬ 3 ç‰ˆï¼‰</p><h1 id="è‡ªåŠ¨å†…å­˜ç®¡ç†"><a class="header-anchor" href="#è‡ªåŠ¨å†…å­˜ç®¡ç†">#</a>è‡ªåŠ¨å†…å­˜ç®¡ç†</h1><h2 id="javaå†…å­˜åŒºåŸŸä¸å†…å­˜æº¢å‡ºå¼‚å¸¸"><a class="header-anchor" href="#javaå†…å­˜åŒºåŸŸä¸å†…å­˜æº¢å‡ºå¼‚å¸¸">#</a>Javaå†…å­˜åŒºåŸŸä¸å†…å­˜æº¢å‡ºå¼‚å¸¸</h2><center><p><img src="//onns.xyz/blog/image/20200822-1.jpg" alt="Javaè™šæ‹Ÿæœºè¿è¡Œæ—¶æ•°æ®åŒº"></p><p>Java è™šæ‹Ÿæœºè¿è¡Œæ—¶æ•°æ®åŒº</p></center><a id="more"></a><h3 id="ç¨‹åºè®¡æ•°å™¨"><a class="header-anchor" href="#ç¨‹åºè®¡æ•°å™¨">#</a>ç¨‹åºè®¡æ•°å™¨</h3><p><code>ç¨‹åºè®¡æ•°å™¨</code>(Program Counter Register)æ˜¯ä¸€å—è¾ƒå°çš„å†…å­˜ç©ºé—´ï¼Œå®ƒå¯ä»¥çœ‹ä½œæ˜¯å½“å‰çº¿ç¨‹æ‰€æ‰§è¡Œçš„å­—èŠ‚ç çš„è¡Œå·æŒ‡ç¤ºå™¨ã€‚</p><p>å­—èŠ‚ç è§£é‡Šå™¨å·¥ä½œæ—¶å°±æ˜¯é€šè¿‡æ”¹å˜è¿™ä¸ª<code>è®¡æ•°å™¨</code>çš„å€¼æ¥é€‰å–ä¸‹ä¸€æ¡éœ€è¦æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤ï¼Œå®ƒæ˜¯ç¨‹åºæ§åˆ¶æµçš„æŒ‡ç¤ºå™¨ï¼Œåˆ†æ”¯ã€å¾ªç¯ã€è·³è½¬ã€å¼‚å¸¸å¤„ç†ã€çº¿ç¨‹æ¢å¤ç­‰åŸºç¡€åŠŸèƒ½éƒ½éœ€è¦ä¾èµ–è¿™ä¸ªè®¡æ•°å™¨æ¥å®Œæˆã€‚</p><p>ä¸ºäº†çº¿ç¨‹åˆ‡æ¢åèƒ½æ¢å¤åˆ°æ­£ç¡®çš„æ‰§è¡Œä½ç½®ï¼Œæ¯æ¡çº¿ç¨‹éƒ½éœ€è¦æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ç¨‹åºè®¡æ•°å™¨ï¼Œå„æ¡çº¿ç¨‹ä¹‹é—´è®¡æ•°å™¨äº’ä¸å½±å“ï¼Œç‹¬ç«‹å­˜å‚¨ï¼Œæˆ‘ä»¬ç§°è¿™ç±»å†…å­˜åŒºåŸŸä¸ºâ€œçº¿ç¨‹ç§æœ‰â€çš„å†…å­˜ã€‚</p><p>å¦‚æœçº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„æ˜¯ä¸€ä¸ª Java æ–¹æ³•ï¼Œè¿™ä¸ªè®¡æ•°å™¨è®°å½•çš„æ˜¯æ­£åœ¨æ‰§è¡Œçš„è™šæ‹Ÿæœºå­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ï¼›å¦‚æœæ­£åœ¨æ‰§è¡Œçš„æ˜¯æœ¬åœ°(Native)æ–¹æ³•ï¼Œè¿™ä¸ªè®¡æ•°å™¨å€¼åˆ™åº”ä¸ºç©º(Undefined)ã€‚æ­¤å†…å­˜åŒºåŸŸæ˜¯å”¯ä¸€ä¸€ä¸ªåœ¨ã€ŠJava è™šæ‹Ÿæœºè§„èŒƒã€‹ä¸­æ²¡æœ‰è§„å®šä»»ä½•<code>OutOfMemoryError</code>æƒ…å†µçš„åŒºåŸŸã€‚</p><h3 id="java-è™šæ‹Ÿæœºæ ˆ"><a class="header-anchor" href="#java-è™šæ‹Ÿæœºæ ˆ">#</a>Java è™šæ‹Ÿæœºæ ˆ</h3><p><code>Javaè™šæ‹Ÿæœºæ ˆ</code>(Java Virtual Machine Stack)ä¹Ÿæ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸çº¿ç¨‹ç›¸åŒã€‚</p><p>è™šæ‹Ÿæœºæ ˆæè¿°çš„æ˜¯ Java æ–¹æ³•æ‰§è¡Œçš„çº¿ç¨‹å†…å­˜æ¨¡å‹:æ¯ä¸ªæ–¹æ³•è¢«æ‰§è¡Œçš„æ—¶å€™ï¼ŒJava è™šæ‹Ÿæœºéƒ½ä¼šåŒæ­¥åˆ›å»ºä¸€ä¸ª<code>æ ˆå¸§</code>(Stack Frame)ç”¨äºå­˜å‚¨å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€è¿æ¥ã€æ–¹æ³•å‡ºå£ç­‰ä¿¡æ¯ã€‚æ¯ä¸€ä¸ªæ–¹æ³•è¢«è°ƒç”¨ç›´è‡³æ‰§è¡Œå®Œæ¯•çš„è¿‡ç¨‹ï¼Œå°±å¯¹åº”ç€ä¸€ä¸ªæ ˆå¸§åœ¨è™šæ‹Ÿæœºæ ˆä¸­ä»å…¥æ ˆåˆ°å‡ºæ ˆçš„è¿‡ç¨‹ã€‚</p><center><table><thead><tr><th style="text-align:center">æ ˆå¸§</th></tr></thead><tbody><tr><td style="text-align:center">å±€éƒ¨å˜é‡è¡¨</td></tr><tr><td style="text-align:center">æ“ä½œæ•°æ ˆ</td></tr><tr><td style="text-align:center">åŠ¨æ€è¿æ¥</td></tr><tr><td style="text-align:center">æ–¹æ³•å‡ºå£</td></tr></tbody></table></center><p>å±€éƒ¨å˜é‡è¡¨å­˜æ”¾äº†ç¼–è¯‘æœŸå¯çŸ¥çš„å„ç§ Java è™šæ‹ŸæœºåŸºæœ¬æ•°æ®ç±»å‹(booleanã€byteã€charã€shortã€intã€floatã€longã€double)ã€å¯¹è±¡å¼•ç”¨(reference ç±»å‹ï¼Œå®ƒå¹¶ä¸ç­‰åŒäºå¯¹è±¡æœ¬èº«ï¼Œå¯èƒ½æ˜¯ä¸€ä¸ªæŒ‡å‘å¯¹è±¡èµ·å§‹åœ°å€çš„å¼•ç”¨æŒ‡é’ˆï¼Œä¹Ÿå¯èƒ½æ˜¯æŒ‡å‘ä¸€ä¸ªä»£è¡¨å¯¹è±¡çš„å¥æŸ„æˆ–è€…å…¶ä»–ä¸æ­¤å¯¹è±¡ç›¸å…³çš„ä½ç½®)å’Œ returnAddress ç±»å‹(æŒ‡å‘äº†ä¸€æ¡å­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€)ã€‚</p><p>è¿™äº›æ•°æ®ç±»å‹åœ¨å±€éƒ¨å˜é‡è¡¨ä¸­çš„å­˜å‚¨ç©ºé—´ä»¥å±€éƒ¨<code>å˜é‡æ§½</code>(Slot)æ¥è¡¨ç¤ºï¼Œå…¶ä¸­ 64 ä½é•¿åº¦çš„ long å’Œ double ç±»å‹çš„æ•°æ®ä¼šå ç”¨ä¸¤ä¸ªå˜é‡æ§½ï¼Œå…¶ä½™çš„æ•°æ®ç±»å‹åªå ç”¨ä¸€ä¸ªã€‚</p><p>å±€éƒ¨å˜é‡è¡¨æ‰€éœ€çš„å†…å­˜ç©ºé—´<code>åœ¨ç¼–è¯‘æœŸé—´</code>å®Œæˆåˆ†é…ï¼Œå½“è¿›å…¥ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•éœ€è¦åœ¨æ ˆå¸§ä¸­åˆ†é…å¤šå¤§çš„å±€éƒ¨å˜é‡ç©ºé—´æ˜¯<code>å®Œå…¨ç¡®å®šçš„</code>ï¼Œåœ¨æ–¹æ³•è¿è¡ŒæœŸé—´ä¸ä¼šæ”¹å˜å±€éƒ¨å˜é‡è¡¨çš„å¤§å°ã€‚</p><p>å¦‚æœçº¿ç¨‹è¯·æ±‚çš„æ ˆæ·±åº¦å¤§äºè™šæ‹Ÿæœºæ‰€å…è®¸çš„æ·±åº¦ï¼Œå°†æŠ›å‡º<code>StackOverflowError</code>å¼‚å¸¸ï¼›å¦‚æœ Java è™šæ‹Ÿæœºæ ˆå®¹é‡å¯ä»¥åŠ¨æ€æ‰©å±•<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>ï¼Œå½“æ ˆæ‰©å±•æ—¶æ— æ³•ç”³è¯·åˆ°è¶³å¤Ÿçš„å†…å­˜ä¼šæŠ›å‡º<code>OutOfMemoryError</code>å¼‚å¸¸ã€‚</p><h3 id="æœ¬åœ°æ–¹æ³•æ ˆ"><a class="header-anchor" href="#æœ¬åœ°æ–¹æ³•æ ˆ">#</a>æœ¬åœ°æ–¹æ³•æ ˆ</h3><p><code>æœ¬åœ°æ–¹æ³•æ ˆ</code>(Native Method Stacks)ä¸è™šæ‹Ÿæœºæ ˆæ‰€å‘æŒ¥çš„ä½œç”¨æ˜¯éå¸¸ç›¸ä¼¼çš„ï¼Œå…¶åŒºåˆ«åªæ˜¯è™šæ‹Ÿæœºæ ˆä¸ºè™šæ‹Ÿæœºæ‰§è¡ŒJavaæ–¹æ³•(ä¹Ÿå°±æ˜¯å­—èŠ‚ç )æœåŠ¡ï¼Œè€Œæœ¬åœ°æ–¹æ³•æ ˆåˆ™æ˜¯ä¸ºè™šæ‹Ÿæœºä½¿ç”¨åˆ°çš„æœ¬åœ°(Native)æ–¹æ³•æœåŠ¡ã€‚</p><p>æœ¬åœ°æ–¹æ³•æ ˆä¼šåœ¨æ ˆæ·±åº¦æº¢å‡ºæˆ–è€…æ ˆæ‰©å±•å¤±è´¥æ—¶åˆ†åˆ«æŠ› StackOverflowError å’Œ OutOfMemoryError å¼‚å¸¸ã€‚</p><ul><li><a href="//onns.xyz/blog/files/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3Java%E8%99%9A%E6%8B%9F%E6%9C%BA%EF%BC%9AJVM%E9%AB%98%E7%BA%A7%E7%89%B9%E6%80%A7%E4%B8%8E%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5%EF%BC%88%E7%AC%AC3%E7%89%88%EF%BC%89.pdf">ä¼ é€é—¨</a></li></ul><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>HotSpot è™šæ‹Ÿæœºçš„æ ˆå®¹é‡æ˜¯ä¸å¯ä»¥åŠ¨æ€æ‰©å±•çš„ï¼Œæ‰€ä»¥åœ¨ HotSpot è™šæ‹Ÿæœºä¸Šæ˜¯ä¸ä¼šç”±äºè™šæ‹Ÿæœºæ ˆæ— æ³•æ‰©å±•è€Œå¯¼è‡´ OutOfMemoryError å¼‚å¸¸â€”â€”åªè¦çº¿ç¨‹ç”³è¯·æ ˆç©ºé—´æˆåŠŸäº†å°±ä¸ä¼šæœ‰ OOMï¼Œä½†æ˜¯å¦‚æœç”³è¯·æ—¶å°±å¤±è´¥ï¼Œä»ç„¶æ˜¯ä¼šå‡ºç° OOM å¼‚å¸¸çš„ã€‚ <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> jvm </tag>
            
            <tag> jvm note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ipè®¿é—®è®°å½•æŸ¥è¯¢top3</title>
      <link href="/blog/2020/08/21/ip-records-top-3/"/>
      <url>/blog/2020/08/21/ip-records-top-3/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a class="header-anchor" href="#å‰è¨€">#</a>å‰è¨€</h2><p>æ˜¨æ™š 4399 ç¬”è¯•ï¼š</p><blockquote><p>æœ‰ä¸€ä¸ªæ–‡ä»¶ ip.txtï¼Œæ¯è¡Œä¸€æ¡ ip è®°å½•ï¼Œå…±è‹¥å¹²è¡Œï¼Œå¦‚ä½•ç»Ÿè®¡å‡ºç°æ¬¡æ•°æœ€å¤šçš„å‰ 3 ä¸ª ip åŠå…¶æ¬¡æ•°ï¼Ÿ</p></blockquote><p>è¢«é—®æ‡µäº†ï¼Œè®°å½•ä¸‹ï¼Œå­¦ä¹ ä¹‹ã€‚</p><a id="more"></a><h2 id="ç”Ÿæˆæµ‹è¯•æ•°æ®"><a class="header-anchor" href="#ç”Ÿæˆæµ‹è¯•æ•°æ®">#</a>ç”Ÿæˆæµ‹è¯•æ•°æ®</h2><p>é¦–å…ˆç”¨ Python æ¥ç”Ÿæˆä¸€ä¸‹æµ‹è¯•æ•°æ®ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10000</span>):</span><br><span class="line">n = <span class="number">4</span></span><br><span class="line"><span class="keyword">if</span> i % <span class="number">1000</span> == <span class="number">0</span>:</span><br><span class="line">n = <span class="number">20</span></span><br><span class="line">a = random.randint(<span class="number">1</span>, <span class="number">255</span>)</span><br><span class="line">b = random.randint(<span class="number">0</span>, <span class="number">255</span>)</span><br><span class="line">c = random.randint(<span class="number">0</span>, <span class="number">255</span>)</span><br><span class="line">d = random.randint(<span class="number">0</span>, <span class="number">255</span>)</span><br><span class="line"><span class="keyword">for</span> j <span class="keyword">in</span> range(random.randint(<span class="number">1</span>, n)):</span><br><span class="line">print(str(a)+<span class="string">"."</span>+str(b)+<span class="string">"."</span>+str(c)+<span class="string">"."</span>+str(d))</span><br></pre></td></tr></table></figure><p>ç„¶åæŠŠæ•°æ®ä¿å­˜è¿›<code>ip.txt</code>æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python generate_ip.py &gt;&gt; ip.txt</span><br></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹åŸºæœ¬ä¿¡æ¯"><a class="header-anchor" href="#æŸ¥çœ‹åŸºæœ¬ä¿¡æ¯">#</a>æŸ¥çœ‹åŸºæœ¬ä¿¡æ¯</h2><p>è·å–å‰äº”è¡Œçš„ä¿¡æ¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ head ip.txt -n 5</span><br><span class="line">34.150.120.118</span><br><span class="line">34.150.120.118</span><br><span class="line">34.150.120.118</span><br><span class="line">34.150.120.118</span><br><span class="line">34.150.120.118</span><br></pre></td></tr></table></figure><p>è·å–æœ€åäº”è¡Œçš„ä¿¡æ¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ tail ip.txt -n 5</span><br><span class="line">145.250.127.90</span><br><span class="line">145.250.127.90</span><br><span class="line">145.250.127.90</span><br><span class="line">47.14.104.50</span><br><span class="line">10.100.11.223</span><br></pre></td></tr></table></figure><p>ä¸€å…±æœ‰å¤šå°‘è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ wc -l ip.txt</span><br><span class="line">25282 ip.txt</span><br></pre></td></tr></table></figure><h2 id="ip-è®°å½•-top3"><a class="header-anchor" href="#ip-è®°å½•-top3">#</a>ip è®°å½• top3</h2><h3 id="æ’åº"><a class="header-anchor" href="#æ’åº">#</a>æ’åº</h3><p>ç»Ÿè®¡æ–¹æ³•<code>uniq</code>åªèƒ½å¯¹è¿ç»­çš„ç›¸åŒè¡Œç”Ÿæ•ˆï¼Œä¸€èˆ¬ä½¿ç”¨ä¹‹å‰éƒ½éœ€è¦å…ˆæ’åºï¼Œç”¨<code>sort</code>å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort ip.txt</span><br></pre></td></tr></table></figure><p>ä¼šå…¨éƒ½æ‰“å°åˆ°æ ‡å‡†è¾“å‡ºæµé‡Œï¼Œçœ‹çœ‹æœ€å 10 è¡Œå°±å¥½å•¦ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ sort ip.txt | tail -n 10</span><br><span class="line">99.91.60.161</span><br><span class="line">99.91.60.161</span><br><span class="line">99.91.60.161</span><br><span class="line">99.91.60.161</span><br><span class="line">99.93.105.24</span><br><span class="line">99.96.209.20</span><br><span class="line">99.96.209.20</span><br><span class="line">99.96.209.20</span><br><span class="line">99.96.209.20</span><br><span class="line">99.98.96.57</span><br></pre></td></tr></table></figure><p>æ’åºæ²¡é—®é¢˜ã€‚</p><h3 id="ç»Ÿè®¡ä¸ªæ•°"><a class="header-anchor" href="#ç»Ÿè®¡ä¸ªæ•°">#</a>ç»Ÿè®¡ä¸ªæ•°</h3><p>æŠŠæ’åºçš„è¾“å‡ºä½œä¸º<code>uniq</code>çš„è¾“å…¥ï¼Œ<code>uniq</code>çš„ç”¨æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">$ uniq --<span class="built_in">help</span></span><br><span class="line">Usage: uniq [OPTION]... [INPUT [OUTPUT]]</span><br><span class="line">Filter adjacent matching lines from INPUT (or standard input),</span><br><span class="line">writing to OUTPUT (or standard output).</span><br><span class="line"></span><br><span class="line">With no options, matching lines are merged to the first occurrence.</span><br><span class="line"></span><br><span class="line">Mandatory arguments to long options are mandatory <span class="keyword">for</span> short options too.</span><br><span class="line">  -c, --count           prefix lines by the number of occurrences</span><br><span class="line">  -d, --repeated        only <span class="built_in">print</span> duplicate lines, one <span class="keyword">for</span> each group</span><br><span class="line">  -D, --all-repeated[=METHOD]  <span class="built_in">print</span> all duplicate lines</span><br><span class="line">                          groups can be delimited with an empty line</span><br><span class="line">                          METHOD=&#123;none(default),prepend,separate&#125;</span><br><span class="line">  -f, --skip-fields=N   avoid comparing the first N fields</span><br><span class="line">      --group[=METHOD]  show all items, separating groups with an empty line</span><br><span class="line">                          METHOD=&#123;separate(default),prepend,append,both&#125;</span><br><span class="line">  -i, --ignore-case     ignore differences <span class="keyword">in</span> <span class="keyword">case</span> when comparing</span><br><span class="line">  -s, --skip-chars=N    avoid comparing the first N characters</span><br><span class="line">  -u, --unique          only <span class="built_in">print</span> unique lines</span><br><span class="line">  -z, --zero-terminated  end lines with 0 byte, not newline</span><br><span class="line">  -w, --check-chars=N   compare no more than N characters <span class="keyword">in</span> lines</span><br><span class="line">      --<span class="built_in">help</span>     display this <span class="built_in">help</span> and <span class="built_in">exit</span></span><br><span class="line">      --version  output version information and <span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line">A field is a run of blanks (usually spaces and/or TABs), <span class="keyword">then</span> non-blank</span><br><span class="line">characters.  Fields are skipped before chars.</span><br><span class="line"></span><br><span class="line">Note: <span class="string">'uniq'</span> does not detect repeated lines unless they are adjacent.</span><br><span class="line">You may want to sort the input first, or use <span class="string">'sort -u'</span> without <span class="string">'uniq'</span>.</span><br><span class="line">Also, comparisons honor the rules specified by <span class="string">'LC_COLLATE'</span>.</span><br><span class="line"></span><br><span class="line">GNU coreutils online <span class="built_in">help</span>: &lt;http://www.gnu.org/software/coreutils/&gt;</span><br><span class="line">For complete documentation, run: info coreutils <span class="string">'uniq invocation'</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ç”¨<code>-c</code>å‚æ•°å³å¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort ip.txt | uniq -c</span><br></pre></td></tr></table></figure><p>ç„¶åæˆ‘ä»¬å°±å¾—åˆ°äº†æ¯ä¸ª ip åŠå…¶å‡ºç°æ¬¡æ•°ã€‚</p><h3 id="å†æ’åº"><a class="header-anchor" href="#å†æ’åº">#</a>å†æ’åº</h3><p>è¿™æ¬¡éœ€è¦æŒ‰ç…§æ¬¡æ•°æ’åºè€Œä¸æ˜¯å­—å…¸åºæ’åºäº†ï¼Œå…ˆçœ‹<code>sort</code>çš„å‚æ•°ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">$ sort --<span class="built_in">help</span></span><br><span class="line">Usage: sort [OPTION]... [FILE]...</span><br><span class="line">  or:  sort [OPTION]... --files0-from=F</span><br><span class="line">Write sorted concatenation of all FILE(s) to standard output.</span><br><span class="line"></span><br><span class="line">Mandatory arguments to long options are mandatory <span class="keyword">for</span> short options too.</span><br><span class="line">Ordering options:</span><br><span class="line"></span><br><span class="line">  -b, --ignore-leading-blanks  ignore leading blanks</span><br><span class="line">  -d, --dictionary-order      consider only blanks and alphanumeric characters</span><br><span class="line">  -f, --ignore-case           fold lower <span class="keyword">case</span> to upper <span class="keyword">case</span> characters</span><br><span class="line">  -g, --general-numeric-sort  compare according to general numerical value</span><br><span class="line">  -i, --ignore-nonprinting    consider only printable characters</span><br><span class="line">  -M, --month-sort            compare (unknown) &lt; <span class="string">'JAN'</span> &lt; ... &lt; <span class="string">'DEC'</span></span><br><span class="line">  -h, --human-numeric-sort    compare human readable numbers (e.g., 2K 1G)</span><br><span class="line">  -n, --numeric-sort          compare according to string numerical value</span><br><span class="line">  -R, --random-sort           sort by random <span class="built_in">hash</span> of keys</span><br><span class="line">      --random-source=FILE    get random bytes from FILE</span><br><span class="line">  -r, --reverse               reverse the result of comparisons</span><br><span class="line">      --sort=WORD             sort according to WORD:</span><br><span class="line">                                general-numeric -g, human-numeric -h, month -M,</span><br><span class="line">                                numeric -n, random -R, version -V</span><br><span class="line">  -V, --version-sort          natural sort of (version) numbers within text</span><br><span class="line"></span><br><span class="line">Other options:</span><br><span class="line"></span><br><span class="line">      --batch-size=NMERGE   merge at most NMERGE inputs at once;</span><br><span class="line">                            <span class="keyword">for</span> more use temp files</span><br><span class="line">  -c, --check, --check=diagnose-first  check <span class="keyword">for</span> sorted input; <span class="keyword">do</span> not sort</span><br><span class="line">  -C, --check=quiet, --check=silent  like -c, but <span class="keyword">do</span> not report first bad line</span><br><span class="line">      --compress-program=PROG  compress temporaries with PROG;</span><br><span class="line">                              decompress them with PROG -d</span><br><span class="line">      --debug               annotate the part of the line used to sort,</span><br><span class="line">                              and warn about questionable usage to stderr</span><br><span class="line">      --files0-from=F       <span class="built_in">read</span> input from the files specified by</span><br><span class="line">                            NUL-terminated names <span class="keyword">in</span> file F;</span><br><span class="line">                            If F is - <span class="keyword">then</span> <span class="built_in">read</span> names from standard input</span><br><span class="line">  -k, --key=KEYDEF          sort via a key; KEYDEF gives location and <span class="built_in">type</span></span><br><span class="line">  -m, --merge               merge already sorted files; <span class="keyword">do</span> not sort</span><br><span class="line">  -o, --output=FILE         write result to FILE instead of standard output</span><br><span class="line">  -s, --stable              stabilize sort by disabling last-resort comparison</span><br><span class="line">  -S, --buffer-size=SIZE    use SIZE <span class="keyword">for</span> main memory buffer</span><br><span class="line">  -t, --field-separator=SEP  use SEP instead of non-blank to blank transition</span><br><span class="line">  -T, --temporary-directory=DIR  use DIR <span class="keyword">for</span> temporaries, not <span class="variable">$TMPDIR</span> or /tmp;</span><br><span class="line">                              multiple options specify multiple directories</span><br><span class="line">      --parallel=N          change the number of sorts run concurrently to N</span><br><span class="line">  -u, --unique              with -c, check <span class="keyword">for</span> strict ordering;</span><br><span class="line">                              without -c, output only the first of an equal run</span><br><span class="line">  -z, --zero-terminated     end lines with 0 byte, not newline</span><br><span class="line">      --<span class="built_in">help</span>     display this <span class="built_in">help</span> and <span class="built_in">exit</span></span><br><span class="line">      --version  output version information and <span class="built_in">exit</span></span><br><span class="line"></span><br><span class="line">KEYDEF is F[.C][OPTS][,F[.C][OPTS]] <span class="keyword">for</span> start and stop position, <span class="built_in">where</span> F is a</span><br><span class="line">field number and C a character position <span class="keyword">in</span> the field; both are origin 1, and</span><br><span class="line">the stop position defaults to the line<span class="string">'s end.  If neither -t nor -b is in</span></span><br><span class="line"><span class="string">effect, characters in a field are counted from the beginning of the preceding</span></span><br><span class="line"><span class="string">whitespace.  OPTS is one or more single-letter ordering options [bdfgiMhnRrV],</span></span><br><span class="line"><span class="string">which override global ordering options for that key.  If no key is given, use</span></span><br><span class="line"><span class="string">the entire line as the key.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">SIZE may be followed by the following multiplicative suffixes:</span></span><br><span class="line"><span class="string">% 1% of memory, b 1, K 1024 (default), and so on for M, G, T, P, E, Z, Y.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">With no FILE, or when FILE is -, read standard input.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">*** WARNING ***</span></span><br><span class="line"><span class="string">The locale specified by the environment affects sort order.</span></span><br><span class="line"><span class="string">Set LC_ALL=C to get the traditional sort order that uses</span></span><br><span class="line"><span class="string">native byte values.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">GNU coreutils online help: &lt;http://www.gnu.org/software/coreutils/&gt;</span></span><br><span class="line"><span class="string">For complete documentation, run: info coreutils '</span>sort invocation<span class="string">'</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬éœ€è¦ç”¨åˆ°çš„æ˜¯<code>-n</code>å‚æ•°ï¼Œæ ¹æ®æ•°å­—å¤§å°æ’åºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort ip.txt | uniq -c | sort -n</span><br></pre></td></tr></table></figure><p>æœ€åæˆ‘ä»¬éœ€è¦çš„æ˜¯æœ€å¤§çš„ä¸‰ä¸ªï¼Œå…ˆé™åºæ’ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort ip.txt | uniq -c | sort -rn</span><br></pre></td></tr></table></figure><p>ç„¶åå–<code>top3</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ sort ip.txt | uniq -c | sort -rn | head -n 3</span><br><span class="line">     20 79.137.86.84</span><br><span class="line">     18 178.40.3.117</span><br><span class="line">     17 224.64.206.181</span><br></pre></td></tr></table></figure><p>æ”¶å·¥ï¼</p><h2 id="å‚è€ƒé“¾æ¥"><a class="header-anchor" href="#å‚è€ƒé“¾æ¥">#</a>å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://blog.csdn.net/chengonghao/article/details/52160694" target="_blank" rel="noopener">æœ‰ä¸€ä¸ªæ–‡ä»¶ ip.txtï¼Œæ¯è¡Œä¸€æ¡ ip è®°å½•ï¼Œå…±è‹¥å¹²è¡Œï¼Œä¸‹é¢å“ªä¸ªå‘½ä»¤å¯ä»¥å®ç°â€œç»Ÿè®¡å‡ºç°æ¬¡æ•°æœ€å¤šçš„å‰ 3 ä¸ª ip åŠå…¶æ¬¡æ•°â€ï¼Ÿ</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> linux </tag>
            
            <tag> sort </tag>
            
            <tag> uniq </tag>
            
            <tag> ip </tag>
            
            <tag> interview </tag>
            
            <tag> 4399 </tag>
            
            <tag> wc </tag>
            
            <tag> head </tag>
            
            <tag> tail </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç”¨Javaå®ç°UDPé€šä¿¡</title>
      <link href="/blog/2020/08/19/udp-in-java/"/>
      <url>/blog/2020/08/19/udp-in-java/</url>
      
        <content type="html"><![CDATA[<h2 id="idea-å°æŠ€å·§"><a class="header-anchor" href="#idea-å°æŠ€å·§">#</a>IDEA å°æŠ€å·§</h2><ul><li><code>cmd + shift + enter</code>ä»£ç è‡ªåŠ¨è¡¥å…¨ã€‚</li><li><code>cmd + p</code>å‚æ•°æç¤ºã€‚</li><li><code>psvm</code>ç­‰ä»·äº<code>public static void main(String[] args) {}</code>ã€‚</li><li><code>sout</code>ç­‰ä»·äº<code>System.out.println();</code>ã€‚</li><li><code>cmd + alt + t</code>å¯ä»¥åœ¨ä»£ç å—å¤–é¢æ·»åŠ ï¼š<ol><li>if</li><li>if / else</li><li>while</li><li>do / while</li><li>for</li><li>try / catch</li></ol></li><li><code>alt + enter</code> åœ¨ <code>new MyClass();</code>åä¼šè‡ªåŠ¨å¡«å……ä¸º<code>MyClass myclass = new MyClass();</code>ã€‚</li><li><code>cmd + alt + shift + l</code>æ ¼å¼åŒ–ä»£ç ã€‚</li></ul><a id="more"></a><h2 id="udp-å‘é€ç«¯"><a class="header-anchor" href="#udp-å‘é€ç«¯">#</a>UDP å‘é€ç«¯</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> xyz.onns.chat;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.net.DatagramPacket;</span><br><span class="line"><span class="keyword">import</span> java.net.DatagramSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.InetSocketAddress;</span><br><span class="line"><span class="keyword">import</span> java.net.SocketException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MySender</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    DatagramSocket socket = <span class="keyword">null</span>;</span><br><span class="line">    BufferedReader reader = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">private</span> String toIP;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> fromPort;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> toPort;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MySender</span><span class="params">(String toIP, <span class="keyword">int</span> fromPort, <span class="keyword">int</span> toPort)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.toIP = toIP;</span><br><span class="line">        <span class="keyword">this</span>.fromPort = fromPort;</span><br><span class="line">        <span class="keyword">this</span>.toPort = toPort;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            socket = <span class="keyword">new</span> DatagramSocket(fromPort);</span><br><span class="line">            reader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(System.in));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SocketException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                String data = reader.readLine();</span><br><span class="line">                <span class="keyword">byte</span>[] buffer = data.getBytes();</span><br><span class="line">                DatagramPacket packet = <span class="keyword">new</span> DatagramPacket(buffer, <span class="number">0</span>, buffer.length, <span class="keyword">new</span> InetSocketAddress(toIP, toPort));</span><br><span class="line">                socket.send(packet);</span><br><span class="line">                <span class="keyword">if</span> (data.trim().equals(<span class="string">"bye"</span>)) &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="udp-æ¥æ”¶ç«¯"><a class="header-anchor" href="#udp-æ¥æ”¶ç«¯">#</a>UDP æ¥æ”¶ç«¯</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> xyz.onns.chat;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.net.DatagramPacket;</span><br><span class="line"><span class="keyword">import</span> java.net.DatagramSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.SocketException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyReceiver</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    DatagramSocket socket = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> port;</span><br><span class="line">    <span class="keyword">private</span> String from;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyReceiver</span><span class="params">(<span class="keyword">int</span> port, String from)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.port = port;</span><br><span class="line">        <span class="keyword">this</span>.from = from;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            socket = <span class="keyword">new</span> DatagramSocket(port);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SocketException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">                DatagramPacket packet = <span class="keyword">new</span> DatagramPacket(buffer, buffer.length);</span><br><span class="line">                socket.receive(packet);</span><br><span class="line">                <span class="keyword">byte</span>[] data = packet.getData();</span><br><span class="line">                String message = <span class="keyword">new</span> String(data, <span class="number">0</span>, data.length);</span><br><span class="line">                System.out.println(from + <span class="string">" : "</span> + message);</span><br><span class="line">                <span class="keyword">if</span> (message.trim().equals(<span class="string">"bye"</span>)) &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        socket.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•ç±»"><a class="header-anchor" href="#æµ‹è¯•ç±»">#</a>æµ‹è¯•ç±»</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> xyz.onns.chat;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TalkStudent</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> MySender(<span class="string">"localhost"</span>,<span class="number">7777</span>,<span class="number">9999</span>)).start();</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> MyReceiver(<span class="number">8888</span>,<span class="string">"teacher"</span>)).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> xyz.onns.chat;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TalkTeacher</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> MySender(<span class="string">"localhost"</span>,<span class="number">5555</span>,<span class="number">8888</span>)).start();</span><br><span class="line">        <span class="keyword">new</span> Thread(<span class="keyword">new</span> TalkReceiver(<span class="number">9999</span>,<span class="string">"student"</span>)).start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> learn </category>
          
      </categories>
      
      
        <tags>
            
            <tag> idea </tag>
            
            <tag> java </tag>
            
            <tag> tips </tag>
            
            <tag> macos </tag>
            
            <tag> udp </tag>
            
            <tag> idea tips </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¿®æ”¹æ–‡ä»¶æ ¼å¼</title>
      <link href="/blog/2020/08/17/change-file-format/"/>
      <url>/blog/2020/08/17/change-file-format/</url>
      
        <content type="html"><![CDATA[<p>MacOSã€Linux å’Œ Windows ä¸‹ä½¿ç”¨ä¸åŒçš„ç”Ÿæˆå·¥å…·å¯èƒ½ä¼šæœ‰ä¸åŒçš„æ–‡ä»¶æ ¼å¼ï¼š<code>LF</code>æˆ–è€…<code>CRLF</code>ç­‰ï¼Œå¯¼è‡´æ¯æ¬¡ github åœ¨åŒæ­¥çš„æ—¶å€™ï¼Œéƒ½ä¼šå‡ºç°å…¶å®å†…å®¹æ²¡æ›´æ–°ï¼Œä½†æ˜¯æ–‡ä»¶å´æ›´æ–°äº†çš„<code>ä¼ªæ›´æ–°æƒ…å†µ</code>ã€‚</p><a id="more"></a><h2 id="æ–°çš„æ–‡ä»¶"><a class="header-anchor" href="#æ–°çš„æ–‡ä»¶">#</a>æ–°çš„æ–‡ä»¶</h2><p>å¯¹äºä¹‹åçš„æ–‡ä»¶ï¼Œå¯ä»¥å‚è€ƒ <a href="https://docs.github.com/en/github/using-git/configuring-git-to-handle-line-endings" target="_blank" rel="noopener">Configuring Git to handle line endings</a>ï¼Œé€šè¿‡é…ç½®<code>git</code>æ¥å®ç°è‡ªåŠ¨å…¼å®¹ï¼Œå°±ä¸ç”¨æˆ‘ä»¬è‡ªå·±è€ƒè™‘äº†ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global core.autocrlf <span class="literal">true</span></span><br><span class="line"><span class="comment"># Configure Git to ensure line endings in files you checkout are correct for Windows.</span></span><br><span class="line"><span class="comment"># For compatibility, line endings are converted to Unix style when you commit files.</span></span><br></pre></td></tr></table></figure><h2 id="æ—§çš„æ–‡ä»¶"><a class="header-anchor" href="#æ—§çš„æ–‡ä»¶">#</a>æ—§çš„æ–‡ä»¶</h2><p>å¯ä»¥é€šè¿‡<code>unix2dos</code>å·¥å…·æ¥æ‰¹é‡è¿›è¡Œè½¬æ¢ï¼Œå®˜ç½‘ï¼š<a href="http://dos2unix.sourceforge.net/" target="_blank" rel="noopener">Dos2Unix / Unix2Dos - Text file format converters</a>ï¼Œä¸‹è½½åœ°å€ï¼š<a href="https://sourceforge.net/projects/dos2unix/" target="_blank" rel="noopener">dos2unix</a>ã€‚</p><p>ä¸‹è½½è§£å‹ä¹‹åçš„ bin æ–‡ä»¶å¤¹é‡Œæœ‰æˆ‘ä»¬éœ€è¦çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæˆ‘çš„æ˜¯<code>D:\Download\dos2unix-7.4.1-win64\bin\unix2dos.exe</code>ã€‚</p><ol><li>æ‰“å¼€å‘½ä»¤è¡Œ<code>win+R</code>ï¼Œè¾“å…¥<code>cmd</code>ï¼Œå›è½¦ã€‚</li><li><code>cd</code>å®šä½åˆ°æ‰€éœ€è¦çš„æ‰¹é‡å¤„ç†çš„æ ¹ç›®å½•ã€‚</li><li>è¾“å…¥ä¸‹åˆ—å‘½ä»¤ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> /R %G <span class="keyword">in</span> (*.md *.html) <span class="keyword">do</span> D:\Download\dos2unix-7.4.1-win64\bin\unix2dos.exe <span class="string">"%G"</span></span><br><span class="line"><span class="comment"># *.md ä»£è¡¨ä»¥æ‰€æœ‰mdç»“å°¾çš„æ–‡ä»¶</span></span><br></pre></td></tr></table></figure></li><li>å®Œæˆã€‚</li></ol><h2 id="å‚è€ƒæ–‡æ¡£"><a class="header-anchor" href="#å‚è€ƒæ–‡æ¡£">#</a>å‚è€ƒæ–‡æ¡£</h2><ul><li><a href="http://dos2unix.sourceforge.net/" target="_blank" rel="noopener">Dos2Unix / Unix2Dos - Text file format converters</a></li><li><a href="https://blog.csdn.net/panda1234lee/article/details/89289097" target="_blank" rel="noopener">æ‰¹é‡è½¬æ¢ LF å’Œ CRLF çš„å°æŠ€å·§ã€è¯¦ç»†æ­¥éª¤ã€‘</a></li><li><a href="https://docs.github.com/en/github/using-git/configuring-git-to-handle-line-endings" target="_blank" rel="noopener">Configuring Git to handle line endings</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> crlf </tag>
            
            <tag> lf </tag>
            
            <tag> file format </tag>
            
            <tag> æ–‡ä»¶æ ¼å¼ </tag>
            
            <tag> github </tag>
            
            <tag> line endings </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç”¨ngrokè¿›è¡Œå†…ç½‘ç©¿é€</title>
      <link href="/blog/2020/08/17/intranet-penetration-use-ngrok/"/>
      <url>/blog/2020/08/17/intranet-penetration-use-ngrok/</url>
      
        <content type="html"><![CDATA[<p>ç¬¬ä¸‰æ–¹ç™»å½•å¦å¤§è´¦å·çš„æ—¶å€™ï¼Œéœ€è¦ç”¨åˆ°å†…ç½‘ç©¿é€ã€‚ä»¥ä¸‹ä¸ºç›¸å…³æ–‡æ¡£ã€‚</p><a id="more"></a><h2 id="å®‰è£…-ngrok"><a class="header-anchor" href="#å®‰è£…-ngrok">#</a>å®‰è£… ngrok</h2><p>å®‰è£…ä¾èµ–ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install gcc git mercurial git bzr subversion golang golang-pkg-windows-amd64 golang-pkg-windows-386 -y</span><br></pre></td></tr></table></figure><p>ä¸‹è½½ ngrok æºç ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/inconshreveable/ngrok.git ngrok</span><br></pre></td></tr></table></figure><p>ç”Ÿæˆè¯ä¹¦ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ngrok</span><br><span class="line"></span><br><span class="line">mkdir cert</span><br><span class="line"><span class="built_in">cd</span> cert</span><br><span class="line"><span class="comment"># NGROK_DOMAIN æ ¹æ®è‡ªå·±çš„é…ç½®ä¿®æ”¹</span></span><br><span class="line"><span class="built_in">export</span> NGROK_DOMAIN=<span class="string">"onns.xyz"</span></span><br><span class="line">openssl genrsa -out rootCA.key 2048</span><br><span class="line">openssl req -x509 -new -nodes -key rootCA.key -subj <span class="string">"/CN=<span class="variable">$NGROK_DOMAIN</span>"</span> -days 5000 -out rootCA.pem</span><br><span class="line">openssl genrsa -out device.key 2048</span><br><span class="line">openssl req -new -key device.key -subj <span class="string">"/CN=<span class="variable">$NGROK_DOMAIN</span>"</span> -out device.csr</span><br><span class="line">openssl x509 -req -<span class="keyword">in</span> device.csr -CA rootCA.pem -CAkey rootCA.key -CAcreateserial -out device.crt -days 5000</span><br><span class="line"></span><br><span class="line">cp rootCA.pem ../assets/client/tls/ngrokroot.crt</span><br><span class="line">cp device.crt ../assets/server/tls/snakeoil.crt</span><br><span class="line">cp device.key ../assets/server/tls/snakeoil.key</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿”å›ä¸Šå±‚ç›®å½•</span></span><br><span class="line"><span class="built_in">cd</span> ..</span><br></pre></td></tr></table></figure><p><code>NGROK_DOMAIN</code>åŸŸåæ¢æˆ ngrok æœåŠ¡å™¨åŸŸåï¼Œå»ºè®®ç”¨ä¸€ä¸ªäºŒçº§åŸŸåï¼Œæ¯”å¦‚ï¼š<code>ngrok.onns.xyz</code>ï¼Œå› ä¸ºå¦‚æœç”¨ä¸€ä¸ªä¸€çº§åŸŸåæ¯”å¦‚<code>onns.xyz</code>ï¼Œé‚£æ•´ä¸ªä¸€çº§åŸŸåéƒ½æ²¡åŠæ³•ç”¨äº†ï¼Œå› ä¸ºä¸€çº§åŸŸåå¿…é¡»è¦æŒ‡å‘ ngrok æœåŠ¡å™¨ã€‚</p><p>ç¼–è¯‘æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># LinuxæœåŠ¡ç«¯</span></span><br><span class="line">GOOS=linux GOARCH=amd64 make release-server</span><br><span class="line"><span class="comment"># Windowså®¢æˆ·ç«¯</span></span><br><span class="line">GOOS=windows GOARCH=amd64 make release-client</span><br></pre></td></tr></table></figure><p>å…¶å®ƒå‚æ•°ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># LinuxæœåŠ¡ç«¯/å®¢æˆ·ç«¯</span></span><br><span class="line"><span class="comment"># 32ä½</span></span><br><span class="line">GOOS=linux GOARCH=386 make release-server</span><br><span class="line">GOOS=linux GOARCH=386 make release-client</span><br><span class="line"><span class="comment"># 64ä½</span></span><br><span class="line">GOOS=linux GOARCH=amd64 make release-server</span><br><span class="line">GOOS=linux GOARCH=amd64 make release-client</span><br><span class="line"></span><br><span class="line"><span class="comment"># MacOSæœåŠ¡ç«¯/å®¢æˆ·ç«¯</span></span><br><span class="line">GOOS=darwin GOARCH=386 make release-server</span><br><span class="line">GOOS=darwin GOARCH=386 make release-client</span><br><span class="line"></span><br><span class="line">GOOS=darwin GOARCH=amd64 make release-server</span><br><span class="line">GOOS=darwin GOARCH=amd64 make release-client</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># WindowsæœåŠ¡ç«¯/å®¢æˆ·ç«¯</span></span><br><span class="line">GOOS=windows GOARCH=386 make release-server</span><br><span class="line">GOOS=windows GOARCH=386 make release-client</span><br><span class="line"></span><br><span class="line">GOOS=windows GOARCH=amd64 make release-server</span><br><span class="line">GOOS=windows GOARCH=amd64 make release-client</span><br></pre></td></tr></table></figure><h2 id="æœåŠ¡å™¨ç«¯"><a class="header-anchor" href="#æœåŠ¡å™¨ç«¯">#</a>æœåŠ¡å™¨ç«¯</h2><p>æµ‹è¯•ä¸€ä¸‹èƒ½å¦è¿è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo -i</span><br><span class="line">./bin/ngrokd -domain=<span class="string">"onns.xyz"</span> -httpAddr=<span class="string">":82"</span> -httpsAddr=<span class="string">":83"</span></span><br></pre></td></tr></table></figure><p>ngrok é»˜è®¤ä¼šå <code>80</code>å’Œ<code>443</code>ç«¯å£ï¼ŒæœåŠ¡å™¨åªç”¨æ¥åš ngrok æœåŠ¡å™¨å¤ªå¯æƒœäº†ï¼Œæ‰€ä»¥ç”¨åˆ«çš„ç«¯å£æ¥ä»£æ›¿ã€‚</p><p>å¦‚æœåç»­æµ‹è¯•ä¸é€šè¿‡ï¼Œå¯ä»¥æ£€æŸ¥ä¸€ä¸‹æ˜¯ä¸æ˜¯ç«¯å£é—®é¢˜ï¼ŒæŠŠæœåŠ¡å™¨å’Œäº‘æœåŠ¡å™¨å•†çš„ç«¯å£è®¿é—®æ‰“å¼€ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo iptables -I INPUT -p tcp --dport 82 -j ACCEPT</span><br><span class="line">sudo iptables -I INPUT -p tcp --dport 83 -j ACCEPT</span><br></pre></td></tr></table></figure><p>ç„¶åå¯ä»¥è®¾ç½®å¸¸é©»åå°ä»»åŠ¡äº†ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo -i</span><br><span class="line">nohup ./bin/ngrokd -domain=<span class="string">"onns.xyz"</span> -httpAddr=<span class="string">":82"</span> -httpsAddr=<span class="string">":83"</span> &gt;&gt; /home/deploy/ngrok/a.txt 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure><h2 id="å®¢æˆ·ç«¯"><a class="header-anchor" href="#å®¢æˆ·ç«¯">#</a>å®¢æˆ·ç«¯</h2><p>åˆ›å»ºä¸€ä¸ª<code>ngrok.cfg</code>æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">server_addr: <span class="string">"onns.xyz:4443"</span></span><br><span class="line">trust_host_root_certs: <span class="literal">false</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ngrok -config=ngrok.cfg -subdomain x 81</span><br></pre></td></tr></table></figure><p>éœ€è¦æŠŠ<code>onns.xyz</code>å’Œ<code>x.onns.xyz</code>éƒ½æŒ‡å‘ ngrok çš„æœåŠ¡å™¨ã€‚</p><h2 id="ç»“å°¾"><a class="header-anchor" href="#ç»“å°¾">#</a>ç»“å°¾</h2><p>è¿˜æ˜¯æ¯”è¾ƒæ¨èç”¨äºŒçº§åŸŸååš ngrok æœåŠ¡å™¨ï¼Œå†ç”¨ä¸‰çº§åŸŸååšå†…ç½‘ç©¿é€ã€‚è¿™æ ·ä¸ä¼šæµªè´¹ä¸€ä¸ªåŸŸåã€‚å› ä¸ºä¸€çº§åŸŸåå’ŒäºŒçº§åŸŸåéƒ½è¦æŒ‡å‘ ngrok æœåŠ¡å™¨ã€‚ngrok æœåŠ¡éœ€è¦<code>nçº§</code>å’Œ<code>n+1çº§</code>åŸŸåã€‚</p><p>ç”»ä¸ªå›¾å¸®åŠ©ç†è§£ä¸€ä¸‹ï¼š</p><center><p><img src="//onns.xyz/blog/image/20200817-1.png" alt="ngorkå·¥ä½œæµç¨‹å›¾"></p></center><h2 id="å‚è€ƒæ–‡æ¡£"><a class="header-anchor" href="#å‚è€ƒæ–‡æ¡£">#</a>å‚è€ƒæ–‡æ¡£</h2><ul><li><a href="https://www.jianshu.com/p/f5c2a55e77bd" target="_blank" rel="noopener">æœ€æ¥åœ°æ°”çš„ Ngrok æœåŠ¡å™¨æ­å»ºæ•™ç¨‹</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> work </category>
          
      </categories>
      
      
        <tags>
            
            <tag> doc </tag>
            
            <tag> intranet penetration </tag>
            
            <tag> ngrok </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcodeé¢˜è§£ï¼šéƒ¨é—¨å·¥èµ„å‰ä¸‰é«˜çš„æ‰€æœ‰å‘˜å·¥</title>
      <link href="/blog/2020/08/14/solution-of-department-top-three-salaries/"/>
      <url>/blog/2020/08/14/solution-of-department-top-three-salaries/</url>
      
        <content type="html"><![CDATA[<h2 id="185-éƒ¨é—¨å·¥èµ„å‰ä¸‰é«˜çš„æ‰€æœ‰å‘˜å·¥"><a class="header-anchor" href="#185-éƒ¨é—¨å·¥èµ„å‰ä¸‰é«˜çš„æ‰€æœ‰å‘˜å·¥">#</a><a href="https://leetcode-cn.com/problems/department-top-three-salaries/" target="_blank" rel="noopener">185. éƒ¨é—¨å·¥èµ„å‰ä¸‰é«˜çš„æ‰€æœ‰å‘˜å·¥</a></h2><p><code>Employee</code> è¡¨åŒ…å«æ‰€æœ‰å‘˜å·¥ä¿¡æ¯ï¼Œæ¯ä¸ªå‘˜å·¥æœ‰å…¶å¯¹åº”çš„å·¥å·Â <code>Id</code>ï¼Œå§“å <code>Name</code>ï¼Œå·¥èµ„ <code>Salary</code> å’Œéƒ¨é—¨ç¼–å· <code>DepartmentId</code>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">+----+-------+--------+--------------+</span><br><span class="line">| Id | Name  | Salary | DepartmentId |</span><br><span class="line">+----+-------+--------+--------------+</span><br><span class="line">| 1  | Joe   | 85000  | 1            |</span><br><span class="line">| 2  | Henry | 80000  | 2            |</span><br><span class="line">| 3  | Sam   | 60000  | 2            |</span><br><span class="line">| 4  | Max   | 90000  | 1            |</span><br><span class="line">| 5  | Janet | 69000  | 1            |</span><br><span class="line">| 6  | Randy | 85000  | 1            |</span><br><span class="line">| 7  | Will  | 70000  | 1            |</span><br><span class="line">+----+-------+--------+--------------+</span><br></pre></td></tr></table></figure><p><code>Department</code> è¡¨åŒ…å«å…¬å¸æ‰€æœ‰éƒ¨é—¨çš„ä¿¡æ¯ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">+----+----------+</span><br><span class="line">| Id | Name     |</span><br><span class="line">+----+----------+</span><br><span class="line">| 1  | IT       |</span><br><span class="line">| 2  | Sales    |</span><br><span class="line">+----+----------+</span><br></pre></td></tr></table></figure><p>ç¼–å†™ä¸€ä¸ª SQL æŸ¥è¯¢ï¼Œæ‰¾å‡ºæ¯ä¸ªéƒ¨é—¨è·å¾—å‰ä¸‰é«˜å·¥èµ„çš„æ‰€æœ‰å‘˜å·¥ã€‚ä¾‹å¦‚ï¼Œæ ¹æ®ä¸Šè¿°ç»™å®šçš„è¡¨ï¼ŒæŸ¥è¯¢ç»“æœåº”è¿”å›ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">+------------+----------+--------+</span><br><span class="line">| Department | Employee | Salary |</span><br><span class="line">+------------+----------+--------+</span><br><span class="line">| IT         | Max      | 90000  |</span><br><span class="line">| IT         | Randy    | 85000  |</span><br><span class="line">| IT         | Joe      | 85000  |</span><br><span class="line">| IT         | Will     | 70000  |</span><br><span class="line">| Sales      | Henry    | 80000  |</span><br><span class="line">| Sales      | Sam      | 60000  |</span><br><span class="line">+------------+----------+--------+</span><br></pre></td></tr></table></figure><p>è§£é‡Šï¼š</p><p>IT éƒ¨é—¨ä¸­ï¼ŒMax è·å¾—äº†æœ€é«˜çš„å·¥èµ„ï¼ŒRandy å’Œ Joe éƒ½æ‹¿åˆ°äº†ç¬¬äºŒé«˜çš„å·¥èµ„ï¼ŒWill çš„å·¥èµ„æ’ç¬¬ä¸‰ã€‚é”€å”®éƒ¨é—¨ï¼ˆSalesï¼‰åªæœ‰ä¸¤åå‘˜å·¥ï¼ŒHenry çš„å·¥èµ„æœ€é«˜ï¼ŒSam çš„å·¥èµ„æ’ç¬¬äºŒã€‚</p><a id="more"></a><h2 id="å®‰è£…-mysql"><a class="header-anchor" href="#å®‰è£…-mysql">#</a>å®‰è£… Mysql</h2><h3 id="å®‰è£…-yum-æº"><a class="header-anchor" href="#å®‰è£…-yum-æº">#</a>å®‰è£… yum æº</h3><p>å»å®˜ç½‘ä¸‹<code>RPMåŒ…</code>ï¼š<a href="https://dev.mysql.com/downloads/repo/yum/" target="_blank" rel="noopener">MySQL Community Downloads</a>ã€‚</p><p>æŒ‰ç…§è‡ªå·±çš„ Linux ç‰ˆæœ¬å®‰è£…ï¼Œæˆ‘çš„æ˜¯<code>CentOS7</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">$ hostnamectl</span><br><span class="line">   Static hostname: izbp1j6rl141pt0isn2vusz</span><br><span class="line">   Pretty hostname: iZbp1j6rl141pt0isn2vusZ</span><br><span class="line">         Icon name: computer-vm</span><br><span class="line">           Chassis: vm</span><br><span class="line">        Machine ID: 963c2c41b08343f7b063dddac6b2e486</span><br><span class="line">           Boot ID: 9da023d194834a8aa4c95d07edd77b93</span><br><span class="line">    Virtualization: kvm</span><br><span class="line">  Operating System: CentOS Linux 7 (Core)</span><br><span class="line">       CPE OS Name: cpe:/o:centos:centos:7</span><br><span class="line">            Kernel: Linux 3.10.0-1127.13.1.el7.x86_64</span><br><span class="line">      Architecture: x86-64</span><br><span class="line">$ uname -srm</span><br><span class="line">Linux 3.10.0-1127.13.1.el7.x86_64 x86_64</span><br><span class="line">$ cat /proc/version</span><br><span class="line">Linux version 3.10.0-1127.13.1.el7.x86_64 (mockbuild@kbuilder.bsys.centos.org) (gcc version 4.8.5 20150623 (Red Hat 4.8.5-39) (GCC) ) <span class="comment">#1 SMP Tue Jun 23 15:46:38 UTC 2020</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://dev.mysql.com/get/mysql80-community-release-el7-3.noarch.rpm</span><br><span class="line">yum -y install mysql80-community-release-el7-3.noarch.rpm</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…-mysql-2"><a class="header-anchor" href="#å®‰è£…-mysql-2">#</a>å®‰è£… mysql</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install mysql-community-server -y</span><br></pre></td></tr></table></figure><h3 id="å¯åŠ¨"><a class="header-anchor" href="#å¯åŠ¨">#</a>å¯åŠ¨</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mysqld start</span><br></pre></td></tr></table></figure><h3 id="è·å–åˆå§‹å¯†ç "><a class="header-anchor" href="#è·å–åˆå§‹å¯†ç ">#</a>è·å–åˆå§‹å¯†ç </h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ grep <span class="string">"password"</span> /var/<span class="built_in">log</span>/mysqld.log</span><br><span class="line">2020-08-14T10:35:15.878806Z 6 [Note] [MY-010454] [Server] A temporary password is generated <span class="keyword">for</span> root@localhost: o%HZ6*EoVuDy</span><br></pre></td></tr></table></figure><h3 id="ç™»å½•"><a class="header-anchor" href="#ç™»å½•">#</a>ç™»å½•</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ mysql -uroot -p</span><br><span class="line"><span class="comment"># ä¿®æ”¹æ–°å¯†ç </span></span><br><span class="line">&gt; ALTER USER <span class="string">'root'</span>@<span class="string">'localhost'</span> IDENTIFIED BY <span class="string">'new_password'</span>;</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºæ•°æ®åº“"><a class="header-anchor" href="#åˆ›å»ºæ•°æ®åº“">#</a>åˆ›å»ºæ•°æ®åº“</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> onns;</span><br><span class="line"><span class="comment"># åˆ‡æ¢æ•°æ®åº“</span></span><br><span class="line"><span class="keyword">use</span> onns;</span><br></pre></td></tr></table></figure><h2 id="sql-æ¶æ„"><a class="header-anchor" href="#sql-æ¶æ„">#</a>SQL æ¶æ„</h2><p>å•Šå•Šå•Šå•Šå•Šå•Šå•Šè¿™ä¸ªå­—å±…ç„¶æ˜¯ç°è‰²çš„æˆ‘æ²¡çœ‹è§ï¼Œç»“æœè‡ªå·±æ‰‹æ‰“äº†ä¸€éï¼Œæˆ‘çœŸæ˜¯é†‰äº†ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> Employee (</span><br><span class="line"><span class="keyword">Id</span> <span class="built_in">int</span>,</span><br><span class="line"><span class="keyword">Name</span> <span class="built_in">varchar</span>(<span class="number">255</span>),</span><br><span class="line">Salary <span class="built_in">int</span>,</span><br><span class="line">DepartmentId <span class="built_in">int</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> Department (</span><br><span class="line"><span class="keyword">Id</span> <span class="built_in">int</span>,</span><br><span class="line"><span class="keyword">Name</span> <span class="built_in">varchar</span>(<span class="number">255</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">TRUNCATE</span> <span class="keyword">TABLE</span> Employee;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Employee (<span class="keyword">Id</span>, <span class="keyword">Name</span>, Salary, DepartmentId)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'Joe'</span>, <span class="string">'85000'</span>, <span class="string">'1'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Employee (<span class="keyword">Id</span>, <span class="keyword">Name</span>, Salary, DepartmentId)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">'2'</span>, <span class="string">'Henry'</span>, <span class="string">'80000'</span>, <span class="string">'2'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Employee (<span class="keyword">Id</span>, <span class="keyword">Name</span>, Salary, DepartmentId)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">'3'</span>, <span class="string">'Sam'</span>, <span class="string">'60000'</span>, <span class="string">'2'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Employee (<span class="keyword">Id</span>, <span class="keyword">Name</span>, Salary, DepartmentId)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">'4'</span>, <span class="string">'Max'</span>, <span class="string">'90000'</span>, <span class="string">'1'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Employee (<span class="keyword">Id</span>, <span class="keyword">Name</span>, Salary, DepartmentId)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">'5'</span>, <span class="string">'Janet'</span>, <span class="string">'69000'</span>, <span class="string">'1'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Employee (<span class="keyword">Id</span>, <span class="keyword">Name</span>, Salary, DepartmentId)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">'6'</span>, <span class="string">'Randy'</span>, <span class="string">'85000'</span>, <span class="string">'1'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Employee (<span class="keyword">Id</span>, <span class="keyword">Name</span>, Salary, DepartmentId)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">'7'</span>, <span class="string">'Will'</span>, <span class="string">'70000'</span>, <span class="string">'1'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">TRUNCATE</span> <span class="keyword">TABLE</span> Department;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Department (<span class="keyword">Id</span>, <span class="keyword">Name</span>)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">'1'</span>, <span class="string">'IT'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Department (<span class="keyword">Id</span>, <span class="keyword">Name</span>)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">'2'</span>, <span class="string">'Sales'</span>);</span><br></pre></td></tr></table></figure><h2 id="ç»“æœ"><a class="header-anchor" href="#ç»“æœ">#</a>ç»“æœ</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> Employee e1</span><br><span class="line"><span class="keyword">WHERE</span> <span class="number">3</span> &gt; (</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(<span class="keyword">DISTINCT</span> <span class="string">`Salary`</span>)</span><br><span class="line"><span class="keyword">FROM</span> <span class="string">`Employee`</span> e2</span><br><span class="line"><span class="keyword">WHERE</span> e2.Salary &gt; e1.Salary</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> d.Name <span class="keyword">AS</span> Department, e1.Name <span class="keyword">AS</span> Employee, e1.Salary <span class="keyword">AS</span> Salary</span><br><span class="line"><span class="keyword">FROM</span> Employee e1</span><br><span class="line"><span class="keyword">JOIN</span> Department d <span class="keyword">ON</span> e1.DepartmentId = d.Id</span><br><span class="line"><span class="keyword">WHERE</span> <span class="number">3</span> &gt; (</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(<span class="keyword">DISTINCT</span> <span class="string">`Salary`</span>)</span><br><span class="line"><span class="keyword">FROM</span> <span class="string">`Employee`</span> e2</span><br><span class="line"><span class="keyword">WHERE</span> e2.Salary &gt; e1.Salary</span><br><span class="line"><span class="keyword">AND</span> e1.DepartmentId = e2.DepartmentId</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒé“¾æ¥"><a class="header-anchor" href="#å‚è€ƒé“¾æ¥">#</a>å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://blog.csdn.net/xiaolong_4_2/article/details/81664582" target="_blank" rel="noopener">centos7 ä¸Šå¿«é€Ÿå®‰è£… mysql</a></li><li><a href="https://tool.oschina.net/codeformat/sql" target="_blank" rel="noopener">åœ¨çº¿ä»£ç æ ¼å¼åŒ–</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tips </tag>
            
            <tag> mysql </tag>
            
            <tag> leetcode </tag>
            
            <tag> centos7 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å­¦ä¹ ç¬”è®°-20200813</title>
      <link href="/blog/2020/08/13/note-20200813/"/>
      <url>/blog/2020/08/13/note-20200813/</url>
      
        <content type="html"><![CDATA[<h2 id="åˆ¶å®šæ·±å…¥çš„ä¸“æ³¨åˆ†æ•°é¢„æµ‹æé«˜å­¦ç”Ÿå‚ä¸åº¦"><a class="header-anchor" href="#åˆ¶å®šæ·±å…¥çš„ä¸“æ³¨åˆ†æ•°é¢„æµ‹æé«˜å­¦ç”Ÿå‚ä¸åº¦">#</a>åˆ¶å®šæ·±å…¥çš„ä¸“æ³¨åˆ†æ•°é¢„æµ‹æé«˜å­¦ç”Ÿå‚ä¸åº¦</h2><p>Prescribing Deep Attentive Score Prediction AttractsImproved Student Engagement</p><a id="more"></a><ul><li>å°†æ·±åº¦å­¦ä¹ æ¨¡å‹å¼•å…¥æ™ºèƒ½è¾…å¯¼ç³»ç»Ÿ</li><li>ä¹‹å‰çš„ç ”ç©¶éƒ½åœ¨å…³æ³¨æé«˜é¢„æµ‹æ¨¡å‹çš„æ€§èƒ½ä¸Šï¼Œç¼ºä¹å¯¹å…¶å®é™…åº”ç”¨æ‰€äº§ç”Ÿæ•ˆç›Šçš„å…³æ³¨ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡æä¾›ç»éªŒè¯æ®æ¥è¯æ˜ï¼Œåœ¨ç°å®ç¯å¢ƒä¸­éƒ¨ç½²çš„åˆ†æ•°é¢„æµ‹æ¨¡å‹çš„å‡†ç¡®æ€§æ˜¾è‘—å½±å“ç”¨æˆ·çš„æµ‹é‡ã€‚</li></ul><h2 id="é¢„æµ‹è§†é¢‘è®²åº§çš„å‚ä¸åº¦"><a class="header-anchor" href="#é¢„æµ‹è§†é¢‘è®²åº§çš„å‚ä¸åº¦">#</a>é¢„æµ‹è§†é¢‘è®²åº§çš„å‚ä¸åº¦</h2><p>Predicting Engagement in Video Lectures</p><h3 id="æ‘˜è¦"><a class="header-anchor" href="#æ‘˜è¦">#</a>æ‘˜è¦</h3><p>è¿‘å¹´æ¥å¼€æ”¾å¼æ•™è‚²èµ„æºï¼ˆOpen Educational Resourcesï¼‰çš„æ¿€å¢ï¼Œäº§ç”Ÿäº†å¯¹å¯æ‰©å±•ã€è‡ªåŠ¨åŒ–çš„å¼€æ”¾å¼æ•™è‚²èµ„æºå¤„ç†å’Œè¯„ä¼°çš„éœ€æ±‚ï¼Œæœ€ç»ˆç›®æ ‡æ˜¯ä¸ºå­¦ä¹ è€…ç¡®å®šå’Œæ¨èæœ€åˆé€‚çš„æ•™è‚²ææ–™ã€‚æˆ‘ä»¬ä¸“æ³¨äºæ„å»ºæ¨¡å‹ï¼Œä»¥å‘ç°ä¸Šä¸‹æ–‡ä¸å¯çŸ¥çš„å‚ä¸ï¼ˆå³åŸºäºäººå£çš„å‚ä¸ï¼‰æ‰€æ¶‰åŠçš„ç‰¹å¾å’Œç‰¹å¾ï¼Œä¸å…¶ä»–æ›´æ³¨é‡ä¸ªä½“å­¦ä¹ çš„ä¸Šä¸‹æ–‡åŒ–å’Œä¸ªæ€§åŒ–æ–¹æ³•ç›¸æ¯”ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå°‘è¢«é‡æ–°æœç´¢çš„ä¸»é¢˜ã€‚å­¦ä¹ è€…å‚ä¸åº¦ï¼Œå¯ä»¥è¯´æ˜¯æ¯”å—æ¬¢è¿ç¨‹åº¦/è§‚ç‚¹æ•°é‡æ›´å¯é çš„è¡¡é‡æ ‡å‡†ï¼Œæ¯”ç”¨æˆ·è¯„åˆ†æ›´ä¸°å¯Œï¼Œä¹Ÿè¢«è¯æ˜æ˜¯å®ç°å­¦ä¹ æˆæœçš„å…³é”®ç»„æˆéƒ¨åˆ†ã€‚åœ¨è¿™é¡¹å·¥ä½œä¸­ï¼Œæˆ‘ä»¬æ¢è®¨äº†å»ºç«‹ä¸€ä¸ªä»¥äººå£ä¸ºåŸºç¡€çš„æ•™è‚²å‚ä¸é¢„æµ‹æ¨¡å‹çš„æƒ³æ³•ã€‚æˆ‘ä»¬ä»‹ç»äº†ä¸€ä¸ªæ–°é¢–çš„ï¼Œå¤§çš„è§†é¢‘è®²åº§æ•°æ®é›†ï¼Œç”¨äºé¢„æµ‹ä¸Šä¸‹æ–‡æ— å…³å‚ä¸ï¼Œå¹¶æå‡ºäº†ä¸¤ä¸ªè·¨æ¨¡æ€æ¨¡æ€æ¨¡æ€ç‰¹å®šçš„åŠŸèƒ½é›†ï¼Œä»¥å®ç°è¿™ä¸€ä»»åŠ¡ã€‚æˆ‘ä»¬è¿›ä¸€æ­¥æµ‹è¯•äº†é‡åŒ–å­¦ä¹ è€…æµ‹é‡ä¿¡å·çš„ä¸åŒç­–ç•¥ã€‚æˆ‘ä»¬æ¼”ç¤ºäº†æˆ‘ä»¬çš„æ–¹æ³•åœ¨æ•°æ®ç¨€ç¼ºæƒ…å†µä¸‹çš„åº”ç”¨ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¯¹è¡¨ç°æœ€ä½³çš„æ¨¡å‹è¿›è¡Œäº†æ•æ„Ÿåº¦åˆ†æï¼Œè¯¥æ¨¡å‹æ˜¾ç¤ºå‡ºè‰¯å¥½çš„æ€§èƒ½ï¼Œå¹¶ä¸”å¯ä»¥å¾ˆå®¹æ˜“åœ°é›†æˆåˆ°é¢å‘å¼€æ”¾å¼æ•™è‚²èµ„æºçš„æ•™è‚²æ¨èç³»ç»Ÿä¸­ã€‚</p><h3 id="å¤‡æ³¨"><a class="header-anchor" href="#å¤‡æ³¨">#</a>å¤‡æ³¨</h3><ul><li>æºç &amp;æ•°æ®é›†ï¼š<a href="https://github.com/sahanbull/context-agnostic-engagement" target="_blank" rel="noopener">https://github.com/sahanbull/context-agnostic-engagement</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> engagement </tag>
            
            <tag> å‚ä¸åº¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åšå®¢ä¿®å¤è¶…é•¿ç›®å½•çš„æ˜¾ç¤º</title>
      <link href="/blog/2020/08/12/blog-toc-fix/"/>
      <url>/blog/2020/08/12/blog-toc-fix/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘å‘ç°æˆ‘æ€»æ˜¯éœ€è¦è§£å†³ä¸€ä¸ªé—®é¢˜ä¹‹å‰ï¼Œå…ˆè§£å†³è‹¥å¹²ä¸ªå‰ç½®é—®é¢˜ï¼Œå·®ä¸å¤šèŠ±äº†å…«ä¸ªå°æ—¶å·¦å³â€¦è§£å†³äº†è¶…é•¿ toc çš„æ»šåŠ¨é—®é¢˜ã€‚</p><a id="more"></a><h2 id="å†™åœ¨å‰é¢"><a class="header-anchor" href="#å†™åœ¨å‰é¢">#</a>å†™åœ¨å‰é¢</h2><p>ä¸æ„¿æ„å¾€ä¸‹çœ‹çš„å¯ä»¥ç›´æ¥åœ¨<code>/source/js/src/even.js</code>é‡Œçš„<code>Even.prototype.scrollToc</code>æ›¿æ¢å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">Even.prototype.scrollToc = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> SPACING = <span class="number">20</span>;</span><br><span class="line">  <span class="keyword">var</span> $toc = $(<span class="string">".post-toc"</span>);</span><br><span class="line">  <span class="keyword">var</span> $footer = $(<span class="string">".post-footer"</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> ($toc.length) &#123;</span><br><span class="line">    <span class="keyword">var</span> minScrollTop = $toc.offset().top - SPACING;</span><br><span class="line">    $(<span class="built_in">window</span>).scroll(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> tocState = &#123;</span><br><span class="line">        start: &#123;</span><br><span class="line">          position: <span class="string">"absolute"</span>,</span><br><span class="line">          top: minScrollTop,</span><br><span class="line">        &#125;,</span><br><span class="line">        process: &#123;</span><br><span class="line">          position: <span class="string">"fixed"</span>,</span><br><span class="line">          top: SPACING,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="keyword">var</span> scrollTop = $(<span class="built_in">window</span>).scrollTop();</span><br><span class="line">      <span class="keyword">if</span> (scrollTop &lt; minScrollTop) &#123;</span><br><span class="line">        $toc.css(tocState.start);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        $toc.css(tocState.process);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (</span><br><span class="line">          $(<span class="string">".toc-link.active"</span>).offset() != <span class="literal">undefined</span> &amp;&amp;</span><br><span class="line">          $(<span class="string">".toc-link.active"</span>).offset().top -</span><br><span class="line">            <span class="built_in">document</span>.documentElement.scrollTop &gt;</span><br><span class="line">            (<span class="built_in">window</span>.innerHeight * <span class="number">1</span>) / <span class="number">2</span></span><br><span class="line">        ) &#123;</span><br><span class="line">          $(<span class="string">".post-toc"</span>).offset(&#123;</span><br><span class="line">            top: <span class="built_in">Math</span>.min(</span><br><span class="line">              $footer.offset().top - $toc.height() - SPACING,</span><br><span class="line">              (<span class="built_in">window</span>.innerHeight * <span class="number">1</span>) / <span class="number">2</span> +</span><br><span class="line">                <span class="built_in">document</span>.documentElement.scrollTop -</span><br><span class="line">                ($(<span class="string">".toc-link.active"</span>).offset().top -</span><br><span class="line">                  $(<span class="string">".post-toc"</span>).offset().top)</span><br><span class="line">            ),</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (</span><br><span class="line">          $footer.offset().top &lt;</span><br><span class="line">          $(<span class="string">".post-toc"</span>).offset().top + $toc.height() + SPACING</span><br><span class="line">        ) &#123;</span><br><span class="line">          $(<span class="string">".post-toc"</span>).offset(&#123;</span><br><span class="line">            top: $footer.offset().top - $toc.height() - SPACING,</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å…·ä½“æ•ˆæœå¯ä»¥å»<a href="https://onns.xyz/blog/2020/08/12/sync-sofa-doc/">Sync Sofa</a>é‡Œçœ‹ï¼Œä¸ªäººè®¤ä¸ºæ˜¯æœ€ä¼˜è§£å†³æ–¹æ¡ˆã€‚</p><h2 id="é—®é¢˜"><a class="header-anchor" href="#é—®é¢˜">#</a>é—®é¢˜</h2><p>åœ¨è¿™ä¸ªä¸»é¢˜çš„<code>toc</code>è¶…å‡ºæµè§ˆå™¨é¡µé¢é«˜åº¦ä¹‹åï¼Œä¼šæ²¡åŠæ³•æ˜¾ç¤ºæ‰€æœ‰çš„ç›®å½•ä¿¡æ¯ï¼Œå¯¼è‡´é˜…è¯»éšœç¢ã€‚</p><p>ä¸ªäººè®¤ä¸ºæ¯”è¾ƒå¯è¡Œçš„æ–¹æ¡ˆæœ‰ä¸‰ä¸ªï¼š</p><ol><li>æŠ˜å å­æ ‡é¢˜</li><li>ç›®å½•æ”¯æŒæ»šè½®</li><li>ç›®å½•è·Ÿéšæ–‡æ¡£ä¸€èµ·æ»šåŠ¨</li></ol><p>å…ˆè¯´ç¬¬ä¸€ä¸ªæ–¹æ³•ï¼Œä¹Ÿæ˜¯æˆ‘çœ‹è¿™ä¸ªä¸»é¢˜çš„<a href="https://github.com/ahonn/hexo-theme-even/issues/248" target="_blank" rel="noopener">issue</a>æ—¶é‡Œé¢æåˆ°çš„ï¼Œæ•ˆæœå¯ä»¥å»çœ‹<a href="https://hugo-theme-even.netlify.app/post/even-preview/" target="_blank" rel="noopener">Theme preview</a>ï¼Œæˆ‘ä¸ªäººè®¤ä¸ºä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è§£å†³æ–¹æ¡ˆï¼Œå› ä¸ºå¦‚æœæç«¯æƒ…å†µä¸‹ï¼Œæ‰€æœ‰çš„æ ‡é¢˜éƒ½æ˜¯åŒä¸€çº§çš„ï¼Œé‚£åŠ¿å¿…æ²¡åŠæ³•è¿›è¡Œå­æ ‡é¢˜æŠ˜å ï¼Œæ­¤æ–¹æ¡ˆ passã€‚ï¼ˆäºæˆ‘è¿˜èŠ±äº† 1 ä¸ªå°æ—¶æ—¶é—´æ¥ç ”ç©¶æ€ä¹ˆè¿ç§»è¿‡æ¥ã€‚ï¼‰</p><p>ç¬¬äºŒä¸ªæ–¹æ³•ï¼Œæˆ‘ä¸ªäººè§‰å¾—æœ‰ç‚¹è ¢ï¼Œä¸”ä¸è¯´ç›®å½•æœ¬èº«å°±æ˜¯æµ®åŠ¨çš„ï¼Œä¸å¥½æ»šï¼Œå°±ç®—æ˜¯æ»šèµ·æ¥äº†ï¼Œç¿»ä¸€ä¼šé¡µçš„æ—¶å€™è¿˜è¦å†ç¿»ç›®å½•é¡µã€‚ã€‚ã€‚æƒ³æƒ³å°±æœ‰ç‚¹ä¸åˆé€‚ï¼Œç•™ç»™æœ‰ç¼˜äººå°è¯•å§ã€‚</p><h2 id="æ€ä¹ˆæ»š"><a class="header-anchor" href="#æ€ä¹ˆæ»š">#</a>æ€ä¹ˆæ»š</h2><p>å…­ä¸ƒä¸ªå°æ—¶æ–­æ–­ç»­ç»­çš„è§£å†³æ–¹æ¡ˆæˆ‘ä¹Ÿä¸åœ¨è¿™ç BB äº†ï¼Œç›´æ¥ä¸Šæ ¸å¿ƒä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (</span><br><span class="line">  $(<span class="string">".toc-link.active"</span>).offset() != <span class="literal">undefined</span> &amp;&amp;</span><br><span class="line">  $(<span class="string">".toc-link.active"</span>).offset().top - <span class="built_in">document</span>.documentElement.scrollTop &gt;</span><br><span class="line">    (<span class="built_in">window</span>.innerHeight * <span class="number">1</span>) / <span class="number">2</span></span><br><span class="line">) &#123;</span><br><span class="line">  $(<span class="string">".post-toc"</span>).offset(&#123;</span><br><span class="line">    top: <span class="built_in">Math</span>.min(</span><br><span class="line">      $footer.offset().top - $toc.height() - SPACING,</span><br><span class="line">      (<span class="built_in">window</span>.innerHeight * <span class="number">1</span>) / <span class="number">2</span> +</span><br><span class="line">        <span class="built_in">document</span>.documentElement.scrollTop -</span><br><span class="line">        ($(<span class="string">".toc-link.active"</span>).offset().top - $(<span class="string">".post-toc"</span>).offset().top)</span><br><span class="line">    ),</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€»è¾‘å°±æ˜¯ï¼Œå¦‚æœå½“å‰æ­£åœ¨è®¿é—®çš„ç›®å½•åœ¨å±å¹•çš„ 1/2 å¤„å¾€ä¸‹äº†ï¼Œé‚£ä¹ˆæˆ‘ä¹ˆå°±å¾€ä¸Šæ»‘ç›®å½•ï¼Œä½¿å¾—å½“å‰æ­£åœ¨è®¿é—®çš„æ ‡é¢˜å§‹ç»ˆå¤„äºæ–‡æ¡£çš„æ­£ä¸­å¿ƒã€‚</p>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> hexo-theme-even </tag>
            
            <tag> blog </tag>
            
            <tag> toc </tag>
            
            <tag> js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å­¦ä¹ ç¬”è®°-20200812</title>
      <link href="/blog/2020/08/12/note-20200812/"/>
      <url>/blog/2020/08/12/note-20200812/</url>
      
        <content type="html"><![CDATA[<h2 id="åˆ†æå­¦ç”Ÿåœ¨æ…•è¯¾ä¸­çš„æ‹–å»¶ï¼šå¤šå˜é‡éœå…‹æ–¯æ–¹æ³•"><a class="header-anchor" href="#åˆ†æå­¦ç”Ÿåœ¨æ…•è¯¾ä¸­çš„æ‹–å»¶ï¼šå¤šå˜é‡éœå…‹æ–¯æ–¹æ³•">#</a>åˆ†æå­¦ç”Ÿåœ¨æ…•è¯¾ä¸­çš„æ‹–å»¶ï¼šå¤šå˜é‡éœå…‹æ–¯æ–¹æ³•</h2><p>è¿‡å»çš„ç ”ç©¶ä¸»è¦é€šè¿‡é™æ€æ—¶é—´ç›¸å…³çš„æµ‹é‡ï¼ˆä¾‹å¦‚æ¯ä¸ªå­¦ç”Ÿæ‰€æœ‰ä½œä¸šçš„å¹³å‡å¼€å§‹æ—¶é—´ï¼‰æˆ–æ—¶é—´æ¨¡å‹çš„å‚æ•°æ¥æè¿°å­¦ç”Ÿçš„æ‹–å»¶ï¼Œå‡è®¾å­¦ç”Ÿçš„æ´»åŠ¨ä»¥æ’å®šçš„é€Ÿç‡å‘ç”Ÿï¼ˆä¾‹å¦‚é½æ¬¡æ³Šæ¾æ¨¡å‹ï¼‰ã€‚</p><a id="more"></a><p>å­¦ç”Ÿä¸ä¸€ç§å­¦ä¹ ææ–™çš„äº’åŠ¨ç‹¬ç«‹äºä¸å¦ä¸€ç§ææ–™çš„äº’åŠ¨</p><p>åœ¨è¿™é¡¹å·¥ä½œä¸­ï¼Œæˆ‘ä»¬å»ºè®®è€ƒè™‘å­¦ç”Ÿçš„æ—¶é—´æ´»åŠ¨ä¹‹é—´çš„ç›¸äº’ä¾èµ–æ€§ï¼ŒåŒæ—¶åœ¨ä¸€ä¸ªè¿ç»­çš„æ—¶é—´å°ºåº¦ä¸Šæ¨¡æ‹Ÿä»–ä»¬çš„åºåˆ—ã€‚</p><p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬å»ºè®®å°†æ¯ä¸ªå­¦ç”Ÿå’Œæ¯ä¸ªè¯¾ç¨‹æ¨¡å—ï¼Œå³æ¯ä¸ªæ¨¡å—å­¦ç”Ÿå¯¹ä¹‹é—´çš„äº¤äº’åºåˆ—å»ºæ¨¡ä¸ºå¤šç»´éœå…‹æ–¯è¿‡ç¨‹ï¼Œå®ƒä¸ä»…æ•æ‰åˆ°å­¦ç”Ÿçš„å­¦ä¹ æ´»åŠ¨ä¸å…¶å¤–ç”Ÿåˆºæ¿€ï¼ˆå¦‚ä½œä¸šæˆªæ­¢æ—¥æœŸï¼‰ä¹‹é—´çš„å…³ç³»ï¼ŒåŒæ—¶ä¹Ÿèƒ½æ•æ‰åˆ°å­¦ä¹ ææ–™ç±»å‹å†…éƒ¨å’Œä¹‹é—´çš„å†…æºæ€§ååº”ã€‚æˆ‘ä»¬çš„å®éªŒè¡¨æ˜ï¼Œå½“æ¶‰åŠä¸åŒç±»å‹çš„å­¦ä¹ ææ–™æ—¶ï¼Œä¸ä»…å­¦ç”Ÿçš„å†å²æ´»åŠ¨ä¸æœªæ¥æ´»åŠ¨ä¹‹é—´å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œè€Œä¸”è¿™ç§ä¾èµ–æ€§ä¹Ÿå¯¹å­¦ç”Ÿçš„æ‹–å»¶è¡Œä¸ºæä¾›äº†æœ‰æ„ä¹‰çš„è§£é‡Šã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬çš„ç ”ç©¶ç»“æœæ˜¾ç¤ºï¼Œé™¤äº†ä¸å»¶è¿Ÿç›¸å…³å¤–ï¼Œå¤šç»´ Hawkes è¿‡ç¨‹å­¦ä¹ çš„å‚æ•°æä¾›äº†æ›´å¤šä¸æ‹–å»¶ç›¸å…³çš„ä¿¡æ¯ï¼Œå¹¶ä¸”å¯ä»¥æ”¹å–„æˆ‘ä»¬å¯¹å­¦ç”Ÿæˆç»©çš„è§£é‡Šã€‚</p><p>ä»¥å¾€çš„å†å²å¤šåŸºäºå­¦ç”Ÿçš„è‡ªæˆ‘è°ƒæŸ¥æŠ¥å‘Šæˆ–è€…ä¸å­¦ç”Ÿæ‹–å»¶è¡Œä¸ºç›¸å…³çš„æ—¶é—´ç›¸å…³ç‰¹å¾ã€‚</p><p>è€ƒè™‘åˆ°è‡ªæˆ‘æŠ¥å‘Šæ•°æ®çš„å™ªéŸ³ï¼Œåœ¨æœ€è¿‘çš„ç ”ç©¶ä¸­ï¼Œæ›´å¤šçš„å…³æ³¨é›†ä¸­åœ¨æ‹–å»¶çš„è¡Œä¸ºæ–¹é¢ï¼Œæå‡ºäº†ä¸æ—¶é—´ç›¸å…³çš„æµ‹é‡æ–¹æ³•ï¼Œå¹¶å°†å…¶ä½œä¸ºå­¦ç”Ÿæ‹–å»¶çš„è¡¨å¾ã€‚</p><p>è¿™äº›æŒ‡æ ‡ç¼ºä¹æè¿°å­¦ç”Ÿåœ¨ä¸€æ®µæ—¶é—´å†…æŒç»­è¡Œä¸ºçš„èƒ½åŠ›ã€‚ä¸è¿™ç§æ–¹æ³•ç±»ä¼¼çš„æ˜¯ï¼Œåœ¨ä¸å®Œå…¨äº†è§£åˆ†å¸ƒçš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨æ ·æœ¬å¹³å‡å€¼æ¥æè¿°æ•´ä¸ªåˆ†å¸ƒã€‚ä¸ºäº†è§£å†³è¿™ä¸€å±€é™æ€§ï¼Œæœ€è¿‘ï¼Œé‡ç‚¹æ˜¯é€šè¿‡éšæœºæ¨¡å‹ä»å­¦ç”Ÿçš„å­¦ä¹ è½¨è¿¹æ•°æ®ä¸­æå–å­¦ç”Ÿæ´»åŠ¨çš„æ—¶é—´ç‚¹ï¼ˆä¾‹å¦‚ï¼Œå­¦ç”Ÿå†å²è¡Œä¸ºçš„æ—¥å¿—æˆ–ç‚¹å‡»æµï¼‰ã€‚</p><p>ç„¶è€Œï¼Œæ®æˆ‘ä»¬æ‰€çŸ¥ï¼Œè¿‡å»çš„ç ”ç©¶æ²¡æœ‰è€ƒè™‘åˆ°å­¦ç”Ÿä¸ä¸åŒå­¦ä¹ ææ–™ç±»å‹çš„äº’åŠ¨ä¹‹é—´å¯èƒ½å­˜åœ¨çš„æ—¶é—´ä¾èµ–æ€§ã€‚</p><p>ä¾‹å¦‚ï¼Œåœ¨ä½œä¸šçš„ç¬¬ä¸€æ¬¡å°è¯•ä¹‹å‰æ›´é›†ä¸­åœ°è§‚çœ‹è§†é¢‘è®²è¯¾ï¼Œå¯èƒ½è¡¨æ˜å­¦ç”Ÿæ›´å–œæ¬¢åœ¨å°è¯•ä½œä¸šä¹‹å‰å…ˆå­¦ä¹ ææ–™ã€‚å¦ä¸€æ–¹é¢ï¼Œåœ¨ä½œä¸šçš„ç¬¬ä¸€æ¬¡å°è¯•ä¹‹åï¼Œä¸»è¦è§‚çœ‹è¯¾å ‚è§†é¢‘ï¼Œè¿™å¯èƒ½æ„å‘³ç€å­¦ç”Ÿæ›´å–œæ¬¢å…ˆå°è¯•ä½œä¸šï¼Œç„¶ååœ¨é‡åˆ°ä»»ä½•é—®é¢˜æ—¶å†çœ‹è§†é¢‘è®²åº§ã€‚</p><p>è¿‡å»çš„ç ”ç©¶è¯•å›¾ç”¨é™æ€çš„æ—¶é—´åº¦é‡æ¥æè¿°æ‹–å»¶ï¼Œæˆ–è€…ä»æ›´å¤æ‚çš„æ—¶é—´æ¨¡å‹ä¸­æ€»ç»“å‡ºæ¥çš„åº¦é‡ï¼ŒåŸºäºå­¦ç”Ÿä¸ä¸€ä¸ªæˆ–å¤šä¸ªå­¦ä¹ ææ–™çš„äº¤äº’ä½œç”¨ã€‚ç„¶è€Œï¼Œå­¦ç”Ÿè¡Œä¸ºçš„ä¸¤ä¸ªé‡è¦å› ç´ åŠå…¶ä¸æ‹–å»¶çš„å…³ç³»è¿˜æ²¡æœ‰å¾—åˆ°å……åˆ†çš„ç ”ç©¶ï¼šï¼ˆ1ï¼‰åœ¨æ¯ç§å­¦ä¹ ææ–™ç±»å‹ä¸­ï¼Œå­¦ç”Ÿè¿‡å»å’Œå°†æ¥çš„äº’åŠ¨ä¹‹é—´çš„ä¾èµ–æ€§ï¼ˆä¾‹å¦‚ï¼ŒçŸ¥é“ä¸€ä¸ªå­¦ç”Ÿåœ¨æŸä¸ªæ—¶é—´çœ‹è¿‡å¹»ç¯ç‰‡ï¼Œä»–ä»¬å°†å¦‚ä½•ä»¥åŠä½•æ—¶è¿›è¡Œä¸‹ä¸€é¡¹æ´»åŠ¨ï¼Ÿï¼‰ä»¥åŠï¼ˆ2ï¼‰å­¦ç”Ÿä¸ä¸åŒç±»å‹å­¦ä¹ ææ–™çš„äº’åŠ¨ä¹‹é—´çš„ä¾èµ–æ€§ï¼ˆä¾‹å¦‚ï¼Œè§‚çœ‹è§†é¢‘è®²åº§åé€šå¸¸ä¼šæäº¤ä½œä¸šå—ï¼Ÿï¼‰åœ¨è¿™é¡¹å·¥ä½œä¸­ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯é€šè¿‡å›ç­”ä»¥ä¸‹é—®é¢˜æ¥è§£å†³è¿™ä¸¤ä¸ªå› ç´ ï¼šåœ¨æ¯ä¸ªå­¦ä¹ æ¨¡å—ä¸­ï¼Œå³æä¾›å­¦ä¹ ææ–™çš„è¯¾ç¨‹å•å…ƒï¼Œï¼ˆQ1ï¼‰è¿‡å»çš„æ´»åŠ¨æ˜¯å¦ç‹¬ç«‹äºæœªæ¥çš„æ´»åŠ¨ï¼Ÿæˆ–è€…æŸäº›æ´»åŠ¨å¯ä»¥è§¦å‘å…¶ä»–æ´»åŠ¨åœ¨çŸ­æ—¶é—´å†…åˆ°è¾¾ï¼ˆå³æ´»åŠ¨ä¹‹é—´çš„æ—¶é—´ä¾èµ–æ€§ï¼‰ï¼Ÿä»¥åŠï¼ˆé—®é¢˜ 2ï¼‰ï¼Œå­¦ç”Ÿä¸ä¸€ç§ç±»å‹çš„å­¦ä¹ ææ–™ï¼ˆå¦‚è§†é¢‘è®²åº§ï¼‰çš„äº’åŠ¨æ˜¯å¦ç‹¬ç«‹äºå¦ä¸€ç§ç±»å‹ï¼ˆå¦‚è®ºå›ï¼‰ï¼Ÿæ­¤å¤–ï¼Œï¼ˆé—®é¢˜ 3ï¼‰å¦‚æœè¿™ç§ä¾èµ–æ€§å­˜åœ¨ï¼Œå®ƒä»¬ä¸å­¦ç”Ÿæ‹–å»¶ç—‡æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿï¼ˆå³å­¦ç”Ÿè¿‡å»å’Œæœªæ¥æ´»åŠ¨ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œä»¥åŠå­¦ç”Ÿä¸ä¸€ç§å­¦ä¹ ææ–™ä¸å¦ä¸€ç§å­¦ä¹ ææ–™ä¹‹é—´çš„ç›¸äº’ä¾èµ–å…³ç³»ã€‚ï¼‰</p><p>å› æ­¤ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯åœ¨ä¸åŒç±»å‹çš„åœ¨çº¿å­¦ä¹ ææ–™ä¸­æ‰¾åˆ°å­¦ç”Ÿæ‹–å»¶å’Œå­¦ç”Ÿæ´»åŠ¨ä¹‹é—´çš„ç¼ºå¤±ç¯èŠ‚ã€‚ä¸ºäº†è¾¾åˆ°è¿™ä¸€ç›®æ ‡ï¼Œæˆ‘ä»¬å»ºè®®ä½¿ç”¨å¤šç»´ Hawkes è¿‡ç¨‹ä½œä¸ºä¸€ä¸ªå¼ºæœ‰åŠ›çš„å·¥å…·æ¥è§£å†³å­¦ç”Ÿæ‹–å»¶åˆ†æä¸­çš„ä¸Šè¿°é—®é¢˜ã€‚ç‰¹åˆ«åœ°ï¼Œæˆ‘ä»¬å°†ä¸€ç±»å­¦ä¹ ææ–™ä¸Šçš„æ‰€æœ‰æ´»åŠ¨è¡¨ç¤ºä¸ºå¤šç»´ Hawkes æ¨¡å‹ä¸­çš„ä¸€ç»´ã€‚æˆ‘ä»¬è¡¨æ˜ï¼Œä¸åŸºå‡†æ—¶é—´è¿‡ç¨‹ç›¸æ¯”ï¼Œè¯¥æ¨¡å‹æ›´é€‚åˆæˆ‘ä»¬çš„æ•°æ®ã€‚åŒæ—¶ï¼Œä¸ºäº†å›ç­”é—®é¢˜ 1 å’Œé—®é¢˜ 2ï¼Œæˆ‘ä»¬è¯æ˜äº†å®ƒæ—¢èƒ½æ•æ‰åˆ°å­¦ç”Ÿå¯¹æˆªæ­¢æ—¥æœŸçš„ååº”ï¼Œä½œä¸ºæ¥è‡ªå¤–éƒ¨çš„è¡ŒåŠ¨è§¦å‘å› ç´ ï¼ˆå³å¤–ç”Ÿåˆºæ¿€ï¼‰ï¼Œä¹Ÿèƒ½æ•æ‰åˆ°å­¦ç”Ÿå¯¹ä¹‹å‰ä¸ä¸åŒç±»å‹å­¦ä¹ ææ–™ï¼ˆå¦‚è§†é¢‘è®²åº§ã€ä½œä¸šï¼‰äº’åŠ¨çš„ååº”ï¼Œå’Œè®¨è®ºï¼ˆå³è‡ªæˆ‘å…´å¥‹ï¼‰ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ä»éšæœºè¿‡ç¨‹çš„è§’åº¦æ¥ç†è§£å­¦ç”Ÿçš„æ‹–å»¶è¡Œä¸ºï¼Œä¸»è¦æœ‰ä¸¤ä¸ªåˆºæ¿€å› ç´ ï¼šï¼ˆ1ï¼‰å­¦ç”Ÿçš„ä¸€äº›æ´»åŠ¨å¯ä»¥çœ‹ä½œæ˜¯å¯¹å¤–éƒ¨åˆºæ¿€çš„ååº”ï¼Œæ¯”å¦‚ä½œä¸šçš„æˆªæ­¢æ—¥æœŸï¼ˆ2ï¼‰å…¶ä»–ä¸€äº›å­¦ç”Ÿæ´»åŠ¨å¯ä»¥çœ‹ä½œæ˜¯å­¦ç”Ÿä»¥å‰ä¸ç›¸åŒæˆ–å…¶ä»–å­¦ä¹ ææ–™ç±»å‹äº’åŠ¨çš„ç»“æœã€‚åœ¨æ¨¡å‹å‚æ•°çš„åŸºç¡€ä¸Šï¼Œä¸ºäº†å›ç­”é—®é¢˜ 3ï¼Œæˆ‘ä»¬è¿˜æå‡ºäº†ä¸€ä¸ªä¸ä»…èƒ½æè¿°å­¦ç”Ÿæ‹–å»¶è€Œä¸”èƒ½æ›´å¥½åœ°è§£é‡Šå­¦ç”Ÿè¡¨ç°çš„æµ‹é‡æ–¹æ³•ã€‚</p><h2 id="åŸºäºä½œä¸šå¼€å§‹æ—¶é—´çš„åœ¨çº¿å­¦ä¹ æ‹–å»¶æŒ‡æ•°"><a class="header-anchor" href="#åŸºäºä½œä¸šå¼€å§‹æ—¶é—´çš„åœ¨çº¿å­¦ä¹ æ‹–å»¶æŒ‡æ•°">#</a>åŸºäºä½œä¸šå¼€å§‹æ—¶é—´çš„åœ¨çº¿å­¦ä¹ æ‹–å»¶æŒ‡æ•°</h2><h3 id="æ‘˜è¦"><a class="header-anchor" href="#æ‘˜è¦">#</a>æ‘˜è¦</h3><p>è¿™é¡¹å·¥ä½œçš„ç»“æœæ˜¯ä¸€ä¸ªç®€å•è€Œå¯é çš„æ‹–å»¶æŒ‡æ•°ï¼Œå®ƒå¯ä»¥æ¦‚æ‹¬å¤šä¸ªå­¦ç§‘ï¼Œè€ƒè™‘åˆ°ä½œä¸šçš„ä¸ªä½“ç‰¹ç‚¹ï¼Œæ˜¯å­¦ä¹ æˆç»©çš„ä¸€ä¸ªå¼ºæœ‰åŠ›çš„é¢„æµ‹å› å­ï¼Œå¹¶æä¾›äº†ä¸€ä¸ªæ—©æœŸä¿¡å·ï¼Œä½¿æ•™è‚²å·¥ä½œè€…èƒ½å¤Ÿä¸ºé«˜å±å­¦ç”Ÿè®¾è®¡é€‚å½“çš„å¹²é¢„æªæ–½ã€‚</p><h3 id="ä»‹ç»"><a class="header-anchor" href="#ä»‹ç»">#</a>ä»‹ç»</h3><p>æ‰€æœ‰åŸºäºä¸»è§‚å¡«å†™çš„æ‹–å»¶ç—‡åˆ†æéƒ½å…·æœ‰ç¼ºé™·ã€‚æœ¬æ–‡é‡‡ç”¨äº†ä¸€ç§åŸºäºä½œä¸šå¼€å§‹æ—¶é—´çš„åº¦é‡æ‹–å»¶çš„æ–¹å¼ã€‚</p><h3 id="æ–¹æ³•"><a class="header-anchor" href="#æ–¹æ³•">#</a>æ–¹æ³•</h3><p>é‡‡ç”¨äº†<code>Connect</code>åœ¨çº¿å­¦ä¹ å¹³å°çš„å…³äºä½œä¸šçš„å¼€å§‹æ—¶é—´ã€æˆªæ­¢æ—¶é—´ä»¥åŠå­¦ç”Ÿæäº¤æ—¶é—´çš„æ•°æ®ï¼Œå¹¶åªé€‰æ‹©ç¾å›½æœºæ„çš„ï¼Œä»¥æ¶ˆé™¤ç›¸å…³å‚æ•°å½±å“ã€‚</p><h3 id="æ“ä½œå®šä¹‰"><a class="header-anchor" href="#æ“ä½œå®šä¹‰">#</a>æ“ä½œå®šä¹‰</h3><h4 id="å®šä¹‰æ‹–å»¶"><a class="header-anchor" href="#å®šä¹‰æ‹–å»¶">#</a>å®šä¹‰æ‹–å»¶</h4><p>é¦–å…ˆæ ¹æ®ä½œä¸šæäº¤æ—¶é—´å’Œæœ€ç»ˆæˆç»©è¿›è¡Œç»Ÿè®¡ï¼Œåˆ°äº†60%ï¼Œåˆ†æ•°ä½äºå®¶åº­ä½œä¸šçš„å¹³å‡æˆç»©ã€‚åœ¨75%é™„è¿‘ï¼Œåˆ†æ•°ä¸‹é™åˆ°æ¯”å¹³å‡å€¼ä½10%ï¼Œè€Œä¸”ä¸‹é™é€Ÿåº¦åŠ å¿«ã€‚</p><p>æ‰€ä»¥æ¢æ€§åœ°å°†ä½œä¸šçš„é˜ˆå€¼æ—¶é—´<code>Ï„t</code>è®¾ä¸º75%ï¼Œå³75%çš„å­¦ç”Ÿå¼€å§‹ä½œä¸šçš„æ—¶é—´ã€‚åœ¨è¿™ä¹‹å‰çš„æ‹–å»¶æŒ‡æ•°ä¸º0ï¼Œå¦åˆ™ä¸º1ã€‚</p><p>å­¦ä¹ è€…æ‹–å»¶æŒ‡æ•°ï¼ˆPIï¼‰ï¼ˆLearner Procrastination Indexï¼‰ï¼šå³æ€»æ‹–å»¶æŒ‡æ•°é™¤ä»¥æ€»ä½œä¸šæ¬¡æ•°ã€‚</p><h3 id="è®¨è®ºä¸ç»“è®º"><a class="header-anchor" href="#è®¨è®ºä¸ç»“è®º">#</a>è®¨è®ºä¸ç»“è®º</h3><p>å°½ç®¡åœ¨è¿‡å»çš„å‡ åå¹´é‡Œå·²ç»æœ‰äº†å¤§é‡çš„å…³äºæ‹–å»¶çš„å·¥ä½œï¼Œä½†å¤§éƒ¨åˆ†å·¥ä½œéƒ½ç€çœ¼äºè‡ªæˆ‘æŠ¥å‘Šçš„æªæ–½æˆ–æäº¤æ—¶é—´ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬è€ƒè™‘å­¦ç”Ÿå¼€å§‹ä½œä¸šçš„æ—¶é—´ï¼Œç›¸å¯¹äºå…¶ä»–å­¦ç”Ÿåœ¨åŒä¸€ä½œä¸šä¸Šçš„ä½œä¸šï¼Œè¿™å¯ä»¥è·¨ä¸Šä¸‹æ–‡å·¥ä½œï¼Œå¹¶ä¸”å¯ä»¥è·¨è¯¾ç¨‹èšåˆã€‚æˆ‘ä»¬çš„é›†åˆï¼Œç§°ä¸ºæ‹–å»¶æŒ‡æ•°ï¼Œä¸ä»…ä¸Connectå¹³å°å†…çš„åˆ†æ•°ç›¸å…³ï¼Œè€Œä¸”ä¸è¯¾ç¨‹çš„æ•´ä½“åˆ†æ•°ç›¸å…³ï¼Œå¹¶ä¸”å¯ä»¥é¢„æµ‹å­¦ç”Ÿçš„æˆç»©ï¼Œå®ç°å…ˆå‰è‡ªæˆ‘æŠ¥å‘Šæªæ–½ä¸­å­¦ç”Ÿæˆç»©çš„ä¸¤åˆ°ä¸‰å€ç›¸å…³æ€§ã€‚</p><p>å¯ä»¥æå‡ºä¸€äº›å¹²é¢„æªæ–½æ¥å‡å°‘æ‹–å»¶ã€‚</p><ul><li>è®©å­¦ç”Ÿæä¾›è‡ªå·±çš„æˆªæ­¢æ—¥æœŸ</li><li>è®¾æƒ³ä¸€ä¸ªç³»ç»Ÿï¼Œä½¿å­¦ç”Ÿèƒ½å¤Ÿæå‡ºæœ€åæœŸé™æˆ–æå‡ºé¢å¤–çš„æœ€åæœŸé™ï¼ˆä¾‹å¦‚ï¼Œå®Œæˆä¸€åŠä½œä¸šçš„ç›®æ ‡ï¼‰ï¼Œä»¥å¸®åŠ©ä»–ä»¬åˆ†è§£ä»»åŠ¡å¹¶å‡å°‘æ‹–å»¶ã€‚</li></ul><p>åœ¨ä»¥å¯æ‰©å±•çš„æ–¹å¼å‡å°‘æ‹–å»¶å’Œæ”¹å–„ç»“æœæ–¹é¢ï¼Œå“ªäº›å¹²é¢„æªæ–½æœ€æœ‰æ•ˆï¼Œè¿˜æœ‰å¾…è§‚å¯Ÿã€‚ä¸å¯»æ±‚å¸®åŠ©ç­‰å…¶ä»–é¢†åŸŸä¸€æ ·ï¼Œæ‹–å»¶ä¸ç»“æœä¹‹é—´çš„å…³ç³»å¯èƒ½ä¸æ˜¯å®Œå…¨å› æœå…³ç³»ï¼Œå¹¶ä¸”å¯èƒ½åœ¨ä¸æ”¹å–„ç»“æœçš„æƒ…å†µä¸‹å‡å°‘æ‹–å»¶ã€‚æ‰¾åˆ°æ­£ç¡®çš„å¹²é¢„æªæ–½æ¥æ”¹å–„ç»“æœä¸ä»…æœ‰åŠ©äºæ”¹å–„ç»“æœï¼Œè€Œä¸”æœ‰åŠ©äºç†è§£æ‹–å»¶æ˜¯å¦ä»¥åŠå¦‚ä½•å¯¹å­¦ä¹ äº§ç”Ÿå› æœå½±å“ã€‚æ›´ä¸€èˆ¬åœ°è¯´ï¼Œå¯¹æ‹–å»¶çš„æ›´å…¨é¢çš„ç†è§£å¯èƒ½æœ‰åŠ©äºæˆ‘ä»¬æ›´å¥½åœ°å‡è½»æ‹–å»¶çš„å½±å“ã€‚å­¦ç”Ÿæ‹–å»¶æ˜¯ä¸€ç§ä¹ æƒ¯ï¼Œè¿˜æ˜¯åœ¨ä¼°è®¡ä»–ä»¬çš„æ—¶é—´éœ€æ±‚æ—¶ä¸€ç›´å­˜åœ¨é”™è¯¯ï¼Ÿæ— èŠå’Œç¼ºä¹å‚ä¸æ‰®æ¼”ä»€ä¹ˆè§’è‰²ï¼Ÿæ›´å¥½åœ°ç†è§£è¿™äº›é—®é¢˜çš„ç­”æ¡ˆå¯èƒ½æœ€ç»ˆå¯¼è‡´é‡æ–°è®¾è®¡è¯¾ç¨‹å’Œ/æˆ–ä½œä¸šï¼Œä»¥æ›´å¥½åœ°è®©å­¦ç”Ÿåœ¨æ•´ä¸ªå­¦æœŸå†…ä»¥ç¨³å®šçš„æ–¹å¼å‚ä¸å­¦ä¹ ã€‚</p><p>æˆ‘ä»¬è®¡åˆ’åˆ©ç”¨è¿™é¡¹ç ”ç©¶æ¥æ”¹è¿›æˆ‘ä»¬çš„äº§å“â€”â€”é’ˆå¯¹é‚£äº›ç»å¸¸æ‹–å»¶æ”¹è¿›çš„å†…å®¹â€”â€”å¹¶å¼€å‘ä¸€äº›æ–¹æ³•æ¥ä¿ƒä½¿å­¦ç”Ÿæ›´æœ‰æ•ˆåœ°å·¥ä½œå¹¶æ›´æ—©åœ°å®Œæˆä»–ä»¬çš„ä»»åŠ¡ã€‚å¦‚æœæˆ‘ä»¬ä½œä¸ºä¸€ä¸ªé¢†åŸŸï¼Œåœæ­¢åœ¨è¿™ä¸ªé‡è¦é—®é¢˜ä¸Šæ‹–å»¶ï¼Œå¯¹æˆ‘ä»¬å­¦ç”Ÿçš„å½±å“å¯èƒ½æ˜¯æ·±è¿œçš„ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> procrastination </tag>
            
            <tag> æ‹–å»¶ç—‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Sync Sofa</title>
      <link href="/blog/2020/08/12/sync-sofa-doc/"/>
      <url>/blog/2020/08/12/sync-sofa-doc/</url>
      
        <content type="html"><![CDATA[<h1 id="sync-sofa-streaming-video-playback-synchronizer-extension"><a class="header-anchor" href="#sync-sofa-streaming-video-playback-synchronizer-extension">#</a>Sync Sofa (streaming video playback synchronizer extension)</h1><blockquote><p>This chrome extension allows multi-user sync streaming video in a fast, simple, and stable way.</p></blockquote><p><img src="https://img.shields.io/github/go-mod/go-version/LouisYLWang/Sync-Sofa?filename=server%2Fgo.mod&amp;style=flat-square" alt="GitHub go.mod Go version (subfolder of monorepo)"> <a href="https://chrome.google.com/webstore/detail/sync-sofa-beta-online-vid/kgpnhgmpijhpkefpddoehhminpfiddmg" target="_blank" rel="noopener"><img src="https://img.shields.io/chrome-web-store/users/kgpnhgmpijhpkefpddoehhminpfiddmg?style=flat-square" alt="Chrome web store users"></a> <img src="https://img.shields.io/uptimerobot/status/m785506902-abf56ee3c6b33304675185c6?label=sync-us&amp;style=flat-square" alt="Uptime Robot status"> <img src="https://img.shields.io/uptimerobot/status/m787861126-8d48fa150c9a82edd7e1315c?label=sync-us2&amp;style=flat-square" alt="Uptime Robot status"> <img src="https://img.shields.io/uptimerobot/status/m785506916-32a7dc946ed8718c859e7cdd?label=sync-cn&amp;style=flat-square" alt="Uptime Robot status"> <img src="https://img.shields.io/uptimerobot/status/m785512978-f4cf51568a716df159f1c762?label=sync-cn2&amp;style=flat-square" alt="Uptime Robot status"> <img src="https://img.shields.io/uptimerobot/status/m787861121-335727572de1d1ea7378ebf0?label=sync-cn3&amp;style=flat-square" alt="Uptime Robot status"> <img src="https://img.shields.io/uptimerobot/status/m787861123-ea67c98024d33c70b4366305?label=sync-cn4&amp;style=flat-square" alt="Uptime Robot status"></p><p><a href="#sync-sofa-streaming-video-playback-synchronizer-extension">English</a> | <a href="#sync-sofa-%E5%9C%A8%E7%BA%BF%E8%A7%86%E9%A2%91%E5%90%8C%E6%AD%A5%E6%92%AD%E6%94%BE%E6%8F%92%E4%BB%B6">ä¸­æ–‡</a></p><p>Sync Sofa is a full-stack web extension that provides an easy-to-use and stable way to synchronize streaming playback for multiple users. It can improve the experience when users from different locations want to share a video/movie remotely. Currently, the features include:</p><ul><li>2 party connection: either party can be the host of a sync room and the other can join with connection code.</li><li>sync pause/play: each user pause/play the video, the other side will do the same</li><li>sync play process bar control: the playing time change will also affect another side user</li><li>local video sync: provide two ways to sync your playing of a local video file</li></ul><p><img src="https://s1.ax1x.com/2020/10/07/0a2FQP.png" alt="title pic"></p><h2 id="current-version"><a class="header-anchor" href="#current-version">#</a>Current version</h2><p><strong>v1.0.9 - update on 14 Aug 2020</strong></p><p>âš ï¸âš ï¸âš ï¸ Each website has itâ€™s <code>own controller</code> of the playback rate, so please ignore the wrong display of <code>playback rate</code>.</p><p>Add:</p><ol><li>playback rate sync: any side userâ€™s change to the playback rate will sync to the other side.</li></ol><p>Fix:</p><ol><li>Fix bug of no new bugs</li></ol><hr><p><strong>v1.0.8 - update on 8 Aug 2020</strong></p><p>âš ï¸âš ï¸âš ï¸ <strong>Do Not</strong> try to use <code>Room code</code> like <code>0000</code> or <code>1234</code>, We strongly recommend you use uncommon code so that you do not need to change it.</p><p>Add:</p><ol><li>allow customized connection code, user can directly connect to peer simply click the start button, without reapplying a new code</li><li>simple built-in chat feature (can be toggled in options page)</li><li>add system notification (can be toggled in options page)</li><li>add connection status budge to extension icon (red-unconnected, yellow-pending connection, green-connecting)</li><li>add a notification for unknown socket disconcerting</li><li>add duplicate connection code notification</li></ol><p>Fix:</p><ol><li>Fix bug of no new bugs</li></ol><hr><a id="more"></a><h2 id="supported-list"><a class="header-anchor" href="#supported-list">#</a>Supported list</h2><ul><li><a href="https://www.iqiyi.com/" target="_blank" rel="noopener">Iqiyi</a></li><li><a href="https://www.youku.com/" target="_blank" rel="noopener">Youku</a></li><li><a href="https://www.weiyun.com/" target="_blank" rel="noopener">Tencent Cloud</a></li><li><a href="https://v.qq.com/" target="_blank" rel="noopener">Tencent Video</a></li><li><a href="https://www.youtube.com/" target="_blank" rel="noopener">YouTube</a></li><li><a href="https://www.mgtv.com/" target="_blank" rel="noopener">Mango TV</a></li><li><a href="https://www.aliyundrive.com/" target="_blank" rel="noopener">Aliyun Drive</a></li><li>Local mp4 file via Browser</li><li><a href="https://www.videolan.org/vlc/index.html" target="_blank" rel="noopener">Local video file via VLC media player</a></li></ul><p><a href="https://github.com/LouisYLWang/Sync-Sofa/blob/dev/client/chrome_extension/manifest.json#L12" target="_blank" rel="noopener">The full list can be found here</a><br><a href="https://github.com/LouisYLWang/Sync-Sofa/issues/22" target="_blank" rel="noopener">Click here to tell us more</a></p><h2 id="setting"><a class="header-anchor" href="#setting">#</a>Setting</h2><p>ğŸ˜Š This part is optional, we have already set default options for you, if you are not interested, please skip to <a href="#usage">next part</a>.</p><h3 id="server-list"><a class="header-anchor" href="#server-list">#</a>Server list</h3><p>Recently, Many Chinese users said our service is unstable, that is because our default server is located at us, so here is the server list, you can pick the nearest one.</p><ul><li>sync-cn:<ul><li><code>https</code></li><li><code>sync-cn.onns.xyz</code></li></ul></li><li>sync-cn-2 [deprecated] (Thanks to <a href="https://github.com/huoranxuanyuan" target="_blank" rel="noopener">@huoranxuanyuan</a>):<ul><li><code>https</code></li><li><code>api.huoranxuanyuan.cn</code></li></ul></li><li>sync-cn-3 [Beijing] (Thanks to <a href="https://github.com/liqimore" target="_blank" rel="noopener">@liqimore</a>):<ul><li><code>https</code></li><li><code>sync-bj.204800.xyz</code></li></ul></li><li>sync-cn-4 [Shanghai] (Thanks to <a href="https://github.com/liqimore" target="_blank" rel="noopener">@liqimore</a>):<ul><li><code>https</code></li><li><code>sync-shanghai.204800.xyz</code></li></ul></li><li>sync-us:<ul><li><code>https</code></li><li><code>app.ylwang.me</code></li></ul></li><li>sync-us-2 [Missouri] (Thanks to <a href="https://github.com/liqimore" target="_blank" rel="noopener">@liqimore</a>):<ul><li><code>https</code></li><li><code>sync-us-central.pq02.com</code></li></ul></li></ul><p>Before setting, check server status here: <a href="#sync-sofa-streaming-video-playback-synchronizer-extension">Sync Sofa (streaming video playback synchronizer extension)</a>.</p><p>We will be grateful for supporting us to build more server if it is convenient (Cause this project is unprofitable).</p><p><strong>Alipay, Wechat pay, Paypal</strong></p><p><img src="https://onns.xyz/blog/image/20200704-1.png" alt="alipay"> <img src="https://onns.xyz/blog/image/20200704-2.png" alt="wechat pay"> <img src="https://onns.xyz/blog/image/20200704-3.jpg" alt="paypal"></p><p>If you have already built your own server, and wanna share, please tell us!</p><h3 id="options-page"><a class="header-anchor" href="#options-page">#</a>Options page</h3><p>There are two ways to visit the options page.</p><ol><li>Right click <code>Sync Sofa</code> extension, choose <code>Options</code>.</li><li>Left click <code>Sync Sofa</code> extension, choose <code>Setting</code> icon in the popup page.</li></ol><p>Your webpage should be like this:</p><p><img src="https://onns.xyz/blog/image/20200629-3.png" alt="Sync Sofa - Options"></p><h3 id="refresh-video-page"><a class="header-anchor" href="#refresh-video-page">#</a>Refresh video page</h3><p>After saving options, please also refresh the video page or local mp4 page or <a href="http://127.0.0.1:8080/" target="_blank" rel="noopener">http://127.0.0.1:8080/</a> to make changes to work.</p><h2 id="usage"><a class="header-anchor" href="#usage">#</a>Usage</h2><h3 id="notices"><a class="header-anchor" href="#notices">#</a>Notices</h3><p>âš ï¸ Before use, please make sure <code>the version number</code> of two clients is consistent.</p><p>âš ï¸ Before use, please make sure <code>the server host</code> of two clients are consistent.</p><p>âš ï¸ If you want to play the local <code>.mp4</code> file, please enable <code>Allow access to file URLs</code> in the extension details page.</p><ol><li>Open <code>chrome://extensions/</code>, find <code>Sync Sofa</code>, click the <code>Details</code> button, enable <code>Allow access to file URLs</code>.</li><li>Right click <code>Sync Sofa</code> extension, choose <code>Manage Extensions</code>, enable <code>Allow access to file URLs</code>.</li></ol><p>âš ï¸ If there are <code>multiple versions</code> of extensions in your browser, please enable one and disable others.</p><h3 id="open-a-video-page"><a class="header-anchor" href="#open-a-video-page">#</a>Open a video page</h3><p>You two donâ€™t have to open the same webpage, you play the video via a local <code>.mp4</code> file and your partner watch it one some video websites, is ok as long as you both watch the same video actually (source providers are different).</p><p>In this doc, for example, <code>User A</code> will watch the video on Bilibili and <code>User B</code> will do it on Youtube. Here is the webpage:</p><ul><li><a href="https://www.bilibili.com/video/BV1k5411Y7Rc" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1k5411Y7Rc</a></li><li><a href="https://www.youtube.com/watch?v=QAelMP1PoNA" target="_blank" rel="noopener">https://www.youtube.com/watch?v=QAelMP1PoNA</a></li></ul><p>PS: Iâ€™m a fan of Boki, and screenshots have been Gaussian blurred. If there is copyright infringement, please contact us to delete it.</p><p><img src="https://onns.xyz/blog/image/20200627-1.png" alt="User A"><br><img src="https://onns.xyz/blog/image/20200627-2.png" alt="User B"></p><p>If there are any ads before the video, watch them before the next step.</p><h3 id="request-new-code"><a class="header-anchor" href="#request-new-code">#</a>Request new code</h3><p>Click the <code>Sync Sofa</code> extension and then click <code>START</code> button.</p><p><img src="https://onns.xyz/blog/image/20200627-3.png" alt="User A"></p><p>If nothing goes wrong you will receive a message like <code>Room created and room code copied to clipboard</code>, and the <code>room code</code> has been copied to your clipboard, send it to your partner.</p><h3 id="start-connection"><a class="header-anchor" href="#start-connection">#</a>Start connection</h3><p>Your partner receives the <code>room code</code>, click the <code>Sync Sofa</code> extension, paste it in the input area, and click <code>START</code> button.</p><p><img src="https://onns.xyz/blog/image/20200627-4.png" alt="User B"></p><h3 id="enjoy-yourselves"><a class="header-anchor" href="#enjoy-yourselves">#</a>Enjoy yourselves</h3><p><img src="https://onns.xyz/blog/image/20200627-5.png" alt="User A"><br><img src="https://onns.xyz/blog/image/20200627-6.png" alt="User B"></p><p>Now you can play the video, your operations will be synced to your partner. Enjoy yourselves!</p><h2 id="vlc-support"><a class="header-anchor" href="#vlc-support">#</a>VLC support</h2><p>If you and your partner play video via <code>VLC media player</code>, <code>Sync Sofa</code> can also synchronize your operations.</p><h3 id="start-vlc-on-the-server-with-the-web-interface"><a class="header-anchor" href="#start-vlc-on-the-server-with-the-web-interface">#</a>Start VLC on the server with the Web Interface</h3><p>First, we need to enable controlling VLC via our browser, here is the official documentation:</p><ul><li><a href="https://wiki.videolan.org/Control_VLC_via_a_browser/" target="_blank" rel="noopener">Control VLC via a browser</a></li><li><a href="https://wiki.videolan.org/Documentation:Modules/http_intf/#VLC_2.0.0_and_later" target="_blank" rel="noopener">Start VLC on the server with the Web Interface</a></li></ul><ol><li>Open VLC media player</li><li>Go <code>Tools â†’ Preferences (select &quot;All&quot; radio-button) â†’ Interface â†’ Main interfaces</code>, check â€œWebâ€<br><img src="https://onns.xyz/blog/image/20200628-1.png" alt="Step 2"></li><li>Go <code>Tools â†’ Preferences (select &quot;All&quot; radio-button) â†’ Interface â†’ Main interfaces â†’ Lua</code>, set <code>Lua HTTP - Password</code><br><img src="https://onns.xyz/blog/image/20200628-2.png" alt="Step 3"></li><li><code>Save</code> and <code>reopen</code> VLC media player</li><li>Open <a href="http://127.0.0.1:8080/" target="_blank" rel="noopener">http://127.0.0.1:8080/</a> in your browser</li></ol><p>Your webpage should be like this:</p><p><img src="https://onns.xyz/blog/image/20200628-3.png" alt="VLC media player - Web Interface"></p><h3 id="open-your-video"><a class="header-anchor" href="#open-your-video">#</a>Open your video</h3><p>Our extension control <code>VLC</code> via controlling <code>VLC Web Interface</code>(<a href="http://127.0.0.1:8080/" target="_blank" rel="noopener">http://127.0.0.1:8080/</a>), so next step you should open your local video via <code>VLC Media Player</code> and see if <a href="http://127.0.0.1:8080/" target="_blank" rel="noopener">http://127.0.0.1:8080/</a> can control the video. If the answer is â€œyesâ€, go to the next step, otherwise you should check if there are multiple <code>VLC windows</code>, close the others, and recheck. Your <code>VLC Web Interface</code> should be like this:</p><p><img src="https://onns.xyz/blog/image/20200722-1.png" alt="VLC media player - Web Interface"></p><p>Video title, current time, and total time on the webpage.</p><h3 id="request-new-code-2"><a class="header-anchor" href="#request-new-code-2">#</a>Request new code</h3><p>Open <a href="http://127.0.0.1:8080/" target="_blank" rel="noopener">http://127.0.0.1:8080/</a>, click the <code>Sync Sofa</code> extension, and then click <code>REQUEST NEW CODE</code> button.</p><p>If nothing goes wrong you will receive a message like <code>Room created and room code copied to clipboard</code>, and the <code>room code</code> has been copied to your clipboard, send it to your partner.</p><h3 id="start-connection-2"><a class="header-anchor" href="#start-connection-2">#</a>Start connection</h3><p>Your partner receives the <code>room code</code>, clicks the <code>Sync Sofa</code> extension, paste it in the input area, and clicks <code>START</code> button.</p><h3 id="enjoy-yourselves-2"><a class="header-anchor" href="#enjoy-yourselves-2">#</a>Enjoy yourselves</h3><p>Now you can play the video, your operations will be synced to your partner. Enjoy yourselves!</p><p><strong>Notice</strong>:</p><p>âš ï¸ Keep your browser open and <a href="http://127.0.0.1:8080/" target="_blank" rel="noopener">http://127.0.0.1:8080/</a> itself.</p><h3 id="close-controller-webpage"><a class="header-anchor" href="#close-controller-webpage">#</a>Close Controller webpage</h3><p>After your video is finished, please click <code>STOP</code> button on <code>Sync Sofa</code> extension manually or just close <a href="http://127.0.0.1:8080/" target="_blank" rel="noopener">http://127.0.0.1:8080/</a>.</p><h2 id="installation"><a class="header-anchor" href="#installation">#</a>Installation</h2><h3 id="google-chrome"><a class="header-anchor" href="#google-chrome">#</a>Google Chrome</h3><h4 id="install-from-chrome-web-store"><a class="header-anchor" href="#install-from-chrome-web-store">#</a>Install from Chrome Web Store</h4><ol><li>Open <a href="https://chrome.google.com/webstore/detail/sync-sofa-online-video-sy/kgpnhgmpijhpkefpddoehhminpfiddmg" target="_blank" rel="noopener">Sync Sofa - Online Video Synchronizer - Chrome Web Store</a> in your Chrome</li><li>Click <code>Add to Chrome</code> button</li><li>Choose <code>Add extension</code></li></ol><h4 id="install-from-local-crx-file"><a class="header-anchor" href="#install-from-local-crx-file">#</a>Install from local .crx file</h4><ol><li>Open <a href="https://github.com/LouisYLWang/Sync-Sofa/releases/latest" target="_blank" rel="noopener">Github release page</a></li><li>Download <code>sync_sofa.[version].crx</code>, <em>[version]</em> is the number of the latest version</li><li>Open <code>chrome://extensions/</code> in your Chrome</li><li>Turn on <code>Developer mode</code> (in the top right corner)</li><li>Drag <code>sync_sofa.[version].crx</code> into the <code>chrome://extensions/</code> page</li><li>Choose <code>Add extension</code></li></ol><p><strong>Notices</strong>:<br>If the extension is disabled by Chrome, try <a href="#install-from-chrome-web-store">Install from chrome web store</a> or <a href="#install-from-unpackaged-folder">Install from unpackaged folder</a>.</p><blockquote><p>This extension is not listed in the Chrome Web Store and may have been added without your knowledge.</p></blockquote><h4 id="install-from-unpackaged-folder"><a class="header-anchor" href="#install-from-unpackaged-folder">#</a>Install from unpackaged folder</h4><ol><li>Download <a href="https://github.com/LouisYLWang/Sync-Sofa/archive/master.zip" target="_blank" rel="noopener">stable version</a> or <a href="https://github.com/LouisYLWang/Sync-Sofa/archive/dev.zip" target="_blank" rel="noopener">development version</a> (with new features and some bugs maybe)</li><li>Unzip the <code>.zip</code> file you downloaded</li><li>Open <code>chrome://extensions/</code> in your Chrome</li><li>Turn on <code>Developer mode</code> (in the top right corner)</li><li>Click <code>Load unpacked</code> (in the top left corner)</li><li>Choose <code>[download_path]/[unzip folder]/client/chrome_extension</code></li><li>Click <code>select</code></li></ol><h3 id="microsoft-edge"><a class="header-anchor" href="#microsoft-edge">#</a>Microsoft Edge:</h3><h4 id="install-from-microsoft-edge-addons"><a class="header-anchor" href="#install-from-microsoft-edge-addons">#</a>Install from Microsoft Edge Addons</h4><ol><li>Open <a href="https://microsoftedge.microsoft.com/addons/detail/kpfbclpafmmjalikjjlcoddffpfgghgp" target="_blank" rel="noopener">Sync Sofa - Online Video Synchronizer - Microsoft Edge Addons</a> in your Microsoft Edge</li><li>Click <code>Get</code> button</li></ol><h3 id="firefox-will-be-supported-in-a-later-version"><a class="header-anchor" href="#firefox-will-be-supported-in-a-later-version">#</a>Firefox (will be supported in a later version)</h3><h2 id="self-hosting-guide"><a class="header-anchor" href="#self-hosting-guide">#</a>Self-hosting Guide</h2><p><strong>Notices</strong>:<br>âš ï¸ Before hosting, make sure your server can communicate securely with HTTPS and link it to a domain name. All deploy script is based on Letâ€™s Encrypt certificates, you can customize with your own SSL certificate providers.<br>âš ï¸ dev mode intends for HTTP transmission, prod mode intends for https transmission.</p><h3 id="without-docker"><a class="header-anchor" href="#without-docker">#</a>Without Docker</h3><p><strong>1. Get binary executable file</strong></p><ul><li><p>If you want to alter the source code and build yourself, make sure you have <code>golang environment</code> in your server, then run the script below to get and build a binary file:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">go get github.com/LouisYLWang/Sync-Sofa/server</span><br><span class="line"><span class="comment"># If you don't know $GOPATH</span></span><br><span class="line"><span class="comment"># try "go env GOPATH"</span></span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$GOPATH</span>/src/github.com/LouisYLWang/Sync-Sofa/server</span><br><span class="line"></span><br><span class="line"><span class="comment"># Next step is optional</span></span><br><span class="line"><span class="comment"># If you have any error message like:</span></span><br><span class="line"><span class="comment"># "dial tcp 216.58.200.49:443: i/o timeout"</span></span><br><span class="line"><span class="comment"># then try</span></span><br><span class="line"><span class="built_in">export</span> GOPROXY=https://goproxy.io</span><br><span class="line"></span><br><span class="line">go install</span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$GOPATH</span>/bin</span><br></pre></td></tr></table></figure></li><li><p>If you want to only deploy the binary file:</p><ol><li>Open <a href="https://github.com/LouisYLWang/Sync-Sofa/releases/latest" target="_blank" rel="noopener">Github release page</a></li><li>Download <code>server</code> binary file for linux server</li><li>Download <code>config.json</code> file to the same directory of binary file</li></ol></li></ul><p><strong>2. In the directory of binary file, adjust config file base on your need:</strong></p><ul><li><p>Config file variables:</p><ul><li><code>addr</code>: port of server</li><li><code>runmode</code>:<ul><li>dev: developing mode</li><li>prod: producting mode</li></ul></li><li><code>tlsdir</code>: TLS certificate paths<ul><li><code>tlskey</code>: TLS certificate privatekey path</li><li><code>tlscert</code>: TLS certification path</li></ul></li></ul><p><strong>Notices</strong>: <code>addr</code>, <code>runmode</code> are mandatory, <code>tlskey</code>, <code>tlscert</code> are required for TLS connection</p></li><li><p>minimal (non-https) config file:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"addr"</span>: <span class="string">":80"</span>,</span><br><span class="line">  <span class="attr">"runmode"</span>: <span class="string">"dev"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>production environment (https) config file:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"addr"</span>: <span class="string">":443"</span>,</span><br><span class="line">  <span class="attr">"runmode"</span>: <span class="string">"prod"</span>,</span><br><span class="line">  <span class="attr">"tlsdir"</span>: &#123;</span><br><span class="line">    <span class="attr">"tlskey"</span>: <span class="string">"/etc/letsencrypt/live/your.host.url/privkey.pem"</span>,</span><br><span class="line">    <span class="attr">"tlscert"</span>: <span class="string">"/etc/letsencrypt/live/your.host.url/fullchain.pem"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><strong>3. Run <code>./server</code> to delopy the server, deployment is successful if you see:</strong></p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">found config file, read parameters from config file...</span><br><span class="line">server is listening at &#123;your_port_number&#125;...</span><br></pre></td></tr></table></figure><h3 id="with-docker"><a class="header-anchor" href="#with-docker">#</a>With Docker</h3><p>Make sure docker service is runing on your server, make change to the script blow and run:</p><ul><li><p>variables</p><ul><li><code>ADDR</code>: port of server</li><li><code>RUNMODE</code>:<ul><li>dev: developing mode</li><li>prod: producting mode</li></ul></li><li><code>APIHOST</code>: your host name</li><li><code>IMGNAME</code>: your docker image name, set arbitrarily</li><li><code>TLSKEYPATH</code>: TLS certificate privatekey path</li><li><code>TLSCERTPATH</code>: TLS certification path</li></ul></li><li><p>minimal (non-https) hosting script:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">docker pull louisylwang/watchtogether</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> ADDR=:4000 \      </span><br><span class="line"><span class="built_in">export</span> RUNMODE=dev \   </span><br><span class="line"><span class="built_in">export</span> IMGNAME=yourimagename \   </span><br><span class="line"></span><br><span class="line">docker run -d \</span><br><span class="line">-e ADDR=:4000 \</span><br><span class="line">-e RUNMODE=RUNMODE \</span><br><span class="line">-p 4000:4000 \</span><br><span class="line">--name IMGNAME louisylwang/watchtogether</span><br></pre></td></tr></table></figure></li><li><p>production environment (https) hosting script:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">docker pull louisylwang/watchtogether</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> ADDR=:443 \      </span><br><span class="line"><span class="built_in">export</span> RUNMODE=prod \   </span><br><span class="line"><span class="built_in">export</span> APIHOST=your.host.name \   </span><br><span class="line"><span class="built_in">export</span> IMGNAME=yourimagename \   </span><br><span class="line"><span class="built_in">export</span> TLSKEYPATH=/your/path/to/TLS/privatekey \</span><br><span class="line"><span class="built_in">export</span> TLSCERTPATH=/your/path/to/TLS/certification \</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">docker run -d \</span><br><span class="line">-e ADDR=:ADDR \</span><br><span class="line"><span class="comment">#docker port to server:server port to docker, not necessarily the same</span></span><br><span class="line">-p ADDR:ADDR \ </span><br><span class="line">-e RUNMODE=RUNMODE \</span><br><span class="line"><span class="comment">#if you use letsencrypt, TLSKEY value should be /etc/letsencrypt/live/$APIHOST/privkey.pem</span></span><br><span class="line">-e TLSKEY=TLSKEYPATH \ </span><br><span class="line"><span class="comment">#if you use letsencrypt, TLSCERT value should be /etc/letsencrypt/live/$APIHOST/fullchain.pem </span></span><br><span class="line">-e TLSCERT=TLSCERTPATH \ </span><br><span class="line"><span class="comment">#need to expose your TLS certification file to docker</span></span><br><span class="line">-v /etc/letsencrypt:/etc/letsencrypt:ro \ </span><br><span class="line">--name IMGNAME louisylwang/watchtogether \</span><br><span class="line">--restart=always</span><br></pre></td></tr></table></figure></li><li><p>deployment is successful if you see in <code>docker logs {your docker image name}</code>:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">not found config file, read parameters from system variables...</span><br><span class="line">YYYY&#x2F;MM&#x2F;DD HH:MM:SS server is listening at :ADDR...</span><br></pre></td></tr></table></figure></li></ul><h2 id="release-history"><a class="header-anchor" href="#release-history">#</a>Release History</h2><h3 id="v1-0-10"><a class="header-anchor" href="#v1-0-10">#</a>v1.0.10</h3><h2 id="ğŸ› -update-on-02-feb-2021"><a class="header-anchor" href="#ğŸ› -update-on-02-feb-2021">#</a>ğŸ›  update on 02 Feb 2021</h2><p>âš ï¸âš ï¸âš ï¸ ALL CODE can be found on <a href="https://github.com/LouisYLWang/Sync-Sofa" target="_blank" rel="noopener">https://github.com/LouisYLWang/Sync-Sofa</a>, ENJOY Video Calling and donâ€™t worry we wonâ€™t gather anything from you.</p><p>Add:</p><ol><li>Video call support.</li></ol><p>Fix:</p><ol><li>Fix bug about close connection, now you can reconnect immdediately without refreshing current page.(<code>Auto reconnect</code> will be coming soon~)</li><li>UI changed.</li><li>Fix bug about video buffering.</li></ol><h3 id="v1-0-9"><a class="header-anchor" href="#v1-0-9">#</a>v1.0.9</h3><h2 id="ğŸ› -update-on-14-aug-2020"><a class="header-anchor" href="#ğŸ› -update-on-14-aug-2020">#</a>ğŸ›  update on 14 Aug 2020</h2><p>âš ï¸âš ï¸âš ï¸ Each website has itâ€™s <code>own controller</code> of the playback rate, so please ignore the wrong display of <code>playback rate</code>.</p><p>Add:</p><ol><li>playback rate sync: any side userâ€™s change to the playback rate will sync to the other side.</li></ol><p>Fix:</p><ol><li>Fix bug of no new bugs</li></ol><h3 id="v1-0-8"><a class="header-anchor" href="#v1-0-8">#</a>v1.0.8</h3><h2 id="ğŸ› -update-on-8-aug-2020"><a class="header-anchor" href="#ğŸ› -update-on-8-aug-2020">#</a>ğŸ›  update on 8 Aug 2020</h2><p>âš ï¸âš ï¸âš ï¸ <strong>Do Not</strong> try to use <code>Room code</code> like <code>0000</code> or <code>1234</code>, We strongly recommend you use uncommon code so that you do not need to change it.</p><p>Add:</p><ol><li>allow customized connection code, user can directly connect to peer simply click the start button, without reapplying a new code</li><li>simple built-in chat feature (can be toggled in options page)</li><li>add system notification (can be toggled in options page)</li><li>add connection status budge to extension icon (red-unconnected, yellow-pending connection, green-connecting)</li><li>add a notification for unknown socket disconcerting</li><li>add duplicate connection code notification</li></ol><p>Fix:</p><ol><li>Fix bug of no new bugs</li></ol><h3 id="v1-0-7"><a class="header-anchor" href="#v1-0-7">#</a>v1.0.7</h3><h2 id="ğŸ› -update-on-7-july-2020"><a class="header-anchor" href="#ğŸ› -update-on-7-july-2020">#</a>ğŸ›  update on 7 July 2020</h2><p>âš ï¸âš ï¸âš ï¸ Notice, this version is not compatible with any version before 1.0.6 (&lt;= 1.0.5), please please please make sure your version is the same as your peerâ€™s version</p><p>Add:<br>add version detection (lower version number will be detected from the user with higher version number if a room was established by lower version extension)</p><p>Fix:<br>fix support for <a href="https://www.bilibili.com/bangumi/*" target="_blank" rel="noopener">https://www.bilibili.com/bangumi/*</a> (bilibili movie)<br>fix support for Youku &amp; mangoTV</p><h3 id="v1-0-6"><a class="header-anchor" href="#v1-0-6">#</a>v1.0.6</h3><h2 id="ğŸ› -update-on-28-june-2020"><a class="header-anchor" href="#ğŸ› -update-on-28-june-2020">#</a>ğŸ›  update on 28 June 2020</h2><p>âš ï¸âš ï¸âš ï¸ Notice, this version is not compatible with any version before, please please please make sure your version is the same as your peerâ€™s version</p><ul><li>Add:<ul><li>add support for Mango TV (happy Sistering ğŸ¤£)</li><li>add support for local video file syncing with VLC player #20</li><li>add options page - debugging mode &amp; self-hosting option #21</li><li>add donating page</li><li>add new wiki page #11</li></ul></li><li>Fix:<ul><li>improve sync performance &amp; stability:<ul><li>new sync logic, not compatible with any version before</li><li>improve buffer detection</li></ul></li></ul></li></ul><h3 id="v1-0-5"><a class="header-anchor" href="#v1-0-5">#</a>v1.0.5</h3><h2 id="ğŸ› -update-on-12-may-2020"><a class="header-anchor" href="#ğŸ› -update-on-12-may-2020">#</a>ğŸ›  update on 12 May 2020</h2><p>Improve stability</p><blockquote><p>Test for a new logic to avoid infinite echo back (each party repeats the last operation of another party) : introduce a queue as a buffer of operation and if the operations are beyond the frequency threshold, the client will automatically to halt and cool down for sometime.</p></blockquote><p>Add support for edge browser (beta)</p><h3 id="v1-0-4"><a class="header-anchor" href="#v1-0-4">#</a>v1.0.4</h3><h2 id="ğŸ› -update-on-10-may-2020"><a class="header-anchor" href="#ğŸ› -update-on-10-may-2020">#</a>ğŸ›  update on 10 May 2020</h2><p>Now the user will get a notification when they successfully connected to each other<br>Improve stability, better sync performance<br>Change the notification UI using sweetalert</p><h3 id="v1-0-3"><a class="header-anchor" href="#v1-0-3">#</a>v1.0.3</h3><h2 id="ğŸ› -update-on-8-may-2020"><a class="header-anchor" href="#ğŸ› -update-on-8-may-2020">#</a>ğŸ›  update on 8 May 2020</h2><p>improve stability &amp; UX logic<br>Added support of following websites:</p><ul><li><a href="https://www.iqiyi.com/" target="_blank" rel="noopener">iqiyi</a></li><li><a href="https://www.youku.com/" target="_blank" rel="noopener">youku</a></li><li><a href="https://www.weiyun.com/" target="_blank" rel="noopener">weiyun</a></li><li><a href="https://v.qq.com/" target="_blank" rel="noopener">tencent video</a></li></ul><p>Fixed the support of duonao live;<br>Removed the support of 91mjw (temporarily);<br>Refined documentation, will add more detail in next verison;</p><h3 id="v1-0-2"><a class="header-anchor" href="#v1-0-2">#</a>v1.0.2</h3><h2 id="ğŸ› -update-on-31-mar-2020"><a class="header-anchor" href="#ğŸ› -update-on-31-mar-2020">#</a>ğŸ›  update on 31 Mar 2020</h2><p>Add support of play process bar control sync<br>Fixed the issue that when syncing playing time, there is the possibility to crash the extension</p><h3 id="v0-0-1"><a class="header-anchor" href="#v0-0-1">#</a>v0.0.1</h3><h2 id="ğŸ› -update-on-26-mar-2020-beta-version"><a class="header-anchor" href="#ğŸ› -update-on-26-mar-2020-beta-version">#</a>ğŸ›  update on 26 Mar 2020 (beta version)</h2><p>Add support of 2 parties connection<br>Add support of sync pause and play action<br>Add support of out-of-sync notification</p><h2 id="meta"><a class="header-anchor" href="#meta">#</a>Meta</h2><p>Yiliang â€œLouisâ€ Wang â€“ <a href="https://ylwang.codes/" target="_blank" rel="noopener">@blog</a> â€“ <a href="mailto:louis.yl.wang@outlook.com">@mail</a></p><p>Onns â€“ <a href="https://onns.xyz/">@blog</a> â€“ <a href="mailto:onns@onns.xyz">@mail</a></p><h2 id="contributing"><a class="header-anchor" href="#contributing">#</a>Contributing</h2><ol><li>Fork it (<a href="https://github.com/LouisYLWang/Sync-Sofa/fork" target="_blank" rel="noopener">https://github.com/LouisYLWang/Sync-Sofa/fork</a>)</li><li>Create your feature branch (<code>git checkout -b feature/fooBar</code>)</li><li>Commit your changes (<code>git commit -am 'Add some fooBar'</code>)</li><li>Push to the branch (<code>git push origin feature/fooBar</code>)</li><li>Create a new Pull Request</li></ol><!-- Markdown link & img dfn's --><h2 id="faq"><a class="header-anchor" href="#faq">#</a>FAQ</h2><ol><li><p><strong>Q:</strong> When I installed, Chrome popup says that Sync Sofa requires the permissions of <code>read and change your data on a number of websites</code> and <code>read your browsing history</code>, sounds so horrible, is that safe?<br><strong>A:</strong> We do not collect your browsing data, the only thing we do is to get your current tab information and make sure you are visiting a site we support (<a href="#supported-list">support list</a>). All information is collected and processed locally. We do not mess up the data on the websites you are watching, just inject a sync script to get your pause, play, and seek operation. <strong>All source code can be reviewed at <a href="https://github.com/LouisYLWang/Sync-Sofa" target="_blank" rel="noopener">our github page</a>, we promise everything we did is necessary and not harmful.</strong></p></li><li><p>If your find your extension <strong>button is darken</strong>, please first make sure you are in a video playing page.</p></li><li><p>If you find your extension <strong>can not request room code</strong>, please first check the  <a href="#options-page">option page</a> and click <code>RESET</code> button. If it still not work, please close your web browser, wait for a while and try again. Currently our server is hosting abroad, it may cause connecting issue.</p></li><li><p>If you find your extension cannot connect to your peer, please check following:</p><ol><li>please make sure the <strong>version number</strong> of two clients are consistent. To check the version number, you need to open <a href="chrome://extensions/">chrome extension page</a> (if this link is not work, please type <code>chrome://extensions/</code> into the address bar and visit). You will find a extension with the title of <code>Sync Sofa - Online Video Synchronizer 1.0.6</code>. <code>1.0.6</code> is your current version number of Sync Sofa.</li><li>If 4.1 does not solve your problem, please try step 2 again.</li></ol></li></ol><h3 id="how-to-get-debug-info"><a class="header-anchor" href="#how-to-get-debug-info">#</a>How to get debug info</h3><ol><li>Open <code>Debug mode</code> in <a href="#options-page">Options page</a>.</li><li>Refresh video page (to make changes work).</li><li><code>Shift + ctrl + i</code> in Windows or <code>Shift + cmd + i</code> in MacOS.</li><li>Choose <code>console</code> tab.</li></ol><h3 id="can-not-open-vlc-web-interface"><a class="header-anchor" href="#can-not-open-vlc-web-interface">#</a>Can not open VLC web Interface</h3><p>First, check if <code>http://127.0.0.1:8080/</code>can be opened successfully, if the answer is not, go and check if <code>8080</code> is binded by some other process. If this process can be shuted down, turn it off and try again.</p><p>If not, please change the default port of the VLC web interface to <code>9891</code>. (Will come into operation from <code>v1.0.10</code>)</p><h3 id="have-regular-intervals-while-using"><a class="header-anchor" href="#have-regular-intervals-while-using">#</a>Have regular intervals while using</h3><p>The new version of <code>Sycn Sofa</code> uses <strong>System Time</strong> to sync the play time, so if the <strong>System Time</strong> of you two are different, there may be regular intervals while using. So just connect to the Internet and <strong>synchronise System Time</strong>.</p><h1 id="sync-sofa-åœ¨çº¿è§†é¢‘åŒæ­¥æ’­æ”¾æ’ä»¶"><a class="header-anchor" href="#sync-sofa-åœ¨çº¿è§†é¢‘åŒæ­¥æ’­æ”¾æ’ä»¶">#</a>Sync Sofa (åœ¨çº¿è§†é¢‘åŒæ­¥æ’­æ”¾æ’ä»¶)</h1><blockquote><p>ä»¥ç¨³å®šï¼Œå¿«æ·çš„æ–¹å¼è¿œç¨‹åŒæ­¥è§‚çœ‹åœ¨çº¿/æœ¬åœ°è§†é¢‘</p></blockquote><p><img src="https://img.shields.io/github/go-mod/go-version/LouisYLWang/Sync-Sofa?filename=server%2Fgo.mod&amp;style=flat-square" alt="GitHub go.mod Go version (subfolder of monorepo)"> <a href="https://chrome.google.com/webstore/detail/sync-sofa-beta-online-vid/kgpnhgmpijhpkefpddoehhminpfiddmg" target="_blank" rel="noopener"><img src="https://img.shields.io/chrome-web-store/users/kgpnhgmpijhpkefpddoehhminpfiddmg?style=flat-square" alt="Chrome web store users"></a> <img src="https://img.shields.io/uptimerobot/status/m785506902-abf56ee3c6b33304675185c6?label=sync-us&amp;style=flat-square" alt="Uptime Robot status"> <img src="https://img.shields.io/uptimerobot/status/m787861126-8d48fa150c9a82edd7e1315c?label=sync-us2&amp;style=flat-square" alt="Uptime Robot status"> <img src="https://img.shields.io/uptimerobot/status/m785506916-32a7dc946ed8718c859e7cdd?label=sync-cn&amp;style=flat-square" alt="Uptime Robot status"> <img src="https://img.shields.io/uptimerobot/status/m785512978-f4cf51568a716df159f1c762?label=sync-cn2&amp;style=flat-square" alt="Uptime Robot status"> <img src="https://img.shields.io/uptimerobot/status/m787861121-335727572de1d1ea7378ebf0?label=sync-cn3&amp;style=flat-square" alt="Uptime Robot status"> <img src="https://img.shields.io/uptimerobot/status/m787861123-ea67c98024d33c70b4366305?label=sync-cn4&amp;style=flat-square" alt="Uptime Robot status"></p><p><a href="#sync-sofa-streaming-video-playback-synchronizer-extension">English</a> | <a href="#sync-sofa-%E5%9C%A8%E7%BA%BF%E8%A7%86%E9%A2%91%E5%90%8C%E6%AD%A5%E6%92%AD%E6%94%BE%E6%8F%92%E4%BB%B6">ä¸­æ–‡</a></p><p>Sync Sofaæ˜¯ä¸€ä¸ªç¨³å®šæ˜“ç”¨çš„Chromeæµè§ˆå™¨æ‹“å±•æ’ä»¶ï¼Œå¯åŒæ­¥ä¸¤ç«¯ç”¨æˆ·çš„è§†é¢‘æ’­æ”¾æ“ä½œï¼Œæé«˜ä¸èº«å¤„å¼‚åœ°çš„å°ä¼™ä¼´ä¸€åŒè§‚çœ‹è§†é¢‘çš„ä½“éªŒï¼Œç›®å‰æ”¯æŒä»¥ä¸‹ä¸»è¦åŠŸèƒ½ï¼š</p><ul><li>å¹³ç­‰åŒäººè¿æ¥ï¼šä»»æ„ä¸€ç«¯å‡å¯æ§åˆ¶å¯¹æ–¹æ’­æ”¾çŠ¶æ€</li><li>åŒæ­¥æ’­æ”¾è¿›åº¦ï¼šæ”¯æŒæ’­æ”¾ã€æš‚åœã€è¿›åº¦åˆ‡æ¢ç­‰æ“ä½œ</li><li>æœ¬åœ°è§†é¢‘åŒæ­¥ï¼šå¯é€šè¿‡VLCåŒæ­¥æœ¬åœ°è§†é¢‘æ’­æ”¾çŠ¶æ€</li></ul><h2 id="å½“å‰ç‰ˆæœ¬ç‰¹æ€§"><a class="header-anchor" href="#å½“å‰ç‰ˆæœ¬ç‰¹æ€§">#</a>å½“å‰ç‰ˆæœ¬ç‰¹æ€§</h2><p><strong>v1.0.9 - 2020å¹´8æœˆ14æ—¥æ›´æ–°</strong></p><p>âš ï¸âš ï¸âš ï¸ æ¯ä¸ªç½‘ç«™éƒ½æœ‰å®ƒ<code>è‡ªå·±çš„å€é€Ÿæ§ä»¶</code>ï¼Œæ‰€ä»¥è¯·å¿½ç•¥å‰ç«¯çš„é”™è¯¯<code>æ’­æ”¾é€Ÿåº¦</code>æ˜¾ç¤ºã€‚</p><p>æ–°å¢ï¼š</p><ol><li>æ’­æ”¾é€Ÿç‡åŒæ­¥åŠŸèƒ½ï¼šä»»æ„ç«¯ç”¨æˆ·å¯¹æ’­æ”¾é€Ÿç‡çš„è°ƒæ•´ä¼šè‡ªåŠ¨åŒæ­¥è‡³å¦ä¸€ç«¯</li></ol><p>ä¿®å¤ï¼š</p><ol><li>ä¿®å¤äº†æ²¡æœ‰bugçš„bug</li></ol><hr><p><strong>v1.0.8 - 2020å¹´8æœˆ8æ—¥æ›´æ–°</strong></p><p>âš ï¸âš ï¸âš ï¸ <strong>è¯·ä¸è¦</strong>å°è¯•ä½¿ç”¨åƒ<code>0000</code>å’Œ<code>1234</code>è¿™æ ·ç®€å•çš„<code>æˆ¿é—´ç </code>ï¼Œæˆ‘ä»¬å¼ºçƒˆå»ºè®®ä½ ä½¿ç”¨ä¸å¸¸è§çš„æˆ¿é—´ç ï¼Œè¿™æ ·å°±ä¸å¿…é¢‘ç¹æ›´æ”¹å®ƒã€‚</p><p>æ–°å¢ï¼š</p><ol><li>ä¿®æ”¹æˆ¿é—´ç”³è¯·ç é€»è¾‘ï¼Œç”¨æˆ·å¯è‡ªè¡Œè¾“å…¥æˆ¿é—´ç ï¼Œä¸”ä¸‹æ¬¡è¿æ¥æ—¶æ— éœ€é‡æ–°ç”³è¯·ï¼Œåªéœ€ç‚¹å‡»startæŒ‰é’®å³å¯å¿«é€Ÿè¿æ¥ï¼ˆï¼æˆ¿é—´ç é¡»ä¸ºå››ä½å°å†™å­—æ¯+æ•°å­—çš„ç»„åˆï¼‰</li><li>å¢åŠ å†…ç½®æ–‡å­—èŠå¤©ï¼ˆå¯åœ¨é…ç½®é¡µé¢åˆ‡æ¢ï¼‰</li><li>å¢åŠ ç³»ç»Ÿé€šçŸ¥é€‰é¡¹ï¼ˆå¯åœ¨é…ç½®é¡µé¢åˆ‡æ¢ï¼‰</li><li>å¢åŠ è¿æ¥çŠ¶æ€æŒ‡ç¤ºç¯ï¼Œæ˜¾ç¤ºåœ¨æ’ä»¶å›¾æ ‡å³ä¸‹è§’ï¼ˆçº¢-æœªè¿æ¥ï¼Œé»„-ç­‰å¾…å¯¹æ–¹è¿æ¥ï¼Œç»¿-æ­£åœ¨è¿æ¥ï¼‰</li><li>å¢åŠ socketæ–­å¼€å› æœªçŸ¥åŸå› æ–­å¼€é€šçŸ¥</li><li>å¢åŠ æˆ¿é—´ç å ç”¨é€šçŸ¥</li></ol><p>ä¿®å¤ï¼š</p><ol><li>ä¿®å¤äº†æ²¡æœ‰bugçš„bug</li></ol><hr><h2 id="æ”¯æŒç½‘ç«™åˆ—è¡¨"><a class="header-anchor" href="#æ”¯æŒç½‘ç«™åˆ—è¡¨">#</a>æ”¯æŒç½‘ç«™åˆ—è¡¨</h2><ul><li><a href="https://www.iqiyi.com/" target="_blank" rel="noopener">çˆ±å¥‡è‰º</a></li><li><a href="https://www.youku.com/" target="_blank" rel="noopener">ä¼˜é…·</a></li><li><a href="https://www.weiyun.com/" target="_blank" rel="noopener">å¾®äº‘</a></li><li><a href="https://v.qq.com/" target="_blank" rel="noopener">è…¾è®¯è§†é¢‘</a></li><li><a href="https://www.youtube.com/" target="_blank" rel="noopener">æ²¹ç®¡</a></li><li><a href="https://www.mgtv.com/" target="_blank" rel="noopener">èŠ’æœ</a></li><li><a href="https://www.aliyundrive.com/" target="_blank" rel="noopener">é˜¿é‡Œäº‘ç›˜</a></li><li>é€šè¿‡æµè§ˆå™¨æ’­æ”¾æœ¬åœ°è§†é¢‘ï¼ˆä»…æ”¯æŒAVC/H.264ç¼–ç ï¼‰</li><li><a href="https://www.videolan.org/vlc/index.html" target="_blank" rel="noopener">é€šè¿‡VLCè§†é¢‘æ’­æ”¾å™¨æ’­æ”¾æœ¬åœ°è§†é¢‘</a></li></ul><p><a href="https://github.com/LouisYLWang/Sync-Sofa/blob/dev/client/chrome_extension/manifest.json#L12" target="_blank" rel="noopener">å®Œæ•´çš„æ”¯æŒç½‘ç«™åˆ—è¡¨ç‚¹è¿™é‡Œ</a><br><a href="https://github.com/LouisYLWang/Sync-Sofa/issues/22" target="_blank" rel="noopener">ç‚¹å‡»è¿™é‡Œå‘æˆ‘ä»¬åé¦ˆæ›´å¤šç½‘ç«™</a></p><h2 id="è®¾ç½®"><a class="header-anchor" href="#è®¾ç½®">#</a>è®¾ç½®</h2><p>ğŸ˜Š æ­¤éƒ¨åˆ†ä¸ºå¯é€‰è®¾ç½®ï¼Œæˆ‘ä»¬å·²ç»ä¸ºä½ é…ç½®å¥½é»˜è®¤æœåŠ¡å™¨ï¼Œå¦‚æœä½ ä¸æ„Ÿå…´è¶£ï¼Œæˆ–è€…æ²¡æœ‰ä¿®æ”¹æœåŠ¡å™¨çš„éœ€æ±‚ï¼Œè¯·ç§»æ­¥è‡³<a href="#%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E">ä¸‹ä¸€éƒ¨åˆ†</a>.</p><h3 id="æœåŠ¡å™¨åˆ—è¡¨"><a class="header-anchor" href="#æœåŠ¡å™¨åˆ—è¡¨">#</a>æœåŠ¡å™¨åˆ—è¡¨</h3><p>æœ€è¿‘è®¸å¤šç”¨æˆ·åæ˜ å›½å†…çš„è®¿é—®ä¸ç¨³å®šï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬çš„é»˜è®¤æœåŠ¡å™¨åœ¨ç¾å›½ï¼Œå› æ­¤æˆ‘ä»¬æä¾›äº†å¤‡ç”¨æœåŠ¡å™¨åˆ—è¡¨ï¼Œä½ å¯ä»¥æ ¹æ®ä½ çš„ä½ç½®åˆ‡æ¢åˆ°ç¦»ä½ è·ç¦»æ›´è¿‘çš„æœåŠ¡å™¨ã€‚</p><ul><li>ä¸­å›½æ­å·ã€1ã€‘<ul><li><code>https</code></li><li><code>sync-cn.onns.xyz</code></li></ul></li><li>ä¸­å›½åŒ—äº¬ã€2ã€‘ã€å¼ƒç”¨ã€‘ (æ„Ÿè°¢ <a href="https://github.com/huoranxuanyuan" target="_blank" rel="noopener">@huoranxuanyuan</a>)<ul><li><code>https</code></li><li><code>api.huoranxuanyuan.cn</code></li></ul></li><li>ä¸­å›½åŒ—äº¬ã€3ã€‘ (æ„Ÿè°¢ <a href="https://github.com/liqimore" target="_blank" rel="noopener">@liqimore</a>)<ul><li><code>https</code></li><li><code>sync-bj.204800.xyz</code></li></ul></li><li>ä¸­å›½ä¸Šæµ·ã€4ã€‘ (æ„Ÿè°¢ <a href="https://github.com/liqimore" target="_blank" rel="noopener">@liqimore</a>)<ul><li><code>https</code></li><li><code>sync-shanghai.204800.xyz</code></li></ul></li><li>ç¾å›½ã€1ã€‘<ul><li><code>https</code></li><li><code>app.ylwang.me</code></li></ul></li><li>ç¾å›½å¯†è‹é‡Œå·ã€2ã€‘ (æ„Ÿè°¢ <a href="https://github.com/liqimore" target="_blank" rel="noopener">@liqimore</a>)<ul><li><code>https</code></li><li><code>sync-us-central.pq02.com</code></li></ul></li></ul><p>åœ¨è®¾ç½®æœåŠ¡å™¨å‰ï¼Œè¯·æ£€æŸ¥æœåŠ¡å™¨çš„çŠ¶æ€ï¼š<a href="#sync-sofa-%E5%9C%A8%E7%BA%BF%E8%A7%86%E9%A2%91%E5%90%8C%E6%AD%A5%E6%92%AD%E6%94%BE%E6%8F%92%E4%BB%B6">Sync Sofa (åœ¨çº¿è§†é¢‘åŒæ­¥æ’­æ”¾æ’ä»¶)</a>.</p><p>æˆ‘ä»¬ä¼šæ„Ÿè°¢ä½ å¯¹è¯¥å¼€æºé¡¹ç›®ä½œå‡ºçš„è´¡çŒ®ï¼Œä½ å¯ä»¥é€šè¿‡<strong>æä¾›è‡ªå·±éƒ¨ç½²çš„æœåŠ¡</strong>æ¥æ”¯æŒæˆ‘ä»¬ï¼Œä¹Ÿå¯ä»¥å¸®æˆ‘ä»¬<strong>åˆ†æ‹…ä¸€ç‚¹æœåŠ¡å™¨è´¹ç”¨</strong>çš„å‹åŠ›ã€‚ï¼ˆ<s>ä¹Ÿå¯ä»¥ä¸€é”®ä¸‰è¿</s>ï¼‰</p><p><strong>æ”¯ä»˜å®, å¾®ä¿¡æ”¯ä»˜, è´å®</strong></p><p><img src="https://onns.xyz/blog/image/20200704-1.png" alt="alipay"> <img src="https://onns.xyz/blog/image/20200704-2.png" alt="wechat pay"> <img src="https://onns.xyz/blog/image/20200704-3.jpg" alt="paypal"></p><h3 id="é€‰é¡¹é¡µ"><a class="header-anchor" href="#é€‰é¡¹é¡µ">#</a>é€‰é¡¹é¡µ</h3><p>æ‰“å¼€é€‰é¡¹é¡µæœ‰ä¸‹åˆ—ä¸¤ç§æ–¹æ³•ï¼š</p><ol><li>å³é”®ç‚¹å‡»<code>Sync Sofa</code>æ’ä»¶å›¾æ ‡, é€‰æ‹©<code>é€‰é¡¹</code>ã€‚</li><li>å·¦é”®ç‚¹å‡»<code>Sync Sofa</code>æ’ä»¶å›¾æ ‡, åœ¨æ’ä»¶å¼¹çª—ä¸­é€‰æ‹©åº•éƒ¨<code>è®¾ç½®</code>å›¾æ ‡ã€‚</li></ol><p>è®¾ç½®ç•Œé¢å¦‚ä¸‹ï¼š</p><p><img src="https://onns.xyz/blog/image/20200629-3.png" alt="Sync Sofa - Options"></p><h3 id="åˆ·æ–°è§†é¢‘é¡µé¢"><a class="header-anchor" href="#åˆ·æ–°è§†é¢‘é¡µé¢">#</a>åˆ·æ–°è§†é¢‘é¡µé¢</h3><p>ä¿®æ”¹è®¾ç½®å¹¶ä¿å­˜åï¼Œè¯·åˆ·æ–°è§†é¢‘ç½‘ç«™é¡µé¢/æœ¬åœ°è§†é¢‘é¡µé¢/ <a href="http://127.0.0.1:8080/" target="_blank" rel="noopener">http://127.0.0.1:8080/</a>ï¼ˆå¦‚æœä½ ä½¿ç”¨VLCæ’­æ”¾æœ¬åœ°è§†é¢‘ï¼‰æ¥ä½¿è®¾ç½®ç”Ÿæ•ˆã€‚</p><h2 id="ä½¿ç”¨è¯´æ˜"><a class="header-anchor" href="#ä½¿ç”¨è¯´æ˜">#</a>ä½¿ç”¨è¯´æ˜</h2><h3 id="æ³¨æ„äº‹é¡¹"><a class="header-anchor" href="#æ³¨æ„äº‹é¡¹">#</a>æ³¨æ„äº‹é¡¹</h3><p>âš ï¸ ä½¿ç”¨å‰è¯·ç¡®ä¿ä¸¤ä¸ª<code>å®¢æˆ·ç«¯ç‰ˆæœ¬å·</code>ä¸€è‡´ã€‚</p><p>âš ï¸ ä½¿ç”¨å‰è¯·ç¡®ä¿ä¸¤ä¸ª<code>æœåŠ¡å™¨åŸŸå</code>ä¸€è‡´ã€‚</p><p>âš ï¸ å¦‚éœ€æ’­æ”¾æœ¬åœ°<code>.mp4</code>æ–‡ä»¶ï¼Œè¯·åœ¨æ‰©å±•è¯¦ç»†ä¿¡æ¯é¡µé¢å¯ç”¨â€œå…è®¸è®¿é—®æ–‡ä»¶urlâ€ã€‚</p><p>æ–¹æ³•1. åœ¨åœ°å€æ è¾“å…¥<code>chrome://extensions/</code>ï¼Œæ‰¾åˆ°<code>Sync Sofa</code>ï¼Œç‚¹å‡»<code>è¯¦æƒ…</code>æŒ‰é’®ï¼Œå¯ç”¨<code>å…è®¸è®¿é—®æ–‡ä»¶ç½‘å€</code>ã€‚</p><p>æ–¹æ³•2.å³å‡»æµè§ˆå™¨å·¦ä¸Šè§’<code>Sync Sofa</code>å›¾æ ‡ï¼Œé€‰æ‹©<code>ç®¡ç†æ‹“å±•ç¨‹åº</code>, å¯ç”¨<code>å…è®¸è®¿é—®æ–‡ä»¶ç½‘å€</code>ã€‚</p><p>âš ï¸ å¦‚æœä½ çš„æµè§ˆå™¨ä¸­å®‰è£…äº†<code>å¤šä¸ªä¸åŒç‰ˆæœ¬</code>çš„<code>Sync Sofa</code>,è¯·åªå¯ç”¨å…¶ä¸­ä¸€ä¸ªå¹¶ç¦ç”¨å…¶ä»–ç‰ˆæœ¬ã€‚</p><h3 id="æ‰“å¼€è§†é¢‘é¡µé¢"><a class="header-anchor" href="#æ‰“å¼€è§†é¢‘é¡µé¢">#</a>æ‰“å¼€è§†é¢‘é¡µé¢</h3><p>ä½ ä»¬å¯ä»¥åŒæ­¥è§‚çœ‹ä¸åŒæ¥æºçš„è§†é¢‘ï¼Œåœ¨æ’­æ”¾æœ¬åœ°<code>.mp4</code>è§†é¢‘æ–‡ä»¶æ—¶ï¼Œä½ çš„å°ä¼™ä¼´å¯ä»¥é€‰æ‹©åœ¨è§†é¢‘ç½‘ç«™ä¸Šå’Œä½ åŒæ­¥è§‚çœ‹ï¼Œæ­¤å¤–ï¼Œä½ ä»¬è¿˜å¯ä»¥åœ¨ä¸åŒçš„è§†é¢‘ç½‘ç«™çœ‹è§‚çœ‹ç›¸åŒçš„è§†é¢‘ã€‚</p><p>ä¾‹å¦‚ï¼Œ<code>ç”¨æˆ·A</code>åœ¨Bilibiliä¸Šè§‚çœ‹æ­¤è§†é¢‘ï¼š</p><ul><li><a href="https://www.bilibili.com/video/BV1k5411Y7Rc" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1k5411Y7Rc</a><br><img src="https://onns.xyz/blog/image/20200627-1.png" alt="User A"></li></ul><p>æ­¤æ—¶<code>ç”¨æˆ·B</code>å¯åœ¨YouTubeä¸ŠåŒæ­¥è§‚çœ‹åŒä¸€è§†é¢‘ï¼š</p><ul><li><a href="https://www.youtube.com/watch?v=QAelMP1PoNA" target="_blank" rel="noopener">https://www.youtube.com/watch?v=QAelMP1PoNA</a><br><img src="https://onns.xyz/blog/image/20200627-2.png" alt="User B"></li></ul><p>PSï¼šæˆ‘æ˜¯bokiçš„ç²‰ä¸ï¼Œæ‰€ä»¥å°±ç”¨äº†å¥¹çš„è§†é¢‘æˆªå›¾ï¼Œå·²ç»é«˜æ–¯æ¨¡ç³Šå¤„ç†è¿‡äº†ï¼Œå¦‚æœæœ‰ä¾µæƒçš„è¯ï¼Œè¯·è”ç³»æˆ‘ä»¬åˆ é™¤ï¼ŒçœŸçš„å¾ˆæŠ±æ­‰ï¼</p><p>å¦‚æœè§†é¢‘å¼€å§‹å‰æœ‰å¹¿å‘Šï¼Œè¯·åœ¨å¹¿å‘Šç»“æŸåè¿›å…¥ä¸‹ä¸€æ­¥ã€‚</p><h3 id="è·å–è¿æ¥ç "><a class="header-anchor" href="#è·å–è¿æ¥ç ">#</a>è·å–è¿æ¥ç </h3><p>ç‚¹å‡» <code>Sync Sofa</code> æ’ä»¶å›¾æ ‡å¹¶ç‚¹å‡»<code>START</code>ï¼ˆå¼€å§‹ï¼‰ æŒ‰é’®.</p><p><img src="https://onns.xyz/blog/image/20200627-3.png" alt="User A"></p><p>å¦‚ä¸€åˆ‡æ­£å¸¸ï¼Œä½ ä¼šæ”¶åˆ°å¼¹çª—æç¤º<code>Room created and room code copied to clipboard</code> ï¼ˆæˆ¿é—´å·²å»ºç«‹ï¼Œè¿æ¥ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼‰ï¼ŒåŒæ—¶<code>è¿æ¥ç </code>å°†è‡ªåŠ¨æ‹·è´åˆ°å‰ªåˆ‡æ¿ä¸­ï¼Œè¯·å°†å®ƒå‘ç»™ä½ çš„å°ä¼™ä¼´ã€‚</p><h3 id="å¼€å§‹è¿æ¥"><a class="header-anchor" href="#å¼€å§‹è¿æ¥">#</a>å¼€å§‹è¿æ¥</h3><p>ä½ çš„å°ä¼™ä¼´æ”¶åˆ°<code>room codeï¼ˆè¿æ¥ç ï¼‰</code>åï¼Œç‚¹å‡»<code>Sync Sofa</code>æ’ä»¶å›¾æ ‡ï¼Œç²˜è´´åˆ°è¾“å…¥æ ä¸­ç‚¹å‡»<code>STARTï¼ˆå¼€å§‹ï¼‰</code>æŒ‰é’®ã€‚</p><p><img src="https://onns.xyz/blog/image/20200627-4.png" alt="User B"></p><h3 id="æ„‰å¿«è§‚çœ‹å§"><a class="header-anchor" href="#æ„‰å¿«è§‚çœ‹å§">#</a>æ„‰å¿«è§‚çœ‹å§</h3><p><img src="https://onns.xyz/blog/image/20200627-5.png" alt="User A"><br><img src="https://onns.xyz/blog/image/20200627-6.png" alt="User B"></p><p>ç°åœ¨ä½ å¯ä»¥æ’­æ”¾è§†é¢‘äº†ï¼Œä½ çš„æ’­æ”¾ï¼Œæš‚åœï¼Œæ›´æ”¹æ—¶é—´ç­‰æ“ä½œéƒ½ä¼šåŒæ­¥ç»™ä½ çš„å°ä¼™ä¼´ã€‚æ„‰å¿«åœ°åŒæ­¥è§‚çœ‹å§!</p><h2 id="vlcæ”¯æŒ"><a class="header-anchor" href="#vlcæ”¯æŒ">#</a>VLCæ”¯æŒ</h2><p>å¦‚æœä½ ä»¬éƒ½é€šè¿‡<code>VLC åª’ä½“æ’­æ”¾å™¨</code>æ’­æ”¾è§†é¢‘ï¼Œ<code>Sync Sofa</code>ä¹Ÿå¯ä»¥åŒæ­¥ä½ ä»¬çš„æ“ä½œã€‚</p><h3 id="é€šè¿‡webæ§åˆ¶ç•Œé¢æ“æ§vlcæ’­æ”¾"><a class="header-anchor" href="#é€šè¿‡webæ§åˆ¶ç•Œé¢æ“æ§vlcæ’­æ”¾">#</a>é€šè¿‡Webæ§åˆ¶ç•Œé¢æ“æ§VLCæ’­æ”¾</h3><p>é¦–å…ˆä½ ä»¬éœ€è¦å¼€å¯VLCçš„Webæ§åˆ¶ç•Œé¢ï¼Œä½¿æµè§ˆå™¨å¯ä»¥æ§åˆ¶VLCçš„æ’­æ”¾ï¼Œè¯·å‚è€ƒä»¥ä¸‹å®˜æ–¹æ–‡æ¡£ï¼š</p><ul><li><a href="https://wiki.videolan.org/Control_VLC_via_a_browser/" target="_blank" rel="noopener">é€šè¿‡æµè§ˆå™¨æ§åˆ¶VLC</a></li><li><a href="https://wiki.videolan.org/Documentation:Modules/http_intf/#VLC_2.0.0_and_later" target="_blank" rel="noopener">å¼€å¯VLCçš„webæ§åˆ¶ç•Œé¢</a></li></ul><ol><li>æ‰“å¼€VLCåª’ä½“æ’­æ”¾å™¨</li><li>è¿›å…¥ <code>å·¥å…· â†’ åå¥½è®¾ç½® (å·¦ä¸‹è§’æ˜¾ç¤ºè®¾ç½®é€‰æ‹© &quot;å…¨éƒ¨&quot;) â†’ ç•Œé¢ â†’ ä¸»ç•Œé¢</code>, å‹¾é€‰ â€œWebâ€<br><img src="https://onns.xyz/blog/image/20200628-1.png" alt="Step 2"></li><li>è¿›å…¥ <code>å·¥å…· â†’ åå¥½è®¾ç½® (å·¦ä¸‹è§’æ˜¾ç¤ºè®¾ç½®é€‰æ‹© &quot;å…¨éƒ¨&quot;) â†’ ç•Œé¢ â†’ ä¸»ç•Œé¢ â†’ Lua</code>, è®¾ç½® <code>Lua HTTP - å¯†ç </code><br><img src="https://onns.xyz/blog/image/20200628-2.png" alt="Step 3"></li><li>ç‚¹å‡»<code>ä¿å­˜</code> å¹¶é‡å¯VLCåª’ä½“æ’­æ”¾å™¨</li><li>åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ <a href="http://127.0.0.1:8080/" target="_blank" rel="noopener">http://127.0.0.1:8080/</a></li></ol><p>è¿™æ—¶ä½ çš„ç½‘é¡µåº”è¯¥å¦‚ä¸‹å›¾æ‰€ç¤º:</p><p><img src="https://onns.xyz/blog/image/20200628-3.png" alt="VLC media player - Web Interface"></p><h3 id="æ‰“å¼€æœ¬åœ°è§†é¢‘"><a class="header-anchor" href="#æ‰“å¼€æœ¬åœ°è§†é¢‘">#</a>æ‰“å¼€æœ¬åœ°è§†é¢‘</h3><p>æœ¬æ’ä»¶æœ¬è´¨ä¸Šæ˜¯é€šè¿‡æ§åˆ¶<code>VLCçš„ç½‘é¡µæ§åˆ¶é¡µé¢</code>ï¼ˆ<a href="http://127.0.0.1:8080/" target="_blank" rel="noopener">http://127.0.0.1:8080/</a>ï¼‰æ¥æ§åˆ¶<code>VLC</code>çš„ï¼Œæ‰€ä»¥ä¸‹ä¸€æ­¥ä½ åº”è¯¥ç”¨<code>VLCåª’ä½“æ’­æ”¾å™¨</code>æ¥æ‰“å¼€ä½ æƒ³åŒæ­¥çš„è§†é¢‘ï¼Œç„¶åæ£€æŸ¥ä¸€ä¸‹<a href="http://127.0.0.1:8080/" target="_blank" rel="noopener">http://127.0.0.1:8080/</a>èƒ½å¦é¡ºåˆ©æ§åˆ¶è§†é¢‘çš„æ’­æ”¾ç­‰ã€‚å¦‚æœå¯ä»¥ï¼Œå³å¯è¿›å…¥ä¸‹ä¸€æ­¥ï¼›å¦åˆ™éœ€è¦æ£€æŸ¥ä¸€ä¸‹æ˜¯ä¸æ˜¯æ‰“å¼€äº†å¤šä¸ª<code>VLCçš„çª—å£</code>ï¼Œå¦‚æœæ˜¯è¯·å…³æ‰å…¶å®ƒçš„ï¼Œç„¶åé‡æ–°å°è¯•æ§åˆ¶ã€‚ä¸€ä¸ªæ­£å¸¸çš„<code>VLCæ§åˆ¶ç•Œé¢</code>åº”è¯¥å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://onns.xyz/blog/image/20200722-1.png" alt="VLC media player - Web Interface"></p><p>åœ¨ç½‘é¡µä¸Šæœ‰è§†é¢‘æ ‡é¢˜ï¼Œå½“å‰æ’­æ”¾æ—¶é—´å’Œæ€»æ’­æ”¾æ—¶é•¿ç­‰ã€‚</p><h3 id="è·å–è¿æ¥ç -2"><a class="header-anchor" href="#è·å–è¿æ¥ç -2">#</a>è·å–è¿æ¥ç </h3><p>ç¡®è®¤å·²åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ <a href="http://127.0.0.1:8080/" target="_blank" rel="noopener">http://127.0.0.1:8080/</a>,<br>ç‚¹å‡» <code>Sync Sofa</code> æ’ä»¶å›¾æ ‡å¹¶ç‚¹å‡»<code>REQUEST NEW CODE</code>ï¼ˆè·å–é“¾æ¥ç ï¼‰ æŒ‰é’®.</p><p>å¦‚ä¸€åˆ‡æ­£å¸¸ï¼Œä½ ä¼šæ”¶åˆ°å¼¹çª—æç¤º<code>Room created and room code copied to clipboard</code>ï¼ˆæˆ¿é—´å·²å»ºç«‹ï¼Œè¿æ¥ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼ŒåŒæ—¶<code>è¿æ¥ç </code>å°†è‡ªåŠ¨æ‹·è´åˆ°å‰ªåˆ‡æ¿ä¸­ï¼Œè¯·å°†å®ƒå‘ç»™ä½ çš„å°ä¼™ä¼´ã€‚</p><h3 id="å¼€å§‹è¿æ¥-2"><a class="header-anchor" href="#å¼€å§‹è¿æ¥-2">#</a>å¼€å§‹è¿æ¥</h3><p>ä½ çš„å°ä¼™ä¼´æ”¶åˆ°<code>room code</code>åï¼Œç‚¹å‡»<code>Sync Sofa</code>æ’ä»¶å›¾æ ‡ï¼Œç²˜è´´åˆ°è¾“å…¥æ ä¸­ç‚¹å‡»<code>START</code>ï¼ˆå¼€å§‹ï¼‰æŒ‰é’®ã€‚</p><h3 id="æ„‰å¿«è§‚çœ‹å§-2"><a class="header-anchor" href="#æ„‰å¿«è§‚çœ‹å§-2">#</a>æ„‰å¿«è§‚çœ‹å§</h3><p>ç°åœ¨ä½ å¯ä»¥ä½¿ç”¨<code>Sync Sofa</code>é€šè¿‡VLCåŒæ­¥æœ¬åœ°è§†é¢‘æ’­æ”¾çŠ¶æ€äº†ï¼Œä½ çš„æ’­æ”¾ï¼Œæš‚åœï¼Œæ›´æ”¹æ—¶é—´ç­‰æ“ä½œéƒ½ä¼šåŒæ­¥ç»™ä½ çš„å°ä¼™ä¼´ã€‚æ„‰å¿«åœ°åŒæ­¥è§‚çœ‹å§!</p><p><strong>æ³¨æ„</strong>:</p><p>âš ï¸ åœ¨æ’­æ”¾æ—¶ï¼Œåˆ‡å‹¿å…³é—­<a href="http://127.0.0.1:8080/" target="_blank" rel="noopener">http://127.0.0.1:8080/</a>é¡µé¢ã€‚</p><h3 id="å…³é—­æ§åˆ¶é¡µé¢"><a class="header-anchor" href="#å…³é—­æ§åˆ¶é¡µé¢">#</a>å…³é—­æ§åˆ¶é¡µé¢</h3><p>è§†é¢‘æ’­æ”¾å®Œæ¯•åï¼Œç‚¹å‡»<code>Sync Sofa</code>æ’ä»¶é¡µé¢ä¸Šçš„<code>STOP</code>æŒ‰é’®ï¼Œæˆ–å…³é—­<a href="http://127.0.0.1:8080/" target="_blank" rel="noopener">http://127.0.0.1:8080/</a>é¡µé¢ã€‚</p><h2 id="å®‰è£…"><a class="header-anchor" href="#å®‰è£…">#</a>å®‰è£…</h2><h3 id="è°·æ­Œæµè§ˆå™¨"><a class="header-anchor" href="#è°·æ­Œæµè§ˆå™¨">#</a>è°·æ­Œæµè§ˆå™¨</h3><h4 id="ä»è°·æ­Œå•†åº—å®‰è£…"><a class="header-anchor" href="#ä»è°·æ­Œå•†åº—å®‰è£…">#</a>ä»è°·æ­Œå•†åº—å®‰è£…</h4><ol><li>åœ¨Chromeæµè§ˆå™¨ä¸­æ‰“å¼€ <a href="https://chrome.google.com/webstore/detail/sync-sofa-online-video-sy/kgpnhgmpijhpkefpddoehhminpfiddmg" target="_blank" rel="noopener">Sync Sofa - Online Video Synchronizer - Chrome Web Store</a></li><li>ç‚¹å‡» <code>Add to Chrome</code> æŒ‰é’®</li><li>é€‰æ‹© <code>Add extension</code></li></ol><h4 id="ä»æœ¬åœ°-crx-æ–‡ä»¶å®‰è£…"><a class="header-anchor" href="#ä»æœ¬åœ°-crx-æ–‡ä»¶å®‰è£…">#</a>ä»æœ¬åœ° .crx æ–‡ä»¶å®‰è£…</h4><ol><li>æ‰“å¼€ <a href="https://github.com/LouisYLWang/Sync-Sofa/releases/latest" target="_blank" rel="noopener">Github release pageï¼ˆç‰ˆæœ¬å‘å¸ƒé¡µé¢ï¼‰</a></li><li>ä¸‹è½½ <code>sync_sofa.[version].crx</code>, <em>[version]</em> ä¸ºå½“å‰æœ€æ–°ç‰ˆæœ¬ç¼–å·</li><li>åœ¨Chromeæµè§ˆå™¨åœ°å€æ ä¸­è¾“å…¥ <code>chrome://extensions/</code></li><li>å¯ç”¨ <code>å¼€å‘è€…æ¨¡å¼</code> (é¡µé¢å³ä¸Šè§’)</li><li>å°† <code>sync_sofa.[ç‰ˆæœ¬å·].crx</code> æ‹–å…¥ <code>chrome://extensions/</code> é¡µé¢</li><li>ç‚¹å‡» <code>æ·»åŠ æ’ä»¶</code> æŒ‰é’®</li></ol><p><strong>æ³¨æ„</strong>:<br>å¦‚æœè¯¥æ’ä»¶è¢«Chromeæµè§ˆå™¨ç¦ç”¨ï¼Œè¯·å°è¯• <a href="#%E4%BB%8E%E8%B0%B7%E6%AD%8C%E5%95%86%E5%BA%97%E5%AE%89%E8%A3%85">ä»è°·æ­Œå•†åº—å®‰è£…</a> æˆ–è€… <a href="#%E5%AE%89%E8%A3%85%E6%9C%AA%E6%89%93%E5%8C%85%E7%9A%84%E6%8F%92%E4%BB%B6">å®‰è£…æœªæ‰“åŒ…çš„æ’ä»¶</a></p><blockquote><p>This extension is not listed in the Chrome Web Store and may have been added without your knowledge.</p></blockquote><h4 id="å®‰è£…æœªæ‰“åŒ…çš„æ’ä»¶"><a class="header-anchor" href="#å®‰è£…æœªæ‰“åŒ…çš„æ’ä»¶">#</a>å®‰è£…æœªæ‰“åŒ…çš„æ’ä»¶</h4><ol><li>ä¸‹è½½ <a href="https://github.com/LouisYLWang/Sync-Sofa/archive/master.zip" target="_blank" rel="noopener">ç¨³å®šç‰ˆæœ¬</a> or <a href="https://github.com/LouisYLWang/Sync-Sofa/archive/dev.zip" target="_blank" rel="noopener">å¼€å‘ç‰ˆæœ¬</a> (æ–°ç‰¹æ€§ï¼Œä¹Ÿè®¸ä¹Ÿæœ‰bug)</li><li>è§£å‹ä½ ä¸‹è½½çš„<code>.zip</code> å‹ç¼©æ–‡ä»¶</li><li>åœ¨Chromeåœ°å€æ è¾“å…¥ <code>chrome://extensions/</code> æ‰“å¼€æ’ä»¶ç®¡ç†é¡µé¢</li><li>å¼€å¯å³ä¸Šè§’<code>å¼€å‘è€…æ¨¡å¼</code> æŒ‰é’®</li><li>ç‚¹å‡»å·¦ä¸Šè§’<code>åŠ è½½æœªæ‰“åŒ…çš„æ‹“å±•</code> æŒ‰é’®</li><li>é€‰æ‹© <code>ä¸‹è½½è·¯å¾„/è§£å‹è·¯å¾„/client/chrome_extension</code></li><li>ç‚¹å‡» <code>é€‰æ‹©</code></li></ol><h3 id="å¾®è½¯edgeæµè§ˆå™¨"><a class="header-anchor" href="#å¾®è½¯edgeæµè§ˆå™¨">#</a>å¾®è½¯Edgeæµè§ˆå™¨:</h3><h4 id="ä»edgeæµè§ˆå™¨æ’ä»¶ä¸­å¿ƒå®‰è£…"><a class="header-anchor" href="#ä»edgeæµè§ˆå™¨æ’ä»¶ä¸­å¿ƒå®‰è£…">#</a>ä»Edgeæµè§ˆå™¨æ’ä»¶ä¸­å¿ƒå®‰è£…</h4><ol><li>åœ¨Edgeæµè§ˆå™¨ä¸­æ‰“å¼€ <a href="https://microsoftedge.microsoft.com/addons/detail/kpfbclpafmmjalikjjlcoddffpfgghgp" target="_blank" rel="noopener">Sync Sofa - Online Video Synchronizer - Microsoft Edge Addons</a></li><li>ç‚¹å‡» <code>è·å–</code> æŒ‰é’®</li></ol><h3 id="firefoxï¼ˆåç»­ç‰ˆæœ¬æ·»åŠ æ”¯æŒï¼‰"><a class="header-anchor" href="#firefoxï¼ˆåç»­ç‰ˆæœ¬æ·»åŠ æ”¯æŒï¼‰">#</a>Firefoxï¼ˆåç»­ç‰ˆæœ¬æ·»åŠ æ”¯æŒï¼‰</h3><p><s>å…¶å®ä¹Ÿå¯èƒ½ä¸ä¼š</s></p><h2 id="æœåŠ¡ç«¯éƒ¨ç½²æŒ‡å—"><a class="header-anchor" href="#æœåŠ¡ç«¯éƒ¨ç½²æŒ‡å—">#</a>æœåŠ¡ç«¯éƒ¨ç½²æŒ‡å—</h2><p><strong>æ³¨æ„</strong>:</p><p>âš ï¸ éƒ¨ç½²å‰ï¼Œå»ºè®®ä½ çš„æœåŠ¡å™¨å·²ç»éƒ¨ç½²äº†SSL/TLSè¯ä¹¦ï¼Œå¹¶å·²è¿æ¥åˆ°åŸŸåã€‚ä»¥ä¸‹éƒ¨ç½²è„šæœ¬åŸºäºä½¿ç”¨Letâ€™s Encrypt certificateséªŒè¯çš„æœåŠ¡å™¨ï¼Œå¦‚ä½¿ç”¨å…¶ä»–çš„è¯ä¹¦æä¾›å•†ï¼Œå¯èƒ½éœ€è¦ä¿®æ”¹éƒ¨åˆ†è„šæœ¬ä»¥æ­£å¸¸è¿è¡Œã€‚</p><p>âš ï¸ devæ¨¡å¼ä½¿ç”¨httpåè®®è¿›è¡Œä¼ è¾“ï¼Œprodä½¿ç”¨httpsåè®®è¿›è¡Œä¼ è¾“</p><h3 id="ç›´æ¥éƒ¨ç½²ï¼ˆä¸ä½¿ç”¨dockerå®¹å™¨ï¼‰"><a class="header-anchor" href="#ç›´æ¥éƒ¨ç½²ï¼ˆä¸ä½¿ç”¨dockerå®¹å™¨ï¼‰">#</a>ç›´æ¥éƒ¨ç½²ï¼ˆä¸ä½¿ç”¨Dockerå®¹å™¨ï¼‰:</h3><p><strong>1. è·å–æ‰§è¡Œæ–‡ä»¶</strong></p><ul><li><p>å¦‚æœä½ æƒ³è¦ä¿®æ”¹æºä»£ç å¹¶è‡ªè¡Œç¼–è¯‘ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹shellè„šæœ¬è·å–äºŒè¿›åˆ¶æ–‡ä»¶ã€‚åœ¨æ‰§è¡Œå‰ï¼Œè¯·ç¡®è®¤æœåŠ¡å™¨å·²å®‰è£…<code>Go</code>çš„ç¯å¢ƒ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">go get github.com/LouisYLWang/Sync-Sofa/server</span><br><span class="line"><span class="comment"># å¦‚æœä½ ä¸æ¸…æ¥š $GOPATH</span></span><br><span class="line"><span class="comment"># è¯·å°è¯•è¾“å…¥å¹¶æ‰§è¡Œ "go env GOPATH"</span></span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$GOPATH</span>/src/github.com/LouisYLWang/Sync-Sofa/server</span><br><span class="line"></span><br><span class="line"><span class="comment"># ï¼ˆä¸‹ä¸€æ­¥å¯çœç•¥ï¼‰</span></span><br><span class="line"><span class="comment"># å¦‚æœä½ çœ‹åˆ°äº†è¿™æ¡æ¶ˆæ¯:</span></span><br><span class="line"><span class="comment"># "dial tcp 216.58.200.49:443: i/o timeout"</span></span><br><span class="line"><span class="comment"># è¯·æ·»åŠ å¹¶æ‰§è¡Œä¸‹ä¸€æ¡å‘½ä»¤</span></span><br><span class="line"><span class="built_in">export</span> GOPROXY=https://goproxy.io</span><br><span class="line"></span><br><span class="line">go install</span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$GOPATH</span>/bin</span><br></pre></td></tr></table></figure></li><li><p>å¦‚æœæ— éœ€ä¿®æ”¹æºä»£ç å¹¶è‡ªè¡Œç¼–è¯‘ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥ä¸‹è½½äºŒè¿›åˆ¶æ–‡ä»¶:</p><ol><li>æ‰“å¼€ <a href="https://github.com/LouisYLWang/Sync-Sofa/releases/latest" target="_blank" rel="noopener">Github release page</a></li><li>ä¸‹è½½ <code>server</code> æ–‡ä»¶ï¼ˆé€‚ç”¨äºlinuxæœåŠ¡å™¨ï¼‰</li><li>ä¸‹è½½ <code>config.json</code> æ–‡ä»¶ï¼Œç§»åŠ¨è‡³<code>server</code>åŒä¸€è·¯å¾„</li></ol></li></ul><p><strong>2. ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š</strong></p><ul><li><p>é…ç½®å˜é‡ï¼š</p><ul><li><code>addr</code>: æœåŠ¡å™¨ç«¯å£</li><li><code>runmode</code>:<ul><li>dev: å¼€å‘æ¨¡å¼ï¼ˆå»ºè®®æœ¬åœ°ä½¿ç”¨ï¼Œä¸åŒ…å«å¯¹HTTPSçš„æ”¯æŒï¼‰</li><li>prod: ç”Ÿäº§æ¨¡å¼</li></ul></li><li><code>tlsdir</code>:<ul><li><code>tlskey</code>: TLSè¯ä¹¦ç§é’¥è·¯å¾„</li><li><code>tlscert</code>: TLSè¯ä¹¦è·¯å¾„</li></ul></li></ul><p><strong>Notices</strong>: <code>addr</code>, <code>runmode</code> ä¸ºå¿…é¡»å‚æ•°, <code>tlskey</code>, <code>tlscert</code> å‚æ•°åœ¨ä½¿ç”¨HTTPSè¿æ¥æ—¶ï¼ˆç”Ÿäº§ç¯å¢ƒä¸‹ï¼‰ä¸ºå¿…é¡»å‚æ•°</p></li><li><p>å¼€å‘æ¨¡å¼ï¼ˆhttpï¼‰é…ç½®æ–‡ä»¶æ ·ä¾‹:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"addr"</span>: <span class="string">":80"</span>,</span><br><span class="line">  <span class="attr">"runmode"</span>: <span class="string">"dev"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç”Ÿäº§æ¨¡å¼ï¼ˆhttpsï¼‰é…ç½®æ–‡ä»¶æ ·ä¾‹:</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"addr"</span>: <span class="string">":443"</span>,</span><br><span class="line">  <span class="attr">"runmode"</span>: <span class="string">"prod"</span>,</span><br><span class="line">  <span class="attr">"tlsdir"</span>: &#123;</span><br><span class="line">    <span class="attr">"tlskey"</span>: <span class="string">"/etc/letsencrypt/live/your.host.url/privkey.pem"</span>,</span><br><span class="line">    <span class="attr">"tlscert"</span>: <span class="string">"/etc/letsencrypt/live/your.host.url/fullchain.pem"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><strong>3. åœ¨æ‰§è¡Œæ–‡ä»¶æ‰€åœ¨è·¯å¾„ä¸‹ï¼Œæ‰§è¡Œ <code>./server</code> éƒ¨ç½²æœåŠ¡å™¨, éƒ¨ç½²æˆåŠŸä¿¡æ¯å¦‚ä¸‹:</strong></p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">found config file, read parameters from config file...</span><br><span class="line">server is listening at &#123;your_port_number&#125;...</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨dockerå®¹å™¨éƒ¨ç½²"><a class="header-anchor" href="#ä½¿ç”¨dockerå®¹å™¨éƒ¨ç½²">#</a>ä½¿ç”¨Dockerå®¹å™¨éƒ¨ç½²</h3><p>åœ¨éƒ¨ç½²å‰è¯·ç¡®è®¤Dockerå®¹å™¨åœ¨æœåŠ¡å™¨ç«¯å¯æ­£å¸¸è¿è¡Œï¼Œè¯·æŒ‰ç…§å¦‚ä¸‹æç¤ºä¿®æ”¹å‚æ•°</p><ul><li><p>é…ç½®å˜é‡ï¼š</p><ul><li><code>ADDR</code>: æœåŠ¡å™¨ç«¯å£</li><li><code>RUNMODE</code>:<ul><li>dev: å¼€å‘æ¨¡å¼ï¼ˆå»ºè®®æœ¬åœ°ä½¿ç”¨ï¼Œä¸åŒ…å«å¯¹HTTPSçš„æ”¯æŒï¼‰</li><li>prod: ç”Ÿäº§æ¨¡å¼</li></ul></li><li><code>APIHOST</code>: æœåŠ¡å™¨ç½‘å€</li><li><code>IMGNAME</code>: dockerå®¹å™¨åç§°ï¼ˆå¯è‡ªé€‰ï¼‰</li><li><code>TLSKEYPATH</code>: TLSè¯ä¹¦ç§é’¥è·¯å¾„</li><li><code>TLSCERTPATH</code>: TLSè¯ä¹¦è·¯å¾„</li></ul></li><li><p>å¼€å‘æ¨¡å¼ï¼ˆhttpï¼‰é…ç½®æ–‡ä»¶æ ·ä¾‹:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">docker pull louisylwang/watchtogether</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> ADDR=:4000 \      </span><br><span class="line"><span class="built_in">export</span> RUNMODE=dev \   </span><br><span class="line"><span class="built_in">export</span> IMGNAME=yourimagename \   </span><br><span class="line"></span><br><span class="line">docker run -d \</span><br><span class="line">-e ADDR=:4000 \</span><br><span class="line">-e RUNMODE=RUNMODE \</span><br><span class="line">-p 4000:4000 \</span><br><span class="line">--name IMGNAME louisylwang/watchtogether</span><br></pre></td></tr></table></figure></li><li><p>ç”Ÿäº§æ¨¡å¼ï¼ˆhttpsï¼‰é…ç½®æ–‡ä»¶æ ·ä¾‹:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">docker pull louisylwang/watchtogether</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> ADDR=:443 \      </span><br><span class="line"><span class="built_in">export</span> RUNMODE=prod \   </span><br><span class="line"><span class="built_in">export</span> APIHOST=your.host.name \   </span><br><span class="line"><span class="built_in">export</span> IMGNAME=yourimagename \   </span><br><span class="line"><span class="built_in">export</span> TLSKEYPATH=/your/path/to/TLS/privatekey \</span><br><span class="line"><span class="built_in">export</span> TLSCERTPATH=/your/path/to/TLS/certification \</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">docker run -d \</span><br><span class="line">-e ADDR=:ADDR \</span><br><span class="line"><span class="comment">#docker port to server:server port to docker, not necessarily the same</span></span><br><span class="line">-p ADDR:ADDR \ </span><br><span class="line">-e RUNMODE=RUNMODE \</span><br><span class="line"><span class="comment">#if you use letsencrypt, TLSKEY value should be /etc/letsencrypt/live/$APIHOST/privkey.pem</span></span><br><span class="line">-e TLSKEY=TLSKEYPATH \ </span><br><span class="line"><span class="comment">#if you use letsencrypt, TLSCERT value should be /etc/letsencrypt/live/$APIHOST/fullchain.pem </span></span><br><span class="line">-e TLSCERT=TLSCERTPATH \ </span><br><span class="line"><span class="comment">#need to expose your TLS certification file to docker</span></span><br><span class="line">-v /etc/letsencrypt:/etc/letsencrypt:ro \ </span><br><span class="line">--name IMGNAME louisylwang/watchtogether \</span><br><span class="line">--restart=always</span><br></pre></td></tr></table></figure></li><li><p>éƒ¨ç½²æˆåŠŸåï¼Œæ‰§è¡Œ <code>docker logs {your docker image name}</code>å°†ä¼šæç¤ºä¸‹åˆ—æ—¥å¿—ä¿¡æ¯:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">not found config file, read parameters from system variables...</span><br><span class="line">YYYY&#x2F;MM&#x2F;DD HH:MM:SS server is listening at :ADDR...</span><br></pre></td></tr></table></figure></li></ul><h2 id="ç‰ˆæœ¬æ—¥å¿—"><a class="header-anchor" href="#ç‰ˆæœ¬æ—¥å¿—">#</a>ç‰ˆæœ¬æ—¥å¿—</h2><h3 id="v1-0-9-2"><a class="header-anchor" href="#v1-0-9-2">#</a>v1.0.9</h3><h2 id="ğŸ› -2020å¹´8æœˆ14æ—¥æ›´æ–°"><a class="header-anchor" href="#ğŸ› -2020å¹´8æœˆ14æ—¥æ›´æ–°">#</a>ğŸ›  2020å¹´8æœˆ14æ—¥æ›´æ–°</h2><p>âš ï¸âš ï¸âš ï¸ æ¯ä¸ªç½‘ç«™éƒ½æœ‰å®ƒ<code>è‡ªå·±çš„å€é€Ÿæ§ä»¶</code>ï¼Œæ‰€ä»¥è¯·å¿½ç•¥å‰ç«¯çš„é”™è¯¯<code>æ’­æ”¾é€Ÿåº¦</code>æ˜¾ç¤ºã€‚</p><p>æ–°å¢ï¼š</p><ol><li>æ’­æ”¾é€Ÿç‡åŒæ­¥åŠŸèƒ½ï¼šä»»æ„ç«¯ç”¨æˆ·å¯¹æ’­æ”¾é€Ÿç‡çš„è°ƒæ•´ä¼šè‡ªåŠ¨åŒæ­¥è‡³å¦ä¸€ç«¯</li></ol><p>ä¿®å¤ï¼š</p><ol><li>ä¿®å¤äº†æ²¡æœ‰bugçš„bug</li></ol><h3 id="v1-0-8-2"><a class="header-anchor" href="#v1-0-8-2">#</a>v1.0.8</h3><h2 id="ğŸ› -2020å¹´8æœˆ8æ—¥æ›´æ–°"><a class="header-anchor" href="#ğŸ› -2020å¹´8æœˆ8æ—¥æ›´æ–°">#</a>ğŸ›  2020å¹´8æœˆ8æ—¥æ›´æ–°</h2><p>âš ï¸âš ï¸âš ï¸ <strong>è¯·ä¸è¦</strong>å°è¯•ä½¿ç”¨åƒ<code>0000</code>å’Œ<code>1234</code>è¿™æ ·ç®€å•çš„<code>æˆ¿é—´ç </code>ï¼Œæˆ‘ä»¬å¼ºçƒˆå»ºè®®ä½ ä½¿ç”¨ä¸å¸¸è§çš„æˆ¿é—´ç ï¼Œè¿™æ ·å°±ä¸å¿…é¢‘ç¹æ›´æ”¹å®ƒã€‚</p><p>æ–°å¢ï¼š</p><ol><li>ä¿®æ”¹æˆ¿é—´ç”³è¯·ç é€»è¾‘ï¼Œç”¨æˆ·å¯è‡ªè¡Œè¾“å…¥æˆ¿é—´ç ï¼Œä¸”ä¸‹æ¬¡è¿æ¥æ—¶æ— éœ€é‡æ–°ç”³è¯·ï¼Œåªéœ€ç‚¹å‡»startæŒ‰é’®å³å¯å¿«é€Ÿè¿æ¥ï¼ˆï¼æˆ¿é—´ç é¡»ä¸ºå››ä½å°å†™å­—æ¯+æ•°å­—çš„ç»„åˆï¼‰</li><li>å¢åŠ å†…ç½®æ–‡å­—èŠå¤©ï¼ˆå¯åœ¨é…ç½®é¡µé¢åˆ‡æ¢ï¼‰</li><li>å¢åŠ ç³»ç»Ÿé€šçŸ¥é€‰é¡¹ï¼ˆå¯åœ¨é…ç½®é¡µé¢åˆ‡æ¢ï¼‰</li><li>å¢åŠ è¿æ¥çŠ¶æ€æŒ‡ç¤ºç¯ï¼Œæ˜¾ç¤ºåœ¨æ’ä»¶å›¾æ ‡å³ä¸‹è§’ï¼ˆçº¢-æœªè¿æ¥ï¼Œé»„-ç­‰å¾…å¯¹æ–¹è¿æ¥ï¼Œç»¿-æ­£åœ¨è¿æ¥ï¼‰</li><li>å¢åŠ socketæ–­å¼€å› æœªçŸ¥åŸå› æ–­å¼€é€šçŸ¥</li><li>å¢åŠ æˆ¿é—´ç å ç”¨é€šçŸ¥</li></ol><p>ä¿®å¤ï¼š</p><ol><li>ä¿®å¤äº†æ²¡æœ‰bugçš„bug</li></ol><h3 id="v1-0-7-2"><a class="header-anchor" href="#v1-0-7-2">#</a>v1.0.7</h3><h2 id="ğŸ› -2020å¹´7æœˆ5æ—¥æ›´æ–°"><a class="header-anchor" href="#ğŸ› -2020å¹´7æœˆ5æ—¥æ›´æ–°">#</a>ğŸ›  2020å¹´7æœˆ5æ—¥æ›´æ–°</h2><p>âš ï¸âš ï¸âš ï¸ æ³¨æ„ï¼Œæ­¤ç‰ˆæœ¬ä¸&lt;= 1.0.5çš„ä»»ä½•ç‰ˆæœ¬éƒ½ä¸å…¼å®¹ï¼Œè¯·åŠ¡å¿…ç¡®ä¿ä½ çš„ç‰ˆæœ¬ä¸å°ä¼™ä¼´çš„ç‰ˆæœ¬ä¸€è‡´ã€‚</p><ul><li>æ–°å¢åŠŸèƒ½ï¼š<ul><li>æ–°å¢ç‰ˆæœ¬æ£€æµ‹ï¼ˆé«˜ç‰ˆæœ¬ç”¨æˆ·ä¸ä½ç‰ˆæœ¬ç”¨æˆ·è¿æ¥æ—¶ï¼Œè‹¥è¿æ¥ç ç”±ä½ç‰ˆæœ¬ç”¨æˆ·ç”³è¯·ï¼Œé«˜ç‰ˆæœ¬ç”¨æˆ·å°†æ”¶åˆ°æç¤ºï¼Œè¯·æ ¹æ®æç¤ºå‘ŠçŸ¥å¯¹æ–¹å‡çº§æœ€æ–°ç‰ˆæœ¬ï¼‰</li></ul></li><li>ä¿®å¤åŠŸèƒ½:<ul><li>ä¿®å¤å¯¹ <a href="https://www.bilibili.com/bangumi/*" target="_blank" rel="noopener">bilibili movie</a> çš„æ”¯æŒ</li><li>ä¿®å¤äº†ä¼˜é…·åŠèŠ’æœTVæ— æ³•åŒæ­¥æ“ä½œçš„é—®é¢˜</li></ul></li></ul><h3 id="v1-0-6-2"><a class="header-anchor" href="#v1-0-6-2">#</a>v1.0.6</h3><h2 id="ğŸ› -2020å¹´6æœˆ28æ—¥æ›´æ–°"><a class="header-anchor" href="#ğŸ› -2020å¹´6æœˆ28æ—¥æ›´æ–°">#</a>ğŸ›  2020å¹´6æœˆ28æ—¥æ›´æ–°</h2><p>âš ï¸âš ï¸âš ï¸ æ³¨æ„ï¼Œæ­¤ç‰ˆæœ¬ä¸ä¹‹å‰çš„ä»»ä½•ç‰ˆæœ¬éƒ½ä¸å…¼å®¹ï¼Œè¯·åŠ¡å¿…ç¡®ä¿ä½ çš„ç‰ˆæœ¬ä¸å°ä¼™ä¼´çš„ç‰ˆæœ¬ä¸€è‡´ã€‚</p><ul><li>æ–°å¢åŠŸèƒ½ï¼š<ul><li>æ”¯æŒèŠ’æœTVï¼ˆæ¥ä¹˜é£ç ´æµªå§ï¼ğŸ¤£ï¼‰</li><li>æ”¯æŒä½¿ç”¨VLCæ’­æ”¾å™¨åŒæ­¥æ’­æ”¾æœ¬åœ°è§†é¢‘æ–‡ä»¶</li><li>æ–°å¢è®¾ç½®é¡µé¢-è°ƒè¯•æ¨¡å¼</li><li>æ–°å¢æèµ é¡µé¢</li><li>æ–°å¢wikié¡µé¢</li></ul></li><li>ä¿®å¤åŠŸèƒ½:<ul><li>æé«˜åŒæ­¥çš„ç¨³å®šæ€§:<ul><li>æ›´æ–°äº†åŒæ­¥é€»è¾‘ï¼ˆä¸ä¸ä¹‹å‰çš„ä»»ä½•ç‰ˆæœ¬å…¼å®¹ï¼Œè¯·å°½å¿«æ›´æ–°è‡³1.0.6+ï¼‰</li><li>å¢åŠ ç¼“å†²æ£€æµ‹</li></ul></li></ul></li></ul><h3 id="v1-0-5-2"><a class="header-anchor" href="#v1-0-5-2">#</a>v1.0.5</h3><h2 id="ğŸ› -2020å¹´5æœˆ12æ—¥æ›´æ–°"><a class="header-anchor" href="#ğŸ› -2020å¹´5æœˆ12æ—¥æ›´æ–°">#</a>ğŸ›  2020å¹´5æœˆ12æ—¥æ›´æ–°</h2><ul><li>æ–°å¢åŠŸèƒ½ï¼š<ul><li>å¢åŠ å¯¹Edgeæµè§ˆå™¨çš„æ”¯æŒ</li></ul></li><li>ä¿®å¤åŠŸèƒ½ï¼š<ul><li>æé«˜åŒæ­¥çš„ç¨³å®šæ€§</li></ul></li></ul><h3 id="v1-0-4-2"><a class="header-anchor" href="#v1-0-4-2">#</a>v1.0.4</h3><h2 id="ğŸ› -2020å¹´5æœˆ10æ—¥æ›´æ–°"><a class="header-anchor" href="#ğŸ› -2020å¹´5æœˆ10æ—¥æ›´æ–°">#</a>ğŸ›  2020å¹´5æœˆ10æ—¥æ›´æ–°</h2><ul><li>æ–°å¢åŠŸèƒ½ï¼š<ul><li>æ–°å¢æˆåŠŸè¿æ¥æç¤º</li></ul></li><li>ä¿®å¤åŠŸèƒ½ï¼š<ul><li>æé«˜åŒæ­¥çš„ç¨³å®šæ€§</li><li>ä¿®æ”¹æ¶ˆæ¯å¼¹çª—æ ·å¼</li></ul></li></ul><h3 id="v1-0-3-2"><a class="header-anchor" href="#v1-0-3-2">#</a>v1.0.3</h3><h2 id="ğŸ› -2020å¹´5æœˆ8æ—¥æ›´æ–°"><a class="header-anchor" href="#ğŸ› -2020å¹´5æœˆ8æ—¥æ›´æ–°">#</a>ğŸ›  2020å¹´5æœˆ8æ—¥æ›´æ–°</h2><ul><li>æ–°å¢åŠŸèƒ½ï¼š<ul><li>æ–°å¢å¯¹ä»¥ä¸‹è§†é¢‘ç½‘ç«™çš„æ”¯æŒ<ul><li><a href="https://www.iqiyi.com/" target="_blank" rel="noopener">çˆ±å¥‡è‰º</a></li><li><a href="https://www.youku.com/" target="_blank" rel="noopener">ä¼˜é…·</a></li><li><a href="https://www.weiyun.com/" target="_blank" rel="noopener">å¾®äº‘</a></li><li><a href="https://v.qq.com/" target="_blank" rel="noopener">è…¾è®¯è§†é¢‘</a></li></ul></li></ul></li><li>ä¿®å¤åŠŸèƒ½ï¼š<ul><li>æé«˜åŒæ­¥çš„ç¨³å®šæ€§</li><li>ä¿®æ”¹æ–‡æ¡£</li></ul></li></ul><h3 id="v1-0-2-2"><a class="header-anchor" href="#v1-0-2-2">#</a>v1.0.2</h3><h2 id="ğŸ› -2020å¹´3æœˆ31æ—¥æ›´æ–°"><a class="header-anchor" href="#ğŸ› -2020å¹´3æœˆ31æ—¥æ›´æ–°">#</a>ğŸ›  2020å¹´3æœˆ31æ—¥æ›´æ–°</h2><ul><li>æ–°å¢åŠŸèƒ½ï¼š<ul><li>æ”¯æŒå¯¹ä¿®æ”¹æ’­æ”¾è¿›åº¦çš„åŒæ­¥</li></ul></li><li>ä¿®å¤åŠŸèƒ½ï¼š<ul><li>æé«˜åŒæ­¥çš„ç¨³å®šæ€§</li></ul></li></ul><h3 id="v0-0-1-2"><a class="header-anchor" href="#v0-0-1-2">#</a>v0.0.1</h3><h2 id="ğŸ› -2020å¹´3æœˆ26æ—¥æ›´æ–°-æµ‹è¯•ç‰ˆ"><a class="header-anchor" href="#ğŸ› -2020å¹´3æœˆ26æ—¥æ›´æ–°-æµ‹è¯•ç‰ˆ">#</a>ğŸ›  2020å¹´3æœˆ26æ—¥æ›´æ–° (æµ‹è¯•ç‰ˆ)</h2><ul><li>æ–°å¢åŠŸèƒ½ï¼š<ul><li>æ”¯æŒæ’­æ”¾æš‚åœåŒæ­¥</li><li>æ”¯æŒæ–­å¼€è¿æ¥æç¤º</li></ul></li></ul><h2 id="å¼€å‘è€…"><a class="header-anchor" href="#å¼€å‘è€…">#</a>å¼€å‘è€…</h2><p>Yiliang â€œLouisâ€ Wang â€“ <a href="https://ylwang.codes/" target="_blank" rel="noopener">@blog</a> â€“ <a href="mailto:louis.yl.wang@outlook.com">@mail</a></p><p>Onns â€“ <a href="https://onns.xyz/">@blog</a> â€“ <a href="mailto:onns@onns.xyz">@mail</a></p><h2 id="å‚ä¸æ›´æ–°"><a class="header-anchor" href="#å‚ä¸æ›´æ–°">#</a>å‚ä¸æ›´æ–°</h2><ol><li>æ‹·è´å½“å‰ä»£ç ï¼ˆ<a href="https://github.com/LouisYLWang/Sync-Sofa/fork%EF%BC%89" target="_blank" rel="noopener">https://github.com/LouisYLWang/Sync-Sofa/forkï¼‰</a></li><li>åˆ›å»ºä½ è‡ªå·±çš„åˆ†æ”¯ (<code>git checkout -b feature/fooBar</code>)</li><li>æ·»åŠ è¯„è®º (<code>git commit -am 'Add some fooBar'</code>)</li><li>æäº¤ä»£ç  (<code>git push origin feature/fooBar</code>)</li><li>åˆ›å»ºä¸€ä¸ªæ›´æ–°è¯·æ±‚</li></ol><!-- Markdown link & img dfn's --><h2 id="å¸¸è§é—®é¢˜"><a class="header-anchor" href="#å¸¸è§é—®é¢˜">#</a>å¸¸è§é—®é¢˜</h2><ol><li><p><strong>Q:</strong> åœ¨æˆ‘å®‰è£…çš„æ—¶å€™ï¼ŒChromeæç¤ºæˆ‘Sync Sofaå¯ä»¥<code>è¯»å–å’Œæ›´æ”¹æ‚¨åœ¨ä¸€äº›ç½‘ç«™ä¸Šçš„æ•°æ®</code>ä»¥åŠ<code>è¯»å–æ‚¨çš„æµè§ˆè®°å½•</code>ï¼Œå¬èµ·æ¥å¾ˆä¸¥é‡ï¼Œå®ƒå®‰å…¨å—ï¼Ÿ</p><p><strong>A:</strong> æˆ‘ä»¬ä¸ä¼šæ”¶é›†ä½ çš„æµè§ˆæ•°æ®ï¼Œæˆ‘ä»¬åªä¼šè¯»å–ä½ å½“å‰æ ‡ç­¾é¡µçš„æ ‡é¢˜ï¼Œç”¨æ¥åˆ¤æ–­ä½ æ˜¯å¦åœ¨è®¿é—®æˆ‘ä»¬æ”¯æŒçš„é¡µé¢(<a href="#supported-list">æ”¯æŒç½‘ç«™åˆ—è¡¨</a>)ï¼Œä»¥é¿å…å½±å“ä½¿ç”¨ä½“éªŒçš„äº‹æƒ…å‘ç”Ÿã€‚æ‰€æœ‰å¯¹ä½ æµè§ˆæ•°æ®çš„æ”¶é›†å’Œå¤„ç†åªä¼šå‘ç”Ÿåœ¨æœ¬åœ°ï¼›äº‹å®ä¸Šæˆ‘ä»¬ä¹Ÿä¸ä¼šéšæ„ä¿®æ”¹ç½‘ç«™çš„æ•°æ®ï¼Œæˆ‘ä»¬åªä¼šä½¿ç”¨ä¸€ä¸ªåŒæ­¥è„šæœ¬æ¥ç›‘æµ‹ä½ æ’­æ”¾ï¼Œæš‚åœåŠæ›´æ–°è¿›åº¦ç­‰æ“ä½œï¼ˆæˆ‘ä»¬ä¸å¾—ä¸è¿™æ ·åšï¼‰ã€‚<strong>æ‰€æœ‰çš„æºç éƒ½å¯ä»¥åœ¨ [æˆ‘ä»¬çš„é¡¹ç›®ä¸»é¡µ]å®¡æ ¸(<a href="https://github.com/LouisYLWang/Sync-Sofa" target="_blank" rel="noopener">https://github.com/LouisYLWang/Sync-Sofa</a>), æˆ‘ä»¬æ‰¿è¯ºç›®å‰åšçš„æ‰€æœ‰äº‹æƒ…éƒ½æ˜¯å¿…è¦ä¸”æ— å®³çš„.</strong></p></li><li><p>å¦‚æœä½ å‘ç°<strong>æŒ‰é’®å˜ç°</strong>, è¯·ç¡®è®¤ä½ æ˜¯å¦åœ¨æˆ‘ä»¬æ”¯æŒçš„ç½‘ç«™æ“ä½œ(<a href="#supported-list">æ”¯æŒç½‘ç«™åˆ—è¡¨</a>).</p></li><li><p>å¦‚æœä½ å‘ç°æ’ä»¶<strong>æ— æ³•è·å–åŒæ­¥ç </strong>ï¼Œè¯·æŒ‰ä»¥ä¸‹é¡ºåºæ£€æŸ¥é—®é¢˜ï¼š</p><ol><li>è¯·æ£€æŸ¥ <a href="#options-page">é€‰é¡¹é¡µé¢</a> å¹¶ç‚¹å‡»<code>é‡ç½®</code> æŒ‰é’®</li><li>è¯·å‚è€ƒ <a href="#options-page">é€‰é¡¹é¡µé¢</a> æ ¹æ®ä½ æ‰€åœ¨çš„ä½ç½®é€‰æ‹©å¹¶è®¾ç½®åˆé€‚çš„æœåŠ¡å™¨</li><li>è¯·æ£€æŸ¥æœåŠ¡å™¨å½“å‰çŠ¶æ€ <a href="https://sync-status.onns.xyz/" target="_blank" rel="noopener">https://sync-status.onns.xyz/</a>æ˜¯å¦æ­£å¸¸å¯åŠ¨</li><li>å¦‚ä»¥ä¸Šéƒ½ä¸èƒ½è§£å†³ä½ çš„é—®é¢˜ï¼Œè¯·é€šè¿‡<a href="https://github.com/LouisYLWang/Sync-Sofa/issues" target="_blank" rel="noopener">é¡¹ç›®åé¦ˆé¡µé¢</a>æˆ–<a href="https://onns.xyz/sync-sofa/">é¡¹ç›®wikié¡µé¢</a>å³ä¸‹è§’çš„åé¦ˆæŒ‰é’®é€šçŸ¥æˆ‘ä»¬ã€‚</li></ol></li><li><p>å¦‚æœä½ å‘ç°æ’ä»¶<strong>æ— æ³•æ­£å¸¸åŒæ­¥æ“ä½œ</strong>ï¼Œè¯·æŒ‰ä»¥ä¸‹é¡ºåºæ£€æŸ¥é—®é¢˜ï¼š</p><ol><li>è¯·åŠ¡å¿…ç¡®è®¤ä¸¤æ–¹ç‰ˆæœ¬å·æ˜¯å¦ä¸€è‡´ï¼Œæ¬²æ£€æµ‹ç‰ˆæœ¬å·ï¼Œéœ€æ‰“å¼€<a href="chrome://extensions/">chrome extension page</a>ï¼Œå¹¶æ‰¾åˆ°<code>Sync Sofa - Online Video Synchronizer *.*.*</code>ï¼Œå…¶ä¸­ <code>*.*.*</code> ä¸ºå½“å‰ç‰ˆæœ¬ã€‚</li><li>è¯·æ£€æŸ¥ <a href="#options-page">é€‰é¡¹é¡µé¢</a> å¹¶ç‚¹å‡»<code>é‡ç½®</code> æŒ‰é’®</li><li>è¯·å‚è€ƒ <a href="#options-page">é€‰é¡¹é¡µé¢</a> æ ¹æ®ä½ æ‰€åœ¨çš„ä½ç½®é€‰æ‹©å¹¶è®¾ç½®åˆé€‚çš„æœåŠ¡å™¨</li><li>è¯·æ£€æŸ¥æœåŠ¡å™¨å½“å‰çŠ¶æ€ <a href="https://sync-status.onns.xyz/" target="_blank" rel="noopener">https://sync-status.onns.xyz/</a>æ˜¯å¦æ­£å¸¸å¯åŠ¨.</li><li>å¦‚ä»¥ä¸Šéƒ½ä¸èƒ½è§£å†³ä½ çš„é—®é¢˜ï¼Œè¯·é€šè¿‡<a href="https://github.com/LouisYLWang/Sync-Sofa/issues" target="_blank" rel="noopener">é¡¹ç›®åé¦ˆé¡µé¢</a>æˆ–<a href="https://onns.xyz/sync-sofa/">é¡¹ç›®wikié¡µé¢</a>å³ä¸‹è§’çš„åé¦ˆæŒ‰é’®é€šçŸ¥æˆ‘ä»¬ã€‚</li></ol></li></ol><h3 id="å¦‚ä½•è·å–è°ƒè¯•ä¿¡æ¯"><a class="header-anchor" href="#å¦‚ä½•è·å–è°ƒè¯•ä¿¡æ¯">#</a>å¦‚ä½•è·å–è°ƒè¯•ä¿¡æ¯</h3><ol><li>åœ¨<a href="#%E9%80%89%E9%A1%B9%E9%A1%B5">é€‰é¡¹é¡µ</a>é‡Œæ‰“å¼€ <code>debugæ¨¡å¼</code>ã€‚</li><li>åˆ·æ–°è§†é¢‘é¡µé¢ã€‚</li><li><code>Shift + ctrl + i</code> åœ¨ Windows ä¸‹ æˆ–è€… <code>Shift + cmd + i</code> åœ¨ MacOS ä¸‹.</li><li>é€‰æ‹© <code>console</code> æ ‡ç­¾é¡µ.</li></ol><h3 id="vlcåŒæ­¥åŠŸèƒ½æ— æ³•æ­£å¸¸ä½¿ç”¨"><a class="header-anchor" href="#vlcåŒæ­¥åŠŸèƒ½æ— æ³•æ­£å¸¸ä½¿ç”¨">#</a>VLCåŒæ­¥åŠŸèƒ½æ— æ³•æ­£å¸¸ä½¿ç”¨</h3><p>é¦–å…ˆç¡®è®¤<code>http://127.0.0.1:8080/</code>èƒ½å¦æ­£å¸¸æ‰“å¼€ï¼Œå¦‚æœä¸èƒ½ï¼Œè¯·æŸ¥çœ‹ä¸€ä¸‹<code>8080</code>ç«¯å£æ˜¯å¦è¢«å…¶å®ƒåº”ç”¨ç¨‹åºå ç”¨ã€‚å¦‚æœè¯¥ç¨‹åºå¯ä»¥è¢«å…³é—­ï¼Œè¯·å…³é—­åå†æ¬¡å°è¯•å¼€å¯ã€‚</p><p>å¦‚æœä¸èƒ½ï¼Œè¯·å‚è€ƒç›¸å…³é…ç½®å°†<code>VLC</code>çš„ç«¯å£å·è®¾ç½®ä¸º<code>9891</code>ã€‚ï¼ˆå°†åœ¨<code>v1.0.10</code>ä¹‹åç”Ÿæ•ˆï¼‰</p><p>å¦‚æœå¯ä»¥æ‰“å¼€<code>http://127.0.0.1:8080/</code>ï¼Œä½†é¡µé¢æ— æ³•æ­£å¸¸æ¸²æŸ“ï¼Œè¯·å°è¯•å¼€å¯<code>ç§‘å­¦ä¸Šç½‘</code>åå†æ¬¡åˆ·æ–°é¡µé¢ã€‚ï¼ˆé¡µé¢éœ€è¦åŠ è½½googleçš„ä¸€ä¸ªjsæ–‡ä»¶ï¼‰</p><h3 id="åœ¨ä½¿ç”¨æ—¶æœ‰å›ºå®šçš„æ’­æ”¾é—´éš”"><a class="header-anchor" href="#åœ¨ä½¿ç”¨æ—¶æœ‰å›ºå®šçš„æ’­æ”¾é—´éš”">#</a>åœ¨ä½¿ç”¨æ—¶æœ‰å›ºå®šçš„æ’­æ”¾é—´éš”</h3><p>æ–°ç‰ˆçš„<code>Sync Sofa</code>æ’ä»¶ä½¿ç”¨äº†<strong>ç³»ç»Ÿæ—¶é—´</strong>æ¥åŒæ­¥æ’­æ”¾æ—¶é—´ï¼Œå¦‚æœä¸¤ä¸ªè®¾å¤‡çš„<strong>ç³»ç»Ÿæ—¶é—´</strong>ä¸ä¸€è‡´ï¼Œå°±ä¼šäº§ç”Ÿå›ºå®šçš„æ—¶é—´é—´éš”ã€‚è§£å†³æ–¹æ³•æ˜¯è”ç½‘<strong>åŒæ­¥ç³»ç»Ÿæ—¶é—´</strong>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> try </category>
          
      </categories>
      
      
        <tags>
            
            <tag> chrome </tag>
            
            <tag> extension </tag>
            
            <tag> sync-sofa </tag>
            
            <tag> document </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®ä¿¡è¡¨æƒ…åŒ…</title>
      <link href="/blog/2020/08/10/wechat-sticker/"/>
      <url>/blog/2020/08/10/wechat-sticker/</url>
      
        <content type="html"><![CDATA[<p>ä¸€ç›´æœ‰ä¸ªæ„¿æœ›å¸Œæœ›å¯ä»¥åšä¸€å¥—è¡¨æƒ…åŒ…ï¼ŒçŒ«çŒ«ç‹—ç‹—çš„ï¼Œå‘å¸ƒåˆ°å¾®ä¿¡è¡¨æƒ…å•†åº—å»ï¼Œç„¶åè·å¾—ä¸€ä»½æ¥è‡ªé™Œç”Ÿäººçš„æ‰“èµã€‚</p><p>å…œå…œè½¬è½¬ï¼Œæœ€ç»ˆç»ˆäºå‘å‡ºå»äº†ï¼š<a href="https://w.url.cn/s/AhnuUpf#wechat_redirect" target="_blank" rel="noopener">ã€åœ†ä¸æºœQã€‘</a></p><center><p><img src="//onns.xyz/blog/image/20200810-1.jpg" alt="QQ"></p></center><a id="more"></a><p>å››èˆäº”å…¥ï¼Œä¹Ÿç®—æ˜¯æœ‰äº†è‡ªå·±çš„çŒ«äº†ã€‚</p><p>ä¹Ÿç®—æ˜¯ä»Šå¹´çš„å°ç›®æ ‡ï¼š</p><ul><li>å‘å¸ƒä¸€å¥—å¾®ä¿¡è¡¨æƒ… âœ“</li><li>è·å¾—ä¸€ä»½é™Œç”Ÿäººçš„èµèµ x</li></ul><p>å¼€é€šèµèµå¥½éº»çƒ¦ï¼Œéœ€è¦çš„ç´ ææ–‡ä»¶å¤§å°å¤ªå¤§ï¼Œåœ¨<code>é™è´¨</code>æ–¹é¢æµªè´¹äº†å¥½å¤šæ—¶é—´ã€‚</p><p>ç»“æœå› ä¸ºç”¨é”™å­—ä½“ï¼Œåˆé‡æ–°å¯¼å‡ºäº†ä¸€æ¬¡è¡¨æƒ…åŒ…ï¼Œå¦‚æœèƒ½å¤Ÿæ‰¹é‡å¯¼å‡ºï¼Œè¯¥æœ‰å¤šå¥½å‘€ã€‚</p><p>ç¬¬ä¸€æ¬¡å®¡æ ¸ç¬¬äºŒå¤©å°±å‡ºç»“æœäº†ï¼Œä¸é€šè¿‡ï¼Œå› ä¸º<code>æ†¨æ‰¹</code>è¿™ä¸ªè¯ï¼Œä¸ç¬¦åˆä»·å€¼è§‚ã€‚</p><p>ç¬¬äºŒæ¬¡æ˜¯äº”å¤©åæ‰å‡ºçš„ç»“æœï¼Œç»ˆäºé€šè¿‡äº†ï¼Œå”‰ â•®(â•¯â–½â•°)â•­ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> try </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¾®ä¿¡ </tag>
            
            <tag> wechat </tag>
            
            <tag> è¡¨æƒ…åŒ… </tag>
            
            <tag> sticker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxè¿½åŠ æ—¥å¿—æµ‹è¯•</title>
      <link href="/blog/2020/08/10/log-write-test/"/>
      <url>/blog/2020/08/10/log-write-test/</url>
      
        <content type="html"><![CDATA[<p>æ’ä»¶ç›‘æ§æœ‰ç”¨åˆ°ç®€å•çš„æ–‡ä»¶ç³»ç»Ÿï¼Œæƒ³çŸ¥é“å†™å…¥é‡å¾ˆå¤§ä¹‹åä¼šä¸ä¼šæœ‰å¤ªå¤§çš„æ€§èƒ½é—®é¢˜ï¼Œè¿™æ ·æ‰å¥½ç¡®å®šæ˜¯å•ä¸ªæ—¥å¿—æ–‡ä»¶ï¼ˆæ–¹ä¾¿æ”¶é›†å’ŒæŸ¥çœ‹ï¼‰è¿˜æ˜¯è¦å¤šä¸ªæ—¥å¿—æ–‡ä»¶ã€‚</p><a id="more"></a><h2 id="ä¿®æ”¹ç§é’¥æƒé™"><a class="header-anchor" href="#ä¿®æ”¹ç§é’¥æƒé™">#</a>ä¿®æ”¹ç§é’¥æƒé™</h2><p>ä¸€èˆ¬ SSH ç§é’¥éƒ½è¦èµ‹äºˆä¸€ä¸ª<code>600</code>çš„æƒé™ï¼Œå¦åˆ™ä¼šæç¤ºæƒé™è¿‡é«˜ä¸èƒ½ä½¿ç”¨ï¼Œä½†æ˜¯ Windows æ²¡æœ‰ç±»ä¼¼<code>chmod</code>çš„å‘½ä»¤ï¼Œæ‰€ä»¥åªèƒ½æ‰‹åŠ¨çš„ä¿®æ”¹æƒé™ã€‚</p><ol><li>æ‰“å¼€<code>Windows PowerShell</code>ï¼Œè¾“å…¥<code>$env:username</code>å¾—åˆ°å½“å‰ç”¨æˆ·å</li><li>å³é”®-&gt;å±æ€§-&gt;å®‰å…¨-&gt;é«˜çº§</li><li>ç¦ç”¨ç»§æ‰¿</li><li>åˆ é™¤æ‰€æœ‰çš„<code>æƒé™æ¡ç›®</code></li><li>å°†ç§é’¥æ–‡ä»¶çš„æ‰€æœ‰è€…è®¾ç½®ä¸ºå½“å‰ç”¨æˆ·ï¼Œå³åˆšåˆšæ‹¿åˆ°çš„ç”¨æˆ·å</li></ol><p>è¯¦ç»†å†…å®¹å¯ä»¥å‚è€ƒ <a href="https://blog.csdn.net/joshua2011/article/details/90208741" target="_blank" rel="noopener">çœŸæ­£è§£å†³ windows OpenSSH WARNING: UNPROTECTED PRIVATE KEY FILE!</a>ã€‚</p><h2 id="æŸ¥çœ‹ç³»ç»Ÿ"><a class="header-anchor" href="#æŸ¥çœ‹ç³»ç»Ÿ">#</a>æŸ¥çœ‹ç³»ç»Ÿ</h2><p>é¦–å…ˆè¦çœ‹ä¸‹æ–‡ä»¶ç³»ç»Ÿï¼Œå› ä¸ºå„ä¸ªæ–‡ä»¶ç³»ç»Ÿå¯èƒ½å­˜åœ¨å·®å¼‚ã€‚</p><p>æœåŠ¡å™¨æ˜¯é˜¿é‡Œäº‘çš„ï¼Œç³»ç»Ÿç‰ˆæœ¬ä¸º<code>CentOS7</code>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ lsb_release -a</span><br><span class="line">LSB Version:    :core-4.1-amd64:core-4.1-noarch</span><br><span class="line">Distributor ID: CentOS</span><br><span class="line">Description:    CentOS Linux release 7.8.2003 (Core)</span><br><span class="line">Release:        7.8.2003</span><br><span class="line">Codename:       Core</span><br></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹æ–‡ä»¶ç³»ç»Ÿ"><a class="header-anchor" href="#æŸ¥çœ‹æ–‡ä»¶ç³»ç»Ÿ">#</a>æŸ¥çœ‹æ–‡ä»¶ç³»ç»Ÿ</h2><p>æ‰€ç”¨çš„æ–‡ä»¶ç³»ç»Ÿæ˜¯<code>ext4</code>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ df -h</span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">devtmpfs        909M     0  909M   0% /dev</span><br><span class="line">tmpfs           919M     0  919M   0% /dev/shm</span><br><span class="line">tmpfs           919M  540K  919M   1% /run</span><br><span class="line">tmpfs           919M     0  919M   0% /sys/fs/cgroup</span><br><span class="line">/dev/vda1        40G  3.1G   35G   9% /</span><br><span class="line">overlay          40G  3.1G   35G   9% /var/lib/docker/overlay2/ccce49da9cce1095aa9a4c46c83ec608529802a0ad8643e90e99e4e60bdc5a00/merged</span><br><span class="line">tmpfs           184M     0  184M   0% /run/user/0</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ file -s /dev/vda1</span><br><span class="line">/dev/vda1: Linux rev 1.0 ext4 filesystem data, UUID=59d9ca7b-4f39-4c0c-9334-c56c182076b5 (needs journal recovery) (extents) (large files) (huge files)</span><br></pre></td></tr></table></figure><h2 id="ç”Ÿæˆæ•°æ®æ–‡ä»¶"><a class="header-anchor" href="#ç”Ÿæˆæ•°æ®æ–‡ä»¶">#</a>ç”Ÿæˆæ•°æ®æ–‡ä»¶</h2><p>æ¨¡æ‹Ÿå·²ç»å†™å…¥è¿‡çš„æ•°æ®æ–‡ä»¶ï¼Œä¸€ä¸ª<code>1GB</code>ï¼Œä¸€ä¸ª<code>10GB</code>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dd <span class="keyword">if</span>=/dev/zero of=1.test bs=8M count=128</span><br><span class="line">dd <span class="keyword">if</span>=/dev/zero of=10.test bs=8M count=1280</span><br></pre></td></tr></table></figure><h2 id="å†™å…¥æµ‹è¯•"><a class="header-anchor" href="#å†™å…¥æµ‹è¯•">#</a>å†™å…¥æµ‹è¯•</h2><p>ç®€å•çš„ç”¨ Python æµ‹è¯•ä¸€ä¸‹ï¼Œå†™å…¥<code>10ä¸‡</code>æ¡æ•°æ®è®°å½•æ—¶é—´ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> urllib2</span><br><span class="line"></span><br><span class="line">work_dir = os.path.dirname(os.path.realpath(__file__))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># file_name = os.path.join(work_dir,'1.test')</span></span><br><span class="line">file_name = os.path.join(work_dir,<span class="string">'10.test'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> time.time()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">100000</span>):</span><br><span class="line">url_us = <span class="string">'https://app.ylwang.me/v1/status'</span></span><br><span class="line">us = url_us</span><br><span class="line"></span><br><span class="line">url_cn = <span class="string">'https://sync-cn.onns.xyz/v1/status'</span></span><br><span class="line">cn = url_cn</span><br><span class="line"></span><br><span class="line">url_cn2 = <span class="string">'https://api.huoranxuanyuan.cn/v1/status'</span></span><br><span class="line">cn2 = url_cn2</span><br><span class="line"></span><br><span class="line">f = open(file_name, <span class="string">'a'</span>)</span><br><span class="line">f.write(json.dumps(&#123;time.strftime(<span class="string">'%Y-%m-%d %H:%M:%S'</span>, time.localtime(time.time())):&#123;<span class="string">"us"</span>:us,<span class="string">"cn"</span>:cn,<span class="string">"cn2"</span>:cn2&#125;&#125;))</span><br><span class="line">f.write(<span class="string">"\n"</span>)</span><br><span class="line">f.close()</span><br><span class="line"><span class="keyword">print</span> time.time()</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> time.time()</span><br></pre></td></tr></table></figure><h2 id="æµ‹è¯•ç»“æœ"><a class="header-anchor" href="#æµ‹è¯•ç»“æœ">#</a>æµ‹è¯•ç»“æœ</h2><center><table><thead><tr><th style="text-align:center">å·²æœ‰æ–‡ä»¶å¤§å°</th><th style="text-align:center">å¼€å§‹æ—¶é—´æˆ³</th><th style="text-align:center">ç»“æŸæ—¶é—´æˆ³</th><th style="text-align:center">å·®å€¼ï¼ˆå•ä½ï¼šç§’ï¼‰</th></tr></thead><tbody><tr><td style="text-align:center">1GB</td><td style="text-align:center">1597029893.02</td><td style="text-align:center">1597029897.22</td><td style="text-align:center">4.20</td></tr><tr><td style="text-align:center">10GB</td><td style="text-align:center">1597029915.22</td><td style="text-align:center">1597029919.57</td><td style="text-align:center">4.30</td></tr></tbody></table></center><p>æ€»å¾—æ¥è¯´ï¼Œè¿½åŠ å†™å…¥æ–‡ä»¶æ˜¯ä¸€ä»¶è¢«ä¼˜åŒ–è¿‡çš„äº‹æƒ…ï¼ˆæˆ‘è‡ªå·±ç†è§£çš„ï¼‰ï¼Œä¸ä¼šå¯¹å·²æœ‰çš„ç³»ç»Ÿé€ æˆå¤ªå¤§çš„è´Ÿæ‹…ï¼Œæˆ‘ä¹‹å‰è¿˜åœ¨æƒ³ä¼šä¸ä¼šå› ä¸ºæ–‡ä»¶è¿‡å¤§ï¼Œä»è€Œé€ æˆä¸»è¦æ“ä½œè€—æ—¶è¿‡é•¿ã€‚</p><p>çŸ¥é“äº†ä¸€ä¸ªå¤§æ¦‚çš„æ•°é‡çº§ï¼Œå¯¹ä»¥åçš„åº”ç”¨ä¹Ÿèƒ½æœ‰ä¸ªç²—ç•¥çš„æ¦‚å¿µï¼<br>çŸ¥é“äº†ä¸€äº›æ–°çš„ Linux å‘½ä»¤~</p><h2 id="å‚è€ƒæ–‡æ¡£"><a class="header-anchor" href="#å‚è€ƒæ–‡æ¡£">#</a>å‚è€ƒæ–‡æ¡£</h2><ul><li><a href="https://blog.csdn.net/joshua2011/article/details/90208741" target="_blank" rel="noopener">çœŸæ­£è§£å†³ windows OpenSSH WARNING: UNPROTECTED PRIVATE KEY FILE!</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> system </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> linux </tag>
            
            <tag> windows </tag>
            
            <tag> log </tag>
            
            <tag> file system </tag>
            
            <tag> ext4 </tag>
            
            <tag> ssh </tag>
            
            <tag> permission </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ–°é‚®ä»¶ç­¾åï¼</title>
      <link href="/blog/2020/08/09/new-email-signature/"/>
      <url>/blog/2020/08/09/new-email-signature/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©è¿‡ç”Ÿæ—¥ï¼å‘é‚®ä»¶çš„æ—¶å€™å‘ç°ä»¥å‰çš„é‚®ä»¶ç­¾åå¥½ä¸‘ï½æ¢ä¸€ä¸ªå§ï¼</p><center><p><img src="//onns.xyz/blog/image/20200809-1.png" alt="é‚®ä»¶ç­¾å"></p></center><p>æ¥æºæ˜¯ï¼š<a href="https://www.freepik.com/" target="_blank" rel="noopener">https://www.freepik.com/</a></p>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
      </categories>
      
      
        <tags>
            
            <tag> email </tag>
            
            <tag> signature </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcodeé¢˜è§£ï¼šåˆ†å‰²æ•°ç»„çš„æœ€å¤§å€¼</title>
      <link href="/blog/2020/07/24/solution-of-split-array-largest-sum/"/>
      <url>/blog/2020/07/24/solution-of-split-array-largest-sum/</url>
      
        <content type="html"><![CDATA[<h2 id="410-åˆ†å‰²æ•°ç»„çš„æœ€å¤§å€¼"><a class="header-anchor" href="#410-åˆ†å‰²æ•°ç»„çš„æœ€å¤§å€¼">#</a><a href="https://leetcode-cn.com/problems/split-array-largest-sum/" target="_blank" rel="noopener">410. åˆ†å‰²æ•°ç»„çš„æœ€å¤§å€¼</a></h2><p>ç»™å®šä¸€ä¸ªéè´Ÿæ•´æ•°æ•°ç»„å’Œä¸€ä¸ªæ•´æ•°<code>m</code>ï¼Œä½ éœ€è¦å°†è¿™ä¸ªæ•°ç»„åˆ†æˆ<code>m</code>ä¸ªéç©ºçš„è¿ç»­å­æ•°ç»„ã€‚è®¾è®¡ä¸€ä¸ªç®—æ³•ä½¿å¾—è¿™<code>m</code>ä¸ªå­æ•°ç»„å„è‡ªå’Œçš„æœ€å¤§å€¼æœ€å°ã€‚</p><p>æ³¨æ„:<br>æ•°ç»„é•¿åº¦<code>n</code>æ»¡è¶³ä»¥ä¸‹æ¡ä»¶:</p><ul><li>1 â‰¤ <code>n</code> â‰¤ 1000</li><li>1 â‰¤ <code>m</code> â‰¤ min(50, n)</li></ul><p>ç¤ºä¾‹:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥:</span><br><span class="line">nums &#x3D; [7,2,5,10,8]</span><br><span class="line">m &#x3D; 2</span><br><span class="line"></span><br><span class="line">è¾“å‡º:</span><br><span class="line">18</span><br><span class="line"></span><br><span class="line">è§£é‡Š:</span><br><span class="line">ä¸€å…±æœ‰å››ç§æ–¹æ³•å°†numsåˆ†å‰²ä¸º2ä¸ªå­æ•°ç»„ã€‚</span><br><span class="line">å…¶ä¸­æœ€å¥½çš„æ–¹å¼æ˜¯å°†å…¶åˆ†ä¸º[7,2,5] å’Œ [10,8]ï¼Œ</span><br><span class="line">å› ä¸ºæ­¤æ—¶è¿™ä¸¤ä¸ªå­æ•°ç»„å„è‡ªçš„å’Œçš„æœ€å¤§å€¼ä¸º18ï¼Œåœ¨æ‰€æœ‰æƒ…å†µä¸­æœ€å°ã€‚</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="å†™åœ¨å‰é¢"><a class="header-anchor" href="#å†™åœ¨å‰é¢">#</a>å†™åœ¨å‰é¢</h2><p><a href="https://onns.xyz/blog/2020/07/02/solution-of-kth-smallest-element-in-a-sorted-matrix/">ä¸Šæ¬¡è¯´çš„</a>æ•°ç»„æº¢å‡ºé—®é¢˜ï¼Œè¿™æ¬¡å€’æ˜¯æ²¡æœ‰çŠ¯äº†ï¼Œä½†è¿™æ¬¡æ‰¾è¾¹ç•Œæ¡ä»¶çš„åˆæ˜¯å› ä¸º<code>+1</code>æ²¡æœ‰ææ˜ç™½ï¼Œå…¶å®ä¸Šæ¬¡å°±æœ‰é‡åˆ°ï¼Œè¿™æ¬¡ä¸€å®šè¦è®°ä½äº†ã€‚</p><h2 id="ä¸å¯è¡Œæ–¹æ¡ˆ"><a class="header-anchor" href="#ä¸å¯è¡Œæ–¹æ¡ˆ">#</a>ä¸å¯è¡Œæ–¹æ¡ˆ</h2><p>æˆ‘æœ€å¼€å§‹æƒ³åˆ°çš„æ–¹æ³•æ˜¯ï¼Œå…ˆæŠŠå­æ•°ç»„<code>ç²—ç•¥åœ°</code>åˆ’åˆ†ä¸€ä¸‹ã€‚</p><ol><li>æ±‚å‡ºæ‰€æœ‰å…ƒç´ ä¹‹å’Œ<code>total</code>ï¼Œç„¶åé™¤ä»¥<code>m</code>å¾—åˆ°æ¯ä¸ªå­æ•°ç»„çš„å¹³å‡å€¼ï¼Œè®°ä¸º<code>threshold</code>ã€‚</li><li>å°½é‡é è¿‘è¾¹ç•Œè¿›è¡Œåˆ’åˆ†ï¼Œæ¯”å¦‚è¯´å¦‚æœå½“å‰çš„å’Œ<code>current</code>æ¯”<code>current + nums[i]</code>ç¦»<code>threshold</code>æ›´è¿‘ï¼Œå°±ä¸åŠ ï¼Œå¦åˆ™åŠ ã€‚</li><li>æœ€åä¸€æ¬¡åˆ’åˆ†çš„æ—¶å€™å°†æ‰€æœ‰æœªç»Ÿè®¡è¿‡çš„æ•°å­—éƒ½å½’åˆ°æœ€åä¸€ä¸ªå­æ•°ç»„ä¸­ã€‚</li></ol><p>å¦‚æœè¯´æƒ³å¾—åˆ°ä¸€ä¸ª<code>å±€éƒ¨æœ€ä¼˜è§£</code>ï¼Œé‚£ä¹ˆè¿™æ ·çš„åˆ’åˆ†æ–¹æ³•è‚¯å®šæ²¡æœ‰é—®é¢˜ï¼Œä½†å±€éƒ¨æœ€ä¼˜ä¸æ˜¯å…¨å±€æœ€ä¼˜ï¼Œæƒ³äº†å¥½ä¹…å¦‚ä½•è°ƒæ•´ï¼Œæ²¡æœ‰æ€è·¯ï¼Œæ­¤æ–¹æ³•å°±æ­¤ä½œç½¢ã€‚</p><h2 id="åŠ¨æ€è§„åˆ’"><a class="header-anchor" href="#åŠ¨æ€è§„åˆ’">#</a>åŠ¨æ€è§„åˆ’</h2><p>åŠ¨æ€è§„åˆ’æœ€é‡è¦çš„æ˜¯è¦æ‰¾åˆ°<code>çŠ¶æ€è½¬ç§»æ–¹ç¨‹</code>ï¼Œç„¶åç¡®å®š<code>åˆå§‹æ¡ä»¶</code>ã€‚</p><p>ä»¤<code>f(i)(j)</code>ä¸ºå°†<code>nums[0]</code>åˆ°<code>nums[i]</code>åˆ’åˆ†æˆ<code>j</code>ä¸ªå­æ•°ç»„çš„å„è‡ªå’Œçš„æœ€å°å€¼ï¼Œåˆ™<code>f(i)(j)</code>ä¸€å®šå¯ä»¥è¡¨ç¤ºä¸ºæŸä¸ªå­åˆ’åˆ†çš„æœ€å°å€¼ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> tips </tag>
            
            <tag> leetcode </tag>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
            <tag> dynamic programming </tag>
            
            <tag> binary search </tag>
            
            <tag> äºŒåˆ†æŸ¥æ‰¾ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcodeé¢˜è§£ï¼šæˆ³æ°”çƒ</title>
      <link href="/blog/2020/07/24/solution-of-burst-balloons/"/>
      <url>/blog/2020/07/24/solution-of-burst-balloons/</url>
      
        <content type="html"><![CDATA[<h2 id="312-æˆ³æ°”çƒ"><a class="header-anchor" href="#312-æˆ³æ°”çƒ">#</a><a href="https://leetcode-cn.com/problems/burst-balloons/" target="_blank" rel="noopener">312. æˆ³æ°”çƒ</a></h2><p>æœ‰ <code>n</code> ä¸ªæ°”çƒï¼Œç¼–å·ä¸º <code>0</code> åˆ° <code>n-1</code>ï¼Œæ¯ä¸ªæ°”çƒä¸Šéƒ½æ ‡æœ‰ä¸€ä¸ªæ•°å­—ï¼Œè¿™äº›æ•°å­—å­˜åœ¨æ•°ç»„Â <code>nums</code>Â ä¸­ã€‚</p><p>ç°åœ¨è¦æ±‚ä½ æˆ³ç ´æ‰€æœ‰çš„æ°”çƒã€‚å¦‚æœä½ æˆ³ç ´æ°”çƒ <code>i</code>ï¼Œå°±å¯ä»¥è·å¾— <code>nums[left] * nums[i] * nums[right]</code> ä¸ªç¡¬å¸ã€‚è¿™é‡Œçš„ <code>left</code> å’Œ <code>right</code> ä»£è¡¨å’ŒÂ <code>i</code> ç›¸é‚»çš„ä¸¤ä¸ªæ°”çƒçš„åºå·ã€‚æ³¨æ„å½“ä½ æˆ³ç ´äº†æ°”çƒ <code>i</code> åï¼Œæ°”çƒ <code>left</code>Â å’Œæ°”çƒ <code>right</code> å°±å˜æˆäº†ç›¸é‚»çš„æ°”çƒã€‚</p><p>æ±‚æ‰€èƒ½è·å¾—ç¡¬å¸çš„æœ€å¤§æ•°é‡ã€‚</p><p>è¯´æ˜ï¼š</p><ul><li>ä½ å¯ä»¥å‡è®¾Â <code>nums[-1] = nums[n] = 1</code>ï¼Œä½†æ³¨æ„å®ƒä»¬ä¸æ˜¯çœŸå®å­˜åœ¨çš„æ‰€ä»¥å¹¶ä¸èƒ½è¢«æˆ³ç ´ã€‚</li><li>0 â‰¤ <code>n</code> â‰¤ 500, 0 â‰¤ <code>nums[i]</code> â‰¤ 100</li></ul><p>ç¤ºä¾‹:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">è¾“å…¥: [3,1,5,8]</span><br><span class="line">è¾“å‡º: 167</span><br><span class="line">è§£é‡Š: nums &#x3D; [3,1,5,8] --&gt; [3,5,8] --&gt;   [3,8]   --&gt;  [8]  --&gt; []</span><br><span class="line">Â     coins &#x3D;  3*1*5      +  3*5*8    +  1*3*8      + 1*8*1   &#x3D; 167</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="å†™åœ¨å‰é¢"><a class="header-anchor" href="#å†™åœ¨å‰é¢">#</a>å†™åœ¨å‰é¢</h2><p>æ²¡å¤ªåšå‡ºæ¥ï¼Œæƒ³äº†å¾ˆä¹…ï¼Œå®˜æ–¹ç»™çš„æ€è·¯æ ¹æœ¬ä¸å¯èƒ½æƒ³å‡ºæ¥ã€‚ã€‚ã€‚é¡ºç€ <a href="https://www.cnblogs.com/niuyourou/p/11964842.html" target="_blank" rel="noopener">Burst Balloonsï¼ˆleetcodeæˆ³æ°”çƒï¼Œå›°éš¾ï¼‰ä»æŒ‡æ•°çº§æ—¶é—´å¤æ‚åº¦åˆ°å¤šé¡¹å¼çº§æ—¶é—´å¤æ‚åº¦çš„è¶…è¯¦ç»†ä¼˜åŒ–æ€è·¯ï¼ˆå›æº¯åˆ°åˆ†æ²»åˆ°åŠ¨æ€è§„åˆ’ï¼‰</a> çš„æ€è·¯ä¸€ç‚¹ç‚¹è‡ªå·±åšä¸‹æ¥çš„ã€‚</p><h2 id="é€’å½’-å›æº¯"><a class="header-anchor" href="#é€’å½’-å›æº¯">#</a>é€’å½’+å›æº¯</h2><p>æœ€ç®€å•çš„åŠæ³•å°±æ˜¯ç©·ä¸¾ï¼ŒæŠŠæ‰€æœ‰å¯èƒ½çš„æƒ…å†µéƒ½åˆ—ä¸¾ä¸€æ¬¡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BurstBalloonsSolution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> c; <span class="comment">// ç”¨æ¥ç»Ÿè®¡è®¡ç®—æ¬¡æ•°</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxCoins</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span>[] flag = <span class="keyword">new</span> <span class="keyword">boolean</span>[nums.length];</span><br><span class="line">        <span class="keyword">this</span>.c = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> r = burst(nums, flag, <span class="number">0</span>);</span><br><span class="line">        System.out.println(c);</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">burst</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">boolean</span>[] flag, <span class="keyword">int</span> count)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> max = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> n = nums.length;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (count == n) <span class="comment">// æˆ³å¤Ÿäº†è¶³å¤Ÿå¤šçš„æ°”çƒä¹‹åï¼Œå°±ä¸æˆ³äº†</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123; <span class="comment">// éå†æ°”çƒæ•°ç»„</span></span><br><span class="line">            <span class="keyword">if</span> (!flag[i]) &#123; <span class="comment">// å¦‚æœå½“å‰æ°”çƒæ²¡æœ‰è¢«æˆ³è¿‡</span></span><br><span class="line">                flag[i] = <span class="keyword">true</span>; <span class="comment">// æ ‡è®°å½“å‰æ°”çƒä¸ºå·²æˆ³</span></span><br><span class="line"></span><br><span class="line">                <span class="keyword">int</span> res = find(nums, flag, i) * nums[i] + burst(nums, flag, count + <span class="number">1</span>); <span class="comment">// è®¡ç®—æˆ³å½“å‰æ°”çƒèƒ½æ‹¿åˆ°çš„åˆ†æ•°ï¼Œç„¶åé€’å½’å‰©ä¸‹çš„æ°”çƒ</span></span><br><span class="line">                <span class="keyword">if</span> (res &gt; max) &#123;</span><br><span class="line">                    max = res; <span class="comment">// æ›´æ–°æœ€å¤§å€¼</span></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                flag[i] = <span class="keyword">false</span>; <span class="comment">// å›æº¯ï¼ŒæŠŠæˆ³è¿‡çš„æ°”çƒè¿˜åŸ</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span>[] nums, <span class="keyword">boolean</span>[] flag, <span class="keyword">int</span> cur)</span> </span>&#123; <span class="comment">// find æ–¹æ³•æ˜¯æ‰¾åˆ°å½“å‰æ°”çƒçš„å‰ä¸€ä¸ªå’Œåä¸€ä¸ªï¼Œç›¸ä¹˜å¹¶è¿”å›</span></span><br><span class="line">        <span class="keyword">this</span>.c += <span class="number">1</span>; <span class="comment">// è®¡æ•°</span></span><br><span class="line">        <span class="keyword">int</span> i = cur;</span><br><span class="line">        <span class="keyword">int</span> pre = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">int</span> next = <span class="number">1</span>;</span><br><span class="line">        cur -= <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (cur &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!flag[cur]) &#123;</span><br><span class="line">                pre = nums[cur];</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            cur -= <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cur = i + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (cur &lt; nums.length) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!flag[cur]) &#123;</span><br><span class="line">                next = nums[cur];</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            cur += <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> pre * next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œä¹‹åèƒ½å¤Ÿå¾—åˆ°ç»“æœï¼Œä½†æ˜¯è¿™æ ·çš„ä¸€ä¸ªç¨‹åºçš„æ—¶é—´å¤æ‚åº¦è¾¾åˆ°äº† <code>n!</code>ï¼Œæ˜¾ç„¶ä¸è¡Œã€‚</p><h2 id="åˆ†æ²»"><a class="header-anchor" href="#åˆ†æ²»">#</a>åˆ†æ²»</h2><p>æ‘¸äº†ï¼Œå…ˆä¸Šä»£ç ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> tips </tag>
            
            <tag> leetcode </tag>
            
            <tag> åŠ¨æ€è§„åˆ’ </tag>
            
            <tag> é€’å½’ </tag>
            
            <tag> å›æº¯ </tag>
            
            <tag> dynamic programming </tag>
            
            <tag> recursion </tag>
            
            <tag> traceback </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åšå®¢æ·»åŠ æœç´¢æ”¯æŒ</title>
      <link href="/blog/2020/07/18/blog-search-support/"/>
      <url>/blog/2020/07/18/blog-search-support/</url>
      
        <content type="html"><![CDATA[<p>æ—©å°±æƒ³ç»™åšå®¢åŠ æœç´¢åŠŸèƒ½äº†ï¼Œä½†æ˜¯ä¹‹å‰å¿™ç€é¢è¯•ï¼Œç°åœ¨é¢è¯•å‡‰äº†ï¼Œæœ‰çŸ­æš‚çš„æ—¶é—´å¯ä»¥æ¥åšäº›è‡ªå·±çš„äº‹æƒ…äº†ï¼Œå¼€æ•´ã€‚</p><a id="more"></a><h2 id="æœç´¢æ±‡æ€»"><a class="header-anchor" href="#æœç´¢æ±‡æ€»">#</a>æœç´¢æ±‡æ€»</h2><p>å› ä¸ºé™æ€åšå®¢ï¼Œæ‰€ä»¥éœ€è¦æŠŠåšå®¢çš„å…¨éƒ¨å†…å®¹æ‰“åŒ…æˆä¸€ä¸ª<code>æœç´¢é›†åˆ</code>ï¼Œå€ŸåŠ© <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener">hexo-generator-search</a>ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç”Ÿæˆé™æ€æ–‡ä»¶çš„æ—¶å€™ç›´æ¥ç”Ÿæˆä¸€ä¸ª <code>search.xml</code>ï¼Œåç»­å†é€šè¿‡ <code>ajax</code> è¯»å–å³å¯ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-search --save</span><br></pre></td></tr></table></figure><p>åœ¨åšå®¢æ ¹ç›®å½•çš„ <code>_config.yml</code> è¾“å…¥é…ç½®ï¼š</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">search.xml</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">all</span></span><br><span class="line">  <span class="attr">content:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h2 id="æœç´¢æ ·å¼"><a class="header-anchor" href="#æœç´¢æ ·å¼">#</a>æœç´¢æ ·å¼</h2><p>æ¥ä¸‹æ¥å°±è¦è‡ªå·±å®ç°æœç´¢äº†ï¼ŒGoogle äº†ä¸€æ³¢ï¼Œé€‰äº†ä¸€ä¸ªæ¯”è¾ƒèƒ½å¥‘åˆä¸»é¢˜çš„ï¼š<a href="https://codepen.io/choogoor/pen/NGJVMb" target="_blank" rel="noopener">https://codepen.io/choogoor/pen/NGJVMb</a>ã€‚</p><p>é¦–å…ˆåœ¨ <code>header.swig</code> é‡Œæ·»åŠ æœç´¢æ‰€éœ€è¦çš„ <code>html</code> ç»“æ„ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;%- if config.search -%&#125;</span><br><span class="line">    &lt;div class&#x3D;&quot;search-button&quot;&gt;</span><br><span class="line">        &lt;a href&#x3D;&quot;#&quot; class&#x3D;&quot;search-toggle&quot; data-selector&#x3D;&quot;.site-navbar&quot;&gt;&lt;&#x2F;a&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;search-box&quot;&gt;</span><br><span class="line">        &lt;input type&#x3D;&quot;text&quot; id&#x3D;&quot;local-search-input&quot; class&#x3D;&quot;text search-input&quot; placeholder&#x3D;&quot;Type here to search...&quot; &#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">&#123;%- endif -%&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åæ·»åŠ æœç´¢çš„ <code>js</code> ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line">&#123;%- <span class="keyword">if</span> config.search -%&#125;</span><br><span class="line">&lt;script id=<span class="string">"search"</span>&gt;</span><br><span class="line">    <span class="keyword">var</span> searchFunc = <span class="function"><span class="keyword">function</span>(<span class="params">path, search_id, content_id</span>) </span>&#123;</span><br><span class="line"><span class="meta">    'use strict'</span>;</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        url: path,</span><br><span class="line">        dataType: <span class="string">"xml"</span>,</span><br><span class="line">        success: <span class="function"><span class="keyword">function</span>(<span class="params"> xmlResponse </span>) </span>&#123;</span><br><span class="line">            <span class="comment">// get the contents from search data</span></span><br><span class="line">            <span class="keyword">var</span> datas = $( <span class="string">"entry"</span>, xmlResponse ).map(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> &#123;</span><br><span class="line">                    title: $( <span class="string">"title"</span>, <span class="keyword">this</span> ).text(),</span><br><span class="line">                    content: $(<span class="string">"content"</span>,<span class="keyword">this</span>).text(),</span><br><span class="line">                    url: $( <span class="string">"url"</span> , <span class="keyword">this</span>).text()</span><br><span class="line">                &#125;;</span><br><span class="line">            &#125;).get();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> $input = <span class="built_in">document</span>.getElementById(search_id);</span><br><span class="line"><span class="keyword">if</span> (!$input) <span class="keyword">return</span>;</span><br><span class="line">            <span class="keyword">var</span> $resultContent = <span class="built_in">document</span>.getElementById(content_id);</span><br><span class="line"></span><br><span class="line">            $input.addEventListener(<span class="string">'input'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="keyword">var</span> str = <span class="string">'&lt;section class=\"posts\"&gt;'</span>;</span><br><span class="line">                <span class="keyword">var</span> keywords = <span class="keyword">this</span>.value.trim().toLowerCase().split(<span class="regexp">/[\s\-]+/</span>);</span><br><span class="line">                $resultContent.innerHTML = <span class="string">""</span>;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">this</span>.value.trim().length &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// perform local searching</span></span><br><span class="line">                datas.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">var</span> isMatch = <span class="literal">true</span>;</span><br><span class="line">                    <span class="keyword">var</span> content_index = [];</span><br><span class="line">                    <span class="keyword">if</span> (!data.title || data.title.trim() === <span class="string">''</span>) &#123;</span><br><span class="line">                        data.title = <span class="string">"Untitled"</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">var</span> data_title = data.title.trim().toLowerCase();</span><br><span class="line">                    <span class="keyword">var</span> data_content = data.content.trim().replace(<span class="regexp">/&lt;[^&gt;]+&gt;/g</span>, <span class="string">""</span>).toLowerCase();</span><br><span class="line">                    <span class="keyword">var</span> data_url = data.url;</span><br><span class="line">                    <span class="keyword">var</span> index_title = <span class="number">-1</span>;</span><br><span class="line">                    <span class="keyword">var</span> index_content = <span class="number">-1</span>;</span><br><span class="line">                    <span class="keyword">var</span> first_occur = <span class="number">-1</span>;</span><br><span class="line">                    <span class="comment">// only match artiles with not empty contents</span></span><br><span class="line">                    <span class="keyword">if</span> (data_content !== <span class="string">''</span>) &#123;</span><br><span class="line">                        keywords.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">keyword, i</span>) </span>&#123;</span><br><span class="line">                            index_title = data_title.indexOf(keyword);</span><br><span class="line">                            index_content = data_content.indexOf(keyword);</span><br><span class="line"></span><br><span class="line">                            <span class="keyword">if</span> (index_title &lt; <span class="number">0</span> &amp;&amp; index_content &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                                isMatch = <span class="literal">false</span>;</span><br><span class="line">                            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                                <span class="keyword">if</span> (index_content &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                                    index_content = <span class="number">0</span>;</span><br><span class="line">                                &#125;</span><br><span class="line">                                <span class="keyword">if</span> (i == <span class="number">0</span>) &#123;</span><br><span class="line">                                    first_occur = index_content;</span><br><span class="line">                                &#125;</span><br><span class="line">                                <span class="comment">// content_index.push(&#123;index_content:index_content, keyword_len:keyword_len&#125;);</span></span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        isMatch = <span class="literal">false</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">// show search results</span></span><br><span class="line">                    <span class="keyword">if</span> (isMatch) &#123;</span><br><span class="line">                        str += <span class="string">`</span></span><br><span class="line"><span class="string">&lt;article class="post"&gt;</span></span><br><span class="line"><span class="string">    &lt;header class="post-header"&gt;</span></span><br><span class="line"><span class="string">      &lt;h1 class="post-title"&gt;&lt;a class="post-link" href="`</span>+ data_url +<span class="string">`"&gt;`</span>+ data_title +<span class="string">`&lt;/a&gt;</span></span><br><span class="line"><span class="string">        &lt;/h1&gt;</span></span><br><span class="line"><span class="string">    &lt;/header&gt;</span></span><br><span class="line"><span class="string">    &lt;div class="post-content"&gt;</span></span><br><span class="line"><span class="string">        `</span>;</span><br><span class="line">                        <span class="keyword">var</span> content = data.content.trim().replace(<span class="regexp">/&lt;[^&gt;]+&gt;/g</span>, <span class="string">""</span>);</span><br><span class="line">                        <span class="keyword">if</span> (first_occur &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">                            <span class="comment">// cut out 100 characters</span></span><br><span class="line">                            <span class="keyword">var</span> start = first_occur - <span class="number">20</span>;</span><br><span class="line">                            <span class="keyword">var</span> end = first_occur + <span class="number">80</span>;</span><br><span class="line"></span><br><span class="line">                            <span class="keyword">if</span> (start &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                                start = <span class="number">0</span>;</span><br><span class="line">                            &#125;</span><br><span class="line"></span><br><span class="line">                            <span class="keyword">if</span> (start == <span class="number">0</span>) &#123;</span><br><span class="line">                                end = <span class="number">100</span>;</span><br><span class="line">                            &#125;</span><br><span class="line"></span><br><span class="line">                            <span class="keyword">if</span> (end &gt; content.length) &#123;</span><br><span class="line">                                end = content.length;</span><br><span class="line">                            &#125;</span><br><span class="line"></span><br><span class="line">                            <span class="keyword">var</span> match_content = content.substring(start, end);</span><br><span class="line"></span><br><span class="line">                            <span class="comment">// highlight all keywords</span></span><br><span class="line">                            keywords.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">keyword</span>) </span>&#123;</span><br><span class="line">                                <span class="keyword">var</span> regS = <span class="keyword">new</span> <span class="built_in">RegExp</span>(keyword, <span class="string">"gi"</span>);</span><br><span class="line">                                match_content = match_content.replace(regS, <span class="string">"&lt;code&gt;"</span> + keyword + <span class="string">"&lt;/code&gt;"</span>);</span><br><span class="line">                            &#125;);</span><br><span class="line"></span><br><span class="line">                            str += <span class="string">"&lt;p&gt;"</span> + match_content + <span class="string">"...&lt;/p&gt;"</span></span><br><span class="line">                        &#125;</span><br><span class="line">                        str += <span class="string">"&lt;/article&gt;"</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">                str += <span class="string">"&lt;/section&gt;"</span>;</span><br><span class="line">                $resultContent.innerHTML = str;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> search_path = <span class="string">"&#123;&#123; config.search.path &#125;&#125;"</span>;</span><br><span class="line"><span class="keyword">if</span> (search_path.length == <span class="number">0</span>) &#123;</span><br><span class="line">search_path = <span class="string">"search.xml"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> path = <span class="string">"&#123;&#123; config.root &#125;&#125;"</span> + search_path;</span><br><span class="line">searchFunc(path, <span class="string">'local-search-input'</span>, <span class="string">'local-search-result'</span>);</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp">&#123;%- endif -%&#125;</span></span><br></pre></td></tr></table></figure><p>è¯´èµ·æ¥ç®€å•ï¼Œä½†æ˜¯å„ç§æœ€åè¿˜æ˜¯èŠ±äº†ä¸€ä¸‹åˆçš„æ—¶é—´ã€‚</p><p>æ•ˆæœé¡µé¢é‡Œå°±æœ‰å’¯ã€‚</p><h2 id="å‚è€ƒé“¾æ¥"><a class="header-anchor" href="#å‚è€ƒé“¾æ¥">#</a>å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener">hexo-generator-search</a></li><li><a href="https://github.com/wzpan/hexo-generator-search#how-to-use-this-plugin-in-my-hexo-blog" target="_blank" rel="noopener">How to use this plugin in my Hexo blog?</a></li><li><a href="https://codepen.io/choogoor/pen/NGJVMb" target="_blank" rel="noopener">Header Search</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> search </tag>
            
            <tag> hexo-theme-even </tag>
            
            <tag> blog </tag>
            
            <tag> hexo-generator-search </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å„ç§å‰§æ›´æ–°é‚®ä»¶æ¨é€</title>
      <link href="/blog/2020/07/13/dramas-update-email-notification/"/>
      <url>/blog/2020/07/13/dramas-update-email-notification/</url>
      
        <content type="html"><![CDATA[<p>é—²çš„æ— äº‹ï¼Œä¸æƒ³å­¦ä¹ ï¼Œåšäº†ä¸€ä¸ªå°çš„<code>å®šæ—¶è„šæœ¬</code>æ¥æ£€æµ‹éŸ©å‰§ç½‘ç«™çš„ç†Ÿè‚‰æ›´æ–°ã€‚å› ä¸ºè™½ç„¶å‰§æ¯å‘¨éƒ½æ˜¯æŒ‰æ—¥æœŸæ’­ï¼Œä½†æ˜¯å­—å¹•ç»„ä»¬å¯èƒ½å°±æ²¡æœ‰é‚£ä¹ˆå‡†æ—¶äº†ï¼Œä¸å…¶è‡ªå·±æ‰‹åŠ¨åˆ·æ–°ï¼Œä¸å¦‚<s>æ‡’ï¼ˆä¸æ˜¯</s>å«æœåŠ¡å™¨å¸®æˆ‘å®Œæˆï¼Œåæ­£æœåŠ¡å™¨é™¤äº†æ¶äº†ä¸ªæ’ä»¶çš„åå°æ²¡ä»€ä¹ˆåˆ«çš„ç”¨ã€‚</p><a id="more"></a><h2 id="è·å–æ›´æ–°"><a class="header-anchor" href="#è·å–æ›´æ–°">#</a>è·å–æ›´æ–°</h2><p>ä¸€èˆ¬ä¸€ä¸ªå­—å¹•ç»„çš„å‰§é›†ä¸»é¡µéƒ½æ˜¯ä¸å˜çš„ï¼Œè¿™æ ·æ–¹ä¾¿å„ä¸ªåœ°æ–¹ç´¢å¼•ï¼Œä½†æ˜¯èµ„æºçš„ç½‘ç«™åŸºæœ¬éƒ½æ˜¯å˜çš„ï¼Œå› ä¸ºå¯èƒ½çš„ç‰ˆæƒå•Šä¹‹ç±»çš„ï¼Œæ‰€ä»¥è¦ä¸€å±‚ä¸€å±‚ä¸€å±‚çš„<s>æ‹¨å¼€æˆ‘çš„å¿ƒ</s>æ‰¾åˆ°æœ€ç»ˆçš„èµ„æºé¡µï¼Œæ‰èƒ½çŸ¥é“æœ‰æœ¨æœ‰æ›´æ–°ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root</span><br><span class="line">â”œâ”€â”€ ju.py</span><br><span class="line">â””â”€â”€ data.json</span><br></pre></td></tr></table></figure><h2 id="å‰§æ•°æ®"><a class="header-anchor" href="#å‰§æ•°æ®">#</a>å‰§æ•°æ®</h2><p>å½“ç„¶ï¼Œä¸€ä¸ªå°å°çš„è„šæœ¬æ˜¯ä¸éœ€è¦æ•°æ®åº“æ¥æ€é¸¡ç‰›åˆ€çš„ï¼Œå°±ç›´æ¥å†™å…¥æ–‡ä»¶è¯»å–æ–‡ä»¶å§ï¼ˆå› ä¸ºè¦è®°å½•ä¹‹å‰å¤šå°‘é›†ï¼Œæ‰æœ‰æ›´æ–°ä¸€è¯´ï¼‰ã€‚</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"url"</span>: <span class="string">"https://newzmz.com/details-xN3YGxeW.html"</span>,</span><br><span class="line">    <span class="attr">"count"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"\u867d\u7136\u662f\u7cbe\u795e\u75c5\u4f46\u6ca1\u5173\u7cfb"</span>,</span><br><span class="line">    <span class="attr">"element"</span>: [<span class="string">"&lt;a class=\"addgz\" href=\"([\\S]+)\""</span>, <span class="string">"&lt;tr&gt;"</span>]</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå°±æ˜¯<code>data.json</code>çš„å†…å®¹ï¼Œå› ä¸ºæœªæ¥å¯èƒ½ä¼šæœ‰å¾ˆå¤šå‰§éœ€è¦è¿½æ›´ï¼Œæ‰€ä»¥æœ€å¤–å±‚æ˜¯ä¸ªæ•°ç»„ï¼Œç„¶åæ‰æ˜¯æ¯ä¸ªå‰§çš„å­—å…¸ã€‚</p><p>å› ä¸ºåŠŸèƒ½å¾ˆç®€å•ï¼Œæ‰€ä»¥å­—æ®µæš‚æ—¶å…ˆå¼„è¿™ä¹ˆå¤šï¼Œ<s>åé¢éœ€è¦å†åŠ </s>ã€‚</p><ul><li><code>url</code>: å°±æ˜¯å‰é¢è¯´çš„å­—å¹•ç»„çš„å‰§é›†ä¸»é¡µï¼Œä¸ä¼šå˜çš„ã€‚</li><li><code>count</code>: è®°å½•å½“å‰é›†æ•°ã€‚</li><li><code>name</code>: å°±æ˜¯è¿™éƒ¨å‰§çš„åå­—ï¼Œå‘é‚®ä»¶çš„æ—¶å€™è¦å¸¦ä¸Šçš„ï¼Œè¿™é‡Œå…¶å®æ˜¯<code>ã€Šè™½ç„¶æ˜¯ç²¾ç¥ç—…ä½†æ²¡å…³ç³»ã€‹</code>çš„ unicode å­—ç¬¦ã€‚</li><li><code>element</code>: è¿™ä¸ªå°±æ˜¯æ¯”è¾ƒé‡è¦çš„ä¸œè¥¿äº†ï¼Œæ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œ<code>å‰é¢çš„ n-1 ä¸ª</code>æ˜¯ç”¨æ¥æ‰¾åˆ°æœ€ç»ˆçš„èµ„æºé¡µé¢çš„ï¼Œ<code>æœ€åä¸€ä¸ª</code>æ˜¯ç”¨æ¥æ•°æ•°çš„ï¼Œå°±æ˜¯æœ‰å¤šå°‘é›†ã€‚</li></ul><h2 id="ä¸»ä½“ä»£ç "><a class="header-anchor" href="#ä¸»ä½“ä»£ç ">#</a>ä¸»ä½“ä»£ç </h2><p>ä¸ºäº†å…¼å®¹ï¼Œå†™çš„æ˜¯<code>python2</code>çš„ç‰ˆæœ¬ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> smtplib</span><br><span class="line"><span class="keyword">from</span> email.mime.text <span class="keyword">import</span> MIMEText</span><br><span class="line"><span class="keyword">from</span> email.utils <span class="keyword">import</span> formataddr</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> urllib2</span><br><span class="line"><span class="keyword">import</span> re</span><br></pre></td></tr></table></figure><p>å‘é‚®ä»¶ç›´æ¥ copy å¹•è¯¾çš„ï¼Œå› ä¸ºä»¥å‰æœ‰ä¸ªç”µè´¹æé†’çš„è„šæœ¬ï¼Œæ‰€ä»¥ç›´æ¥æ‹¿è¿‡æ¥ç”¨äº†ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">my_sender=<span class="string">'i@onns.xyz'</span>    <span class="comment"># å‘ä»¶äººé‚®ç®±è´¦å·</span></span><br><span class="line">my_pass = <span class="string">''</span>              <span class="comment"># å‘ä»¶äººé‚®ç®±å¯†ç </span></span><br><span class="line">my_user=<span class="string">'onns@onns.xyz'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mail</span><span class="params">(to,content)</span>:</span></span><br><span class="line">ret=<span class="literal">True</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">msg=MIMEText(content,<span class="string">'plain'</span>,<span class="string">'utf-8'</span>)</span><br><span class="line">msg[<span class="string">'From'</span>]=formataddr([<span class="string">"Onns"</span>,my_sender])  <span class="comment"># æ‹¬å·é‡Œçš„å¯¹åº”å‘ä»¶äººé‚®ç®±æ˜µç§°ã€å‘ä»¶äººé‚®ç®±è´¦å·</span></span><br><span class="line">msg[<span class="string">'To'</span>]=formataddr([<span class="string">'to'</span>,to])              <span class="comment"># æ‹¬å·é‡Œçš„å¯¹åº”æ”¶ä»¶äººé‚®ç®±æ˜µç§°ã€æ”¶ä»¶äººé‚®ç®±è´¦å·</span></span><br><span class="line">msg[<span class="string">'Subject'</span>]=<span class="string">"æ–°å‰§æé†’"</span>                <span class="comment"># é‚®ä»¶çš„ä¸»é¢˜ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯æ ‡é¢˜</span></span><br><span class="line"></span><br><span class="line">server=smtplib.SMTP_SSL(<span class="string">"smtp.exmail.qq.com"</span>, <span class="number">465</span>)  <span class="comment"># å‘ä»¶äººé‚®ç®±ä¸­çš„SMTPæœåŠ¡å™¨ï¼Œç«¯å£æ˜¯25</span></span><br><span class="line">server.login(my_sender, my_pass)  <span class="comment"># æ‹¬å·ä¸­å¯¹åº”çš„æ˜¯å‘ä»¶äººé‚®ç®±è´¦å·ã€é‚®ç®±å¯†ç </span></span><br><span class="line">server.sendmail(my_sender,[to,],msg.as_string())  <span class="comment"># æ‹¬å·ä¸­å¯¹åº”çš„æ˜¯å‘ä»¶äººé‚®ç®±è´¦å·ã€æ”¶ä»¶äººé‚®ç®±è´¦å·ã€å‘é€é‚®ä»¶</span></span><br><span class="line">server.quit()  <span class="comment"># å…³é—­è¿æ¥</span></span><br><span class="line"><span class="keyword">except</span> Exception, e:  <span class="comment"># å¦‚æœ try ä¸­çš„è¯­å¥æ²¡æœ‰æ‰§è¡Œï¼Œåˆ™ä¼šæ‰§è¡Œä¸‹é¢çš„ ret=False</span></span><br><span class="line"><span class="keyword">print</span> e</span><br><span class="line">ret=<span class="literal">False</span></span><br><span class="line"><span class="keyword">return</span> ret</span><br></pre></td></tr></table></figure><p>ä¸»ä½“ä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">f = open(<span class="string">'/root/data.json'</span>, <span class="string">'r'</span>)</span><br><span class="line">data =  json.loads(f.read())</span><br><span class="line">f.close()</span><br><span class="line">new_data = []</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ju <span class="keyword">in</span> data:</span><br><span class="line">html = <span class="string">''</span></span><br><span class="line">url = ju[<span class="string">'url'</span>]</span><br><span class="line"><span class="keyword">for</span> ele <span class="keyword">in</span> ju[<span class="string">'element'</span>]:</span><br><span class="line">html = urllib2.urlopen(url).read().decode(<span class="string">'utf-8'</span>)</span><br><span class="line">results = re.findall(ele, html)</span><br><span class="line">url = results[<span class="number">0</span>]</span><br><span class="line">count = len(results)</span><br><span class="line"><span class="keyword">if</span> count &gt; ju[<span class="string">'count'</span>]:</span><br><span class="line">ret=mail(my_user,<span class="string">u'ã€Š'</span>+ju[<span class="string">'name'</span>]+ <span class="string">u'ã€‹æ›´æ–°å•¦ï¼'</span>)</span><br><span class="line">ju[<span class="string">'count'</span>] = count</span><br><span class="line">new_data.append(ju)</span><br><span class="line"></span><br><span class="line">f = open(<span class="string">'/root/data.json'</span>, <span class="string">'w'</span>)</span><br><span class="line">f.write(json.dumps(new_data))</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure><h2 id="ä¸ŠæœåŠ¡å™¨"><a class="header-anchor" href="#ä¸ŠæœåŠ¡å™¨">#</a>ä¸ŠæœåŠ¡å™¨</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ crontab -e</span><br></pre></td></tr></table></figure><p>æŠŠå®šæ—¶è„šæœ¬åŠ è¿›å»</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*/10 * * * 6,7,1 /usr/bin/python /root/ju.py /dev/null 1&gt;/dev/null</span><br></pre></td></tr></table></figure><p>å› ä¸ºä¸ç”¨å¾ˆç²¾ç»†å°± 10 åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ï¼Œå‘¨æœ«æ™šé—´æ›´æ–°æ‰€ä»¥ <code>6ã€7ã€1</code> ä¸‰å¤©æ‰éœ€è¦è·‘çš„ã€‚</p><center><p><img src="//onns.xyz/blog/image/20200713-1.jpg" alt="æˆªå›¾"></p></center><p>å®Œã€‚</p>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> drama </tag>
            
            <tag> email </tag>
            
            <tag> è™½ç„¶æ˜¯ç²¾ç¥ç—…ä½†æ²¡å…³ç³» </tag>
            
            <tag> éŸ©å‰§ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Chromeå…³é—­æ·±è‰²æ¨¡å¼</title>
      <link href="/blog/2020/07/09/chrome-turn-off-dark-mode/"/>
      <url>/blog/2020/07/09/chrome-turn-off-dark-mode/</url>
      
        <content type="html"><![CDATA[<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">defaults write com.google.Chrome NSRequiresAquaSystemAppearance -bool YES</span><br></pre></td></tr></table></figure><p>ç„¶åé‡å¯Chromeã€‚</p>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
      </categories>
      
      
        <tags>
            
            <tag> chrome </tag>
            
            <tag> dark mode </tag>
            
            <tag> mac </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HashMapæºç é˜…è¯»</title>
      <link href="/blog/2020/07/07/hashmap-source-code/"/>
      <url>/blog/2020/07/07/hashmap-source-code/</url>
      
        <content type="html"><![CDATA[<p>è®²é“ç†ï¼Œå¤ä¹ é¢è¯•æ˜¯çœŸçš„å¤ä¹ åäº†ã€‚ã€‚ã€‚å®åœ¨æ˜¯å¤ä¹ ä¸ä¸‹å»äº†ï¼Œæ‘¸ä¼šé±¼ï¼Œçœ‹çœ‹<code>HashMap</code>çš„æºç å§ğŸ˜­ğŸ˜­ğŸ˜­ã€‚</p><a id="more"></a><h2 id="å‰è¨€"><a class="header-anchor" href="#å‰è¨€">#</a>å‰è¨€</h2><p>æˆ‘çš„Javaç‰ˆæœ¬æ˜¯ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">%</span><span class="bash"> java --version</span></span><br><span class="line">java 13.0.2 2020-01-14</span><br><span class="line">Java(TM) SE Runtime Environment (build 13.0.2+8)</span><br><span class="line">Java HotSpot(TM) 64-Bit Server VM (build 13.0.2+8, mixed mode, sharing)</span><br></pre></td></tr></table></figure><h2 id="å…³é”®å‚æ•°"><a class="header-anchor" href="#å…³é”®å‚æ•°">#</a>å…³é”®å‚æ•°</h2><p>å…ˆæ¥çœ‹å‚æ•°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * The default initial capacity - MUST be a power of two.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEFAULT_INITIAL_CAPACITY = <span class="number">1</span> &lt;&lt; <span class="number">4</span>; <span class="comment">// aka 16</span></span><br></pre></td></tr></table></figure><p>é»˜è®¤çš„å®¹å™¨å¤§å°ï¼Œå°±æ˜¯æ•°ç»„çš„å¤§å°ã€‚HashMapçš„åº•å±‚å°±æ˜¯æ•°ç»„+é“¾è¡¨/çº¢é»‘æ ‘ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> HashMap </tag>
            
            <tag> source code </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leetcodeé¢˜è§£ï¼šæœ‰åºçŸ©é˜µä¸­ç¬¬Kå°çš„å…ƒç´ </title>
      <link href="/blog/2020/07/02/solution-of-kth-smallest-element-in-a-sorted-matrix/"/>
      <url>/blog/2020/07/02/solution-of-kth-smallest-element-in-a-sorted-matrix/</url>
      
        <content type="html"><![CDATA[<h2 id="378-æœ‰åºçŸ©é˜µä¸­ç¬¬kå°çš„å…ƒç´ "><a class="header-anchor" href="#378-æœ‰åºçŸ©é˜µä¸­ç¬¬kå°çš„å…ƒç´ ">#</a><a href="https://leetcode-cn.com/problems/kth-smallest-element-in-a-sorted-matrix/" target="_blank" rel="noopener">378. æœ‰åºçŸ©é˜µä¸­ç¬¬Kå°çš„å…ƒç´ </a></h2><p>ç»™å®šä¸€ä¸ª <code>n * n</code> çŸ©é˜µï¼Œå…¶ä¸­æ¯è¡Œå’Œæ¯åˆ—å…ƒç´ å‡æŒ‰å‡åºæ’åºï¼Œæ‰¾åˆ°çŸ©é˜µä¸­ç¬¬ <code>k</code> å°çš„å…ƒç´ ã€‚<br>è¯·æ³¨æ„ï¼Œå®ƒæ˜¯æ’åºåçš„ç¬¬ <code>k</code> å°å…ƒç´ ï¼Œè€Œä¸æ˜¯ç¬¬ <code>k</code> ä¸ªä¸åŒçš„å…ƒç´ ã€‚</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">matrix &#x3D; [</span><br><span class="line">[ 1,  5,  9],</span><br><span class="line">[10, 11, 13],</span><br><span class="line">[12, 13, 15]</span><br><span class="line">],</span><br><span class="line">k &#x3D; 8,</span><br><span class="line"></span><br><span class="line">è¿”å› 13ã€‚</span><br></pre></td></tr></table></figure><p>æç¤ºï¼š<br>ä½ å¯ä»¥å‡è®¾ k çš„å€¼æ°¸è¿œæ˜¯æœ‰æ•ˆçš„ï¼Œ<code>1 â‰¤ k â‰¤ n^2</code> ã€‚</p><a id="more"></a><h2 id="å†™åœ¨å‰é¢"><a class="header-anchor" href="#å†™åœ¨å‰é¢">#</a>å†™åœ¨å‰é¢</h2><p>å†™è¿™ä¸ªçš„æ ¹æœ¬ç›®çš„æ˜¯è®°å½•ä¸€äº›ä¹‹å‰æ ¹æœ¬ä¸ä¼šæ³¨æ„åˆ°çš„å°<code>é”™è¯¯</code>ã€‚åœ¨æˆ‘å†™å®Œå»çœ‹å®˜æ–¹é¢˜è§£çš„æ—¶å€™ï¼Œå®˜æ–¹çš„æ±‚ä¸­ä½æ•°æ–¹æ³•æ˜¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> mid = left + ((right - left) &gt;&gt; <span class="number">1</span>);</span><br></pre></td></tr></table></figure><p>è‡ªå·±çš„æ˜¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> temp = (min + max) / <span class="number">2</span>;</span><br></pre></td></tr></table></figure><p>æ„Ÿå¹è‡ªå·±ä¸ä¼šç§»ä½ä½†å´å°‘äº†ä¸€æ­¥å‡æ³•çš„æ—¶å€™ï¼Œå´æ²¡æœ‰è€ƒè™‘åˆ°ä¸¤ä¸ª <code>int</code> ç›¸åŠ æ˜¯å¯èƒ½ä¼šæº¢å‡ºçš„ã€‚</p><p>æ‰€ä»¥ä»Šæ—¥å°tipï¼š</p><ul><li>ä¸¤ä¸ª <code>int</code> ç›¸åŠ æ˜¯å¯èƒ½æº¢å‡ºçš„ã€‚</li></ul><h2 id="äºŒåˆ†æŸ¥æ‰¾"><a class="header-anchor" href="#äºŒåˆ†æŸ¥æ‰¾">#</a>äºŒåˆ†æŸ¥æ‰¾</h2><p>æœ€ç®€å•çš„ï¼Œå–å‡ºæ¥æ’åºï¼Œè¿™ä¸ªå°±ä¸è¯´äº†ï¼Œè‚¯å®šä¸æ˜¯æœ€ä¼˜é›…çš„è§£æ³•ã€‚</p><p>è€å®è¯´æˆ‘æœ€å¼€å§‹çš„æƒ³æ³•æ˜¯ä»å·¦ä¸Šè§’å¼€å§‹å‘ä¸‹å‘å³æ•°ä¸ªæ•°ï¼Œç»´æŠ¤ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œä¸€ä¸ªå‘å³çš„ï¼Œä¸€ä¸ªå‘ä¸‹çš„ã€‚ä½†æˆ‘æ„è¯†åˆ°å®Œå…¨å­˜åœ¨ç€<code>ä¸€ä¸ªæ•°çš„å‘ä¸‹</code>å¯èƒ½å°äº<code>å‰é¢æŸä¸€ä¸ªæ•°çš„å‘å³</code>ã€‚å®Œå…¨æ²¡æœ‰åŠæ³•æŒ‰åºè¾“å‡ºã€‚æ­¤æ€è·¯ä½œç½¢ã€‚</p><p>ç¬¬äºŒä¸ªæ€è·¯æ˜¯ <code>i * i</code> çš„å€¼å¦‚æœå¤§äº <code>k</code>ï¼Œé‚£ä¹ˆç»“æœä¸€å®šåœ¨ <code>i * i</code>çš„å­çŸ©é˜µä¸­ã€‚ä½†é™¤äº† <code>matrix[i][i]</code>è¿™ä¸ªç‚¹ä¹‹å¤–ï¼Œæ‰€æœ‰å…¶å®ƒçš„ç‚¹éƒ½æœ‰å¯èƒ½æ˜¯ç»“æœï¼Œæ‰€ä»¥æ²¡æœ‰åŠæ³•é€šè¿‡è¿™ä¸ªæ¡ä»¶ç»§ç»­ç¼©å°èŒƒå›´äº†ã€‚</p><p>æƒ³äº†åŠå°æ—¶æ²¡æœ‰æƒ³åˆ°å¥½çš„è§£æ³•ï¼Œæˆ‘é€‰æ‹©äº†å»çœ‹å®˜æ–¹é¢˜è§£ï¼Œç®€å•äº†è§£äº†ä¸€ä¸‹æ€è·¯åï¼Œå›æ¥è‡ªå·±æƒ³ã€‚</p><h3 id="åˆ¤æ–­ç‰¹æ®Šæƒ…å†µ"><a class="header-anchor" href="#åˆ¤æ–­ç‰¹æ®Šæƒ…å†µ">#</a>åˆ¤æ–­ç‰¹æ®Šæƒ…å†µ</h3><p>å·²ç»å…»æˆä¹ æƒ¯äº†ï¼Œåœ¨æ¯ä¸ªæ–¹æ³•çš„æœ€å¼€å§‹å°†ç‰¹æ®Šæƒ…å†µåˆ¤æ–­ä¸€ä¸‹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">KthSmallestElementInASortedMatrixSolution</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">kthSmallest</span><span class="params">(<span class="keyword">int</span>[][] matrix, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> n = matrix.length;</span><br><span class="line"><span class="keyword">if</span> (n == <span class="number">0</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span> (n == <span class="number">1</span>)</span><br><span class="line"><span class="keyword">return</span> matrix[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è¿›è¡Œä¸€æ¬¡æŸ¥æ‰¾"><a class="header-anchor" href="#è¿›è¡Œä¸€æ¬¡æŸ¥æ‰¾">#</a>è¿›è¡Œä¸€æ¬¡æŸ¥æ‰¾</h3><p>å…ˆå†™ä¸€æ¬¡æŸ¥æ‰¾çš„ç»“æœï¼Œçœ‹çœ‹å¯¹ä¸å¯¹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">KthSmallestElementInASortedMatrixSolution</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">kthSmallest</span><span class="params">(<span class="keyword">int</span>[][] matrix, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> n = matrix.length;</span><br><span class="line"><span class="keyword">if</span> (n == <span class="number">0</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span> (n == <span class="number">1</span>)</span><br><span class="line"><span class="keyword">return</span> matrix[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line"><span class="keyword">int</span> min = matrix[<span class="number">0</span>][<span class="number">0</span>]; <span class="comment">// åˆå§‹åŒ–æœ€å°å€¼</span></span><br><span class="line"><span class="keyword">int</span> max = matrix[n - <span class="number">1</span>][n - <span class="number">1</span>]; <span class="comment">// åˆå§‹åŒ–æœ€å¤§å€¼</span></span><br><span class="line"><span class="keyword">int</span> i = n - <span class="number">1</span>, j = <span class="number">0</span>; <span class="comment">// ä»å·¦ä¸‹è§’å¼€å§‹æ‰¾</span></span><br><span class="line"><span class="keyword">int</span> count = <span class="number">0</span>; <span class="comment">// è®°å½•ä¸ªæ•°</span></span><br><span class="line"><span class="keyword">int</span> temp = (min+max)/<span class="number">2</span>; <span class="comment">// ä¸­ä½æ•°å¼€å§‹æ‰¾</span></span><br><span class="line"><span class="keyword">while</span> (i &gt;= <span class="number">0</span> &amp;&amp; j &lt; n) &#123; <span class="comment">// è¶…è¿‡æ•°ç»„èŒƒå›´åˆ™é€€å‡º</span></span><br><span class="line"><span class="keyword">if</span>(matrix[i][j] &lt;= temp)&#123; <span class="comment">// å‘å·¦</span></span><br><span class="line">j+=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123; <span class="comment">// å‘ä¸Š</span></span><br><span class="line">count += j; <span class="comment">// å‘ä¸Šä¹‹å‰ï¼ŒæŠŠç¬¬iè¡Œå‰j-1ä¸ªå…ƒç´ éƒ½ç®—ä¸Š</span></span><br><span class="line"><span class="comment">// ç´¢å¼•é»˜è®¤0å¼€å§‹ï¼Œj-1+1=j</span></span><br><span class="line">i -= <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">count += (i+<span class="number">1</span>)*n; <span class="comment">// å¦‚æœå› ä¸ºjè¶Šç•Œçš„åŸå› é€€å‡ºï¼Œè¯æ˜ä¸Šé¢è¿˜æœ‰i+1è¡Œæ²¡æœ‰ç®—</span></span><br><span class="line"><span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><table><thead><tr><th></th><th></th><th></th><th></th><th></th><th></th></tr></thead><tbody><tr><td><span style="color:red">1</span></td><td><span style="color:red">3</span></td><td><span style="color:red">5</span></td><td><span style="color:red">7</span></td><td>9</td><td>11</td></tr><tr><td><span style="color:red">2</span></td><td><span style="color:red">4</span></td><td><span style="color:red">6</span></td><td><span style="color:red">8</span></td><td>10</td><td>12</td></tr><tr><td><span style="color:red">3</span></td><td><span style="color:red">5</span></td><td><span style="color:red">7</span></td><td>9</td><td>11</td><td>13</td></tr><tr><td><span style="color:red">4</span></td><td><span style="color:red">6</span></td><td><span style="color:red">8</span></td><td>10</td><td>12</td><td>14</td></tr><tr><td><span style="color:red">5</span></td><td><span style="color:red">7</span></td><td>9</td><td>11</td><td>13</td><td>15</td></tr><tr><td><span style="color:red">6</span></td><td><span style="color:red">8</span></td><td>10</td><td>12</td><td>14</td><td>16</td></tr></tbody></table><p>ç»“æœæ˜¯ <code>18</code>ï¼Œæ­£ç¡®ã€‚</p><h3 id="è¿­ä»£æŸ¥æ‰¾"><a class="header-anchor" href="#è¿­ä»£æŸ¥æ‰¾">#</a>è¿­ä»£æŸ¥æ‰¾</h3><p>æ¥ç€å°±å¯ä»¥å†™æ›´æ–°ç­–ç•¥äº†ï¼Œæˆ‘æƒ³çš„æ˜¯ï¼Œå¦‚æœç°åœ¨çš„æ•°<code>å°äº</code>è¦æ±‚çš„æ•°ï¼Œé‚£ä¸€å®šæ˜¯åœ¨åé¢ï¼Œä½†æ˜¯å¦‚æœ<code>ç­‰äº</code>å´ä¸ä¸€å®šï¼Œå› ä¸ºè¿™ä¸ªä¸­ä½æ•°å¯èƒ½æ˜¯çŸ©é˜µä¸­ä¸å­˜åœ¨çš„æ•°ï¼Œä½†æœ€ç»ˆç»“æœä¸€å®šä¼š<code>å°äºç­‰äº</code>ç°åœ¨çš„æ•°ï¼Œæ‰€ä»¥<code>&gt;=</code>çš„ç­–ç•¥å¯ä»¥å†™åœ¨ä¸€èµ·ã€‚</p><p>æœ€åçš„çš„è¿­ä»£ç»ˆæ­¢æ¡ä»¶å°±æ˜¯<code>min==max</code>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">KthSmallestElementInASortedMatrixSolution</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">kthSmallest</span><span class="params">(<span class="keyword">int</span>[][] matrix, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> n = matrix.length;</span><br><span class="line"><span class="keyword">if</span> (n == <span class="number">0</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span> (n == <span class="number">1</span>)</span><br><span class="line"><span class="keyword">return</span> matrix[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line"><span class="keyword">int</span> min = matrix[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line"><span class="keyword">int</span> max = matrix[n - <span class="number">1</span>][n - <span class="number">1</span>];</span><br><span class="line"><span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line"><span class="keyword">int</span> i = n - <span class="number">1</span>, j = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> temp = (min + max) / <span class="number">2</span>;</span><br><span class="line"><span class="keyword">while</span> (i &gt;= <span class="number">0</span> &amp;&amp; j &lt; n) &#123;</span><br><span class="line"><span class="keyword">if</span> (matrix[i][j] &lt;= temp) &#123;</span><br><span class="line">j += <span class="number">1</span>;</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">count += j;</span><br><span class="line">i -= <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">count += (i + <span class="number">1</span>) * n;</span><br><span class="line"><span class="keyword">if</span> (count &lt; k) &#123;</span><br><span class="line">min = temp;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">max = temp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (min == max) &#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> min;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯è¿™ä¸ªä¼šæ­»å¾ªç¯å¡ä½ï¼Œæˆ‘ç”¨çº¸è‡ªå·±è·‘äº†ä¸€ä¸‹ï¼Œå‘ç°å‡å¦‚<code>min = 7, max = 8</code>ï¼Œå†è·‘ä¸€è½®çš„æ—¶å€™è¿­ä»£è¿˜ä¼šæ˜¯<code>min = 7, max = 8</code>ï¼Œæ— é™å¾ªç¯äº†ã€‚è§£å†³æ–¹æ³•æ˜¯åˆ¤æ–­è¿­ä»£å€¼å’Œ <code>min</code> æ˜¯å¦ç›¸ç­‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">KthSmallestElementInASortedMatrixSolution</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">kthSmallest</span><span class="params">(<span class="keyword">int</span>[][] matrix, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> n = matrix.length;</span><br><span class="line"><span class="keyword">if</span> (n == <span class="number">0</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span> (n == <span class="number">1</span>)</span><br><span class="line"><span class="keyword">return</span> matrix[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line"><span class="keyword">int</span> min = matrix[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line"><span class="keyword">int</span> max = matrix[n - <span class="number">1</span>][n - <span class="number">1</span>];</span><br><span class="line"><span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line"><span class="keyword">int</span> i = n - <span class="number">1</span>, j = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> temp = (min + max) / <span class="number">2</span>;</span><br><span class="line"><span class="keyword">while</span> (i &gt;= <span class="number">0</span> &amp;&amp; j &lt; n) &#123;</span><br><span class="line"><span class="keyword">if</span> (matrix[i][j] &lt;= temp) &#123;</span><br><span class="line">j += <span class="number">1</span>;</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">count += j;</span><br><span class="line">i -= <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">count += (i + <span class="number">1</span>) * n;</span><br><span class="line"><span class="keyword">if</span> (count &lt; k) &#123;</span><br><span class="line"><span class="keyword">if</span> (temp == min) &#123;</span><br><span class="line">min += <span class="number">1</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">min = temp;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">max = temp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (min == max) &#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> min;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡äº†ã€‚å½“ç„¶ï¼Œå®˜æ–¹é¢˜è§£é‡Œçš„ <code>+1</code> å°±å¾ˆçµæ€§ï¼Œä½†æ˜¯æˆ‘æƒ³ä¸åˆ°ã€‚ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">KthSmallestElementInASortedMatrixSolution</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">kthSmallest</span><span class="params">(<span class="keyword">int</span>[][] matrix, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> n = matrix.length;</span><br><span class="line"><span class="keyword">if</span> (n == <span class="number">0</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span> (n == <span class="number">1</span>)</span><br><span class="line"><span class="keyword">return</span> matrix[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line"><span class="keyword">int</span> min = matrix[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line"><span class="keyword">int</span> max = matrix[n - <span class="number">1</span>][n - <span class="number">1</span>];</span><br><span class="line"><span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line"><span class="keyword">int</span> i = n - <span class="number">1</span>, j = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> temp = (min + max) / <span class="number">2</span>;</span><br><span class="line"><span class="keyword">while</span> (i &gt;= <span class="number">0</span> &amp;&amp; j &lt; n) &#123;</span><br><span class="line"><span class="keyword">if</span> (matrix[i][j] &lt;= temp) &#123;</span><br><span class="line">j += <span class="number">1</span>;</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">count += j;</span><br><span class="line">i -= <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">count += (i + <span class="number">1</span>) * n;</span><br><span class="line"><span class="keyword">if</span> (count &lt; k) &#123;</span><br><span class="line">min = temp + <span class="number">1</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">max = temp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (min == max) &#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> min;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å®Œæ•´ä»£ç "><a class="header-anchor" href="#å®Œæ•´ä»£ç ">#</a>å®Œæ•´ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> leetcode;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">KthSmallestElementInASortedMatrix</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span>[][] matrix = &#123; &#123; <span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">11</span> &#125;, &#123; <span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">10</span>, <span class="number">12</span> &#125;, &#123; <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">11</span>, <span class="number">13</span> &#125;,</span><br><span class="line">&#123; <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">10</span>, <span class="number">12</span>, <span class="number">14</span> &#125;, &#123; <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">11</span>, <span class="number">13</span>, <span class="number">15</span> &#125;, &#123; <span class="number">6</span>, <span class="number">8</span>, <span class="number">10</span>, <span class="number">12</span>, <span class="number">14</span>, <span class="number">16</span> &#125; &#125;;</span><br><span class="line"><span class="keyword">int</span> k = <span class="number">18</span>;</span><br><span class="line">KthSmallestElementInASortedMatrixSolution sol = <span class="keyword">new</span> KthSmallestElementInASortedMatrixSolution();</span><br><span class="line"><span class="keyword">int</span> res = sol.kthSmallest(matrix, k);</span><br><span class="line">System.out.println(res);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">KthSmallestElementInASortedMatrixSolution</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">kthSmallest</span><span class="params">(<span class="keyword">int</span>[][] matrix, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line"><span class="keyword">int</span> n = matrix.length;</span><br><span class="line"><span class="keyword">if</span> (n == <span class="number">0</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span> (n == <span class="number">1</span>)</span><br><span class="line"><span class="keyword">return</span> matrix[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line"><span class="keyword">int</span> min = matrix[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line"><span class="keyword">int</span> max = matrix[n - <span class="number">1</span>][n - <span class="number">1</span>];</span><br><span class="line"><span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line"><span class="keyword">int</span> i = n - <span class="number">1</span>, j = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> temp = (min + max) / <span class="number">2</span>;</span><br><span class="line"><span class="keyword">while</span> (i &gt;= <span class="number">0</span> &amp;&amp; j &lt; n) &#123;</span><br><span class="line"><span class="keyword">if</span> (matrix[i][j] &lt;= temp) &#123;</span><br><span class="line">j += <span class="number">1</span>;</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">count += j;</span><br><span class="line">i -= <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">count += (i + <span class="number">1</span>) * n;</span><br><span class="line"><span class="keyword">if</span> (count &lt; k) &#123;</span><br><span class="line"><span class="keyword">if</span> (temp == min) &#123;</span><br><span class="line">min += <span class="number">1</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">min = temp;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">max = temp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (min == max) &#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> min;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">% javac leetcode/KthSmallestElementInASortedMatrix.java</span><br><span class="line">% java leetcode.KthSmallestElementInASortedMatrix</span><br><span class="line">8</span><br></pre></td></tr></table></figure><p>å®Œã€‚</p>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> tips </tag>
            
            <tag> leetcode </tag>
            
            <tag> binary search </tag>
            
            <tag> äºŒåˆ†æŸ¥æ‰¾ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é¢è¯•å¤ä¹ æçº²</title>
      <link href="/blog/2020/06/18/review-for-the-interview/"/>
      <url>/blog/2020/06/18/review-for-the-interview/</url>
      
        <content type="html"><![CDATA[<p>å¤ä¹ </p><a id="more"></a><h2 id="tcp-udp"><a class="header-anchor" href="#tcp-udp">#</a>TCP UDP</h2><p>TCP: ä¼ è¾“æ§åˆ¶åè®®ï¼ˆè‹±è¯­ï¼šTransmission Control Protocolï¼Œç¼©å†™ä¸º TCPï¼‰æ˜¯ä¸€ç§é¢å‘è¿æ¥çš„ã€å¯é çš„ã€åŸºäºå­—èŠ‚æµçš„ä¼ è¾“å±‚é€šä¿¡åè®®ï¼Œç”± IETF çš„ RFC 793 å®šä¹‰ã€‚</p><p>UDP:ç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼ˆè‹±è¯­ï¼šUser Datagram Protocolï¼Œç¼©å†™ä¸º UDPï¼‰ï¼Œåˆç§°ä½¿ç”¨è€…èµ„æ–™åŒ…åå®šï¼Œæ˜¯ä¸€ä¸ªç®€å•çš„é¢å‘æ•°æ®æŠ¥çš„ä¼ è¾“å±‚åè®®ï¼Œæ­£å¼è§„èŒƒä¸º RFC 768ã€‚</p><h3 id="tcp-ä¸-udp-åŸºæœ¬åŒºåˆ«"><a class="header-anchor" href="#tcp-ä¸-udp-åŸºæœ¬åŒºåˆ«">#</a>TCP ä¸ UDP åŸºæœ¬åŒºåˆ«</h3><ol><li>åŸºäºè¿æ¥ä¸æ— è¿æ¥</li><li>TCP è¦æ±‚ç³»ç»Ÿèµ„æºè¾ƒå¤šï¼ŒUDP è¾ƒå°‘ï¼›</li><li>UDP ç¨‹åºç»“æ„è¾ƒç®€å•</li><li>æµæ¨¡å¼ï¼ˆTCPï¼‰ä¸æ•°æ®æŠ¥æ¨¡å¼(UDP);</li><li>TCP ä¿è¯æ•°æ®æ­£ç¡®æ€§ï¼ŒUDP å¯èƒ½ä¸¢åŒ…</li><li>TCP ä¿è¯æ•°æ®é¡ºåºï¼ŒUDP ä¸ä¿è¯</li><li>UDP æ˜¯ä¸å¤„ç†å µå¡ï¼Œåº”ç”¨éœ€è¦å‘ï¼Œå°±ä¼šå‘é€ã€‚TCP è¿˜æ‹¥æœ‰å µå¡æ§åˆ¶ï¼ŒTCP ä¼šæ ¹æ®ç½‘ç»œç¯å¢ƒè°ƒæ•´å‘åŒ…çš„é¢‘ç‡ã€‚</li><li>UDP æ”¯æŒå¤šæ’­å’Œå¹¿æ’­</li><li>TCP æœ‰æµé‡æ§åˆ¶ï¼ˆæ»‘åŠ¨çª—å£ï¼‰å’Œæ‹¥å¡æ§åˆ¶ï¼ˆæ…¢å¼€å§‹ã€æ‹¥å¡é¿å…ã€å¿«é‡ä¼ ã€å¿«æ¢å¤ï¼‰</li></ol><h3 id="udp-åº”ç”¨åœºæ™¯"><a class="header-anchor" href="#udp-åº”ç”¨åœºæ™¯">#</a>UDP åº”ç”¨åœºæ™¯</h3><ol><li>é¢å‘æ•°æ®æŠ¥æ–¹å¼</li><li>ç½‘ç»œæ•°æ®å¤§å¤šä¸ºçŸ­æ¶ˆæ¯</li><li>æ‹¥æœ‰å¤§é‡ Client</li><li>å¯¹æ•°æ®å®‰å…¨æ€§æ— ç‰¹æ®Šè¦æ±‚</li><li>ç½‘ç»œè´Ÿæ‹…éå¸¸é‡ï¼Œä½†å¯¹å“åº”é€Ÿåº¦è¦æ±‚é«˜</li><li>QQ çš„æ–‡ä»¶ä¼ è¾“</li><li>DNSã€TFTPã€RIPï¼ˆè·¯ç”±é€‰æ‹©åè®®ï¼‰ã€SNMPã€NFS</li></ol><h3 id="tcp-ä¸‰æ¬¡æ¡æ‰‹"><a class="header-anchor" href="#tcp-ä¸‰æ¬¡æ¡æ‰‹">#</a>TCP ä¸‰æ¬¡æ¡æ‰‹</h3><center><p><img src="//onns.xyz/blog/image/20200618-1.png" alt="TCPä¸‰æ¬¡æ¡æ‰‹"></p></center><h3 id="tcp-å››æ¬¡æ¡æ‰‹"><a class="header-anchor" href="#tcp-å››æ¬¡æ¡æ‰‹">#</a>TCP å››æ¬¡æ¡æ‰‹</h3><center><p><img src="//onns.xyz/blog/image/20200618-2.png" alt="TCPå››æ¬¡æ¡æ‰‹"></p></center><h4 id="ä¸ºä»€ä¹ˆä¸¤æ¬¡æ¡æ‰‹ä¸è¡Œ"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆä¸¤æ¬¡æ¡æ‰‹ä¸è¡Œ">#</a>ä¸ºä»€ä¹ˆä¸¤æ¬¡æ¡æ‰‹ä¸è¡Œ</h4><p>ä¸ºäº†é˜²æ­¢å·²å¤±æ•ˆçš„è¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µçªç„¶åˆä¼ é€åˆ°äº† Bï¼Œå› è€Œäº§ç”Ÿé”™è¯¯ã€‚A å‘é€çš„åŒ…ä¸¢äº†ï¼Œåˆå‘é€ä¸€ä¸ªåŒ…å»ºç«‹è¿æ¥ï¼Œç»“æœè¿™ä¸ªä¸¢çš„åŒ…åˆè¢«æ‰¾å›æ¥äº†ï¼ŒB åˆå»ºç«‹äº†ä¸€ä¸ª A ä¸è®¤å¯çš„è¿æ¥ã€‚</p><h4 id="ä¸ºä»€ä¹ˆéœ€è¦è®¾ç½®ä¸€ä¸ª-time-wait-çš„æ—¶é—´"><a class="header-anchor" href="#ä¸ºä»€ä¹ˆéœ€è¦è®¾ç½®ä¸€ä¸ª-time-wait-çš„æ—¶é—´">#</a>ä¸ºä»€ä¹ˆéœ€è¦è®¾ç½®ä¸€ä¸ª TIME-WAIT çš„æ—¶é—´</h4><ol><li>ä¿è¯ TCP åè®®çš„å…¨åŒå·¥è¿æ¥èƒ½å¤Ÿå¯é å…³é—­ã€‚å…ˆè¯´ç¬¬ä¸€ç‚¹ï¼Œå¦‚æœ Client ç›´æ¥ CLOSED äº†ï¼Œé‚£ä¹ˆç”±äº IP åè®®çš„ä¸å¯é æ€§æˆ–è€…æ˜¯å…¶å®ƒç½‘ç»œåŸå› ï¼Œå¯¼è‡´ Server æ²¡æœ‰æ”¶åˆ° Client æœ€åå›å¤çš„ ACKã€‚é‚£ä¹ˆ Server å°±ä¼šåœ¨è¶…æ—¶ä¹‹åç»§ç»­å‘é€ FINï¼Œæ­¤æ—¶ç”±äº Client å·²ç» CLOSED äº†ï¼Œå°±æ‰¾ä¸åˆ°ä¸é‡å‘çš„ FIN å¯¹åº”çš„è¿æ¥ï¼Œæœ€å Server å°±ä¼šæ”¶åˆ° RST è€Œä¸æ˜¯ ACKï¼ŒServer å°±ä¼šä»¥ä¸ºæ˜¯è¿æ¥é”™è¯¯æŠŠé—®é¢˜æŠ¥å‘Šç»™é«˜å±‚ã€‚è¿™æ ·çš„æƒ…å†µè™½ç„¶ä¸ä¼šé€ æˆæ•°æ®ä¸¢å¤±ï¼Œä½†æ˜¯å´å¯¼è‡´ TCP åè®®ä¸ç¬¦åˆå¯é è¿æ¥çš„è¦æ±‚ã€‚æ‰€ä»¥ï¼ŒClient ä¸æ˜¯ç›´æ¥è¿›å…¥ CLOSEDï¼Œè€Œæ˜¯è¦ä¿æŒ TIME_WAITï¼Œå½“å†æ¬¡æ”¶åˆ° FIN çš„æ—¶å€™ï¼Œèƒ½å¤Ÿä¿è¯å¯¹æ–¹æ”¶åˆ° ACKï¼Œæœ€åæ­£ç¡®çš„å…³é—­è¿æ¥ã€‚</li><li>ä¿è¯è¿™æ¬¡è¿æ¥çš„é‡å¤æ•°æ®æ®µä»ç½‘ç»œä¸­æ¶ˆå¤±ã€‚å†è¯´ç¬¬äºŒç‚¹ï¼Œå¦‚æœ Client ç›´æ¥ CLOSEDï¼Œç„¶ååˆå†å‘ Server å‘èµ·ä¸€ä¸ªæ–°è¿æ¥ï¼Œæˆ‘ä»¬ä¸èƒ½ä¿è¯è¿™ä¸ªæ–°è¿æ¥ä¸åˆšå…³é—­çš„è¿æ¥çš„ç«¯å£å·æ˜¯ä¸åŒçš„ã€‚ä¹Ÿå°±æ˜¯è¯´æœ‰å¯èƒ½æ–°è¿æ¥å’Œè€è¿æ¥çš„ç«¯å£å·æ˜¯ç›¸åŒçš„ã€‚ä¸€èˆ¬æ¥è¯´ä¸ä¼šå‘ç”Ÿä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰ç‰¹æ®Šæƒ…å†µå‡ºç°ï¼šå‡è®¾æ–°è¿æ¥å’Œå·²ç»å…³é—­çš„è€è¿æ¥ç«¯å£å·æ˜¯ä¸€æ ·çš„ï¼Œå¦‚æœå‰ä¸€æ¬¡è¿æ¥çš„æŸäº›æ•°æ®ä»ç„¶æ»ç•™åœ¨ç½‘ç»œä¸­ï¼Œè¿™äº›å»¶è¿Ÿæ•°æ®åœ¨å»ºç«‹æ–°è¿æ¥ä¹‹åæ‰åˆ°è¾¾ Serverï¼Œç”±äºæ–°è¿æ¥å’Œè€è¿æ¥çš„ç«¯å£å·æ˜¯ä¸€æ ·çš„ï¼Œåˆå› ä¸º TCP åè®®åˆ¤æ–­ä¸åŒè¿æ¥çš„ä¾æ®æ˜¯ socket pairï¼Œäºæ˜¯ï¼ŒTCP åè®®å°±è®¤ä¸ºé‚£ä¸ªå»¶è¿Ÿçš„æ•°æ®æ˜¯å±äºæ–°è¿æ¥çš„ï¼Œè¿™æ ·å°±å’ŒçœŸæ­£çš„æ–°è¿æ¥çš„æ•°æ®åŒ…å‘ç”Ÿæ··æ·†äº†ã€‚æ‰€ä»¥ TCP è¿æ¥è¿˜è¦åœ¨ TIME_WAIT çŠ¶æ€ç­‰å¾… 2 å€ MSLï¼Œè¿™æ ·å¯ä»¥ä¿è¯æœ¬æ¬¡è¿æ¥çš„æ‰€æœ‰æ•°æ®éƒ½ä»ç½‘ç»œä¸­æ¶ˆå¤±ã€‚</li></ol><h3 id="tcp-å¦‚ä½•ä¿è¯å¯é çš„ä¼ è¾“"><a class="header-anchor" href="#tcp-å¦‚ä½•ä¿è¯å¯é çš„ä¼ è¾“">#</a>TCP å¦‚ä½•ä¿è¯å¯é çš„ä¼ è¾“?</h3><ol><li>ç¡®è®¤å’Œé‡ä¼ </li><li>æ•°æ®æ ¡éªŒ</li><li>æ•°æ®åˆç†åˆ†ç‰‡å’Œæ’åº</li><li>æµé‡æ§åˆ¶ï¼šå½“æ¥æ”¶æ–¹æ¥ä¸åŠå¤„ç†å‘é€æ–¹çš„æ•°æ®ï¼Œèƒ½æç¤ºå‘é€æ–¹é™ä½å‘é€çš„é€Ÿç‡ï¼Œé˜²æ­¢åŒ…ä¸¢å¤±ã€‚</li><li>æ‹¥å¡æ§åˆ¶ï¼šå½“ç½‘ç»œæ‹¥å¡æ—¶ï¼Œå‡å°‘æ•°æ®çš„å‘é€ã€‚</li></ol><h3 id="ç›¸å…³åè¯"><a class="header-anchor" href="#ç›¸å…³åè¯">#</a>ç›¸å…³åè¯</h3><ul><li>MSLï¼ˆMaximum Segment Lifetimeï¼‰ï¼šæŠ¥æ–‡æœ€å¤§ç”Ÿå­˜æ—¶é—´</li><li>MTUï¼ˆMaximum Transmission Unitï¼‰ï¼šç”¨æ¥é€šçŸ¥å¯¹æ–¹æ‰€èƒ½æ¥å—æ•°æ®æœåŠ¡å•å…ƒçš„æœ€å¤§å°ºå¯¸ï¼Œè¯´æ˜å‘é€æ–¹èƒ½å¤Ÿæ¥å—çš„æœ‰æ•ˆè½½è·å¤§å°ã€‚</li></ul><h2 id="è¿›ç¨‹å’Œçº¿ç¨‹"><a class="header-anchor" href="#è¿›ç¨‹å’Œçº¿ç¨‹">#</a>è¿›ç¨‹å’Œçº¿ç¨‹</h2><h3 id="å®šä¹‰"><a class="header-anchor" href="#å®šä¹‰">#</a>å®šä¹‰</h3><p>è¿›ç¨‹:å…·æœ‰ä¸€å®šç‹¬ç«‹åŠŸèƒ½çš„ç¨‹åºå…³äºæŸä¸ªæ•°æ®é›†åˆä¸Šçš„ä¸€æ¬¡è¿è¡Œæ´»åŠ¨,è¿›ç¨‹æ˜¯ç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„ä¸€ä¸ªç‹¬ç«‹å•ä½.</p><p>çº¿ç¨‹:è¿›ç¨‹çš„ä¸€ä¸ªå®ä½“,æ˜¯ CPU è°ƒåº¦å’Œåˆ†æ´¾çš„åŸºæœ¬å•ä½,å®ƒæ˜¯æ¯”è¿›ç¨‹æ›´å°çš„èƒ½ç‹¬ç«‹è¿è¡Œçš„åŸºæœ¬å•ä½.çº¿ç¨‹è‡ªå·±åŸºæœ¬ä¸Šä¸æ‹¥æœ‰ç³»ç»Ÿèµ„æº,åªæ‹¥æœ‰ä¸€ç‚¹åœ¨è¿è¡Œä¸­å¿…ä¸å¯å°‘çš„èµ„æº(å¦‚ç¨‹åºè®¡æ•°å™¨,ä¸€ç»„å¯„å­˜å™¨å’Œæ ˆ),ä½†æ˜¯å®ƒå¯ä¸åŒå±ä¸€ä¸ªè¿›ç¨‹çš„å…¶ä»–çš„çº¿ç¨‹å…±äº«è¿›ç¨‹æ‰€æ‹¥æœ‰çš„å…¨éƒ¨èµ„æº.</p><h3 id="å…³ç³»"><a class="header-anchor" href="#å…³ç³»">#</a>å…³ç³»</h3><p>ä¸€ä¸ªçº¿ç¨‹å¯ä»¥åˆ›å»ºå’Œæ’¤é”€å¦ä¸€ä¸ªçº¿ç¨‹;åŒä¸€ä¸ªè¿›ç¨‹ä¸­çš„å¤šä¸ªçº¿ç¨‹ä¹‹é—´å¯ä»¥å¹¶å‘æ‰§è¡Œ.</p><p>ç›¸å¯¹è¿›ç¨‹è€Œè¨€ï¼Œçº¿ç¨‹æ˜¯ä¸€ä¸ªæ›´åŠ æ¥è¿‘äºæ‰§è¡Œä½“çš„æ¦‚å¿µï¼Œå®ƒå¯ä»¥ä¸åŒè¿›ç¨‹ä¸­çš„å…¶ä»–çº¿ç¨‹å…±äº«æ•°æ®ï¼Œä½†æ‹¥æœ‰è‡ªå·±çš„æ ˆç©ºé—´ï¼Œæ‹¥æœ‰ç‹¬ç«‹çš„æ‰§è¡Œåºåˆ—ã€‚</p><h3 id="åŒºåˆ«"><a class="header-anchor" href="#åŒºåˆ«">#</a>åŒºåˆ«</h3><p>è¿›ç¨‹å’Œçº¿ç¨‹çš„ä¸»è¦å·®åˆ«åœ¨äºå®ƒä»¬æ˜¯ä¸åŒçš„æ“ä½œç³»ç»Ÿèµ„æºç®¡ç†æ–¹å¼ã€‚è¿›ç¨‹æœ‰ç‹¬ç«‹çš„åœ°å€ç©ºé—´ï¼Œä¸€ä¸ªè¿›ç¨‹å´©æºƒåï¼Œåœ¨ä¿æŠ¤æ¨¡å¼ä¸‹ä¸ä¼šå¯¹å…¶å®ƒè¿›ç¨‹äº§ç”Ÿå½±å“ï¼Œè€Œçº¿ç¨‹åªæ˜¯ä¸€ä¸ªè¿›ç¨‹ä¸­çš„ä¸åŒæ‰§è¡Œè·¯å¾„ã€‚çº¿ç¨‹æœ‰è‡ªå·±çš„å †æ ˆå’Œå±€éƒ¨å˜é‡ï¼Œä½†çº¿ç¨‹ä¹‹é—´æ²¡æœ‰å•ç‹¬çš„åœ°å€ç©ºé—´ï¼Œä¸€ä¸ªçº¿ç¨‹æ­»æ‰å°±ç­‰äºæ•´ä¸ªè¿›ç¨‹æ­»æ‰ï¼Œæ‰€ä»¥å¤šè¿›ç¨‹çš„ç¨‹åºè¦æ¯”å¤šçº¿ç¨‹çš„ç¨‹åºå¥å£®ï¼Œä½†åœ¨è¿›ç¨‹åˆ‡æ¢æ—¶ï¼Œè€—è´¹èµ„æºè¾ƒå¤§ï¼Œæ•ˆç‡è¦å·®ä¸€äº›ã€‚ä½†å¯¹äºä¸€äº›è¦æ±‚åŒæ—¶è¿›è¡Œå¹¶ä¸”åˆè¦å…±äº«æŸäº›å˜é‡çš„å¹¶å‘æ“ä½œï¼Œåªèƒ½ç”¨çº¿ç¨‹ï¼Œä¸èƒ½ç”¨è¿›ç¨‹ã€‚</p><ol><li>ç®€è€Œè¨€ä¹‹,ä¸€ä¸ªç¨‹åºè‡³å°‘æœ‰ä¸€ä¸ªè¿›ç¨‹,ä¸€ä¸ªè¿›ç¨‹è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹.</li><li>çº¿ç¨‹çš„åˆ’åˆ†å°ºåº¦å°äºè¿›ç¨‹ï¼Œä½¿å¾—å¤šçº¿ç¨‹ç¨‹åºçš„å¹¶å‘æ€§é«˜ã€‚</li><li>å¦å¤–ï¼Œè¿›ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æ‹¥æœ‰ç‹¬ç«‹çš„å†…å­˜å•å…ƒï¼Œè€Œå¤šä¸ªçº¿ç¨‹å…±äº«å†…å­˜ï¼Œä»è€Œæå¤§åœ°æé«˜äº†ç¨‹åºçš„è¿è¡Œæ•ˆç‡ã€‚</li><li>çº¿ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ä¸è¿›ç¨‹è¿˜æ˜¯æœ‰åŒºåˆ«çš„ã€‚æ¯ä¸ªç‹¬ç«‹çš„çº¿ç¨‹æœ‰ä¸€ä¸ªç¨‹åºè¿è¡Œçš„å…¥å£ã€é¡ºåºæ‰§è¡Œåºåˆ—å’Œç¨‹åºçš„å‡ºå£ã€‚ä½†æ˜¯çº¿ç¨‹ä¸èƒ½å¤Ÿç‹¬ç«‹æ‰§è¡Œï¼Œå¿…é¡»ä¾å­˜åœ¨åº”ç”¨ç¨‹åºä¸­ï¼Œç”±åº”ç”¨ç¨‹åºæä¾›å¤šä¸ªçº¿ç¨‹æ‰§è¡Œæ§åˆ¶ã€‚</li><li>ä»é€»è¾‘è§’åº¦æ¥çœ‹ï¼Œå¤šçº¿ç¨‹çš„æ„ä¹‰åœ¨äºä¸€ä¸ªåº”ç”¨ç¨‹åºä¸­ï¼Œæœ‰å¤šä¸ªæ‰§è¡Œéƒ¨åˆ†å¯ä»¥åŒæ—¶æ‰§è¡Œã€‚ä½†æ“ä½œç³»ç»Ÿå¹¶æ²¡æœ‰å°†å¤šä¸ªçº¿ç¨‹çœ‹åšå¤šä¸ªç‹¬ç«‹çš„åº”ç”¨ï¼Œæ¥å®ç°è¿›ç¨‹çš„è°ƒåº¦å’Œç®¡ç†ä»¥åŠèµ„æºåˆ†é…ã€‚è¿™å°±æ˜¯è¿›ç¨‹å’Œçº¿ç¨‹çš„é‡è¦åŒºåˆ«ã€‚</li></ol><hr><p>æ ¹æœ¬åŒºåˆ«ï¼šè¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿèµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ï¼Œè€Œçº¿ç¨‹æ˜¯ä»»åŠ¡è°ƒåº¦å’Œæ‰§è¡Œçš„åŸºæœ¬å•ä½</p><p>åœ¨å¼€é”€æ–¹é¢ï¼šæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ç‹¬ç«‹çš„ä»£ç å’Œæ•°æ®ç©ºé—´ï¼ˆç¨‹åºä¸Šä¸‹æ–‡ï¼‰ï¼Œç¨‹åºä¹‹é—´çš„åˆ‡æ¢ä¼šæœ‰è¾ƒå¤§çš„å¼€é”€ï¼›çº¿ç¨‹å¯ä»¥çœ‹åšè½»é‡çº§çš„è¿›ç¨‹ï¼ŒåŒä¸€ç±»çº¿ç¨‹å…±äº«ä»£ç å’Œæ•°æ®ç©ºé—´ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„è¿è¡Œæ ˆå’Œç¨‹åºè®¡æ•°å™¨ï¼ˆPCï¼‰ï¼Œçº¿ç¨‹ä¹‹é—´åˆ‡æ¢çš„å¼€é”€å°ã€‚</p><p>æ‰€å¤„ç¯å¢ƒï¼šåœ¨æ“ä½œç³»ç»Ÿä¸­èƒ½åŒæ—¶è¿è¡Œå¤šä¸ªè¿›ç¨‹ï¼ˆç¨‹åºï¼‰ï¼›è€Œåœ¨åŒä¸€ä¸ªè¿›ç¨‹ï¼ˆç¨‹åºï¼‰ä¸­æœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œï¼ˆé€šè¿‡ CPU è°ƒåº¦ï¼Œåœ¨æ¯ä¸ªæ—¶é—´ç‰‡ä¸­åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œï¼‰</p><p>å†…å­˜åˆ†é…æ–¹é¢ï¼šç³»ç»Ÿåœ¨è¿è¡Œçš„æ—¶å€™ä¼šä¸ºæ¯ä¸ªè¿›ç¨‹åˆ†é…ä¸åŒçš„å†…å­˜ç©ºé—´ï¼›è€Œå¯¹çº¿ç¨‹è€Œè¨€ï¼Œé™¤äº† CPU å¤–ï¼Œç³»ç»Ÿä¸ä¼šä¸ºçº¿ç¨‹åˆ†é…å†…å­˜ï¼ˆçº¿ç¨‹æ‰€ä½¿ç”¨çš„èµ„æºæ¥è‡ªå…¶æ‰€å±è¿›ç¨‹çš„èµ„æºï¼‰ï¼Œçº¿ç¨‹ç»„ä¹‹é—´åªèƒ½å…±äº«èµ„æºã€‚</p><p>åŒ…å«å…³ç³»ï¼šæ²¡æœ‰çº¿ç¨‹çš„è¿›ç¨‹å¯ä»¥çœ‹åšæ˜¯å•çº¿ç¨‹çš„ï¼Œå¦‚æœä¸€ä¸ªè¿›ç¨‹å†…æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œåˆ™æ‰§è¡Œè¿‡ç¨‹ä¸æ˜¯ä¸€æ¡çº¿çš„ï¼Œè€Œæ˜¯å¤šæ¡çº¿ï¼ˆçº¿ç¨‹ï¼‰å…±åŒå®Œæˆçš„ï¼›çº¿ç¨‹æ˜¯è¿›ç¨‹çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥çº¿ç¨‹ä¹Ÿè¢«ç§°ä¸ºè½»æƒè¿›ç¨‹æˆ–è€…è½»é‡çº§è¿›ç¨‹ã€‚</p><h3 id="åç¨‹"><a class="header-anchor" href="#åç¨‹">#</a>åç¨‹</h3><p>åç¨‹ï¼Œæ˜¯ä¸€ç§æ¯”çº¿ç¨‹æ›´åŠ è½»é‡çº§çš„å­˜åœ¨ï¼Œåç¨‹ä¸æ˜¯è¢«æ“ä½œç³»ç»Ÿå†…æ ¸æ‰€ç®¡ç†ï¼Œè€Œå®Œå…¨æ˜¯ç”±ç¨‹åºæ‰€æ§åˆ¶ï¼ˆä¹Ÿå°±æ˜¯åœ¨ç”¨æˆ·æ€æ‰§è¡Œï¼‰ã€‚è¿™æ ·å¸¦æ¥çš„å¥½å¤„å°±æ˜¯æ€§èƒ½å¾—åˆ°äº†å¾ˆå¤§çš„æå‡ï¼Œä¸ä¼šåƒçº¿ç¨‹åˆ‡æ¢é‚£æ ·æ¶ˆè€—èµ„æºã€‚</p><p>æé«˜çš„æ‰§è¡Œæ•ˆç‡ï¼šå› ä¸ºå­ç¨‹åºåˆ‡æ¢ä¸æ˜¯çº¿ç¨‹åˆ‡æ¢ï¼Œè€Œæ˜¯ç”±ç¨‹åºè‡ªèº«æ§åˆ¶ï¼Œå› æ­¤ï¼Œæ²¡æœ‰çº¿ç¨‹åˆ‡æ¢çš„å¼€é”€ï¼Œå’Œå¤šçº¿ç¨‹æ¯”ï¼Œçº¿ç¨‹æ•°é‡è¶Šå¤šï¼Œåç¨‹çš„æ€§èƒ½ä¼˜åŠ¿å°±è¶Šæ˜æ˜¾ï¼›<br>ä¸éœ€è¦å¤šçº¿ç¨‹çš„é”æœºåˆ¶ï¼šå› ä¸ºåªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œä¹Ÿä¸å­˜åœ¨åŒæ—¶å†™å˜é‡å†²çªï¼Œåœ¨åç¨‹ä¸­æ§åˆ¶å…±äº«èµ„æºä¸åŠ é”ï¼Œåªéœ€è¦åˆ¤æ–­çŠ¶æ€å°±å¥½äº†ï¼Œæ‰€ä»¥æ‰§è¡Œæ•ˆç‡æ¯”å¤šçº¿ç¨‹é«˜å¾ˆå¤šã€‚</p><h2 id="çº¢é»‘æ ‘"><a class="header-anchor" href="#çº¢é»‘æ ‘">#</a>çº¢é»‘æ ‘</h2><h3 id="æ€§è´¨"><a class="header-anchor" href="#æ€§è´¨">#</a>æ€§è´¨</h3><ol><li>æ¯ä¸ªèŠ‚ç‚¹è¦ä¹ˆæ˜¯é»‘è‰²ï¼Œè¦ä¹ˆæ˜¯çº¢è‰²ã€‚</li><li>æ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²ã€‚</li><li>æ¯ä¸ªå¶å­èŠ‚ç‚¹ï¼ˆNILï¼‰æ˜¯é»‘è‰²ã€‚</li><li>æ¯ä¸ªçº¢è‰²ç»“ç‚¹çš„ä¸¤ä¸ªå­ç»“ç‚¹ä¸€å®šéƒ½æ˜¯é»‘è‰²ã€‚</li><li>ä»»æ„ä¸€ç»“ç‚¹åˆ°æ¯ä¸ªå¶å­ç»“ç‚¹çš„è·¯å¾„éƒ½åŒ…å«æ•°é‡ç›¸åŒçš„é»‘ç»“ç‚¹ã€‚</li></ol><h3 id="æ’å…¥"><a class="header-anchor" href="#æ’å…¥">#</a>æ’å…¥</h3><center><p><img src="//onns.xyz/blog/image/20200703-1.png" alt="æ’å…¥"></p></center><h3 id="åˆ é™¤"><a class="header-anchor" href="#åˆ é™¤">#</a>åˆ é™¤</h3><center><p><img src="//onns.xyz/blog/image/20200703-2.png" alt="åˆ é™¤"></p></center><h3 id="æ—¶é—´å¤æ‚åº¦"><a class="header-anchor" href="#æ—¶é—´å¤æ‚åº¦">#</a>æ—¶é—´å¤æ‚åº¦</h3><table><thead><tr><th>Algorithm</th><th>Average</th><th>Worst case</th></tr></thead><tbody><tr><td>Space</td><td>O(n)</td><td>O(n)</td></tr><tr><td>Search</td><td>O(log n)</td><td>O(log n)</td></tr><tr><td>Insert</td><td>O(log n)</td><td>O(log n)</td></tr><tr><td>Delete</td><td>O(log n)</td><td>O(log n)</td></tr></tbody></table><h3 id="ä¸-avl-åŒºåˆ«"><a class="header-anchor" href="#ä¸-avl-åŒºåˆ«">#</a>ä¸ AVL åŒºåˆ«</h3><p>AVL æ˜¯ä¸¥æ ¼çš„å¹³è¡¡æ ‘ï¼Œå› æ­¤åœ¨å¢åŠ æˆ–è€…åˆ é™¤èŠ‚ç‚¹çš„æ—¶å€™ï¼Œæ ¹æ®ä¸åŒæƒ…å†µï¼Œæ—‹è½¬çš„æ¬¡æ•°æ¯”çº¢é»‘æ ‘è¦å¤šï¼›<br>çº¢é»‘æ ‘æ˜¯ç”¨éä¸¥æ ¼çš„å¹³è¡¡æ¥æ¢å–å¢åˆ èŠ‚ç‚¹æ—¶å€™æ—‹è½¬æ¬¡æ•°çš„é™ä½å¼€é”€ï¼›<br>æ‰€ä»¥ç®€å•è¯´ï¼Œå¦‚æœä½ çš„åº”ç”¨ä¸­ï¼Œæœç´¢çš„æ¬¡æ•°è¿œè¿œå¤§äºæ’å…¥å’Œåˆ é™¤ï¼Œé‚£ä¹ˆé€‰æ‹© AVL æ ‘ï¼Œ<br>å¦‚æœæœç´¢ï¼Œæ’å…¥åˆ é™¤æ¬¡æ•°å‡ ä¹å·®ä¸å¤šï¼Œåº”é€‰æ‹©çº¢é»‘æ ‘ã€‚å³ï¼Œæœ‰æ—¶ä»…ä¸ºäº†æ’åºï¼ˆå»ºç«‹-éå†-åˆ é™¤ï¼‰ï¼Œä¸æŸ¥æ‰¾æˆ–æŸ¥æ‰¾æ¬¡æ•°å¾ˆå°‘ï¼ŒR-B æ ‘åˆç®—ä¸€äº›ã€‚<br>AVL æ ‘åœ¨é¡ºåºæ’å…¥å’Œåˆ é™¤æ—¶æœ‰ 20%å·¦å³çš„æ€§èƒ½ä¼˜åŠ¿ï¼Œä½†éšæœºæ€§èƒ½åè€Œè½å 15%å·¦å³ï¼Œç°å®åº”ç”¨å½“ç„¶ä¸€èˆ¬éƒ½æ˜¯éšæœºæƒ…å†µï¼Œæ‰€ä»¥çº¢é»‘æ ‘å¾—åˆ°äº†æ›´å¹¿æ³›çš„åº”ç”¨ã€‚</p><h2 id="æ­»é”"><a class="header-anchor" href="#æ­»é”">#</a>æ­»é”</h2><p>æ­»é”æ˜¯æŒ‡å¤šä¸ªè¿›ç¨‹ï¼ˆçº¿ç¨‹ï¼‰åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œç”±äºç«äº‰èµ„æºæˆ–è€…ç”±äºå½¼æ­¤é€šä¿¡è€Œé€ æˆçš„ä¸€ç§é˜»å¡çš„ç°è±¡ï¼ˆäº’ç›¸æŒ‚èµ·ç­‰å¾…ï¼‰ï¼Œè‹¥æ— å¤–åŠ›ä½œç”¨ï¼Œå®ƒä»¬éƒ½å°†æ— æ³•æ¨è¿›ä¸‹å»ã€‚</p><h3 id="å¸¸è§æ­»é”"><a class="header-anchor" href="#å¸¸è§æ­»é”">#</a>å¸¸è§æ­»é”</h3><ol><li>çº¿ç¨‹å°†è‡ªå·±é”ä½</li></ol><p>ä¸ºäº†ä¿è¯çº¿ç¨‹ä¹‹é—´çš„åŒæ­¥å’Œäº’æ–¥ï¼Œæˆ‘ä»¬å¾€å¾€éœ€è¦ç»™å…¶åŠ é”ï¼Œæœ‰æ—¶å€™ï¼Œçº¿ç¨‹ç”³è¯·äº†é”èµ„æºï¼Œè¿˜æ²¡æœ‰ç­‰å¾…é‡Šæ”¾ï¼Œåˆä¸€æ¬¡ç”³è¯·è¿™æŠŠé”ï¼Œç»“æœå°±æ˜¯æŒ‚èµ·ç­‰å¾…è¿™æŠŠé”çš„é‡Šæ”¾ï¼Œä½†æ˜¯è¿™æŠŠé”æ˜¯è¢«è‡ªå·±æ‹¿ç€ï¼Œæ‰€ä»¥å°±ä¼šæ°¸è¿œæŒ‚èµ·ç­‰å¾…ï¼Œå°±é€ æˆäº†æ­»é”ã€‚</p><ol start="2"><li>å¤šçº¿ç¨‹ç«äº‰èµ„æºå¾ªç¯ç­‰å¾…</li></ol><p>æœ‰ä¸¤ä¸ªçº¿ç¨‹ P1 å’Œ P2ï¼ŒP1 é¦–å…ˆç”³è¯·å¾—åˆ°äº†é” L1,P2 ç”³è¯·å¾—åˆ°äº†é” L2,è¿™ä¸ªæ—¶å€™ P1 æœ‰å‘å»ç”³è¯·é” L2ï¼Œç»“æœæ˜¯è¢«æŒ‚èµ·ç­‰å¾… P2 é‡Šæ”¾é” L2,è€Œ P2 æ°å¥½ä¹Ÿæƒ³ç”³è¯·é” L1ï¼Œç»“æœæ˜¯æŒ‚èµ·ç­‰å¾… P1 é‡Šæ”¾é” L1ï¼Œæ­¤æ—¶å°±é€ æˆä¸¤ä¸ªçº¿ç¨‹äº’ç›¸åƒµæŒï¼Œé€ æˆæ­»é”ã€‚</p><ol start="3"><li>è¿›ç¨‹æ¨è¿›é¡ºåºä¸å½“å¼•èµ·çš„æ­»é”é—®é¢˜</li></ol><p>æœ‰ä¸‰ä¸ªçº¿ç¨‹ï¼ŒP1ï¼ŒP2 å’Œ P3ï¼Œåˆ†åˆ«ç”Ÿäº§æ•°æ® M1ï¼ŒM2ï¼ŒM3ï¼ŒåŒæ—¶åˆ†åˆ«æ¥æ”¶åˆ«çš„çº¿ç¨‹äº§ç”Ÿçš„æ•°æ® M3,M2,M1,å¦‚æœçº¿ç¨‹æ¨è¿›çš„é¡ºåºæ­£ç¡®ï¼Œå³ä¸‰ä¸ªçº¿ç¨‹éƒ½å…ˆç”Ÿäº§æ•°æ®ï¼Œå†æ¥æ”¶ï¼Œé‚£ä¹ˆæ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯ä¸€æ—¦çº¿ç¨‹å…ˆæ¥å—æ•°æ®ï¼Œå†ç”Ÿäº§æ•°æ®ï¼Œå› ä¸ºä¸€å¼€å§‹æ²¡æœ‰æ•°æ®äº§ç”Ÿï¼Œé‚£ä¹ˆå°±ä¼šé€ æˆä¸‰ä¸ªçº¿ç¨‹çš„æ­»é”é—®é¢˜ã€‚</p><h3 id="äº§ç”ŸåŸå› "><a class="header-anchor" href="#äº§ç”ŸåŸå› ">#</a>äº§ç”ŸåŸå› </h3><ol><li>ç³»ç»Ÿçš„èµ„æºä¸è¶³ã€‚</li><li>è¿›ç¨‹ï¼ˆçº¿ç¨‹ï¼‰æ¨è¿›çš„é¡ºåºä¸å¯¹ã€‚</li><li>èµ„æºçš„åˆ†é…ä¸å½“ã€‚</li></ol><h3 id="å¿…è¦æ¡ä»¶"><a class="header-anchor" href="#å¿…è¦æ¡ä»¶">#</a>å¿…è¦æ¡ä»¶</h3><ol><li>äº’æ–¥æ¡ä»¶ï¼šè¿›ç¨‹ï¼ˆçº¿ç¨‹ï¼‰ç”³è¯·çš„èµ„æºåœ¨ä¸€æ®µæ—¶é—´ä¸­åªèƒ½è¢«ä¸€ä¸ªè¿›ç¨‹ï¼ˆçº¿ç¨‹ï¼‰ä½¿ç”¨ã€‚</li><li>è¯·æ±‚ä¸ç­‰å¾…æ¡ä»¶ï¼šè¿›ç¨‹ï¼ˆçº¿ç¨‹ï¼‰å·²ç»æ‹¥æœ‰äº†ä¸€ä¸ªèµ„æºï¼Œä½†æ˜¯åˆç”³è¯·æ–°çš„èµ„æºï¼Œæ‹¥æœ‰çš„èµ„æºä¿æŒä¸å˜ ã€‚</li><li>ä¸å¯å‰¥å¤ºæ¡ä»¶ï¼šåœ¨ä¸€ä¸ªè¿›ç¨‹ï¼ˆçº¿ç¨‹ï¼‰æ²¡æœ‰ç”¨å®Œï¼Œä¸»åŠ¨é‡Šæ”¾èµ„æºçš„æ—¶å€™ï¼Œä¸èƒ½è¢«æŠ¢å ã€‚</li><li>å¾ªç¯ç­‰å¾…æ¡ä»¶ï¼šå¤šä¸ªè¿›ç¨‹ï¼ˆçº¿ç¨‹ï¼‰ä¹‹é—´å­˜åœ¨èµ„æºå¾ªç¯é“¾ã€‚</li></ol><h4 id="æ‰“ç ´"><a class="header-anchor" href="#æ‰“ç ´">#</a>æ‰“ç ´</h4><ol><li>æ‰“ç ´äº’æ–¥æ¡ä»¶ï¼šæ”¹é€ ç‹¬å æ€§èµ„æºä¸ºè™šæ‹Ÿå¤§èµ„æºï¼Œä½†æ˜¯å¤§éƒ¨åˆ†èµ„æºæ— æ³•æ”¹é€ ï¼Œå› æ­¤ä¸å»ºè®®ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ã€‚</li><li>æ‰“ç ´è¯·æ±‚ä¸ä¿æŒæ¡ä»¶ï¼šåœ¨è¿›ç¨‹ï¼ˆçº¿ç¨‹ï¼‰è¿è¡Œä¹‹å‰ï¼Œå°±æŠŠéœ€è¦ç”³è¯·çš„èµ„æºä¸€æ¬¡æ€§ç”³è¯·åˆ°ä½ï¼Œæ»¡è¶³åˆ™è¿è¡Œï¼Œä¸æ»¡è¶³å°±ç­‰å¾…ï¼Œè¿™æ ·å°±ä¸ä¼šé€ æˆåœ¨å æœ‰èµ„æºçš„æƒ…å†µä¸‹ï¼Œè¿˜è¦ç”³è¯·æ–°èµ„æºã€‚</li><li>æ‰“ç ´ä¸å¯å‰¥å¤ºæ¡ä»¶ï¼šåœ¨å æœ‰èµ„æºå¹¶ä¸”è¿˜æƒ³è¦ç”³è¯·æ–°èµ„æºçš„æ—¶å€™ï¼Œå½’è¿˜å·²ç»å æœ‰çš„èµ„æºã€‚</li><li>æ‰“ç ´å¾ªç¯ç­‰å¾…æ¡ä»¶ï¼šå®ç°èµ„æºçš„æœ‰åºåˆ†é…ï¼Œå³å¯¹æ‰€æœ‰çš„è®¾å¤‡è¿›è¡Œåˆ†ç±»ç¼–å·ï¼Œåªèƒ½ä»¥å‡åºçš„æ–¹å¼æ¥ç”³è¯·èµ„æºã€‚</li></ol><h3 id="å¤„ç†æ–¹æ³•"><a class="header-anchor" href="#å¤„ç†æ–¹æ³•">#</a>å¤„ç†æ–¹æ³•</h3><ol><li>é¢„é˜²æ­»é”ï¼šç ´åæ­»é”äº§ç”Ÿçš„å››ä¸ªæ¡ä»¶ä¹‹ä¸€ï¼Œæ³¨æ„ï¼Œäº’æ–¥æ¡ä»¶ä¸èƒ½ç ´åã€‚</li><li>é¿å…æ­»é”ï¼šåˆç†çš„åˆ†é…èµ„æºã€‚</li><li>æ£€æŸ¥æ­»é”ï¼šåˆ©ç”¨ä¸“é—¨çš„æ­»é”æœºæ„æ£€æŸ¥æ­»é”çš„å‘ç”Ÿï¼Œç„¶åé‡‡å–ç›¸åº”çš„æ–¹æ³•ã€‚</li><li>è§£é™¤æ­»é”ï¼šå‘ç”Ÿæ­»é”æ—¶å€™ï¼Œé‡‡å–åˆç†çš„æ–¹æ³•è§£å†³æ­»é”ã€‚ä¸€èˆ¬æ˜¯å¼ºè¡Œå‰¥å¤ºèµ„æºã€‚</li></ol><ul><li>ç­‰å¾…æŸä¸ªèµ„æºæ—¶ï¼Œä½¿ç”¨è¶…æ—¶æœºåˆ¶ã€‚</li><li>é‡‡ç”¨æ¶ˆæ¯é€šä¿¡çš„é€šä¿¡æœºåˆ¶ï¼Œè€Œä¸æ˜¯å…±äº«å†…å­˜çš„é€šä¿¡æœºåˆ¶ã€‚</li></ul><h2 id="http"><a class="header-anchor" href="#http">#</a>HTTP</h2><p>HTTP åè®®æ˜¯ Hyper Text Transfer Protocolï¼ˆè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰çš„ç¼©å†™ï¼Œæ˜¯ç”¨äºä»ä¸‡ç»´ç½‘æœåŠ¡å™¨ä¼ è¾“è¶…æ–‡æœ¬åˆ°æœ¬åœ°æµè§ˆå™¨çš„ä¼ é€åè®®ã€‚<br>HTTP æ˜¯ä¸€ä¸ªåŸºäº TCP/IP é€šä¿¡åè®®æ¥ä¼ é€’æ•°æ®ã€‚<br>åº”ç”¨å±‚åè®®ã€‚</p><ol><li>HTTP æ˜¯æ— è¿æ¥ï¼šæ— è¿æ¥çš„å«ä¹‰æ˜¯é™åˆ¶æ¯æ¬¡è¿æ¥åªå¤„ç†ä¸€ä¸ªè¯·æ±‚ã€‚æœåŠ¡å™¨å¤„ç†å®Œå®¢æˆ·çš„è¯·æ±‚ï¼Œå¹¶æ”¶åˆ°å®¢æˆ·çš„åº”ç­”åï¼Œå³æ–­å¼€è¿æ¥ã€‚é‡‡ç”¨è¿™ç§æ–¹å¼å¯ä»¥èŠ‚çœä¼ è¾“æ—¶é—´ã€‚</li><li>HTTP æ˜¯åª’ä½“ç‹¬ç«‹çš„ï¼šè¿™æ„å‘³ç€ï¼Œåªè¦å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çŸ¥é“å¦‚ä½•å¤„ç†çš„æ•°æ®å†…å®¹ï¼Œä»»ä½•ç±»å‹çš„æ•°æ®éƒ½å¯ä»¥é€šè¿‡ HTTP å‘é€ã€‚å®¢æˆ·ç«¯ä»¥åŠæœåŠ¡å™¨æŒ‡å®šä½¿ç”¨é€‚åˆçš„ MIME-type å†…å®¹ç±»å‹ã€‚</li><li>HTTP æ˜¯æ— çŠ¶æ€ï¼šHTTP åè®®æ˜¯æ— çŠ¶æ€åè®®ã€‚æ— çŠ¶æ€æ˜¯æŒ‡åè®®å¯¹äºäº‹åŠ¡å¤„ç†æ²¡æœ‰è®°å¿†èƒ½åŠ›ã€‚ç¼ºå°‘çŠ¶æ€æ„å‘³ç€å¦‚æœåç»­å¤„ç†éœ€è¦å‰é¢çš„ä¿¡æ¯ï¼Œåˆ™å®ƒå¿…é¡»é‡ä¼ ï¼Œè¿™æ ·å¯èƒ½å¯¼è‡´æ¯æ¬¡è¿æ¥ä¼ é€çš„æ•°æ®é‡å¢å¤§ã€‚å¦ä¸€æ–¹é¢ï¼Œåœ¨æœåŠ¡å™¨ä¸éœ€è¦å…ˆå‰ä¿¡æ¯æ—¶å®ƒçš„åº”ç­”å°±è¾ƒå¿«ã€‚</li></ol><h3 id="http-2-0"><a class="header-anchor" href="#http-2-0">#</a>HTTP 2.0</h3><p>HTTP/2ï¼ˆè¶…æ–‡æœ¬ä¼ è¾“åè®®ç¬¬ 2 ç‰ˆï¼Œæœ€åˆå‘½åä¸º HTTP2.0ï¼‰ï¼Œæ˜¯ HTTP åè®®çš„ç¬¬äºŒä¸ªä¸»è¦ç‰ˆæœ¬ã€‚HTTP/2 æ˜¯ HTTP åè®®è‡ª 1999 å¹´ HTTP1.1 å‘å¸ƒåçš„é¦–ä¸ªæ›´æ–°ï¼Œä¸»è¦åŸºäº SPDY åè®®ã€‚<br>HTTP2.0 çš„ç‰¹ç‚¹æ˜¯ï¼šåœ¨ä¸æ”¹åŠ¨ HTTP è¯­ä¹‰ã€æ–¹æ³•ã€çŠ¶æ€ç ã€URI åŠé¦–éƒ¨å­—æ®µçš„æƒ…å†µä¸‹ï¼Œå¤§å¹…åº¦æé«˜äº† web æ€§èƒ½ã€‚</p><p>SPDY åè®®ï¼šGoogle å¼€å‘çš„åŸºäº TCP åè®®çš„åº”ç”¨å±‚åè®®ã€‚ç›®æ ‡æ˜¯ä¼˜åŒ– HTTP åè®®çš„æ€§èƒ½ï¼Œé€šè¿‡å‹ç¼©ã€å¤šè·¯å¤ç”¨å’Œä¼˜å…ˆçº§ç­‰æŠ€æœ¯ï¼Œç¼©çŸ­ç½‘é¡µçš„åŠ è½½æ—¶é—´å¹¶æé«˜å®‰å…¨æ€§ã€‚SPDY åè®®çš„æ ¸å¿ƒæ€æƒ³æ˜¯å°½é‡å‡å°‘ TCP è¿æ¥æ•°ã€‚SPDY å¹¶ä¸æ˜¯ä¸€ç§ç”¨äºæ›¿ä»£ HTTP çš„åè®®ï¼Œè€Œæ˜¯å¯¹ HTTP åè®®çš„å¢å¼ºã€‚</p><h4 id="äºŒè¿›åˆ¶ä¼ è¾“"><a class="header-anchor" href="#äºŒè¿›åˆ¶ä¼ è¾“">#</a>äºŒè¿›åˆ¶ä¼ è¾“</h4><p>HTTP2.0 ä¸­æ‰€æœ‰åŠ å¼ºæ€§èƒ½çš„æ ¸å¿ƒæ˜¯äºŒè¿›åˆ¶ä¼ è¾“ï¼Œåœ¨ HTTP1.x ä¸­ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡æ–‡æœ¬çš„æ–¹å¼ä¼ è¾“æ•°æ®ã€‚åŸºäºæ–‡æœ¬çš„æ–¹å¼ä¼ è¾“æ•°æ®å­˜åœ¨å¾ˆå¤šç¼ºé™·ï¼Œæ–‡æœ¬çš„è¡¨ç°å½¢å¼æœ‰å¤šæ ·æ€§ï¼Œå› æ­¤è¦åšåˆ°å¥å£®æ€§è€ƒè™‘çš„åœºæ™¯å¿…ç„¶æœ‰å¾ˆå¤šï¼Œä½†æ˜¯äºŒè¿›åˆ¶åˆ™ä¸åŒï¼Œåªæœ‰ 0 å’Œ 1 çš„ç»„åˆï¼Œå› æ­¤é€‰æ‹©äº†äºŒè¿›åˆ¶ä¼ è¾“ï¼Œå®ç°æ–¹ä¾¿ä¸”å¥å£®ã€‚<br>åœ¨ HTTP2.0 ä¸­å¼•å…¥äº†æ–°çš„ç¼–ç æœºåˆ¶ï¼Œæ‰€æœ‰ä¼ è¾“çš„æ•°æ®éƒ½ä¼šè¢«åˆ†å‰²ï¼Œå¹¶é‡‡ç”¨äºŒè¿›åˆ¶æ ¼å¼ç¼–ç ã€‚<br>ä¸ºäº†ä¿è¯ HTTP ä¸å—å½±å“ï¼Œé‚£å°±éœ€è¦åœ¨åº”ç”¨å±‚ï¼ˆHTTP2.0ï¼‰å’Œä¼ è¾“å±‚ï¼ˆTCP or UDPï¼‰ä¹‹é—´å¢åŠ ä¸€ä¸ªäºŒè¿›åˆ¶åˆ†å¸§å±‚ã€‚åœ¨äºŒè¿›åˆ¶åˆ†å¸§å±‚ä¸Šï¼ŒHTTP2.0 ä¼šå°†æ‰€æœ‰ä¼ è¾“çš„ä¿¡æ¯åˆ†ä¸ºæ›´å°çš„æ¶ˆæ¯å’Œå¸§ï¼Œå¹¶é‡‡ç”¨äºŒè¿›åˆ¶æ ¼å¼ç¼–ç ï¼Œå…¶ä¸­ HTTP1.x çš„é¦–éƒ¨ä¿¡æ¯ä¼šè¢«å°è£…åˆ° Headers å¸§ï¼Œè€Œ Request Body åˆ™å°è£…åˆ° Data å¸§ã€‚</p><h4 id="å¤šè·¯å¤ç”¨"><a class="header-anchor" href="#å¤šè·¯å¤ç”¨">#</a>å¤šè·¯å¤ç”¨</h4><p>åœ¨ HTTP1.0 ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šä½¿ç”¨åˆ°é›ªç¢§å›¾ã€ä½¿ç”¨å¤šä¸ªåŸŸåç­‰æ–¹å¼æ¥è¿›è¡Œä¼˜åŒ–ï¼Œéƒ½æ˜¯å› ä¸ºæµè§ˆå™¨é™åˆ¶äº†åŒä¸€ä¸ªåŸŸåä¸‹çš„è¯·æ±‚æ•°é‡ï¼Œå½“é¡µé¢éœ€è¦è¯·æ±‚å¾ˆå¤šèµ„æºçš„æ—¶å€™ï¼Œé˜Ÿå¤´é˜»å¡ï¼ˆHead of line blockingï¼‰ä¼šå¯¼è‡´åœ¨è¾¾åˆ°æœ€å¤§è¯·æ±‚æ—¶ï¼Œèµ„æºéœ€è¦ç­‰å¾…å…¶ä»–èµ„æºè¯·æ±‚å®Œæˆåæ‰èƒ½ç»§ç»­å‘é€ã€‚<br>HTTP2.0 ä¸­ï¼Œæœ‰ä¸¤ä¸ªæ¦‚å¿µéå¸¸é‡è¦ï¼šå¸§ï¼ˆframeï¼‰å’Œæµï¼ˆstreamï¼‰ã€‚<br>å¸§æ˜¯æœ€å°çš„æ•°æ®å•ä½ï¼Œæ¯ä¸ªå¸§ä¼šæ ‡è¯†å‡ºè¯¥å¸§å±äºå“ªä¸ªæµï¼Œæµæ˜¯å¤šä¸ªå¸§ç»„æˆçš„æ•°æ®æµã€‚<br>æ‰€è°“å¤šè·¯å¤ç”¨ï¼Œå³åœ¨ä¸€ä¸ª TCP è¿æ¥ä¸­å­˜åœ¨å¤šä¸ªæµï¼Œå³å¯ä»¥åŒæ—¶å‘é€å¤šä¸ªè¯·æ±‚ï¼Œå¯¹ç«¯å¯ä»¥é€šè¿‡å¸§ä¸­çš„è¡¨ç¤ºçŸ¥é“è¯¥å¸§å±äºå“ªä¸ªè¯·æ±‚ã€‚åœ¨å®¢æˆ·ç«¯ï¼Œè¿™äº›å¸§ä¹±åºå‘é€ï¼Œåˆ°å¯¹ç«¯åå†æ ¹æ®æ¯ä¸ªå¸§é¦–éƒ¨çš„æµæ ‡è¯†ç¬¦é‡æ–°ç»„è£…ã€‚é€šè¿‡è¯¥æŠ€æœ¯ï¼Œå¯ä»¥é¿å… HTTP æ—§ç‰ˆæœ¬çš„é˜Ÿå¤´é˜»å¡é—®é¢˜ï¼Œæå¤§æé«˜ä¼ è¾“æ€§èƒ½ã€‚</p><h4 id="header-å‹ç¼©"><a class="header-anchor" href="#header-å‹ç¼©">#</a>Header å‹ç¼©</h4><p>åœ¨ HTTP1.0 ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨æ–‡æœ¬çš„å½¢å¼ä¼ è¾“ headerï¼Œåœ¨ header ä¸­æºå¸¦ cookie çš„è¯ï¼Œæ¯æ¬¡éƒ½éœ€è¦é‡å¤ä¼ è¾“å‡ ç™¾åˆ°å‡ åƒçš„å­—èŠ‚ï¼Œè¿™ç€å®æ˜¯ä¸€ç¬”ä¸å°çš„å¼€é”€ã€‚<br>åœ¨ HTTP2.0 ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† HPACKï¼ˆHTTP2 å¤´éƒ¨å‹ç¼©ç®—æ³•ï¼‰å‹ç¼©æ ¼å¼å¯¹ä¼ è¾“çš„ header è¿›è¡Œç¼–ç ï¼Œå‡å°‘äº† header çš„å¤§å°ã€‚å¹¶åœ¨ä¸¤ç«¯ç»´æŠ¤äº†ç´¢å¼•è¡¨ï¼Œç”¨äºè®°å½•å‡ºç°è¿‡çš„ headerï¼Œåé¢åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å°±å¯ä»¥ä¼ è¾“å·²ç»è®°å½•è¿‡çš„ header çš„é”®åï¼Œå¯¹ç«¯æ”¶åˆ°æ•°æ®åå°±å¯ä»¥é€šè¿‡é”®åæ‰¾åˆ°å¯¹åº”çš„å€¼ã€‚</p><h4 id="æœåŠ¡å™¨-push"><a class="header-anchor" href="#æœåŠ¡å™¨-push">#</a>æœåŠ¡å™¨ Push</h4><p>åœ¨ HTTP2.0 ä¸­ï¼ŒæœåŠ¡ç«¯å¯ä»¥åœ¨å®¢æˆ·ç«¯æŸä¸ªè¯·æ±‚åï¼Œä¸»åŠ¨æ¨é€å…¶ä»–èµ„æºã€‚<br>å¯ä»¥æƒ³è±¡ä¸€ä¸‹ï¼ŒæŸäº›èµ„æºå®¢æˆ·ç«¯æ˜¯ä¸€å®šä¼šè¯·æ±‚çš„ï¼Œè¿™æ—¶å°±å¯ä»¥é‡‡å–æœåŠ¡ç«¯ push çš„æŠ€æœ¯ï¼Œæå‰ç»™å®¢æˆ·ç«¯æ¨é€å¿…è¦çš„èµ„æºï¼Œå°±å¯ä»¥ç›¸å¯¹å‡å°‘ä¸€ç‚¹å»¶è¿Ÿæ—¶é—´ã€‚åœ¨æµè§ˆå™¨å…¼å®¹çš„æƒ…å†µä¸‹ä¹Ÿå¯ä»¥ä½¿ç”¨ prefetchã€‚</p><h4 id="æ›´å®‰å…¨"><a class="header-anchor" href="#æ›´å®‰å…¨">#</a>æ›´å®‰å…¨</h4><p>HTTP2.0 ä½¿ç”¨äº† tls çš„æ‹“å±• ALPN åšä¸ºåè®®å‡çº§ï¼Œé™¤æ­¤ä¹‹å¤–ï¼ŒHTTP2.0 å¯¹ tls çš„å®‰å…¨æ€§åšäº†è¿‘ä¸€æ­¥åŠ å¼ºï¼Œé€šè¿‡é»‘åå•æœºåˆ¶ç¦ç”¨äº†å‡ ç™¾ç§ä¸å†å®‰å…¨çš„åŠ å¯†ç®—æ³•ã€‚</p><h2 id="æ•°æ®åº“"><a class="header-anchor" href="#æ•°æ®åº“">#</a>æ•°æ®åº“</h2><h3 id="ä¸‰ä¸ªé—®é¢˜"><a class="header-anchor" href="#ä¸‰ä¸ªé—®é¢˜">#</a>ä¸‰ä¸ªé—®é¢˜</h3><h4 id="è„è¯»ï¼ˆè¯»å–æœªæäº¤æ•°æ®ï¼‰"><a class="header-anchor" href="#è„è¯»ï¼ˆè¯»å–æœªæäº¤æ•°æ®ï¼‰">#</a>è„è¯»ï¼ˆè¯»å–æœªæäº¤æ•°æ®ï¼‰</h4><p>A äº‹åŠ¡è¯»å– B äº‹åŠ¡å°šæœªæäº¤çš„æ•°æ®ï¼Œæ­¤æ—¶å¦‚æœ B äº‹åŠ¡å‘ç”Ÿé”™è¯¯å¹¶æ‰§è¡Œå›æ»šæ“ä½œï¼Œé‚£ä¹ˆ A äº‹åŠ¡è¯»å–åˆ°çš„æ•°æ®å°±æ˜¯è„æ•°æ®ã€‚å°±å¥½åƒåŸæœ¬çš„æ•°æ®æ¯”è¾ƒå¹²å‡€ã€çº¯ç²¹ï¼Œæ­¤æ—¶ç”±äº B äº‹åŠ¡æ›´æ”¹äº†å®ƒï¼Œè¿™ä¸ªæ•°æ®å˜å¾—ä¸å†çº¯ç²¹ã€‚è¿™ä¸ªæ—¶å€™ A äº‹åŠ¡ç«‹å³è¯»å–äº†è¿™ä¸ªè„æ•°æ®ï¼Œä½†äº‹åŠ¡ B è‰¯å¿ƒå‘ç°ï¼Œåˆç”¨å›æ»šæŠŠæ•°æ®æ¢å¤æˆåŸæ¥å¹²å‡€ã€çº¯ç²¹çš„æ ·å­ï¼Œè€Œäº‹åŠ¡ A å´ä»€ä¹ˆéƒ½ä¸çŸ¥é“ï¼Œæœ€ç»ˆç»“æœå°±æ˜¯äº‹åŠ¡ A è¯»å–äº†æ­¤æ¬¡çš„è„æ•°æ®ï¼Œç§°ä¸ºè„è¯»ã€‚</p><table><thead><tr><th style="text-align:center">æ—¶é—´é¡ºåº</th><th style="text-align:center">è½¬è´¦äº‹åŠ¡</th><th style="text-align:center">å–æ¬¾äº‹åŠ¡</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center"></td><td style="text-align:center">å¼€å§‹äº‹åŠ¡</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">å¼€å§‹äº‹åŠ¡</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">3</td><td style="text-align:center"></td><td style="text-align:center">æŸ¥è¯¢è´¦æˆ·ä½™é¢ä¸º 2000 å…ƒ</td></tr><tr><td style="text-align:center">4</td><td style="text-align:center"></td><td style="text-align:center">å–æ¬¾ 1000 å…ƒï¼Œä½™é¢è¢«æ›´æ”¹ä¸º 1000 å…ƒ</td></tr><tr><td style="text-align:center">5</td><td style="text-align:center">æŸ¥è¯¢è´¦æˆ·ä½™é¢ä¸º 1000 å…ƒï¼ˆäº§ç”Ÿè„è¯»ï¼‰</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">6</td><td style="text-align:center"></td><td style="text-align:center">å–æ¬¾æ“ä½œå‘ç”ŸæœªçŸ¥é”™è¯¯ï¼Œäº‹åŠ¡å›æ»šï¼Œä½™é¢å˜æ›´ä¸º 2000 å…ƒ</td></tr><tr><td style="text-align:center">7</td><td style="text-align:center">è½¬å…¥ 2000 å…ƒï¼Œä½™é¢è¢«æ›´æ”¹ä¸º 3000 å…ƒï¼ˆè„è¯»çš„ 1000+2000ï¼‰</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">8</td><td style="text-align:center">æäº¤äº‹åŠ¡</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">å¤‡æ³¨</td><td style="text-align:center">æŒ‰ç…§æ­£ç¡®é€»è¾‘ï¼Œæ­¤æ—¶è´¦æˆ·ä½™é¢åº”è¯¥ä¸º 4000 å…ƒ</td><td style="text-align:center"></td></tr></tbody></table><h4 id="ä¸å¯é‡å¤è¯»ï¼ˆå‰åå¤šæ¬¡è¯»å–ï¼Œæ•°æ®å†…å®¹ä¸ä¸€è‡´ï¼‰"><a class="header-anchor" href="#ä¸å¯é‡å¤è¯»ï¼ˆå‰åå¤šæ¬¡è¯»å–ï¼Œæ•°æ®å†…å®¹ä¸ä¸€è‡´ï¼‰">#</a>ä¸å¯é‡å¤è¯»ï¼ˆå‰åå¤šæ¬¡è¯»å–ï¼Œæ•°æ®å†…å®¹ä¸ä¸€è‡´ï¼‰</h4><p>äº‹åŠ¡ A åœ¨æ‰§è¡Œè¯»å–æ“ä½œï¼Œç”±æ•´ä¸ªäº‹åŠ¡ A æ¯”è¾ƒå¤§ï¼Œå‰åè¯»å–åŒä¸€æ¡æ•°æ®éœ€è¦ç»å†å¾ˆé•¿çš„æ—¶é—´ ã€‚è€Œåœ¨äº‹åŠ¡ A ç¬¬ä¸€æ¬¡è¯»å–æ•°æ®ï¼Œæ¯”å¦‚æ­¤æ—¶è¯»å–äº†å°æ˜çš„å¹´é¾„ä¸º 20 å²ï¼Œäº‹åŠ¡ B æ‰§è¡Œæ›´æ”¹æ“ä½œï¼Œå°†å°æ˜çš„å¹´é¾„æ›´æ”¹ä¸º 30 å²ï¼Œæ­¤æ—¶äº‹åŠ¡ A ç¬¬äºŒæ¬¡è¯»å–åˆ°å°æ˜çš„å¹´é¾„æ—¶ï¼Œå‘ç°å…¶å¹´é¾„æ˜¯ 30 å²ï¼Œå’Œä¹‹å‰çš„æ•°æ®ä¸ä¸€æ ·äº†ï¼Œä¹Ÿå°±æ˜¯æ•°æ®ä¸é‡å¤äº†ï¼Œç³»ç»Ÿä¸å¯ä»¥è¯»å–åˆ°é‡å¤çš„æ•°æ®ï¼Œæˆä¸ºä¸å¯é‡å¤è¯»ã€‚</p><table><thead><tr><th style="text-align:center">æ—¶é—´é¡ºåº</th><th style="text-align:center">äº‹åŠ¡ A</th><th style="text-align:center">äº‹åŠ¡ B</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">å¼€å§‹äº‹åŠ¡</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">ç¬¬ä¸€æ¬¡æŸ¥è¯¢ï¼Œå°æ˜çš„å¹´é¾„ä¸º 20 å²</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">3</td><td style="text-align:center"></td><td style="text-align:center">å¼€å§‹äº‹åŠ¡</td></tr><tr><td style="text-align:center">4</td><td style="text-align:center">å…¶ä»–æ“ä½œ</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">5</td><td style="text-align:center"></td><td style="text-align:center">æ›´æ”¹å°æ˜çš„å¹´é¾„ä¸º 30 å²</td></tr><tr><td style="text-align:center">6</td><td style="text-align:center"></td><td style="text-align:center">æäº¤äº‹åŠ¡</td></tr><tr><td style="text-align:center">7</td><td style="text-align:center">ç¬¬äºŒæ¬¡æŸ¥è¯¢ï¼Œå°æ˜çš„å¹´é¾„ä¸º 30 å²</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">å¤‡æ³¨</td><td style="text-align:center">æŒ‰ç…§æ­£ç¡®é€»è¾‘ï¼Œäº‹åŠ¡ A å‰åä¸¤æ¬¡è¯»å–åˆ°çš„æ•°æ®åº”è¯¥ä¸€è‡´</td><td style="text-align:center"></td></tr></tbody></table><h4 id="å¹»è¯»ï¼ˆå‰åå¤šæ¬¡è¯»å–ï¼Œæ•°æ®æ€»é‡ä¸ä¸€è‡´ï¼‰"><a class="header-anchor" href="#å¹»è¯»ï¼ˆå‰åå¤šæ¬¡è¯»å–ï¼Œæ•°æ®æ€»é‡ä¸ä¸€è‡´ï¼‰">#</a>å¹»è¯»ï¼ˆå‰åå¤šæ¬¡è¯»å–ï¼Œæ•°æ®æ€»é‡ä¸ä¸€è‡´ï¼‰</h4><p>äº‹åŠ¡ A åœ¨æ‰§è¡Œè¯»å–æ“ä½œï¼Œéœ€è¦ä¸¤æ¬¡ç»Ÿè®¡æ•°æ®çš„æ€»é‡ï¼Œå‰ä¸€æ¬¡æŸ¥è¯¢æ•°æ®æ€»é‡åï¼Œæ­¤æ—¶äº‹åŠ¡ B æ‰§è¡Œäº†æ–°å¢æ•°æ®çš„æ“ä½œå¹¶æäº¤åï¼Œè¿™ä¸ªæ—¶å€™äº‹åŠ¡ A è¯»å–çš„æ•°æ®æ€»é‡å’Œä¹‹å‰ç»Ÿè®¡çš„ä¸ä¸€æ ·ï¼Œå°±åƒäº§ç”Ÿäº†å¹»è§‰ä¸€æ ·ï¼Œå¹³ç™½æ— æ•…çš„å¤šäº†å‡ æ¡æ•°æ®ï¼Œæˆä¸ºå¹»è¯»ã€‚</p><table><thead><tr><th style="text-align:center">æ—¶é—´é¡ºåº</th><th style="text-align:center">äº‹åŠ¡ A</th><th style="text-align:center">äº‹åŠ¡ B</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">å¼€å§‹äº‹åŠ¡</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">ç¬¬ä¸€æ¬¡æŸ¥è¯¢ï¼Œæ•°æ®æ€»é‡ä¸º 100 æ¡</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">3</td><td style="text-align:center"></td><td style="text-align:center">å¼€å§‹äº‹åŠ¡</td></tr><tr><td style="text-align:center">4</td><td style="text-align:center">å…¶ä»–æ“ä½œ</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">5</td><td style="text-align:center"></td><td style="text-align:center">æ–°å¢ 100 æ¡æ•°æ®</td></tr><tr><td style="text-align:center">6</td><td style="text-align:center"></td><td style="text-align:center">æäº¤äº‹åŠ¡</td></tr><tr><td style="text-align:center">7</td><td style="text-align:center">ç¬¬äºŒæ¬¡æŸ¥è¯¢ï¼Œæ•°æ®æ€»é‡ä¸º 200 æ¡</td><td style="text-align:center"></td></tr><tr><td style="text-align:center">å¤‡æ³¨</td><td style="text-align:center">æŒ‰ç…§æ­£ç¡®é€»è¾‘ï¼Œäº‹åŠ¡ A å‰åä¸¤æ¬¡è¯»å–åˆ°çš„æ•°æ®æ€»é‡åº”è¯¥ä¸€è‡´</td><td style="text-align:center"></td></tr></tbody></table><h3 id="éš”ç¦»çº§åˆ«"><a class="header-anchor" href="#éš”ç¦»çº§åˆ«">#</a>éš”ç¦»çº§åˆ«</h3><h4 id="è¯»æœªæäº¤ï¼ˆread-uncommittedï¼‰"><a class="header-anchor" href="#è¯»æœªæäº¤ï¼ˆread-uncommittedï¼‰">#</a>è¯»æœªæäº¤ï¼ˆRead uncommittedï¼‰</h4><p>åœ¨è¿™ç§éš”ç¦»çº§åˆ«ä¸‹ï¼Œæ‰€æœ‰äº‹åŠ¡èƒ½å¤Ÿè¯»å–å…¶ä»–äº‹åŠ¡æœªæäº¤çš„æ•°æ®ã€‚è¯»å–å…¶ä»–äº‹åŠ¡æœªæäº¤çš„æ•°æ®ï¼Œä¼šé€ æˆè„è¯»ã€‚å› æ­¤åœ¨è¯¥ç§éš”ç¦»çº§åˆ«ä¸‹ï¼Œä¸èƒ½è§£å†³è„è¯»ã€ä¸å¯é‡å¤è¯»å’Œå¹»è¯»ã€‚</p><h4 id="è¯»å·²æäº¤ï¼ˆread-committedï¼‰"><a class="header-anchor" href="#è¯»å·²æäº¤ï¼ˆread-committedï¼‰">#</a>è¯»å·²æäº¤ï¼ˆRead committedï¼‰</h4><p>åœ¨è¿™ç§éš”ç¦»çº§åˆ«ä¸‹ï¼Œæ‰€æœ‰äº‹åŠ¡åªèƒ½è¯»å–å…¶ä»–äº‹åŠ¡å·²ç»æäº¤çš„å†…å®¹ã€‚èƒ½å¤Ÿå½»åº•è§£å†³è„è¯»çš„ç°è±¡ã€‚ä½†åœ¨è¿™ç§éš”ç¦»çº§åˆ«ä¸‹ï¼Œä¼šå‡ºç°ä¸€ä¸ªäº‹åŠ¡çš„å‰åå¤šæ¬¡çš„æŸ¥è¯¢ä¸­å´è¿”å›äº†ä¸åŒå†…å®¹çš„æ•°æ®çš„ç°è±¡ï¼Œä¹Ÿå°±æ˜¯å‡ºç°äº†ä¸å¯é‡å¤è¯»ã€‚</p><p>è¿™æ˜¯å¤§å¤šæ•°æ•°æ®åº“ç³»ç»Ÿé»˜è®¤çš„éš”ç¦»çº§åˆ«ï¼Œä¾‹å¦‚ Oracle å’Œ SQL Serverï¼Œä½† mysql ä¸æ˜¯ã€‚</p><h4 id="å¯é‡å¤è¯»ï¼ˆrepeatable-readï¼‰"><a class="header-anchor" href="#å¯é‡å¤è¯»ï¼ˆrepeatable-readï¼‰">#</a>å¯é‡å¤è¯»ï¼ˆRepeatable readï¼‰</h4><p>åœ¨è¿™ç§éš”ç¦»çº§åˆ«ä¸‹ï¼Œæ‰€æœ‰äº‹åŠ¡å‰åå¤šæ¬¡çš„è¯»å–åˆ°çš„æ•°æ®å†…å®¹æ˜¯ä¸å˜çš„ã€‚ä¹Ÿå°±æ˜¯æŸä¸ªäº‹åŠ¡åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œä¸å…è®¸å…¶ä»–äº‹åŠ¡è¿›è¡Œ update æ“ä½œï¼Œä½†å…è®¸å…¶ä»–äº‹åŠ¡è¿›è¡Œ add æ“ä½œï¼Œé€ æˆæŸä¸ªäº‹åŠ¡å‰åå¤šæ¬¡è¯»å–åˆ°çš„æ•°æ®æ€»é‡ä¸ä¸€è‡´çš„ç°è±¡ï¼Œä»è€Œäº§ç”Ÿå¹»è¯»ã€‚</p><p>mysql çš„é»˜è®¤äº‹åŠ¡éš”ç¦»çº§åˆ«ã€‚</p><h4 id="å¯ä¸²è¡ŒåŒ–ï¼ˆserializableï¼‰"><a class="header-anchor" href="#å¯ä¸²è¡ŒåŒ–ï¼ˆserializableï¼‰">#</a>å¯ä¸²è¡ŒåŒ–ï¼ˆSerializableï¼‰</h4><p>åœ¨è¿™ç§éš”ç¦»çº§åˆ«ä¸‹ï¼Œæ‰€æœ‰çš„äº‹åŠ¡é¡ºåºæ‰§è¡Œï¼Œæ‰€ä»¥ä»–ä»¬ä¹‹é—´ä¸å­˜åœ¨å†²çªï¼Œä»è€Œèƒ½æœ‰æ•ˆåœ°è§£å†³è„è¯»ã€ä¸å¯é‡å¤è¯»å’Œå¹»è¯»çš„ç°è±¡ã€‚ä½†æ˜¯å®‰å…¨å’Œæ•ˆç‡ä¸èƒ½å…¼å¾—ï¼Œè¿™æ ·äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œä¼šå¯¼è‡´å¤§é‡çš„æ“ä½œè¶…æ—¶å’Œé”ç«äº‰ï¼Œä»è€Œå¤§å¤§é™ä½æ•°æ®åº“çš„æ€§èƒ½ï¼Œä¸€èˆ¬ä¸ä½¿ç”¨è¿™æ ·äº‹åŠ¡éš”ç¦»çº§åˆ«ã€‚</p><h4 id="æ€»ç»“"><a class="header-anchor" href="#æ€»ç»“">#</a>æ€»ç»“</h4><table><thead><tr><th style="text-align:center">éš”ç¦»çº§åˆ«</th><th style="text-align:center">è„è¯»</th><th style="text-align:center">ä¸å¯é‡å¤è¯»</th><th style="text-align:center">å¹»è¯»</th></tr></thead><tbody><tr><td style="text-align:center">è¯»æœªæäº¤ï¼ˆRead uncommittedï¼‰</td><td style="text-align:center">Ã—(æœªè§£å†³)</td><td style="text-align:center">Ã—</td><td style="text-align:center">Ã—</td></tr><tr><td style="text-align:center">è¯»å·²æäº¤ï¼ˆRead committedï¼‰</td><td style="text-align:center">âˆš(è§£å†³)</td><td style="text-align:center">Ã—</td><td style="text-align:center">Ã—</td></tr><tr><td style="text-align:center">å¯é‡å¤è¯»ï¼ˆRepeatable readï¼‰</td><td style="text-align:center">âˆš</td><td style="text-align:center">âˆš</td><td style="text-align:center">Ã—</td></tr><tr><td style="text-align:center">å¯ä¸²è¡ŒåŒ–ï¼ˆSerializableï¼‰</td><td style="text-align:center">âˆš</td><td style="text-align:center">âˆš</td><td style="text-align:center">âˆš</td></tr></tbody></table><h3 id="äº‹åŠ¡"><a class="header-anchor" href="#äº‹åŠ¡">#</a>äº‹åŠ¡</h3><p>æ•°æ®åº“äº‹åŠ¡(Database Transaction) ï¼Œæ˜¯æŒ‡ä½œä¸ºå•ä¸ªé€»è¾‘å·¥ä½œå•å…ƒæ‰§è¡Œçš„ä¸€ç³»åˆ—æ“ä½œï¼ˆå¯¹æ•°æ®åº“çš„ç›¸å…³å¢åˆ æ”¹æŸ¥çš„æ“ä½œï¼‰ï¼Œè¦ä¹ˆå®Œå…¨åœ°æ‰§è¡Œï¼Œè¦ä¹ˆå®Œå…¨åœ°ä¸æ‰§è¡Œã€‚</p><h4 id="ç‰¹æ€§ï¼ˆacidï¼‰"><a class="header-anchor" href="#ç‰¹æ€§ï¼ˆacidï¼‰">#</a>ç‰¹æ€§ï¼ˆACIDï¼‰</h4><ol><li>åŸå­æ€§ï¼ˆAtomicityï¼‰ï¼šäº‹åŠ¡ä½œä¸ºä¸€ä¸ªæ•´ä½“è¢«æ‰§è¡Œï¼ŒåŒ…å«åœ¨å…¶ä¸­çš„å¯¹æ•°æ®åº“çš„æ“ä½œè¦ä¹ˆå…¨éƒ¨è¢«æ‰§è¡Œï¼Œè¦ä¹ˆéƒ½ä¸æ‰§è¡Œã€‚</li><li>ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ï¼šäº‹åŠ¡åº”ç¡®ä¿æ•°æ®åº“çš„çŠ¶æ€ä»ä¸€ä¸ªä¸€è‡´çŠ¶æ€è½¬å˜ä¸ºå¦ä¸€ä¸ªä¸€è‡´çŠ¶æ€ã€‚ä¸€è‡´çŠ¶æ€çš„å«ä¹‰æ˜¯æ•°æ®åº“ä¸­çš„æ•°æ®åº”æ»¡è¶³å®Œæ•´æ€§çº¦æŸã€‚</li><li>éš”ç¦»æ€§ï¼ˆIsolationï¼‰ï¼šå¤šä¸ªäº‹åŠ¡å¹¶å‘æ‰§è¡Œæ—¶ï¼Œä¸€ä¸ªäº‹åŠ¡çš„æ‰§è¡Œä¸åº”å½±å“å…¶ä»–äº‹åŠ¡çš„æ‰§è¡Œã€‚</li><li>æŒä¹…æ€§ï¼ˆDurabilityï¼‰ï¼šä¸€ä¸ªäº‹åŠ¡ä¸€æ—¦æäº¤ï¼Œä»–å¯¹æ•°æ®åº“çš„ä¿®æ”¹åº”è¯¥æ°¸ä¹…ä¿å­˜åœ¨æ•°æ®åº“ä¸­ã€‚</li></ol><p>ç”¨ä¸€ä¸ªå¸¸ç”¨çš„â€œA è´¦æˆ·å‘ B è´¦å·æ±‡é’±â€çš„ä¾‹å­æ¥è¯´æ˜å¦‚ä½•é€šè¿‡æ•°æ®åº“äº‹åŠ¡ä¿è¯æ•°æ®çš„å‡†ç¡®æ€§å’Œå®Œæ•´æ€§ã€‚ç†Ÿæ‚‰å…³ç³»å‹æ•°æ®åº“äº‹åŠ¡çš„éƒ½çŸ¥é“ä»å¸å· A åˆ°å¸å· B éœ€è¦ 6 ä¸ªæ“ä½œï¼š</p><p>1ã€ä» A è´¦å·ä¸­æŠŠä½™é¢è¯»å‡ºæ¥ï¼ˆ500ï¼‰ã€‚<br>2ã€å¯¹ A è´¦å·åšå‡æ³•æ“ä½œï¼ˆ500-100ï¼‰ã€‚<br>3ã€æŠŠç»“æœå†™å› A è´¦å·ä¸­ï¼ˆ400ï¼‰ã€‚<br>4ã€ä» B è´¦å·ä¸­æŠŠä½™é¢è¯»å‡ºæ¥ï¼ˆ500ï¼‰ã€‚<br>5ã€å¯¹ B è´¦å·åšåŠ æ³•æ“ä½œï¼ˆ500+100ï¼‰ã€‚<br>6ã€æŠŠç»“æœå†™å› B è´¦å·ä¸­ï¼ˆ600ï¼‰ã€‚</p><p>åŸå­æ€§ï¼š<br>ä¿è¯ 1-6 æ‰€æœ‰è¿‡ç¨‹è¦ä¹ˆéƒ½æ‰§è¡Œï¼Œè¦ä¹ˆéƒ½ä¸æ‰§è¡Œã€‚ä¸€æ—¦åœ¨æ‰§è¡ŒæŸä¸€æ­¥éª¤çš„è¿‡ç¨‹ä¸­å‘ç”Ÿé—®é¢˜ï¼Œå°±éœ€è¦æ‰§è¡Œå›æ»šæ“ä½œã€‚ å‡å¦‚æ‰§è¡Œåˆ°ç¬¬äº”æ­¥çš„æ—¶å€™ï¼ŒB è´¦æˆ·çªç„¶ä¸å¯ç”¨ï¼ˆæ¯”å¦‚è¢«æ³¨é”€ï¼‰ï¼Œé‚£ä¹ˆä¹‹å‰çš„æ‰€æœ‰æ“ä½œéƒ½åº”è¯¥å›æ»šåˆ°æ‰§è¡Œäº‹åŠ¡ä¹‹å‰çš„çŠ¶æ€ã€‚</p><p>ä¸€è‡´æ€§<br>åœ¨è½¬è´¦ä¹‹å‰ï¼ŒA å’Œ B çš„è´¦æˆ·ä¸­å…±æœ‰ 500+500=1000 å…ƒé’±ã€‚åœ¨è½¬è´¦ä¹‹åï¼ŒA å’Œ B çš„è´¦æˆ·ä¸­å…±æœ‰ 400+600=1000 å…ƒã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ•°æ®çš„çŠ¶æ€åœ¨æ‰§è¡Œè¯¥äº‹åŠ¡æ“ä½œä¹‹åä»ä¸€ä¸ªçŠ¶æ€æ”¹å˜åˆ°äº†å¦å¤–ä¸€ä¸ªçŠ¶æ€ã€‚åŒæ—¶ä¸€è‡´æ€§è¿˜èƒ½ä¿è¯è´¦æˆ·ä½™é¢ä¸ä¼šå˜æˆè´Ÿæ•°ç­‰ã€‚</p><p>éš”ç¦»æ€§<br>åœ¨ A å‘ B è½¬è´¦çš„æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œåªè¦äº‹åŠ¡è¿˜æ²¡æœ‰æäº¤ï¼ˆcommitï¼‰ï¼ŒæŸ¥è¯¢ A è´¦æˆ·å’Œ B è´¦æˆ·çš„æ—¶å€™ï¼Œä¸¤ä¸ªè´¦æˆ·é‡Œé¢çš„é’±çš„æ•°é‡éƒ½ä¸ä¼šæœ‰å˜åŒ–ã€‚<br>å¦‚æœåœ¨ A ç»™ B è½¬è´¦çš„åŒæ—¶ï¼Œæœ‰å¦å¤–ä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œäº† C ç»™ B è½¬è´¦çš„æ“ä½œï¼Œé‚£ä¹ˆå½“ä¸¤ä¸ªäº‹åŠ¡éƒ½ç»“æŸçš„æ—¶å€™ï¼ŒB è´¦æˆ·é‡Œé¢çš„é’±åº”è¯¥æ˜¯ A è½¬ç»™ B çš„é’±åŠ ä¸Š C è½¬ç»™ B çš„é’±å†åŠ ä¸Šè‡ªå·±åŸæœ‰çš„é’±ã€‚</p><p>æŒä¹…æ€§<br>ä¸€æ—¦è½¬è´¦æˆåŠŸï¼ˆäº‹åŠ¡æäº¤ï¼‰ï¼Œä¸¤ä¸ªè´¦æˆ·çš„é‡Œé¢çš„é’±å°±ä¼šçœŸçš„å‘ç”Ÿå˜åŒ–ï¼ˆä¼šæŠŠæ•°æ®å†™å…¥æ•°æ®åº“åšæŒä¹…åŒ–ä¿å­˜ï¼‰ï¼</p><p>åŸå­æ€§ä¸éš”ç¦»è¡Œ<br>ä¸€è‡´æ€§ä¸åŸå­æ€§æ˜¯å¯†åˆ‡ç›¸å…³çš„,åŸå­æ€§çš„ç ´åå¯èƒ½å¯¼è‡´æ•°æ®åº“çš„ä¸ä¸€è‡´ï¼Œæ•°æ®çš„ä¸€è‡´æ€§é—®é¢˜å¹¶ä¸éƒ½å’ŒåŸå­æ€§æœ‰å…³ã€‚<br>æ¯”å¦‚åˆšåˆšçš„ä¾‹å­ï¼Œåœ¨ç¬¬äº”æ­¥çš„æ—¶å€™ï¼Œå¯¹ B è´¦æˆ·åšåŠ æ³•æ—¶åªåŠ äº† 50 å…ƒã€‚é‚£ä¹ˆè¯¥è¿‡ç¨‹å¯ä»¥ç¬¦åˆåŸå­æ€§ï¼Œä½†æ˜¯æ•°æ®çš„ä¸€è‡´æ€§å°±å‡ºç°äº†é—®é¢˜ã€‚</p><p>å› æ­¤ï¼Œäº‹åŠ¡çš„åŸå­æ€§ä¸ä¸€è‡´æ€§ç¼ºä¸€ä¸å¯ã€‚</p><h3 id="ç´¢å¼•"><a class="header-anchor" href="#ç´¢å¼•">#</a>ç´¢å¼•</h3><p>ä¼˜ç‚¹ï¼š</p><p>1.å¤§å¤§åŠ å¿«æ•°æ®çš„æ£€ç´¢é€Ÿåº¦</p><p>2.åˆ›å»ºå”¯ä¸€æ€§ç´¢å¼•ï¼Œä¿è¯æ•°æ®åº“è¡¨ä¸­æ¯ä¸€è¡Œæ•°æ®çš„å”¯ä¸€æ€§</p><p>3.åŠ é€Ÿè¡¨å’Œè¡¨ä¹‹é—´çš„è¿æ¥</p><p>4.åœ¨ä½¿ç”¨åˆ†ç»„å’Œæ’åºå­å¥è¿›è¡Œæ•°æ®æ£€ç´¢æ—¶ï¼Œå¯ä»¥æ˜¾è‘—å‡å°‘æŸ¥è¯¢ä¸­åˆ†ç»„å’Œæ’åºçš„æ—¶é—´</p><p>ç¼ºç‚¹</p><p>1.ç´¢å¼•éœ€è¦å ç”¨æ•°æ®è¡¨ä»¥å¤–çš„ç‰©ç†å­˜å‚¨ç©ºé—´</p><p>2.åˆ›å»ºç´¢å¼•å’Œç»´æŠ¤ç´¢å¼•è¦èŠ±è´¹ä¸€å®šçš„æ—¶é—´</p><p>3.å½“å¯¹è¡¨è¿›è¡Œæ›´æ–°æ“ä½œæ—¶ï¼Œç´¢å¼•éœ€è¦è¢«é‡å»ºï¼Œè¿™æ ·é™ä½äº†æ•°æ®çš„ç»´æŠ¤é€Ÿåº¦</p><h4 id="åˆ†ç±»"><a class="header-anchor" href="#åˆ†ç±»">#</a>åˆ†ç±»</h4><p>ä¸»é”®ç´¢å¼•ï¼ˆPRIMAY KEYï¼‰</p><p>ä¸»é”®ï¼š</p><p>æŸä¸€ä¸ªå±æ€§ç»„èƒ½å”¯ä¸€æ ‡è¯†ä¸€æ¡è®°å½•</p><p>å¦‚ï¼šå­¦ç”Ÿè¡¨ï¼ˆå­¦å·ï¼Œå§“åï¼Œç­çº§ï¼Œæ€§åˆ«ç­‰ç­‰ï¼‰ï¼Œå­¦å·æ—¶å”¯ä¸€æ ‡è¯†çš„ï¼Œå¯ä»¥ä½œä¸ºä¸»é”®</p><p>ç‰¹ç‚¹ï¼š</p><p>æœ€å¸¸è§çš„ç´¢å¼•ç±»å‹</p><p>ç¡®ä¿æ•°æ®è®°å½•çš„å”¯ä¸€æ€§</p><p>ç¡®å®šç‰¹å®šæ•°æ®è®°å½•åœ¨æ•°æ®åº“ä¸­çš„ä½ç½®</p><p>å®ä¾‹ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`è¡¨å`</span>ï¼ˆã€</span><br><span class="line"></span><br><span class="line">ã€€ã€€<span class="string">`GradeID`</span> <span class="built_in">INT</span>(<span class="number">11</span>)  AUTO_INCREMENT PRIMARY <span class="keyword">KEY</span>,</span><br><span class="line"></span><br><span class="line">ã€€ã€€<span class="comment">#æˆ– PRIMARY KEY(`GradeID`)</span></span><br><span class="line"></span><br><span class="line">ï¼‰</span><br></pre></td></tr></table></figure><p>å”¯ä¸€ç´¢å¼•ï¼ˆUNIQUEï¼‰</p><p>ä½œç”¨ï¼š</p><p>é¿å…åŒä¸€ä¸ªè¡¨ä¸­æŸæ•°æ®åˆ—ä¸­çš„å€¼é‡å¤</p><p>ä¸ä¸»é”®ç´¢å¼•çš„åŒºåˆ«</p><p>ä¸»é”®ç´¢å¼•åªèƒ½æœ‰ä¸€ä¸ª</p><p>å”¯ä¸€ç´¢å¼•å¯æœ‰å¤šä¸ª</p><p>å®ä¾‹ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`Grade`</span>ï¼ˆã€</span><br><span class="line"></span><br><span class="line">ã€€ã€€<span class="string">`GradeID`</span> <span class="built_in">INT</span>(<span class="number">11</span>)  AUTO_INCREMENT PRIMARY <span class="keyword">KEY</span>,</span><br><span class="line"></span><br><span class="line">ã€€ã€€<span class="string">`GradeName`</span> <span class="built_in">VARCHAR</span>(<span class="number">32</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">UNIQUE</span></span><br><span class="line"></span><br><span class="line">ã€€ã€€<span class="comment">#æˆ– UNIQUE KEY ` GradeID`(`GradeID`)</span></span><br></pre></td></tr></table></figure><p>å¸¸è§„ç´¢å¼•ï¼ˆINDEXï¼‰</p><p>ä½œç”¨ï¼š</p><p>å¿«é€Ÿå®šä½ç‰¹å®šæ•°æ®</p><p>æ³¨æ„ï¼š</p><p>index å’Œ key å…³é”®å­—éƒ½å¯ä»¥è®¾ç½®å¸¸è§„ç´¢å¼•</p><p>åº”åŠ åœ¨æŸ¥è¯¢æ¡ä»¶çš„å­—æ®µ</p><p>ä¸æ˜“æ·»åŠ å¤ªå¤šå¸¸è§„ç´¢å¼•ï¼Œå½±å“æ•°æ®çš„æ’å…¥ï¼Œåˆ é™¤å’Œä¿®æ”¹æ“ä½œ</p><p>å®ä¾‹ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##åˆ›å»ºè¡¨æ—¶æ·»åŠ </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`result`</span>&#123;</span><br><span class="line"></span><br><span class="line">ã€€ã€€//çœç•¥ä¸€äº›ä»£ç </span><br><span class="line"></span><br><span class="line">ã€€ã€€<span class="keyword">INDEX</span> / <span class="keyword">KEY</span> <span class="string">`ind`</span> (<span class="string">`studentNo`</span>,<span class="string">`subjectNo`</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">##åˆ›å»ºåè¿½åŠ </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">`result`</span> <span class="keyword">ADD</span>  <span class="keyword">INDEX</span> <span class="string">`ind`</span> (<span class="string">`studentNo`</span>,<span class="string">`subjectNo`</span>);</span><br></pre></td></tr></table></figure><p>å…¨æ–‡ç´¢å¼•ï¼ˆFULLTEXTï¼‰</p><p>ä½œç”¨ï¼š</p><p>å¿«é€Ÿå®šä½ç‰¹å®šæ•°æ®</p><p>æ³¨æ„ï¼š</p><p>åªèƒ½ç”¨äº MyISAM ç±»å‹çš„æ•°æ®è¡¨</p><p>åªèƒ½ç”¨äº CHAR ,VARCHAR,TEXT æ•°æ®åˆ—ç±»å‹</p><p>ä½¿ç”¨å¤§å‹æ•°æ®é›†</p><p>å®ä¾‹ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`student`</span>(</span><br><span class="line"></span><br><span class="line">ã€€ã€€<span class="comment">#çœç•¥ä¸€äº›sqlè¯­å¥</span></span><br><span class="line"></span><br><span class="line">ã€€ã€€ã€€ã€€FULLTEXT(<span class="string">`StudentName`</span>)</span><br><span class="line"></span><br><span class="line">)ENDINE=MYISAM;</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> employee <span class="keyword">ADD</span> FULLTEXT(<span class="string">`first_name`</span>)</span><br></pre></td></tr></table></figure><h3 id="è¦†ç›–ç´¢å¼•ä¸å›è¡¨"><a class="header-anchor" href="#è¦†ç›–ç´¢å¼•ä¸å›è¡¨">#</a>è¦†ç›–ç´¢å¼•ä¸å›è¡¨</h3><h4 id="èšç°‡ç´¢å¼•"><a class="header-anchor" href="#èšç°‡ç´¢å¼•">#</a>èšç°‡ç´¢å¼•</h4><ul><li>å¦‚æœè¡¨è®¾ç½®äº†ä¸»é”®ï¼Œåˆ™ä¸»é”®å°±æ˜¯èšç°‡ç´¢å¼•</li><li>å¦‚æœè¡¨æ²¡æœ‰ä¸»é”®ï¼Œåˆ™ä¼šé»˜è®¤ç¬¬ä¸€ä¸ª NOT NULLï¼Œä¸”å”¯ä¸€ï¼ˆUNIQUEï¼‰çš„åˆ—ä½œä¸ºèšç°‡ç´¢å¼•</li><li>ä»¥ä¸Šéƒ½æ²¡æœ‰ï¼Œåˆ™ä¼šé»˜è®¤åˆ›å»ºä¸€ä¸ªéšè—çš„ row_id ä½œä¸ºèšç°‡ç´¢å¼•</li></ul><p>InnoDB çš„èšç°‡ç´¢å¼•çš„å¶å­èŠ‚ç‚¹å­˜å‚¨çš„æ˜¯è¡Œè®°å½•ï¼ˆå…¶å®æ˜¯é¡µç»“æ„ï¼Œä¸€ä¸ªé¡µåŒ…å«å¤šè¡Œæ•°æ®ï¼‰ï¼ŒInnoDB å¿…é¡»è¦æœ‰è‡³å°‘ä¸€ä¸ªèšç°‡ç´¢å¼•ã€‚<br>ç”±æ­¤å¯è§ï¼Œä½¿ç”¨èšç°‡ç´¢å¼•æŸ¥è¯¢ä¼šå¾ˆå¿«ï¼Œå› ä¸ºå¯ä»¥ç›´æ¥å®šä½åˆ°è¡Œè®°å½•ã€‚</p><h4 id="æ™®é€šç´¢å¼•"><a class="header-anchor" href="#æ™®é€šç´¢å¼•">#</a>æ™®é€šç´¢å¼•</h4><p>æ™®é€šç´¢å¼•ä¹Ÿå«äºŒçº§ç´¢å¼•ï¼Œé™¤èšç°‡ç´¢å¼•å¤–çš„ç´¢å¼•ï¼Œå³éèšç°‡ç´¢å¼•ã€‚<br>InnoDB çš„æ™®é€šç´¢å¼•å¶å­èŠ‚ç‚¹å­˜å‚¨çš„æ˜¯ä¸»é”®ï¼ˆèšç°‡ç´¢å¼•ï¼‰çš„å€¼ï¼Œè€Œ MyISAM çš„æ™®é€šç´¢å¼•å­˜å‚¨çš„æ˜¯è®°å½•æŒ‡é’ˆã€‚</p><h4 id="å›è¡¨æŸ¥è¯¢"><a class="header-anchor" href="#å›è¡¨æŸ¥è¯¢">#</a>å›è¡¨æŸ¥è¯¢</h4><p>å…ˆé€šè¿‡æ™®é€šç´¢å¼•çš„å€¼å®šä½èšç°‡ç´¢å¼•å€¼ï¼Œå†é€šè¿‡èšç°‡ç´¢å¼•çš„å€¼å®šä½è¡Œè®°å½•æ•°æ®ï¼Œéœ€è¦æ‰«æä¸¤æ¬¡ç´¢å¼• B+æ ‘ï¼Œå®ƒçš„æ€§èƒ½è¾ƒæ‰«ä¸€éç´¢å¼•æ ‘æ›´ä½ã€‚</p><h4 id="ç´¢å¼•è¦†ç›–"><a class="header-anchor" href="#ç´¢å¼•è¦†ç›–">#</a>ç´¢å¼•è¦†ç›–</h4><p>åªéœ€è¦åœ¨ä¸€æ£µç´¢å¼•æ ‘ä¸Šå°±èƒ½è·å– SQL æ‰€éœ€çš„æ‰€æœ‰åˆ—æ•°æ®ï¼Œæ— éœ€å›è¡¨ï¼Œé€Ÿåº¦æ›´å¿«ã€‚<br>ä¾‹å¦‚ï¼šselect id,age from user where age = 10;</p><p>å¸¸è§çš„æ–¹æ³•æ˜¯ï¼šå°†è¢«æŸ¥è¯¢çš„å­—æ®µï¼Œå»ºç«‹åˆ°è”åˆç´¢å¼•é‡Œå»ã€‚</p><h2 id="b-æ ‘"><a class="header-anchor" href="#b-æ ‘">#</a>B+æ ‘</h2><p>B+ æ ‘æ˜¯ä¸€ç§æ ‘æ•°æ®ç»“æ„ï¼Œæ˜¯ä¸€ä¸ª n å‰æ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹é€šå¸¸æœ‰å¤šä¸ªå­©å­ï¼Œä¸€é¢— B+æ ‘åŒ…å«æ ¹èŠ‚ç‚¹ã€å†…éƒ¨èŠ‚ç‚¹å’Œå¶å­èŠ‚ç‚¹ã€‚B+ æ ‘é€šå¸¸ç”¨äºæ•°æ®åº“å’Œæ“ä½œç³»ç»Ÿçš„æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚ B+ æ ‘çš„ç‰¹ç‚¹æ˜¯èƒ½å¤Ÿä¿æŒæ•°æ®ç¨³å®šæœ‰åºï¼Œå…¶æ’å…¥ä¸ä¿®æ”¹æ‹¥æœ‰è¾ƒç¨³å®šçš„å¯¹æ•°æ—¶é—´å¤æ‚åº¦ã€‚ B+ æ ‘å…ƒç´ è‡ªåº•å‘ä¸Šæ’å…¥ã€‚</p><ol><li>æ ¹ç»“ç‚¹è‡³å°‘æœ‰ä¸¤ä¸ªå­å¥³ã€‚</li><li>æ¯ä¸ªä¸­é—´èŠ‚ç‚¹éƒ½è‡³å°‘åŒ…å« ceil(m / 2)ä¸ªå­©å­ï¼Œæœ€å¤šæœ‰ m ä¸ªå­©å­ã€‚</li><li>æ¯ä¸€ä¸ªå¶å­èŠ‚ç‚¹éƒ½åŒ…å« k-1 ä¸ªå…ƒç´ ï¼Œå…¶ä¸­ m/2 &lt;= k &lt;= mã€‚</li><li>æ‰€æœ‰çš„å¶å­ç»“ç‚¹éƒ½ä½äºåŒä¸€å±‚ã€‚</li><li>æ¯ä¸ªèŠ‚ç‚¹ä¸­çš„å…ƒç´ ä»å°åˆ°å¤§æ’åˆ—ï¼ŒèŠ‚ç‚¹å½“ä¸­ k-1 ä¸ªå…ƒç´ æ­£å¥½æ˜¯ k ä¸ªå­©å­åŒ…å«çš„å…ƒç´ çš„å€¼åŸŸåˆ†åˆ’ã€‚</li><li>æ¯ä¸ªå¶å­èŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªæ•°æ®ï¼Œå½¢æˆä¸€ä¸ªæœ‰åºé“¾è¡¨ã€‚</li><li>è€Œåªæœ‰å¶å­èŠ‚ç‚¹æ‰ä¼šæœ‰ dataï¼Œå…¶ä»–éƒ½æ˜¯ç´¢å¼•ã€‚</li></ol><h3 id="ä¸-b-æ ‘çš„åŒºåˆ«"><a class="header-anchor" href="#ä¸-b-æ ‘çš„åŒºåˆ«">#</a>ä¸ B æ ‘çš„åŒºåˆ«</h3><ol><li>æœ‰ k ä¸ªå­ç»“ç‚¹çš„ç»“ç‚¹å¿…ç„¶æœ‰ k ä¸ªå…³é”®ç ã€‚</li><li>éå¶ç»“ç‚¹ä»…å…·æœ‰ç´¢å¼•ä½œç”¨ï¼Œè·Ÿè®°å½•æœ‰å…³çš„ä¿¡æ¯å‡å­˜æ”¾åœ¨å¶ç»“ç‚¹ä¸­ã€‚</li><li>æ ‘çš„æ‰€æœ‰å¶ç»“ç‚¹æ„æˆä¸€ä¸ªæœ‰åºé“¾è¡¨ï¼Œå¯ä»¥æŒ‰ç…§å…³é”®ç æ’åºçš„æ¬¡åºéå†å…¨éƒ¨è®°å½•ã€‚</li></ol><h3 id="é¡µ"><a class="header-anchor" href="#é¡µ">#</a>é¡µ</h3><p>è¿™é‡Œæˆ‘ä»¬å°±éœ€è¦äº†è§£é¡µï¼ˆpageï¼‰çš„æ¦‚å¿µï¼Œåœ¨è®¡ç®—æœºé‡Œï¼Œæ— è®ºæ˜¯å†…å­˜è¿˜æ˜¯ç£ç›˜ï¼Œæ“ä½œç³»ç»Ÿéƒ½æ˜¯æŒ‰é¡µçš„å¤§å°è¿›è¡Œè¯»å–çš„ï¼ˆé¡µå¤§å°é€šå¸¸ä¸º 4 kbï¼‰ï¼Œç£ç›˜æ¯æ¬¡è¯»å–éƒ½ä¼šé¢„è¯»ï¼Œä¼šæå‰å°†è¿ç»­çš„æ•°æ®è¯»å…¥å†…å­˜ä¸­ï¼Œè¿™æ ·å°±é¿å…äº†å¤šæ¬¡ IOï¼Œè¿™å°±æ˜¯è®¡ç®—æœºä¸­æœ‰åçš„å±€éƒ¨æ€§åŸç†ï¼Œå³æˆ‘ç”¨åˆ°ä¸€å—æ•°æ®ï¼Œå¾ˆå¤§å¯èƒ½è¿™å—æ•°æ®é™„è¿‘çš„æ•°æ®ä¹Ÿä¼šè¢«ç”¨åˆ°ï¼Œå¹²è„†ä¸€èµ·åŠ è½½ï¼Œçœå¾—å¤šæ¬¡ IO æ‹–æ…¢é€Ÿåº¦ï¼Œ è¿™ä¸ªè¿ç»­æ•°æ®æœ‰å¤šå¤§å‘¢ï¼Œå¿…é¡»æ˜¯æ“ä½œç³»ç»Ÿé¡µå¤§å°çš„æ•´æ•°å€ï¼Œè¿™ä¸ªè¿ç»­æ•°æ®å°±æ˜¯ MySQL çš„é¡µï¼Œé»˜è®¤å€¼ä¸º 16 KBï¼Œä¹Ÿå°±æ˜¯è¯´å¯¹äº B+ æ ‘çš„èŠ‚ç‚¹ï¼Œæœ€å¥½è®¾ç½®æˆé¡µçš„å¤§å°ï¼ˆ16 KBï¼‰ï¼Œè¿™æ ·ä¸€ä¸ª B+ æ ‘ä¸Šçš„èŠ‚ç‚¹å°±åªä¼šæœ‰ä¸€æ¬¡ IO è¯»ã€‚</p><h3 id="ä¼˜ç‚¹"><a class="header-anchor" href="#ä¼˜ç‚¹">#</a>ä¼˜ç‚¹</h3><p>B+æ ‘ç›¸æ¯” B æ ‘çš„å­˜å‚¨æ•ˆç‡æ›´é«˜ã€‚<br>B+æ ‘çš„é«˜åº¦æ›´å°ï¼Œæ£€ç´¢æ•ˆç‡æ›´é«˜ã€‚<br>B+æ ‘æ”¯æŒèŒƒå›´æ£€ç´¢ï¼Œåœ¨å®é™…åº”ç”¨ä¸­æ›´ä¸ºå¹¿æ³›ã€‚<br>æ’å…¥å’Œåˆ é™¤æ›´ä¸ºæ–¹ä¾¿ï¼Œå…¶å®æµç¨‹å’Œ B æ ‘ç±»ä¼¼ï¼Œä½† B+æ ‘é‡Œé¢ï¼Œå…³é”®ç çš„ä¸ªæ•°å’Œå­èŠ‚ç‚¹çš„ä¸ªæ•°æ˜¯å¯¹ç­‰çš„ï¼Œæ‰€ä»¥ä»è®°å¿†è§’åº¦æ¥è¯´ï¼ŒB+æ ‘æ›´æ–¹ä¾¿è®°å¿†ä½¿ç”¨ï¼Œè€Œ B æ ‘åˆ™éœ€è¦æ—¶åˆ»æ³¨æ„èŠ‚ç‚¹æ•°å’Œå…³é”®ç çš„å¯¹åº”å…³ç³»ã€‚</p><h2 id="mysql"><a class="header-anchor" href="#mysql">#</a>Mysql</h2><h3 id="å¸¸ç”¨å¼•æ“"><a class="header-anchor" href="#å¸¸ç”¨å¼•æ“">#</a>å¸¸ç”¨å¼•æ“</h3><h4 id="åŒºåˆ«-2"><a class="header-anchor" href="#åŒºåˆ«-2">#</a>åŒºåˆ«</h4><ol><li>InnoDB æ”¯æŒäº‹åŠ¡ï¼ŒMyISAM ä¸æ”¯æŒäº‹åŠ¡ã€‚è¿™æ˜¯ MySQL å°†é»˜è®¤å­˜å‚¨å¼•æ“ä» MyISAM å˜æˆ InnoDB çš„é‡è¦åŸå› ä¹‹ä¸€ï¼›</li><li>InnoDB æ”¯æŒå¤–é”®ï¼Œè€Œ MyISAM ä¸æ”¯æŒã€‚å¯¹ä¸€ä¸ªåŒ…å«å¤–é”®çš„ InnoDB è¡¨è½¬ä¸º MYISAM ä¼šå¤±è´¥ï¼›</li><li>InnoDB æ˜¯èšé›†ç´¢å¼•ï¼ŒMyISAM æ˜¯éèšé›†ç´¢å¼•ã€‚èšç°‡ç´¢å¼•çš„æ–‡ä»¶å­˜æ”¾åœ¨ä¸»é”®ç´¢å¼•çš„å¶å­èŠ‚ç‚¹ä¸Šï¼Œå› æ­¤ InnoDB å¿…é¡»è¦æœ‰ä¸»é”®ï¼Œé€šè¿‡ä¸»é”®ç´¢å¼•æ•ˆç‡å¾ˆé«˜ã€‚ä½†æ˜¯è¾…åŠ©ç´¢å¼•éœ€è¦ä¸¤æ¬¡æŸ¥è¯¢ï¼Œå…ˆæŸ¥è¯¢åˆ°ä¸»é”®ï¼Œç„¶åå†é€šè¿‡ä¸»é”®æŸ¥è¯¢åˆ°æ•°æ®ã€‚å› æ­¤ï¼Œä¸»é”®ä¸åº”è¯¥è¿‡å¤§ï¼Œå› ä¸ºä¸»é”®å¤ªå¤§ï¼Œå…¶ä»–ç´¢å¼•ä¹Ÿéƒ½ä¼šå¾ˆå¤§ã€‚è€Œ MyISAM æ˜¯éèšé›†ç´¢å¼•ï¼Œæ•°æ®æ–‡ä»¶æ˜¯åˆ†ç¦»çš„ï¼Œç´¢å¼•ä¿å­˜çš„æ˜¯æ•°æ®æ–‡ä»¶çš„æŒ‡é’ˆã€‚ä¸»é”®ç´¢å¼•å’Œè¾…åŠ©ç´¢å¼•æ˜¯ç‹¬ç«‹çš„ã€‚</li><li>InnoDB ä¸ä¿å­˜è¡¨çš„å…·ä½“è¡Œæ•°ï¼Œæ‰§è¡Œ select count(*) from table æ—¶éœ€è¦å…¨è¡¨æ‰«æã€‚è€Œ MyISAM ç”¨ä¸€ä¸ªå˜é‡ä¿å­˜äº†æ•´ä¸ªè¡¨çš„è¡Œæ•°ï¼Œæ‰§è¡Œä¸Šè¿°è¯­å¥æ—¶åªéœ€è¦è¯»å‡ºè¯¥å˜é‡å³å¯ï¼Œé€Ÿåº¦å¾ˆå¿«ï¼›</li><li>InnoDB æœ€å°çš„é”ç²’åº¦æ˜¯è¡Œé”ï¼ŒMyISAM æœ€å°çš„é”ç²’åº¦æ˜¯è¡¨é”ã€‚ä¸€ä¸ªæ›´æ–°è¯­å¥ä¼šé”ä½æ•´å¼ è¡¨ï¼Œå¯¼è‡´å…¶ä»–æŸ¥è¯¢å’Œæ›´æ–°éƒ½ä¼šè¢«é˜»å¡ï¼Œå› æ­¤å¹¶å‘è®¿é—®å—é™ã€‚è¿™ä¹Ÿæ˜¯ MySQL å°†é»˜è®¤å­˜å‚¨å¼•æ“ä» MyISAM å˜æˆ InnoDB çš„é‡è¦åŸå› ä¹‹ä¸€ï¼›</li></ol><h4 id="å¦‚ä½•é€‰æ‹©"><a class="header-anchor" href="#å¦‚ä½•é€‰æ‹©">#</a>å¦‚ä½•é€‰æ‹©</h4><ol><li>æ˜¯å¦è¦æ”¯æŒäº‹åŠ¡ï¼Œå¦‚æœè¦è¯·é€‰æ‹© InnoDBï¼Œå¦‚æœä¸éœ€è¦å¯ä»¥è€ƒè™‘ MyISAMï¼›</li><li>å¦‚æœè¡¨ä¸­ç»å¤§å¤šæ•°éƒ½åªæ˜¯è¯»æŸ¥è¯¢ï¼Œå¯ä»¥è€ƒè™‘ MyISAMï¼Œå¦‚æœæ—¢æœ‰è¯»å†™ä¹ŸæŒºé¢‘ç¹ï¼Œè¯·ä½¿ç”¨ InnoDBã€‚</li><li>ç³»ç»Ÿå¥”æºƒåï¼ŒMyISAM æ¢å¤èµ·æ¥æ›´å›°éš¾ï¼Œèƒ½å¦æ¥å—ï¼Œä¸èƒ½æ¥å—å°±é€‰ InnoDBï¼›</li><li>MySQL5.5 ç‰ˆæœ¬å¼€å§‹ Innodb å·²ç»æˆä¸º Mysql çš„é»˜è®¤å¼•æ“(ä¹‹å‰æ˜¯ MyISAM)ï¼Œè¯´æ˜å…¶ä¼˜åŠ¿æ˜¯æœ‰ç›®å…±ç¹çš„ã€‚å¦‚æœä½ ä¸çŸ¥é“ç”¨ä»€ä¹ˆå­˜å‚¨å¼•æ“ï¼Œé‚£å°±ç”¨ InnoDBï¼Œè‡³å°‘ä¸ä¼šå·®ã€‚</li></ol><h3 id="binlog-å’Œ-redolog"><a class="header-anchor" href="#binlog-å’Œ-redolog">#</a>binlog å’Œ redolog</h3><ol><li>åŠŸèƒ½ä¸åŒï¼Œbinlog ä¸»è¦ç”¨äºå½’æ¡£ï¼Œè€Œ redolog ä¸»è¦ç”¨äºå´©æºƒæ¢å¤</li><li>å†…å®¹ä¸åŒï¼Œbinlog æ˜¯é€»è¾‘æ—¥å¿—ï¼Œè€Œ redolog æ˜¯ç‰©ç†æ—¥å¿—</li><li>å†™å…¥æ—¶æœºä¸åŒï¼Œbinlog æ˜¯ server å±‚è®°å½•çš„ï¼Œæ‰€æœ‰å­˜å‚¨å¼•æ“å¯å…±äº«ï¼Œè€Œ redolog æ˜¯ InnoDB å¼•æ“ç‰¹æœ‰çš„</li><li>å†™å…¥æ–¹å¼ä¸åŒï¼Œbinlog å®¹é‡æ— é™ï¼Œè¿½åŠ å†™å…¥ï¼Œè€Œ redolog å®¹é‡æœ‰é™ï¼Œå¾ªç¯å†™å…¥</li></ol><h2 id="java"><a class="header-anchor" href="#java">#</a>JAVA</h2><h3 id="ç±»åŠ è½½è¿‡ç¨‹"><a class="header-anchor" href="#ç±»åŠ è½½è¿‡ç¨‹">#</a>ç±»åŠ è½½è¿‡ç¨‹</h3><h4 id="åŠ è½½"><a class="header-anchor" href="#åŠ è½½">#</a>åŠ è½½</h4><p>ç®€å•æ¥è¯´ï¼ŒåŠ è½½æŒ‡çš„æ˜¯æŠŠ class å­—èŠ‚ç æ–‡ä»¶ä»å„ä¸ªæ¥æºé€šè¿‡ç±»åŠ è½½å™¨è£…è½½å…¥å†…å­˜ä¸­ã€‚</p><p>è¿™é‡Œæœ‰ä¸¤ä¸ªé‡ç‚¹ï¼š</p><p>å­—èŠ‚ç æ¥æºã€‚ä¸€èˆ¬çš„åŠ è½½æ¥æºåŒ…æ‹¬ä»æœ¬åœ°è·¯å¾„ä¸‹ç¼–è¯‘ç”Ÿæˆçš„.class æ–‡ä»¶ï¼Œä» jar åŒ…ä¸­çš„.class æ–‡ä»¶ï¼Œä»è¿œç¨‹ç½‘ç»œï¼Œä»¥åŠåŠ¨æ€ä»£ç†å®æ—¶ç¼–è¯‘</p><p>ç±»åŠ è½½å™¨ã€‚ä¸€èˆ¬åŒ…æ‹¬å¯åŠ¨ç±»åŠ è½½å™¨ï¼Œæ‰©å±•ç±»åŠ è½½å™¨ï¼Œåº”ç”¨ç±»åŠ è½½å™¨ï¼Œä»¥åŠç”¨æˆ·çš„è‡ªå®šä¹‰ç±»åŠ è½½å™¨ã€‚</p><p>æ³¨ï¼šä¸ºä»€ä¹ˆä¼šæœ‰è‡ªå®šä¹‰ç±»åŠ è½½å™¨ï¼Ÿ</p><p>ä¸€æ–¹é¢æ˜¯ç”±äº java ä»£ç å¾ˆå®¹æ˜“è¢«åç¼–è¯‘ï¼Œå¦‚æœéœ€è¦å¯¹è‡ªå·±çš„ä»£ç åŠ å¯†çš„è¯ï¼Œå¯ä»¥å¯¹ç¼–è¯‘åçš„ä»£ç è¿›è¡ŒåŠ å¯†ï¼Œç„¶åå†é€šè¿‡å®ç°è‡ªå·±çš„è‡ªå®šä¹‰ç±»åŠ è½½å™¨è¿›è¡Œè§£å¯†ï¼Œæœ€åå†åŠ è½½ã€‚</p><p>å¦ä¸€æ–¹é¢ä¹Ÿæœ‰å¯èƒ½ä»éæ ‡å‡†çš„æ¥æºåŠ è½½ä»£ç ï¼Œæ¯”å¦‚ä»ç½‘ç»œæ¥æºï¼Œé‚£å°±éœ€è¦è‡ªå·±å®ç°ä¸€ä¸ªç±»åŠ è½½å™¨ï¼Œä»æŒ‡å®šæºè¿›è¡ŒåŠ è½½ã€‚</p><h4 id="éªŒè¯"><a class="header-anchor" href="#éªŒè¯">#</a>éªŒè¯</h4><p>ä¸»è¦æ˜¯ä¸ºäº†ä¿è¯åŠ è½½è¿›æ¥çš„å­—èŠ‚æµç¬¦åˆè™šæ‹Ÿæœºè§„èŒƒï¼Œä¸ä¼šé€ æˆå®‰å…¨é”™è¯¯ã€‚</p><p>åŒ…æ‹¬å¯¹äºæ–‡ä»¶æ ¼å¼çš„éªŒè¯ï¼Œæ¯”å¦‚å¸¸é‡ä¸­æ˜¯å¦æœ‰ä¸è¢«æ”¯æŒçš„å¸¸é‡ï¼Ÿæ–‡ä»¶ä¸­æ˜¯å¦æœ‰ä¸è§„èŒƒçš„æˆ–è€…é™„åŠ çš„å…¶ä»–ä¿¡æ¯ï¼Ÿ</p><p>å¯¹äºå…ƒæ•°æ®çš„éªŒè¯ï¼Œæ¯”å¦‚è¯¥ç±»æ˜¯å¦ç»§æ‰¿äº†è¢« final ä¿®é¥°çš„ç±»ï¼Ÿç±»ä¸­çš„å­—æ®µï¼Œæ–¹æ³•æ˜¯å¦ä¸çˆ¶ç±»å†²çªï¼Ÿæ˜¯å¦å‡ºç°äº†ä¸åˆç†çš„é‡è½½ï¼Ÿ</p><p>å¯¹äºå­—èŠ‚ç çš„éªŒè¯ï¼Œä¿è¯ç¨‹åºè¯­ä¹‰çš„åˆç†æ€§ï¼Œæ¯”å¦‚è¦ä¿è¯ç±»å‹è½¬æ¢çš„åˆç†æ€§ã€‚</p><p>å¯¹äºç¬¦å·å¼•ç”¨çš„éªŒè¯ï¼Œæ¯”å¦‚æ ¡éªŒç¬¦å·å¼•ç”¨ä¸­é€šè¿‡å…¨é™å®šåæ˜¯å¦èƒ½å¤Ÿæ‰¾åˆ°å¯¹åº”çš„ç±»ï¼Ÿæ ¡éªŒç¬¦å·å¼•ç”¨ä¸­çš„è®¿é—®æ€§ï¼ˆprivateï¼Œpublic ç­‰ï¼‰æ˜¯å¦å¯è¢«å½“å‰ç±»è®¿é—®ï¼Ÿ</p><h4 id="å‡†å¤‡"><a class="header-anchor" href="#å‡†å¤‡">#</a>å‡†å¤‡</h4><p>ä¸»è¦æ˜¯ä¸ºç±»å˜é‡ï¼ˆæ³¨æ„ï¼Œä¸æ˜¯å®ä¾‹å˜é‡ï¼‰åˆ†é…å†…å­˜ï¼Œå¹¶ä¸”èµ‹äºˆåˆå€¼ã€‚</p><p>ç‰¹åˆ«éœ€è¦æ³¨æ„ï¼Œåˆå€¼ï¼Œä¸æ˜¯ä»£ç ä¸­å…·ä½“å†™çš„åˆå§‹åŒ–çš„å€¼ï¼Œè€Œæ˜¯ Java è™šæ‹Ÿæœºæ ¹æ®ä¸åŒå˜é‡ç±»å‹çš„é»˜è®¤åˆå§‹å€¼ã€‚</p><p>æ¯”å¦‚ 8 ç§åŸºæœ¬ç±»å‹çš„åˆå€¼ï¼Œé»˜è®¤ä¸º 0ï¼›å¼•ç”¨ç±»å‹çš„åˆå€¼åˆ™ä¸º nullï¼›å¸¸é‡çš„åˆå€¼å³ä¸ºä»£ç ä¸­è®¾ç½®çš„å€¼ï¼Œfinal static tmp = 456ï¼Œ é‚£ä¹ˆè¯¥é˜¶æ®µ tmp çš„åˆå€¼å°±æ˜¯ 456</p><h4 id="è§£æ"><a class="header-anchor" href="#è§£æ">#</a>è§£æ</h4><p>å°†å¸¸é‡æ± å†…çš„ç¬¦å·å¼•ç”¨æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨çš„è¿‡ç¨‹ã€‚</p><p>ä¸¤ä¸ªé‡ç‚¹ï¼š</p><p>ç¬¦å·å¼•ç”¨ã€‚å³ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä½†æ˜¯è¿™ä¸ªå­—ç¬¦ä¸²ç»™å‡ºäº†ä¸€äº›èƒ½å¤Ÿå”¯ä¸€æ€§è¯†åˆ«ä¸€ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªå˜é‡ï¼Œä¸€ä¸ªç±»çš„ç›¸å…³ä¿¡æ¯ã€‚</p><p>ç›´æ¥å¼•ç”¨ã€‚å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå†…å­˜åœ°å€ï¼Œæˆ–è€…ä¸€ä¸ªåç§»é‡ã€‚æ¯”å¦‚ç±»æ–¹æ³•ï¼Œç±»å˜é‡çš„ç›´æ¥å¼•ç”¨æ˜¯æŒ‡å‘æ–¹æ³•åŒºçš„æŒ‡é’ˆï¼›è€Œå®ä¾‹æ–¹æ³•ï¼Œå®ä¾‹å˜é‡çš„ç›´æ¥å¼•ç”¨åˆ™æ˜¯ä»å®ä¾‹çš„å¤´æŒ‡é’ˆå¼€å§‹ç®—èµ·åˆ°è¿™ä¸ªå®ä¾‹å˜é‡ä½ç½®çš„åç§»é‡</p><p>ä¸¾ä¸ªä¾‹å­æ¥è¯´ï¼Œç°åœ¨è°ƒç”¨æ–¹æ³• hello()ï¼Œè¿™ä¸ªæ–¹æ³•çš„åœ°å€æ˜¯ 1234567ï¼Œé‚£ä¹ˆ hello å°±æ˜¯ç¬¦å·å¼•ç”¨ï¼Œ1234567 å°±æ˜¯ç›´æ¥å¼•ç”¨ã€‚</p><p>åœ¨è§£æé˜¶æ®µï¼Œè™šæ‹Ÿæœºä¼šæŠŠæ‰€æœ‰çš„ç±»åï¼Œæ–¹æ³•åï¼Œå­—æ®µåè¿™äº›ç¬¦å·å¼•ç”¨æ›¿æ¢ä¸ºå…·ä½“çš„å†…å­˜åœ°å€æˆ–åç§»é‡ï¼Œä¹Ÿå°±æ˜¯ç›´æ¥å¼•ç”¨ã€‚</p><h4 id="åˆå§‹åŒ–"><a class="header-anchor" href="#åˆå§‹åŒ–">#</a>åˆå§‹åŒ–</h4><p>è¿™ä¸ªé˜¶æ®µä¸»è¦æ˜¯å¯¹ç±»å˜é‡åˆå§‹åŒ–ï¼Œæ˜¯æ‰§è¡Œç±»æ„é€ å™¨çš„è¿‡ç¨‹ã€‚</p><p>æ¢å¥è¯è¯´ï¼Œåªå¯¹ static ä¿®é¥°çš„å˜é‡æˆ–è¯­å¥è¿›è¡Œåˆå§‹åŒ–ã€‚</p><p>å¦‚æœåˆå§‹åŒ–ä¸€ä¸ªç±»çš„æ—¶å€™ï¼Œå…¶çˆ¶ç±»å°šæœªåˆå§‹åŒ–ï¼Œåˆ™ä¼˜å…ˆåˆå§‹åŒ–å…¶çˆ¶ç±»ã€‚</p><p>å¦‚æœåŒæ—¶åŒ…å«å¤šä¸ªé™æ€å˜é‡å’Œé™æ€ä»£ç å—ï¼Œåˆ™æŒ‰ç…§è‡ªä¸Šè€Œä¸‹çš„é¡ºåºä¾æ¬¡æ‰§è¡Œã€‚</p><h3 id="classloader"><a class="header-anchor" href="#classloader">#</a>ClassLoader</h3><p>å®ƒæ˜¯ç”¨æ¥åŠ è½½ Class çš„ã€‚å®ƒè´Ÿè´£å°† Class çš„å­—èŠ‚ç å½¢å¼è½¬æ¢æˆå†…å­˜å½¢å¼çš„ Class å¯¹è±¡ã€‚å­—èŠ‚ç å¯ä»¥æ¥è‡ªäºç£ç›˜æ–‡ä»¶ _.classï¼Œä¹Ÿå¯ä»¥æ˜¯ jar åŒ…é‡Œçš„ _.classï¼Œä¹Ÿå¯ä»¥æ¥è‡ªè¿œç¨‹æœåŠ¡å™¨æä¾›çš„å­—èŠ‚æµï¼Œå­—èŠ‚ç çš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ªå­—èŠ‚æ•°ç»„ []byteï¼Œå®ƒæœ‰ç‰¹å®šçš„å¤æ‚çš„å†…éƒ¨æ ¼å¼ã€‚</p><p>JVM è¿è¡Œå®ä¾‹ä¸­ä¼šå­˜åœ¨å¤šä¸ª ClassLoaderï¼Œä¸åŒçš„ ClassLoader ä¼šä»ä¸åŒçš„åœ°æ–¹åŠ è½½å­—èŠ‚ç æ–‡ä»¶ã€‚å®ƒå¯ä»¥ä»ä¸åŒçš„æ–‡ä»¶ç›®å½•åŠ è½½ï¼Œä¹Ÿå¯ä»¥ä»ä¸åŒçš„ jar æ–‡ä»¶ä¸­åŠ è½½ï¼Œä¹Ÿå¯ä»¥ä»ç½‘ç»œä¸Šä¸åŒçš„é™æ€æ–‡ä»¶æœåŠ¡å™¨æ¥ä¸‹è½½å­—èŠ‚ç å†åŠ è½½ã€‚</p><h4 id="bootstrapclassloader"><a class="header-anchor" href="#bootstrapclassloader">#</a>BootstrapClassLoader</h4><p>å¯åŠ¨ç±»åŠ è½½å™¨ï¼šè´Ÿè´£åŠ è½½ JVM è¿è¡Œæ—¶æ ¸å¿ƒç±»,åŠ è½½ System.getProperty(â€œsun.boot.class.pathâ€)æ‰€æŒ‡å®šçš„è·¯å¾„æˆ– jar</p><h4 id="extensionclassloader"><a class="header-anchor" href="#extensionclassloader">#</a>ExtensionClassLoader</h4><p>æ‹“å±•ç±»åŠ è½½å™¨ï¼šè´Ÿè´£åŠ è½½ JVM æ‰©å±•ç±»ï¼Œæ¯”å¦‚ swing ç³»åˆ—ã€å†…ç½®çš„ js å¼•æ“ã€xml è§£æå™¨ ç­‰ç­‰ï¼Œè¿™äº›åº“åé€šå¸¸ä»¥ javax å¼€å¤´ï¼Œå®ƒä»¬çš„ jar åŒ…ä½äº JAVAHOME/lib/rt.jar æ–‡ä»¶ä¸­.<br>åŠ è½½ System.getProperty(â€œjava.ext.dirsâ€)æ‰€æŒ‡å®šçš„è·¯å¾„æˆ– jarã€‚åœ¨ä½¿ç”¨ Java è¿è¡Œç¨‹åºæ—¶ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šå…¶æœç´¢è·¯å¾„ï¼Œä¾‹å¦‚ï¼šjava -Djava.ext.dirs=d:\projects\testproj\classes HelloWorldã€‚</p><h4 id="appclassloader"><a class="header-anchor" href="#appclassloader">#</a>AppClassLoader</h4><p>ç”¨æˆ·ç±»åŠ è½½å™¨ï¼šå®ƒä¼šåŠ è½½ Classpath ç¯å¢ƒå˜é‡é‡Œå®šä¹‰çš„è·¯å¾„ä¸­çš„ jar åŒ…å’Œç›®å½•ã€‚æˆ‘ä»¬è‡ªå·±ç¼–å†™çš„ä»£ç ä»¥åŠä½¿ç”¨çš„ç¬¬ä¸‰æ–¹ jar åŒ…é€šå¸¸éƒ½æ˜¯ç”±å®ƒæ¥åŠ è½½çš„ã€‚<br>åŠ è½½ System.getProperty(â€œjava.class.pathâ€)æ‰€æŒ‡å®šçš„è·¯å¾„æˆ– jarã€‚åœ¨ä½¿ç”¨ Java è¿è¡Œç¨‹åºæ—¶ï¼Œä¹Ÿå¯ä»¥åŠ ä¸Š-cp æ¥è¦†ç›–åŸæœ‰çš„ Classpath è®¾ç½®ï¼Œä¾‹å¦‚ï¼š java -cp ./lavasoft/classes HelloWorld</p><h4 id="urlclassloader"><a class="header-anchor" href="#urlclassloader">#</a>URLClassLoader</h4><p>é‚£äº›ä½äºç½‘ç»œä¸Šé™æ€æ–‡ä»¶æœåŠ¡å™¨æä¾›çš„ jar åŒ…å’Œ class æ–‡ä»¶ï¼Œjdk å†…ç½®äº†ä¸€ä¸ª URLClassLoaderï¼Œç”¨æˆ·åªéœ€è¦ä¼ é€’è§„èŒƒçš„ç½‘ç»œè·¯å¾„ç»™æ„é€ å™¨ï¼Œå°±å¯ä»¥ä½¿ç”¨ URLClassLoader æ¥åŠ è½½è¿œç¨‹ç±»åº“äº†ã€‚URLClassLoader ä¸ä½†å¯ä»¥åŠ è½½è¿œç¨‹ç±»åº“ï¼Œè¿˜å¯ä»¥åŠ è½½æœ¬åœ°è·¯å¾„çš„ç±»åº“ï¼Œå–å†³äºæ„é€ å™¨ä¸­ä¸åŒçš„åœ°å€å½¢å¼ã€‚ExtensionClassLoader å’Œ AppClassLoader éƒ½æ˜¯ URLClassLoader çš„å­ç±»ï¼Œå®ƒä»¬éƒ½æ˜¯ä»æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿé‡ŒåŠ è½½ç±»åº“ã€‚</p><h4 id="å…³äº-jvm-ç±»çš„åŠ è½½"><a class="header-anchor" href="#å…³äº-jvm-ç±»çš„åŠ è½½">#</a>å…³äº jvm ç±»çš„åŠ è½½</h4><p>åœ¨ Java ä¸­ï¼Œç±»è£…è½½å™¨æŠŠä¸€ä¸ªç±»è£…å…¥ Java è™šæ‹Ÿæœºä¸­ï¼Œè¦ç»è¿‡ä¸‰ä¸ªæ­¥éª¤æ¥å®Œæˆï¼šè£…è½½ã€é“¾æ¥å’Œåˆå§‹åŒ–ï¼Œå…¶ä¸­é“¾æ¥åˆå¯ä»¥åˆ†æˆæ ¡éªŒã€å‡†å¤‡å’Œè§£æä¸‰æ­¥ï¼Œé™¤äº†è§£æå¤–ï¼Œå…¶å®ƒæ­¥éª¤æ˜¯ä¸¥æ ¼æŒ‰ç…§é¡ºåºå®Œæˆçš„ï¼Œå„ä¸ªæ­¥éª¤çš„ä¸»è¦å·¥ä½œå¦‚ä¸‹ï¼š</p><p>è£…è½½ï¼šæŸ¥æ‰¾å’Œå¯¼å…¥ç±»æˆ–æ¥å£çš„äºŒè¿›åˆ¶æ•°æ®ï¼› //byte[]</p><p>é“¾æ¥ï¼šæ‰§è¡Œä¸‹é¢çš„æ ¡éªŒã€å‡†å¤‡å’Œè§£ææ­¥éª¤ï¼Œå…¶ä¸­è§£ææ­¥éª¤æ˜¯å¯ä»¥é€‰æ‹©çš„ï¼›//åŒ…å«äº†è™šæ–¹æ³•è¡¨çš„åˆå§‹åŒ–</p><p>æ ¡éªŒï¼šæ£€æŸ¥å¯¼å…¥ç±»æˆ–æ¥å£çš„äºŒè¿›åˆ¶æ•°æ®çš„æ­£ç¡®æ€§ï¼› //é­”æ•° babycafe?</p><p>å‡†å¤‡ï¼šç»™ç±»çš„é™æ€å˜é‡åˆ†é…å¹¶åˆå§‹åŒ–å­˜å‚¨ç©ºé—´ï¼› //åˆ†é…å†…å­˜ç©ºé—´</p><p>è§£æï¼šå°†ç¬¦å·å¼•ç”¨è½¬æˆç›´æ¥å¼•ç”¨ï¼›</p><p>åˆå§‹åŒ–ï¼šæ¿€æ´»ç±»çš„é™æ€å˜é‡çš„åˆå§‹åŒ– Java ä»£ç å’Œé™æ€ Java ä»£ç å—ã€‚<br>//å¯¹åº”çš„ä¸º<clinit>()æ–¹æ³•,è¯¥æ–¹æ³•åœ¨å¤šçº¿ç¯å¢ƒä¸­å¦‚æœæœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶å»åˆå§‹åŒ–ä¸€ä¸ªç±»,é‚£ä¹ˆä¹…åªæœ‰ä¸€ä¸ªçº¿ç¨‹å»æ‰§è¡Œã€‚<br>//è¿™ä¹Ÿæ˜¯æˆ‘ä»¬å†™å•ä¾‹æ—¶,ä¸ºä»€ä¹ˆå¯ä»¥ä½¿ç”¨é™æ€å†…éƒ¨ç±»äº†,ä¿è¯äº†å†…éƒ¨é‡æ’åºå¯¹å¤–éƒ¨çº¿ç¨‹æ—¶ä¸å¯è§çš„,å…·ä½“å¯ä»¥è§å¯¹ DCL çš„åˆ†æ</p><h3 id="èŒƒå‹"><a class="header-anchor" href="#èŒƒå‹">#</a>èŒƒå‹</h3><p>Java çš„æ³›å‹åªå­˜åœ¨äºç¼–è¯‘æœŸï¼Œä¸€æ—¦ç¼–è¯‘æˆå­—èŠ‚ç ï¼Œæ³›å‹å°†è¢«æ“¦é™¤ã€‚æ³›å‹çš„ä½œç”¨åœ¨äºåœ¨ç¼–è¯‘é˜¶æ®µä¿è¯æˆ‘ä»¬ä½¿ç”¨äº†æ­£ç¡®çš„ç±»å‹ï¼Œå¹¶ä¸”ç”±ç¼–è¯‘å™¨å¸®æˆ‘ä»¬åŠ å…¥è½¬å‹åŠ¨ä½œï¼Œä½¿å¾—è½¬å‹æ˜¯ä¸éœ€è¦å…³å¿ƒä¸”å®‰å…¨çš„ã€‚</p><h3 id="gc"><a class="header-anchor" href="#gc">#</a>GC</h3><h4 id="å¯ä»¥ä½œä¸º-gc-roots-å¯¹è±¡"><a class="header-anchor" href="#å¯ä»¥ä½œä¸º-gc-roots-å¯¹è±¡">#</a>å¯ä»¥ä½œä¸º GC Roots å¯¹è±¡</h4><ol><li>è™šæ‹Ÿæœºæ ˆä¸­å±€éƒ¨å˜é‡è¡¨ä¸­å¼•ç”¨çš„å¯¹è±¡</li><li>æœ¬åœ°æ–¹æ³•æ ˆä¸­ native æ–¹æ³•å¼•ç”¨çš„å¯¹è±¡</li><li>æ–¹æ³•åŒºä¸­ç±»é™æ€å±æ€§å¼•ç”¨çš„å¯¹è±¡</li><li>æ–¹æ³•åŒºä¸­çš„å¸¸é‡å¼•ç”¨çš„å¯¹è±¡</li></ol><h4 id="å››ç§å¼•ç”¨ç±»å‹"><a class="header-anchor" href="#å››ç§å¼•ç”¨ç±»å‹">#</a>å››ç§å¼•ç”¨ç±»å‹</h4><p>å¼ºå¼•ç”¨ï¼šä½¿ç”¨ new ä¸€ä¸ªæ–°å¯¹è±¡çš„æ–¹å¼æ¥åˆ›å»ºå¼ºå¼•ç”¨ã€‚åªè¦å¼ºå¼•ç”¨è¿˜å­˜åœ¨ï¼Œåƒåœ¾æ”¶é›†å™¨æ°¸è¿œä¸ä¼šå›æ”¶æ‰è¢«å¼•ç”¨çš„å¯¹è±¡ã€‚<br>è½¯å¼•ç”¨ï¼šä¸€äº›è¿˜æœ‰ç”¨ä½†å¹¶éå¿…é¡»çš„å¯¹è±¡ã€‚è½¯å¼•ç”¨å…³è”ç€çš„å¯¹è±¡ï¼Œåœ¨ç³»ç»Ÿè¦å‘ç”Ÿå†…å­˜æº¢å‡ºä¹‹å‰ï¼Œä¼šæŠŠè¿™äº›å¯¹è±¡è¿›è¡Œåƒåœ¾å›æ”¶ã€‚<br>å¼±å¼•ç”¨ï¼šä¹Ÿæ˜¯æè¿°ä¸€äº›éå¿…é¡»å¯¹è±¡ï¼Œå¼ºåº¦æ¯”è½¯å¼•ç”¨æ›´å¼±ï¼Œåªè¦å‘ç”Ÿåƒåœ¾å›æ”¶ï¼Œå®ƒå°±ä¸€å®šä¼šè¢«å›æ”¶ã€‚<br>è™šå¼•ç”¨ï¼šåˆç§°å¹½çµå¼•ç”¨ã€å¹»å½±å¼•ç”¨ï¼Œæ˜¯æœ€å¼±çš„ä¸€ç§å¼•ç”¨ã€‚ä¸ºå¯¹è±¡è®¾ç½®è™šå¼•ç”¨çš„å”¯ä¸€ç›®çš„æ˜¯èƒ½åœ¨è¿™ä¸ªå¯¹è±¡è¢«å›æ”¶æ—¶ä¼šæ”¶åˆ°ä¸€ä¸ªç³»ç»Ÿé€šçŸ¥ã€‚</p><h4 id="åƒåœ¾æ”¶é›†ç®—æ³•"><a class="header-anchor" href="#åƒåœ¾æ”¶é›†ç®—æ³•">#</a>åƒåœ¾æ”¶é›†ç®—æ³•</h4><ol><li>æ ‡è®° - æ¸…é™¤ç®—æ³•ï¼šé€‚ç”¨è€å¹´ä»£</li><li>æ ‡è®° - æ•´ç†ç®—æ³•ï¼šé€‚ç”¨è€å¹´ä»£</li><li>å¤åˆ¶ç®—æ³•ï¼šé€‚ç”¨å¹´è½»ä»£</li></ol><h3 id="çº¿ç¨‹æ± "><a class="header-anchor" href="#çº¿ç¨‹æ± ">#</a>çº¿ç¨‹æ± </h3><h4 id="å¥½å¤„"><a class="header-anchor" href="#å¥½å¤„">#</a>å¥½å¤„</h4><p>æˆ‘ä»¬çŸ¥é“ä¸ç”¨çº¿ç¨‹æ± çš„è¯ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½è¦é€šè¿‡ new Thread(xxRunnable).start()çš„æ–¹å¼æ¥åˆ›å»ºå¹¶è¿è¡Œä¸€ä¸ªçº¿ç¨‹ï¼Œçº¿ç¨‹å°‘çš„è¯è¿™ä¸ä¼šæ˜¯é—®é¢˜ï¼Œè€ŒçœŸå®ç¯å¢ƒå¯èƒ½ä¼šå¼€å¯å¤šä¸ªçº¿ç¨‹è®©ç³»ç»Ÿå’Œç¨‹åºè¾¾åˆ°æœ€ä½³æ•ˆç‡ï¼Œå½“çº¿ç¨‹æ•°è¾¾åˆ°ä¸€å®šæ•°é‡å°±ä¼šè€—å°½ç³»ç»Ÿçš„ CPU å’Œå†…å­˜èµ„æºï¼Œä¹Ÿä¼šé€ æˆ GC é¢‘ç¹æ”¶é›†å’Œåœé¡¿ï¼Œå› ä¸ºæ¯æ¬¡åˆ›å»ºå’Œé”€æ¯ä¸€ä¸ªçº¿ç¨‹éƒ½æ˜¯è¦æ¶ˆè€—ç³»ç»Ÿèµ„æºçš„ï¼Œå¦‚æœä¸ºæ¯ä¸ªä»»åŠ¡éƒ½åˆ›å»ºçº¿ç¨‹è¿™æ— ç–‘æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„æ€§èƒ½ç“¶é¢ˆã€‚æ‰€ä»¥ï¼Œçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹å¤ç”¨æå¤§èŠ‚çœäº†ç³»ç»Ÿèµ„æºï¼Œå½“çº¿ç¨‹ä¸€æ®µæ—¶é—´ä¸å†æœ‰ä»»åŠ¡å¤„ç†æ—¶å®ƒä¹Ÿä¼šè‡ªåŠ¨é”€æ¯ï¼Œè€Œä¸ä¼šé•¿é©»å†…å­˜ã€‚</p><h4 id="å·¥ä½œæµç¨‹"><a class="header-anchor" href="#å·¥ä½œæµç¨‹">#</a>å·¥ä½œæµç¨‹</h4><ol><li>å¦‚æœçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹å°äº corePoolSize æ—¶å°±ä¼šåˆ›å»ºæ–°çº¿ç¨‹ç›´æ¥æ‰§è¡Œä»»åŠ¡ã€‚</li><li>å¦‚æœçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹å¤§äº corePoolSize æ—¶å°±ä¼šæš‚æ—¶æŠŠä»»åŠ¡å­˜å‚¨åˆ°å·¥ä½œé˜Ÿåˆ— workQueue ä¸­ç­‰å¾…æ‰§è¡Œã€‚</li><li>å¦‚æœå·¥ä½œé˜Ÿåˆ— workQueue ä¹Ÿæ»¡æ—¶ï¼Œå½“çº¿ç¨‹æ•°å°äºæœ€å¤§çº¿ç¨‹æ± æ•° maximumPoolSize æ—¶å°±ä¼šåˆ›å»ºæ–°çº¿ç¨‹æ¥å¤„ç†ï¼Œè€Œçº¿ç¨‹æ•°å¤§äºç­‰äºæœ€å¤§çº¿ç¨‹æ± æ•° maximumPoolSize æ—¶å°±ä¼šæ‰§è¡Œæ‹’ç»ç­–ç•¥ã€‚</li></ol><h4 id="åˆ†ç±»-2"><a class="header-anchor" href="#åˆ†ç±»-2">#</a>åˆ†ç±»</h4><ol><li><p>newFixedThreadPool<br>å›ºå®šçº¿ç¨‹æ± ï¼Œæ ¸å¿ƒçº¿ç¨‹æ•°å’Œæœ€å¤§çº¿ç¨‹æ•°å›ºå®šç›¸ç­‰ï¼Œè€Œç©ºé—²å­˜æ´»æ—¶é—´ä¸º 0 æ¯«ç§’ï¼Œè¯´æ˜æ­¤å‚æ•°ä¹Ÿæ— æ„ä¹‰ï¼Œå·¥ä½œé˜Ÿåˆ—ä¸ºæœ€å¤§ä¸º Integer.MAX_VALUE å¤§å°çš„é˜»å¡é˜Ÿåˆ—ã€‚å½“æ‰§è¡Œä»»åŠ¡æ—¶ï¼Œå¦‚æœçº¿ç¨‹éƒ½å¾ˆå¿™ï¼Œå°±ä¼šä¸¢åˆ°å·¥ä½œé˜Ÿåˆ—ç­‰æœ‰ç©ºé—²çº¿ç¨‹æ—¶å†æ‰§è¡Œï¼Œé˜Ÿåˆ—æ»¡å°±æ‰§è¡Œé»˜è®¤çš„æ‹’ç»ç­–ç•¥ã€‚</p></li><li><p>newCachedThreadPool<br>å¸¦ç¼“å†²çº¿ç¨‹æ± ï¼Œä»æ„é€ çœ‹æ ¸å¿ƒçº¿ç¨‹æ•°ä¸º 0ï¼Œæœ€å¤§çº¿ç¨‹æ•°ä¸º Integer æœ€å¤§å€¼å¤§å°ï¼Œè¶…è¿‡ 0 ä¸ªçš„ç©ºé—²çº¿ç¨‹åœ¨ 60 ç§’åé”€æ¯ï¼ŒSynchronousQueue è¿™æ˜¯ä¸€ä¸ªç›´æ¥æäº¤çš„é˜Ÿåˆ—ï¼Œæ„å‘³ç€æ¯ä¸ªæ–°ä»»åŠ¡éƒ½ä¼šæœ‰çº¿ç¨‹æ¥æ‰§è¡Œï¼Œå¦‚æœçº¿ç¨‹æ± æœ‰å¯ç”¨çº¿ç¨‹åˆ™æ‰§è¡Œä»»åŠ¡ï¼Œæ²¡æœ‰çš„è¯å°±åˆ›å»ºä¸€ä¸ªæ¥æ‰§è¡Œï¼Œçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°ä¸ç¡®å®šï¼Œä¸€èˆ¬å»ºè®®æ‰§è¡Œé€Ÿåº¦è¾ƒå¿«è¾ƒå°çš„çº¿ç¨‹ï¼Œä¸ç„¶è¿™ä¸ªæœ€å¤§çº¿ç¨‹æ± è¾¹ç•Œè¿‡å¤§å®¹æ˜“é€ æˆå†…å­˜æº¢å‡ºã€‚</p></li><li><p>newSingleThreadExecutor<br>å•çº¿ç¨‹çº¿ç¨‹æ± ï¼Œæ ¸å¿ƒçº¿ç¨‹æ•°å’Œæœ€å¤§çº¿ç¨‹æ•°å‡ä¸º 1ï¼Œç©ºé—²çº¿ç¨‹å­˜æ´» 0 æ¯«ç§’åŒæ ·æ— æ„æ€ï¼Œæ„å‘³ç€æ¯æ¬¡åªæ‰§è¡Œä¸€ä¸ªçº¿ç¨‹ï¼Œå¤šä½™çš„å…ˆå­˜å‚¨åˆ°å·¥ä½œé˜Ÿåˆ—ï¼Œä¸€ä¸ªä¸€ä¸ªæ‰§è¡Œï¼Œä¿è¯äº†çº¿ç¨‹çš„é¡ºåºæ‰§è¡Œã€‚</p></li><li><p>newScheduledThreadPool<br>è°ƒåº¦çº¿ç¨‹æ± ï¼Œå³æŒ‰ä¸€å®šçš„å‘¨æœŸæ‰§è¡Œä»»åŠ¡ï¼Œå³å®šæ—¶ä»»åŠ¡ï¼Œå¯¹ ThreadPoolExecutor è¿›è¡Œäº†åŒ…è£…è€Œå·²ã€‚</p></li></ol><h4 id="æ‹’ç»ç­–ç•¥"><a class="header-anchor" href="#æ‹’ç»ç­–ç•¥">#</a>æ‹’ç»ç­–ç•¥</h4><ol><li>AbortPolicy<br>ç®€å•ç²—æš´ï¼Œç›´æ¥æŠ›å‡ºæ‹’ç»å¼‚å¸¸ï¼Œè¿™ä¹Ÿæ˜¯é»˜è®¤çš„æ‹’ç»ç­–ç•¥ã€‚</li><li>CallerRunsPolicy<br>å¦‚æœçº¿ç¨‹æ± æœªå…³é—­ï¼Œåˆ™ä¼šåœ¨è°ƒç”¨è€…çº¿ç¨‹ä¸­ç›´æ¥æ‰§è¡Œæ–°ä»»åŠ¡ï¼Œè¿™ä¼šå¯¼è‡´ä¸»çº¿ç¨‹æäº¤çº¿ç¨‹æ€§èƒ½å˜æ…¢ã€‚</li><li>DiscardPolicy<br>ä»æ–¹æ³•çœ‹æ²¡åšä»»åŠ¡æ“ä½œï¼Œå³è¡¨ç¤ºä¸å¤„ç†æ–°ä»»åŠ¡ï¼Œå³ä¸¢å¼ƒã€‚</li><li>DiscardOldestPolicy<br>æŠ›å¼ƒæœ€è€çš„ä»»åŠ¡ï¼Œå°±æ˜¯ä»é˜Ÿåˆ—å–å‡ºæœ€è€çš„ä»»åŠ¡ç„¶åæ”¾å…¥æ–°çš„ä»»åŠ¡è¿›è¡Œæ‰§è¡Œã€‚</li></ol><h3 id="å¤šæ€"><a class="header-anchor" href="#å¤šæ€">#</a>å¤šæ€</h3><p>é¢å‘å¯¹è±¡çš„ä¸‰å¤§ç‰¹æ€§ï¼šå°è£…ã€ç»§æ‰¿ã€å¤šæ€<br>å¤šæ€çš„å®šä¹‰ï¼šæŒ‡å…è®¸ä¸åŒç±»çš„å¯¹è±¡å¯¹åŒä¸€æ¶ˆæ¯åšå‡ºå“åº”ã€‚å³åŒä¸€æ¶ˆæ¯å¯ä»¥æ ¹æ®å‘é€å¯¹è±¡çš„ä¸åŒè€Œé‡‡ç”¨å¤šç§ä¸åŒçš„è¡Œä¸ºæ–¹å¼ã€‚ï¼ˆå‘é€æ¶ˆæ¯å°±æ˜¯å‡½æ•°è°ƒç”¨ï¼‰<br>å®ç°å¤šæ€çš„æŠ€æœ¯ç§°ä¸ºï¼šåŠ¨æ€ç»‘å®šï¼ˆdynamic bindingï¼‰ï¼Œæ˜¯æŒ‡åœ¨æ‰§è¡ŒæœŸé—´åˆ¤æ–­æ‰€å¼•ç”¨å¯¹è±¡çš„å®é™…ç±»å‹ï¼Œæ ¹æ®å…¶å®é™…çš„ç±»å‹è°ƒç”¨å…¶ç›¸åº”çš„æ–¹æ³•ã€‚<br>å¤šæ€çš„ä½œç”¨ï¼šæ¶ˆé™¤ç±»å‹ä¹‹é—´çš„è€¦åˆå…³ç³»ã€‚<br>ç°å®ä¸­ï¼Œå…³äºå¤šæ€çš„ä¾‹å­ä¸èƒœæšä¸¾ã€‚æ¯”æ–¹è¯´æŒ‰ä¸‹ F1 é”®è¿™ä¸ªåŠ¨ä½œï¼Œå¦‚æœå½“å‰åœ¨ Flash ç•Œé¢ä¸‹å¼¹å‡ºçš„å°±æ˜¯ AS 3 çš„å¸®åŠ©æ–‡æ¡£ï¼›å¦‚æœå½“å‰åœ¨ Word ä¸‹å¼¹å‡ºçš„å°±æ˜¯ Word å¸®åŠ©ï¼›åœ¨ Windows ä¸‹å¼¹å‡ºçš„å°±æ˜¯ Windows å¸®åŠ©å’Œæ”¯æŒã€‚åŒä¸€ä¸ªäº‹ä»¶å‘ç”Ÿåœ¨ä¸åŒçš„å¯¹è±¡ä¸Šä¼šäº§ç”Ÿä¸åŒçš„ç»“æœã€‚<br>ä¸‹é¢æ˜¯å¤šæ€å­˜åœ¨çš„ä¸‰ä¸ªå¿…è¦æ¡ä»¶ï¼Œè¦æ±‚å¤§å®¶åšæ¢¦æ—¶éƒ½èƒ½èƒŒå‡ºæ¥ï¼</p><p>å¤šæ€å­˜åœ¨çš„ä¸‰ä¸ªå¿…è¦æ¡ä»¶<br>ä¸€ã€è¦æœ‰ç»§æ‰¿ï¼›<br>äºŒã€è¦æœ‰é‡å†™ï¼›<br>ä¸‰ã€çˆ¶ç±»å¼•ç”¨æŒ‡å‘å­ç±»å¯¹è±¡ã€‚</p><h2 id="epoll"><a class="header-anchor" href="#epoll">#</a>epoll</h2><p>1ã€æ”¯æŒä¸€ä¸ªè¿›ç¨‹æ‰€èƒ½æ‰“å¼€çš„æœ€å¤§è¿æ¥æ•°</p><p>selectï¼šå•ä¸ªè¿›ç¨‹æ‰€èƒ½æ‰“å¼€çš„æœ€å¤§è¿æ¥æ•°æœ‰ FD_SETSIZE å®å®šä¹‰ï¼Œå…¶å¤§å°æ˜¯ 32 ä¸ªæ•´æ•°çš„å¤§å°ï¼ˆåœ¨ 32 ä½çš„æœºå™¨ä¸Šï¼Œå¤§å°å°±æ˜¯ 3232ï¼ŒåŒç† 64 ä½æœºå™¨ä¸Š FD_SETSIZE ä¸º 3264ï¼‰ï¼Œå½“ç„¶æˆ‘ä»¬å¯ä»¥å¯¹è¿›è¡Œä¿®æ”¹ï¼Œç„¶åé‡æ–°ç¼–è¯‘å†…æ ¸ï¼Œä½†æ˜¯æ€§èƒ½å¯èƒ½ä¼šå—åˆ°å½±å“ï¼Œè¿™éœ€è¦è¿›ä¸€æ­¥çš„æµ‹è¯•ã€‚</p><p>pollï¼špoll æœ¬è´¨ä¸Šå’Œ select æ²¡æœ‰åŒºåˆ«ï¼Œä½†æ˜¯å®ƒæ²¡æœ‰æœ€å¤§è¿æ¥æ•°çš„é™åˆ¶ï¼ŒåŸå› æ˜¯å®ƒæ˜¯åŸºäºé“¾è¡¨æ¥å­˜å‚¨çš„ã€‚</p><p>epollï¼šè™½ç„¶è¿æ¥æ•°æœ‰ä¸Šé™ï¼Œä½†æ˜¯å¾ˆå¤§ï¼Œ1G å†…å­˜çš„æœºå™¨ä¸Šå¯ä»¥æ‰“å¼€ 10 ä¸‡å·¦å³çš„è¿æ¥ï¼Œ2G å†…å­˜çš„æœºå™¨å¯ä»¥æ‰“å¼€ 20 ä¸‡å·¦å³çš„è¿æ¥ã€‚</p><p>2ã€FD å‰§å¢åå¸¦æ¥çš„ IO æ•ˆç‡é—®é¢˜</p><p>selectï¼šå› ä¸ºæ¯æ¬¡è°ƒç”¨æ—¶éƒ½ä¼šå¯¹è¿æ¥è¿›è¡Œçº¿æ€§éå†ï¼Œæ‰€ä»¥éšç€ FD çš„å¢åŠ ä¼šé€ æˆéå†é€Ÿåº¦æ…¢çš„â€œçº¿æ€§ä¸‹é™æ€§èƒ½é—®é¢˜â€ã€‚</p><p>pollï¼šåŒä¸Š</p><p>epollï¼šå› ä¸º epoll å†…æ ¸ä¸­å®ç°æ˜¯æ ¹æ®æ¯ä¸ª fd ä¸Šçš„ callback å‡½æ•°æ¥å®ç°çš„ï¼Œåªæœ‰æ´»è·ƒçš„ socket æ‰ä¼šä¸»åŠ¨è°ƒç”¨ callbackï¼Œæ‰€ä»¥åœ¨æ´»è·ƒ socket è¾ƒå°‘çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨ epoll æ²¡æœ‰å‰é¢ä¸¤è€…çš„çº¿æ€§ä¸‹é™çš„æ€§èƒ½é—®é¢˜ï¼Œä½†æ˜¯æ‰€æœ‰ socket éƒ½å¾ˆæ´»è·ƒçš„æƒ…å†µä¸‹ï¼Œå¯èƒ½ä¼šæœ‰æ€§èƒ½é—®é¢˜ã€‚</p><p>3ã€ æ¶ˆæ¯ä¼ é€’æ–¹å¼</p><p>selectï¼šå†…æ ¸éœ€è¦å°†æ¶ˆæ¯ä¼ é€’åˆ°ç”¨æˆ·ç©ºé—´ï¼Œéƒ½éœ€è¦å†…æ ¸æ‹·è´åŠ¨ä½œ</p><p>pollï¼šåŒä¸Š</p><p>epollï¼šepoll é€šè¿‡å†…æ ¸å’Œç”¨æˆ·ç©ºé—´å…±äº«ä¸€å—å†…å­˜æ¥å®ç°çš„ã€‚</p><p>æ€»ç»“ï¼š</p><p>ç»¼ä¸Šï¼Œåœ¨é€‰æ‹© selectï¼Œpollï¼Œepoll æ—¶è¦æ ¹æ®å…·ä½“çš„ä½¿ç”¨åœºåˆä»¥åŠè¿™ä¸‰ç§æ–¹å¼çš„è‡ªèº«ç‰¹ç‚¹ã€‚</p><p>1ã€è¡¨é¢ä¸Šçœ‹ epoll çš„æ€§èƒ½æœ€å¥½ï¼Œä½†æ˜¯åœ¨è¿æ¥æ•°å°‘å¹¶ä¸”è¿æ¥éƒ½ååˆ†æ´»è·ƒçš„æƒ…å†µä¸‹ï¼Œselect å’Œ poll çš„æ€§èƒ½å¯èƒ½æ¯” epoll å¥½ï¼Œæ¯•ç«Ÿ epoll çš„é€šçŸ¥æœºåˆ¶éœ€è¦å¾ˆå¤šå‡½æ•°å›è°ƒã€‚</p><p>selectï¼Œpoll å®ç°éœ€è¦è‡ªå·±ä¸æ–­è½®è¯¢æ‰€æœ‰ fd é›†åˆï¼Œç›´åˆ°è®¾å¤‡å°±ç»ªï¼ŒæœŸé—´å¯èƒ½è¦ç¡çœ å’Œå”¤é†’å¤šæ¬¡äº¤æ›¿ã€‚è€Œ epoll å…¶å®ä¹Ÿéœ€è¦è°ƒç”¨ epoll_wait ä¸æ–­è½®è¯¢å°±ç»ªé“¾è¡¨ï¼ŒæœŸé—´ä¹Ÿå¯èƒ½å¤šæ¬¡ç¡çœ å’Œå”¤é†’äº¤æ›¿ï¼Œä½†æ˜¯å®ƒæ˜¯è®¾å¤‡å°±ç»ªæ—¶ï¼Œè°ƒç”¨å›è°ƒå‡½æ•°ï¼ŒæŠŠå°±ç»ª fd æ”¾å…¥å°±ç»ªé“¾è¡¨ä¸­ï¼Œå¹¶å”¤é†’åœ¨ epoll_wait ä¸­è¿›å…¥ç¡çœ çš„è¿›ç¨‹ã€‚è™½ç„¶éƒ½è¦ç¡çœ å’Œäº¤æ›¿ï¼Œä½†æ˜¯ select å’Œ poll åœ¨â€œé†’ç€â€çš„æ—¶å€™è¦éå†æ•´ä¸ª fd é›†åˆï¼Œè€Œ epoll åœ¨â€œé†’ç€â€çš„æ—¶å€™åªè¦åˆ¤æ–­ä¸€ä¸‹å°±ç»ªé“¾è¡¨æ˜¯å¦ä¸ºç©ºå°±è¡Œäº†ï¼Œè¿™èŠ‚çœäº†å¤§é‡çš„ CPU æ—¶é—´ã€‚è¿™å°±æ˜¯å›è°ƒæœºåˆ¶å¸¦æ¥çš„æ€§èƒ½æå‡ã€‚</p><p>2ã€select ä½æ•ˆæ˜¯å› ä¸ºæ¯æ¬¡å®ƒéƒ½éœ€è¦è½®è¯¢ã€‚ä½†ä½æ•ˆä¹Ÿæ˜¯ç›¸å¯¹çš„ï¼Œè§†æƒ…å†µè€Œå®šï¼Œä¹Ÿå¯é€šè¿‡è‰¯å¥½çš„è®¾è®¡æ”¹å–„</p><p>selectï¼Œpoll æ¯æ¬¡è°ƒç”¨éƒ½è¦æŠŠ fd é›†åˆä»ç”¨æˆ·æ€å¾€å†…æ ¸æ€æ‹·è´ä¸€æ¬¡ï¼Œå¹¶ä¸”è¦æŠŠ current å¾€è®¾å¤‡ç­‰å¾…é˜Ÿåˆ—ä¸­æŒ‚ä¸€æ¬¡ï¼Œè€Œ epoll åªè¦ä¸€æ¬¡æ‹·è´ï¼Œè€Œä¸”æŠŠ current å¾€ç­‰å¾…é˜Ÿåˆ—ä¸ŠæŒ‚ä¹ŸåªæŒ‚ä¸€æ¬¡ï¼ˆåœ¨ epoll_wait çš„å¼€å§‹ï¼Œæ³¨æ„è¿™é‡Œçš„ç­‰å¾…é˜Ÿåˆ—å¹¶ä¸æ˜¯è®¾å¤‡ç­‰å¾…é˜Ÿåˆ—ï¼Œåªæ˜¯ä¸€ä¸ª epoll å†…éƒ¨å®šä¹‰çš„ç­‰å¾…é˜Ÿåˆ—ï¼‰ã€‚è¿™ä¹Ÿèƒ½èŠ‚çœä¸å°‘çš„å¼€é”€ã€‚</p><h2 id="è®¡ç®—æœºç½‘ç»œ"><a class="header-anchor" href="#è®¡ç®—æœºç½‘ç»œ">#</a>è®¡ç®—æœºç½‘ç»œ</h2><h3 id="æ•°æ®é“¾è·¯å±‚"><a class="header-anchor" href="#æ•°æ®é“¾è·¯å±‚">#</a>æ•°æ®é“¾è·¯å±‚</h3><h4 id="å°è£…æˆå¸§"><a class="header-anchor" href="#å°è£…æˆå¸§">#</a>å°è£…æˆå¸§</h4><p>å°è£…æˆå¸§ï¼ˆframingï¼‰å°±æ˜¯åœ¨ä¸€æ®µæ•°æ®çš„å‰ååˆ†åˆ«æ·»åŠ é¦–éƒ¨å’Œå°¾éƒ¨ï¼Œè¿™æ ·å°±æ„æˆäº†ä¸€ä¸ªå¸§ã€‚æ¥æ”¶ç«¯åœ¨æ”¶åˆ°ç‰©ç†å±‚ä¸Šäº¤çš„æ¯”ç‰¹æµåï¼Œå°±èƒ½æ ¹æ®é¦–éƒ¨å’Œå°¾éƒ¨çš„æ ‡è®°ï¼Œä»æ¯”ç‰¹æµä¸­è¯†åˆ«å¸§çš„å¼€å§‹å’Œç»“æŸã€‚</p><p>é¦–éƒ¨å’Œå°¾éƒ¨çš„ä¸€ä¸ªé‡è¦ä½œç”¨å°±æ˜¯è¿›è¡Œå¸§å®šç•Œï¼ˆå³ç¡®å®šå¸§çš„ç•Œé™ï¼‰ã€‚æ­¤å¤–ï¼Œé¦–éƒ¨å’Œå°¾éƒ¨è¿˜åŒ…æ‹¬è®¸å¤šå¿…è¦çš„æ§åˆ¶ä¿¡æ¯ã€‚</p><p>ä¸ºäº†æé«˜å¸§çš„ä¼ è¾“æ•ˆç‡ï¼Œåº”å½“ä½¿å¸§çš„æ•°æ®éƒ¨åˆ†é•¿åº¦å°½é‡å¤§äºé¦–éƒ¨å’Œå°¾éƒ¨çš„é•¿åº¦ã€‚<br>æœ€å¤§ä¼ è¾“å•å…ƒ MTUï¼ˆMaximum Transfer Unitï¼‰ï¼šå¸§æ•°æ®éƒ¨åˆ†é•¿åº¦ä¸Šé™ã€‚</p><p>æ§åˆ¶å­—ç¬¦<code>SOH</code>ï¼ˆstart of headerï¼‰æ”¾åœ¨ä¸€å¸§çš„æœ€å‰é¢ï¼Œè¡¨ç¤ºå¸§çš„é¦–éƒ¨å¼€å§‹ã€‚å¦ä¸€ä¸ªæ§åˆ¶å­—ç¬¦<code>EOT</code>ï¼ˆend of transmissionï¼‰è¡¨ç¤ºå¸§çš„ç»“æŸã€‚æ³¨æ„ï¼š<code>SOH</code>å’Œ<code>EOT</code>éƒ½åªæ˜¯æ§åˆ¶å­—ç¬¦çš„åç§°ï¼Œä»–ä»¬çš„åå…­è¿›åˆ¶ç¼–ç åˆ†åˆ«æ˜¯ 01ï¼ˆäºŒè¿›åˆ¶æ˜¯ 00000001ï¼‰å’Œ 04ï¼ˆäºŒè¿›åˆ¶æ˜¯ 00000100ï¼‰ã€‚SOHã€EOT å¹¶ä¸æ˜¯ S O H E O T è¿™å‡ ä¸ªå­—ç¬¦ï¼Œåªæ˜¯åå­—è€Œå·²ã€‚</p><h4 id="é€æ˜ä¼ è¾“"><a class="header-anchor" href="#é€æ˜ä¼ è¾“">#</a>é€æ˜ä¼ è¾“</h4><p>ä¸ºäº†è§£å†³é€æ˜ä¼ è¾“é—®é¢˜ï¼Œå­—èŠ‚å¡«å……æ³•æˆ–å­—ç¬¦å¡«å……ï¼šåœ¨æ§åˆ¶å­—ç¬¦ SOHã€EOT çš„å‰é¢æ’å…¥ä¸€ä¸ªè½¬ä¹‰å­—ç¬¦ ESCï¼ˆå…¶åå…­è¿›åˆ¶ç¼–ç æ˜¯ 1Bï¼ŒäºŒè¿›åˆ¶æ˜¯ 00011011ï¼‰ã€‚è€Œæ¥æ”¶ç«¯çš„æ•°æ®é“¾è·¯å±‚åœ¨æŠŠæ•°æ®é€å¾€ç½‘ç»œå±‚ä¹‹å‰åˆ é™¤è¿™ä¸ªæ’å…¥çš„è½¬ä¹‰å­—ç¬¦ã€‚</p><h4 id="å·®é”™æ£€æµ‹"><a class="header-anchor" href="#å·®é”™æ£€æµ‹">#</a>å·®é”™æ£€æµ‹</h4><p>ç›®å‰åœ¨æ•°æ®é“¾è·¯å±‚å¹¿æ³›ä½¿ç”¨äº†å¾ªç¯å†—ä½™æ£€éªŒï¼ˆCRCï¼‰çš„æ£€é”™æŠ€æœ¯ã€‚</p><p>åœ¨æ•°æ®é“¾è·¯å±‚çš„ CRC æ£€éªŒéƒ½æ˜¯ç”¨ç¡¬ä»¶å®Œæˆçš„ï¼Œå¤„ç†å¾ˆè¿…é€Ÿï¼Œå› æ­¤ä¸ä¼šå»¶è¯¯æ•°æ®çš„ä¼ è¾“ã€‚</p><p>ä¸ºä»€ä¹ˆæ•°æ®é“¾è·¯å±‚è¦ä»¥å¸§ä¸ºå•ä½æ¥ä¼ é€æ•°æ®å‘¢ï¼Ÿå› ä¸ºå¦‚æœä¸ä»¥å¸§ä¸ºå•ä½ï¼Œå°±æ— æ³•åŠ å…¥å†—ä½™ç æ¥è¿›è¡Œå·®é”™æ£€éªŒã€‚</p><p>ç°åœ¨çš„äº’è”ç½‘é‡‡ç”¨äº†åŒºåˆ«å¯¹å¾…çš„æ–¹æ³•ï¼š</p><p>å¯¹äºé€šä¿¡è´¨é‡è‰¯å¥½çš„æœ‰çº¿ä¼ è¾“é“¾è·¯ï¼Œæ•°æ®é“¾è·¯å±‚åè®®ä¸ä½¿ç”¨ç¡®è®¤å’Œé‡ä¼ æœºåˆ¶ï¼Œå³ä¸è¦æ±‚æ•°æ®é“¾è·¯å±‚å‘ä¸Šæä¾›å¯é ä¼ è¾“çš„æœåŠ¡ã€‚å¦‚æœåœ¨æ•°æ®é“¾è·¯å±‚ä¼ è¾“æ•°æ®æ—¶å‡ºç°äº†å·®é”™å¹¶ä¸”éœ€è¦è¿›è¡Œæ”¹æ­£ï¼Œé‚£ä¹ˆæ”¹æ­£å·®é”™çš„ä»»åŠ¡å°±ç”±ä¸Šå±‚åè®®ï¼ˆä¾‹å¦‚ï¼Œè¿è¾“å±‚çš„ TCP åè®®ï¼‰æ¥å®Œæˆã€‚</p><p>å¯¹äºé€šä¿¡è´¨é‡è¾ƒå·®çš„æ— çº¿ä¼ è¾“é“¾è·¯ï¼Œæ•°æ®é“¾è·¯å±‚åè®®ä½¿ç”¨ç¡®è®¤å’Œé‡ä¼ æœºåˆ¶ï¼Œæ•°æ®é“¾è·¯å±‚å‘ä¸Šæä¾›å¯é ä¼ è¾“çš„æœåŠ¡ã€‚</p><h2 id="exceptionå’Œerrorçš„åŒºåˆ«"><a class="header-anchor" href="#exceptionå’Œerrorçš„åŒºåˆ«">#</a>Exceptionå’ŒErrorçš„åŒºåˆ«</h2><center><p><img src="//onns.xyz/blog/image/20200916-1.png" alt="ç»§æ‰¿å…³ç³»"></p></center><p>Errorï¼šè¡¨ç¤ºç”± JVM æ‰€ä¾¦æµ‹åˆ°çš„æ— æ³•é¢„æœŸçš„é”™è¯¯ï¼Œç”±äºè¿™æ˜¯å±äº JVM å±‚æ¬¡çš„ä¸¥é‡é”™è¯¯ï¼Œå¯¼è‡´ JVM æ— æ³•ç»§ç»­æ‰§è¡Œï¼Œå› æ­¤ï¼Œè¿™æ˜¯ä¸å¯æ•æ‰åˆ°çš„ï¼Œæ— æ³•é‡‡å–ä»»ä½•æ¢å¤çš„æ“ä½œï¼Œé¡¶å¤šåªèƒ½æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ã€‚</p><p>Exceptionï¼šè¡¨ç¤ºå¯æ¢å¤çš„ä¾‹å¤–/å¼‚å¸¸ï¼Œè¿™æ˜¯å¯æ•æ‰åˆ°çš„ã€‚</p><p>Java æä¾›äº†ä¸¤ç±»ä¸»è¦çš„å¼‚å¸¸ï¼šRuntimeExceptionå’Œchecked exceptionã€‚</p><p>checkedå¼‚å¸¸ä¹Ÿå°±æ˜¯æˆ‘ä»¬ç»å¸¸é‡åˆ°çš„ IO å¼‚å¸¸ï¼Œä»¥åŠSQL å¼‚å¸¸ç­‰ã€‚å¯¹äºè¿™ç§å¼‚å¸¸ï¼ŒJAVA ç¼–è¯‘å™¨å¼ºåˆ¶è¦æ±‚æˆ‘ä»¬å¿…éœ€å¯¹å‡ºç°çš„è¿™äº›å¼‚å¸¸è¿›è¡Œå¤„ç†ã€‚</p><p>ä½†æ˜¯RuntimeExceptionï¼Œä¹Ÿç§°è¿è¡Œæ—¶å¼‚å¸¸ï¼Œæˆ‘ä»¬å¯ä»¥ä¸å¤„ç†ã€‚å½“å‡ºç°è¿™æ ·çš„å¼‚å¸¸æ—¶ï¼Œæ€»æ˜¯ç”±è™šæ‹Ÿæœºæ¥ç®¡ã€‚æ¯”å¦‚ï¼šæˆ‘ä»¬ä»æ¥æ²¡æœ‰äººå»å¤„ç†è¿‡NullPointerException å¼‚å¸¸ï¼Œå®ƒå°±æ˜¯è¿è¡Œæ—¶å¼‚å¸¸ï¼Œå¹¶ä¸”è¿™ç§å¼‚å¸¸è¿˜æ˜¯æœ€å¸¸è§çš„å¼‚å¸¸ä¹‹ä¸€ã€‚</p><p>å‡ºç°è¿è¡Œæ—¶å¼‚å¸¸åï¼Œç³»ç»Ÿä¼šæŠŠå¼‚å¸¸ä¸€ç›´å¾€ä¸Šå±‚æŠ›ï¼Œä¸€ç›´é‡åˆ°å¤„ç†ä»£ç ã€‚å¦‚æœæ²¡æœ‰å¤„ç†å—ï¼Œåˆ°æœ€ä¸Šå±‚ï¼Œå¦‚æœæ˜¯å¤šçº¿ç¨‹å°±ç”± Thread.run() æŠ›å‡º ï¼Œå¦‚æœæ˜¯å•çº¿ç¨‹å°±è¢« main() æŠ›å‡º ã€‚æŠ›å‡ºä¹‹åï¼Œå¦‚æœæ˜¯çº¿ç¨‹ï¼Œè¿™ä¸ªçº¿ç¨‹ä¹Ÿå°±é€€å‡ºäº†ã€‚å¦‚æœæ˜¯ä¸»ç¨‹åºæŠ›å‡ºçš„å¼‚å¸¸ï¼Œé‚£ä¹ˆè¿™æ•´ä¸ªç¨‹åºä¹Ÿå°±é€€å‡ºäº†ã€‚è¿è¡Œæ—¶å¼‚å¸¸æ˜¯ Exception çš„å­ç±»ï¼Œä¹Ÿæœ‰ä¸€èˆ¬å¼‚å¸¸çš„ç‰¹ç‚¹ï¼Œä¹Ÿæ˜¯å¯ä»¥è¢« Catch å—å¤„ç†çš„ã€‚åªä¸è¿‡å¾€å¾€æˆ‘ä»¬ä¸å¯¹ä»–å¤„ç†ç½¢äº†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ å¦‚æœä¸å¯¹è¿è¡Œæ—¶å¼‚å¸¸è¿›è¡Œå¤„ç†ï¼Œé‚£ä¹ˆå‡ºç°è¿è¡Œæ—¶å¼‚å¸¸ä¹‹åï¼Œè¦ä¹ˆæ˜¯çº¿ç¨‹ä¸­æ­¢ï¼Œè¦ä¹ˆæ˜¯ä¸»ç¨‹åºç»ˆæ­¢ã€‚<br>å¦‚æœä¸æƒ³ç»ˆæ­¢ï¼Œåˆ™å¿…é¡»æ•æ‰æ‰€æœ‰çš„è¿è¡Œæ—¶å¼‚å¸¸ï¼Œå†³ä¸è®©è¿™ä¸ªå¤„ç†çº¿ç¨‹é€€å‡ºã€‚é˜Ÿåˆ—é‡Œé¢å‡ºç°å¼‚å¸¸æ•°æ®äº†ï¼Œæ­£å¸¸çš„å¤„ç†åº”è¯¥æ˜¯æŠŠå¼‚å¸¸æ•°æ®èˆå¼ƒï¼Œç„¶åè®°å½•æ—¥å¿—ã€‚ä¸åº”è¯¥ç”±äºå¼‚å¸¸æ•°æ®è€Œå½±å“ä¸‹é¢å¯¹æ­£å¸¸æ•°æ®çš„å¤„ç†ã€‚åœ¨è¿™ä¸ªåœºæ™¯è¿™æ ·å¤„ç†å¯èƒ½æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥½çš„åº”ç”¨ï¼Œä½†å¹¶ä¸ä»£è¡¨åœ¨æ‰€æœ‰çš„åœºæ™¯éƒ½åº”è¯¥å¦‚æ­¤ã€‚å¦‚æœåœ¨å…¶å®ƒåœºæ™¯ï¼Œé‡åˆ°äº†ä¸€äº›é”™è¯¯ï¼Œå¦‚æœé€€å‡ºç¨‹åºæ¯”è¾ƒå¥½ï¼Œè¿™æ—¶ä½ å°±å¯ä»¥ä¸ç†ä¼šè¿è¡Œæ—¶å¼‚å¸¸ ã€‚<br>å¼‚å¸¸å¤„ç†çš„ç›®æ ‡ä¹‹ä¸€å°±æ˜¯ä¸ºäº†æŠŠç¨‹åºä»å¼‚å¸¸ä¸­æ¢å¤å‡ºæ¥ ã€‚</p><p>å¯¹äºCheckedå¼‚å¸¸çš„å¤„ç†æ–¹å¼æœ‰ä¸¤ç§ï¼š</p><p>ï¼ˆ1ï¼‰å½“å‰æ–¹æ³•æ˜ç¡®çŸ¥é“å¦‚ä½•å¤„ç†è¯¥å¼‚å¸¸ï¼Œç¨‹åºåº”è¯¥ä½¿ç”¨tryâ€¦catchå—æ¥æ•è·è¯¥å¼‚å¸¸ï¼Œç„¶ååœ¨å¯¹åº”çš„catchå—ä¸­ä¿®è¡¥è¯¥å¼‚å¸¸ã€‚</p><p>ï¼ˆ2ï¼‰å½“å‰æ–¹æ³•ä¸çŸ¥é“å¦‚ä½•å¤„ç†è¿™ç§å¼‚å¸¸ï¼Œåº”è¯¥åœ¨å®šä¹‰è¯¥æ–¹æ³•æ—¶å£°æ˜æŠ›å‡ºè¯¥å¼‚å¸¸ã€‚</p><h2 id="assert"><a class="header-anchor" href="#assert">#</a>assert</h2><p>åœ¨Javaä¸­ï¼Œassertå…³é”®å­—æ˜¯ä»JAVA SE 1.4 å¼•å…¥çš„ï¼Œä¸ºäº†é¿å…å’Œè€ç‰ˆæœ¬çš„Javaä»£ç ä¸­ä½¿ç”¨äº†assertå…³é”®å­—å¯¼è‡´é”™è¯¯ï¼ŒJavaåœ¨æ‰§è¡Œçš„æ—¶å€™é»˜è®¤æ˜¯ä¸å¯åŠ¨æ–­è¨€æ£€æŸ¥çš„ï¼ˆè¿™ä¸ªæ—¶å€™ï¼Œæ‰€æœ‰çš„æ–­è¨€è¯­å¥éƒ½å°†å¿½ç•¥ï¼ï¼‰ï¼Œå¦‚æœè¦å¼€å¯æ–­è¨€æ£€æŸ¥ï¼Œåˆ™éœ€è¦ç”¨å¼€å…³-enableassertionsæˆ–-eaæ¥å¼€å¯ã€‚</p><p>assertå…³é”®å­—è¯­æ³•å¾ˆç®€å•ï¼Œæœ‰ä¸¤ç§ç”¨æ³•ï¼š</p><p>1ã€assert &lt;booleanè¡¨è¾¾å¼&gt;<br>å¦‚æœ&lt;booleanè¡¨è¾¾å¼&gt;ä¸ºtrueï¼Œåˆ™ç¨‹åºç»§ç»­æ‰§è¡Œã€‚<br>å¦‚æœä¸ºfalseï¼Œåˆ™ç¨‹åºæŠ›å‡ºAssertionErrorï¼Œå¹¶ç»ˆæ­¢æ‰§è¡Œã€‚</p><p>2ã€assert &lt;booleanè¡¨è¾¾å¼&gt; : &lt;é”™è¯¯ä¿¡æ¯è¡¨è¾¾å¼&gt;<br>å¦‚æœ&lt;booleanè¡¨è¾¾å¼&gt;ä¸ºtrueï¼Œåˆ™ç¨‹åºç»§ç»­æ‰§è¡Œã€‚<br>å¦‚æœä¸ºfalseï¼Œåˆ™ç¨‹åºæŠ›å‡ºjava.lang.AssertionErrorï¼Œå¹¶è¾“å…¥&lt;é”™è¯¯ä¿¡æ¯è¡¨è¾¾å¼&gt;ã€‚</p><h3 id="é™·é˜±"><a class="header-anchor" href="#é™·é˜±">#</a>é™·é˜±</h3><p>assertå…³é”®å­—ç”¨æ³•ç®€å•ï¼Œä½†æ˜¯ä½¿ç”¨assertå¾€å¾€ä¼šè®©ä½ é™·å…¥è¶Šæ¥è¶Šæ·±çš„é™·é˜±ä¸­ã€‚åº”é¿å…ä½¿ç”¨ã€‚ç¬”è€…ç»è¿‡ç ”ç©¶ï¼Œæ€»ç»“äº†ä»¥ä¸‹åŸå› ï¼š</p><p>1ã€assertå…³é”®å­—éœ€è¦åœ¨è¿è¡Œæ—¶å€™æ˜¾å¼å¼€å¯æ‰èƒ½ç”Ÿæ•ˆï¼Œå¦åˆ™ä½ çš„æ–­è¨€å°±æ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚è€Œç°åœ¨ä¸»æµçš„Java IDEå·¥å…·é»˜è®¤éƒ½æ²¡æœ‰å¼€å¯-eaæ–­è¨€æ£€æŸ¥åŠŸèƒ½ã€‚è¿™å°±æ„å‘³ç€ä½ å¦‚æœä½¿ç”¨IDEå·¥å…·ç¼–ç ï¼Œè°ƒè¯•è¿è¡Œæ—¶å€™ä¼šæœ‰ä¸€å®šçš„éº»çƒ¦ã€‚å¹¶ä¸”ï¼Œå¯¹äºJava Webåº”ç”¨ï¼Œç¨‹åºä»£ç éƒ½æ˜¯éƒ¨ç½²åœ¨å®¹å™¨é‡Œé¢ï¼Œä½ æ²¡æ³•ç›´æ¥å»æ§åˆ¶ç¨‹åºçš„è¿è¡Œï¼Œå¦‚æœä¸€å®šè¦å¼€å¯-eaçš„å¼€å…³ï¼Œåˆ™éœ€è¦æ›´æ”¹Webå®¹å™¨çš„è¿è¡Œé…ç½®å‚æ•°ã€‚è¿™å¯¹ç¨‹åºçš„ç§»æ¤å’Œéƒ¨ç½²éƒ½å¸¦æ¥å¾ˆå¤§çš„ä¸ä¾¿ã€‚</p><p>2ã€ç”¨assertä»£æ›¿ifæ˜¯é™·é˜±ä¹‹äºŒã€‚assertçš„åˆ¤æ–­å’Œifè¯­å¥å·®ä¸å¤šï¼Œä½†ä¸¤è€…çš„ä½œç”¨æœ‰ç€æœ¬è´¨çš„åŒºåˆ«ï¼šassertå…³é”®å­—æœ¬æ„ä¸Šæ˜¯ä¸ºæµ‹è¯•è°ƒè¯•ç¨‹åºæ—¶ä½¿ç”¨çš„ï¼Œä½†å¦‚æœä¸å°å¿ƒç”¨assertæ¥æ§åˆ¶äº†ç¨‹åºçš„ä¸šåŠ¡æµç¨‹ï¼Œé‚£åœ¨æµ‹è¯•è°ƒè¯•ç»“æŸåå»æ‰assertå…³é”®å­—å°±æ„å‘³ç€ä¿®æ”¹äº†ç¨‹åºçš„æ­£å¸¸çš„é€»è¾‘ã€‚</p><p>3ã€assertæ–­è¨€å¤±è´¥å°†é¢ä¸´ç¨‹åºçš„é€€å‡ºã€‚è¿™åœ¨ä¸€ä¸ªç”Ÿäº§ç¯å¢ƒä¸‹çš„åº”ç”¨æ˜¯ç»ä¸èƒ½å®¹å¿çš„ã€‚ä¸€èˆ¬éƒ½æ˜¯é€šè¿‡å¼‚å¸¸å¤„ç†æ¥è§£å†³ç¨‹åºä¸­æ½œåœ¨çš„é”™è¯¯ã€‚ä½†æ˜¯ä½¿ç”¨æ–­è¨€å°±å¾ˆå±é™©ï¼Œä¸€æ—¦å¤±è´¥ç³»ç»Ÿå°±æŒ‚äº†ã€‚</p><h2 id="final"><a class="header-anchor" href="#final">#</a>final</h2><p>finalå…³é”®å­—å¯ä»¥ç”¨æ¥ä¿®é¥°å¼•ç”¨ã€æ–¹æ³•å’Œç±»ã€‚</p><ol><li>ç”¨æ¥ä¿®é¥°ä¸€ä¸ªå¼•ç”¨<br>å¦‚æœå¼•ç”¨ä¸ºåŸºæœ¬æ•°æ®ç±»å‹ï¼Œåˆ™è¯¥å¼•ç”¨ä¸ºå¸¸é‡ï¼Œè¯¥å€¼æ— æ³•ä¿®æ”¹ï¼›<br>å¦‚æœå¼•ç”¨ä¸ºå¼•ç”¨æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚å¯¹è±¡ã€æ•°ç»„ï¼Œåˆ™è¯¥å¯¹è±¡ã€æ•°ç»„æœ¬èº«å¯ä»¥ä¿®æ”¹ï¼Œä½†æŒ‡å‘è¯¥å¯¹è±¡æˆ–æ•°ç»„çš„åœ°å€çš„å¼•ç”¨ä¸èƒ½ä¿®æ”¹ã€‚<br>å¦‚æœå¼•ç”¨æ—¶ç±»çš„æˆå‘˜å˜é‡ï¼Œåˆ™å¿…é¡»å½“åœºèµ‹å€¼ï¼Œå¦åˆ™ç¼–è¯‘ä¼šæŠ¥é”™ã€‚</li><li>ç”¨æ¥ä¿®é¥°ä¸€ä¸ªæ–¹æ³•<br>å½“ä½¿ç”¨finalä¿®é¥°æ–¹æ³•æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•å°†æˆä¸ºæœ€ç»ˆæ–¹æ³•ï¼Œæ— æ³•è¢«å­ç±»é‡å†™ã€‚ä½†æ˜¯ï¼Œè¯¥æ–¹æ³•ä»ç„¶å¯ä»¥è¢«ç»§æ‰¿ã€‚</li><li>ç”¨æ¥ä¿®é¥°ç±»<br>å½“ç”¨finalä¿®æ”¹ç±»æ—¶ï¼Œè¯¥ç±»æˆä¸ºæœ€ç»ˆç±»ï¼Œæ— æ³•è¢«ç»§æ‰¿ã€‚ç®€ç§°ä¸ºâ€œæ–­å­ç»å­™ç±»â€ã€‚</li></ol><h2 id="volatile"><a class="header-anchor" href="#volatile">#</a>volatile</h2><p>Javaå†…å­˜æ¨¡å‹è§„å®šæ‰€æœ‰çš„å˜é‡éƒ½æ˜¯å­˜åœ¨ä¸»å­˜å½“ä¸­ï¼ˆç±»ä¼¼äºå‰é¢è¯´çš„ç‰©ç†å†…å­˜ï¼‰ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½æœ‰è‡ªå·±çš„å·¥ä½œå†…å­˜ï¼ˆç±»ä¼¼äºå‰é¢çš„é«˜é€Ÿç¼“å­˜ï¼‰ã€‚çº¿ç¨‹å¯¹å˜é‡çš„æ‰€æœ‰æ“ä½œéƒ½å¿…é¡»åœ¨å·¥ä½œå†…å­˜ä¸­è¿›è¡Œï¼Œè€Œä¸èƒ½ç›´æ¥å¯¹ä¸»å­˜è¿›è¡Œæ“ä½œã€‚å¹¶ä¸”æ¯ä¸ªçº¿ç¨‹ä¸èƒ½è®¿é—®å…¶ä»–çº¿ç¨‹çš„å·¥ä½œå†…å­˜ã€‚<br>ç”±äºjavaä¸­çš„æ¯ä¸ªçº¿ç¨‹æœ‰è‡ªå·±çš„å·¥ä½œç©ºé—´ï¼Œè¿™ç§å·¥ä½œç©ºé—´ç›¸å½“äºä¸Šé¢æ‰€è¯´çš„é«˜é€Ÿç¼“å­˜ï¼Œå› æ­¤å¤šä¸ªçº¿ç¨‹åœ¨å¤„ç†ä¸€ä¸ªå…±äº«å˜é‡çš„æ—¶å€™ï¼Œå°±ä¼šå‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</p><p>1ï¼‰ä¿è¯äº†ä¸åŒçº¿ç¨‹å¯¹è¿™ä¸ªå˜é‡è¿›è¡Œæ“ä½œæ—¶çš„å¯è§æ€§ï¼Œå³ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†æŸä¸ªå˜é‡çš„å€¼ï¼Œè¿™æ–°å€¼å¯¹å…¶ä»–çº¿ç¨‹æ¥è¯´æ˜¯ç«‹å³å¯è§çš„ã€‚<br>2ï¼‰ç¦æ­¢è¿›è¡ŒæŒ‡ä»¤é‡æ’åºã€‚</p><h2 id="è§£å†³å“ˆå¸Œå†²çªçš„å››ç§æ–¹æ³•"><a class="header-anchor" href="#è§£å†³å“ˆå¸Œå†²çªçš„å››ç§æ–¹æ³•">#</a>è§£å†³å“ˆå¸Œå†²çªçš„å››ç§æ–¹æ³•</h2><p>1.å¼€æ”¾åœ°å€æ–¹æ³•</p><p>ï¼ˆ1ï¼‰çº¿æ€§æ¢æµ‹</p><p>æŒ‰é¡ºåºå†³å®šå€¼æ—¶ï¼Œå¦‚æœæŸæ•°æ®çš„å€¼å·²ç»å­˜åœ¨ï¼Œåˆ™åœ¨åŸæ¥å€¼çš„åŸºç¡€ä¸Šå¾€ååŠ ä¸€ä¸ªå•ä½ï¼Œç›´è‡³ä¸å‘ç”Ÿå“ˆå¸Œå†²çªã€‚</p><p>ï¼ˆ2ï¼‰å†å¹³æ–¹æ¢æµ‹</p><p>æŒ‰é¡ºåºå†³å®šå€¼æ—¶ï¼Œå¦‚æœæŸæ•°æ®çš„å€¼å·²ç»å­˜åœ¨ï¼Œåˆ™åœ¨åŸæ¥å€¼çš„åŸºç¡€ä¸Šå…ˆåŠ 1çš„å¹³æ–¹ä¸ªå•ä½ï¼Œè‹¥ä»ç„¶å­˜åœ¨åˆ™å‡1çš„å¹³æ–¹ä¸ªå•ä½ã€‚éšä¹‹æ˜¯2çš„å¹³æ–¹ï¼Œ3çš„å¹³æ–¹ç­‰ç­‰ã€‚ç›´è‡³ä¸å‘ç”Ÿå“ˆå¸Œå†²çªã€‚</p><p>ï¼ˆ3ï¼‰ä¼ªéšæœºæ¢æµ‹</p><p>æŒ‰é¡ºåºå†³å®šå€¼æ—¶ï¼Œå¦‚æœæŸæ•°æ®å·²ç»å­˜åœ¨ï¼Œé€šè¿‡éšæœºå‡½æ•°éšæœºç”Ÿæˆä¸€ä¸ªæ•°ï¼Œåœ¨åŸæ¥å€¼çš„åŸºç¡€ä¸ŠåŠ ä¸Šéšæœºæ•°ï¼Œç›´è‡³ä¸å‘ç”Ÿå“ˆå¸Œå†²çªã€‚</p><p>2.é“¾å¼åœ°å€æ³•ï¼ˆHashMapçš„å“ˆå¸Œå†²çªè§£å†³æ–¹æ³•ï¼‰</p><p>å¯¹äºç›¸åŒçš„å€¼ï¼Œä½¿ç”¨é“¾è¡¨è¿›è¡Œè¿æ¥ã€‚ä½¿ç”¨æ•°ç»„å­˜å‚¨æ¯ä¸€ä¸ªé“¾è¡¨ã€‚</p><p>ä¼˜ç‚¹ï¼š</p><p>ï¼ˆ1ï¼‰æ‹‰é“¾æ³•å¤„ç†å†²çªç®€å•ï¼Œä¸”æ— å †ç§¯ç°è±¡ï¼Œå³éåŒä¹‰è¯å†³ä¸ä¼šå‘ç”Ÿå†²çªï¼Œå› æ­¤å¹³å‡æŸ¥æ‰¾é•¿åº¦è¾ƒçŸ­ï¼›</p><p>ï¼ˆ2ï¼‰ç”±äºæ‹‰é“¾æ³•ä¸­å„é“¾è¡¨ä¸Šçš„ç»“ç‚¹ç©ºé—´æ˜¯åŠ¨æ€ç”³è¯·çš„ï¼Œæ•…å®ƒæ›´é€‚åˆäºé€ è¡¨å‰æ— æ³•ç¡®å®šè¡¨é•¿çš„æƒ…å†µï¼›</p><p>ï¼ˆ3ï¼‰å¼€æ”¾å®šå€æ³•ä¸ºå‡å°‘å†²çªï¼Œè¦æ±‚è£…å¡«å› å­Î±è¾ƒå°ï¼Œæ•…å½“ç»“ç‚¹è§„æ¨¡è¾ƒå¤§æ—¶ä¼šæµªè´¹å¾ˆå¤šç©ºé—´ã€‚è€Œæ‹‰é“¾æ³•ä¸­å¯å–Î±â‰¥1ï¼Œä¸”ç»“ç‚¹è¾ƒå¤§æ—¶ï¼Œæ‹‰é“¾æ³•ä¸­å¢åŠ çš„æŒ‡é’ˆåŸŸå¯å¿½ç•¥ä¸è®¡ï¼Œå› æ­¤èŠ‚çœç©ºé—´ï¼›</p><p>ï¼ˆ4ï¼‰åœ¨ç”¨æ‹‰é“¾æ³•æ„é€ çš„æ•£åˆ—è¡¨ä¸­ï¼Œåˆ é™¤ç»“ç‚¹çš„æ“ä½œæ˜“äºå®ç°ã€‚åªè¦ç®€å•åœ°åˆ å»é“¾è¡¨ä¸Šç›¸åº”çš„ç»“ç‚¹å³å¯ã€‚<br>ã€€ã€€ç¼ºç‚¹ï¼š</p><p>æŒ‡é’ˆå ç”¨è¾ƒå¤§ç©ºé—´æ—¶ï¼Œä¼šé€ æˆç©ºé—´æµªè´¹ï¼Œè‹¥ç©ºé—´ç”¨äºå¢å¤§æ•£åˆ—è¡¨è§„æ¨¡è¿›è€Œæé«˜å¼€æ”¾åœ°å€æ³•çš„æ•ˆç‡ã€‚</p><p>3.å»ºç«‹å…¬å…±æº¢å‡ºåŒº</p><p>å»ºç«‹å…¬å…±æº¢å‡ºåŒºå­˜å‚¨æ‰€æœ‰å“ˆå¸Œå†²çªçš„æ•°æ®ã€‚</p><p>4.å†å“ˆå¸Œæ³•</p><p>å¯¹äºå†²çªçš„å“ˆå¸Œå€¼å†æ¬¡è¿›è¡Œå“ˆå¸Œå¤„ç†ï¼Œç›´è‡³æ²¡æœ‰å“ˆå¸Œå†²çªã€‚</p><h2 id="å‚è€ƒé“¾æ¥"><a class="header-anchor" href="#å‚è€ƒé“¾æ¥">#</a>å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://blog.csdn.net/greentealc/article/details/79880220" target="_blank" rel="noopener">å…³äº TCPï¼ŒUDPï¼Œé’ˆå¯¹é¢è¯•ã€‚è¶…è¯¦ç»†</a></li><li><a href="https://www.jianshu.com/p/deee6abf0b72" target="_blank" rel="noopener">é¢è¯•å¸¸é—®ä¹‹ TCP ä¸ UDP</a></li><li><a href="https://www.cnblogs.com/lgk8023/p/6430592.html" target="_blank" rel="noopener">Java åŸºç¡€é¢è¯•é¢˜ï¼ˆè¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«ï¼‰</a></li><li><a href="https://blog.csdn.net/daaikuaichuan/article/details/82951084" target="_blank" rel="noopener">è¿›ç¨‹ã€çº¿ç¨‹å’Œåç¨‹ä¹‹é—´çš„åŒºåˆ«å’Œè”ç³»</a></li><li><a href="https://www.cnblogs.com/jobbible/p/9766649.html" target="_blank" rel="noopener">æ¯ä¸ªç¨‹åºå‘˜éƒ½ä¼šé‡åˆ°çš„é¢è¯•é—®é¢˜ï¼šè°ˆè°ˆè¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«</a></li><li><a href="https://www.jianshu.com/p/e136ec79235c" target="_blank" rel="noopener">30 å¼ å›¾å¸¦ä½ å½»åº•ç†è§£çº¢é»‘æ ‘</a></li><li><a href="https://www.cnblogs.com/ryxiong-blog/p/10892010.html" target="_blank" rel="noopener">è¿›ç¨‹ï¼ˆçº¿ç¨‹ï¼‰æ­»é”è¯¦è§£</a></li><li><a href="https://www.runoob.com/http/http-intro.html" target="_blank" rel="noopener">HTTP ç®€ä»‹</a></li><li><a href="https://segmentfault.com/a/1190000016656529?utm_source=tag-newest" target="_blank" rel="noopener">ã€å¿«é€Ÿå…¥é—¨ç³»åˆ—ã€‘ä¸€ç¯‡æ–‡ç« è®©ä½ å…¥é—¨ HTTP2.0</a></li><li><a href="https://blog.csdn.net/qq_33591903/article/details/81672260" target="_blank" rel="noopener">ã€æ•°æ®åº“ã€‘å¿«é€Ÿç†è§£è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»</a></li><li><a href="https://blog.csdn.net/qq_33591903/article/details/82079302" target="_blank" rel="noopener">ã€æ•°æ®åº“ã€‘äº‹åŠ¡éš”ç¦»çº§åˆ«</a></li><li><a href="http://www.hollischuang.com/archives/898" target="_blank" rel="noopener">å½»åº•ç†è§£æ•°æ®åº“äº‹åŠ¡</a></li><li><a href="https://www.jianshu.com/p/71700a464e97" target="_blank" rel="noopener">B+æ ‘æ€»ç»“</a></li><li><a href="https://www.cnblogs.com/zsc1/p/9230096.html" target="_blank" rel="noopener">æ•°æ®åº“ç´¢å¼•</a></li><li><a href="https://zhuanlan.zhihu.com/p/107125866" target="_blank" rel="noopener">MySQL çš„è¦†ç›–ç´¢å¼•ä¸å›è¡¨</a></li><li><a href="https://www.zhihu.com/question/20596402" target="_blank" rel="noopener">Mysql ä¸­ MyISAM å’Œ InnoDB çš„åŒºåˆ«æœ‰å“ªäº›ï¼Ÿ</a></li><li><a href="https://www.jianshu.com/p/907f9002442e" target="_blank" rel="noopener">ä¸€æ–‡å¸¦ä½ çœ‹æ‡‚ binlog å’Œ redo log</a></li><li><a href="https://www.jianshu.com/p/ebdf0eb76088" target="_blank" rel="noopener">ClassLoader æ€»ç»“</a></li><li><a href="https://www.jianshu.com/p/6ec45a6da9ba" target="_blank" rel="noopener">Java åŸºç¡€-æ³›å‹çš„ä½¿ç”¨åŠæ³›å‹å®ç°åŸç†</a></li><li><a href="https://blog.csdn.net/wteruiycbqqvwt/article/details/90299610" target="_blank" rel="noopener">æ·±å…¥ç†è§£ selectã€poll å’Œ epoll åŠåŒºåˆ«</a></li><li><a href="https://blog.csdn.net/rongtaoup/article/details/90723680" target="_blank" rel="noopener">ä¸€æ–‡ææ‡‚ JVM åƒåœ¾æ”¶é›†</a></li><li><a href="https://blog.csdn.net/ln152315/article/details/79223441" target="_blank" rel="noopener">é¢è¯•å®˜ï¼šè¯·ä½ è°ˆè°ˆ Java çš„ç±»åŠ è½½è¿‡ç¨‹</a></li><li><a href="https://blog.csdn.net/azsx02/article/details/69387317" target="_blank" rel="noopener">æ•°æ®é“¾è·¯å±‚çš„ä¸‰ä¸ªåŸºæœ¬é—®é¢˜ï¼šå°è£…æˆå¸§ é€æ˜ä¼ è¾“ å·®é”™æ£€æµ‹</a></li><li><a href="https://blog.csdn.net/sjmz30071360/article/details/80016972" target="_blank" rel="noopener">Javaä¸­çš„Errorå’ŒExceptionã€ä¸€ç¯‡å°±å¤Ÿã€‘</a></li><li><a href="https://blog.csdn.net/m0_37602175/article/details/80271647" target="_blank" rel="noopener">Exceptionå’ŒErrorçš„åŒºåˆ«</a></li><li><a href="https://blog.51cto.com/lavasoft/43735" target="_blank" rel="noopener">Javaé™·é˜±ä¹‹assertå…³é”®å­—</a></li><li><a href="https://www.cnblogs.com/chhyan-dream/p/10685878.html" target="_blank" rel="noopener">JAVAä¸­finalå…³é”®å­—çš„ä½œç”¨</a></li><li><a href="https://www.cnblogs.com/dolphin0520/p/3920373.html" target="_blank" rel="noopener">Javaå¹¶å‘ç¼–ç¨‹ï¼švolatileå…³é”®å­—è§£æ</a></li><li><a href="https://www.cnblogs.com/kubidemanong/p/9505944.html" target="_blank" rel="noopener">çº¿ç¨‹å®‰å…¨(ä¸Š)â€“å½»åº•ææ‡‚volatileå…³é”®å­—</a></li><li><a href="https://www.cnblogs.com/higerMan/p/11907117.html" target="_blank" rel="noopener">å“ˆå¸Œå†²çªåŠå››ç§è§£å†³æ–¹æ³•</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> jobs </category>
          
      </categories>
      
      
        <tags>
            
            <tag> review </tag>
            
            <tag> interview </tag>
            
            <tag> tcp </tag>
            
            <tag> udp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexoæ’ä»¶æµ‹è¯•é¡µé¢</title>
      <link href="/blog/2020/06/15/hexo-plugin-test/"/>
      <url>/blog/2020/06/15/hexo-plugin-test/</url>
      
        <content type="html"><![CDATA[<p>æ–°ç¯å¢ƒæ€»æ‹…å¿ƒæ—§åšæ–‡çš„æ’ä»¶ä¼šå‡ºé—®é¢˜ï¼Œè¿™ä¸ªé¡µé¢é‡Œçš„æ’ä»¶å¦‚æœæ²¡é—®é¢˜çš„è¯ï¼Œå…¶å®ƒçš„ä¹Ÿåº”è¯¥æ²¡é—®é¢˜ã€‚</p><a id="more"></a><h2 id="flowchart"><a class="header-anchor" href="#flowchart">#</a><a href="https://github.com/bubkoo/hexo-filter-flowchart" target="_blank" rel="noopener">flowchart</a></h2><h3 id="å®‰è£…æ–¹æ³•"><a class="header-anchor" href="#å®‰è£…æ–¹æ³•">#</a>å®‰è£…æ–¹æ³•</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i hexo-filter-flowchart --save</span><br></pre></td></tr></table></figure><h3 id="å‚æ•°é…ç½®"><a class="header-anchor" href="#å‚æ•°é…ç½®">#</a>å‚æ•°é…ç½®</h3><p>åœ¨ <code>_config.yml</code> ä¸­ã€‚</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">flowchart:</span></span><br><span class="line">  <span class="attr">raphael:</span> <span class="string">//cdnjs.cloudflare.com/ajax/libs/raphael/2.3.0/raphael.min.js</span></span><br><span class="line">  <span class="attr">flowchart:</span> <span class="string">//flowchart.js.org/flowchart-latest.js</span></span><br></pre></td></tr></table></figure><h3 id="æ•ˆæœå±•ç¤º"><a class="header-anchor" href="#æ•ˆæœå±•ç¤º">#</a>æ•ˆæœå±•ç¤º</h3><center><div id="flowchart-0" class="flow-chart"></div><p>å›¾ 1 ç¨‹åºæµç¨‹å›¾</p></center><h2 id="sub-sup-footnote-ins"><a class="header-anchor" href="#sub-sup-footnote-ins">#</a><a href="https://github.com/hexojs/hexo-renderer-markdown-it" target="_blank" rel="noopener">sub,sup,footnote,ins</a></h2><h3 id="å®‰è£…æ–¹æ³•-2"><a class="header-anchor" href="#å®‰è£…æ–¹æ³•-2">#</a>å®‰è£…æ–¹æ³•</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i hexo-renderer-markdown-it --save</span><br></pre></td></tr></table></figure><h3 id="å‚æ•°é…ç½®-2"><a class="header-anchor" href="#å‚æ•°é…ç½®-2">#</a>å‚æ•°é…ç½®</h3><p>åœ¨ <code>_config.yml</code> ä¸­ã€‚</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">markdown:</span></span><br><span class="line">  <span class="attr">render:</span></span><br><span class="line">    <span class="attr">html:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">xhtmlOut:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">breaks:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">linkify:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">typographer:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">quotes:</span> <span class="string">"â€œâ€â€˜â€™"</span></span><br><span class="line">  <span class="attr">plugins:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">markdown-it-abbr</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">markdown-it-footnote</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">markdown-it-ins</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">markdown-it-sub</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">markdown-it-sup</span></span><br><span class="line">  <span class="attr">anchors:</span></span><br><span class="line">    <span class="attr">level:</span> <span class="number">2</span></span><br><span class="line">    <span class="attr">collisionSuffix:</span> <span class="string">""</span></span><br><span class="line">    <span class="attr">permalink:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">permalinkClass:</span> <span class="string">header-anchor</span></span><br><span class="line">    <span class="attr">permalinkSide:</span> <span class="string">"right"</span></span><br><span class="line">    <span class="attr">permalinkSymbol:</span> <span class="string">Â¶</span></span><br><span class="line">    <span class="attr">case:</span> <span class="number">1</span></span><br><span class="line">    <span class="attr">separator:</span> <span class="string">"-"</span></span><br></pre></td></tr></table></figure><h3 id="æ•ˆæœå±•ç¤º-2"><a class="header-anchor" href="#æ•ˆæœå±•ç¤º-2">#</a>æ•ˆæœå±•ç¤º</h3><h4 id="sub"><a class="header-anchor" href="#sub">#</a>sub</h4><p>H<sub>2</sub>O</p><h4 id="sup"><a class="header-anchor" href="#sup">#</a>sup</h4><p>x<sup>2</sup>y<sup>2</sup></p><h4 id="footnote"><a class="header-anchor" href="#footnote">#</a>footnote</h4><p>è¿™æ˜¯ä¸€æ®µæ­£æ–‡<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p><h4 id="ins"><a class="header-anchor" href="#ins">#</a>ins</h4><p><ins>inserted</ins></p><h2 id="pdf"><a class="header-anchor" href="#pdf">#</a><a href="https://github.com/superalsrk/hexo-pdf" target="_blank" rel="noopener">pdf</a></h2><h3 id="å®‰è£…æ–¹æ³•-3"><a class="header-anchor" href="#å®‰è£…æ–¹æ³•-3">#</a>å®‰è£…æ–¹æ³•</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i hexo-pdf --save</span><br></pre></td></tr></table></figure><h3 id="æ•ˆæœå±•ç¤º-3"><a class="header-anchor" href="#æ•ˆæœå±•ç¤º-3">#</a>æ•ˆæœå±•ç¤º</h3><div class="row">    <embed src="//onns.xyz/blog/files/sign-recognition-lab-report.pdf" width="100%" height="550" type="application/pdf"></div><h2 id="math"><a class="header-anchor" href="#math">#</a><a href="https://github.com/hexojs/hexo-math" target="_blank" rel="noopener">math</a></h2><h3 id="å®‰è£…æ–¹æ³•-4"><a class="header-anchor" href="#å®‰è£…æ–¹æ³•-4">#</a>å®‰è£…æ–¹æ³•</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i hexo-math --save</span><br></pre></td></tr></table></figure><h3 id="å‚æ•°é…ç½®-3"><a class="header-anchor" href="#å‚æ•°é…ç½®-3">#</a>å‚æ•°é…ç½®</h3><p>åœ¨ <code>_config.yml</code> ä¸­ã€‚</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">math:</span></span><br><span class="line">  <span class="attr">engine:</span> <span class="string">"mathjax"</span> <span class="comment"># or 'katex'</span></span><br><span class="line">  <span class="attr">mathjax:</span></span><br><span class="line">    <span class="attr">src:</span> <span class="string">custom_mathjax_source</span></span><br><span class="line">    <span class="attr">config:</span></span><br><span class="line">      <span class="comment"># MathJax config</span></span><br><span class="line">  <span class="attr">katex:</span></span><br><span class="line">    <span class="attr">css:</span> <span class="string">custom_css_source</span></span><br><span class="line">    <span class="attr">js:</span> <span class="string">custom_js_source</span> <span class="comment"># not used</span></span><br><span class="line">    <span class="attr">config:</span></span><br><span class="line">      <span class="comment"># KaTeX config</span></span><br></pre></td></tr></table></figure><h3 id="æ•ˆæœå±•ç¤º-4"><a class="header-anchor" href="#æ•ˆæœå±•ç¤º-4">#</a>æ•ˆæœå±•ç¤º</h3>$$\begin{aligned}\dot{x} & = \sigma(y-x) \\\dot{y} & = \rho x - y - xz \\\dot{z} & = -\beta z + xy\end{aligned}$$<h2 id="math-2"><a class="header-anchor" href="#math-2">#</a><a href="https://github.com/hexojs/hexo-math" target="_blank" rel="noopener">math</a></h2><h3 id="å®‰è£…æ–¹æ³•-5"><a class="header-anchor" href="#å®‰è£…æ–¹æ³•-5">#</a>å®‰è£…æ–¹æ³•</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i hexo-math --save</span><br></pre></td></tr></table></figure><h3 id="æ•ˆæœå±•ç¤º-5"><a class="header-anchor" href="#æ•ˆæœå±•ç¤º-5">#</a>æ•ˆæœå±•ç¤º</h3><div id="graphviz-0"></div><h2 id="markdown-æ¸²æŸ“"><a class="header-anchor" href="#markdown-æ¸²æŸ“">#</a>markdown æ¸²æŸ“</h2><h3 id="æœ‰åºåˆ—è¡¨"><a class="header-anchor" href="#æœ‰åºåˆ—è¡¨">#</a>æœ‰åºåˆ—è¡¨</h3><ul><li>1<ul><li>1.1<ul><li>1.1.1</li></ul></li></ul></li><li>2</li><li>3</li><li>4</li></ul><h3 id="æ— åºåˆ—è¡¨"><a class="header-anchor" href="#æ— åºåˆ—è¡¨">#</a>æ— åºåˆ—è¡¨</h3><ol><li>1<ol><li>1.1<ol><li>1.1.1</li></ol></li></ol></li><li>2</li><li>3</li><li>4</li></ol><script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.3.0/raphael.min.js"></script><script src="//flowchart.js.org/flowchart-latest.js"></script><textarea id="flowchart-0-code" style="display: none">st=>start: ç¡®å®šåˆå§‹çŠ¶æ€(10, 0, 0), åŠ å…¥é˜Ÿåˆ—e1=>end: æœªæ‰¾åˆ°ç›®æ ‡çŠ¶æ€e2=>end: è¾¾åˆ°ç›®æ ‡çŠ¶æ€(5, 5, 0)op1=>operation: å–å‡ºé˜Ÿåˆ—å¤´éƒ¨ä¸­çš„ç¬¬ä¸€ä¸ªçŠ¶æ€cond1=>condition: æ­¤çŠ¶æ€æ˜¯å¦ä¸ºç©º?cond2=>condition: æ˜¯å¦ä¸ºç›®æ ‡çŠ¶æ€?op2=>operation: å°†æ‰€æœ‰å¯èƒ½ä¸‹ä¸€æ­¥çŠ¶æ€åŠ å…¥é˜Ÿåˆ—å°¾éƒ¨st->op1->cond1cond1(yes)->e1cond1(no)->cond2cond2(yes)->e2cond2(no)->op2op2->op1</textarea><textarea id="flowchart-0-options" style="display: none">{"scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12}</textarea><script>  var code = document.getElementById("flowchart-0-code").value;  var options = JSON.parse(decodeURIComponent(document.getElementById("flowchart-0-options").value));  var diagram = flowchart.parse(code);  diagram.drawSVG("flowchart-0", options);</script><script src="https://unpkg.com/viz.js@2.1.2/viz.js"></script><script src="https://unpkg.com/viz.js@2.1.2/full.render.js"></script><textarea id="graphviz-0-code" style="display: none">digraph G {  "(10,0,0)" -> "(3,7,0)"[color=red,label="1"]  "(10,0,0)" -> "(7,0,3)"[label="2"]  "(3,7,0)" -> "(0,7,3)"[label="2"]  "(3,7,0)" -> "(3,4,3)"[color=red,label="4"]  "(7,0,3)" -> "(7,3,0)"[label="12"]  "(3,4,3)" -> "(6,4,0)"[color=red,label="11"]  "(7,3,0)" -> "(4,3,3)"[label="2"]  "(6,4,0)" -> "(6,1,3)"[color=red,label="4"]  "(4,3,3)" -> "(4,6,0)"[label="12"]  "(6,1,3)" -> "(9,1,0)"[color=red,label="11"]  "(4,6,0)" -> "(1,6,3)"[label="2"]  "(9,1,0)" -> "(9,0,1)"[color=red,label="10"]  "(1,6,3)" -> "(1,7,2)"[label="6"]  "(9,0,1)" -> "(2,7,1)"[color=red,label="1"]  "(1,7,2)" -> "(8,0,2)"[label="9"]  "(2,7,1)" -> "(2,5,3)"[color=red,label="4"]  "(8,0,2)" -> "(8,2,0)"[label="12"]  "(2,5,3)" -> "(5,5,0)"[color=red,label="11"]  "(8,2,0)" -> "(5,2,3)"[label="2"]}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-0-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-0").append(element)  });</script><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>è¿™æ˜¯è„šæ³¨ <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> html </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> hexo plugin </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¿®å¤MacOSä¸Šcrontabçš„Operation not permittedé—®é¢˜</title>
      <link href="/blog/2020/06/10/fix-crontab-operation-not-permitted-on-mac/"/>
      <url>/blog/2020/06/10/fix-crontab-operation-not-permitted-on-mac/</url>
      
        <content type="html"><![CDATA[<p>å› ä¸ºé¡¹ç›®éœ€è¦Xcodeï¼Œä½†æ˜¯Xcodeåˆå¿…é¡»è¦åœ¨<code>10.15</code>ä»¥ä¸Šçš„ç³»ç»Ÿä¸‹è¿è¡Œï¼Œä¸å¾—å·²æ›´æ–°äº†ç³»ç»Ÿï¼Œç„¶è€Œæ›´æ–°ä¸€æ—¶çˆ½ï¼Œbugä¿®å¤***ã€‚çœŸçš„æ˜¯å‡ºç°äº†å„ç§é—®é¢˜ï¼Œæ²¡åŠæ³•ï¼ŒæŒ¨ä¸ªè§£å†³å­â€¦</p><a id="more"></a><h2 id="èµ·å› "><a class="header-anchor" href="#èµ·å› ">#</a>èµ·å› </h2><p>ä¸ºäº†æ–¹ä¾¿ç”µè„‘è‡ªåŠ¨åŒ–æ•´ç†æ–‡æ¡£ï¼Œæˆ‘çš„ç”µè„‘ä¸Šä¸€ç›´è¿è¡Œç€ä¸€å †å®šæ—¶çš„è„šæœ¬ï¼Œç”¨æ¥éš”ä¸€æ®µæ—¶é—´å°†æˆªå›¾æ•´ç†åˆ°<code>å›¾ç‰‡</code>æ–‡ä»¶å¤¹ã€‚æœ‰äººè¿™é‡Œå¯èƒ½ä¼šé—®ï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥æŠŠæˆªå›¾ç›®å½•è®¾ç½®æˆ<code>Pictures</code>ç›®å½•ï¼Œå› ä¸ºæˆªå›¾åœ¨æ¡Œé¢ç”¨èµ·æ¥æ›´æ–¹ä¾¿è¯¶ï¼Œæ¯•ç«Ÿæˆªå›¾å°±æ˜¯ä¸ºäº†å‘å‡ºå»æˆ–è€…åšä»€ä¹ˆçš„ä¸æ˜¯ã€‚</p><p>ä½†ç”¨å®Œæ‰€æœ‰æˆªå›¾éƒ½åœ¨æ¡Œé¢çœŸçš„å¥½ä¹±ã€‚</p><p>æ‰€ä»¥æˆ‘ä¹‹å‰ç‰ˆæœ¬çš„å®šæ—¶è„šæœ¬éƒ½æ˜¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ crontab -l</span><br><span class="line">30 */1 * * * bash /Users/onns/Documents/code/bash/clear </span><br><span class="line">0 22 * * * bash /Users/onns/Documents/code/bash/backup</span><br></pre></td></tr></table></figure><p>åœ¨æ›´æ–°ç³»ç»Ÿä¹‹å‰ä¸€ç›´éƒ½å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œä½†æ›´æ–°äº†ä¹‹å</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">You have new mail.</span><br><span class="line">$ cat /var/mail/onns</span><br><span class="line">...</span><br><span class="line">bash: /Users/onns/Documents/code/bash/clear: Operation not permitted</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªçš„åŸå› å°±æ˜¯è‹¹æœæ›´æ–°äº†<code>System Integrity Protection</code>åŠŸèƒ½ï¼Œå…·ä½“çš„å¯ä»¥å»çœ‹å®˜æ–¹çš„å…¬å‘Šï¼š<a href="https://support.apple.com/en-us/HT204899" target="_blank" rel="noopener">About System Integrity Protection on your Mac</a>ï¼Œæ‰€ä»¥æœ€ç®€å•ç²—æš´çš„è§£å†³æ–¹æ¡ˆå°±æ˜¯å…³é—­<code>SIP</code>ã€‚</p><p>ä½†æˆ‘è§‰å¾—ï¼Œè‹¹æœæ—¢ç„¶å‡ºäºå®‰å…¨è€ƒè™‘æ¨å‡ºäº†è¿™æ ·ä¸€ä¸ªåŠŸèƒ½ï¼Œé‚£å°±å°½é‡éµä»è‹¹æœçš„æ€è·¯æ¥ï¼Œæ¯•ç«Ÿä½ åé¢è¿˜è¦æ›´æ–°ç³»ç»Ÿï¼Œéš¾é“æ¯æ¬¡éƒ½å…³ä¸€æ¬¡ï¼Ÿä½•å†µå…³èµ·æ¥è¿˜æŒºéº»çƒ¦çš„ã€‚ã€‚ã€‚ä¹Ÿä¸å®‰å…¨ã€‚</p><p>åŒæ—¶ä½ ä¼šç•™æ„åˆ°ï¼Œ<code>ç³»ç»Ÿå®‰å…¨éšç§</code>é‡Œå¢åŠ äº†ä¸€é¡¹æƒé™åˆ’åˆ†<code>Full Disk Access</code>ï¼Œå¤§æ¦‚ä¹Ÿæ˜¯å‡ºäºå®‰å…¨è€ƒè™‘å§ã€‚</p><center><p><img src="//onns.xyz/blog/image/20200610-1.png" alt="Full Disk Accessé¡µé¢"></p></center><p>è¿™æ˜¯æˆ‘ä¿®å¤bugä¹‹åçš„æˆªå›¾äº†ï¼Œæœ€å¼€å§‹çš„æ—¶å€™è¿™é‡Œé¢ä»€ä¹ˆéƒ½æ²¡æœ‰ã€‚</p><p>è¿˜æœ‰å°±æ˜¯ï¼Œæ‰“å¼€<code>Terminal</code>çš„æ—¶å€™ï¼Œä¼šå¼¹å‡ºä¸‹åˆ—ä¿¡æ¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">The default interactive shell is now zsh.</span><br><span class="line">To update your account to use zsh, please run `chsh -s /bin/zsh`.</span><br><span class="line">For more details, please visit https://support.apple.com/kb/HT208050.</span><br></pre></td></tr></table></figure><p>è¯¦ç»†å¯ä»¥å»å®˜ç½‘çœ‹ï¼š<a href="https://support.apple.com/en-us/HT208050" target="_blank" rel="noopener">Use zsh as the default shell on your Mac</a></p><p>æ‰€ä»¥æ€»ç»“æ¥è¯´ï¼Œå®šæ—¶è„šæœ¬å‡ºé”™çš„åŸå› æœ‰ä¸¤ç‚¹ï¼š</p><ol><li>è‹¹æœæ›´æ”¹äº†é»˜è®¤çš„shellå·¥å…·</li><li>shellå·¥å…·çš„æƒé™ä¸å¤Ÿ</li><li>crontabçš„æƒé™ä¸å¤Ÿï¼ˆè‡ªæˆ‘çŒœæµ‹ï¼Œä¸çŸ¥é“è¿™ç‚¹æ˜¯ä¸æ˜¯å½±å“å› ç´ ï¼‰</li></ol><h2 id="è§£å†³"><a class="header-anchor" href="#è§£å†³">#</a>è§£å†³</h2><h3 id="æ›´æ”¹shell"><a class="header-anchor" href="#æ›´æ”¹shell">#</a>æ›´æ”¹shell</h3><p>è¿™ä¸€ç‚¹å¾ˆå¥½æ“ä½œï¼Œé¦–å…ˆå…ˆå°†<code>zsh</code>ä½œä¸ºé»˜è®¤çš„shellå·¥å…·ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chsh -s /bin/zsh</span><br></pre></td></tr></table></figure><p>ç„¶ååªéœ€è¦é‡å¯ä¸€ä¸‹<code>Terminal</code>å°±å¯ä»¥äº†ã€‚</p><p>ç„¶åä¿®æ”¹ä¸€ä¸‹å®šæ—¶ä»»åŠ¡ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">% crontab -e</span><br><span class="line">30 */1 * * * zsh /Users/onns/Documents/code/bash/clear </span><br><span class="line">0 22 * * * zsh /Users/onns/Documents/code/bash/backup</span><br></pre></td></tr></table></figure><p>ç„¶åæˆ‘è¿™æ ·åˆè¯•äº†ä¸€ä¸‹ï¼Œè¿˜æ˜¯æŠ¥é”™äº†ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zsh: can<span class="string">'t open input file: /Users/onns/Documents/code/bash/clear</span></span><br></pre></td></tr></table></figure><p>æ‰€ä»¥è¿˜æ˜¯éœ€è¦ç»™<code>zsh</code>æƒé™</p><h3 id="èµ‹äºˆfull-disk-accessæƒé™"><a class="header-anchor" href="#èµ‹äºˆfull-disk-accessæƒé™">#</a>èµ‹äºˆFull Disk Accessæƒé™</h3><ol><li>æ‰“å¼€<code>System Preference -&gt; Security &amp; Privacy -&gt; Privacy</code>ã€‚</li><li>æ‰¾åˆ°<code>Full Disk Access</code>ã€‚</li><li>ç‚¹å‡»å·¦ä¸‹è§’çš„<code>é”å¤´ğŸ”’</code>è§£é”æ›´æ”¹æƒé™ï¼Œè¾“å…¥å¯†ç ã€‚</li><li>ç‚¹å‡»æ·»åŠ æŒ‰é’®ï¼Œåœ¨å¼¹å‡ºçš„æ–‡ä»¶æµè§ˆé¡µé¢æŒ‰ä½<code>cmd+shift+G</code>ï¼Œè¾“å…¥<code>/bin</code>ï¼Œç‚¹å‡»<code>go</code>æ¥åˆ°<code>/bin</code>ç›®å½•å¹¶é€‰æ‹©<code>zsh</code>ï¼Œæ·»åŠ ã€‚</li><li>åŒç†åœ¨<code>/usr/sbin/</code>ç›®å½•ä¸‹æ‰¾åˆ°<code>cron</code>ï¼Œæ·»åŠ ã€‚</li></ol><p>æˆåŠŸï¼Œå®Œã€‚</p><h2 id="å‚è€ƒæ–‡æ¡£"><a class="header-anchor" href="#å‚è€ƒæ–‡æ¡£">#</a>å‚è€ƒæ–‡æ¡£</h2><ul><li><a href="https://support.apple.com/en-us/HT204899" target="_blank" rel="noopener">About System Integrity Protection on your Mac</a></li><li><a href="https://support.apple.com/en-us/HT208050" target="_blank" rel="noopener">Use zsh as the default shell on your Mac</a></li><li><a href="https://osxdaily.com/2020/04/27/fix-cron-permissions-macos-full-disk-access/" target="_blank" rel="noopener">How to Fix Cron Permission Issues in MacOS Catalina &amp; Mojave</a></li><li><a href="https://blog.bejarano.io/fixing-cron-jobs-in-mojave/" target="_blank" rel="noopener">Fixing cron jobs in Mojave</a></li><li><a href="https://stackoverflow.com/questions/58593877/crontab-cant-execute-python-script-with-error-errno-1-operation-not-permitt" target="_blank" rel="noopener">Crontab canâ€™t execute python script with error: â€œ[Errno 1] Operation not permittedâ€</a></li><li><a href="https://www.howtogeek.com/444596/how-to-change-the-default-shell-to-bash-in-macos-catalina/" target="_blank" rel="noopener">How to Change the Default Shell to Bash on macOS Catalina</a></li><li><a href="https://blog.csdn.net/qq_38287952/article/details/86755672" target="_blank" rel="noopener">Macæƒé™é—®é¢˜ï¼Œoperation not permitted</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> cron </tag>
            
            <tag> crontab </tag>
            
            <tag> macos </tag>
            
            <tag> Catalina </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€äº›å¤„ç†å­—ç¬¦çš„å·¥å…·</title>
      <link href="/blog/2020/06/05/some-tools/"/>
      <url>/blog/2020/06/05/some-tools/</url>
      
        <content type="html"><![CDATA[<ul><li><a href="https://onns.xyz/tools/hyphens-to-camel-case/">è¿å­—ç¬¦è½¬é©¼å³°å¼</a></li></ul><a id="more"></a><h2 id="è¿å­—ç¬¦è½¬é©¼å³°å¼"><a class="header-anchor" href="#è¿å­—ç¬¦è½¬é©¼å³°å¼">#</a><a href="https://onns.xyz/tools/hyphens-to-camel-case/">è¿å­—ç¬¦è½¬é©¼å³°å¼</a></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toCamel</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> temp = str.replace(<span class="regexp">/(?:-+([^-]))/g</span>, <span class="function"><span class="keyword">function</span> (<span class="params">$<span class="number">1</span>, $<span class="number">2</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $<span class="number">2.</span>toUpperCase();</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> temp.slice(<span class="number">0</span>, <span class="number">1</span>).toUpperCase() + temp.slice(<span class="number">1</span>);;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒé“¾æ¥"><a class="header-anchor" href="#å‚è€ƒé“¾æ¥">#</a>å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://colorlib.com/wp/template/contact-form-v9/" target="_blank" rel="noopener">Contact Form v9</a></li><li><a href="https://regexper.com/#%2F%28%5B%5E-%5D%29%28%3F%3A-%2B%28%5B%5E-%5D%29%29%2Fg" target="_blank" rel="noopener">Regexper</a></li><li><a href="https://blog.csdn.net/qq_42392522/article/details/83376466" target="_blank" rel="noopener">JS å®ç°ï¼šé©¼å³°å¼è½¬ä¸‹æ¨ªçº¿ï¼Œä¸‹æ¨ªçº¿è½¬é©¼å³°å¼</a></li><li><a href="https://blog.csdn.net/qq_26212731/article/details/78523624" target="_blank" rel="noopener">jsç›‘å¬textarea å†…å®¹çš„å˜åŒ–ï¼Œå¹¶è®¡ç®—å†…å®¹çš„é•¿åº¦</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> html </category>
          
      </categories>
      
      
        <tags>
            
            <tag> tools </tag>
            
            <tag> hyphens </tag>
            
            <tag> camel case </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨MacOSä¸Šéƒ¨ç½²ftpæœåŠ¡å™¨</title>
      <link href="/blog/2020/06/02/ftp-server-on-mac/"/>
      <url>/blog/2020/06/02/ftp-server-on-mac/</url>
      
        <content type="html"><![CDATA[<p>20200717 æ›´æ–°ï¼š<br>æ¯æ¬¡ç”µè„‘é‡å¯ä¹‹åéœ€è¦æ‰§è¡Œï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">brew services stop pure-ftpd</span><br><span class="line">sudo /usr/<span class="built_in">local</span>/sbin/pure-ftpd -lpam -B</span><br><span class="line">brew services start pure-ftpd</span><br></pre></td></tr></table></figure><p>ftp æ‰ä¼šç”Ÿæ•ˆã€‚</p><hr><p>å› ä¸ºå°ç±³æ‰‹æœºçš„æ–‡ä»¶ç®¡ç†æ”¯æŒè¿œç¨‹å­˜å‚¨æœåŠ¡ï¼Œæ—©å°±æƒ³åœ¨è‡ªå·±çš„ Mac ä¸Šå¼„äº†ï¼Œä½†æ˜¯æœç´¢äº†å‡ æ¬¡éƒ½å¤±è´¥äº†ï¼Œæ˜¨æ™šåŠå¤œä¸¤ç‚¹çƒ­å¾—ç¡ä¸ç€ï¼ˆå¥½æƒ¨ä¸€ç”·çš„ï¼‰ï¼Œèµ·åºŠæ£é¼“ï¼Œè®°å½•ä¹‹ã€‚</p><a id="more"></a><center><p><img src="//onns.xyz/blog/image/20200602-1.jpg" alt="æ‰‹æœºæ–‡ä»¶ç®¡ç†æ”¯æŒè¿œç¨‹å­˜å‚¨åˆ—è¡¨"></p></center><p>ä¹‹å‰æœç´¢çš„ï¼Œæ— ä¸€ä¾‹å¤–ï¼Œå…¨æ˜¯å«æˆ‘è¾“å…¥å¦‚ä¸‹æ‰€ç¤ºçš„å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo -s launchctl load -w /System/Library/LaunchDaemons/ftp.plist</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯çœ‹ä¸‹é¢çš„æ¶ˆæ¯ï¼ŒåŸæ–‡é“¾æ¥ç‚¹<a href="https://apple.stackexchange.com/questions/361901/host-ftp-server-on-mojave" target="_blank" rel="noopener">è¿™é‡Œ</a>ï¼š</p><blockquote><p>Apple removed the included File Transfer Protocol (FTP) server from recent versions of macOS. FTP is not secure by default and better avoided.<br>FTP is not secure because the connection is not encrypted. Modern network protocols are encrypted by default â€“ even on local networks.</p></blockquote><p>å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œè‹¹æœå®˜æ–¹å·²ç»æŠŠ ftp.plist<code>ç§»é™¤</code>äº†ï¼Œè§£å†³åŠæ³•æ˜¯éœ€è¦è‡ªå·±å®‰è£…ä¸€ä¸ª<code>ftpdæœåŠ¡</code>ã€‚</p><p>ç”¨<code>homebrew</code>å°±å¯ä»¥å®‰è£…äº†ï¼Œå¦‚æœæ²¡æœ‰å®‰è£…å¯ä»¥å‚è€ƒ<a href="https://onns.xyz/blog/2020/06/01/install-homebrew-on-mac/">è¿™é‡Œ</a>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">brew install pure-ftpd</span><br><span class="line">brew services start pure-ftpd</span><br></pre></td></tr></table></figure><p>ç„¶åéœ€è¦é…ç½®<code>ftpd</code>çš„éªŒè¯ï¼Œä½¿ä¹‹å¯ä»¥é€šè¿‡ç³»ç»Ÿç”¨æˆ·è¿›è¡ŒéªŒè¯ç™»å½•ã€‚<br>æ–°å»ºä¸€ä¸ª<code>/etc/pam.d/pure-ftpd</code>æ–‡ä»¶ï¼Œè®°å¾—ç”¨ root æƒé™ç¼–è¾‘ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/pam.d/pure-ftpd</span><br></pre></td></tr></table></figure><p>å†…å®¹å¦‚ä¸‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># pure-ftpd: auth account password session</span><br><span class="line">auth       required       pam_opendirectory.so</span><br><span class="line">account    required       pam_permit.so</span><br><span class="line">password   required       pam_deny.so</span><br><span class="line">session    required       pam_permit.so</span><br></pre></td></tr></table></figure><p>ç„¶åè®©é…ç½®æ–‡ä»¶ç”Ÿæ•ˆ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo /usr/<span class="built_in">local</span>/sbin/pure-ftpd -lpam -B</span><br></pre></td></tr></table></figure><p>æœ€åé‡å¯ä¸€ä¸‹<code>pure-ftpd</code>æœåŠ¡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew services restart pure-ftpd</span><br></pre></td></tr></table></figure><p>åœæ­¢çš„å‘½ä»¤æ˜¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew services stop pure-ftpd</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæ˜¯<code>pure-ftpd</code>çš„<a href="https://download.pureftpd.org/pub/pure-ftpd/doc/README.MacOS-X" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a>ï¼Œè™½ç„¶å¾ˆç®€å•ä½†ã€‚ã€‚ã€‚èŠèƒœäºæ— å§ã€‚</p><h2 id="æ±‡æ€»"><a class="header-anchor" href="#æ±‡æ€»">#</a>æ±‡æ€»</h2><p>å¦‚æœå‡ºç°ä»»ä½•é—®é¢˜ï¼Œå¯ä»¥å‚è€ƒ <a href="https://superuser.com/questions/1398800/pure-ftpd-connection-refused-localhost-on-high-sierra" target="_blank" rel="noopener">pure-ftpd Connection refused localhost on high sierra</a>ï¼Œè¿™ä¸ªè½¯ä»¶çš„ç›¸å…³æ–‡æ¡£çœŸçš„å¾ˆä¸å®Œå–„ï¼Œé‡å¤å®Œæˆä¸‹è¿°æ­¥éª¤åº”è¯¥å°±å¯ä»¥è§£å†³äº†ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆæˆ‘å‡ºé—®é¢˜äº†ï¼Œä½†æ˜¯é‡è£…å°±è§£å†³äº†ï¼Œè¿™å¤§æ¦‚å°±æ˜¯é‡å¯/é‡è£…è§£å†³ 99%çš„é—®é¢˜çš„äººç”Ÿå››å¤§å“²ç†å§ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">brew services stop pure-ftpd</span><br><span class="line">brew remove pure-ftpd</span><br><span class="line">brew upgrade</span><br><span class="line">brew cleanup</span><br><span class="line">brew install pure-ftpd</span><br><span class="line">sudo vi /etc/pam.d/pure-ftpd</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># pure-ftpd: auth account password session</span><br><span class="line">auth       required       pam_opendirectory.so</span><br><span class="line">account    required       pam_permit.so</span><br><span class="line">password   required       pam_deny.so</span><br><span class="line">session    required       pam_permit.so</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo /usr/<span class="built_in">local</span>/sbin/pure-ftpd -lpam -B</span><br><span class="line">brew services restart pure-ftpd</span><br></pre></td></tr></table></figure><p>å®Œã€‚</p><p>çœŸçš„å¾ˆæ–¹ä¾¿ï¼Œç›´æ¥åœ¨æ‰‹æœºä¸Šå­˜å–äº†å°±ã€‚</p><center><p><img src="//onns.xyz/blog/image/20200602-2.jpg" alt="æ‰‹æœºè¿æ¥ftpç¤ºæ„å›¾"></p></center><h2 id="å‚è€ƒé“¾æ¥"><a class="header-anchor" href="#å‚è€ƒé“¾æ¥">#</a>å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://www.jianshu.com/p/f4994754b74a" target="_blank" rel="noopener">MAC æ­å»º FTP æœåŠ¡å™¨</a>ï¼ˆä¸é è°±ï¼Œé”™è¯¯ç­”æ¡ˆï¼‰</li><li><a href="https://zhidao.baidu.com/question/653759039211321605.html" target="_blank" rel="noopener">mac os 10.13.6 å¦‚ä½•å¯åŠ¨ FTP æœåŠ¡å™¨ï¼Ÿæ€¥ï¼ </a>ï¼ˆä¸é è°±ï¼Œé”™è¯¯ç­”æ¡ˆï¼‰</li><li><a href="https://blog.csdn.net/weixin_33733810/article/details/92498798" target="_blank" rel="noopener">Mac å®è·µâ€“MAC æ­å»º FTP æœåŠ¡å™¨</a>ï¼ˆSFTP å¯ä»¥å‚ç…§è¿™ä¸ªï¼ŒFTP ä¾ç„¶æ˜¯é”™è¯¯çš„ï¼‰</li><li><a href="https://apple.stackexchange.com/questions/361901/host-ftp-server-on-mojave" target="_blank" rel="noopener">host ftp server on Mojave</a></li><li><a href="https://apple.stackexchange.com/questions/141633/quick-to-install-and-set-up-ftp-server-on-homebrew-for-osx" target="_blank" rel="noopener">quick to install and set up FTP server on homebrew for OSX</a></li><li><a href="https://download.pureftpd.org/pub/pure-ftpd/doc/README.MacOS-X" target="_blank" rel="noopener">PURE-FTPD DOCUMENTATION-Notes for MacOS users</a></li><li><a href="https://superuser.com/questions/1398800/pure-ftpd-connection-refused-localhost-on-high-sierra" target="_blank" rel="noopener">pure-ftpd Connection refused localhost on high sierra</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> macos </tag>
            
            <tag> homebrew </tag>
            
            <tag> ftpd </tag>
            
            <tag> pure-ftpd </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åœ¨MacOSä¸Šå®‰è£…Homebrew</title>
      <link href="/blog/2020/06/01/install-homebrew-on-mac/"/>
      <url>/blog/2020/06/01/install-homebrew-on-mac/</url>
      
        <content type="html"><![CDATA[<p>å› ä¸ºæƒ³åœ¨Macä¸Šå®‰è£…<code>python3</code>ï¼Œä¸€ä¸ªæœ€å‹å¥½çš„æ–¹å¼æ˜¯å®‰è£…<code>pyenv</code>ï¼Œæ‰€ä»¥é¡ºä¾¿æŠŠåŒ…ç®¡ç†å·¥å…·<code>homebrew</code>ä¸€èµ·å®‰è£…äº†å­ã€‚</p><a id="more"></a><p>å®‰è£…æ–¹æ³•å‚ç…§<a href="https://docs.brew.sh/Installation" target="_blank" rel="noopener">å®˜æ–¹å®‰è£…æ–‡æ¡£</a>ï¼Œä¸è¿‡è¿™ä¸ªé…ç½®å¥½åƒæœ‰ç‚¹éº»çƒ¦ï¼Œå¦‚æœæƒ³è¦ä¸€é”®å¯ä»¥è¯•è¯•<a href="https://treehouse.github.io/installation-guides/mac/homebrew" target="_blank" rel="noopener">è¿™ä¸ª</a>ã€‚</p><p>æˆ‘æœ¬æ¥æ˜¯æƒ³é¡ºç€å®˜æ–¹æ–‡æ¡£æ¥çš„ï¼Œä½†æ˜¯è¿˜è¦é…ç½®ç¯å¢ƒå˜é‡çš„æ ·å­ï¼Œç®—äº†ï¼Œç”¨ä¸€é”®è„šæœ¬ã€‚</p><p>åœ¨ç”¨ä¹‹å‰éœ€è¦è§£å†³ä¸€ä¸ªé—®é¢˜ï¼Œ<code>GitHub</code> çš„æºåœ¨å›½å†…è®¿é—®å¤ªæ…¢äº†ã€‚ã€‚ã€‚ä¹‹å‰å°è¯•è¿‡ç”¨ <code>HTTP_PROXY</code>ï¼Œå‘ç°æ²¡ä»€ä¹ˆç”¨ï¼Œä»Šå¤©åˆå»æŸ¥äº†ä¸€ä¸‹ï¼Œè¿™ä¸‹å°±å¯ä»¥äº†ã€‚éšæ„æ„Ÿå—ä¸‹é€Ÿåº¦çš„å˜åŒ–ï¼Œä»<code>41.00 KiB/s</code>åˆ°<code>9.04 MiB/s</code>ï¼Œå®Œå…¨ä¸æ˜¯ä¸€ä¸ªæ•°é‡çº§å¥½å§ã€‚</p><center><p><img src="//onns.xyz/blog/image/20200601-1.png" alt="æœªå¼€å¯ä»£ç†ä¹‹å‰"></p><p><img src="//onns.xyz/blog/image/20200601-2.png" alt="å¼€å¯ä»£ç†ä¹‹å"></p></center><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¼€å¯ä»£ç†å‘½ä»¤ï¼Œè¿™ä¸ªéœ€è¦ä½ æœ¬åœ°æœ‰ä»£ç†ç¨‹åºå“¦</span></span><br><span class="line"><span class="built_in">export</span> ALL_PROXY=socks5://127.0.0.1:1081</span><br></pre></td></tr></table></figure><p>ç„¶åå°±å¯ä»¥ä¸€é”®å®‰è£…<code>homebrew</code>äº†ï¼Œä¸­é—´è¾“å…¥ä¸€æ¬¡å¯†ç å³å¯ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ruby -e <span class="string">"<span class="variable">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)</span>"</span></span><br></pre></td></tr></table></figure><p>ç„¶åå®‰è£…<code>pyenv</code>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install pyenv</span><br></pre></td></tr></table></figure><p>ç„¶åå®‰è£…<code>python3</code>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pyenv install 3.8.0</span><br></pre></td></tr></table></figure><p>è™½ç„¶<code>pyenv</code>å’Œ<code>python3</code>éƒ½è£…å¥½äº†ï¼Œä½†æ˜¯è¿˜æ˜¯è¦è®¾ç½®ä¸€ä¸‹ç¯å¢ƒå˜é‡ï¼Œå‚ç…§å®˜æ–¹çš„<a href="https://github.com/pyenv/pyenv#installation" target="_blank" rel="noopener">æ–‡æ¡£</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">'export PYENV_ROOT="$HOME/.pyenv"'</span> &gt;&gt; ~/.bash_profile</span><br><span class="line"><span class="built_in">echo</span> <span class="string">'export PATH="$PYENV_ROOT/bin:$PATH"'</span> &gt;&gt; ~/.bash_profile</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">'if command -v pyenv 1&gt;/dev/null 2&gt;&amp;1; then\n  eval "$(pyenv init -)"\nfi'</span> &gt;&gt; ~/.bash_profile</span><br></pre></td></tr></table></figure><p>ç„¶åé‡å¯ä¸€ä¸‹å‘½ä»¤è¡Œå³å¯ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ pyenv global 3.8.0</span><br><span class="line">$ python</span><br><span class="line">Python 3.8.0 (default, Jun  1 2020, 11:01:42) </span><br><span class="line">[Clang 10.0.1 (clang-1001.0.46.4)] on darwin</span><br><span class="line">Type <span class="string">"help"</span>, <span class="string">"copyright"</span>, <span class="string">"credits"</span> or <span class="string">"license"</span> <span class="keyword">for</span> more information.</span><br><span class="line">&gt;&gt;&gt; <span class="built_in">exit</span>()</span><br></pre></td></tr></table></figure><p>å®Œã€‚</p><h2 id="å‚è€ƒæ–‡æ¡£"><a class="header-anchor" href="#å‚è€ƒæ–‡æ¡£">#</a>å‚è€ƒæ–‡æ¡£</h2><ul><li><a href="https://opensource.com/article/19/5/python-3-default-mac" target="_blank" rel="noopener">The right and wrong way to set Python 3 as default on a Mac</a></li><li><a href="https://treehouse.github.io/installation-guides/mac/homebrew" target="_blank" rel="noopener">Installing Homebrew on a Mac</a></li><li><a href="https://docs.brew.sh/Installation" target="_blank" rel="noopener">Homebrew Documentation</a></li><li><a href="https://www.zhihu.com/question/276143842" target="_blank" rel="noopener">æ€ä¹ˆè§£å†³ä»githubä¸‹è½½èµ„æºæ…¢ï¼Ÿ</a></li><li><a href="https://github.com/pyenv/pyenv#installation" target="_blank" rel="noopener">Simple Python Version Management: pyenv</a></li><li><a href="https://stackoverflow.com/questions/33321312/cannot-switch-python-with-pyenv" target="_blank" rel="noopener">Cannot switch Python with pyenv</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> macos </tag>
            
            <tag> homebrew </tag>
            
            <tag> pyenv </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Chromeæ’ä»¶-åŒæ­¥æ’­æ”¾ç”µå½±</title>
      <link href="/blog/2020/05/12/chrome-extension-sync-sofa/"/>
      <url>/blog/2020/05/12/chrome-extension-sync-sofa/</url>
      
        <content type="html"><![CDATA[<h2 id="å¤ªé•¿ä¸çœ‹ç‰ˆ"><a class="header-anchor" href="#å¤ªé•¿ä¸çœ‹ç‰ˆ">#</a>å¤ªé•¿ä¸çœ‹ç‰ˆ</h2><p>sync-sofaæ˜¯ä¸€ä¸ªchromeçš„æ’ä»¶ï¼Œå®‰è£…ä¹‹åå¯ä»¥è®©ä¸¤å°ä¸åŒçš„è®¾å¤‡åœ¨æ’­æ”¾åŒä¸€ä¸ªè§†é¢‘æºçš„æ—¶å€™ï¼Œå½¼æ­¤åŒæ­¥æ“ä½œï¼ˆæ’­æ”¾ã€æš‚åœã€æ‹–åŠ¨è¿›åº¦æ¡ç­‰ï¼‰ã€‚</p><p>ç›®å‰æ”¯æŒçš„ç½‘ç«™ï¼š</p><ul><li><a href="https://www.iqiyi.com/" target="_blank" rel="noopener">çˆ±å¥‡è‰º</a></li><li><a href="https://www.youku.com/" target="_blank" rel="noopener">ä¼˜é…·è§†é¢‘</a></li><li><a href="https://www.weiyun.com/" target="_blank" rel="noopener">å¾®äº‘ç½‘ç›˜</a></li><li><a href="https://v.qq.com/" target="_blank" rel="noopener">è…¾è®¯è§†é¢‘</a></li><li><a href="https://www.youtube.com/" target="_blank" rel="noopener">YouTube</a></li></ul><a id="more"></a><h3 id="æ“ä½œæµç¨‹"><a class="header-anchor" href="#æ“ä½œæµç¨‹">#</a>æ“ä½œæµç¨‹</h3><p>è¿™é‡Œä»¥<code>å¾®äº‘</code>ä¸ºä¾‹ï¼Œå¥½å¤„æ˜¯åªè¦ä½ æ‰¾åˆ°äº†è§†é¢‘æºï¼Œå°±å¯ä»¥æ’­æ”¾ä»»ä½•ä½ æƒ³è¦æ’­æ”¾çš„è§†é¢‘ã€‚æœ¬æ¥ä¹Ÿæƒ³åŠ å…¥ç™¾åº¦äº‘çš„ï¼Œä½†å¥ˆä½•ç™¾åº¦äº‘æœ‰æ‰€é™åˆ¶ï¼Œåªèƒ½çœ‹æœªæ¥æ˜¯å¦æœ‰æŠ€æœ¯ä¸Šçš„çªç ´äº†ã€‚</p><p><strong>ç”¨æˆ·1</strong>ï¼šæµè§ˆå™¨é¡¶éƒ¨ä¸ºæ¸å˜è‰²ï¼Œä¸»é¢˜é¢œè‰²ä¸ºç²‰çº¢è‰²<br><strong>ç”¨æˆ·2</strong>ï¼šæµè§ˆå™¨é¡¶éƒ¨ä¸ºé»‘è‰²ï¼Œä¸»é¢˜é¢œè‰²ä¸ºé»‘è‰²</p><ol><li>åŒæ–¹éƒ½æ‰“å¼€è§†é¢‘ï¼Œè·³è¿‡ä¸€åˆ‡å¹¿å‘Šæˆ–è€…ç‰‡å¤´ä¹‹åï¼Œæš‚åœè§†é¢‘ã€‚</li></ol><center><p><img src="//onns.xyz/blog/image/20200512-1.png" alt="åˆå§‹é¡µé¢"></p></center><ol start="2"><li><strong>ç”¨æˆ·1</strong>ç‚¹å¼€æ’ä»¶ï¼Œç‚¹å‡»è¯·æ±‚<code>è¯†åˆ«ç </code>æŒ‰é’®ã€‚</li></ol><center><p><img src="//onns.xyz/blog/image/20200512-2.png" alt="è¯·æ±‚è¯†åˆ«ç é¡µé¢"></p></center><ol start="3"><li><strong>ç”¨æˆ·1</strong>è¯·æ±‚æˆåŠŸåï¼Œä¼šæ”¶åˆ°ä¸€ä¸ªé•¿åº¦ä¸º4çš„<code>è¯†åˆ«ç </code>ï¼ˆå›¾ç¤ºä¸­ä¸º<strong>aM9d</strong>ï¼‰ï¼Œ<code>è¯†åˆ«ç </code>è‡ªåŠ¨å¤åˆ¶åˆ°<code>å‰ªåˆ‡æ¿</code>ï¼Œå¹¶å¼¹å‡ºæç¤ºï¼Œæç¤ºå’Œæ’ä»¶é¡µé¢<code>3ç§’</code>åè‡ªåŠ¨å…³é—­ã€‚</li></ol><center><p><img src="//onns.xyz/blog/image/20200512-3.png" alt="è¯·æ±‚è¯†åˆ«ç æˆåŠŸé¡µé¢"></p></center><ol start="4"><li><strong>ç”¨æˆ·1</strong>å°†<code>è¯†åˆ«ç </code>å‘é€ç»™<strong>ç”¨æˆ·2</strong>ï¼Œ<strong>ç”¨æˆ·2</strong>ç‚¹å¼€æ’ä»¶ï¼Œåœ¨ä¸Šæ–¹è¾“å…¥æ¡†è¾“å…¥<code>è¯†åˆ«ç </code>ï¼Œç‚¹å‡»<strong>å¼€å§‹</strong>æŒ‰é’®ã€‚</li></ol><center><p><img src="//onns.xyz/blog/image/20200512-4.png" alt="æ ¹æ®è¯†åˆ«ç åŒ¹é…é¡µé¢"></p></center><ol start="5"><li><strong>ç”¨æˆ·2</strong>å’Œ<strong>ç”¨æˆ·1</strong>åŒ¹é…æˆåŠŸåï¼ŒåŒæ–¹éƒ½ä¼šæ”¶åˆ°æˆåŠŸæç¤ºã€‚è‡³æ­¤ï¼Œä¸€åˆ‡å‡†å¤‡å·¥ä½œå®Œæˆï¼Œå¯ä»¥å¼€å§‹è§‚çœ‹è§†é¢‘ã€‚</li></ol><center><p><img src="//onns.xyz/blog/image/20200512-5.png" alt="ç”¨æˆ·2åŒ¹é…æˆåŠŸç•Œé¢"></p><p><img src="//onns.xyz/blog/image/20200512-6.png" alt="ç”¨æˆ·1åŒ¹é…æˆåŠŸç•Œé¢"></p></center><ol start="6"><li>è‹¥<strong>ä¸€æ–¹ç”¨æˆ·</strong>æ–­å¼€è¿æ¥ï¼Œ<strong>å¦ä¸€æ–¹ç”¨æˆ·</strong>ä¼šæ”¶åˆ°é€šçŸ¥ï¼Œå±Šæ—¶åªéœ€æŒ‰ç…§<code>æ­¥éª¤1-5</code>é‡æ–°å»ºç«‹è¿æ¥å³å¯ã€‚</li></ol><center><p><img src="//onns.xyz/blog/image/20200512-7.png" alt="æ ¹æ®è¯†åˆ«ç åŒ¹é…é¡µé¢"></p></center><h3 id="ç›¸å…³è¿æ¥"><a class="header-anchor" href="#ç›¸å…³è¿æ¥">#</a>ç›¸å…³è¿æ¥</h3><ul><li><a href="https://chrome.google.com/webstore/detail/sync-sofa-online-video-sy/kgpnhgmpijhpkefpddoehhminpfiddmg" target="_blank" rel="noopener">Chromeæ’ä»¶ä¸‹è½½åœ°å€</a></li><li><a href="https://github.com/LouisYLWang/Sync-Sofa" target="_blank" rel="noopener">é¡¹ç›®åœ°å€</a></li><li><a href="https://github.com/LouisYLWang/Sync-Sofa/issues" target="_blank" rel="noopener">åé¦ˆåœ°å€</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> chrome </tag>
            
            <tag> extension </tag>
            
            <tag> sync-sofa </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows10ä¸‹å®‰è£…PCL1.9.1</title>
      <link href="/blog/2020/04/11/pcl-vs2017-in-windows10/"/>
      <url>/blog/2020/04/11/pcl-vs2017-in-windows10/</url>
      
        <content type="html"><![CDATA[<p>PCLçš„åº“é…ç½®æ˜¯çœŸçš„ç¹çï¼Œé…ç½®äº†å¥½å¤šæ¬¡æ‰æˆåŠŸã€‚<br>Point Cloud Library 1.9.1 + Visual Studio 2017 + Windows 10</p><a id="more"></a><h2 id="pcl"><a class="header-anchor" href="#pcl">#</a>PCL</h2><p><code>PCL</code> ä» <code>1.8.0</code> ç‰ˆæœ¬å¼€å§‹ä»£ç éƒ½æ‰˜ç®¡åœ¨äº†<a href="https://github.com/PointCloudLibrary/pcl/releases/" target="_blank" rel="noopener">GitHub</a>ä¹‹ä¸Šï¼Œç‚¹å‡»è¿™é‡Œç›´æ¥ä¸‹è½½å³å¯ï¼š<a href="https://github.com/PointCloudLibrary/pcl/releases/download/pcl-1.9.1/PCL-1.9.1-AllInOne-msvc2017-win64.exe" target="_blank" rel="noopener">PCL-1.9.1-AllInOne-msvc2017-win64.exe</a>ã€‚</p><p>å› ä¸º <code>PCL</code> ä¼šä¾èµ–å¾ˆå¤šæ’ä»¶åº“ï¼Œæ‰€ä»¥ä¸‹ <code>AllInOne</code> ç‰ˆæœ¬å°±å¯ä»¥éƒ½è£…ä¸Šäº†ã€‚</p><p>å®‰è£…çš„æ—¶å€™ä¸€è·¯ä¸‹ä¸€æ­¥å³å¯ï¼Œä¸è¿‡éœ€è¦æ³¨æ„å®‰è£…çš„æœ€åä¼šå¼¹å‡ºä¸€ä¸ªå•ç‹¬çš„å®‰è£…ç¨‹åºæ¥å®‰è£… <code>OpenNI2</code>ã€‚å‡å¦‚æˆ‘ <code>PCLçš„å®‰è£…ç›®å½•ï¼ˆPCL_ROOTï¼‰</code> ä¸º <strong>D:\Program Files\PCL1.9.1</strong><sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>ï¼Œé‚£ä¹ˆå»ºè®® <code>OpenNI2</code> çš„å®‰è£…ç›®å½•è®¾ç½®ä¸º <strong>%PCL_ROOT%\3rdParty\OpenNI2</strong>ï¼Œå³ï¼š<strong>D:\Program Files\PCL1.9.1\3rdParty\OpenNI2</strong>ã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºäº†æ–¹ä¾¿ç®¡ç†ç¬¬ä¸‰æ–¹åº“ã€‚</p><p>è‡³æ­¤ï¼Œ<code>PCL</code> åŠå…¶ç›¸å…³ç¬¬ä¸‰æ–¹åº“å®‰è£…å®Œæˆã€‚</p><h2 id="æ·»åŠ ç¯å¢ƒå˜é‡"><a class="header-anchor" href="#æ·»åŠ ç¯å¢ƒå˜é‡">#</a>æ·»åŠ ç¯å¢ƒå˜é‡</h2><p>åœ¨ <code>è®¡ç®—æœºâ€”&gt;å±æ€§â€”&gt;é«˜çº§ç³»ç»Ÿå±æ€§â€”&gt;é«˜çº§â€”&gt;ç¯å¢ƒå˜é‡</code> ä¸­ï¼Œæ·»åŠ å¦‚ä¸‹<code>ç¯å¢ƒå˜é‡</code>ï¼š</p><center><table><thead><tr><th style="text-align:left">å˜é‡</th><th style="text-align:left">å€¼</th></tr></thead><tbody><tr><td style="text-align:left">PCL_ROOT</td><td style="text-align:left">D:\Program Files\PCL1.9.1</td></tr><tr><td style="text-align:left">PATH</td><td style="text-align:left">%PCL_ROOT%\bin</td></tr><tr><td style="text-align:left">PATH</td><td style="text-align:left">%PCL_ROOT%\3rdParty\Boost\lib</td></tr><tr><td style="text-align:left">PATH</td><td style="text-align:left">%PCL_ROOT%\3rdParty\FLANN\bin</td></tr><tr><td style="text-align:left">PATH</td><td style="text-align:left">%PCL_ROOT%\3rdParty\OpenNI2\Lib</td></tr><tr><td style="text-align:left">PATH</td><td style="text-align:left">%PCL_ROOT%\3rdParty\OpenNI2\Redist</td></tr><tr><td style="text-align:left">PATH</td><td style="text-align:left">%PCL_ROOT%\3rdParty\OpenNI2\Tools</td></tr><tr><td style="text-align:left">PATH</td><td style="text-align:left">%PCL_ROOT%\3rdParty\Qhull\bin</td></tr><tr><td style="text-align:left">PATH</td><td style="text-align:left">%PCL_ROOT%\3rdParty\VTK\bin</td></tr></tbody></table></center><p>ç”±äºPATHè¦æ·»åŠ çš„å˜é‡å¾ˆå¤šï¼Œæœ‰ <code>8</code> ä¸ªï¼Œé‰´äºæœ‰äººæ‡’å¾—æ‰“å…«æ¬¡ï¼Œç›´æ¥ç‚¹å‡»<code>ç¼–è¾‘æ–‡æœ¬</code>ï¼Œå°†ä¸‹è¿°å†…å®¹ç²˜è´´åˆ°è¡Œå°¾å³å¯ï¼Œæ³¨æ„<strong>åˆ†å·</strong>ã€‚</p><center><p><img src="//onns.xyz/blog/image/20200411-1.png" alt="ç¼–è¾‘æ–‡æœ¬ç¤ºæ„å›¾"></p></center><blockquote><p>%PCL_ROOT%\bin;%PCL_ROOT%\3rdParty\Boost\lib;%PCL_ROOT%\3rdParty\FLANN\bin;%PCL_ROOT%\3rdParty\OpenNI2\Lib;%PCL_ROOT%\3rdParty\OpenNI2\Redist;%PCL_ROOT%\3rdParty\OpenNI2\Tools;%PCL_ROOT%\3rdParty\Qhull\bin;%PCL_ROOT%\3rdParty\VTK\bin;</p></blockquote><h2 id="vs2017é…ç½®"><a class="header-anchor" href="#vs2017é…ç½®">#</a>VS2017é…ç½®</h2><p>æ‰“å¼€VS2017ï¼Œæ–°å»ºä¸€ä¸ª <code>C++</code>çš„<code>ç©ºé¡¹ç›®</code>å³å¯ã€‚</p><p>é¦–å…ˆæ‰“å¼€<code>å±æ€§ç®¡ç†å™¨</code>ï¼Œå¦‚æœæ‰¾ä¸åˆ°å¯ä»¥åœ¨<code>è§†å›¾-&gt;å…¶ä»–çª—å£-&gt;å±æ€§ç®¡ç†å™¨</code>ä¸­æ‰“å¼€ï¼Œæˆ–è€…ç›´æ¥æœç´¢ä¹Ÿå¯ä»¥ã€‚</p><p>ç„¶ååœ¨<code>å±æ€§ç®¡ç†å™¨-&gt; Release | x64</code>æ–‡ä»¶å¤¹å³é”®ï¼Œ<code>æ·»åŠ æ–°é¡¹ç›®å±æ€§è¡¨</code>ï¼Œåå­—è‡ªå·±èµ·å³å¯ã€‚</p><p>æ¥ç€å³é”®<code>åˆšåˆšåˆ›å»ºçš„å±æ€§è¡¨</code>ï¼Œç‚¹å‡»<code>å±æ€§</code>ï¼Œå¼¹å‡ºå¦‚å›¾æ‰€ç¤ºç•Œé¢ã€‚</p><center><p><img src="//onns.xyz/blog/image/20200411-2.png" alt="å±æ€§é¡µ"></p></center><p>åœ¨ <code>é€šç”¨å±æ€§â€”&gt;VC++ç›®å½•â€”&gt;åŒ…å«ç›®å½•</code> ä¸­æ·»åŠ  <code>7</code> é¡¹ï¼Œè¿™ä¸ªåªèƒ½ä¸€ä¸ªä¸€ä¸ªåŠ ï¼Œå°±æ²¡æ³•å·æ‡’äº†ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">D:\Program Files\PCL1.9.1\include\pcl-1.9</span><br><span class="line">D:\Program Files\PCL1.9.1\3rdParty\Boost\include\boost-1_68</span><br><span class="line">D:\Program Files\PCL1.9.1\3rdParty\Eigen\eigen3</span><br><span class="line">D:\Program Files\PCL1.9.1\3rdParty\FLANN\include</span><br><span class="line">D:\Program Files\PCL1.9.1\3rdParty\OpenNI2\Include</span><br><span class="line">D:\Program Files\PCL1.9.1\3rdParty\Qhull\include</span><br><span class="line">D:\Program Files\PCL1.9.1\3rdParty\VTK\include\vtk-8.1</span><br></pre></td></tr></table></figure><p>åœ¨ <code>é€šç”¨å±æ€§â€”&gt;VC++ç›®å½•â€”&gt;åº“ç›®å½•</code> ä¸­æ·»åŠ  <code>6</code> é¡¹ï¼ŒåŒä¸Šã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">D:\Program Files\PCL1.9.1\lib</span><br><span class="line">D:\Program Files\PCL1.9.1\3rdParty\Boost\lib</span><br><span class="line">D:\Program Files\PCL1.9.1\3rdParty\FLANN\lib</span><br><span class="line">D:\Program Files\PCL1.9.1\3rdParty\OpenNI2\Lib</span><br><span class="line">D:\Program Files\PCL1.9.1\3rdParty\Qhull\lib</span><br><span class="line">D:\Program Files\PCL1.9.1\3rdParty\VTK\lib</span><br></pre></td></tr></table></figure><p>åœ¨ <code>C/C++â€”&gt;é¢„å¤„ç†å™¨â€”&gt;é¢„å¤„ç†å™¨å®šä¹‰</code> ä¸­æ·»åŠ  <code>3</code> è¡Œã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">_CRT_SECURE_NO_WARNINGS</span><br><span class="line">_SCL_SECURE_NO_WARNINGS</span><br><span class="line">_SILENCE_FPOS_SEEKPOS_DEPRECATION_WARNING</span><br></pre></td></tr></table></figure><p>å°† <code>C/C++â€”&gt;æ‰€æœ‰é€‰é¡¹â€”&gt;SDLæ£€æŸ¥</code> æ”¹ä¸º<code>å¦ (/sdl-)</code>ã€‚</p><p>åœ¨ <code>é€šç”¨å±æ€§â€”&gt;é“¾æ¥å™¨â€”&gt;è¾“å…¥â€”&gt;é™„åŠ çš„ä¾èµ–é¡¹</code> ä¸­æ·»åŠ  <code>lib</code> æ–‡ä»¶ï¼Œ<code>Release</code> å’Œ <code>Debug</code> æ‰€éœ€è¦çš„åº“æ–‡ä»¶ä¸åŒï¼Œå†™äº†ä¸€ä¸ªpythonè„šæœ¬æ–‡ä»¶ï¼Œä¿å­˜è¿è¡Œå°±å¯ä»¥äº†ã€‚ç„¶åæŠŠè¾“å‡ºçš„ç»“æœå¤åˆ¶æ·»åŠ å³å¯ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-  </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®PCLçš„libç›®å½•</span></span><br><span class="line">PCL_LIB_DIR = <span class="string">'D:/Program Files/PCL1.9.1/lib'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®VTKçš„libç›®å½•</span></span><br><span class="line">VTK_LIB_DIR = <span class="string">'D:/Program Files/PCL1.9.1/3rdParty/VTK/lib'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‹åˆ—ä¸¤è¡ŒäºŒé€‰å…¶ä¸€</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># VERSION = 'DEBUG'</span></span><br><span class="line">VERSION = <span class="string">'RELEASE'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> home, dirs, files <span class="keyword">in</span> os.walk(PCL_LIB_DIR):</span><br><span class="line">    <span class="keyword">for</span> filename <span class="keyword">in</span> files:</span><br><span class="line">        ext = <span class="string">'_release.lib'</span></span><br><span class="line">        num = <span class="number">-12</span></span><br><span class="line">        <span class="keyword">if</span> VERSION == <span class="string">'DEBUG'</span>:</span><br><span class="line">            ext = <span class="string">'_debug.lib'</span></span><br><span class="line">            num = <span class="number">-10</span></span><br><span class="line">        <span class="keyword">if</span> filename[num:] == ext:</span><br><span class="line">            print(filename)</span><br><span class="line">            <span class="comment"># fullname = os.path.join(home, filename)</span></span><br><span class="line">            <span class="comment"># print(fullname)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> home, dirs, files <span class="keyword">in</span> os.walk(VTK_LIB_DIR):</span><br><span class="line">    <span class="keyword">for</span> filename <span class="keyword">in</span> files:</span><br><span class="line">        <span class="keyword">if</span> os.path.splitext(filename)[<span class="number">1</span>] == <span class="string">'.lib'</span>:</span><br><span class="line">            <span class="keyword">if</span> VERSION == <span class="string">'RELEASE'</span> <span class="keyword">and</span> filename[<span class="number">-6</span>:<span class="number">-4</span>] != <span class="string">'gd'</span>:</span><br><span class="line">                print(filename)</span><br><span class="line">            <span class="keyword">if</span> VERSION == <span class="string">'DEBUG'</span> <span class="keyword">and</span> filename[<span class="number">-6</span>:<span class="number">-4</span>] == <span class="string">'gd'</span>:</span><br><span class="line">                print(filename)</span><br></pre></td></tr></table></figure><center><p><img src="//onns.xyz/blog/image/20200411-3.png" alt="è¿è¡Œç»“æœå›¾"></p></center><h2 id="å‚è€ƒæ–‡æ¡£"><a class="header-anchor" href="#å‚è€ƒæ–‡æ¡£">#</a>å‚è€ƒæ–‡æ¡£</h2><ul><li><a href="https://mp.weixin.qq.com/s/WcNKk07GEAbhUTS1aPRufw" target="_blank" rel="noopener">PCL1.8.1+vs2015é…ç½®æ•™ç¨‹</a></li><li><a href="https://blog.csdn.net/weixin_41991128/article/details/83864713" target="_blank" rel="noopener">VS2017é…ç½®PCL1.9ï¼ˆwin10ç¯å¢ƒï¼‰</a></li></ul><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>å®‰è£…çš„æ—¶å€™æœ‰äººå»ºè®®æŠŠç›®å½• <code>PCL 1.9.1</code> ä¸­é—´çš„<code>ç©ºæ ¼</code>åˆ æ‰ï¼Œæˆ‘å°±ç…§åšäº†ã€‚ <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> windows10 </tag>
            
            <tag> PCL </tag>
            
            <tag> point cloud </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç½‘é¡µæˆªå›¾ä¹‹åœæ­¢GIF</title>
      <link href="/blog/2020/04/01/stop-gif-for-screenshot/"/>
      <url>/blog/2020/04/01/stop-gif-for-screenshot/</url>
      
        <content type="html"><![CDATA[<p>ç»å¸¸ä¼šæœ‰ç”¨åˆ°ç½‘é¡µæˆªå–çš„æ—¶å€™ï¼Œæˆªå–æ–¹æ³•å¾ˆç®€å•ï¼Œä½†æ˜¯å¦‚æœé¡µé¢é‡ŒGIFå›¾å¾ˆå¤šçš„è¯ï¼Œä¼šå‡ºç°æˆªæ–­ï¼Œå³GIFä¸Šä¸‹ç”»é¢ä¸ä¸€è‡´ï¼ˆå› ä¸ºæœ¬è´¨ä¸Šå…¨å±æˆªå›¾ä¹Ÿéƒ½æ˜¯å…ˆæˆªå±å¹•å†æ‹¼æ¥çš„ï¼‰ã€‚èŠ±ç‚¹åŠŸå¤«æ‰¾äº†ä¸‹ï¼Œè®°å½•ä¹‹ã€‚</p><a id="more"></a><p>éƒ½æ˜¯ä»¥<code>Chrome</code>ä¸ºä¾‹ï¼Œå…¶å®ƒæµè§ˆå™¨å°±è‡ªè¡Œgoogleå’¯ã€‚é¦–å…ˆå»ä¸‹ä¸€ä¸ªè‡ªå·±å–œæ¬¢çš„å…¨å±æˆªå›¾æ’ä»¶ï¼Œ<a href="https://chrome.google.com/webstore/search/Screenshot?hl=en" target="_blank" rel="noopener">ä¼ é€é—¨</a>ã€‚</p><p>å°tipï¼šå¾®ä¿¡é¡µé¢é‡‡ç”¨çš„æ˜¯ <code>lazy load</code> æ¨¡å¼ï¼Œè¦è‡ªå·±æµè§ˆä¸€éå…¨æ–‡æ‰èƒ½åŠ è½½æ‰€æœ‰çš„GIFå’Œå›¾ç‰‡ã€‚</p><p>ç„¶åå°±æ‰“å¼€<code>å¼€å‘è€…æ¨¡å¼</code>ï¼Œå¿«æ·é”® <code>cmd+alt+i</code>ï¼Œé€‰æ‹©æ ‡ç­¾ä¸º <code>console</code> çš„ä¸€æ ï¼Œå°†ä¸‹è¿°ä»£ç ç²˜è´´è¿›å»ï¼Œå›è½¦å³å¯ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createElement</span>(<span class="params">type, callback</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> element = <span class="built_in">document</span>.createElement(type);</span><br><span class="line"></span><br><span class="line">    callback(element);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> element;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">freezeGif</span>(<span class="params">img</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> width = img.width,</span><br><span class="line">    height = img.height,</span><br><span class="line">    canvas = createElement(<span class="string">'canvas'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">clone</span>) </span>&#123;</span><br><span class="line">        clone.width = width;</span><br><span class="line">        clone.height = height;</span><br><span class="line">    &#125;),</span><br><span class="line">    attr,</span><br><span class="line">    i = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> freeze = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        canvas.getContext(<span class="string">'2d'</span>).drawImage(img, <span class="number">0</span>, <span class="number">0</span>, width, height);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; img.attributes.length; i++) &#123;</span><br><span class="line">            attr = img.attributes[i];</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (attr.name !== <span class="string">'"'</span>) &#123; <span class="comment">// test for invalid attributes</span></span><br><span class="line">                canvas.setAttribute(attr.name, attr.value);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        canvas.style.position = <span class="string">'absolute'</span>;</span><br><span class="line"></span><br><span class="line">        img.parentNode.insertBefore(canvas, img);</span><br><span class="line">        img.style.opacity = <span class="number">0</span>;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (img.complete) &#123;</span><br><span class="line">        freeze();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        img.addEventListener(<span class="string">'load'</span>, freeze, <span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">freezeAllGifs</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Array</span>().slice.apply(<span class="built_in">document</span>.images).map(freezeGif);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">freezeAllGifs();</span><br></pre></td></tr></table></figure><p>ä»£ç è‡ª <a href="https://stackoverflow.com/a/24707088/13182099" target="_blank" rel="noopener">Stopping GIF Animation Programmatically</a> å¤„æ‹·è´ã€‚</p><p>ç„¶åGIFå›¾å°±éƒ½ä¸åŠ¨å•¦ã€‚</p><p>å®Œã€‚</p>]]></content>
      
      
      <categories>
          
          <category> work </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
            <tag> code </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaå­¦ä¹ ç¬”è®°ï¼ˆä¸ƒï¼‰</title>
      <link href="/blog/2020/03/16/java-notes-7/"/>
      <url>/blog/2020/03/16/java-notes-7/</url>
      
        <content type="html"><![CDATA[<p>Javaæ ¸å¿ƒæŠ€æœ¯å·ä¸€åŸºç¡€çŸ¥è¯†ç¬¬10ç‰ˆ</p><h2 id="é›†åˆ"><a class="header-anchor" href="#é›†åˆ">#</a>é›†åˆ</h2><a id="more"></a><ul><li><code>for each</code> å¾ªç¯å¯ä»¥ä¸ä»»ä½•å®ç°äº† <code>Iterable</code> æ¥å£çš„å¯¹è±¡ä¸€èµ·å·¥ä½œã€‚</li><li>è¿­ä»£å™¨è®¿é—® <code>HashSet</code> è™½ç„¶å¯ä»¥ç¡®å®šåœ¨è¿­ä»£è¿‡ç¨‹ä¸­èƒ½å¤Ÿéå†åˆ°é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œä½†å´æ— æ³•é¢„çŸ¥å…ƒç´ è¢«è®¿é—®çš„æ¬¡åºã€‚</li><li>å°† Java è¿­ä»£å™¨è®¤ä¸ºæ˜¯<code>ä½äºä¸¤ä¸ªå…ƒç´ ä¹‹é—´</code>çš„ã€‚å½“è°ƒç”¨ <code>next</code> æ—¶ï¼Œè¿­ä»£å™¨å°±è¶Šè¿‡ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›åˆšåˆšè¶Šè¿‡çš„é‚£ä¸ªå…ƒç´ çš„å¼•ç”¨ã€‚</li><li>å¦‚æœæƒ³åˆ é™¤ä¸¤ä¸ªç›¸é‚»çš„å…ƒç´ ï¼Œéœ€è¦å…ˆ <code>next</code> å† <code>remove</code>ã€‚<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Iterator&lt;String&gt; it = c.Iterator();</span><br><span class="line">it.next();</span><br><span class="line">it.remove();</span><br><span class="line">it.next();</span><br><span class="line">it.remove();</span><br></pre></td></tr></table></figure></li><li>åœ¨ Java ç¨‹åºè®¾è®¡è¯­è¨€ä¸­ï¼Œæ‰€æœ‰é“¾è¡¨å®é™…ä¸Šéƒ½æ˜¯<code>åŒå‘é“¾æ¥çš„</code>ã€‚</li></ul><center><table><thead><tr><th style="text-align:left">é›†åˆç±»å‹</th><th style="text-align:left">æè¿°</th></tr></thead><tbody><tr><td style="text-align:left">ArrayList</td><td style="text-align:left">ä¸€ç§å¯ä»¥åŠ¨æ€å¢é•¿å’Œç¼©å‡çš„ç´¢å¼•åºåˆ—</td></tr><tr><td style="text-align:left">LinkedList</td><td style="text-align:left">ä¸€ç§å¯ä»¥åœ¨ä»»ä½•ä½ç½®è¿›è¡Œé«˜æ•ˆåœ°æ’äººå’Œåˆ é™¤æ“ä½œçš„æœ‰åºåºåˆ—</td></tr><tr><td style="text-align:left">ArrayDeque</td><td style="text-align:left">ä¸€ç§ç”¨å¾ªç¯æ•°ç»„å®ç°çš„åŒç«¯é˜Ÿåˆ—</td></tr><tr><td style="text-align:left">HashSet</td><td style="text-align:left">ä¸€ç§æ²¡æœ‰é‡å¤å…ƒç´ çš„æ— åºé›†åˆ</td></tr><tr><td style="text-align:left">TreeSet</td><td style="text-align:left">â€”ç§æœ‰åºé›†</td></tr><tr><td style="text-align:left">EnumSet</td><td style="text-align:left">ä¸€ç§åŒ…å«æšä¸¾ç±»å‹å€¼çš„é›†</td></tr><tr><td style="text-align:left">LinkedHashSet</td><td style="text-align:left">ä¸€ç§å¯ä»¥è®°ä½å…ƒç´ æ’äººæ¬¡åºçš„é›†</td></tr><tr><td style="text-align:left">PriorityQueue</td><td style="text-align:left">ä¸€ç§å…è®¸é«˜æ•ˆåˆ é™¤æœ€å°å…ƒç´ çš„é›†åˆ</td></tr><tr><td style="text-align:left">HashMap</td><td style="text-align:left">ä¸€ç§å­˜å‚¨é”®/å€¼å…³è”çš„æ•°æ®ç»“æ„</td></tr><tr><td style="text-align:left">TreeMap</td><td style="text-align:left">ä¸€ç§é”®å€¼æœ‰åºæ’åˆ—çš„æ˜ å°„è¡¨</td></tr><tr><td style="text-align:left">EnumMap</td><td style="text-align:left">ä¸€ç§é”®å€¼å±äºæšä¸¾ç±»å‹çš„æ˜ å°„è¡¨</td></tr><tr><td style="text-align:left">LinkedHashMap</td><td style="text-align:left">ä¸€ç§å¯ä»¥è®°ä½é”®/å€¼é¡¹æ·»åŠ æ¬¡åºçš„æ˜ å°„è¡¨</td></tr><tr><td style="text-align:left">WeakHashMap</td><td style="text-align:left">ä¸€ç§å…¶å€¼æ— ç”¨æ­¦ä¹‹åœ°åå¯ä»¥è¢«åƒåœ¾å›æ”¶å™¨å›æ”¶çš„æ˜ å°„è¡¨</td></tr><tr><td style="text-align:left">IdentityHashMap</td><td style="text-align:left">ä¸€ç§ç”¨ == è€Œä¸æ˜¯ç”¨ equals æ¯”è¾ƒé”®å€¼çš„æ˜ å°„è¡¨</td></tr></tbody></table><p><img src="//onns.xyz/blog/image/20200316-1.png" alt="é›†åˆæ¡†æ¶ä¸­çš„ç±»"></p></center><ul><li>æ•°ç»„å’Œæ•°ç»„åˆ—è¡¨éƒ½æœ‰ä¸€ä¸ªé‡å¤§çš„ç¼ºé™·ã€‚è¿™å°±æ˜¯ä»æ•°ç»„çš„<code>ä¸­é—´ä½ç½®æ’å…¥/åˆ é™¤</code>ä¸€ä¸ªå…ƒç´ è¦ä»˜å‡ºå¾ˆå¤§çš„ä»£ä»·ï¼Œå…¶åŸå› æ˜¯æ•°ç»„ä¸­å¤„äºè¢«åˆ é™¤å…ƒç´ ä¹‹åçš„æ‰€æœ‰å…ƒç´ éƒ½è¦å‘æ•°ç»„çš„å‰ç«¯ç§»åŠ¨ã€‚</li><li>é“¾è¡¨æ˜¯ä¸€ä¸ªæœ‰åºé›†åˆã€‚</li><li>å¯ä»¥æ ¹æ®éœ€è¦ç»™å®¹å™¨é™„åŠ è®¸å¤šçš„è¿­ä»£å™¨ï¼Œä½†æ˜¯è¿™äº›è¿­ä»£å™¨åªèƒ½<code>è¯»å–åˆ—è¡¨</code>ã€‚å¦å¤–ï¼Œå†å•ç‹¬é™„åŠ ä¸€ä¸ª<code>æ—¢èƒ½è¯»åˆèƒ½å†™</code>çš„è¿­ä»£å™¨ã€‚</li><li>è¿­ä»£å™¨æ£€æµ‹åˆ°å¹¶å‘ä¿®æ”¹ï¼šåœ¨æ¯ä¸ªè¿­ä»£å™¨æ–¹æ³•çš„å¼€å§‹å¤„æ£€æŸ¥è‡ªå·±æ”¹å†™æ“ä½œçš„è®¡æ•°å€¼æ˜¯å¦ä¸é›†åˆçš„æ”¹å†™æ“ä½œè®¡æ•°å€¼ä¸€è‡´ã€‚</li><li>æ•£åˆ—è¡¨ï¼ˆhash tableï¼‰ï¼šè¦æƒ³æŸ»æ‰¾è¡¨ä¸­å¯¹è±¡çš„ä½ç½®ï¼Œå°±è¦å…ˆè®¡ç®—å®ƒçš„æ•£åˆ—ç ï¼Œç„¶åä¸æ¡¶çš„æ€»æ•°å–ä½™ï¼Œæ‰€å¾—åˆ°çš„ç»“æœå°±æ˜¯ä¿å­˜è¿™ä¸ªå…ƒç´ çš„æ¡¶çš„ç´¢å¼•ã€‚</li><li>è£…å¡«å› å­ï¼ˆload factorï¼‰å†³å®šä½•æ—¶å¯¹æ•£åˆ—è¡¨è¿›è¡Œå†æ•£åˆ—ã€‚</li><li>æ ‘é›†æ˜¯ä¸€ä¸ªæœ‰åºé›†åˆã€‚</li><li>é“¾æ¥æ•£åˆ—æ˜ å°„å°†ç”¨<code>è®¿é—®é¡ºåº</code>ï¼Œè€Œä¸æ˜¯<code>æ’å…¥é¡ºåº</code>ï¼Œå¯¹æ˜ å°„æ¡ç›®è¿›è¡Œè¿­ä»£ã€‚</li><li>æ¯æ¬¡è°ƒç”¨ get æˆ– putï¼Œå—åˆ°å½±å“çš„æ¡ç›®å°†ä»å½“å‰çš„ä½ç½®åˆ é™¤ï¼Œå¹¶æ”¾åˆ°æ¡ç›®é“¾è¡¨çš„å°¾éƒ¨ï¼ˆåªæœ‰æ¡ç›®åœ¨é“¾è¡¨ä¸­çš„ä½ç½®ä¼šå—å½±å“ï¼Œè€Œæ•£åˆ—è¡¨ä¸­çš„æ¡¶ä¸ä¼šå—å½±å“ã€‚ä¸€ä¸ªæ¡ç›®æ€»ä½äºä¸é”®æ•£åˆ—ç å¯¹åº”çš„æ¡¶ä¸­ï¼‰ã€‚</li><li>EmimSet æ˜¯ä¸€ä¸ªæšä¸¾ç±»å‹å…ƒç´ é›†çš„é«˜æ•ˆå®ç°ã€‚EnumSet ç±»æ²¡æœ‰å…¬å…±çš„æ„é€ å™¨ã€‚</li><li><code>IdentityHashMap</code> ç±»çš„é”®çš„æ•£åˆ—å€¼ä¸æ˜¯ç”¨ <code>hashCode</code> å‡½æ•°è®¡ç®— çš„ï¼Œè€Œæ˜¯ç”¨ <code>System.identityHashCode</code> æ–¹æ³•è®¡ç®—çš„ã€‚å®ƒæ ¹æ®å¯¹è±¡çš„å†…å­˜åœ°å€æ¥è®¡ç®—æ•£åˆ—ç ã€‚ä¸¤ä¸ªå¯¹è±¡åœ¨æ¯”è¾ƒæ—¶ä½¿ç”¨ <code>==</code>ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaå­¦ä¹ ç¬”è®°ï¼ˆå…­ï¼‰</title>
      <link href="/blog/2020/03/14/java-notes-6/"/>
      <url>/blog/2020/03/14/java-notes-6/</url>
      
        <content type="html"><![CDATA[<p>Javaæ ¸å¿ƒæŠ€æœ¯å·ä¸€åŸºç¡€çŸ¥è¯†ç¬¬10ç‰ˆ</p><h2 id="èŒƒå‹ç¨‹åºè®¾è®¡"><a class="header-anchor" href="#èŒƒå‹ç¨‹åºè®¾è®¡">#</a>èŒƒå‹ç¨‹åºè®¾è®¡</h2><a id="more"></a><ul><li>æ„é€ å‡½æ•°ä¸­å¯ä»¥çœç•¥æ³›å‹ç±»å‹ã€‚<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;String&gt; file = <span class="keyword">new</span> ArrayList&lt;&gt;()</span><br></pre></td></tr></table></figure></li><li>å‡ºç°ç¼–è¯‘é”™è¯¯æ¯”ç±»åœ¨è¿è¡Œæ—¶å‡ºç°ç±»çš„å¼ºåˆ¶ç±»å‹è½¬æ¢å¼‚å¸¸è¦å¥½å¾—å¤šã€‚</li><li><code>ç±»å‹å‚æ•°</code>ä½¿å¾—ç¨‹åºå…·æœ‰æ›´å¥½çš„<code>å¯è¯»æ€§</code>å’Œ<code>å®‰å…¨æ€§</code>ã€‚</li><li>æ³›å‹ç±»å¯ä»¥æœ‰å¤šä¸ªç±»å‹å˜é‡ï¼Œä¾‹å¦‚ <code>public class Pair&lt;T, U&gt; { ... }</code>ã€‚</li><li>æ³›å‹æ–¹æ³•å¯ä»¥å®šä¹‰åœ¨æ™®é€šç±»ä¸­ï¼Œä¹Ÿå¯ä»¥å®šä¹‰åœ¨æ³›å‹ç±»ä¸­ã€‚</li><li>ç±»å‹å˜é‡æ”¾åœ¨ä¿®é¥°ç¬¦çš„åé¢ï¼Œè¿”å›ç±»å‹çš„å‰é¢ã€‚<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ArrayAlg</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">T <span class="title">getMiddle</span><span class="params">(T... a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a[a.length / <span class="number">2</span>];</span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>å½“è°ƒç”¨ä¸€ä¸ªæ³›å‹æ–¹æ³•æ—¶ï¼Œåœ¨æ–¹æ³•åå‰çš„å°–æ‹¬å·ä¸­æ”¾äººå…·ä½“çš„ç±»å‹ï¼š<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String middle = ArrayAlg.&lt;String&gt;getMiddle(<span class="string">"John"</span>, <span class="string">"Q."</span>, <span class="string">"Public"</span>);</span><br></pre></td></tr></table></figure></li><li>å¯ä»¥é€šè¿‡å¯¹ç±»å‹å˜é‡ T è®¾ç½®<code>é™å®š</code>æ¥å¯¹ç±»å‹å˜é‡åŠ ä»¥çº¦æŸã€‚<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T extends Comparable&gt; <span class="function">T <span class="title">min</span><span class="params">(T[] a)</span> ...</span></span><br></pre></td></tr></table></figure></li><li>ä¸€ä¸ªç±»å‹å˜é‡æˆ–é€šé…ç¬¦å¯ä»¥æœ‰å¤šä¸ªé™å®šï¼Œä¾‹å¦‚ï¼š<code>T extends Comparable &amp; Serializable</code>ã€‚é™å®šç±»å‹ç”¨ <code>&amp;</code> åˆ†éš”ï¼Œè€Œ <code>,</code> ç”¨æ¥åˆ†éš”ç±»å‹å˜é‡ã€‚</li><li>åœ¨ Java çš„ç»§æ‰¿ä¸­ï¼Œå¯ä»¥æ ¹æ®éœ€è¦æ‹¥æœ‰å¤šä¸ªæ¥å£è¶…ç±»å‹ï¼Œä½†é™å®šä¸­è‡³å¤šæœ‰ä¸€ä¸ªç±»ã€‚å¦‚æœç”¨ ä¸€ä¸ªç±»ä½œä¸ºé™å®šï¼Œå®ƒå¿…é¡»æ˜¯é™å®šåˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªã€‚<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></li><li>æ— è®ºä½•æ—¶å®šä¹‰ä¸€ä¸ªæ³›å‹ç±»å‹ï¼Œéƒ½è‡ªåŠ¨æä¾›äº†ä¸€ä¸ªç›¸åº”çš„åŸå§‹ç±»å‹ï¼ˆraw typeï¼‰ã€‚</li><li>åŸå§‹ç±»å‹ç”¨ç¬¬ä¸€ä¸ªé™å®šçš„ç±»å‹å˜é‡æ¥æ›¿æ¢ï¼Œå¦‚æœæ²¡æœ‰ç»™å®šé™å®šå°±ç”¨ <code>Object</code> æ›¿æ¢ã€‚</li><li>å½“ç¨‹åºè°ƒç”¨æ³›å‹æ–¹æ³•æ—¶ï¼Œå¦‚æœæ“¦é™¤è¿”å›ç±»å‹ï¼Œç¼–è¯‘å™¨æ’å…¥å¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Pair&lt;Employee&gt; buddies = ...;</span><br><span class="line">Employee buddy = buddies.getFirst();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. å¯¹åŸå§‹æ–¹æ³• Pair.getFirst çš„è°ƒç”¨ã€‚</span></span><br><span class="line"><span class="comment">// 2. å°†è¿”å›çš„ Object ç±»å‹å¼ºåˆ¶è½¬æ¢ä¸º Employee ç±»å‹ã€‚</span></span><br></pre></td></tr></table></figure></li><li>Java æ³›å‹è½¬æ¢ï¼š<ul><li>è™šæ‹Ÿæœºä¸­æ²¡æœ‰æ³›å‹ï¼Œåªæœ‰æ™®é€šçš„ç±»å’Œæ–¹æ³•ã€‚</li><li>æ‰€æœ‰çš„ç±»å‹å‚æ•°éƒ½ç”¨å®ƒä»¬çš„é™å®šç±»å‹æ›¿æ¢ã€‚</li><li>æ¡¥æ–¹æ³•è¢«åˆæˆæ¥ä¿æŒå¤šæ€ã€‚</li><li>ä¸ºä¿æŒç±»å‹å®‰å…¨æ€§ï¼Œå¿…è¦æ—¶æ’äººå¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚</li></ul></li><li>æ¡¥æ–¹æ³•ï¼šè§£å†³ç±»å‹æ“¦é™¤ä¸å¤šæ€å‘ç”Ÿçš„å†²çªã€‚<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DateInterval</span> <span class="keyword">extends</span> <span class="title">Pair</span>&lt;<span class="title">LocalDate</span>&gt; </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSecond</span><span class="params">(LocalDate second)</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸Šè¿°ç±»æ“¦é™¤åä¼šå˜æˆ</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DateInterval</span> <span class="keyword">extends</span> <span class="title">Pair</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSecond</span><span class="params">(LocalDate second)</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä½†ä¼šä»Pairç±»ä¸­ç»§æ‰¿ä¸€ä¸ªæ–¹æ³•</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pair</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSecond</span><span class="params">(Object second)</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ¡¥æ–¹æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSecond</span><span class="params">(Object second)</span> </span>&#123; setSecond((Date) second); &#125;</span><br></pre></td></tr></table></figure></li><li>å¤§å¤šæ•° Java æ³›å‹é™åˆ¶éƒ½æ˜¯ç”±ç±»å‹æ“¦é™¤å¼•èµ·çš„ã€‚</li><li>ä¸èƒ½ç”¨ç±»å‹å‚æ•°ä»£æ›¿åŸºæœ¬ç±»å‹ã€‚</li><li>è™šæ‹Ÿæœºä¸­çš„å¯¹è±¡æ€»æœ‰ä¸€ä¸ªç‰¹å®šçš„éæ³›å‹ç±»å‹ã€‚</li><li>ä¸èƒ½å®ä¾‹åŒ–å‚æ•°åŒ–ç±»å‹çš„æ•°ç»„ã€‚</li><li>ä¸èƒ½å®ä¾‹åŒ–ç±»å‹å˜ç½®ã€‚</li><li>ä¸èƒ½æ„é€ æ³›å‹æ•°ç»„ã€‚</li><li>å¸¦æœ‰è¶…ç±»å‹é™å®šçš„é€šé…ç¬¦å¯ä»¥å‘æ³›å‹å¯¹è±¡å†™äººï¼Œå¸¦æœ‰å­ç±»å‹é™å®šçš„é€šé…ç¬¦å¯ä»¥ä»æ³›å‹å¯¹è±¡è¯»å–ã€‚</li></ul><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>ä¸å¤ªæ‡‚ <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li><li id="fn2" class="footnote-item"><p>é“ç†ç†è§£ä½†è¿˜éœ€è¦æ›´è¯¦ç»†çš„æ–‡æ¡£è¡¥å…… <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>InDesignå°æŠ€å·§</title>
      <link href="/blog/2020/02/27/Indesign-skills/"/>
      <url>/blog/2020/02/27/Indesign-skills/</url>
      
        <content type="html"><![CDATA[<p>è®°å½•ä¸€äº›InDesignçš„å°æŠ€å·§ã€‚</p><a id="more"></a><ul><li>InDesignå¯¼å…¥é«˜æ¸…å›¾åƒä¼šå¤±çœŸï¼ŒåŸå› æ˜¯ä¸ºäº†åŠ å¿«å›¾åƒçš„åŠ è½½é€Ÿåº¦ï¼Œè§£å†³æ–¹æ¡ˆï¼š<code>View-&gt;Display Performance-&gt;High Quality Display</code>ã€‚<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></li></ul><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="https://www.jb51.net/Indesign/632934.html" target="_blank" rel="noopener">Indesignå¯¼å…¥çš„é«˜æ¸…å›¾ç‰‡å˜æ¨¡ç³Šæ€ä¹ˆåŠ?</a> <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> design </category>
          
      </categories>
      
      
        <tags>
            
            <tag> indesign </tag>
            
            <tag> adobe </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaå­¦ä¹ ç¬”è®°ï¼ˆäº”ï¼‰</title>
      <link href="/blog/2020/02/25/java-notes-5/"/>
      <url>/blog/2020/02/25/java-notes-5/</url>
      
        <content type="html"><![CDATA[<p>Javaæ ¸å¿ƒæŠ€æœ¯å·ä¸€åŸºç¡€çŸ¥è¯†ç¬¬10ç‰ˆ</p><h2 id="å¼‚å¸¸ã€æ–­è¨€å’Œæ—¥å¿—"><a class="header-anchor" href="#å¼‚å¸¸ã€æ–­è¨€å’Œæ—¥å¿—">#</a>å¼‚å¸¸ã€æ–­è¨€å’Œæ—¥å¿—</h2><a id="more"></a><h3 id="å¼‚å¸¸"><a class="header-anchor" href="#å¼‚å¸¸">#</a>å¼‚å¸¸</h3><ul><li>åœ¨ Java ç¨‹åºè®¾è®¡è¯­è¨€ä¸­ï¼Œå¼‚å¸¸å¯¹è±¡éƒ½æ˜¯æ´¾ç”Ÿäº <code>Throwable</code> ç±»çš„ä¸€ä¸ªå®ä¾‹ã€‚</li><li><code>Error</code> ç±»å±‚æ¬¡ç»“æ„æè¿°äº† Java è¿è¡Œæ—¶ç³»ç»Ÿçš„å†…éƒ¨é”™è¯¯å’Œèµ„æºè€—å°½é”™è¯¯ã€‚é™¤äº†é€šå‘Šç»™ç”¨æˆ·ï¼Œå¹¶å°½åŠ›ä½¿ç¨‹åºå®‰å…¨åœ°ç»ˆæ­¢ä¹‹å¤–ï¼Œå†æ— èƒ½ä¸ºåŠ›ã€‚</li><li>åœ¨è®¾è®¡ Java ç¨‹åºæ—¶ï¼Œ éœ€è¦å…³æ³¨ <code>Exception</code> å±‚æ¬¡ç»“æ„ï¼š<ol><li><strong>RuntimeException</strong>ï¼šç”±ç¨‹åºé”™è¯¯å¯¼è‡´çš„å¼‚å¸¸ã€‚</li><li><strong>å…¶å®ƒå¼‚å¸¸</strong>ï¼šç¨‹åºæœ¬èº«æ²¡æœ‰é—®é¢˜ï¼Œä½†ç”±äºåƒ<code>I/Oé”™è¯¯</code>è¿™ç±»é—®é¢˜å¯¼è‡´çš„å¼‚å¸¸ã€‚</li></ol></li><li>å¦‚æœå‡ºç° <code>RuntimeException</code> å¼‚å¸¸ï¼Œé‚£ä¹ˆå°±ä¸€å®šæ˜¯ä½ çš„é—®é¢˜ã€‚</li><li>æ´¾ç”Ÿäº Error ç±»æˆ– RuntimeException ç±»çš„æ‰€æœ‰å¼‚å¸¸ç§°ä¸º<code>éå—æŸ¥ï¼ˆuncheckedï¼‰å¼‚å¸¸</code>ï¼Œæ‰€æœ‰å…¶ä»–çš„å¼‚å¸¸ç§°ä¸º<code>å—æŸ¥ï¼ˆcheckedï¼‰å¼‚å¸¸</code>ã€‚</li><li>ä¸€ä¸ªæ–¹æ³•å¿…é¡»å£°æ˜æ‰€æœ‰å¯èƒ½æŠ›å‡ºçš„å—æŸ¥å¼‚å¸¸ï¼Œè€Œéå—æŸ¥å¼‚å¸¸è¦ä¹ˆä¸å¯æ§åˆ¶ï¼ˆErrorï¼‰ï¼Œè¦ä¹ˆå°±åº”è¯¥é¿å…å‘ç”Ÿï¼ˆRuntimeExceptionï¼‰ã€‚</li><li>æŠ›å‡ºå¼‚å¸¸ï¼š<ol><li>æ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„å¼‚å¸¸ç±»ã€‚</li><li>åˆ›å»ºè¿™ä¸ªç±»çš„ä¸€ä¸ªå¯¹è±¡ã€‚</li><li>å°†å¯¹è±¡æŠ›å‡ºã€‚</li></ol></li><li>å¦‚æœè°ƒç”¨äº†ä¸€ä¸ªæŠ›å‡ºå—æŸ¥å¼‚å¸¸çš„æ–¹æ³•ï¼Œå°±å¿…é¡»å¯¹å®ƒè¿›è¡Œå¤„ç†ï¼Œæˆ–è€…ç»§ç»­ä¼ é€’ã€‚</li><li>åº”è¯¥æ•è·é‚£äº›<code>çŸ¥é“å¦‚ä½•å¤„ç†çš„å¼‚å¸¸</code>ï¼Œè€Œå°†é‚£äº›<code>ä¸çŸ¥é“æ€æ ·å¤„ç†çš„å¼‚å¸¸</code>ç»§ç»­è¿›è¡Œä¼ é€’ã€‚<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">read</span><span class="params">(String filename)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">try</span></span><br><span class="line">  &#123;</span><br><span class="line">    InputStream in = <span class="keyword">new</span> FileInputStream(filename);</span><br><span class="line">    <span class="keyword">int</span> b;</span><br><span class="line">    <span class="keyword">while</span> ((b = in.read()) != -<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="comment">// process input</span></span><br><span class="line">      ...</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">catch</span> (IOException exception)</span><br><span class="line">  &#123;</span><br><span class="line">    exception.printStackTrace();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´å¥½çš„é€‰æ‹©ğŸ‘‡</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">read</span><span class="params">(String filename)</span> <span class="keyword">throws</span> IOException</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  InputStream in = <span class="keyword">new</span> FileInputStream(filename);</span><br><span class="line">  <span class="keyword">int</span> b;</span><br><span class="line">  <span class="keyword">while</span> ((b = in.read()) != -<span class="number">1</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="comment">// process input</span></span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>å¦‚æœç¼–å†™ä¸€ä¸ªè¦†ç›–è¶…ç±»çš„æ–¹æ³•ï¼Œè€Œè¿™ä¸ªæ–¹æ³•åˆæ²¡æœ‰æŠ›å‡ºå¼‚å¸¸ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–¹æ³•å°±å¿…é¡»æ•è·æ–¹æ³•ä»£ç ä¸­å‡ºç°çš„æ¯ä¸€ä¸ªå—æŸ¥å¼‚å¸¸ã€‚</li><li>ä¸å…è®¸åœ¨å­ç±»çš„ throws è¯´æ˜ç¬¦ä¸­å‡ºç°è¶…è¿‡è¶…ç±»æ–¹æ³•æ‰€åˆ—å‡ºçš„å¼‚å¸¸ç±»èŒƒå›´ã€‚</li><li>å¼ºçƒˆå»ºè®®ä½¿ç”¨è¿™ç§åŒ…è£…æŠ€æœ¯ï¼Œè¿™æ ·å¯ä»¥è®©ç”¨æˆ·æŠ›å‡ºå­ç³»ç»Ÿä¸­çš„é«˜çº§å¼‚å¸¸ï¼Œè€Œä¸ä¼šä¸¢å¤±åŸå§‹å¼‚å¸¸çš„ç»†èŠ‚ã€‚<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> </span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment">// access the database</span></span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (SQLException e)</span><br><span class="line">&#123;</span><br><span class="line">  Throwable se = <span class="keyword">new</span> ServletException(<span class="string">"database error"</span>);</span><br><span class="line">  se.initCause(e);</span><br><span class="line">  <span class="keyword">throw</span> se;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å¾—åŸå§‹å¼‚å¸¸</span></span><br><span class="line">Throwable e = se.getCause();</span><br></pre></td></tr></table></figure></li><li>ä¸ç®¡æ˜¯å¦æœ‰å¼‚å¸¸è¢«æ•è·ï¼Œ<code>finally</code> å­å¥ä¸­çš„ä»£ç éƒ½è¢«æ‰§è¡Œã€‚</li><li><code>å¸¦èµ„æºçš„ try è¯­å¥</code>å¯ä»¥å¾ˆå¥½åœ°å¤„ç†â€œå¦‚æœ try å—æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼Œè€Œä¸” close æ–¹æ³•ä¹ŸæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸â€çš„é—®é¢˜ã€‚</li><li>å¼‚å¸¸å¤„ç†ä¸èƒ½ä»£æ›¿ç®€å•çš„æµ‹è¯•ã€‚å› ä¸ºå¼‚å¸¸æ•è·çš„è€—æ—¶è¾ƒé•¿ã€‚</li><li>ä¸è¦è¿‡åˆ†åœ°ç»†åŒ–å¼‚å¸¸ã€‚</li><li>ä¸è¦å‹åˆ¶å¼‚å¸¸ã€‚<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></li><li>åœ¨æ£€æµ‹é”™è¯¯æ—¶ï¼Œâ€œè‹›åˆ»â€è¦æ¯”â€œæ”¾ä»»â€æ›´å¥½ã€‚å°½æ—©æŠ›å‡ºå¼‚å¸¸å¯ä»¥è®©ä½¿ç”¨è€…æ›´æ–¹ä¾¿çš„å¤„ç†ï¼Œè€ŒæœªçŸ¥çš„å¼‚å¸¸æ‰æ˜¯æœ€éš¾æ£€æŸ¥çš„ã€‚</li><li>ä¸è¦ç¾äºä¼ é€’å¼‚å¸¸ã€‚</li></ul><hr><h3 id="æ–­è¨€"><a class="header-anchor" href="#æ–­è¨€">#</a>æ–­è¨€</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">assert</span> æ¡ä»¶;</span><br><span class="line"><span class="keyword">assert</span> æ¡ä»¶:è¡¨è¾¾å¼;</span><br></pre></td></tr></table></figure><ul><li>æ–­è¨€å¤±è´¥æ˜¯è‡´å‘½çš„ã€ä¸å¯æ¢å¤çš„é”™è¯¯ã€‚</li><li>æ–­è¨€æ£€æŸ¥åªç”¨äºå¼€å‘å’Œæµ‹é˜¶æ®µã€‚</li></ul><hr><ul><li>7ä¸ªæ—¥å¿—è®°å½•å™¨çº§åˆ«ï¼š<ul><li>SEVERE</li><li>WARNING</li><li>INFO</li><li>CONFIG</li><li>FINE</li><li>FINER</li><li>FINEST</li></ul></li></ul><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>æ²¡å¤ªçœ‹æ‡‚ <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaå­¦ä¹ ç¬”è®°ï¼ˆå››ï¼‰</title>
      <link href="/blog/2020/02/24/java-notes-4/"/>
      <url>/blog/2020/02/24/java-notes-4/</url>
      
        <content type="html"><![CDATA[<p>Javaæ ¸å¿ƒæŠ€æœ¯å·ä¸€åŸºç¡€çŸ¥è¯†ç¬¬10ç‰ˆ</p><h2 id="æ¥å£ã€lambda-è¡¨è¾¾å¼ä¸å†…éƒ¨ç±»"><a class="header-anchor" href="#æ¥å£ã€lambda-è¡¨è¾¾å¼ä¸å†…éƒ¨ç±»">#</a>æ¥å£ã€lambda è¡¨è¾¾å¼ä¸å†…éƒ¨ç±»</h2><a id="more"></a><h3 id="æ¥å£"><a class="header-anchor" href="#æ¥å£">#</a>æ¥å£</h3><ul><li>æ¥å£ä¸­çš„æ‰€æœ‰æ–¹æ³•è‡ªåŠ¨åœ°å±äº <code>public</code>ï¼Œåœ¨æ¥å£ä¸­å£°æ˜æ–¹æ³•æ—¶ä¸å¿…æä¾›å…³é”®å­— <code>public</code>ã€‚</li><li>æ¥å£ç»ä¸èƒ½å«æœ‰ <code>å®ä¾‹åŸŸ</code>ã€‚æä¾›å®ä¾‹åŸŸå’Œæ–¹æ³•å®ç°çš„ä»»åŠ¡åº”è¯¥ç”±å®ç°æ¥å£çš„é‚£ä¸ªç±»æ¥å®Œæˆã€‚</li><li>ä¸ºäº†è®©ç±»å®ç°ä¸€ä¸ªæ¥å£ï¼Œéœ€è¦ï¼š<ol><li>å°†ç±»å£°æ˜ä¸ºå®ç°ç»™å®šçš„æ¥å£ã€‚<br>è¦å°†ç±»å£°æ˜ä¸ºå®ç°æŸä¸ªæ¥å£ï¼Œéœ€è¦ä½¿ç”¨å…³é”®å­— <strong>implements</strong>ã€‚</li></ol>  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span> <span class="keyword">implements</span> <span class="title">Comparable</span></span></span><br></pre></td></tr></table></figure><ol start="2"><li>å¯¹æ¥å£ä¸­çš„æ‰€æœ‰æ–¹æ³•è¿›è¡Œå®šä¹‰ã€‚</li></ol></li><li>å¦‚æœå­˜åœ¨è¿™æ ·ä¸€ç§é€šç”¨ç®—æ³•ï¼Œå®ƒèƒ½å¤Ÿå¯¹ä¸¤ä¸ªä¸åŒçš„å­ç±»å¯¹è±¡è¿›è¡Œæ¯”è¾ƒï¼Œåˆ™åº”è¯¥åœ¨<code>è¶…ç±»</code>ä¸­æä¾›ä¸€ä¸ª <code>compareTo</code> æ–¹æ³•ï¼Œå¹¶å°†è¿™ä¸ªæ–¹æ³•å£°æ˜ä¸º <code>final</code>ã€‚</li><li>æ¥å£ä¸æ˜¯ç±»ï¼Œä¸èƒ½ä½¿ç”¨ <code>new</code> è¿ç®—ç¬¦å®ä¾‹åŒ–ä¸€ä¸ªæ¥å£ï¼Œä½†æ˜¯å¯ä»¥å£°æ˜æ¥å£çš„å˜é‡ï¼Œæ¥å£å˜é‡å¿…é¡»å¼•ç”¨å®ç°äº†æ¥å£çš„ç±»å¯¹è±¡ã€‚<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="keyword">new</span> Comparable(...); <span class="comment">// ERROR</span></span><br><span class="line">Comparable x; <span class="comment">// OK</span></span><br><span class="line">x = <span class="keyword">new</span> Employee(...); <span class="comment">// OK provided Employee implements Comparable</span></span><br></pre></td></tr></table></figure></li><li>å¯ä»¥ä½¿ç”¨ <code>instance</code> æ£€æŸ¥ä¸€ä¸ªå¯¹è±¡æ˜¯å¦å®ç°äº†æŸä¸ªç‰¹å®šçš„æ¥å£ã€‚<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (anObject <span class="keyword">instanceof</span> Comparable) &#123;...&#125;</span><br></pre></td></tr></table></figure></li><li>æ¥å£ä¸­çš„åŸŸå°†è¢«è‡ªåŠ¨è®¾ä¸º <code>public static final</code>ã€‚</li><li>åœ¨å®ç°æ¥å£æ—¶ï¼Œå¿…é¡»æŠŠæ–¹æ³•å£°æ˜ä¸º <code>public</code>ï¼Œå¦åˆ™ï¼Œç¼–è¯‘å™¨å°†è®¤ä¸ºè¿™ä¸ªæ–¹æ³•çš„è®¿é—®å±æ€§æ˜¯åŒ…å¯è§æ€§ï¼Œå³ç±»çš„é»˜è®¤è®¿é—®å±æ€§ï¼Œä¹‹åç¼–è¯‘å™¨å°±ä¼šç»™å‡ºè¯•å›¾æä¾›æ›´ä¸¥æ ¼çš„è®¿é—®æƒé™çš„è­¦å‘Šä¿¡æ¯ã€‚</li><li>æ¯ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ã€‚</li><li>å¯ä»¥ä¸ºæ¥å£æ–¹æ³•æä¾›ä¸€ä¸ªé»˜è®¤å®ç°ï¼Œå¿…é¡»ç”¨ <code>default</code> ä¿®é¥°ç¬¦æ ‡è®°è¿™æ ·ä¸€ä¸ªæ–¹æ³•ã€‚</li><li>é»˜è®¤æ–¹æ³•çš„ä¸€ä¸ªé‡è¦ç”¨æ³•æ˜¯ <code>æ¥å£æ¼”åŒ–ï¼ˆinterface evolutionï¼‰</code>ï¼Œä¿è¯ä¸ä¼šå¯¹æ—§ä»£ç äº§ç”Ÿå½±å“ã€‚</li><li>å¦‚æœå…ˆåœ¨ä¸€ä¸ªæ¥å£ä¸­å°†ä¸€ä¸ªæ–¹æ³•å®šä¹‰ä¸ºé»˜è®¤æ–¹æ³•ï¼Œç„¶ååˆåœ¨è¶…ç±»æˆ–å¦ä¸€ä¸ªæ¥å£ä¸­å®šä¹‰äº†åŒæ ·çš„æ–¹æ³•ï¼Œéµå¾ªå¦‚ä¸‹è§„åˆ™ï¼š<ol><li>è¶…ç±»ä¼˜å…ˆã€‚<br>å¦‚æœè¶…ç±»æä¾›äº†ä¸€ä¸ªå…·ä½“æ–¹æ³•ï¼ŒåŒåè€Œä¸”æœ‰ç›¸åŒå‚æ•°ç±»å‹çš„é»˜è®¤æ–¹æ³•ä¼šè¢«å¿½ç•¥ã€‚</li><li>æ¥å£å†²çªã€‚<br>å¦‚æœä¸€ä¸ªè¶…æ¥å£æä¾›äº†ä¸€ä¸ªé»˜è®¤æ–¹æ³•ï¼Œå¦ä¸€ä¸ªæ¥å£æä¾›äº†ä¸€ä¸ªåŒåè€Œä¸”å‚æ•°ç±»å‹(ä¸è®ºæ˜¯å¦æ˜¯é»˜è®¤å‚æ•°)ç›¸åŒçš„æ–¹æ³•ï¼Œå¿…é¡»è¦†ç›–è¿™ä¸ªæ–¹æ³•æ¥è§£å†³å†²çªã€‚</li></ol></li></ul><hr><p>æ¥å£ä¸å›è°ƒå¯èƒ½åœ¨è¿™é‡Œä¸å¤ªçœ‹å¾—æ‡‚ï¼Œæš‚æ—¶è·³è¿‡ã€‚<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p><hr><h3 id="lambda-è¡¨è¾¾å¼"><a class="header-anchor" href="#lambda-è¡¨è¾¾å¼">#</a>lambda è¡¨è¾¾å¼</h3><ul><li>lambdaè¡¨è¾¾å¼å°±æ˜¯ä¸€ä¸ªä»£ç å—ï¼Œ ä»¥åŠå¿…é¡»ä¼ å…¥ä»£ç çš„å˜é‡è§„èŒƒã€‚<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(String first, String second)</span><br><span class="line">  -&gt; first.length() - second.length()</span><br></pre></td></tr></table></figure></li><li>å¦‚æœä»£ç è¦å®Œæˆçš„è®¡ç®—æ— æ³•æ”¾åœ¨ä¸€ä¸ªè¡¨è¾¾å¼ä¸­ï¼Œå°±å¯ä»¥åƒå†™æ–¹æ³•ä¸€æ ·ï¼ŒæŠŠè¿™äº›ä»£ç æ”¾åœ¨ <code>{}</code> ä¸­ï¼Œ å¹¶åŒ…å«æ˜¾å¼çš„ return è¯­å¥ã€‚<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(String first, String second) -&gt;</span><br><span class="line">&#123; </span><br><span class="line">  <span class="keyword">if</span> (first.length() &lt; second.length()) <span class="keyword">return</span> -<span class="number">1</span>; </span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (first.length() &gt; second.length()) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>å³ä½¿ lambda è¡¨è¾¾å¼æ²¡æœ‰å‚æ•°ï¼Œä»ç„¶è¦æä¾›ç©ºæ‹¬å·ï¼Œå°±åƒæ— å‚æ•°æ–¹æ³•ä¸€æ ·ã€‚<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">() -&gt; &#123; <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">100</span>; i &gt;= <span class="number">0</span>; i-- ) System.out.println(i); &#125;</span><br></pre></td></tr></table></figure></li><li>å¦‚æœå¯ä»¥æ¨å¯¼å‡ºä¸€ä¸ª lambda è¡¨è¾¾å¼çš„å‚æ•°ç±»å‹ï¼Œåˆ™å¯ä»¥å¿½ç•¥å…¶ç±»å‹ã€‚<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Comparator&lt;String&gt; comp</span><br><span class="line">= (first, second) <span class="comment">// Same as (String first, String second)</span></span><br><span class="line">  -&gt; first.length() - second.length();</span><br></pre></td></tr></table></figure></li><li>å¦‚æœæ–¹æ³•åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œè€Œä¸”è¿™ä¸ªå‚æ•°çš„ç±»å‹å¯ä»¥æ¨å¯¼å¾—å‡ºï¼Œé‚£ä¹ˆç”šè‡³è¿˜å¯ä»¥çœç•¥å°æ‹¬å·ã€‚</li><li>æ— éœ€æŒ‡å®š lambda è¡¨è¾¾å¼çš„è¿”å›ç±»å‹ã€‚lambda è¡¨è¾¾å¼çš„è¿”å›ç±»å‹æ€»æ˜¯ä¼šç”±ä¸Šä¸‹æ–‡æ¨å¯¼å¾—å‡ºã€‚</li><li>è¦ç”¨ <code>::</code> æ“ä½œç¬¦åˆ†éš”æ–¹æ³•åä¸å¯¹è±¡æˆ–ç±»åä¸»è¦æœ‰3ç§æƒ…å†µï¼š<ul><li>object::instanceMethod</li><li>Class::staticMethod</li><li>Class::instanceMethod</li></ul></li><li>æ— æ³•æ„é€ æ³›å‹ç±»å‹ <code>T</code> çš„æ•°ç»„ã€‚ï¼ˆæ•°ç»„æ„é€ å™¨å¼•ç”¨å¯¹äºå…‹æœè¿™ä¸ªé™åˆ¶å¾ˆæœ‰ç”¨ã€‚ï¼‰<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Object[] people = stream.toArray(); <span class="comment">// Objectæ•°ç»„å¼•ç”¨</span></span><br><span class="line">Person[] people = stream.toArray(Person[]::<span class="keyword">new</span>); <span class="comment">// Personæ•°ç»„å¼•ç”¨</span></span><br></pre></td></tr></table></figure></li><li>lambda è¡¨è¾¾å¼ä¸­æ•è·çš„å˜é‡å¿…é¡»å®é™…ä¸Šæ˜¯<code>æœ€ç»ˆå˜é‡ï¼ˆeffectively finalï¼‰</code>ã€‚</li><li>lambda è¡¨è¾¾å¼çš„ä½“ä¸åµŒå¥—å—æœ‰ç›¸åŒçš„ä½œç”¨åŸŸã€‚</li><li>åœ¨ lambda è¡¨è¾¾å¼ä¸­å£°æ˜ä¸ä¸€ä¸ªå±€éƒ¨å˜é‡åŒåçš„å‚æ•°æˆ–å±€éƒ¨å˜é‡æ˜¯ä¸åˆæ³•çš„ã€‚<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Path first = Paths.get(<span class="string">"/usr/bin"</span>); </span><br><span class="line">Comparator&lt;String&gt; comp =</span><br><span class="line">(first, second) -&gt; first.length() - second.length();</span><br><span class="line"><span class="comment">// Error: Variable first already defined</span></span><br></pre></td></tr></table></figure></li><li>åœ¨ä¸€ä¸ª lambda è¡¨è¾¾å¼ä¸­ä½¿ç”¨ <code>this</code> å…³é”®å­—æ—¶ï¼Œæ˜¯æŒ‡åˆ›å»ºè¿™ä¸ª lambda è¡¨è¾¾å¼çš„æ–¹æ³•çš„ <code>this</code> å‚æ•°ã€‚</li><li>ä½¿ç”¨ lambda è¡¨è¾¾å¼çš„é‡ç‚¹æ˜¯<code>å»¶è¿Ÿæ‰§è¡Œï¼ˆdeferred executionï¼‰</code>ã€‚</li></ul><hr><h3 id="å†…éƒ¨ç±»"><a class="header-anchor" href="#å†…éƒ¨ç±»">#</a>å†…éƒ¨ç±»</h3><ul><li>ä½¿ç”¨å†…éƒ¨ç±»çš„åŸå› ï¼š<ul><li>å†…éƒ¨ç±»æ–¹æ³•å¯ä»¥è®¿é—®è¯¥ç±»å®šä¹‰æ‰€åœ¨çš„ä½œç”¨åŸŸä¸­çš„æ•°æ®ï¼ŒåŒ…æ‹¬ç§æœ‰çš„æ•°æ®ã€‚</li><li>å†…éƒ¨ç±»å¯ä»¥å¯¹åŒä¸€ä¸ªåŒ…ä¸­çš„å…¶ä»–ç±»éšè—èµ·æ¥ã€‚</li><li>å½“æƒ³è¦å®šä¹‰ä¸€ä¸ªå›è°ƒå‡½æ•°ä¸”ä¸æƒ³ç¼–å†™å¤§é‡ä»£ç æ—¶ï¼Œä½¿ç”¨åŒ¿åï¼ˆanonymousï¼‰å†…éƒ¨ç±»æ¯”è¾ƒä¾¿æ·ã€‚</li></ul></li><li>ä½¿ç”¨å¤–å›´ç±»å¼•ç”¨çš„æ­£è§„è¯­æ³•ä¸º <code>OuterClass.this</code>ã€‚</li></ul><p>å¥½æ™•å•ŠğŸ˜­ï¼Œçœ‹ä¸æ‡‚ã€‚<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup></p><p>ä»£ç†ä¹Ÿå¾…çœ‹<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup></p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>å¾…çœ‹ <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li><li id="fn2" class="footnote-item"><p>å¾…çœ‹ <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p></li><li id="fn3" class="footnote-item"><p>å¾…çœ‹ <a href="#fnref3" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windowsä¸‹è¶…å¥½ç”¨çš„è½¯ä»¶â€”â€”Teleport ultra</title>
      <link href="/blog/2020/02/21/teleport-ultra-for-windows/"/>
      <url>/blog/2020/02/21/teleport-ultra-for-windows/</url>
      
        <content type="html"><![CDATA[<p><code>Teleport ultra</code> æ˜¯ä¸€ä¸ªå¯ä»¥æŠŠæ•´ä¸ªç«™ç¦»çº¿ä¸‹è½½ä¸‹æ¥çš„å·¥å…·ï¼Œè¶…çº§å¥½ç”¨ã€‚<br>æœ‰å¾ˆå¤šæŠ€æœ¯æ–‡æ¡£éƒ½æ˜¯åœ¨çº¿çš„ã€é™æ€çš„ï¼Œç”¨è¿™ä¸ªå·¥å…·å¾ˆåˆé€‚ï½</p><a id="more"></a><ol><li>æ–°å»ºé¡¹ç›®å‘å¯¼</li><li>å¤åˆ¶ä¸€ä¸ªç½‘å€ï¼ŒåŒ…å«è¯¥ç½‘ç«™çš„ç›®å½•ç»“æ„</li><li>é€‰æ‹©ç½‘ç«™å’Œçˆ¬å–æ·±åº¦</li><li>é€‰æ‹©çˆ¬å–æ‰€æœ‰æ–‡ä»¶</li><li>ä¿å­˜å½“å‰é¡¹ç›®</li><li>ç‚¹å‡»è“è‰²ä¸‰è§’å·â–¶ï¸å¼€å§‹æŒ‰é’®</li><li>å®Œæˆ</li></ol>]]></content>
      
      
      <categories>
          
          <category> windows </category>
          
      </categories>
      
      
        <tags>
            
            <tag> windows </tag>
            
            <tag> software </tag>
            
            <tag> teleport ultra </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¾®ä¿¡æ–‡ç« svgäº¤äº’</title>
      <link href="/blog/2020/02/20/wechat-svg/"/>
      <url>/blog/2020/02/20/wechat-svg/</url>
      
        <content type="html"><![CDATA[<p>å¦‚æœä¸æ˜¯ç‰¹åˆ«æƒ³åšçš„è¯ï¼Œè¿˜æ˜¯åœ¨æ–‡ç« çš„å¼€å¤´åŠé€€ä¸€æ³¢ï¼Œå› ä¸º <strong>ä»˜å‡º &gt;&gt; æ”¶è·</strong>ï¼Œä¸è®ºå¦‚ä½•ï¼Œæœ€ç»ˆçš„åå“ä¸æ˜¯ç‰¹åˆ«å¥½ã€‚</p><a id="more"></a><p>å›å½’æ­£é¢˜ï¼Œå‰å‰ååå¼„äº†ä¸€å‘¨å¤šçš„æ—¶é—´ï¼ŒæœŸé—´éƒ½æ˜¯é«˜å¼ºåº¦ç ”ç©¶çš„é‚£ç§ï¼Œè¸©è¿‡äº†å¾ˆå¤šå‘ï¼Œå¸Œæœ›å¤§å®¶å¤ç°çš„æ—¶å€™å°‘è¸©äº›å‘ã€‚</p><h2 id="å£¹"><a class="header-anchor" href="#å£¹">#</a>å£¹</h2><p>æœ€åˆçš„æ—¶å€™æ˜¯ä¸€ç¯‡åå«<a href="https://mp.weixin.qq.com/s/-gugc0Gn0XZXSOONw-NKHg" target="_blank" rel="noopener">ã€Š2020ï¼Œæˆ‘çš„æ–°å¹´ç­¾å±…ç„¶æ˜¯â€¦ã€‹</a>çš„æ¨é€å¸å¼•äº†å¤§å®¶çš„æ³¨æ„åŠ›ï¼Œç«™åœ¨ä»–ä»¬çš„è‚©ï¼ˆchuangï¼‰è†€ï¼ˆyiï¼‰ä¸Šï¼Œæˆ‘ä»¬åšäº†è¿›ä¸€æ­¥çš„å‡åã€‚</p><p>é¦–å…ˆéœ€è¦äº†è§£ä¸€ä¸‹å¾®ä¿¡æ–‡ç« æ¨é€çš„å®šä½ï¼Œå®ƒæ˜¯ä¸€ä¸ª<code>é˜‰å‰²</code>äº†çš„ç½‘é¡µï¼Œåªä¿ç•™äº†<code>æ–‡æœ¬</code>ã€<code>åª’ä½“</code>å’Œ<code>æ ·å¼</code>è¿™ä¸‰ç§å†…å®¹ï¼Œè€Œæˆ‘ä»¬æ­£å¸¸ç½‘é¡µäº¤äº’æ‰€ä½¿ç”¨çš„ <code>js</code> åˆ™å®Œå…¨ä¸èƒ½ä½¿ç”¨ï¼Œç”šè‡³è¿ <code>&lt;style&gt;&lt;/style&gt;</code> è¿™æ ·çš„æ ·å¼æ ‡ç­¾ä¹Ÿä¼šè¢«ç§»é™¤ã€‚ä¸€å¥è¯æ¦‚æ‹¬ï¼Œä½ åªèƒ½å±•ç¤ºå†…å®¹ï¼Œè€Œæ— æ³•ä¸è¯»è€…äº’åŠ¨ï¼Œæ— æ³•äº¤äº’ã€‚</p><p>è€Œ <code>svg</code> æ˜¯ä¸ºæ•°ä¸å¤šçš„å¯ä»¥ç”¨åˆ°çš„å¯å®šåˆ¶å¼çš„äº¤äº’æ ·å¼ï¼Œå®ƒçš„å‡ºèº«å¯ä»¥ç™¾åº¦å¦‚æœä½ æ„Ÿå…´è¶£ã€‚<code>svg</code> èƒ½å¤Ÿåšåˆ°çš„äº¤äº’æˆ‘ç›®å‰çŸ¥é“ä¸¤ä¸ª<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>ï¼Œç®€è¦æ¦‚æ‹¬å°±æ˜¯ï¼š<code>é€æ˜åº¦/è§’åº¦å˜åŒ–</code>å’Œ<code>ï¼ˆæŒ‰ç…§å›ºå®šè½¨è¿¹ï¼‰ç§»åŠ¨</code>ï¼ŒåŸºæœ¬ä¸Šæ‰€æœ‰çš„äº¤äº’éƒ½æ˜¯è¿™ä¸¤ä¸ªäº¤äº’çš„<code>å»¶ä¼¸</code>å’Œ<code>ç»„åˆ</code>ã€‚</p><p><strong>é€æ˜åº¦/è§’åº¦å˜åŒ–</strong>ï¼šå®é™…ä¸­ç”¨åˆ°çš„å°±æ˜¯<code>ç‚¹å‡»ç©ºç™½å¤„æ˜¾ç¤ºæ–‡å­—</code>ã€‚<br><strong>ï¼ˆæŒ‰ç…§å›ºå®šè½¨è¿¹ï¼‰ç§»åŠ¨</strong>ï¼š<code>ç‚¹å‡»ç§»åŠ¨</code>ã€<code>æŠ½å¥–</code>ç­‰ã€‚</p><h2 id="è´°"><a class="header-anchor" href="#è´°">#</a>è´°</h2><p>æŠ½ç­¾çš„æœ¬è´¨ä¸Šå°±æ˜¯<strong>ç­¾é«˜é€Ÿçš„ç§»åŠ¨</strong>ï¼Œå¯èƒ½æœ‰äº›äººä¸å¤ªç†è§£ï¼Œæˆ‘è§£é‡Šä¸‹ã€‚å¦‚æœä¸æƒ³äº†è§£æˆ–è€…è§‰å¾—æˆ‘è§£é‡Šçš„ä¸æ¸…æ¥šå¯ä»¥è·³è¿‡æˆ–è€…çœ‹<a href="https://www.zhihu.com/question/25403913/answer/142033761" target="_blank" rel="noopener">ã€Šä¸ºä»€ä¹ˆé«˜é€Ÿé¡ºæ—¶é’ˆæ—‹è½¬çš„è½¦è½®çœ‹èµ·æ¥åƒæ˜¯ç¼“æ…¢çš„é€†æ—¶é’ˆæ—‹è½¬ï¼Ÿã€‹</a>ã€‚</p><p>æˆ‘ä»¬å¶å°”çœ‹å…¬è·¯ä¸Šçš„è½¦è½®ä¼šä¿æŒé™æ­¢ï¼Œå› ä¸ºè½¦è½®é€Ÿåº¦è¿‡å¿«ï¼Œæ¯æ¬¡çœ‹åˆ°çš„æ—¶å€™è½¦è½®éƒ½ä¿æŒåŒä¸€ä¸ªä½ç½®ï¼Œè¿™å°±æ˜¯é«˜é€Ÿå¸¦æ¥çš„<code>é™æ­¢</code>æ•ˆæœã€‚<code>svg</code> æœ‰ä¸€ä¸ªå‚æ•°å°±æ˜¯å¯ä»¥è®©æŸä¸€ç§’çš„ç”»é¢ä»£æ›¿åŠ¨ç”»ä¸­é—´çš„é—´éš™æ•ˆæœï¼Œåé¢ä¼šè¯¦ç»†ä»‹ç»ã€‚</p><h2 id="å"><a class="header-anchor" href="#å">#</a>å</h2><p>ç­¾çš„æ‰€æœ‰è®¾è®¡å·¥ä½œåœ¨ <code>Adobe illustrator</code> ä¸­è¿›è¡Œï¼Œåç»­çš„ä¿®è¡¥å’ŒåŠ¨ç”»é€šè¿‡<code>ä¿®æ”¹ä»£ç </code>å®Œæˆã€‚</p><p>åœ¨æ‰€æœ‰å·¥ä½œå¼€å§‹å‰ä¸€å®šè¦ç¡®å®šçš„äº‹æƒ…æ˜¯ä½ æ•´ä¸ªç”»å¸ƒçš„å¤§å°ï¼Œåç»­æ‰€æœ‰çš„è°ƒæ•´å’ŒåŠ¨ç”»éƒ½æ˜¯åŸºäº<code>æ•°å€¼è®¡ç®—</code>çš„ï¼Œå¦‚æœæœ€åæ‰å‘ç°å¼€å§‹è®¾è®¡å¾—ä¸ç»Ÿä¸€ï¼Œå†å›æ¥ä¿®æ”¹çš„è¯ï¼Œç­‰äºä¹‹å‰æ‰€æœ‰çš„å·¥ä½œéƒ½è¦é‡åšä¸€éã€‚<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup></p><p>æˆ‘é€‰å–çš„ç”»å¸ƒå¤§å°æ˜¯ <code>640*960</code>ï¼Œåç»­æ‰€æœ‰çš„å‚æ•°éƒ½æ˜¯åŸºäºè¿™ä¸ªã€‚</p><p>æ–°å»ºç”»å¸ƒçš„æ—¶å€™ï¼Œä¸€å®šè¦å»ç”»å¸ƒé¢„è®¾é‡ŒæŠŠæ–‡æ¡£çš„å‡ºè¡€è®¾ç½®æˆ <code>0</code>ï¼Œå‡ºè¡€æ˜¯ä¸ºäº†æ‰“å°æ—¶å››å‘¨é¢„ç•™è¶³å¤Ÿçš„ç©ºé—´ï¼Œä½†æˆ‘ä»¬è¦ç²¾ç¡®è®¡ç®—åˆ°åƒç´ ï¼Œæ‰€ä»¥å¿…é¡»è¦åˆ¨é™¤è¿™äº›ä¸ç¡®å®šå› ç´ ã€‚</p><p>æ¥ä¸‹æ¥å°±æ˜¯ç”»é¢èƒ½åŠ¨èµ·æ¥çš„é‡ä¸­ä¹‹é‡ï¼š<code>å›¾å±‚ç»“æ„</code>ã€‚</p><p>åœ¨ä»‹ç»ä¹‹å‰å…ˆäº†è§£ä¸€ä¸‹ <code>Adobe illustrator</code> çš„<code>ç¼–ç»„</code>åŠŸèƒ½ï¼Œ<code>ç¼–ç»„</code>åŠŸèƒ½çš„ä½œç”¨æ˜¯èƒ½å¤Ÿè®©è®¸å¤šå¯¹è±¡<code>ä½œä¸ºä¸€ä¸ªæ•´ä½“</code>è¿›è¡Œç¼–è¾‘ç­‰åç»­æ“ä½œã€‚ä½“ç°åœ¨ <code>svg</code> ä»£ç ä¸­åˆ™æ˜“äºç†è§£äº›ï¼Œå³ä¼—å¤šå¯¹è±¡è¢« <code>&lt;g&gt;&lt;/g&gt;</code> æ ‡ç­¾åŒ…è£¹ã€‚</p><p>å°†å›¾å±‚ç»“æ„ä¸ä»£ç ç»“æ„ç»¼åˆç†è§£ï¼Œæœ‰åŠ©äºå¯¹æ•´ä¸ªåŠ¨ç”»çš„åŸç†è¿›è¡Œç†è§£ï¼Œå¦‚æœè§‰å¾—æœ‰äº›éš¾ä»¥ç†è§£ï¼Œå¯ä»¥è·³è¿‡ï¼Œåªè¦æŒ‰æ­¥éª¤åšå³å¯ã€‚</p><p>é¦–å…ˆè¯´å›¾å±‚ç»“æ„ï¼Œå›¾å±‚ç»“æ„æ€»ä½“è®¾è®¡å¦‚ä¸‹ï¼ˆå‡è®¾16å¼ ç­¾é¢ï¼‰ï¼š</p><center><p><img src="//onns.xyz/blog/image/20200220-2.jpg" alt="å›¾å±‚ç»“æ„"></p><p>å›¾1 å›¾å±‚ç»“æ„</p></center><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">æ–°å¹´ç­¾è®¾è®¡</span><br><span class="line">â”œâ”€â”€ å‰æ™¯</span><br><span class="line">|   â”œâ”€â”€ ç­¾é¢1</span><br><span class="line">|   |   â”œâ”€â”€ â€œé—¨â€å­—</span><br><span class="line">|   |   â”œâ”€â”€ â€œé—¨â€å­—</span><br><span class="line">|   |   â”œâ”€â”€ â€œæ»¡â€å­—</span><br><span class="line">|   |   â”œâ”€â”€ â€œç»©â€å­—</span><br><span class="line">|   |   â””â”€â”€ ç­¾1èƒŒæ™¯å›¾</span><br><span class="line">|   â”œâ”€â”€ ç­¾é¢2</span><br><span class="line">|   â”œâ”€â”€ ...</span><br><span class="line">|   â””â”€â”€ ç­¾é¢16</span><br><span class="line">â”œâ”€â”€ èƒŒæ™¯</span><br><span class="line">|   â”œâ”€â”€ 2020æ–‡å­—</span><br><span class="line">|   â”œâ”€â”€ è€é¼ å›¾æ¡ˆ</span><br><span class="line">|   â”œâ”€â”€ ...</span><br><span class="line">|   â””â”€â”€ çº¢è‰²èƒŒæ™¯</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥è¯¦ç»†è®²ä¸€ä¸‹ã€‚</p><p>é¦–å…ˆè¦æŠŠç­¾ä¸Š<code>åŠ¨çš„éƒ¨åˆ†</code>å’Œ<code>ä¸åŠ¨çš„éƒ¨åˆ†</code>åˆ†å¼€ï¼Œ<code>ä¸åŠ¨çš„éƒ¨åˆ†</code>æ”¾åœ¨<strong>èƒŒæ™¯å±‚</strong>ï¼Œåªè¦æ”¾åœ¨èƒŒæ™¯å±‚é‡Œï¼Œç»†è‡´çš„ç»“æ„æ— é¡»è€ƒè™‘ï¼›<code>åŠ¨çš„éƒ¨åˆ†</code>æ”¾åœ¨<strong>å‰æ™¯å±‚</strong>ï¼Œæ¯ä¸ªç­¾é¢å†…å®¹éƒ½ç¼–ç»„ä¸ºä¸€ä¸ªæ•´ä½“ï¼Œ16ä¸ªæ•´ä½“åœ¨<strong>å‰æ™¯å±‚</strong>é‡Œæ˜¯å¹³è¡Œå…³ç³»ï¼Œå¤„äºåŒä¸€å±‚æ¬¡ã€‚</p><p>æ¯ä¸ªç­¾å†…å®¹ä¿è¯åœ¨ç¼–ç»„é‡Œå³å¯ï¼Œå†…éƒ¨çš„ç»†èŠ‚å±‚æ¬¡ç»“æ„ä¹Ÿéƒ½ä¸å½±å“ã€‚</p><p>æ¥ä¸‹æ¥çš„é‡ç‚¹æ˜¯ï¼Œæ¯ä¸ªç­¾çš„ä½ç½®æ‘†æ”¾ã€‚16ä¸ªç­¾<strong>ä¾æ¬¡æ°´å¹³ç­‰é—´è·æ‘†æ”¾</strong>å³å¯ã€‚</p><p>éœ€è¦æ³¨æ„ <code>png</code> æ ¼å¼çš„å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡ <strong>100kb</strong>ã€‚<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup></p><center><p><img src="//onns.xyz/blog/image/20200220-1.jpg" alt="è®¾è®¡å›¾"></p><p>å›¾2 è®¾è®¡å›¾</p></center><p>æ‘†æ”¾æ—¶éœ€è¦æ»¡è¶³çš„è¦æ±‚æ˜¯ï¼š<strong>ç”»å¸ƒå®½åº¦ä¸­åªå…è®¸å‡ºç°ä¸€ä¸ªç­¾</strong>ï¼Œé•¿åº¦ä¸º <code>640</code> çš„ç”»å¸ƒæ¯ä¸ªç­¾ä¹‹é—´çš„æ°´å¹³é—´è·åº”è¯¥<code>å¤§äºç­‰äº640</code>ã€‚</p><p><code>å›¾2</code>ä¸­<strong>é—¨é—¨æ»¡ç»©</strong>ç›¸å¯¹äºç”»å¸ƒå·¦ä¸Šè§’çš„ç›¸å¯¹ä½ç½®æ˜¯ï¼š<code>x:131 y:164</code>ï¼Œé‚£ä¹ˆ<strong>ç˜¦åæ–¤</strong>ç›¸å¯¹äºç”»å¸ƒå·¦ä¸Šè§’çš„ä½ç½®åº”è¯¥æ˜¯ï¼š<code>x:131+640 y:164</code>ã€‚</p><p>ç­‰æ•´ä½“è®¾è®¡å®Œæˆä¹‹åï¼Œå°±å¯ä»¥å¯¼å‡ºäº†ã€‚</p><center><p><img src="//onns.xyz/blog/image/20200220-3.jpg" alt="å¯¼å‡ºé€‰é¡¹"></p><p>å›¾3 å¯¼å‡ºé€‰é¡¹</p></center><p>é€‰æ‹©å¯¼å‡ºä¸º <code>svg</code>ï¼Œç„¶åéœ€è¦æ³¨æ„ä¸¤ä¸ªå‚æ•°ï¼š</p><ol><li>æ ·å¼é€‰æ‹©ä¸º <code>æ¼”ç¤ºæ–‡ç¨¿å±æ€§</code><sup class="footnote-ref"><a href="#fn4" id="fnref4">[4]</a></sup></li><li>å›¾åƒé€‰æ‹©ä¸º <code>é“¾æ¥</code><sup class="footnote-ref"><a href="#fn5" id="fnref5">[5]</a></sup></li></ol><p>ç„¶åä½ å°±æ‹¥æœ‰äº†ä»¥ <code>&lt;svg&gt;&lt;/svg&gt;</code> åŒ…è£¹çš„ç­¾ä»£ç ï¼Œå°±å¯ä»¥æ·»åŠ åŠ¨ç”»äº†ã€‚</p><hr><p>å†™äº†ä¿©å°æ—¶å†™ä¸åŠ¨äº†ï¼Œæ­‡ä¼šå„¿ğŸ˜‚</p><hr><h2 id="è‚†"><a class="header-anchor" href="#è‚†">#</a>è‚†</h2><p>åœ¨ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ <code>svg</code>ä¹‹åï¼Œä½ ä¼šçœ‹åˆ°å¦‚ä¸‹çš„ä¸€ä¸ªæ ‡ç­¾ç»“æ„ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/2000/svg"</span> </span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:xlink</span>=<span class="string">"http://www.w3.org/1999/xlink"</span> </span></span><br><span class="line"><span class="tag"><span class="attr">viewBox</span>=<span class="string">"0 0 640 96000"</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure><p>é¦–å…ˆè¦åšçš„æ˜¯å°† <code>svg</code> æ ‡ç­¾å±æ€§é‡Œçš„ <code>viewBox</code> å¤§å°è®¾ç½®ä¸ºæˆ‘ä»¬çš„ç”»å¸ƒå¤§å°ï¼Œæ”¹ä¸º <code>0 0 640 960</code>ã€‚</p><p>åœ¨ <code>Adobe illustrator</code> é‡Œçš„æ–‡æ¡£ç»“æ„åœ¨ <code>svg</code> ä»£ç é‡Œä¼šå®Œå…¨åè¿‡æ¥ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/2000/svg"</span> </span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:xlink</span>=<span class="string">"http://www.w3.org/1999/xlink"</span> </span></span><br><span class="line"><span class="tag"><span class="attr">viewBox</span>=<span class="string">"0 0 640 9600"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">g</span>&gt;</span></span><br><span class="line">    // èƒŒæ™¯å±‚</span><br><span class="line">  <span class="tag">&lt;/<span class="name">g</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">g</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">g</span>&gt;</span>ç­¾16<span class="tag">&lt;/<span class="name">g</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="tag">&lt;<span class="name">g</span>&gt;</span>ç­¾2<span class="tag">&lt;/<span class="name">g</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">g</span>&gt;</span>ç­¾1<span class="tag">&lt;/<span class="name">g</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">g</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ·»åŠ åŠ¨ç”»çš„æ–¹æ³•éå¸¸ç®€å•ï¼Œåœ¨å±äºå‰æ™¯å±‚çš„ <code>&lt;g&gt;&lt;/g&gt;</code> é‡Œæ·»åŠ ä»£ç å³å¯ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/2000/svg"</span> </span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:xlink</span>=<span class="string">"http://www.w3.org/1999/xlink"</span> </span></span><br><span class="line"><span class="tag"><span class="attr">viewBox</span>=<span class="string">"0 0 640 9600"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">g</span>&gt;</span></span><br><span class="line">    // èƒŒæ™¯å±‚</span><br><span class="line">  <span class="tag">&lt;/<span class="name">g</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">g</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">g</span>&gt;</span>ç­¾16<span class="tag">&lt;/<span class="name">g</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="tag">&lt;<span class="name">g</span>&gt;</span>ç­¾2<span class="tag">&lt;/<span class="name">g</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">g</span>&gt;</span>ç­¾1<span class="tag">&lt;/<span class="name">g</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">animateTransform</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">attributeName</span>=<span class="string">"transform"</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">type</span>=<span class="string">"translate"</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">values</span>=<span class="string">"0 0;-640 0;-1280 0;...;-8960 0"</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">begin</span>=<span class="string">"0s"</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">dur</span>=<span class="string">"0.45s"</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">end</span>=<span class="string">"click"</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">fill</span>=<span class="string">"freeze"</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">calcMode</span>=<span class="string">"discrete"</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">repeatCount</span>=<span class="string">"indefinite"</span>&gt;</span><span class="tag">&lt;/<span class="name">animateTransform</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">g</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure><p>éœ€è¦è‡ªè¡Œä¿®æ”¹çš„å±æ€§å’Œè§£é‡Šçš„å±æ€§å¦‚ä¸‹ï¼Œå…¶å®ƒæ²¡è§£é‡Šçš„å°±è‡ªè¡Œç™¾åº¦å³å¯ã€‚</p><ol><li><code>type</code> è®¾ç½®ä¸º <code>&quot;translate&quot;</code>ï¼Œå°±æ˜¯ç§»åŠ¨çš„æ„æ€ã€‚</li><li><code>values</code> è®¾ç½®ä¸ºæ¯ä¸ªç­¾çš„æ°´å¹³é—´è·ï¼Œå€¼ä¸ºè´Ÿï¼Œå³ <code>0 0</code> ã€ <code>-640 0</code> ã€ <code>-640*2 0</code> ã€ <code>-640*3 0</code>ï¼Œä»¥æ­¤ç±»æ¨ã€‚</li><li><code>begin</code> è®¾ç½®ä¸º <code>0</code>ï¼ŒåŠ¨ç”»ä¸€å¼€å§‹å°±è¿›è¡Œã€‚</li><li><code>dur</code> ä¸ºæ•´ä¸ªåŠ¨ç”»æŒç»­æ—¶é—´ï¼Œè‡ªè¡Œè®¾ç½®ã€‚</li><li><code>end</code> ä½•æ—¶ç»“æŸåŠ¨ç”»ï¼Œç‚¹å‡»ç»“æŸï¼Œå³ <code>click</code>ã€‚</li><li><code>fill</code> å°±æ˜¯ä¸Šæ–‡æåˆ°çš„åŠ¨ç”»é—´éš™å¦‚ä½•å¡«å……ï¼Œå°±ç”¨å›ºå®šçš„ç”»é¢å¡«å……å³å¯ï¼Œå³ <code>freeze</code>ã€‚</li><li><code>repeatCount</code> é‡å¤æ¬¡æ•°ï¼Œåœ¨æ²¡ç‚¹å‡»ä¹‹å‰è‚¯å®šæ˜¯æ— é™æ¬¡é‡å¤å•¦ã€‚</li></ol><p>è‡³æ­¤åŠ¨ç”»å·²ç»å¯ä»¥åŠ¨èµ·æ¥å¹¶ä¸”ç‚¹å‡»åœæ­¢äº†ï¼Œå†åŠ ä¸€ä¸ªå°é¢å›¾ç‰‡å°±å¯ä»¥äº†ï¼Œç„¶åè®¾ç½®å°é¢ç‚¹å‡»ä¸€æ¬¡å°±æ¶ˆå¤±ã€‚è¿™é‡Œå¯ä»¥ç”¨é€æ˜åº¦é™ä½çš„åŠ¨ç”»æ•ˆæœï¼Œä¹Ÿå¯ä»¥ç”¨ç§»åŠ¨åˆ°ç”»å¸ƒä¹‹å¤–çš„åŠ¨ç”»æ•ˆæœã€‚</p><p>å‰é¢è¯´è¿‡ <code>svg</code> çš„æ ‡ç­¾ç»“æ„å’Œå›¾å±‚ç»“æ„æ˜¯åçš„ï¼Œæ‰€ä»¥æ–°åŠ çš„å°é¢æ”¾åœ¨æ•´ä¸ªæ–‡æ¡£çš„æœ€ä¸‹æ–¹ï¼Œå’Œ<code>å‰æ™¯</code>ã€<code>èƒŒæ™¯</code>åŒçº§ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/2000/svg"</span> </span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:xlink</span>=<span class="string">"http://www.w3.org/1999/xlink"</span> </span></span><br><span class="line"><span class="tag"><span class="attr">viewBox</span>=<span class="string">"0 0 640 9600"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">g</span>&gt;</span></span><br><span class="line">    // èƒŒæ™¯å±‚</span><br><span class="line">  <span class="tag">&lt;/<span class="name">g</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">g</span>&gt;</span></span><br><span class="line">    // å‰æ™¯å±‚</span><br><span class="line">  <span class="tag">&lt;/<span class="name">g</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">g</span>&gt;</span></span><br><span class="line">    // å°é¢å±‚</span><br><span class="line">    <span class="tag">&lt;<span class="name">rect</span> <span class="attr">y</span>=<span class="string">"1.5"</span> <span class="attr">fill</span>=<span class="string">"#b6352f"</span> <span class="attr">width</span>=<span class="string">"649"</span> <span class="attr">height</span>=<span class="string">"960"</span>&gt;</span><span class="tag">&lt;/<span class="name">rect</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">image</span> <span class="attr">width</span>=<span class="string">"640"</span> <span class="attr">height</span>=<span class="string">"960"</span> <span class="attr">href</span>=<span class="string">"https://mmbiz.qpic.cn/mmbiz_jpg/g84wSb3VFX7sDq8k89pwzNiaQIibwiav6P7QQrPNCfVibmRAKhlrz1868ybEGAxzKpJaZovZpUw69P15Daqsltiaic7A/0?wx_fmt=jpeg"</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">animatetransform</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">attributename</span>=<span class="string">"transform"</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">type</span>=<span class="string">"translate"</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">values</span>=<span class="string">"0 0;10000 0"</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">begin</span>=<span class="string">"click"</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">dur</span>=<span class="string">"0.01s"</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">fill</span>=<span class="string">"freeze"</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">calcmode</span>=<span class="string">"discrete"</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">repeatcount</span>=<span class="string">"1"</span>&gt;</span><span class="tag">&lt;/<span class="name">animatetransform</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">g</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼ŒæŠ½ç­¾çš„ <code>svg</code> åŠŸèƒ½æ–¹é¢å·²ç»å…¨éƒ¨å®Œæˆï¼Œä¸‹é¢çš„é¢å¤–å·¥ä½œæ˜¯<code>è®¾è®¡ä¼˜åŒ–</code>å’Œ<code>å¾®ä¿¡å…¬ä¼—å¹³å°é€‚é…</code>ã€‚</p><h2 id="ä¼"><a class="header-anchor" href="#ä¼">#</a>ä¼</h2><p>è™½ç„¶ç­¾åšå¥½äº†ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªå¾ˆè®©äººæ— è¯­çš„é—®é¢˜ï¼šåªæœ‰ç­¾é¢çš„åŒºåŸŸç‚¹å‡»æ‰å¯ä»¥ï¼Œçº¢è‰²èƒŒæ™¯ç‚¹å‡»æ²¡æœ‰åŠæ³•ä»¤ç­¾åœæ­¢ã€‚</p><center><p><img src="//onns.xyz/blog/image/20200220-4.jpg" alt="æœ‰æ•ˆåŒºåŸŸç¤ºæ„å›¾"></p><p>å›¾4 æœ‰æ•ˆåŒºåŸŸç¤ºæ„å›¾</p></center><p>æˆ‘çš„ç¬¬ä¸€ä¸ªè§£å†³æ–¹æ³•æ˜¯ï¼š<strong>å°†ç­¾é¢çš„èƒŒæ™¯å›¾è¡¥æˆæ•´ä¸ªç”»å¸ƒçš„å¤§å°ï¼Œå‘¨å›´å¡«å……é€æ˜åƒç´ </strong>ã€‚</p><p>å½“æ—¶æƒ³å‡ºè¿™ä¸ªåŠæ³•çš„æ—¶å€™æˆ‘éƒ½ä¸ºè‡ªå·±çš„æœºæ™ºè€Œé¼“æŒï¼Œç»“æœåˆ°æœ€åä¸€æ­¥çš„æ—¶å€™ç°å®ç»ˆäºå°†é­”çˆªä¼¸å‘äº†æˆ‘è¿™åªå°çŒ«å’ªäº†ã€‚<strong>å¾®ä¿¡pngå›¾ç‰‡æœ€å¤§å…è®¸100KB</strong>ï¼Œæˆ‘æ•´ä¸ªäººéƒ½å‚»äº†ã€‚</p><p>å‰é¢éƒ½å†™äº†<code>ç”»å¸ƒå›¾ç‰‡å¤§å°</code>å½±å“åˆ°æ•´ä¸ªåˆ¶ä½œè¿‡ç¨‹ï¼Œæ‰€ä»¥æˆ‘åˆä»å¤´åˆ¶ä½œäº†ä¸€éï¼Œå‘µå‘µã€‚</p><p>ä½œä¸ºä¸€ä¸ªå®Œç¾ä¸»ä¹‰è€…ï¼Œæœ€ç»ˆè¿˜æ˜¯æ‰¾åˆ°äº†ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼š<strong>åœ¨æ¯ä¸ªç­¾é‡ŒåŠ ä¸€ä¸ªæ‹‰ä¼¸åˆ°æ•´ä¸ªç”»å¸ƒå¤§å°çš„é€æ˜å›¾åƒ</strong>ã€‚è¿™ä¸ªæ–¹æ³•äº²æµ‹å¯ä»¥æŠŠæœ‰æ•ˆåŒºåŸŸæ‰©å¤§è‡³æ•´ä¸ªç”»å¸ƒï¼Œé—®é¢˜è§£å†³ã€‚è¿™ä¸ªé€æ˜å›¾åƒæ”¾åœ¨<code>ç­¾ç¼–ç»„</code>çš„ä»»æ„ä½ç½®éƒ½å¯ä»¥ï¼Œåæ­£æ˜¯é€æ˜çš„ï¼Œä¸ä¼šé€ æˆé®æŒ¡ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/2000/svg"</span> </span></span><br><span class="line"><span class="tag"><span class="attr">xmlns:xlink</span>=<span class="string">"http://www.w3.org/1999/xlink"</span> </span></span><br><span class="line"><span class="tag"><span class="attr">viewBox</span>=<span class="string">"0 0 640 9600"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">g</span>&gt;</span></span><br><span class="line">    // èƒŒæ™¯å±‚</span><br><span class="line">  <span class="tag">&lt;/<span class="name">g</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">g</span>&gt;</span></span><br><span class="line">    // å‰æ™¯å±‚</span><br><span class="line">    <span class="tag">&lt;<span class="name">g</span> <span class="attr">data-name</span>=<span class="string">"é—¨é—¨æ»¡ç»©"</span>&gt;</span></span><br><span class="line">      // é€æ˜å›¾åƒ</span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">width</span>=<span class="string">"640"</span> <span class="attr">height</span>=<span class="string">"960"</span> <span class="attr">href</span>=<span class="string">"https://mmbiz.qpic.cn/mmbiz_png/g84wSb3VFX4WIFj78My2uNfKb2aBE3j32DkhOa6UEmCy5icgPPLZibMLczvJTMVJGfO1Z3y9eWef5emxn78gb6Ww/0?wx_fmt=png"</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">      ...</span><br><span class="line">    <span class="tag">&lt;/<span class="name">g</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">g</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">g</span>&gt;</span></span><br><span class="line">    // å°é¢å±‚</span><br><span class="line">  <span class="tag">&lt;/<span class="name">g</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br></pre></td></tr></table></figure><p>ç„¶åæŠŠæ‰€æœ‰çš„å›¾åƒä¼ åˆ°å¾®ä¿¡åå°ç„¶åæ›¿æ¢ä¸€ä¸‹é“¾æ¥å³å¯ã€‚<br>è¿™é‡Œéœ€è¦æ³¨æ„ <code>Adobe illustrator</code> å¯¼å‡ºçš„ <code>image</code> æ ‡ç­¾é‡Œçš„åœ°å€å±æ€§æ˜¯ <code>xlink:href=&quot;å›¾åƒåœ°å€&quot;</code>ï¼Œå¾®ä¿¡æ— æ³•è¯†åˆ«ï¼Œéœ€è¦æ”¹æˆ <code>href=&quot;å›¾åƒåœ°å€&quot;</code>ï¼Œæ‰¹é‡æ›¿æ¢å³å¯ã€‚</p><h2 id="é™†"><a class="header-anchor" href="#é™†">#</a>é™†</h2><p>å‰å‰ååå¿™æ´»äº†å¥½å‡ å‘¨ï¼Œè¸©äº†å¥½å¤šå‘ï¼Œä¹Ÿæœ‰å¾ˆå¤šæœ¬æ¥ä¸ä¼šå¯¹æ•´ä½“æœ‰å½±å“çš„å°é”™è¯¯å‡ºç°ï¼Œå”¯ä¸€ä¿ƒä½¿è‡ªå·±åšæŒä¸‹æ¥çš„åŠ¨åŠ›å°±æ˜¯ï¼š<code>åšéƒ½åšäº†</code>ã€<code>æˆ‘æœ‰å¼ºè¿«ç—‡å•Šå–‚ï¼Œè¿™åœ°æ–¹å¤šå‡ºå‡ ä¸ªåƒç´ æˆ‘å—ä¸äº†</code>ã€<code>æˆ‘æ˜¯å®Œç¾ä¸»ä¹‰è€…å•Šï¼Œæ—¢ç„¶åšäº†ï¼Œé‚£å°±åšå¥½</code>ã€<code>å¯¹é˜…è¯»é‡å……æ»¡æœŸå¾…ï¼Œä¸‡ä¸€å‘¢ï¼Ÿ</code>ã€‚å‰å‡ ä¸ªæ˜¯æœ¬æ€§ï¼Œåä¸€ä¸ªæ˜¯å¸Œå†€ã€‚äº‹å®è¯æ˜ï¼Œçˆ¬å¾—è¶Šé«˜ï¼Œæ‘”å¾—è¶Šæƒ¨ã€‚å¹³å¹³æ·¡æ·¡çš„åå“ï¼Œæ©é¥°ä¸ä½çš„å¤±è½ï¼Œæ›´åˆ«æå½“æ—¶ç½‘ç»œçš„ä¸ç•…å¯¼è‡´äºŒç»´ç æ²¡æœ‰æ­£å¸¸è·³è½¬ã€‚</p><p>ä½†è¿™å°±æ˜¯ç”Ÿæ´»å•Šï¼Œäººç”Ÿå•Šï½æ°¸è¿œå¯¹æœªçŸ¥çš„ç»“æœæŠ±æœ‰ææƒ§å’ŒæœŸå¾…ã€‚</p><p>ä¸è¿‡åœ¨æˆ‘å¿ƒé‡Œï¼Œæˆ‘å·²ç»åšåˆ°æœ€å¥½äº†ã€‚</p><p><a href="https://onns.xyz/s/2020q">https://onns.xyz/s/2020q</a></p><h2 id="å®Œ"><a class="header-anchor" href="#å®Œ">#</a>å®Œ</h2><ul><li><a href="https://mp.weixin.qq.com/s/-gugc0Gn0XZXSOONw-NKHg" target="_blank" rel="noopener">2020ï¼Œæˆ‘çš„æ–°å¹´ç­¾å±…ç„¶æ˜¯â€¦</a></li><li><a href="https://zhuanlan.zhihu.com/p/75023148" target="_blank" rel="noopener">è¯¦ç»†æ•™ä½ å¾®ä¿¡å…¬ä¼—å·æ­£æ–‡é¡µSVGäº¤äº’å¼€å‘</a></li><li><a href="https://www.zhangxinxu.com/wordpress/2014/08/so-powerful-svg-smil-animation/" target="_blank" rel="noopener">è¶…çº§å¼ºå¤§çš„SVG SMIL animationåŠ¨ç”»è¯¦è§£</a></li></ul><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>å¯èƒ½æœ‰å¾ˆå¤šï¼Œä½†æˆ‘åªäº†è§£åˆ°ä¸¤ä¸ªã€‚ <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li><li id="fn2" class="footnote-item"><p>å‘1ï¼Œä¸€å®šè¦æ³¨æ„é¡ºåºã€‚ <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p></li><li id="fn3" class="footnote-item"><p>å‘2ï¼Œå¾®ä¿¡åå°åªå…è®¸ä¸Šä¼ å°äº100kbçš„é€æ˜å›¾ç‰‡ï¼Œè¶…è¿‡çš„ä¼šå¼ºåˆ¶è½¬æ¢ä¸ºjpgï¼Œæœ¬æ¥è®¾è®¡çš„æ•ˆæœå…¨æ²¡äº†ï¼ŒçœŸæ˜¯ä¸ªå¤§å‘ã€‚ <a href="#fnref3" class="footnote-backref">â†©ï¸</a></p></li><li id="fn4" class="footnote-item"><p><a href="https://zhuanlan.zhihu.com/p/75023148" target="_blank" rel="noopener">æŠŠStylingé€‰æ‹©ä¸ºPresentation Attributesï¼Œè¿™æ ·å¯¼å‡ºçš„SVGå°±ä¸å«æœ‰styleï¼Œè€Œä¸”å…ƒç´ çš„æ ·å¼ä¹Ÿä¼šé€šè¿‡æ ‡ç­¾å±æ€§è¿›è¡Œè®¾ç½®ï¼Œè€Œä¸ä½¿ç”¨styleå†…è”cssã€‚</a> <a href="#fnref4" class="footnote-backref">â†©ï¸</a></p></li><li id="fn5" class="footnote-item"><p>å‘2ï¼Œé€‰åˆ«çš„ä¼šæŠŠå›¾ç‰‡å˜æˆbase64ç¼–ç åç›´æ¥ä¿å­˜åˆ°æ–‡æ¡£é‡Œï¼Œå¾ˆå¤§çš„æ–‡æ¡£å¯¼è‡´å±‚æ¬¡æ··ä¹±ã€‚ <a href="#fnref5" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> adobe </tag>
            
            <tag> wechat </tag>
            
            <tag> svg </tag>
            
            <tag> illustrator </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>excelå­—ç¬¦ä¸²æŸ¥æ‰¾</title>
      <link href="/blog/2020/02/19/find-string-in-excel/"/>
      <url>/blog/2020/02/19/find-string-in-excel/</url>
      
        <content type="html"><![CDATA[<p>ç»å¸¸ä¼šæœ‰åœ¨excelæŸ¥æ‰¾å¤šä¸ªå­—ç¬¦ä¸²çš„éœ€æ±‚ï¼Œæ¯”å¦‚åœ¨ä¸€ä¸ªå¤§excelè¡¨é‡Œæ‰¾å‡ é—¨è¯¾ï¼Œä¹‹å‰ä¸€ç›´æ˜¯å¯¼å‡ºæˆ <code>csv</code> ç„¶åå¯¹æ–‡æœ¬æ–‡æ¡£è¿›è¡Œæ“ä½œï¼Œè¿™æ ·æœ€ç»ˆè¿˜è¦å¯¼å› <code>excel</code>ï¼Œä»Šå¤©èŠ±è´¹3ã€4ä¸ªå°æ—¶å­¦äº†ä¸‹vbï¼Œåšäº†ä¸€ä¸ªå®ï¼Œç›´æ¥åœ¨excelä¸Šæ“ä½œã€‚</p><a id="more"></a><h2 id="æœ€é•¿å…¬å…±å­åºåˆ—"><a class="header-anchor" href="#æœ€é•¿å…¬å…±å­åºåˆ—">#</a>æœ€é•¿å…¬å…±å­åºåˆ—</h2><p>é€»è¾‘æ˜¯å°†è¯¾ç¨‹åä¸è¦æŸ¥æ‰¾çš„è¯¾ç¨‹åè¿›è¡Œ<code>æœ€é•¿å…¬å…±å­åºåˆ—</code>åŒ¹é…ï¼Œè¾¾åˆ°é˜ˆå€¼åˆ™ç®—æ‰¾åˆ°ç›¸åº”çš„è¯¾ç¨‹ã€‚</p><p>æ‰€ç”¨åˆ°çš„ç®—æ³•å¯ä»¥å‚è€ƒï¼š<br><a href="https://blog.csdn.net/zjxxyz123/article/details/80277721" target="_blank" rel="noopener">æœ€é•¿å…¬å…±å­åºåˆ—ï¼ˆLongest Common Subsequenceï¼‰é—®é¢˜</a></p><p>ä»£ç copyè‡ª <a href="https://thydzik.com/longest-common-subsequence-implemented-in-vba-visual-basic-for-applications/" target="_blank" rel="noopener">Longest Common Subsequence implemented in VBA (Visual Basic for Applications)</a>ï¼Œåšäº†ç®€å•çš„ä¿®æ”¹ã€‚</p><figure class="highlight vb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Public</span> <span class="keyword">Function</span> max(<span class="keyword">ByRef</span> a <span class="keyword">As</span> <span class="built_in">Long</span>, <span class="keyword">ByRef</span> b <span class="keyword">As</span> <span class="built_in">Long</span>) <span class="keyword">As</span> <span class="built_in">Long</span></span><br><span class="line">    <span class="keyword">If</span> a &gt;= b <span class="keyword">Then</span></span><br><span class="line">        max = a</span><br><span class="line">    <span class="keyword">Else</span></span><br><span class="line">        max = b</span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Function</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">Public</span> <span class="keyword">Function</span> longestCommonSubsequence(<span class="keyword">ByRef</span> string1 <span class="keyword">As</span> <span class="built_in">String</span>, <span class="keyword">ByRef</span> string2 <span class="keyword">As</span> <span class="built_in">String</span>) <span class="keyword">As</span> <span class="built_in">Double</span></span><br><span class="line">    <span class="keyword">If</span> string1 = vbNullString <span class="keyword">Or</span> string2 = vbNullString <span class="keyword">Then</span></span><br><span class="line">        MsgBox <span class="string">"å‡ºé”™"</span></span><br><span class="line">        <span class="keyword">Exit</span> <span class="keyword">Function</span></span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">Dim</span> num() <span class="keyword">As</span> <span class="built_in">Long</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">'define the array, note rows of zeros get added to front automatically</span></span><br><span class="line">    <span class="keyword">ReDim</span> num(Len(string1), Len(string2))</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">Dim</span> i <span class="keyword">As</span> <span class="built_in">Long</span>, j <span class="keyword">As</span> <span class="built_in">Long</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">For</span> i = <span class="number">1</span> <span class="keyword">To</span> Len(string1)</span><br><span class="line">        <span class="keyword">For</span> j = <span class="number">1</span> <span class="keyword">To</span> Len(string2)</span><br><span class="line">            <span class="keyword">If</span> <span class="keyword">Mid</span>$(string1, i, <span class="number">1</span>) = <span class="keyword">Mid</span>$(string2, j, <span class="number">1</span>) <span class="keyword">Then</span></span><br><span class="line">                num(i, j) = num(i - <span class="number">1</span>, j - <span class="number">1</span>) + <span class="number">1</span></span><br><span class="line">            <span class="keyword">Else</span></span><br><span class="line">                num(i, j) = max(num(i - <span class="number">1</span>, j), num(i, j - <span class="number">1</span>))</span><br><span class="line">            <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">        <span class="keyword">Next</span> j</span><br><span class="line">    <span class="keyword">Next</span> i</span><br><span class="line"></span><br><span class="line">    <span class="keyword">If</span> Len(string1) &gt; Len(string2) <span class="keyword">Then</span></span><br><span class="line">        longestCommonSubsequence = num(Len(string1), Len(string2)) * <span class="number">100.0</span> / Len(string2)</span><br><span class="line">    <span class="keyword">Else</span></span><br><span class="line">        longestCommonSubsequence = num(Len(string1), Len(string2)) * <span class="number">100.0</span> / Len(string1)</span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Function</span></span><br></pre></td></tr></table></figure><h2 id="æ„å»ºæŸ¥è¯¢å­—ç¬¦ä¸²"><a class="header-anchor" href="#æ„å»ºæŸ¥è¯¢å­—ç¬¦ä¸²">#</a>æ„å»ºæŸ¥è¯¢å­—ç¬¦ä¸²</h2><p>æ²¡æœ‰æƒ³åˆ°åœ¨vbé‡Œåˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„å˜é‡è¿™ä¹ˆéº»çƒ¦ï¼Œæœ€ç»ˆè¿˜æ˜¯é€‰æ‹©äº†<a href="https://stackoverflow.com/questions/19369132/declare-and-initialize-string-array-in-vba" target="_blank" rel="noopener">Declare and Initialize String Array in VBA</a>é‡Œçš„æ–¹æ³•ã€‚</p><figure class="highlight vb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Dim</span> classList() <span class="keyword">As</span> <span class="built_in">String</span></span><br><span class="line">classList = Split(<span class="string">"ç¬¦å·å­¦,å¤§å­¦è¯­æ–‡,ç»Ÿè®¡"</span>, <span class="string">","</span>)</span><br></pre></td></tr></table></figure><p>æœ‰ç‚¹æ‹…å¿ƒéœ€è¦æŸ¥è¯¢çš„è¯¾ç¨‹åä¸­æœ‰ <code>,</code>ï¼Œåˆ°æ—¶å€™å¯èƒ½è¦æ‰¾äº›åˆ«çš„ç¬¦å·ä½œä¸ºåˆ†éš”ç¬¦ã€‚</p><h2 id="éå†å¹¶æ ‡è®°"><a class="header-anchor" href="#éå†å¹¶æ ‡è®°">#</a>éå†å¹¶æ ‡è®°</h2><p>å‚è€ƒ<a href="https://stackoverflow.com/questions/10923053/using-vba-to-select-and-highlight-excel-rows" target="_blank" rel="noopener">Using VBA to Select and Highlight Excel Rows</a>ï¼Œä½¿ç”¨ <code>.EntireRow.Interior.ColorIndex</code> æ–¹æ³•æ¥å°†æ•´è¡Œæ ‡è®°ï¼Œåœ¨excelé‡Œï¼Œç™½è‰²çš„æ•°å€¼æ˜¯<strong>2</strong>ï¼Œé»„è‰²æ˜¯<strong>6</strong>ã€‚</p><figure class="highlight vb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">If</span> longestCommonSubsequence(Cells(pos, nameRow).<span class="keyword">text</span>, classList(classNum)) &gt; <span class="number">40</span> <span class="keyword">Then</span></span><br><span class="line">Cells(pos, nameRow).EntireRow.Interior.ColorIndex = <span class="number">6</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">If</span></span><br></pre></td></tr></table></figure><h2 id="å®Œæ•´ä»£ç "><a class="header-anchor" href="#å®Œæ•´ä»£ç ">#</a>å®Œæ•´ä»£ç </h2><figure class="highlight vb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Option</span> <span class="keyword">Explicit</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">Public</span> <span class="keyword">Function</span> max(<span class="keyword">ByRef</span> a <span class="keyword">As</span> <span class="built_in">Long</span>, <span class="keyword">ByRef</span> b <span class="keyword">As</span> <span class="built_in">Long</span>) <span class="keyword">As</span> <span class="built_in">Long</span></span><br><span class="line">    <span class="keyword">If</span> a &gt;= b <span class="keyword">Then</span></span><br><span class="line">        max = a</span><br><span class="line">    <span class="keyword">Else</span></span><br><span class="line">        max = b</span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Function</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">Public</span> <span class="keyword">Function</span> longestCommonSubsequence(<span class="keyword">ByRef</span> string1 <span class="keyword">As</span> <span class="built_in">String</span>, <span class="keyword">ByRef</span> string2 <span class="keyword">As</span> <span class="built_in">String</span>) <span class="keyword">As</span> <span class="built_in">Double</span></span><br><span class="line">    <span class="keyword">If</span> string1 = vbNullString <span class="keyword">Or</span> string2 = vbNullString <span class="keyword">Then</span></span><br><span class="line">        MsgBox <span class="string">"å‡ºé”™"</span></span><br><span class="line">        <span class="keyword">Exit</span> <span class="keyword">Function</span></span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">Dim</span> num() <span class="keyword">As</span> <span class="built_in">Long</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">'define the array, note rows of zeros get added to front automatically</span></span><br><span class="line">    <span class="keyword">ReDim</span> num(Len(string1), Len(string2))</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">Dim</span> i <span class="keyword">As</span> <span class="built_in">Long</span>, j <span class="keyword">As</span> <span class="built_in">Long</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">For</span> i = <span class="number">1</span> <span class="keyword">To</span> Len(string1)</span><br><span class="line">        <span class="keyword">For</span> j = <span class="number">1</span> <span class="keyword">To</span> Len(string2)</span><br><span class="line">            <span class="keyword">If</span> <span class="keyword">Mid</span>$(string1, i, <span class="number">1</span>) = <span class="keyword">Mid</span>$(string2, j, <span class="number">1</span>) <span class="keyword">Then</span></span><br><span class="line">                num(i, j) = num(i - <span class="number">1</span>, j - <span class="number">1</span>) + <span class="number">1</span></span><br><span class="line">            <span class="keyword">Else</span></span><br><span class="line">                num(i, j) = max(num(i - <span class="number">1</span>, j), num(i, j - <span class="number">1</span>))</span><br><span class="line">            <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">        <span class="keyword">Next</span> j</span><br><span class="line">    <span class="keyword">Next</span> i</span><br><span class="line"></span><br><span class="line">    <span class="keyword">If</span> Len(string1) &gt; Len(string2) <span class="keyword">Then</span></span><br><span class="line">        longestCommonSubsequence = num(Len(string1), Len(string2)) * <span class="number">100.0</span> / Len(string2)</span><br><span class="line">    <span class="keyword">Else</span></span><br><span class="line">        longestCommonSubsequence = num(Len(string1), Len(string2)) * <span class="number">100.0</span> / Len(string1)</span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Function</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">Sub</span> FindAndMark()</span><br><span class="line">    <span class="keyword">Dim</span> pos <span class="keyword">As</span> <span class="built_in">Integer</span></span><br><span class="line">    <span class="keyword">Dim</span> nameRow <span class="keyword">As</span> <span class="built_in">Integer</span></span><br><span class="line">    <span class="keyword">Dim</span> classNum <span class="keyword">As</span> <span class="built_in">Integer</span></span><br><span class="line"><span class="keyword">Dim</span> rate <span class="keyword">As</span> <span class="built_in">Integer</span></span><br><span class="line">    nameRow = <span class="number">1</span></span><br><span class="line">    rate = <span class="number">60</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">For</span> pos = <span class="number">1</span> <span class="keyword">To</span> Sheet1.UsedRange.Rows.Count    </span><br><span class="line">        Cells(pos, nameRow).EntireRow.Interior.ColorIndex = <span class="number">2</span></span><br><span class="line">    <span class="keyword">Next</span> pos</span><br><span class="line"></span><br><span class="line">    <span class="keyword">Dim</span> classList() <span class="keyword">As</span> <span class="built_in">String</span></span><br><span class="line">    classList = Split(<span class="string">"å“å‘³ã€Šè¯—ç»ã€‹,è€å­çš„æ™ºæ…§,åº„å­æ–°è§£,æ±‰ä¹¦,é­æ™‹é£åº¦,å”å®‹è¯å²,å“å‘³æœ±å­,çº¢æ¥¼é—®æ¢¦,â€œèƒ¡â€è¯´å››å¤§åè‘—,å„’å®¶å…»å¿ƒè¯¾,ç¦…é“æ™ºæ…§,é“å¾·ç»,å¤å¸Œè…Šå“²å­¦,å¤å…¸æ–‡æ˜,ä¸­ä¸–çºªæ–‡æ˜,æ–‡è‰ºå¤å…´,å¯è’™è¿åŠ¨,å†·æˆ˜,ä¸–ç•Œå½“ä»£å²,è¥¿æ–¹å²å­¦åè‘—é€‰è¯»,è¥¿æ–¹éƒ½å¸‚ä¸æ–‡æ˜,ä¸–ç•Œä¸»è¦å®—æ•™æ å½±,ç¾è‚²ä¸å®è·µ:ä¹¦æ³•çš„æ„å½¢ç¾å­¦æº¯æº,ç¾è‚²ä¸å®è·µ:èŒ¶é“,ç¾è‚²ä¸å®è·µ:èŠ±è‰º,ç¾è‚²ä¸å®è·µ:é»‘ç™½ä¹‹é“â€”â€”å›´æ£‹,ç¾è‚²ä¸å®è·µ:è¡Œä¸ºä¹‹ç¾,ç¾è‚²ä¸å®è·µ:æ°‘ä¹,ç¾è‚²ä¸å®è·µ:å¤ç´,ç¾è‚²ä¸å®è·µ:è‰²å½©ç¾å­¦,è·¨ç•Œâ€¢å¯¹è¯,å‘¨æ¸¸åˆ—å›½ï¼šä¸­å›½äººå¼€çœ¼çœ‹ä¸–ç•Œ,åŸâ€¢äººï¼šå¤šå­¦ç§‘è§†é‡ä¸­çš„éƒ½å¸‚ç©ºé—´ã€å†å²ä¸æ–‡åŒ–,éŸ³ä¹çš„è§‚å¿µ,éŸ³ä¹çš„è§‚å¿µï¼ˆä¸‹ï¼‰,éŸ³ä¹çš„è§‚å¿µÂ·éŸ³ä¹çš„å¤šç»´è§†è§’,äººæ–‡ç»å…¸å¯¼è¯»,ç”Ÿå‘½ç§‘å­¦å¯¼è®º,â€œèµ°è¿›æµ·æ´‹â€ç³»åˆ—è®²åº§,äººæ–‡å¤§è®²å ‚,äººæ–‡å¤§è®²å ‚Â·ä¸­å›½æ–‡åŒ–å·¡ç¤¼,äººæ–‡å¤§è®²å ‚Â·å‘¨æ¸¸åˆ—å›½,äººæ–‡å¤§è®²å ‚Â·è‰ºæœ¯çš„è§‚å¿µ,äººæ–‡å¤§è®²å ‚Â·æ€§åˆ«ä¸ç¤¾ä¼š,äººæ–‡å¤§è®²å ‚Â·å“²å­¦ä¸ä¸–ç•Œ,äººæ–‡å¤§è®²å ‚Â·äººæ–‡ç»å…¸å¯¼è¯»,äººæ–‡å¤§è®²å ‚Â·è®¤è¯†ä¸­å›½,äººæ–‡å¤§è®²å ‚Â·æ–‡è‰ºé‰´èµ,æ€§åˆ«æ•™è‚²,å½±åƒçš„ä¸–ç•Œ,åª’ä½“ç¬¬ä¸€è¯¾,ä¸ç¤¾ä¼šå­¦åŒæ¸¸"</span>, <span class="string">","</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">For</span> pos = <span class="number">1</span> <span class="keyword">To</span> Sheet1.UsedRange.Rows.Count</span><br><span class="line">        <span class="keyword">For</span> classNum = <span class="number">0</span> <span class="keyword">To</span> UBound(classList)</span><br><span class="line">            <span class="keyword">If</span> longestCommonSubsequence(Cells(pos, nameRow).<span class="keyword">text</span>, classList(classNum)) &gt; rate <span class="keyword">Then</span></span><br><span class="line">                Cells(pos, nameRow).EntireRow.Interior.ColorIndex = <span class="number">6</span></span><br><span class="line">            <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">        <span class="keyword">Next</span></span><br><span class="line">    <span class="keyword">Next</span> pos</span><br><span class="line"></span><br><span class="line">    classList = Split(<span class="string">"ç”Ÿæ€ä¹‹ç¾,ä¸€â€œè¯ºâ€åƒé‡‘â€”â€”è¯ºè´å°”æ–‡å­¦å¥–ä½œå®¶ç»å…¸ä½œå“å¯¼è¯»,æµ·é™†ç›¸æœ›è¯ä¸è·¯,è¥¿æ–¹å¤ä»£å»ºç­‘è‰ºæœ¯å²,ä¸–ç•Œè‰ºæœ¯åšç‰©é¦†ä¹‹æ—…,è¥¿æ–¹ç»å…¸æ­Œå‰§ä¸éŸ³ä¹å‰§æ¬£èµ,è¥¿æ–¹æ‘‡æ»šæ–‡åŒ–,è‹±å›½åˆ›é€ äº†ç°ä»£ä¸–ç•Œå—? â€”â€”è‹±å›½è¿‘ä»£å²,çŸ¥æ—¥ä¹‹æ™ºâ€”â€”ä¸­æ—¥ä¹‹é—´æ–‡åŒ–äº¤æ¶‰çš„è¯ é‡Šä¸åæ€,ä¸œå±±é­å¤·ä¸æ—¥æœ¬è‰ºæœ¯,ä¸­ä¸œæ¼«è®°,å…¨çƒåŒ–ä¸ä¸­å›½å²,è®¤è¯†åœ°çƒ,ç¾å›½æ–‡åŒ–å²,ä¸­å›½å¤ä»£åŸå¸‚å²,ä¸­å›½æš¨ä¸œæ–¹å¤ä»£å»ºç­‘è‰ºæœ¯å²,æ–‡åŒ–ä¸­å›½,å®˜åƒš,ä¸­å›½æ–‡å­¦ï¼ˆå…ˆç§¦é­æ™‹å—åŒ—æœéƒ¨åˆ†ï¼‰,ä¸­å›½æ–‡å­¦ï¼ˆå”å®‹éƒ¨åˆ†ï¼‰,ä¸­å›½ç§‘ä¸¾æ–‡åŒ–,å¤§å”ç››ä¸–ï¼šå”ä»£çš„æ”¿æ²»ä¸ç¤¾ä¼š,æ˜æ¸…å°è¯´ä¸­çš„ç¤¾ä¼šç”Ÿæ´»,ç¯è°œä¸­çš„ä¸­å›½æ™ºæ…§,å½“ä»£ä¸­å›½çš„æ–‡åŒ–ç”Ÿäº§,ä¸­å›½ç»æµä¸æ–‡åŒ–åœ°ç†,åäºŒå­”é™¶ç¬›æ¼”å¥,ç”·å£°åˆå”±ï¼ˆä¸Šï¼‰,å°æç´æ¼”å¥è®­ç»ƒ,ç¤¼ä¹ä¹‹é‚¦çš„ä¹æ–‡åŒ–å·¡ç¤¼,è‰ºæœ¯æ¬£èµä¸åˆ›ä½œ,å½±åƒå·¥ä½œåŠ,æ ¡å›­æˆå‰§åˆ›ä½œå®è·µ,çºªå½•ç‰‡ä¸å®è·µ,åŸºåœ°å®è·µä¸æ•™å­¦ï¼ˆä¸Šï¼‰,è¿·äººçš„éŸ³ä¹ä¸å³å…´çš„ä¹è¶£,è†å¬ç»å…¸éŸ³ä¹,ç¾å›½å¤§ä¼—æµè¡ŒéŸ³ä¹,å£°ä¹è‰ºæœ¯èµæ,æ€§åˆ«ä¸æ–‡å­¦,æ€§åˆ«æ•™è‚²ä¸ç”Ÿæ´»,èº«ä»½ä¸è®¤åŒ,ä¸­åŒ»å…»ç”Ÿï¼ˆåŸåï¼šèµ°è¿‘ä¸­åŒ»,ç”Ÿæ´»ä¸­çš„åŒ–å­¦A,ç£·ä¸ç”Ÿæ´»,ç–¾ç—…ä¸å¥åº·,æ— çŸ¥ä¹‹çŸ¥â€”â€”å“²å­¦çš„æ™ºæ…§,ç”Ÿæ´»ä¸­çš„ä¼¦ç†,ç‰©è´¨æ–‡æ˜,å®¶å±‹ä¸æ—æ€§"</span>, <span class="string">","</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">For</span> pos = <span class="number">1</span> <span class="keyword">To</span> Sheet1.UsedRange.Rows.Count</span><br><span class="line">        <span class="keyword">For</span> classNum = <span class="number">0</span> <span class="keyword">To</span> UBound(classList)</span><br><span class="line">            <span class="keyword">If</span> longestCommonSubsequence(Cells(pos, nameRow).<span class="keyword">text</span>, classList(classNum)) &gt; rate <span class="keyword">Then</span></span><br><span class="line">                Cells(pos, nameRow).EntireRow.Interior.ColorIndex = <span class="number">6</span></span><br><span class="line">            <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">        <span class="keyword">Next</span></span><br><span class="line">    <span class="keyword">Next</span> pos</span><br><span class="line"></span><br><span class="line">    classList = Split(<span class="string">"æ–‡å­¦ä¸æ–‡åŒ–ç ”ç©¶çƒ­ç‚¹æ¦‚å¿µè§£æ,çŸ¥è¯†åˆ†å­ä¸å…¬å…±é¢†åŸŸ,å…¬æ°‘å¸¸è¯†,ç§‘æŠ€ä¼¦ç†,é—½å—æ–¹è¨€ä¸æ–‡åŒ–,é—½å—è¯å…¥é—¨,åº”ç”¨åŒ»ç–—äººç±»å­¦ä¸èº«å¿ƒå¥åº·,æ–‡åŒ–äººç±»å­¦,é€»è¾‘ä¸ç§‘å­¦,æ¨ç†ä¸è®ºè¯,æµè¡Œæ–‡åŒ–â€”â€”çˆ±ä¸å“€æ„,æ¯”è¾ƒæ–‡å­¦ä¸æ–‡åŒ–,è·¨ç•Œè®ºé“ï¼šç§‘å­¦èµ°è¿›äººæ–‡,å›½æ•…æ–°çŸ¥ï¼šæ²Ÿé€šæ–‡ç†ï¼Œå¯è¿ªæ™ºæ…§,æ‹äººçµ®è¯­â€”ä¸–ç•Œç”µå½±çš„æƒ…æ„Ÿæ•™è‚²,æ•™è‚²å­¦ç”µå½±æ‰¹è¯„,æ€ç»´è§„åˆ™,æ²‰èˆŸå¸†å½±-æµ·æ´‹è€ƒå¤,ä¹¡æ‘ä»ªå¼ä¸æˆå‰§,ä¹¡æ‘ã€ä¹¡æ„ä¸æ–°ä¹¡æ‘å»ºè®¾,ä¸­å¤–æ–‡åŒ–æ¯”è¾ƒ,ç®€æ˜å¤©æ–‡å­¦,è¯å­¦ä¸åŒ–å¦†å“å­¦,æ–‡ç‰©é‰´èµ,å¤§æ•°æ®æ—¶ä»£çš„ä¿¡æ¯å®‰å…¨,è´¢ç¨åŸºç¡€,ç¯å¢ƒä¸èƒ½æº,æ™ºèƒ½åˆ¶é€ ä¸å·¥ä¸š4.0,æ°´ä¸ç”Ÿæ´»,èˆªç©ºèˆªå¤©åŸºç¡€,Positive Psychologyï¼ˆç§¯æå¿ƒç†å­¦ï¼‰,å¤§å­¦å†å²ä¸æ–‡åŒ–,å¤§è‡ªç„¶æ¢ç§˜ï¼šè‡ªç„¶ä¸ç”Ÿæ€,ä¸œè¥¿æ–¹æ–‡åŒ–å·¡ç¤¼,äººæ–‡ä¸å…¬å…±å«ç”Ÿ,åå¤æ–‡æ˜ä¼ æ’­,ç»æµå­¦ç»å…¸,ä¸¤å²¸å›½å­¦ä¸æ–‡åŒ–ä¼ æ‰¿,ç¾å›½æ–‡å­¦ç»å…¸,å“æ‚Ÿè¥¿æ¸¸,é€»è¾‘å­¦,ç¤¾ä¼šå¿ƒç†å­¦,é¡¹ç›®ç®¡ç†ï¼šæ¡ˆä¾‹ä¸å®è·µ,ä¸­å›½å†å²åœ°ç†,å›½å‰§èµæ"</span>, <span class="string">","</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">For</span> pos = <span class="number">1</span> <span class="keyword">To</span> Sheet1.UsedRange.Rows.Count</span><br><span class="line">        <span class="keyword">For</span> classNum = <span class="number">0</span> <span class="keyword">To</span> UBound(classList)</span><br><span class="line">            <span class="keyword">If</span> longestCommonSubsequence(Cells(pos, nameRow).<span class="keyword">text</span>, classList(classNum)) &gt; rate <span class="keyword">Then</span></span><br><span class="line">                Cells(pos, nameRow).EntireRow.Interior.ColorIndex = <span class="number">6</span></span><br><span class="line">            <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">        <span class="keyword">Next</span></span><br><span class="line">    <span class="keyword">Next</span> pos</span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Sub</span></span><br></pre></td></tr></table></figure><p>å®Œæ•´çš„ä»£ç å¦‚ä¸Šï¼Œéœ€è¦è‡ªå·±æ‹¿å»ä¿®æ”¹çš„åœ°æ–¹æœ‰ï¼š</p><ol><li><code>nameRow</code> æ˜¯éœ€è¦æŸ¥æ‰¾çš„åå­—æ‰€åœ¨çš„åˆ—å·</li><li><code>classList</code> æ˜¯éœ€è¦æŸ¥æ‰¾çš„åå­—çš„é›†åˆ</li><li><code>rate</code> æ˜¯é‡å¤ç‡ï¼Œå³é˜ˆå€¼</li><li>å¦‚æœ<code>classList</code>ç‰¹åˆ«é•¿ï¼Œçœ‹æƒ…å†µåˆ†å‡ æ®µæ¥æŸ¥æ‰¾å§ï¼Œåƒä¸Šé¢è¿™æ ·ï¼Œæ³¨æ„æ¯ä¸€æ®µçš„å¼€å¤´å’Œç»“å°¾ä¸è¦å¸¦é€—å·<code>,</code></li></ol><p>ä¸€åˆ—æ•°æ®è½¬<code>,</code>æ ¼å¼çš„ç½‘å€åœ¨è¿™ï¼š<a href="https://onns.xyz/tools/line-break-to-comma/">https://onns.xyz/tools/line-break-to-comma/</a>ï¼Œæ•ˆæœå¦‚å›¾ï¼š</p><center><p><img src="//onns.xyz/blog/image/20200914-1.jpg" alt="æ•ˆæœå›¾"></p></center><h2 id="æµ‹è¯•"><a class="header-anchor" href="#æµ‹è¯•">#</a>æµ‹è¯•</h2><p>æµ‹è¯•ç»“æœå¦‚å›¾æ‰€ç¤ºï¼š</p><center><p><img src="https://onns.xyz/blog/image/20200219-1.png" alt="æµ‹è¯•ç»“æœå›¾"></p></center><h2 id="å…¶å®ƒ"><a class="header-anchor" href="#å…¶å®ƒ">#</a>å…¶å®ƒ</h2><p>å¦‚æœåªæ˜¾ç¤ºæ ‡é»„çš„ç›¸å…³é—®é¢˜å¯ä»¥ç™¾åº¦ã€‚</p><ul><li><a href="https://zhidao.baidu.com/question/555387177.html" target="_blank" rel="noopener">åœ¨EXCELè¡¨æ ¼ä¸­ï¼Œå¦‚ä½•æŠŠæ ‡æ³¨é»„è‰²çš„æ•°æ®å•å…ƒæ ¼ç­›é€‰å‡ºæ¥</a></li></ul><h2 id="å‚è€ƒæ–‡æ¡£"><a class="header-anchor" href="#å‚è€ƒæ–‡æ¡£">#</a>å‚è€ƒæ–‡æ¡£</h2><ul><li><a href="https://www.vitoshacademy.com/excel-search-and-highlight-text/" target="_blank" rel="noopener">Excel VBA â€“ Search and highlight text</a></li></ul><p>å¦‚æœæœ‰ä»»ä½•é—®é¢˜å¯ä»¥ç•™è¨€é—®æˆ‘ï½ï½</p>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> visual basic for applications </tag>
            
            <tag> macro </tag>
            
            <tag> LCS </tag>
            
            <tag> excel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaå­¦ä¹ ç¬”è®°ï¼ˆä¸‰ï¼‰</title>
      <link href="/blog/2020/02/14/java-notes-3/"/>
      <url>/blog/2020/02/14/java-notes-3/</url>
      
        <content type="html"><![CDATA[<p>Java æ ¸å¿ƒæŠ€æœ¯å·ä¸€åŸºç¡€çŸ¥è¯†ç¬¬ 10 ç‰ˆ</p><h2 id="ç»§æ‰¿"><a class="header-anchor" href="#ç»§æ‰¿">#</a>ç»§æ‰¿</h2><a id="more"></a><h3 id="ç±»ã€è¶…ç±»å’Œå­ç±»"><a class="header-anchor" href="#ç±»ã€è¶…ç±»å’Œå­ç±»">#</a>ç±»ã€è¶…ç±»å’Œå­ç±»</h3><ul><li><p>å…³é”®å­—<code>extends</code>è¡¨ç¤ºç»§æ‰¿ã€‚</p></li><li><p>åœ¨é€šè¿‡æ‰©å±•è¶…ç±»å®šä¹‰å­ç±»çš„æ—¶å€™ï¼Œä»…éœ€è¦æŒ‡å‡ºå­ç±»ä¸è¶…ç±»çš„ä¸åŒä¹‹å¤„ã€‚</p></li><li><p>åœ¨è®¾è®¡ç±»çš„æ—¶å€™ï¼Œåº”è¯¥å°†é€šç”¨çš„æ–¹æ³•æ”¾åœ¨è¶…ç±»ä¸­ï¼Œè€Œå°†å…·æœ‰ç‰¹æ®Šç”¨é€”çš„æ–¹æ³•æ”¾åœ¨å­ç±»ä¸­ã€‚</p></li><li><p>å­ç±»ç»§æ‰¿çš„æ–¹æ³•ä¸èƒ½ç›´æ¥åœ°è®¿é—®è¶…ç±»çš„ç§æœ‰åŸŸï¼Œå¯ä»¥ä½¿ç”¨ <code>super</code> è°ƒç”¨è¶…ç±»çš„æ–¹æ³•æ¥é‡å†™å­ç±»çš„æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getSalary</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">double</span> baseSalary = <span class="keyword">super</span>.getSalary();</span><br><span class="line">  <span class="keyword">return</span> baseSalary + bonus;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨ <code>super</code> è°ƒç”¨æ„é€ å™¨çš„è¯­å¥å¿…é¡»æ˜¯å­ç±»æ„é€ å™¨çš„ç¬¬ä¸€æ¡è¯­å¥ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Manager</span><span class="params">(String name, <span class="keyword">double</span> salary, <span class="keyword">int</span> year,</span></span></span><br><span class="line"><span class="function"><span class="params"><span class="keyword">int</span> month, <span class="keyword">int</span> day)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">super</span>(name, salary, year, month, day);</span><br><span class="line">  <span class="comment">// è°ƒç”¨è¶…ç±» Employee ä¸­å«æœ‰ nã€sã€year month</span></span><br><span class="line">  <span class="comment">// å’Œ day å‚æ•°çš„æ„é€ å™¨</span></span><br><span class="line">  bonus = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å¦‚æœå­ç±»çš„æ„é€ å™¨æ²¡æœ‰æ˜¾å¼åœ°è°ƒç”¨è¶…ç±»çš„æ„é€ å™¨ï¼Œåˆ™å°†è‡ªåŠ¨åœ°è°ƒç”¨è¶…ç±»é»˜è®¤ï¼ˆæ²¡æœ‰å‚æ•°ï¼‰çš„æ„é€ å™¨ã€‚å¦‚æœè¶…ç±»æ²¡æœ‰ä¸å¸¦å‚æ•°çš„æ„é€ å™¨ï¼Œå¹¶ä¸”åœ¨å­ç±»çš„æ„é€ å™¨ä¸­åˆæ²¡æœ‰æ˜¾å¼åœ°è°ƒç”¨è¶…ç±»çš„å…¶ä»–æ„é€ å™¨ï¼Œåˆ™ Java ç¼–è¯‘å™¨å°†æŠ¥å‘Šé”™è¯¯ã€‚</p></li><li><p><code>super</code> å…³é”®å­—çš„ä¸¤ä¸ªç”¨é€”:</p><ol><li>è°ƒç”¨è¶…ç±»çš„æ–¹æ³•ã€‚</li><li>è°ƒç”¨è¶…ç±»çš„æ„é€ å™¨ã€‚</li></ol></li><li><p><strong>å¤šæ€ï¼ˆpolymorphismï¼‰</strong>ï¼šä¸€ä¸ªå¯¹è±¡å˜é‡å¯ä»¥æŒ‡ç¤ºå¤šç§å®é™…ç±»å‹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Manager boss = <span class="keyword">new</span> Manager(. . .);</span><br><span class="line">Employee[] staff = <span class="keyword">new</span> Employee[<span class="number">3</span>];</span><br><span class="line">staff[<span class="number">0</span>] = boss;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå˜é‡ staff[0] ä¸ boss å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡ã€‚</span></span><br><span class="line"><span class="comment">// ä½†ç¼–è¯‘å™¨å°† staff[0] çœ‹æˆ Employee å¯¹è±¡ã€‚ è¿™æ„å‘³ç€ï¼Œ</span></span><br><span class="line"><span class="comment">// å¯ä»¥è¿™æ ·è°ƒç”¨</span></span><br><span class="line">boss.setBonus(<span class="number">5000</span>); <span class="comment">// OK</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½†ä¸èƒ½è¿™æ ·è°ƒç”¨</span></span><br><span class="line">staff[<span class="number">0</span>].setBonus(<span class="number">5000</span>); <span class="comment">// Error</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™æ˜¯å› ä¸º staff[0] å£°æ˜çš„ç±»å‹æ˜¯ Employeeï¼Œ</span></span><br><span class="line"><span class="comment">// è€Œ setBonus ä¸æ˜¯ Employee ç±»çš„æ–¹æ³•ã€‚</span></span><br></pre></td></tr></table></figure></li><li><p><strong>åŠ¨æ€ç»‘å®šï¼ˆdynamic bindingï¼‰</strong>ï¼šåœ¨è¿è¡Œæ—¶èƒ½å¤Ÿè‡ªåŠ¨åœ°é€‰æ‹©è°ƒç”¨å“ªä¸ªæ–¹æ³•ã€‚</p></li><li><p>å¯ä»¥å°†ä¸€ä¸ªå­ç±»çš„å¯¹è±¡èµ‹ç»™è¶…ç±»å˜é‡ï¼Œä½†ä¸èƒ½å°†ä¸€ä¸ªè¶…ç±»çš„å¼•ç”¨èµ‹ç»™å­ç±»å˜é‡ã€‚ä¸æ˜¯æ‰€æœ‰çš„æ°´æœéƒ½æ˜¯è¥¿ç“œ<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p></li><li><p>å‡è®¾è¦è°ƒç”¨ <code>x.f(args)</code>ï¼Œéšå¼å‚æ•° <code>x</code> å£°æ˜ä¸ºç±» <code>C</code> çš„ä¸€ä¸ªå¯¹è±¡ã€‚</p><ol><li>ç¼–è¯‘å™¨æŸ»çœ‹å¯¹è±¡çš„å£°æ˜ç±»å‹å’Œæ–¹æ³•åã€‚ç¼–è¯‘å™¨å°†ä¼šä¸€ä¸€åˆ—ä¸¾æ‰€æœ‰ <code>C</code> ç±»ä¸­åä¸º <code>f</code> çš„æ–¹æ³•å’Œå…¶è¶…ç±»ä¸­è®¿é—®å±æ€§ä¸º <code>public</code> ä¸”åä¸º <code>f</code> çš„æ–¹æ³•ï¼ˆè¶…ç±»çš„ç§æœ‰æ–¹æ³•ä¸å¯è®¿é—®ï¼‰ã€‚</li><li>ç¼–è¯‘å™¨å°†æŸ»çœ‹è°ƒç”¨æ–¹æ³•æ—¶æä¾›çš„å‚æ•°ç±»å‹ã€‚å¦‚æœåœ¨æ‰€æœ‰åä¸º <code>f</code> çš„æ–¹æ³•ä¸­å­˜åœ¨ä¸€ä¸ªä¸æä¾›çš„å‚æ•°ç±»å‹å®Œå…¨åŒ¹é…ï¼Œå°±é€‰æ‹©è¿™ä¸ªæ–¹æ³•ã€‚è¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸º<code>é‡è½½è§£æ(overloading resolution)</code>ã€‚è¿”å›ç±»å‹ä¸æ˜¯ç­¾åçš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤ï¼Œåœ¨è¦†ç›–æ–¹æ³•æ—¶ï¼Œä¸€å®šè¦ä¿è¯è¿”å›ç±»å‹çš„å…¼å®¹æ€§ã€‚å…è®¸å­ç±»å°†è¦†ç›–æ–¹æ³•çš„è¿”å›ç±»å‹å®šä¹‰ä¸ºåŸè¿”å›ç±»å‹çš„å­ç±»å‹ã€‚<sup class="footnote-ref"><a href="#fn1" id="fnref1:1">[1:1]</a></sup></li><li>å¦‚æœæ˜¯ private æ–¹æ³•ã€static æ–¹æ³•ã€final æ–¹æ³•æˆ–è€…æ„é€ å™¨ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨å°†å¯ä»¥å‡†ç¡®åœ°çŸ¥é“åº”è¯¥è°ƒç”¨å“ªä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬å°†è¿™ç§è°ƒç”¨æ–¹å¼ç§° <code>ä¸ºé™æ€ç»‘å®š(static binding)</code>ã€‚</li><li>å½“ç¨‹åºè¿è¡Œï¼Œå¹¶ä¸”é‡‡ç”¨åŠ¨æ€ç»‘å®šè°ƒç”¨æ–¹æ³•æ—¶ï¼Œè™šæ‹Ÿæœºä¸€å®šè°ƒç”¨ä¸ <code>x</code> æ‰€å¼•ç”¨å¯¹è±¡çš„å®é™…ç±»å‹æœ€åˆé€‚çš„é‚£ä¸ªç±»çš„æ–¹æ³•ã€‚</li></ol></li><li><p>æ¯æ¬¡è°ƒç”¨æ–¹æ³•éƒ½è¦è¿›è¡Œæœç´¢ï¼Œæ—¶é—´å¼€é”€ç›¸å½“å¤§ã€‚å› æ­¤ï¼Œè™šæ‹Ÿæœºé¢„å…ˆä¸ºæ¯ä¸ªç±»åˆ›å»ºäº†ä¸€ä¸ª<code>æ–¹æ³•è¡¨(method table)</code>ï¼Œå…¶ä¸­åˆ—å‡ºäº†æ‰€æœ‰æ–¹æ³•çš„ç­¾åå’Œå®é™…è°ƒç”¨çš„æ–¹æ³•ã€‚</p></li><li><p>åŠ¨æ€ç»‘å®šæœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„ç‰¹æ€§ï¼šæ— éœ€å¯¹ç°å­˜çš„ä»£ç è¿›è¡Œä¿®æ”¹ï¼Œå°±å¯ä»¥å¯¹ç¨‹åºè¿›è¡Œæ‰©å±•ã€‚<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>å¤šäº†ä¸€ä¸ªæ–°çš„ç±»ä¹‹åï¼Œæ¯”å¦‚<code>Executive</code>ç±»ä¹Ÿæ˜¯<code>Employee</code>çš„å­ç±»ï¼Œé‚£<code>Employee e</code>å¦‚æœåˆšå¥½å¼•ç”¨ä¸€ä¸ª <code>Executive</code> ç±»çš„å¯¹è±¡ï¼Œå°±å¯ä»¥è‡ªåŠ¨çš„è°ƒç”¨è€Œä¸éœ€è¦ä¿®æ”¹ä»£ç ã€‚<sup class="footnote-ref"><a href="#fn1" id="fnref1:2">[1:2]</a></sup></p></li><li><p>åœ¨è¦†ç›–ä¸€ä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œå­ç±»æ–¹æ³•ä¸èƒ½ä½äºè¶…ç±»æ–¹æ³•çš„å¯è§æ€§ã€‚<sup class="footnote-ref"><a href="#fn1" id="fnref1:3">[1:3]</a></sup></p></li><li><p>ä¸å…è®¸æ‰©å±•çš„ç±»è¢«ç§°ä¸º <code>final</code> ç±»ã€‚</p></li><li><p><code>final</code> ç±»ä¸­çš„æ‰€æœ‰æ–¹æ³•è‡ªåŠ¨åœ°æˆä¸º <code>final</code> æ–¹æ³•ã€‚</p></li><li><p>å¦‚æœå°†ä¸€ä¸ªç±»å£°æ˜ä¸º <code>final</code>ï¼Œåªæœ‰å…¶ä¸­çš„æ–¹æ³•è‡ªåŠ¨åœ°æˆä¸º <code>final</code>ï¼Œè€Œä¸åŒ…æ‹¬åŸŸã€‚</p></li><li><p>å¦‚æœä¸€ä¸ªæ–¹æ³•æ²¡æœ‰è¢«è¦†ç›–å¹¶ä¸”å¾ˆçŸ­ï¼Œç¼–è¯‘å™¨å°±èƒ½å¤Ÿå¯¹å®ƒè¿›è¡Œä¼˜åŒ–å¤„ç†ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸ºç§°ä¸º<code>å†…è”(inlining)</code>ã€‚ä¾‹å¦‚ï¼Œå†…è”è°ƒç”¨<code>e.getName()</code>å°†è¢«æ›¿æ¢ä¸ºè®¿é—® <code>e.name</code> åŸŸã€‚<sup class="footnote-ref"><a href="#fn1" id="fnref1:4">[1:4]</a></sup></p></li></ul><hr><ul><li>è¿›è¡Œç±»å‹è½¬æ¢çš„å”¯ä¸€åŸå› æ˜¯ï¼šåœ¨æš‚æ—¶å¿½è§†å¯¹è±¡çš„å®é™…ç±»å‹ä¹‹åï¼Œä½¿ç”¨å¯¹è±¡çš„å…¨éƒ¨åŠŸèƒ½ã€‚</li><li>å°†ä¸€ä¸ªå€¼å­˜äººå˜é‡æ—¶ï¼Œç¼–è¯‘å™¨å°†æ£€æŸ¥æ˜¯å¦å…è®¸è¯¥æ“ä½œã€‚å°†ä¸€ä¸ªå­ç±»çš„å¼•ç”¨èµ‹ç»™ä¸€ä¸ªè¶…ç±»å˜é‡ï¼Œç¼–è¯‘å™¨æ˜¯å…è®¸çš„ã€‚ä½†å°†ä¸€ä¸ªè¶…ç±»çš„å¼•ç”¨èµ‹ç»™ä¸€ä¸ªå­ç±»å˜é‡ï¼Œå¿…é¡»è¿›è¡Œç±»å‹è½¬æ¢ï¼Œè¿™æ ·æ‰èƒ½å¤Ÿé€šè¿‡è¿è¡Œæ—¶çš„æ£€æŸ»ã€‚<sup class="footnote-ref"><a href="#fn1" id="fnref1:5">[1:5]</a></sup></li><li>è¿è¡Œè¿™ä¸ªç¨‹åºæ—¶ï¼ŒJava è¿è¡Œæ—¶ç³»ç»Ÿå°†æŠ¥å‘Šè¿™ä¸ªé”™è¯¯ï¼Œå¹¶äº§ç”Ÿä¸€ä¸ª<code>ClassCastException</code>å¼‚å¸¸ã€‚<sup class="footnote-ref"><a href="#fn1" id="fnref1:6">[1:6]</a></sup><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Manager boss = <span class="keyword">new</span> Manager(. . .);</span><br><span class="line">Employee[] staff = <span class="keyword">new</span> Employee[<span class="number">3</span>];</span><br><span class="line">staff[<span class="number">0</span>] = boss;</span><br><span class="line">Manager boss = (Manager) staff[<span class="number">1</span>]; <span class="comment">// Error</span></span><br></pre></td></tr></table></figure></li><li>åœ¨è¿›è¡Œç±»å‹è½¬æ¢ä¹‹å‰ï¼Œå…ˆæŸ¥çœ‹ä¸€ä¸‹æ˜¯å¦èƒ½å¤ŸæˆåŠŸåœ°è½¬æ¢ã€‚<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (staff[<span class="number">1</span>] <span class="keyword">instanceof</span> Manager)</span><br><span class="line">&#123;</span><br><span class="line">  boss = (Manager) staff[<span class="number">1</span>];</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>åªèƒ½åœ¨ç»§æ‰¿å±‚æ¬¡å†…è¿›è¡Œç±»å‹è½¬æ¢ã€‚</li><li>åœ¨å°†è¶…ç±»è½¬æ¢æˆå­ç±»ä¹‹å‰ï¼Œåº”è¯¥ä½¿ç”¨ <code>instanceof</code> è¿›è¡Œæ£€æŸ¥ã€‚</li><li>åœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåº”è¯¥å°½é‡å°‘ç”¨ç±»å‹è½¬æ¢å’Œ <code>instanceof</code> è¿ç®—ç¬¦ã€‚</li></ul><hr><ul><li>åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªæŠ½è±¡æ–¹æ³•çš„ç±»æœ¬èº«å¿…é¡»è¢«å£°æ˜ä¸ºæŠ½è±¡çš„ã€‚</li><li>æŠ½è±¡æ–¹æ³•å……å½“ç€å ä½çš„è§’è‰²ï¼Œå®ƒä»¬çš„å…·ä½“å®ç°åœ¨å­ç±»ä¸­ã€‚<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  . . .</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> String <span class="title">getDescription</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>æŠ½è±¡ç±»å¯ä»¥åŒ…å«å…·ä½“æ•°æ®å’Œå…·ä½“æ–¹æ³•ã€‚<blockquote><p>è®¸å¤šç¨‹åºå‘˜è®¤ä¸ºï¼Œåœ¨æŠ½è±¡ç±»ä¸­ä¸èƒ½åŒ…å«å…·ä½“æ–¹æ³•ã€‚å»ºè®®å°½é‡å°†é€šç”¨çš„åŸŸå’Œæ–¹æ³•ï¼ˆä¸ç®¡æ˜¯å¦æ˜¯æŠ½è±¡çš„ï¼‰æ”¾åœ¨è¶…ç±»ï¼ˆä¸ç®¡æ˜¯å¦æ˜¯æŠ½è±¡ç±»ï¼‰ä¸­ã€‚</p></blockquote></li><li>ç±»å³ä½¿ä¸å«æŠ½è±¡æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥å°†ç±»å£°æ˜ä¸ºæŠ½è±¡ç±»ã€‚</li><li>æŠ½è±¡ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–ã€‚<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Person(<span class="string">"Vinee Vu"</span>) <span class="comment">// é”™è¯¯</span></span><br></pre></td></tr></table></figure></li><li>å¯ä»¥å®šä¹‰ä¸€ä¸ªæŠ½è±¡ç±»çš„å¯¹è±¡å˜é‡ï¼Œä½†æ˜¯å®ƒåªèƒ½å¼•ç”¨éæŠ½è±¡å­ç±»çš„å¯¹è±¡ã€‚<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Person p = <span class="keyword">new</span> Student(<span class="string">"Vinee Vu"</span>, <span class="string">"Economics"</span>);</span><br></pre></td></tr></table></figure></li><li>Java ç”¨äºæ§åˆ¶å¯è§æ€§çš„ 4 ä¸ªè®¿é—®ä¿®é¥°ç¬¦ï¼š<ol><li>ä»…å¯¹æœ¬ç±»å¯è§ï¼š privateã€‚</li><li>å¯¹æ‰€æœ‰ç±»å¯è§ï¼š publicã€‚</li><li>å¯¹æœ¬åŒ…å’Œæ‰€æœ‰å­ç±»å¯è§ï¼š protectedã€‚</li><li>å¯¹æœ¬åŒ…å¯è§ï¼š ä¸éœ€è¦ä¿®é¥°ç¬¦ã€‚</li></ol></li></ul><hr><h3 id="objectï¼šæ‰€æœ‰ç±»çš„è¶…ç±»"><a class="header-anchor" href="#objectï¼šæ‰€æœ‰ç±»çš„è¶…ç±»">#</a>Objectï¼šæ‰€æœ‰ç±»çš„è¶…ç±»</h3><ul><li>Object ç±»æ˜¯ Java ä¸­æ‰€æœ‰ç±»çš„å§‹ç¥–ï¼Œåœ¨ Java ä¸­æ¯ä¸ªç±»éƒ½æ˜¯ç”±å®ƒæ‰©å±•è€Œæ¥çš„ã€‚</li><li>å¯ä»¥ä½¿ç”¨ Object ç±»å‹çš„å˜é‡å¼•ç”¨ä»»ä½•ç±»å‹çš„å¯¹è±¡ã€‚</li></ul><hr><p>ç¼–å†™ä¸€ä¸ªå®Œç¾çš„ equals æ–¹æ³•çš„å»ºè®®ï¼š</p><ol><li><p>æ˜¾å¼å‚æ•°å‘½åä¸º otherObjectï¼Œç¨åéœ€è¦å°†å®ƒè½¬æ¢æˆå¦ä¸€ä¸ªå«åš other çš„å˜é‡ã€‚</p></li><li><p>æ£€æµ‹ this ä¸ otherObject æ˜¯å¦å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span> = otherObject) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br></pre></td></tr></table></figure><p>è¿™æ¡è¯­å¥åªæ˜¯ä¸€ä¸ªä¼˜åŒ–ã€‚å®é™…ä¸Šï¼Œè¿™æ˜¯ä¸€ç§ç»å¸¸é‡‡ç”¨çš„å½¢å¼ã€‚å› ä¸ºè®¡ç®—è¿™ä¸ªç­‰å¼è¦æ¯”ä¸€ä¸ªä¸€ä¸ªåœ°æ¯”è¾ƒç±»ä¸­çš„åŸŸæ‰€ä»˜å‡ºçš„ä»£ä»·å°å¾—å¤šã€‚</p></li><li><p>æ£€æµ‹ otherObject æ˜¯å¦ä¸º null ,å¦‚æœä¸º null ï¼Œè¿”å› falseã€‚è¿™é¡¹æ£€æµ‹æ˜¯å¾ˆå¿…è¦çš„ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (otherObject = <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br></pre></td></tr></table></figure></li><li><p>æ¯”è¾ƒ this ä¸ otherObject æ˜¯å¦å±äºåŒä¸€ä¸ªç±»ã€‚å¦‚æœ equals çš„è¯­ä¹‰åœ¨æ¯ä¸ªå­ç±»ä¸­æœ‰æ‰€æ”¹å˜ï¼Œå°±ä½¿ç”¨ getClass æ£€æµ‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (getClass() != otherObject.getClass()) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br></pre></td></tr></table></figure><p>å¦‚æœæ‰€æœ‰çš„å­ç±»éƒ½æ‹¥æœ‰ç»Ÿä¸€çš„è¯­ä¹‰ï¼Œå°±ä½¿ç”¨ instanceof æ£€æµ‹:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!(otherObject <span class="keyword">instanceof</span> ClassName)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br></pre></td></tr></table></figure></li><li><p>å°† otherObject è½¬æ¢ä¸ºç›¸åº”çš„ç±»ç±»å‹å˜é‡ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ClassName other = (ClassName) otherObject</span><br></pre></td></tr></table></figure></li><li><p>ç°åœ¨å¼€å§‹å¯¹æ‰€æœ‰éœ€è¦æ¯”è¾ƒçš„åŸŸè¿›è¡Œæ¯”è¾ƒäº†ã€‚ä½¿ç”¨ <code>==</code> æ¯”è¾ƒåŸºæœ¬ç±»å‹åŸŸï¼Œä½¿ç”¨ equals æ¯”è¾ƒå¯¹è±¡åŸŸã€‚å¦‚æœæ‰€æœ‰çš„åŸŸéƒ½åŒ¹é…ï¼Œå°±è¿”å› trueï¼›å¦åˆ™è¿”å› falseã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> field1 == other.field1</span><br><span class="line">  &amp;&amp; Objects.equals(field2, other.field2)</span><br><span class="line">  &amp;&amp; . . . ;</span><br></pre></td></tr></table></figure><p>å¦‚æœåœ¨å­ç±»ä¸­é‡æ–°å®šä¹‰ equals, å°±è¦åœ¨å…¶ä¸­åŒ…å«è°ƒç”¨ super.equals(other)ã€‚</p></li></ol><hr><ul><li>åªè¦å¯¹è±¡ä¸ä¸€ä¸ªå­—ç¬¦ä¸²é€šè¿‡æ“ä½œç¬¦ â€œ+â€ è¿æ¥èµ·æ¥ï¼ŒJava ç¼–è¯‘å°±ä¼šè‡ªåŠ¨åœ°è°ƒç”¨ <code>toString</code> æ–¹æ³•ï¼Œä»¥ä¾¿è·å¾—è¿™ä¸ªå¯¹è±¡çš„å­—ç¬¦ä¸²æè¿°ã€‚</li></ul><hr><h3 id="èŒƒæ€§æ•°ç»„åˆ—è¡¨"><a class="header-anchor" href="#èŒƒæ€§æ•°ç»„åˆ—è¡¨">#</a>èŒƒæ€§æ•°ç»„åˆ—è¡¨</h3><ul><li>èŒƒå‹æ•°ç»„åˆ—è¡¨<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;Integer&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br></pre></td></tr></table></figure></li><li>ä¸å¿…æŒ‡å‡ºæ•°ç»„çš„å¤§å°ã€‚</li><li>ä½¿ç”¨ add å°†ä»»æ„å¤šçš„å…ƒç´ æ·»åŠ åˆ°æ•°ç»„ä¸­ã€‚</li><li>ä½¿ç”¨ size() æ›¿ä»£ length è®¡ç®—å…ƒç´ çš„æ•°ç›®ã€‚</li><li>ä½¿ç”¨ a.get(i) æ›¿ä»£ a[i] è®¿é—®å…ƒç´ ã€‚</li><li>ä¸€æ—¦èƒ½å¤Ÿç¡®è®¤æ•°ç»„åˆ—è¡¨çš„å¤§å°ä¸å†å‘ç”Ÿå˜åŒ–ï¼Œå°±å¯ä»¥è°ƒç”¨ <code>trimToSize</code> æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•å°†å­˜å‚¨åŒºåŸŸçš„å¤§å°è°ƒæ•´ä¸ºå½“å‰å…ƒç´ æ•°é‡æ‰€éœ€è¦çš„å­˜å‚¨ç©ºé—´æ•°ç›®ã€‚åƒåœ¾å›æ”¶å™¨å°†å›æ”¶å¤šä½™çš„å­˜å‚¨ç©ºé—´ã€‚</li><li>ä¸€æ—¦æ•´ç†äº†æ•°ç»„åˆ—è¡¨çš„å¤§å°ï¼Œæ·»åŠ æ–°å…ƒç´ å°±éœ€è¦èŠ±æ—¶é—´å†æ¬¡ç§»åŠ¨å­˜å‚¨å—ï¼Œ æ‰€ä»¥åº”è¯¥åœ¨ç¡®è®¤ä¸ä¼šæ·»åŠ ä»»ä½•å…ƒç´ æ—¶ï¼Œå†è°ƒç”¨ <code>trimToSize</code>ã€‚</li></ul><hr><ul><li>printf æ–¹æ³•æ˜¯è¿™æ ·å®šä¹‰çš„ï¼š<sup class="footnote-ref"><a href="#fn1" id="fnref1:7">[1:7]</a></sup><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PrintStream</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> PrintStream <span class="title">printf</span><span class="params">(String fmt, Object... args)</span> </span>&#123; <span class="keyword">return</span> format(fmt, args); &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><code>...</code>æ˜¯ Java ä»£ç çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒè¡¨æ˜è¿™ä¸ªæ–¹æ³•å¯ä»¥æ¥æ”¶ä»»æ„æ•°é‡çš„å¯¹è±¡ï¼ˆé™¤ fmt å‚æ•°ä¹‹å¤–ï¼‰ã€‚</li></ul><hr><ul><li><p>åœ¨æ¯”è¾ƒä¸¤ä¸ªæšä¸¾ç±»å‹çš„å€¼æ—¶ï¼Œæ°¸è¿œä¸éœ€è¦è°ƒç”¨ <code>equals</code>, è€Œç›´æ¥ä½¿ç”¨ <code>==</code> å°±å¯ä»¥äº†ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> Size &#123; SMALL, MEDIUM, LARGE, EXTRA_LARGE &#125;;</span><br></pre></td></tr></table></figure></li><li><p>å¦‚æœéœ€è¦çš„è¯ï¼Œå¯ä»¥åœ¨æšä¸¾ç±»å‹ä¸­æ·»åŠ ä¸€äº›æ„é€ å™¨ã€æ–¹æ³•å’ŒåŸŸã€‚æ„é€ å™¨åªæ˜¯åœ¨æ„é€ æšä¸¾å¸¸é‡çš„æ—¶å€™è¢«è°ƒç”¨ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> Size</span><br><span class="line">&#123;</span><br><span class="line">  SMALL(<span class="string">"S"</span>), MEDIUM(<span class="string">"M"</span>) , LARGE(<span class="string">"L"</span>) , EXTRA_LARGE(<span class="string">"XL"</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> String abbreviation;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="title">Size</span><span class="params">(String abbreviation)</span> </span>&#123; <span class="keyword">this</span>.abbreviation = abbreviation; &#125;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getAbbreviation</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> abbreviation; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>æ‰€æœ‰çš„æšä¸¾ç±»å‹éƒ½æ˜¯ <code>Enum</code> ç±»çš„å­ç±»ã€‚</p></li><li><p>æ¯ä¸ªæšä¸¾ç±»å‹éƒ½æœ‰ä¸€ä¸ªé™æ€çš„ <code>values</code> æ–¹æ³•ï¼Œå®ƒå°†è¿”å›ä¸€ä¸ªåŒ…å«å…¨éƒ¨æšä¸¾å€¼çš„æ•°ç»„ã€‚</p></li><li><p><code>ordinal</code> æ–¹æ³•è¿”å†‹ enum å£°æ˜ä¸­æšä¸¾å¸¸é‡çš„ä½ç½®ï¼Œä½ç½®ä» <code>0</code> å¼€å§‹è®¡æ•°ã€‚ä¾‹å¦‚ï¼š<code>Size.MEDIUM.ordinal()</code> è¿”å› <code>1</code>ã€‚</p></li></ul><hr><h3 id="åå°„"><a class="header-anchor" href="#åå°„">#</a>åå°„</h3><ul><li><p><code>åå°„(reflective)</code>ï¼šèƒ½å¤Ÿåˆ†æç±»èƒ½åŠ›çš„ç¨‹åºã€‚<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup></p></li><li><p>åå°„æœºåˆ¶å¯ä»¥ç”¨æ¥ï¼š</p><ul><li>åœ¨è¿è¡Œæ—¶åˆ†æç±»çš„èƒ½åŠ›ã€‚</li><li>åœ¨è¿è¡Œæ—¶æŸ¥çœ‹å¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œç¼–å†™ä¸€ä¸ª toString æ–¹æ³•ä¾›æ‰€æœ‰ç±»ä½¿ç”¨ã€‚</li><li>å®ç°é€šç”¨çš„æ•°ç»„æ“ä½œä»£ç ã€‚</li><li>åˆ©ç”¨ Method å¯¹è±¡ã€‚</li></ul></li><li><p>åœ¨ç¨‹åºè¿è¡ŒæœŸé—´ï¼ŒJava è¿è¡Œæ—¶ç³»ç»Ÿå§‹ç»ˆä¸ºæ‰€æœ‰çš„å¯¹è±¡ç»´æŠ¤ä¸€ä¸ªè¢«ç§°ä¸ºè¿è¡Œæ—¶çš„ç±»å‹æ ‡è¯†ã€‚ è¿™ä¸ªä¿¡æ¯è·Ÿè¸ªç€æ¯ä¸ªå¯¹è±¡æ‰€å±çš„ç±»ã€‚è™šæ‹Ÿæœºåˆ©ç”¨è¿è¡Œæ—¶ç±»å‹ä¿¡æ¯é€‰æ‹©ç›¸åº”çš„æ–¹æ³•æ‰§è¡Œã€‚</p></li><li><p>Object ç±»ä¸­çš„ <code>getClass()</code> æ–¹æ³•å°†ä¼šè¿”å›ä¸€ä¸ª <code>Class</code> ç±»å‹çš„å®ä¾‹ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Employee e;</span><br><span class="line">...</span><br><span class="line">Class cl = e.getClass();</span><br></pre></td></tr></table></figure></li><li><p>ä¸€ä¸ª Class å¯¹è±¡å°†è¡¨ç¤ºä¸€ä¸ªç‰¹å®šç±»çš„å±æ€§ã€‚æœ€å¸¸ç”¨çš„ Class æ–¹æ³•æ˜¯<code>getName</code>ã€‚è¿™ä¸ªæ–¹æ³•å°†è¿”å›ç±»çš„åå­—ã€‚</p></li><li><p>å¯ä»¥è°ƒç”¨é™æ€æ–¹æ³• <code>forName</code> è·å¾—ç±»åå¯¹åº”çš„ <code>Class</code> å¯¹è±¡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">String className = <span class="string">"java.util.Random"</span>;</span><br><span class="line">Class cl = Class.forName(className);</span><br><span class="line"><span class="comment">// å¦‚æœç±»åä¿å­˜åœ¨å­—ç¬¦ä¸²ä¸­ï¼Œå¹¶å¯åœ¨è¿è¡Œä¸­æ”¹å˜ï¼Œ</span></span><br><span class="line"><span class="comment">// å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ã€‚</span></span><br></pre></td></tr></table></figure></li><li><p>å¦‚æœ <code>T</code> æ˜¯ä»»æ„çš„ Java ç±»å‹ï¼ˆæˆ– void å…³é”®å­—ï¼‰ï¼Œ<code>T.class</code> å°†ä»£è¡¨åŒ¹é…çš„ç±»å¯¹è±¡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Class cl1 = Random<span class="class">.<span class="keyword">class</span></span>; <span class="comment">// if you import java.util.*;</span></span><br><span class="line">Class cl2 = <span class="keyword">int</span><span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line">Class cl3 = Double[]<span class="class">.<span class="keyword">class</span></span>;</span><br></pre></td></tr></table></figure></li><li><p>ä¸€ä¸ª Class å¯¹è±¡å®é™…ä¸Šè¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªç±»å‹ï¼Œè€Œè¿™ä¸ªç±»å‹æœªå¿…ä¸€å®šæ˜¯ä¸€ç§ç±»ã€‚ä¾‹å¦‚ï¼Œ<code>int</code>ä¸æ˜¯ç±»ï¼Œä½† <code>int.class</code> æ˜¯ä¸€ä¸ª Class ç±»å‹çš„å¯¹è±¡ã€‚</p></li><li><p>è™šæ‹Ÿæœºä¸ºæ¯ä¸ªç±»å‹ç®¡ç†ä¸€ä¸ª Class å¯¹è±¡ã€‚å› æ­¤ï¼Œå¯ä»¥åˆ©ç”¨ <code>==</code> è¿ç®—ç¬¦å®ç°ä¸¤ä¸ªç±»å¯¹è±¡æ¯”è¾ƒçš„æ“ä½œã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (e.getClass() == Employee<span class="class">.<span class="keyword">class</span>) ...</span></span><br></pre></td></tr></table></figure></li><li><p><code>newInstance()</code>å¯ä»¥ç”¨æ¥åŠ¨æ€åœ°åˆ›å»ºä¸€ä¸ªç±»çš„å®ä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">e.getClass().newInstance();</span><br></pre></td></tr></table></figure></li><li><p><code>newInstance</code> æ–¹æ³•è°ƒç”¨é»˜è®¤çš„æ„é€ å™¨ï¼ˆæ²¡æœ‰å‚æ•°çš„æ„é€ å™¨ï¼‰åˆå§‹åŒ–æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚å¦‚æœè¿™ä¸ªç±»æ²¡æœ‰é»˜è®¤çš„æ„é€ å™¨ï¼Œå°±ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚</p></li><li><p>åœ¨<code>java.lang.reflect</code>åŒ…ä¸­æœ‰ä¸‰ä¸ªç±»<code>Field</code>ã€<code>Method</code>å’Œ<code>Constructor</code>åˆ†åˆ«ç”¨äºæè¿°ç±»çš„<code>åŸŸ</code>ã€<code>æ–¹æ³•</code>å’Œ<code>æ„é€ å™¨</code>ã€‚</p></li><li><p>å…±æœ‰æ–¹æ³•ï¼š</p><ul><li><code>getName</code>æ–¹æ³•ï¼Œç”¨æ¥è¿”å›é¡¹ç›®çš„åç§°ã€‚</li><li><code>getModifiers</code>æ–¹æ³•ï¼Œè¿”å›ä¸€ä¸ªæ•´å‹æ•°å€¼ï¼Œç”¨ä¸åŒçš„ä½å¼€å…³æè¿°<code>public</code>å’Œ<code>static</code>è¿™æ ·çš„ä¿®é¥°ç¬¦ä½¿ç”¨çŠ¶å†µã€‚</li></ul></li><li><p><code>Field</code>ç±»æœ‰ä¸€ä¸ª<code>getType</code>æ–¹æ³•ï¼Œç”¨æ¥è¿”å›æè¿°åŸŸæ‰€å±ç±»å‹çš„ Class å¯¹è±¡ã€‚</p></li><li><p>Class ç±»ä¸­çš„<code>getFields</code>ã€<code>getMethods</code>å’Œ<code>getConstructors</code>æ–¹æ³•å°†åˆ†åˆ«è¿”å›ç±»æä¾›çš„ public åŸŸã€æ–¹æ³•å’Œæ„é€ å™¨æ•°ç»„ï¼Œå…¶ä¸­åŒ…æ‹¬è¶…ç±»çš„å…¬æœ‰æˆå‘˜ã€‚</p></li><li><p>Class ç±»çš„<code>getDeclareFields</code>ã€<code>getDeclareMethods</code>å’Œ<code>getDeclaredConstructors</code>æ–¹æ³•å°†åˆ†åˆ«è¿”å›ç±»ä¸­å£°æ˜çš„å…¨éƒ¨åŸŸã€æ–¹æ³•å’Œæ„é€ å™¨ï¼Œå…¶ä¸­åŒ…æ‹¬ç§æœ‰å’Œå—ä¿æŠ¤æˆå‘˜ï¼Œä½†ä¸åŒ…æ‹¬è¶…ç±»çš„æˆå‘˜ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> reflection;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* This program uses reflection to print all features of a class.</span></span><br><span class="line"><span class="comment">* <span class="doctag">@version</span> 1.1 2004-02-21</span></span><br><span class="line"><span class="comment">* <span class="doctag">@author</span> Cay Horstmann</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReflectionTest</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">      <span class="comment">// read class name from command line args or user input</span></span><br><span class="line">      String name;</span><br><span class="line">      <span class="keyword">if</span> (args.length &gt; <span class="number">0</span>) name = args[<span class="number">0</span>];</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">      &#123;</span><br><span class="line">        Scanner in = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        System.out.println(<span class="string">"Enter class name (e.g. java.util.Date): "</span>);</span><br><span class="line">        name = in.next();</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">try</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// print class name and superclass name (if != Object)</span></span><br><span class="line">        Class cl = Class.forName(name);</span><br><span class="line">        Class supercl = cl.getSuperclass();</span><br><span class="line">        String modifiers = Modifier.toString(cl.getModifiers());</span><br><span class="line">        <span class="keyword">if</span> (modifiers.length() &gt; <span class="number">0</span>) System.out.print(modifiers + <span class="string">" "</span>);</span><br><span class="line">        System.out.print(<span class="string">"class "</span> + name);</span><br><span class="line">        if (supercl != null &amp;&amp; supercl != Object.class) System.out.print(" extends "</span><br><span class="line">              + supercl.getName());</span><br><span class="line"></span><br><span class="line">        System.out.print(<span class="string">"\n&#123;\n"</span>);</span><br><span class="line">        printConstructors(cl);</span><br><span class="line">        System.out.println();</span><br><span class="line">        printMethods(cl);</span><br><span class="line">        System.out.println();</span><br><span class="line">        printFields(cl);</span><br><span class="line">        System.out.println(<span class="string">"&#125;"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">catch</span> (ClassNotFoundException e)</span><br><span class="line">      &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line">      System.exit(<span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * Prints all constructors of a class</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> cl a class</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printConstructors</span><span class="params">(Class cl)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">      Constructor[] constructors = cl.getDeclaredConstructors();</span><br><span class="line"></span><br><span class="line">      <span class="keyword">for</span> (Constructor c : constructors)</span><br><span class="line">      &#123;</span><br><span class="line">        String name = c.getName();</span><br><span class="line">        System.out.print(<span class="string">"   "</span>);</span><br><span class="line">        String modifiers = Modifier.toString(c.getModifiers());</span><br><span class="line">        <span class="keyword">if</span> (modifiers.length() &gt; <span class="number">0</span>) System.out.print(modifiers + <span class="string">" "</span>);</span><br><span class="line">        System.out.print(name + <span class="string">"("</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// print parameter types</span></span><br><span class="line">        Class[] paramTypes = c.getParameterTypes();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; paramTypes.length; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (j &gt; <span class="number">0</span>) System.out.print(<span class="string">", "</span>);</span><br><span class="line">            System.out.print(paramTypes[j].getName());</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">");"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * Prints all methods of a class</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> cl a class</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printMethods</span><span class="params">(Class cl)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">      Method[] methods = cl.getDeclaredMethods();</span><br><span class="line"></span><br><span class="line">      <span class="keyword">for</span> (Method m : methods)</span><br><span class="line">      &#123;</span><br><span class="line">        Class retType = m.getReturnType();</span><br><span class="line">        String name = m.getName();</span><br><span class="line"></span><br><span class="line">        System.out.print(<span class="string">"   "</span>);</span><br><span class="line">        <span class="comment">// print modifiers, return type and method name</span></span><br><span class="line">        String modifiers = Modifier.toString(m.getModifiers());</span><br><span class="line">        <span class="keyword">if</span> (modifiers.length() &gt; <span class="number">0</span>) System.out.print(modifiers + <span class="string">" "</span>);</span><br><span class="line">        System.out.print(retType.getName() + <span class="string">" "</span> + name + <span class="string">"("</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// print parameter types</span></span><br><span class="line">        Class[] paramTypes = m.getParameterTypes();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; paramTypes.length; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (j &gt; <span class="number">0</span>) System.out.print(<span class="string">", "</span>);</span><br><span class="line">            System.out.print(paramTypes[j].getName());</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">");"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * Prints all fields of a class</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> cl a class</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printFields</span><span class="params">(Class cl)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">      Field[] fields = cl.getDeclaredFields();</span><br><span class="line"></span><br><span class="line">      <span class="keyword">for</span> (Field f : fields)</span><br><span class="line">      &#123;</span><br><span class="line">        Class type = f.getType();</span><br><span class="line">        String name = f.getName();</span><br><span class="line">        System.out.print(<span class="string">"   "</span>);</span><br><span class="line">        String modifiers = Modifier.toString(f.getModifiers());</span><br><span class="line">        <span class="keyword">if</span> (modifiers.length() &gt; <span class="number">0</span>) System.out.print(modifiers + <span class="string">" "</span>);</span><br><span class="line">        System.out.println(type.getName() + <span class="string">" "</span> + name + <span class="string">";"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">$ java reflection.ReflectionTest</span><br><span class="line">Enter class name (e.g. java.util.Date):</span><br><span class="line">java.util.List</span><br><span class="line">public abstract interface class java.util.List</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">  public abstract void add(int, java.lang.Object);</span><br><span class="line">  public abstract boolean add(java.lang.Object);</span><br><span class="line">  public abstract boolean remove(java.lang.Object);</span><br><span class="line">  public abstract java.lang.Object remove(int);</span><br><span class="line">  public abstract java.lang.Object get(int);</span><br><span class="line">  public abstract boolean equals(java.lang.Object);</span><br><span class="line">  public abstract int hashCode();</span><br><span class="line">  public static java.util.List copyOf(java.util.Collection);</span><br><span class="line">  public abstract int indexOf(java.lang.Object);</span><br><span class="line">  public abstract void clear();</span><br><span class="line">  public abstract int lastIndexOf(java.lang.Object);</span><br><span class="line">  public abstract boolean isEmpty();</span><br><span class="line">  public void replaceAll(java.util.function.UnaryOperator);</span><br><span class="line">  public abstract int size();</span><br><span class="line">  public abstract java.util.List subList(int, int);</span><br><span class="line">  public abstract [Ljava.lang.Object; toArray([Ljava.lang.Object;);</span><br><span class="line">  public abstract [Ljava.lang.Object; toArray();</span><br><span class="line">  public abstract java.util.Iterator iterator();</span><br><span class="line">  public static java.util.List of(java.lang.Object, java.lang.Object);</span><br><span class="line">  public static java.util.List of(java.lang.Object);</span><br><span class="line">  public static java.util.List of();</span><br><span class="line">  public static java.util.List of(java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object);</span><br><span class="line">  public static java.util.List of(java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object);</span><br><span class="line">  public static java.util.List of(java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object);</span><br><span class="line">  public static java.util.List of(java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object);</span><br><span class="line">  public static java.util.List of(java.lang.Object, java.lang.Object, java.lang.Object);</span><br><span class="line">  public static java.util.List of(java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object);</span><br><span class="line">  public static java.util.List of(java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object);</span><br><span class="line">  public static transient java.util.List of([Ljava.lang.Object;);</span><br><span class="line">  public static java.util.List of(java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object);</span><br><span class="line">  public abstract boolean contains(java.lang.Object);</span><br><span class="line">  public java.util.Spliterator spliterator();</span><br><span class="line">  public abstract boolean addAll(int, java.util.Collection);</span><br><span class="line">  public abstract boolean addAll(java.util.Collection);</span><br><span class="line">  public abstract java.lang.Object <span class="built_in">set</span>(int, java.lang.Object);</span><br><span class="line">  public abstract boolean containsAll(java.util.Collection);</span><br><span class="line">  public abstract boolean retainAll(java.util.Collection);</span><br><span class="line">  public abstract boolean removeAll(java.util.Collection);</span><br><span class="line">  public void sort(java.util.Comparator);</span><br><span class="line">  public abstract java.util.ListIterator listIterator();</span><br><span class="line">  public abstract java.util.ListIterator listIterator(int);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åå°„æœºåˆ¶çš„é»˜è®¤è¡Œä¸ºå—é™äº Java çš„è®¿é—®æ§åˆ¶ã€‚</p></li><li><p>å°†ä¸€ä¸ª<code>Employee[]</code>ä¸´æ—¶åœ°è½¬æ¢æˆ<code>Object[]</code>æ•°ç»„ï¼Œç„¶åå†æŠŠå®ƒè½¬æ¢å›æ¥æ˜¯å¯ä»¥çš„ï¼Œä½†ä¸€ä»å¼€å§‹å°±æ˜¯<code>Object[]</code>çš„æ•°ç»„å´æ°¸è¿œä¸èƒ½è½¬æ¢æˆ<code>Employe[]</code>æ•°ç»„ã€‚</p></li><li><p>Array ç±»ä¸­çš„é™æ€æ–¹æ³•<code>newInstance</code>ï¼Œå®ƒèƒ½å¤Ÿæ„é€ æ–°æ•°ç»„ã€‚åœ¨è°ƒç”¨å®ƒæ—¶å¿…é¡»æä¾›ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯æ•°ç»„çš„å…ƒç´ ç±»å‹ï¼Œä¸€ä¸ªæ˜¯æ•°ç»„çš„é•¿åº¦ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Object newArray = Array.newInstance(componentType, newLength);</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* This method grows an array by allocating a new array of the same type and</span></span><br><span class="line"><span class="comment">* copying all elements.</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> a the array to grow. This can be an object array or a primitive</span></span><br><span class="line"><span class="comment">* type array</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span> a larger array that contains all elements of a.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title">goodCopyOf</span><span class="params">(Object a, <span class="keyword">int</span> newLength)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  Class cl = a.getClass();</span><br><span class="line">  <span class="keyword">if</span> (!cl.isArray()) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">  Class componentType = cl.getComponentType();</span><br><span class="line">  <span class="keyword">int</span> length = Array.getLength(a);</span><br><span class="line">  Object newArray = Array.newInstance(componentType, newLength);</span><br><span class="line">  System.arraycopy(a, <span class="number">0</span>, newArray, <span class="number">0</span>, Math.min(length, newLength));</span><br><span class="line">  <span class="keyword">return</span> newArray;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åœ¨ Method ç±»ä¸­æœ‰ä¸€ä¸ª<code>invoke</code>æ–¹æ³•ï¼Œå®ƒå…è®¸è°ƒç”¨åŒ…è£…åœ¨å½“å‰ Method å¯¹è±¡ä¸­çš„æ–¹æ³•ã€‚</p></li><li><p><code>invoke</code>æ–¹æ³•çš„ç­¾åæ˜¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Object <span class="title">invoke</span><span class="params">(Object obj, Object... args)</span></span></span><br></pre></td></tr></table></figure></li><li><p>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯éšå¼å‚æ•°ï¼Œå…¶ä½™çš„å¯¹è±¡æä¾›äº†æ˜¾å¼å‚æ•°ã€‚å¯¹äºé™æ€æ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥è¢«å¿½ç•¥ï¼Œå³å¯ä»¥å°†å®ƒè®¾ç½®ä¸º<code>null</code>ã€‚</p></li><li><p><code>invoke</code>çš„å‚æ•°å’Œè¿”å›å€¼å¿…é¡»æ˜¯<code>Object</code>ç±»å‹çš„ã€‚</p></li></ul><hr><ul><li>ç»§æ‰¿çš„è®¾è®¡æŠ€å·§<ol><li>å°†å…¬å…±æ“ä½œå’ŒåŸŸæ”¾åœ¨è¶…ç±»</li><li>ä¸è¦ä½¿ç”¨å—ä¿æŠ¤çš„åŸŸ</li><li>ä½¿ç”¨ç»§æ‰¿å®ç° <code>is-a</code> å…³ç³»</li><li>é™¤éæ‰€æœ‰ç»§æ‰¿çš„æ–¹æ³•éƒ½æœ‰æ„ä¹‰ï¼Œå¦åˆ™ä¸è¦ä½¿ç”¨ç»§æ‰¿</li><li>åœ¨è¦†ç›–æ–¹æ³•æ—¶ï¼Œä¸è¦æ”¹å˜é¢„æœŸçš„è¡Œä¸º</li><li>ä½¿ç”¨å¤šæ€ï¼Œè€Œéç±»å‹ä¿¡æ¯</li><li>ä¸è¦è¿‡å¤šåœ°ä½¿ç”¨åå°„</li></ol></li></ul><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>20200815 æ›´æ–°ï¼Œçœ‹<a href="https://www.bilibili.com/video/BV12J41137hu?p=74" target="_blank" rel="noopener">ã€ç‹‚ç¥è¯´ Javaã€‘Java é›¶åŸºç¡€å­¦ä¹ è§†é¢‘é€šä¿—æ˜“æ‡‚</a>å†å›æ¥çœ‹çœ‹ã€‚ <a href="#fnref1" class="footnote-backref">â†©ï¸</a> <a href="#fnref1:1" class="footnote-backref">â†©ï¸</a> <a href="#fnref1:2" class="footnote-backref">â†©ï¸</a> <a href="#fnref1:3" class="footnote-backref">â†©ï¸</a> <a href="#fnref1:4" class="footnote-backref">â†©ï¸</a> <a href="#fnref1:5" class="footnote-backref">â†©ï¸</a> <a href="#fnref1:6" class="footnote-backref">â†©ï¸</a> <a href="#fnref1:7" class="footnote-backref">â†©ï¸</a></p></li><li id="fn2" class="footnote-item"><p>å…¶å®æ²¡å¤ªæ‡‚ã€‚ <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p></li><li id="fn3" class="footnote-item"><p>å›æ¥å­¦åå°„ <a href="#fnref3" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ–‡æ¡£åŒæ­¥</title>
      <link href="/blog/2020/02/13/online-doc/"/>
      <url>/blog/2020/02/13/online-doc/</url>
      
        <content type="html"><![CDATA[<p>ç»å¸¸ä¼šæœ‰è¿™æ ·ä¸€ç§éœ€æ±‚ï¼šæˆ‘éœ€è¦æŠŠä¸€æ®µæ–‡å­—ä»ä¸€ä¸ªè®¾å¤‡å‘é€åˆ°å¦ä¸€ä¸ªè®¾å¤‡ï¼Œè™½ç„¶ç¡®å®ä¼šæœ‰å¾ˆå¤šè§£å†³åŠæ³•ï¼Œæ¯”å¦‚ç™»é™†QQã€å¾®ä¿¡ï¼Œç„¶åä¼ è¿‡å»ï¼Œä½†æ˜¯è¿™äº›éƒ½<code>éœ€è¦ç¹ççš„ç™»é™†æ­¥éª¤</code>ï¼Œå¹¶ä¸”æœ‰äº›æ—¶å€™ä½ éœ€è¦å‘é€çš„è®¾å¤‡æ˜¯ä¸€å°<code>ä¸å¯ä¿¡çš„</code>ã€<code>ä½ ä¸æ„¿æ„åœ¨ä¸Šé¢æš´éœ²è‡ªå·±è´¦å·å¯†ç </code>çš„è®¾å¤‡ï¼Œæ‰€ä»¥æƒ³å¼„ä¸€ä¸ªæ— éœ€ç™»é™†çš„å°Demoï¼ŒèŠ±äº†å››ä¸ªå°æ—¶ï¼Œæ•ˆæœè¿˜ä¸é”™ã€‚</p><a id="more"></a><h2 id="å‡†å¤‡å·¥ä½œ"><a class="header-anchor" href="#å‡†å¤‡å·¥ä½œ">#</a>å‡†å¤‡å·¥ä½œ</h2><h3 id="ç¼–è¾‘å™¨"><a class="header-anchor" href="#ç¼–è¾‘å™¨">#</a>ç¼–è¾‘å™¨</h3><p>ç½‘é¡µè®¿é—®åº”è¯¥æ˜¯æœ€æ–¹ä¾¿å¿«æ·çš„æ–¹å¼äº†ï¼Œæ‰€ä»¥è¿™ä¸ªå°demoå°±ä¾æ‰˜ <code>web</code>ã€‚è§£å†³äº†æ¡†æ¶çš„é—®é¢˜ï¼Œä¸‹ä¸€ä¸ªéœ€è¦è€ƒè™‘çš„é—®é¢˜æ˜¯é€‰æ‹©ä»€ä¹ˆæ ·çš„å‰ç«¯ç¼–è¾‘å™¨ã€‚</p><p>æœ€åˆçš„è®¾æƒ³æ˜¯é‡‡ç”¨ä¸€äº›å¼€æºçš„ <code>markdown</code> ç¼–è¾‘å™¨ï¼Œæ¯•ç«Ÿ <code>markdown</code> æ˜¯æˆ‘æœ€ç»å¸¸ç¼–å†™çš„æ–‡æœ¬æ ·å¼äº†ï¼Œä¹Ÿç¡®å®æœ‰ä¸€äº›å¾ˆå¥½çœ‹çš„ç¼–è¾‘å™¨ï¼š</p><ul><li><a href="https://github.com/lepture/editor" target="_blank" rel="noopener">https://github.com/lepture/editor</a></li><li><a href="https://github.com/sparksuite/simplemde-markdown-editor" target="_blank" rel="noopener">https://github.com/sparksuite/simplemde-markdown-editor</a></li></ul><p>ä½†è¿™èƒŒç¦»äº†æˆ‘çš„åˆè¡·ï¼Œæˆ‘è¦åšçš„ä¸æ˜¯ä¸€ä¸ªåœ¨çº¿çš„ç¼–è¾‘å™¨ï¼Œè€Œä»…ä»…æ˜¯ä¸€ä¸ªå¯ä»¥å­˜æ”¾æ–‡æœ¬çš„ç¼–è¾‘å™¨ï¼Œmarkdownçš„è§£æå’Œé¢„è§ˆéœ€è¦å¾ˆå¤§çš„å·¥ä½œé‡ï¼Œä¸”æ ·å¼ä¸ä¸€å®šæ˜¯æˆ‘å–œæ¬¢çš„ã€‚</p><p>æœ€ç»ˆæˆ‘é€‰æ‹©ä¸€æ¬¾<a href="http://www.htmleaf.com/css3/ui-design/201609023948.html" target="_blank" rel="noopener">çº¯CSS3åˆ¶ä½œå¯ç¼–è¾‘çš„å¾®è½¯Wordæ ·å¼æ–‡æ¡£</a>ï¼Œä»–çš„<a href="https://github.com/delight-im/HTML-Sheets-of-Paper" target="_blank" rel="noopener">githubåœ°å€</a>ã€‚</p><h3 id="æ•°æ®å­˜å‚¨"><a class="header-anchor" href="#æ•°æ®å­˜å‚¨">#</a>æ•°æ®å­˜å‚¨</h3><p>æˆ‘çš„ç½‘ç«™æŒ‚åœ¨GitHubä¸Šï¼Œåªæœ‰å‰ç«¯æ²¡æœ‰æœåŠ¡å™¨ï¼Œå¦‚æœä»…ä»…åªæ˜¯ä¸ºäº†ä¸€ä¸ªå°demoå°±è¿ç§»åˆ°æœåŠ¡å™¨ä¸Šï¼Œæœªå…æœ‰äº›å°é¢˜å¤§åšã€‚<br>æˆ‘çš„åšå®¢ä¸Šå…¶å®å°±æœ‰åŸºäºåç«¯çš„å†…å®¹ï¼Œç”¨çš„æ˜¯<a href="https://leancloud.cn/" target="_blank" rel="noopener">leancloud</a>çš„æœåŠ¡ï¼Œå…è´¹ç‰ˆçš„apié™åˆ¶æ˜¯ <code>3ä¸‡æ¬¡/å¤©</code>ï¼Œå¯¹äºä¸ªäººæ—¥å¸¸ä½¿ç”¨å®Œå…¨è¶³å¤Ÿã€‚æ•…æœ¬demoçš„æ•°æ®å­˜å‚¨ä¸åŒæ­¥ä¹ŸåŒæ ·ä½¿ç”¨ <code>leancloud</code>ï¼Œç›¸å…³çš„æ–‡æ¡£è§<a href="https://leancloud.cn/docs/leanstorage_guide-js.html" target="_blank" rel="noopener">æ•°æ®å­˜å‚¨å¼€å‘æŒ‡å— Â· JavaScript</a>ã€‚</p><h2 id="å…·ä½“å®ç°"><a class="header-anchor" href="#å…·ä½“å®ç°">#</a>å…·ä½“å®ç°</h2><p>è¿™é‡Œåªè€ƒè™‘jsé€»è¾‘ï¼Œå…¶å®ƒè¯¦è§ä»£ç ã€‚</p><h3 id="è·å–å½“å‰urlå‚æ•°"><a class="header-anchor" href="#è·å–å½“å‰urlå‚æ•°">#</a>è·å–å½“å‰urlå‚æ•°</h3><p>åœ¨çº¿æ–‡æ¡£å½“ç„¶ä¸èƒ½åªæœ‰ä¸€ä¸ªå¯ç¼–è¾‘çš„é¡µé¢ï¼Œæ‰€ä»¥æˆ‘çš„è®¾æƒ³æ˜¯è·å– <code>url</code> ä¸Šçš„é¢å¤–å‚æ•°ï¼Œä»¥æ­¤ä½œä¸ºæ–‡æ¡£çš„<strong>å”¯ä¸€ID</strong>ï¼Œè¿™æ ·å°±å¯ä»¥æœ‰æ— æ•°ä¸ªæ–‡æ¡£å¯ä»¥å­˜æ”¾å†…å®¹ï¼Œæ¯”å¦‚ <code>/doc/?1</code> å’Œ <code>/doc/?12</code> å°±æ˜¯ä¸¤ä¸ªä¸åŒçš„æ–‡æ¡£ã€‚<br>è€Œæœ¬èº«çš„åŸŸåå¯èƒ½å‘ç”Ÿæ”¹å˜ï¼Œä¸ºäº†æ–¹ä¾¿æ‹“å±•ï¼Œ <code>url</code> å‚æ•°åº”è¯¥æ˜¯å»æ‰<code>åè®®ï¼ˆhttps://ï¼‰</code>ã€<code>åŸŸåï¼ˆxxxxx.comï¼‰</code>å’Œ<code>ç«¯å£å·ï¼ˆ80ï¼‰</code>åçš„ç»“æœã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–å½“å‰url</span></span><br><span class="line"><span class="keyword">var</span> url = <span class="built_in">window</span>.location.href.slice(<span class="built_in">window</span>.location.href.indexOf(<span class="string">'/doc/'</span>));</span><br></pre></td></tr></table></figure><h3 id="æ‹‰å–è¿œç«¯æ•°æ®"><a class="header-anchor" href="#æ‹‰å–è¿œç«¯æ•°æ®">#</a>æ‹‰å–è¿œç«¯æ•°æ®</h3><p>é¡µé¢ç¬¬ä¸€æ¬¡åŠ è½½æ—¶åº”è¯¥æ‹‰å–è¿œç«¯çš„æ•°æ®ï¼Œæ¥æ¢å¤æ–‡æ¡£å†…å®¹ï¼ˆå¦‚æœè¿œç«¯å­˜åœ¨å¤‡ä»½å†…å®¹ï¼‰ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">AV.init(&#123;</span><br><span class="line">  appId: <span class="string">"jIRe5LRqbWDB2dxmu7FH8c1S-gzGzoHsz"</span>,</span><br><span class="line">  appKey: <span class="string">"xxxxxxxxxxxxxxxxx"</span>,</span><br><span class="line">  serverURLs: <span class="string">"https://jire5lrq.lc-cn-n1-shared.com"</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> query = <span class="keyword">new</span> AV.Query(<span class="string">'DocSync'</span>);</span><br><span class="line">query.equalTo(<span class="string">'url'</span>, url);</span><br><span class="line">query.find().then(<span class="function"><span class="keyword">function</span> (<span class="params">docsync</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// æ‹‰å–è¿œç«¯ç»“æœ</span></span><br><span class="line">  <span class="keyword">if</span> (docsync.length == <span class="number">1</span>) &#123;</span><br><span class="line">    docEle.innerHTML = docsync[<span class="number">0</span>].attributes.content;</span><br><span class="line">    content = docsync[<span class="number">0</span>].attributes.content;</span><br><span class="line">    objectId = docsync[<span class="number">0</span>].id;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="æ›´æ–°è¿œç«¯æ•°æ®"><a class="header-anchor" href="#æ›´æ–°è¿œç«¯æ•°æ®">#</a>æ›´æ–°è¿œç«¯æ•°æ®</h3><p>æ•°æ®æ›´æ–°çš„ç­–ç•¥æ˜¯ï¼Œåˆ¤æ–­å½“å‰é¡µé¢åœ¨è¿œç«¯æ˜¯å¦æœ‰å­—æ®µä¿ç•™ï¼Œå¦‚æœæœ‰å°±æ›´æ–°å­—æ®µå³å¯ï¼Œå¦åˆ™éœ€è¦æ–°å¢ä¸€æ¡è®°å½•ä¿å­˜å½“å‰ <code>url</code> çš„å†…å®¹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">update</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (objectId == <span class="string">''</span>) &#123;</span><br><span class="line">    <span class="comment">// å£°æ˜ class</span></span><br><span class="line">    <span class="keyword">var</span> DocSync = AV.Object.extend(<span class="string">'DocSync'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ„å»ºå¯¹è±¡</span></span><br><span class="line">    <span class="keyword">var</span> docsync = <span class="keyword">new</span> DocSync();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸ºå±æ€§èµ‹å€¼</span></span><br><span class="line">    docsync.set(<span class="string">'url'</span>, url);</span><br><span class="line">    docsync.set(<span class="string">'content'</span>, docEle.innerHTML);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°†å¯¹è±¡ä¿å­˜åˆ°äº‘ç«¯</span></span><br><span class="line">    docsync.save().then(<span class="function"><span class="keyword">function</span> (<span class="params">docsync</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// æˆåŠŸä¿å­˜ä¹‹åï¼Œæ‰§è¡Œå…¶ä»–é€»è¾‘</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'ä¿å­˜æˆåŠŸã€‚objectIdï¼š'</span> + docsync.id);</span><br><span class="line">      objectId = docsync.id;</span><br><span class="line">    &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// å¼‚å¸¸å¤„ç†</span></span><br><span class="line">      <span class="built_in">console</span>.log(error);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> docsync = AV.Object.createWithoutData(<span class="string">'DocSync'</span>, objectId);</span><br><span class="line">    docsync.set(<span class="string">'content'</span>, docEle.innerHTML);</span><br><span class="line">    docsync.save().then(<span class="function"><span class="keyword">function</span> (<span class="params">docsync</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'æ›´æ–°æˆåŠŸã€‚'</span>);</span><br><span class="line">    &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(error);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  content = docEle.innerHTML;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ›´æ–°ç­–ç•¥"><a class="header-anchor" href="#æ›´æ–°ç­–ç•¥">#</a>æ›´æ–°ç­–ç•¥</h3><p>æˆ‘è®¾ç½®çš„æ›´æ–°çš„ç­–ç•¥æ˜¯ <code>10s</code> è‡ªåŠ¨ä¿å­˜ä¸€æ¬¡ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (docEle.innerHTML != content &amp;&amp; docEle.innerHTML != <span class="string">''</span>) &#123;</span><br><span class="line">    update();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, <span class="number">1000</span> * <span class="number">10</span>);</span><br></pre></td></tr></table></figure><h2 id="demo"><a class="header-anchor" href="#demo">#</a>Demo</h2><p>è¯¦è§<a href="https://onns.xyz/doc/">https://onns.xyz/doc/</a>ã€‚</p><h2 id="todo"><a class="header-anchor" href="#todo">#</a>TODO</h2><ul><li>å› ä¸ºæ˜¯ç”¨ <code>leancloud</code> æœåŠ¡ï¼Œä¸æ¸…æ¥šå•ä¸ªå­—æ®µçš„å¤§å°é™åˆ¶ï¼Œå¯èƒ½å‡ºç°æ— æ³•ä¿å­˜æˆ–æ— æ³•å®Œæ•´ä¿å­˜çš„æƒ…å†µï¼Œéœ€è¦ç¼–è¾‘å™¨åŠ ä»¥é™åˆ¶ã€‚</li><li>ä¸€äº›è¯¸å¦‚ä¿å­˜æ—¶é—´ã€å­—æ•°å¤§å°ç­‰æ§åˆ¶ä¿¡æ¯çš„æ˜¾ç¤ºã€‚</li><li>ç¼–è¾‘å™¨æœ¬èº«æ”¯æŒå¾ˆå¤šåŠŸèƒ½ï¼Œéœ€è¦ç›¸å…³ç»„ä»¶æ¥ä¸°å¯Œã€‚</li><li>ç”±äºæ¥å£è°ƒç”¨é™åˆ¶ï¼Œæ•°æ®çš„è¿œç«¯æ‹‰å–å¹¶æœªå®šæ—¶æ‰§è¡Œè€Œåªä¼šåœ¨ç½‘é¡µåŠ è½½æ—¶æ‰§è¡Œä¸€æ¬¡ï¼Œå¯ä»¥æœ‰æ›´å¤šåˆç†çš„ç­–ç•¥ã€‚</li><li>æ›´æ–°ç­–ç•¥ä¹Ÿå¯ä»¥æ›´æ™ºèƒ½ï¼Œæ¯”å¦‚å¦‚æœæ–°å¢æ–‡å­—æ•°å¤§äº<code>é˜ˆå€¼</code>åˆ™é©¬ä¸Šæ›´æ–°ã€‚</li><li>æ‰‹æœºç«¯UIä¸å‹å¥½ã€‚</li></ul><p>å¦‚æœæœ‰å»ºè®®æ¬¢è¿ç•™è¨€ï½</p>]]></content>
      
      
      <categories>
          
          <category> idea </category>
          
      </categories>
      
      
        <tags>
            
            <tag> sync </tag>
            
            <tag> serverless </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaå­¦ä¹ ç¬”è®°ï¼ˆäºŒï¼‰</title>
      <link href="/blog/2020/02/11/java-notes-2/"/>
      <url>/blog/2020/02/11/java-notes-2/</url>
      
        <content type="html"><![CDATA[<p>Java æ ¸å¿ƒæŠ€æœ¯å·ä¸€åŸºç¡€çŸ¥è¯†ç¬¬ 10 ç‰ˆ</p><h2 id="å¯¹è±¡ä¸ç±»"><a class="header-anchor" href="#å¯¹è±¡ä¸ç±»">#</a>å¯¹è±¡ä¸ç±»</h2><a id="more"></a><p>å°è£…ï¼ˆencapsulationï¼‰æ˜¯ä¸å¯¹è±¡æœ‰å…³çš„ä¸€ä¸ªé‡è¦æ¦‚å¿µã€‚ ä»å½¢å¼ä¸Šçœ‹ï¼Œå°è£…ä¸è¿‡æ˜¯å°†æ•°æ®å’Œè¡Œä¸ºç»„åˆåœ¨ä¸€ä¸ªåŒ…ä¸­ï¼Œå¹¶å¯¹å¯¹è±¡çš„ä½¿ç”¨è€…éšè—äº†æ•°æ®çš„å®ç°æ–¹å¼ã€‚å¯¹è±¡ä¸­çš„æ•°æ®ç§°ä¸ºå®ä¾‹åŸŸï¼ˆinstance fieldï¼‰ï¼Œæ“çºµæ•°æ®çš„è¿‡ç¨‹ç§°ä¸ºæ–¹æ³•ï¼ˆ methodï¼‰ã€‚å¯¹äºæ¯ä¸ªç‰¹å®šçš„ç±»å®ä¾‹ï¼ˆå¯¹è±¡ï¼‰éƒ½æœ‰ä¸€ç»„ç‰¹å®šçš„å®ä¾‹åŸŸå€¼ã€‚</p><p>ç»§æ‰¿ï¼ˆinheritanceï¼‰ï¼šé€šè¿‡æ‰©å±•ä¸€ä¸ªç±»æ¥å»ºç«‹å¦å¤–ä¸€ä¸ªç±»çš„è¿‡ç¨‹ã€‚</p><p>ä¸€ä¸ªå¯¹è±¡å˜é‡å¹¶æ²¡æœ‰å®é™…åŒ…å«ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä»…ä»…å¼•ç”¨ä¸€ä¸ªå¯¹è±¡ã€‚<br>åœ¨ Java ä¸­ï¼Œä»»ä½•å¯¹è±¡å˜é‡çš„å€¼éƒ½æ˜¯å¯¹å­˜å‚¨åœ¨å¦å¤–ä¸€ä¸ªåœ°æ–¹çš„ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ã€‚<br>å±€éƒ¨å˜é‡ä¸ä¼šè‡ªåŠ¨åœ°åˆå§‹åŒ–ä¸º <code>null</code>ï¼Œè€Œå¿…é¡»é€šè¿‡è°ƒç”¨ <code>new</code> æˆ–å°†å®ƒä»¬è®¾ç½®ä¸º <code>null</code> è¿›è¡Œåˆå§‹åŒ–ã€‚</p><ul><li>æ›´æ”¹å™¨æ–¹æ³•ï¼ˆmutator methodï¼‰ï¼šæ”¹å˜å¯¹è±¡çš„çŠ¶æ€ã€‚</li><li>è®¿é—®å™¨æ–¹æ³•ï¼ˆaccessor methodï¼‰ï¼šåªè®¿é—®å¯¹è±¡è€Œä¸ä¿®æ”¹å¯¹è±¡çš„æ–¹æ³•ã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MyCalendar.java</span></span><br><span class="line"><span class="keyword">import</span> java.time.LocalDate;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyCalendar</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        LocalDate nowDate = LocalDate.now();</span><br><span class="line">        <span class="keyword">int</span> day = nowDate.getDayOfMonth();</span><br><span class="line">        System.out.println(<span class="string">"Sun Mon Tue Wed Thu Fri Sat"</span>);</span><br><span class="line">        <span class="keyword">int</span> week = nowDate.getDayOfWeek().getValue();</span><br><span class="line">        <span class="keyword">int</span> n = (<span class="number">7</span> - (day - week) % <span class="number">7</span>) + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">            System.out.print(<span class="string">"    "</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= nowDate.lengthOfMonth(); i++) &#123;</span><br><span class="line">            n++;</span><br><span class="line">            System.out.printf(<span class="string">"%3d"</span>, i);</span><br><span class="line">            <span class="keyword">if</span> (n % <span class="number">7</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                System.out.println();</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (i == day) &#123;</span><br><span class="line">                    System.out.print(<span class="string">"*"</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    System.out.print(<span class="string">" "</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.time.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * This program tests the Employee class.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.12 2015-05-08</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Cay Horstmann</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmployeeTest</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">      <span class="comment">// fill the staff array with three Employee objects</span></span><br><span class="line">      Employee[] staff = <span class="keyword">new</span> Employee[<span class="number">3</span>];</span><br><span class="line"></span><br><span class="line">      staff[<span class="number">0</span>] = <span class="keyword">new</span> Employee(<span class="string">"Carl Cracker"</span>, <span class="number">75000</span>, <span class="number">1987</span>, <span class="number">12</span>, <span class="number">15</span>);</span><br><span class="line">      staff[<span class="number">1</span>] = <span class="keyword">new</span> Employee(<span class="string">"Harry Hacker"</span>, <span class="number">50000</span>, <span class="number">1989</span>, <span class="number">10</span>, <span class="number">1</span>);</span><br><span class="line">      staff[<span class="number">2</span>] = <span class="keyword">new</span> Employee(<span class="string">"Tony Tester"</span>, <span class="number">40000</span>, <span class="number">1990</span>, <span class="number">3</span>, <span class="number">15</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// raise everyone's salary by 5%</span></span><br><span class="line">      <span class="keyword">for</span> (Employee e : staff)</span><br><span class="line">         e.raiseSalary(<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// print out information about all Employee objects</span></span><br><span class="line">      <span class="keyword">for</span> (Employee e : staff)</span><br><span class="line">         System.out.println(<span class="string">"name="</span> + e.getName() + <span class="string">",salary="</span> + e.getSalary() + <span class="string">",hireDay="</span> + e.getHireDay());</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">   <span class="keyword">private</span> String name;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">double</span> salary;</span><br><span class="line">   <span class="keyword">private</span> LocalDate hireDay;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">(String n, <span class="keyword">double</span> s, <span class="keyword">int</span> year, <span class="keyword">int</span> month, <span class="keyword">int</span> day)</span> </span>&#123;</span><br><span class="line">      name = n;</span><br><span class="line">      salary = s;</span><br><span class="line">      hireDay = LocalDate.of(year, month, day);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> name;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getSalary</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> salary;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> LocalDate <span class="title">getHireDay</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> hireDay;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">raiseSalary</span><span class="params">(<span class="keyword">double</span> byPercent)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">double</span> raise = salary * byPercent / <span class="number">100</span>;</span><br><span class="line">      salary += raise;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>åœ¨ä¸€ä¸ªæºæ–‡ä»¶ä¸­ï¼Œåªèƒ½æœ‰ä¸€ä¸ªå…¬æœ‰ç±»ï¼Œä½†å¯ä»¥æœ‰ä»»æ„æ•°ç›®çš„éå…¬æœ‰ç±»ã€‚</li><li>ç±»é€šå¸¸åŒ…æ‹¬ç±»å‹å±äºæŸä¸ªç±»ç±»å‹çš„å®ä¾‹åŸŸã€‚</li><li>æ„é€ å™¨æ€»æ˜¯ä¼´éšç€ <code>new</code> æ“ä½œç¬¦çš„æ‰§è¡Œè¢«è°ƒç”¨ï¼Œè€Œä¸èƒ½å¯¹ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å¯¹è±¡è°ƒç”¨æ„é€ å™¨æ¥è¾¾åˆ°é‡æ–°è®¾ç½®å®ä¾‹åŸŸçš„ç›®çš„ã€‚</li><li>æ„é€ å™¨<ul><li>æ„é€ å™¨ä¸ç±»åŒå</li><li>æ¯ä¸ªç±»å¯ä»¥æœ‰ä¸€ä¸ªä»¥ä¸Šçš„æ„é€ å™¨</li><li>æ„é€ å™¨å¯ä»¥æœ‰ 0 ä¸ªã€1 ä¸ªæˆ–å¤šä¸ªå‚æ•°</li><li>æ„é€ å™¨æ²¡æœ‰è¿”å›å€¼</li><li>æ„é€ å™¨æ€»æ˜¯ä¼´éšç€ new æ“ä½œä¸€èµ·è°ƒç”¨</li></ul></li><li>ä¸è¦åœ¨æ„é€ å™¨ä¸­å®šä¹‰ä¸å®ä¾‹åŸŸé‡åçš„å±€éƒ¨å˜é‡ã€‚</li><li>ä¸€ä¸ªæ–¹æ³•å¯ä»¥è®¿é—®æ‰€å±ç±»çš„æ‰€æœ‰å¯¹è±¡çš„ç§æœ‰æ•°æ®ã€‚</li></ul><p>å¯ä»¥å°†å®ä¾‹åŸŸå®šä¹‰ä¸º <code>final</code>ã€‚æ„å»ºå¯¹è±¡æ—¶å¿…é¡»åˆå§‹åŒ–è¿™æ ·çš„åŸŸã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¿…é¡»ç¡®ä¿åœ¨æ¯ä¸€ä¸ªæ„é€ å™¨æ‰§è¡Œä¹‹åï¼Œè¿™ä¸ªåŸŸçš„å€¼è¢«è®¾ç½®ï¼Œå¹¶ä¸”åœ¨åé¢çš„æ“ä½œä¸­ï¼Œä¸èƒ½å¤Ÿå†å¯¹å®ƒè¿›è¡Œä¿®æ”¹ã€‚</p><p>å¯¹äºå¯å˜çš„ç±»ï¼Œ ä½¿ç”¨ <code>final</code> ä¿®é¥°ç¬¦å¯èƒ½ä¼šå¯¹è¯»è€…é€ æˆæ··ä¹±ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> StringBuilder evaluations;</span><br></pre></td></tr></table></figure><p>åœ¨ Employee æ„é€ å™¨ä¸­ä¼šåˆå§‹åŒ–ä¸º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">evaluations = <span class="keyword">new</span> StringBuilder();</span><br></pre></td></tr></table></figure><p><code>final</code> å…³é”®å­—åªæ˜¯è¡¨ç¤ºå­˜å‚¨åœ¨ <code>evaluations</code> å˜é‡ä¸­çš„å¯¹è±¡å¼•ç”¨ä¸ä¼šå†æŒ‡ç¤ºå…¶ä»– <code>StringBuilder</code> å¯¹è±¡ã€‚ä¸è¿‡è¿™ä¸ªå¯¹è±¡å¯ä»¥æ›´æ”¹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">giveGoldStar</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  evaluations.append(LocalDate.now() + <span class="string">": Gold star!\n"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><ul><li>å¦‚æœå°†åŸŸå®šä¹‰ä¸º <code>static</code>ï¼Œæ¯ä¸ªç±»ä¸­åªæœ‰ä¸€ä¸ªè¿™æ ·çš„åŸŸã€‚</li><li>æ¯ä¸€ä¸ªå¯¹è±¡å¯¹äºæ‰€æœ‰çš„å®ä¾‹åŸŸå´éƒ½æœ‰è‡ªå·±çš„ä¸€ä»½æ‹·è´ã€‚</li><li>é™æ€æ–¹æ³•æ˜¯ä¸€ç§ä¸èƒ½å‘å¯¹è±¡å®æ–½æ“ä½œçš„æ–¹æ³•ã€‚<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></li><li>é™æ€æ–¹æ³•å¯ä»¥è®¿é—®è‡ªèº«ç±»ä¸­çš„é™æ€åŸŸã€‚</li><li>ä½¿ç”¨é™æ€æ–¹æ³•çš„æƒ…å†µï¼š<ol><li>æ–¹æ³•ä¸éœ€è¦è®¿é—®å¯¹è±¡çŠ¶æ€ï¼Œå…¶æ‰€éœ€å‚æ•°éƒ½æ˜¯é€šè¿‡æ˜¾å¼å‚æ•°æä¾›ã€‚</li><li>ä¸€ä¸ªæ–¹æ³•åªéœ€è¦è®¿é—®ç±»çš„é™æ€åŸŸã€‚</li></ol></li></ul><hr><ul><li>Java ç¨‹åºè®¾è®¡è¯­è¨€æ€»æ˜¯é‡‡ç”¨ <code>æŒ‰å€¼è°ƒç”¨</code>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ æ–¹æ³•å¾—åˆ°çš„æ˜¯æ‰€æœ‰å‚æ•°å€¼çš„ä¸€ä¸ª<code>æ‹·è´</code>ï¼Œæ–¹æ³•ä¸èƒ½ä¿®æ”¹ä¼ é€’ç»™å®ƒçš„ä»»ä½•å‚æ•°å˜é‡çš„å†…å®¹ã€‚</li><li>Java çš„å¯¹è±¡å¼•ç”¨ä¹Ÿæ˜¯æŒ‰å€¼ä¼ é€’çš„ã€‚</li><li>ä¸€ä¸ªæ–¹æ³•ä¸èƒ½ä¿®æ”¹ä¸€ä¸ªåŸºæœ¬æ•°æ®ç±»å‹çš„å‚æ•°ï¼ˆå³æ•°å€¼å‹æˆ–å¸ƒå°”å‹ï¼‰ã€‚</li><li>ä¸€ä¸ªæ–¹æ³•å¯ä»¥æ”¹å˜ä¸€ä¸ªå¯¹è±¡å‚æ•°çš„çŠ¶æ€ã€‚</li><li>ä¸€ä¸ªæ–¹æ³•ä¸èƒ½è®©å¯¹è±¡å‚æ•°å¼•ç”¨ä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚</li></ul><hr><p><strong>é‡è½½ï¼ˆoverloadingï¼‰</strong>ï¼šå¤šä¸ªæ–¹æ³•æœ‰ç›¸åŒçš„åå­—ã€ä¸åŒçš„å‚æ•°ã€‚<br><strong>é‡è½½è§£æï¼ˆoverloading resolutionï¼‰</strong>ï¼šç¼–è¯‘å™¨å¿…é¡»æŒ‘é€‰å‡ºå…·ä½“æ‰§è¡Œå“ªä¸ªæ–¹æ³•ï¼Œå®ƒé€šè¿‡ç”¨å„ä¸ªæ–¹æ³•ç»™å‡ºçš„å‚æ•°ç±»å‹ä¸ç‰¹å®šæ–¹æ³•è°ƒç”¨æ‰€ä½¿ç”¨çš„å€¼ç±»å‹è¿›è¡ŒåŒ¹é…æ¥æŒ‘é€‰å‡ºç›¸åº”çš„æ–¹æ³•ã€‚å¦‚æœç¼–è¯‘å™¨æ‰¾ä¸åˆ°åŒ¹é…çš„å‚æ•°ï¼Œå°±ä¼šäº§ç”Ÿç¼–è¯‘æ—¶é”™è¯¯ï¼Œå› ä¸ºæ ¹æœ¬ä¸å­˜åœ¨åŒ¹é…ï¼Œæˆ–è€…æ²¡æœ‰ä¸€ä¸ªæ¯”å…¶ä»–çš„æ›´å¥½ã€‚</p><ul><li><p>Java å…è®¸é‡è½½ä»»ä½•æ–¹æ³•ï¼Œè€Œä¸åªæ˜¯æ„é€ å™¨æ–¹æ³•ã€‚</p></li><li><p>å¦‚æœåœ¨ç¼–å†™ä¸€ä¸ªç±»æ—¶æ²¡æœ‰ç¼–å†™æ„é€ å™¨ï¼Œé‚£ä¹ˆç³»ç»Ÿå°±ä¼šæä¾›ä¸€ä¸ªæ— å‚æ•°æ„é€ å™¨ã€‚</p></li><li><p>å¦‚æœç±»ä¸­æä¾›äº†è‡³å°‘ä¸€ä¸ªæ„é€ å™¨ï¼Œä½†æ˜¯æ²¡æœ‰æä¾›æ— å‚æ•°çš„æ„é€ å™¨ï¼Œåˆ™åœ¨æ„é€ å¯¹è±¡æ—¶å¦‚æœæ²¡æœ‰æä¾›å‚æ•°å°±ä¼šè¢«è§†ä¸º<code>ä¸åˆæ³•</code>ã€‚</p></li><li><p>å¯ä»¥åœ¨ç±»å®šä¹‰ä¸­ï¼Œ ç›´æ¥å°†ä¸€ä¸ªå€¼èµ‹ç»™ä»»ä½•åŸŸã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="keyword">private</span> String name = <span class="string">""</span>;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åœ¨æ‰§è¡Œæ„é€ å™¨ä¹‹å‰ï¼Œå…ˆæ‰§è¡Œèµ‹å€¼æ“ä½œã€‚</p></li><li><p>å¦‚æœæ„é€ å™¨çš„ç¬¬ä¸€ä¸ªè¯­å¥å½¢å¦‚ this(â€¦)ï¼Œè¿™ä¸ªæ„é€ å™¨å°†è°ƒç”¨åŒä¸€ä¸ªç±»çš„å¦ä¸€ä¸ªæ„é€ å™¨ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">(<span class="keyword">double</span> s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="comment">// calls the Employee(String, double) constructor</span></span><br><span class="line">  <span class="keyword">this</span>(<span class="string">"Employee #"</span> + nextId, s);</span><br><span class="line">  <span class="comment">// å¯¹å…¬å…±çš„æ„é€ å™¨ä»£ç éƒ¨åˆ†åªç¼–å†™ä¸€æ¬¡å³å¯ã€‚</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åˆå§‹åŒ–æ•°æ®åŸŸçš„æ–¹æ³•ï¼š</p><ol><li>åœ¨æ„é€ å™¨ä¸­è®¾ç½®å€¼</li><li>åœ¨å£°æ˜ä¸­èµ‹å€¼</li><li>åˆå§‹åŒ–å—(initialization block)</li></ol></li><li><p>new æ“ä½œæ—¶ï¼Œé¦–å…ˆè¿è¡Œåˆå§‹åŒ–å—ï¼Œç„¶åæ‰è¿è¡Œæ„é€ å™¨çš„ä¸»ä½“éƒ¨åˆ†ã€‚é€šå¸¸ä¼šç›´æ¥å°†åˆå§‹åŒ–ä»£ç æ”¾åœ¨æ„é€ å™¨ä¸­ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> nextld;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">  <span class="keyword">private</span> String name;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">double</span> salary;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// object initialization block</span></span><br><span class="line">  &#123;</span><br><span class="line">    id = nextld;</span><br><span class="line">    nextld++;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">(String n, <span class="keyword">double</span> s)</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    name = n;</span><br><span class="line">    salary = s;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  </span>&#123;</span><br><span class="line">    name = <span class="string">""</span>;</span><br><span class="line">    salary = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>è°ƒç”¨æ„é€ å™¨çš„å…·ä½“å¤„ç†æ­¥éª¤ï¼š</p><ol><li>æ‰€æœ‰æ•°æ®åŸŸè¢«åˆå§‹åŒ–ä¸ºé»˜è®¤å€¼(0ã€false æˆ– null)ã€‚</li><li>æŒ‰ç…§åœ¨ç±»å£°æ˜ä¸­å‡ºç°çš„æ¬¡åºï¼Œä¾æ¬¡æ‰§è¡Œæ‰€æœ‰åŸŸåˆå§‹åŒ–è¯­å¥å’Œåˆå§‹åŒ–å—ã€‚</li><li>å¦‚æœæ„é€ å™¨ç¬¬ä¸€è¡Œè°ƒç”¨äº†ç¬¬äºŒä¸ªæ„é€ å™¨ï¼Œåˆ™æ‰§è¡Œç¬¬äºŒä¸ªæ„é€ å™¨ä¸»ä½“ã€‚</li><li>æ‰§è¡Œè¿™ä¸ªæ„é€ å™¨çš„ä¸»ä½“ã€‚</li></ol></li><li><p>å¦‚æœå¯¹ç±»çš„é™æ€åŸŸè¿›è¡Œåˆå§‹åŒ–çš„ä»£ç æ¯”è¾ƒå¤æ‚ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨é™æ€çš„åˆå§‹åŒ–å—ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// static initialization block</span></span><br><span class="line"><span class="keyword">static</span></span><br><span class="line">&#123;</span><br><span class="line">  Random generator = <span class="keyword">new</span> Random();</span><br><span class="line">  <span class="comment">// set nextId to a random number between 0 and 9999</span></span><br><span class="line">  nextId = generator.nextInt(<span class="number">10000</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç”±äº Java æœ‰è‡ªåŠ¨çš„åƒåœ¾å›æ”¶å™¨ï¼Œä¸éœ€è¦äººå·¥å›æ”¶å†…å­˜ï¼Œ æ‰€ä»¥ Java ä¸æ”¯æŒææ„å™¨ã€‚</p></li><li><p>å¯ä»¥ä¸ºä»»ä½•ä¸€ä¸ªç±»æ·»åŠ <code>finalize</code>æ–¹æ³•ã€‚<code>finalize</code>æ–¹æ³•å°†åœ¨åƒåœ¾å›æ”¶å™¨æ¸…é™¤å¯¹è±¡ä¹‹å‰è°ƒç”¨ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œä¸è¦ä¾èµ–äºä½¿ç”¨<code>finalize</code>æ–¹æ³•å›æ”¶ä»»ä½•çŸ­ç¼ºçš„èµ„æºï¼Œè¿™æ˜¯å› ä¸ºå¾ˆéš¾çŸ¥é“è¿™ä¸ªæ–¹æ³•ä»€ä¹ˆæ—¶å€™æ‰èƒ½å¤Ÿè°ƒç”¨ã€‚</p></li></ul><hr><ul><li><p><code>import</code>è¯­å¥åº”è¯¥ä½äºæºæ–‡ä»¶çš„é¡¶éƒ¨ï¼Œä½†ä½äº<code>package</code>è¯­å¥çš„åé¢ã€‚</p></li><li><p>å¦‚æœèƒ½å¤Ÿæ˜ç¡®åœ°æŒ‡å‡ºæ‰€å¯¼äººçš„ç±»ï¼Œå°†ä¼šä½¿ä»£ç çš„è¯»è€…æ›´åŠ å‡†ç¡®åœ°çŸ¥é“åŠ è½½äº†å“ªäº›ç±»ã€‚</p></li><li><p>åœ¨ä¸åŒçš„åŒ…å…·æœ‰ç›¸åŒçš„ç±»åå†²çªæ—¶ï¼Œå¯ä»¥å¢åŠ ä¸€ä¸ªç‰¹å®šçš„<code>import</code>è¯­å¥ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br></pre></td></tr></table></figure></li><li><p>å¦‚æœéƒ½éœ€è¦ä½¿ç”¨ï¼Œå°±åœ¨æ¯ä¸ªç±»åçš„å‰é¢åŠ ä¸Šå®Œæ•´çš„åŒ…åã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">java.util.Date deadline = <span class="keyword">new</span> java.util.Date();</span><br><span class="line">java.sql.Date today = <span class="keyword">new</span> java.sql.Date(...);</span><br></pre></td></tr></table></figure></li><li><p>åœ¨åŒ…ä¸­å®šä½ç±»æ˜¯ç¼–è¯‘å™¨ï¼ˆcompilerï¼‰çš„å·¥ä½œã€‚ç±»æ–‡ä»¶ä¸­çš„å­—èŠ‚ç è‚¯å®šä½¿ç”¨å®Œæ•´çš„åŒ…åæ¥å¼•ç”¨å…¶ä»–ç±»ã€‚</p></li><li><p>import è¯­å¥ä¸ä»…å¯ä»¥å¯¼äººç±»ï¼Œè¿˜å¢åŠ äº†å¯¼äººé™æ€æ–¹æ³•å’Œé™æ€åŸŸçš„åŠŸèƒ½ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.System.*;</span><br><span class="line"><span class="comment">// å°±å¯ä»¥ä½¿ç”¨ System ç±»çš„é™æ€æ–¹æ³•å’Œé™æ€åŸŸï¼Œè€Œä¸å¿…åŠ ç±»åå‰ç¼€ï¼š</span></span><br><span class="line">out.println(<span class="string">"Goodbye, World!"</span>); <span class="comment">// i.e., System.out</span></span><br><span class="line">exit(<span class="number">9</span>); <span class="comment">// i.e., System.exit</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦å¤–ï¼Œè¿˜å¯ä»¥å¯¼å…¥ç‰¹å®šçš„æ–¹æ³•æˆ–åŸŸï¼š</span></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.System.out;</span><br></pre></td></tr></table></figure></li><li><p>è¦æƒ³å°†ä¸€ä¸ªç±»æ”¾äººåŒ…ä¸­ï¼Œ å°±å¿…é¡»å°†åŒ…çš„åå­—æ”¾åœ¨æºæ–‡ä»¶çš„å¼€å¤´ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.horstmann.corejava;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å¦‚æœæ²¡æœ‰åœ¨æºæ–‡ä»¶ä¸­æ”¾ç½®<code>package</code>è¯­å¥ï¼Œè¿™ä¸ªæºæ–‡ä»¶ä¸­çš„ç±»å°±è¢«æ”¾ç½®åœ¨ä¸€ä¸ªé»˜è®¤åŒ…ï¼ˆdefault packageï¼‰ä¸­ã€‚</p></li></ul><hr><ul><li>ç±»è®¾è®¡æŠ€å·§ï¼š<ol><li>ä¸€å®šè¦ä¿è¯æ•°æ®ç§æœ‰</li><li>ä¸€å®šè¦å¯¹æ•°æ®åˆå§‹åŒ–</li><li>ä¸è¦åœ¨ç±»ä¸­ä½¿ç”¨è¿‡å¤šçš„åŸºæœ¬ç±»å‹</li><li>ä¸æ˜¯æ‰€æœ‰çš„åŸŸéƒ½éœ€è¦ç‹¬ç«‹çš„åŸŸè®¿é—®å™¨å’ŒåŸŸæ›´æ”¹å™¨</li><li>å°†èŒè´£è¿‡å¤šçš„ç±»è¿›è¡Œåˆ†è§£</li><li>ç±»åå’Œæ–¹æ³•åè¦èƒ½å¤Ÿä½“ç°å®ƒä»¬çš„èŒè´£</li><li>ä¼˜å…ˆä½¿ç”¨ä¸å¯å˜çš„ç±»</li></ol></li></ul><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>æˆ‘è‡ªå·±çš„ç†è§£æ˜¯ï¼Œå› ä¸ºé™æ€æ–¹æ³•å¯ä»¥åœ¨ä¸ new çš„å‰æä¸‹ä½¿ç”¨ï¼Œæ‰€ä»¥ä¸èƒ½å¯¹éœ€è¦ new ä¹‹åçš„å¯¹è±¡æ“ä½œã€‚ <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Javaå­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰</title>
      <link href="/blog/2020/02/10/java-notes-1/"/>
      <url>/blog/2020/02/10/java-notes-1/</url>
      
        <content type="html"><![CDATA[<p>Java æ ¸å¿ƒæŠ€æœ¯å·ä¸€åŸºç¡€çŸ¥è¯†ç¬¬ 10 ç‰ˆ</p><h2 id="java-çš„åŸºæœ¬ç¨‹åºè®¾è®¡ç»“æ„"><a class="header-anchor" href="#java-çš„åŸºæœ¬ç¨‹åºè®¾è®¡ç»“æ„">#</a>Java çš„åŸºæœ¬ç¨‹åºè®¾è®¡ç»“æ„</h2><a id="more"></a><h3 id="ä¸€ä¸ªç®€å•çš„-java-åº”ç”¨ç¨‹åº"><a class="header-anchor" href="#ä¸€ä¸ªç®€å•çš„-java-åº”ç”¨ç¨‹åº">#</a>ä¸€ä¸ªç®€å•çš„ Java åº”ç”¨ç¨‹åº</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FirstSample</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"hello java"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>Java ä¸­å®šä¹‰ç±»åçš„è§„åˆ™å¾ˆå®½æ¾ã€‚åå­—å¿…é¡»ä»¥å­—æ¯å¼€å¤´ï¼Œåé¢å¯ä»¥è·Ÿå­—æ¯å’Œæ•°å­—çš„ä»»æ„ç»„åˆï¼Œé•¿åº¦åŸºæœ¬ä¸Šæ²¡æœ‰é™åˆ¶ï¼Œä½†æ˜¯ä¸èƒ½ä½¿ç”¨ Java ä¿ç•™å­—ä½œä¸ºç±»åã€‚</li><li>æ ‡å‡†çš„å‘½åè§„èŒƒä¸ºï¼šç±»åæ˜¯ä»¥å¤§å†™å­—æ¯å¼€å¤´çš„åè¯ã€‚å¦‚æœåå­—ç”±å¤šä¸ªå•è¯ç»„æˆï¼Œæ¯ä¸ªå•è¯çš„ç¬¬ä¸€ä¸ªå­—æ¯éƒ½åº”è¯¥å¤§å†™ã€‚</li><li>æºä»£ç çš„æ–‡ä»¶åå¿…é¡»ä¸å…¬å…±ç±»çš„åå­—ç›¸åŒï¼Œå¹¶ç”¨ <code>.java</code> ä½œä¸ºæ‰©å±•åã€‚</li></ul><hr><h3 id="æ•°æ®ç±»å‹"><a class="header-anchor" href="#æ•°æ®ç±»å‹">#</a>æ•°æ®ç±»å‹</h3><ul><li>Java æ˜¯ä¸€ç§å¼ºç±»å‹è¯­è¨€ã€‚å…±æœ‰ 8 ç§åŸºæœ¬ç±»å‹ï¼šintã€shortã€longã€byteã€floatã€doubleã€charã€booleanã€‚</li><li>åœ¨ Java ä¸­ï¼Œ æ•´å‹çš„èŒƒå›´ä¸è¿è¡Œ Java ä»£ç çš„æœºå™¨æ— å…³ã€‚</li><li>é•¿æ•´å‹æ•°å€¼æœ‰ä¸€ä¸ªåç¼€ <code>L</code> æˆ– <code>l</code>ã€‚<ul><li>4000000000L</li></ul></li><li>åå…­è¿›åˆ¶æ•°å€¼æœ‰ä¸€ä¸ªå‰ç¼€ <code>0x</code> æˆ– <code>0X</code>ã€‚<ul><li>0xCAFE</li></ul></li><li>å…«è¿›åˆ¶æœ‰ä¸€ä¸ªå‰ç¼€ <code>0</code>ã€‚<ul><li>010 æ˜¯åè¿›åˆ¶çš„ 8</li></ul></li><li>åŠ ä¸Šå‰ç¼€ <code>0b</code> æˆ– <code>0B</code> å°±å¯ä»¥å†™äºŒè¿›åˆ¶æ•°ã€‚<ul><li>0b1001 æ˜¯åè¿›åˆ¶çš„ 9</li></ul></li><li>float ç±»å‹çš„æ•°å€¼æœ‰ä¸€ä¸ªåç¼€ <code>F</code> æˆ– <code>f</code>ã€‚æ²¡æœ‰åç¼€ <code>F</code> çš„æµ®ç‚¹æ•°å€¼é»˜è®¤ä¸º double ç±»å‹ï¼Œä¹Ÿå¯ä»¥åœ¨æµ®ç‚¹æ•°å€¼åé¢æ·»åŠ åç¼€ <code>D</code> æˆ– <code>d</code>ã€‚</li></ul><hr><ul><li>Unicode è½¬ä¹‰åºåˆ—åœ¨è§£æä»£ç ä¹‹å‰è¿›è¡Œ<ul><li>æ³¨é‡Šä¸­çš„ <code>\u</code> ä¹Ÿä¼šè¢«è½¬ä¹‰</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String\u005B\u005D args)</span> \\ åˆæ³•</span></span><br><span class="line"><span class="function">\\ ç­‰ä»·äº</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span></span><br></pre></td></tr></table></figure></li><li><a href="https://github.com/onns/insight_python/blob/master/Unicode_and_Character_Sets.md" target="_blank" rel="noopener">ç ç‚¹</a></li><li>å¯ä»¥åœ¨ä»»æ„ä½ç½®å£°æ˜å˜é‡</li><li><code>final</code> å£°æ˜å¸¸é‡<ul><li>å…³é”®å­— <code>final</code> è¡¨ç¤ºè¿™ä¸ªå˜é‡åªèƒ½è¢«èµ‹å€¼ä¸€æ¬¡ã€‚ä¸€æ—¦è¢«èµ‹å€¼ä¹‹åï¼Œå°±ä¸èƒ½å¤Ÿå†æ›´æ”¹äº†ã€‚ä¹ æƒ¯ä¸Šï¼Œå¸¸é‡åä½¿ç”¨å…¨å¤§å†™ã€‚</li></ul></li><li>å¦‚æœè¿ç®—ç¬¦å¾—åˆ°ä¸€ä¸ªå€¼ï¼Œå…¶ç±»å‹ä¸å·¦ä¾§æ“ä½œæ•°çš„ç±»å‹ä¸åŒï¼Œå°±ä¼šå‘ç”Ÿå¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚<ul><li><code>x += 3.5;</code> ç­‰ä»·äº <code>x = (int)(x + 3.5);</code></li></ul></li><li><code>+=</code> æ˜¯å³ç»“åˆè¿ç®—ç¬¦<ul><li><code>a += b += c</code> ç­‰ä»·äº <code>a += (b += c)</code></li></ul></li><li>ä½è¿ç®—ç¬¦<ul><li><code>&amp;</code> (â€œandâ€)</li><li><code>|</code> (â€œorâ€)</li><li><code>^</code> (â€œxorâ€)</li><li><code>~</code> (â€œnotâ€)</li><li><code>&gt;&gt;</code> å·¦ç§»</li><li><code>&lt;&lt;</code> å³ç§»</li><li><code>&gt;&gt;&gt;</code> è¿ç®—ç¬¦ä¼šç”¨ 0 å¡«å……é«˜ä½</li></ul></li><li>String ç±»å¯¹è±¡ä¸ºä¸å¯å˜å­—ç¬¦ä¸²ï¼Œä¸èƒ½ä¿®æ”¹ã€‚</li></ul><hr><ul><li>Java æä¾›äº†ä¸€ç§å¸¦æ ‡ç­¾çš„ break è¯­å¥ï¼Œ ç”¨äºè·³å‡ºå¤šé‡åµŒå¥—çš„å¾ªç¯è¯­å¥ã€‚<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">label:</span><br><span class="line">&#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="keyword">break</span> label;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><ul><li><code>Arrays.toString(a)</code> æ‰“å°æ•°ç»„ä¸­çš„æ‰€æœ‰å€¼ã€‚</li><li><code>Arrays.deepToString(a)</code> å¿«é€Ÿåœ°æ‰“å°ä¸€ä¸ªäºŒç»´æ•°ç»„çš„æ•°æ®å…ƒç´ åˆ—è¡¨ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> note </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cæµ‹è¯•ç³»ç»Ÿè®¾è®¡</title>
      <link href="/blog/2020/02/06/ctest-design/"/>
      <url>/blog/2020/02/06/ctest-design/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a class="header-anchor" href="#å‰è¨€">#</a>å‰è¨€</h2><p>å› ä¸ºå¿…é¡»è¦ç»™åŒå­¦ä»¬çš„Cç¨‹åºçœ‹ä»£ç ï¼Œä½†æ˜¯æŒ¨ä¸ªæ‰‹å·¥æ£€æŸ¥ä¹Ÿå¤ªéº»çƒ¦ä¸”è€—æ—¶é—´äº†ï¼Œæ‰€ä»¥è¿˜æ˜¯å¼„ä¸ªå°å°çš„æµ‹è¯•ç³»ç»Ÿå§ã€‚</p><a id="more"></a><h2 id="ç³»ç»Ÿæµç¨‹"><a class="header-anchor" href="#ç³»ç»Ÿæµç¨‹">#</a>ç³»ç»Ÿæµç¨‹</h2><p>å¤§ä½“çš„ç³»ç»Ÿæµç¨‹å¦‚<code>å›¾1</code>æ‰€ç¤ºï¼Œå°†å­¦ç”Ÿä»¬ç¼–å†™çš„Cç¨‹åºæ–‡ä»¶æ”¶é›†åˆ°æœåŠ¡å™¨ä¸Šåï¼Œç¼–è¯‘å¹¶æµ‹è¯•ç¨‹åºï¼Œå°†ä¿¡æ¯è®°å½•å¹¶æœ€ç»ˆå±•ç¤ºç»™å­¦ç”Ÿï¼Œæ–¹ä¾¿ä»–ä»¬åå¤æäº¤å’Œä¿®æ”¹ã€‚</p><center><p><img src="//onns.xyz/blog/image/20200206-1.jpg" alt="ç³»ç»Ÿæµç¨‹å›¾"></p><p>å›¾1 ç³»ç»Ÿæµç¨‹å›¾</p></center><h3 id="æ”¶é›†ä»£ç "><a class="header-anchor" href="#æ”¶é›†ä»£ç ">#</a>æ”¶é›†ä»£ç </h3><p>ä½†å‡¡ä¸€ç§ç½‘é¡µè¯­è¨€éƒ½æœ‰æ–‡ä»¶ä¸Šä¼ æ¥å£ï¼Œæ‰€ä»¥åªéœ€è¦ç½‘é¡µè¡¨å•å³å¯å®Œæˆä»£ç çš„æ”¶é›†å·¥ä½œï¼Œä½†æˆ‘ä¸ºäº†å·æ‡’ğŸ˜‚ï¼Œé€‰æ‹©äº†ç”¨è…¾è®¯å¾®äº‘çš„æ–‡ä»¶æ”¶é›†åŠŸèƒ½ï¼Œå…·ä½“å¯ä»¥è‡ªè¡Œäº†è§£ã€‚</p><p>åœ¨æ”¶é›†ä»£ç çš„æ—¶å€™ï¼Œè§„å®šäº†æ–‡ä»¶çš„å‘½åæ ¼å¼ä¸º <code>å­¦å·(é¢˜å·)</code> çš„æ–¹å¼ï¼Œæ‰€ä»¥å¯ä»¥å¾—åˆ°ä»£ç çš„æˆå‘˜ä¿¡æ¯å’Œé¢˜å·ä¿¡æ¯è€Œä¸å¿…é¢å¤–é™„åŠ è¯´æ˜ã€‚</p><h3 id="ç¼–è¯‘"><a class="header-anchor" href="#ç¼–è¯‘">#</a>ç¼–è¯‘</h3><p>å› ä¸ºæƒ³ç”¨å‘½ä»¤è¡Œçš„cè¯­è¨€å·¥å…·ï¼Œæœ€æ–¹ä¾¿çš„å¤§æ¦‚å°±æ˜¯ <code>gcc</code> äº†ã€‚<br>windowä¸‹gccå®‰è£…æ¯”è¾ƒéº»çƒ¦ï¼Œç›¸å…³æ–¹æ³•å¯ä»¥å‚ç…§ <a href="http://www.mingw.org/" target="_blank" rel="noopener">MinGW | Minimalist GNU for Windows</a> è¿›è¡Œå®‰è£…ã€‚<br>MacOSå’ŒLinuxéƒ½ç›´æ¥å‘½ä»¤è¡Œè‡ªå¸¦gccï¼Œç›´æ¥ä½¿ç”¨å³å¯ï¼Œä½†åä¸¤è€…åœ¨ç¼–è¯‘æ—¶ä¼šé»˜è®¤ç¼–è¯‘ä¸º <code>.o</code> ç»“å°¾çš„æ–‡ä»¶ï¼Œè€Œwindowsæ˜¯ <code>.exe</code> ç»“å°¾çš„æ–‡ä»¶ï¼Œä¸è¿‡é—®é¢˜ä¸å¤§ï¼ŒæŒ‡å®šä¸€ä¸‹å³å¯ã€‚</p><p>ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯åœ¨windowså‘½ä»¤è¡Œä¸‹è¿è¡Œå¯æ‰§è¡Œæ–‡ä»¶çš„æ—¶å€™ï¼Œä¸éœ€è¦åŠ  <code>./</code> ï¼Œæ‰€ä»¥åœ¨ç³»ç»Ÿä¸Šéœ€è¦åŠ ä»¥åŒºåˆ†ã€‚åœ¨å‘½åä¸­çš„ä¸€äº›è¯¸å¦‚ <code>()</code> ä¹‹ç±»çš„ç¬¦å·åœ¨MacOSä¸‹éœ€è¦è½¬ä¹‰åŠ  <code>\</code>ï¼Œä½†æ˜¯å¦‚æœåœ¨windowsä¸‹è¿›è¡Œè½¬ä¹‰åˆä¼šå‡ºé”™ï¼Œä¹Ÿè¦åŠ ä»¥åŒºåˆ†ã€‚</p><h3 id="æµ‹è¯•"><a class="header-anchor" href="#æµ‹è¯•">#</a>æµ‹è¯•</h3><p>æµ‹è¯•æ˜¯æµ‹è¯•Cè¯­è¨€ç¨‹åºæœ‰æ²¡æœ‰æ­£ç¡®çš„å¿…è¦æ­¥éª¤ï¼Œåªè¦å’Œå­¦ç”Ÿä»¬çº¦å®šå¥½è¾“å…¥è¾“å‡ºçš„æ ¼å¼ï¼Œåˆ°æ—¶å€™åªéœ€è¦å°†ç¨‹åºæ‰§è¡Œç»“æœä¸æ ‡å‡†ç­”æ¡ˆè¿›è¡Œå­—ç¬¦åŒ¹é…å³å¯ã€‚<br>è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ä¸ªé—®é¢˜æ˜¯ï¼ŒMacOSä¸‹çš„æ¢è¡Œä¸€èˆ¬ä»¥ <code>\n</code> ä¸ºä¸»ï¼Œè€Œwindowsä¸‹åˆ™ä»¥ <code>\r\n</code> ä¸ºä¸»ï¼Œåœ¨åŒ¹é…å‰éœ€è¦å°† <code>\r</code> ç§»é™¤ã€‚</p><h3 id="å±•ç¤º"><a class="header-anchor" href="#å±•ç¤º">#</a>å±•ç¤º</h3><p>è¿™ä¸ªå±•ç¤ºå°±å› äººè€Œå¼‚äº†ï¼Œæˆ‘é€‰æ‹©çš„æ˜¯bootstrapçš„tableæ ·å¼è¡¨è¿›è¡Œå±•ç¤ºã€‚</p><h2 id="å…·ä½“å®ç°"><a class="header-anchor" href="#å…·ä½“å®ç°">#</a>å…·ä½“å®ç°</h2><p>æ•´ä¸ªæµç¨‹æ§åˆ¶æ˜¯ç”¨pythonå®Œæˆçš„ï¼Œä¸€ä¸ª <code>pipe.py</code> æ–‡ä»¶ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> platform</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–‡ä»¶å‘½åæ ¼å¼ï¼š      å­¦å·(é¢˜ç›®).cpp</span></span><br><span class="line"><span class="comment"># ä¾‹å­ï¼š            23020181154229(1).cpp</span></span><br><span class="line"></span><br><span class="line">dir = os.path.abspath(os.path.dirname(__file__))</span><br><span class="line">os_type = <span class="string">'1'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(platform.system() == <span class="string">'Windows'</span>):</span><br><span class="line">    os_type = <span class="string">'2'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">match</span><span class="params">(name)</span>:</span></span><br><span class="line">    res = re.search(<span class="string">r'^([0-9]+)\(([0-9]+)\)'</span>, name)</span><br><span class="line">    <span class="keyword">if</span>(res):</span><br><span class="line">        <span class="keyword">if</span>(name.endswith(<span class="string">".c"</span>) <span class="keyword">or</span> name.endswith(<span class="string">".cpp"</span>)):</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">untest</span><span class="params">(name)</span>:</span></span><br><span class="line">    res = re.search(<span class="string">r'^0-([0-9]&#123;14&#125;)-([0-9]+)\(([0-9]+)\)'</span>, name)</span><br><span class="line">    <span class="keyword">if</span>(res):</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">edit</span><span class="params">(dir)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> home, dirs, files <span class="keyword">in</span> os.walk(dir):</span><br><span class="line">        <span class="keyword">for</span> filename <span class="keyword">in</span> files:</span><br><span class="line">            <span class="keyword">if</span> match(filename):</span><br><span class="line"></span><br><span class="line">                os.rename(os.path.join(home, filename), os.path.join(</span><br><span class="line">                    home, time.strftime(<span class="string">"0-%Y%m%d%H%M%S-"</span>, time.localtime()) + filename))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">generate</span><span class="params">(dir)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> home, dirs, files <span class="keyword">in</span> os.walk(dir):</span><br><span class="line">        <span class="keyword">for</span> filename <span class="keyword">in</span> files:</span><br><span class="line">            <span class="keyword">if</span> untest(filename):</span><br><span class="line">                newname = <span class="string">'1'</span> + filename[<span class="number">1</span>:]</span><br><span class="line"></span><br><span class="line">                os.rename(os.path.join(home, filename),</span><br><span class="line">                          os.path.join(home, newname))</span><br><span class="line">                <span class="keyword">return</span> newname</span><br><span class="line">    <span class="keyword">return</span> <span class="string">''</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">build</span><span class="params">(cname, oname)</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        res = subprocess.check_output(<span class="string">"gcc \"%s\" -o %s"</span> % (cname, oname),</span><br><span class="line">                                      stderr=subprocess.STDOUT,</span><br><span class="line">                                      shell=<span class="literal">True</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">except</span> subprocess.CalledProcessError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run</span><span class="params">(oname, idata, odata)</span>:</span></span><br><span class="line">    r, w = os.pipe()</span><br><span class="line">    os.write(w, bytes(idata, <span class="string">"utf-8"</span>))</span><br><span class="line">    os.close(w)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(os_type == <span class="string">'1'</span>):</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            res = subprocess.check_output(<span class="string">"./%s"</span> % (oname), stdin=r, timeout=<span class="number">5</span>)</span><br><span class="line">        <span class="keyword">except</span> subprocess.TimeoutExpired <span class="keyword">as</span> e:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">except</span> subprocess.CalledProcessError <span class="keyword">as</span> e:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">if</span>(os_type == <span class="string">'2'</span>):</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            res = subprocess.check_output(<span class="string">"%s"</span> % (oname), stdin=r, timeout=<span class="number">5</span>)</span><br><span class="line">        <span class="keyword">except</span> subprocess.TimeoutExpired <span class="keyword">as</span> e:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">except</span> subprocess.CalledProcessError <span class="keyword">as</span> e:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        result = res.decode(<span class="string">"utf-8"</span>).replace(<span class="string">'\r'</span>, <span class="string">''</span>)</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> result.strip().replace(<span class="string">" "</span>,<span class="string">""</span>) == odata.strip().replace(<span class="string">" "</span>,<span class="string">""</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    print(result)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">test</span><span class="params">(oname, question)</span>:</span></span><br><span class="line">    question_list = &#123;</span><br><span class="line">        <span class="string">'1'</span>: [[<span class="string">'24'</span>, <span class="string">'0'</span>], [<span class="string">'11'</span>, <span class="string">'1'</span>], [<span class="string">'0'</span>, <span class="string">'0'</span>], [<span class="string">'-2'</span>, <span class="string">'0'</span>], [<span class="string">'-21'</span>, <span class="string">'1'</span>]],</span><br><span class="line">        <span class="string">'2'</span>: [[<span class="string">'a'</span>, <span class="string">'a'</span>], [<span class="string">'A'</span>, <span class="string">'a'</span>], [<span class="string">'Z'</span>, <span class="string">'z'</span>], [<span class="string">'0'</span>, <span class="string">'0'</span>], [<span class="string">'Q'</span>, <span class="string">'q'</span>]],</span><br><span class="line">        <span class="string">'3'</span>: [[<span class="string">'12/14/16\n10/10/15'</span>, <span class="string">'10/10/15'</span>], [<span class="string">'13/12/16\n10/10/15'</span>, <span class="string">'-1'</span>]],</span><br><span class="line">        <span class="string">'4'</span>: [[<span class="string">'1 2 3 4'</span>, <span class="string">'4 1'</span>]],</span><br><span class="line">        <span class="string">'5'</span>: [[<span class="string">'3 4 5'</span>, <span class="string">'1\n1'</span>], [<span class="string">'1.5 1.5 1.5'</span>, <span class="string">'1\n0'</span>], [<span class="string">'0 0 0'</span>, <span class="string">'0\n0'</span>], [<span class="string">'-3 -4 -5'</span>, <span class="string">'0\n0'</span>]],</span><br><span class="line">        <span class="string">'6'</span>: [[<span class="string">'2019 1 1'</span>, <span class="string">'1'</span>], [<span class="string">'1900 3 1'</span>, <span class="string">'60'</span>], [<span class="string">'2000 3 1'</span>, <span class="string">'61'</span>]],</span><br><span class="line">        <span class="string">'7'</span>: [[<span class="string">'1 2 3 4 5 6 7 8 9 10'</span>, <span class="string">'1 1\n'</span>], [<span class="string">'89 56 23 14 789 54 1223 78 12 65'</span>, <span class="string">'12 9\n'</span>], [<span class="string">'3 2 1 1 5 6 7 8 9 10'</span>, <span class="string">'1 3\n'</span>]],</span><br><span class="line">        <span class="string">'8'</span>:[[<span class="string">'1 2 3 4 5 6 7 8 9 10'</span>, <span class="string">'55.00 5.50\n'</span>],[<span class="string">'1 1 1 1 1 1 1 1 1 1'</span>, <span class="string">'10.00 1.00\n'</span>],[<span class="string">'0.6798 0.5958 0.5754 0.4854 0.3895 0.2901 0.1942 0.1053 0.045 0.003'</span>,<span class="string">'3.40 0.34\n'</span>]],</span><br><span class="line">        <span class="string">'9'</span>:[[<span class="string">'1 2 3 4 5\n2 3 4 5 1\n3 4 5 1 2\n4 5 1 2 3\n5 1 2 3 4'</span>,<span class="string">'15 15 15 15 15\n3.00 3.00 3.00 3.00 3.00\n3.00 3.00 3.00 3.00 3.00\n5 5 5 5 5\n1 1 1 1 1'</span>],[<span class="string">'24 14 8 0 46\n36 20 20 20 96\n34 20 20 2 76\n40 20 20 18 98\n36 20 20 20 96'</span>,<span class="string">'92 192 152 196 192\n18.40 38.40 30.40 39.20 38.40\n34.00 18.80 17.60 12.00 82.40\n40 20 20 20 98\n24 14 8 0 46'</span>]],</span><br><span class="line">        <span class="string">'10'</span>:[[<span class="string">'ASJFKLSJFLSJFLSJFIIQJKZVNIRUQ'</span>,<span class="string">'13\n'</span>],[<span class="string">'ABCDEFGHIJKLMNOPQRSTUVWXY'</span>,<span class="string">'25\n'</span>],[<span class="string">'ONNSISSTUPID'</span>,<span class="string">'8\n'</span>]],</span><br><span class="line">        <span class="string">'11'</span>:[[<span class="string">'dzldzldzl\nd'</span>,<span class="string">'3\n'</span>],[<span class="string">'13757769913\n3'</span>,<span class="string">'2\n'</span>],[<span class="string">'2302018dzllp\nl'</span>,<span class="string">'2\n'</span>],[<span class="string">'QCHZK\nq'</span>,<span class="string">'0\n'</span>]],</span><br><span class="line">        <span class="string">'12'</span>:[[<span class="string">'ASJFKLSJFLSJFLSJFIIQJKZVNIRUQ'</span>,<span class="string">'ASJFKLSJFLSJFLSJFIIQJKZVNIRUQ\n'</span>],[<span class="string">'ABCDEFGHIJKLMNOPQRSTUVWXY'</span>,<span class="string">'ABCDEFGHIJKLMNOPQRSTUVWXY\n'</span>]]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">not</span> question <span class="keyword">in</span> question_list):</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">for</span> test_data <span class="keyword">in</span> question_list[question]:</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">not</span> run(oname, test_data[<span class="number">0</span>], test_data[<span class="number">1</span>])):</span><br><span class="line">            print(test_data[<span class="number">0</span>])</span><br><span class="line">            print(test_data[<span class="number">1</span>])</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">write</span><span class="params">(data)</span>:</span></span><br><span class="line">    f = open(os.path.join(dir, <span class="string">'result.json'</span>), <span class="string">'r'</span>)</span><br><span class="line">    old_data = json.loads(f.read()[<span class="number">9</span>:<span class="number">-1</span>])</span><br><span class="line">    f.close()</span><br><span class="line">    print(data)</span><br><span class="line">    old_data.append(data)</span><br><span class="line">    f = open(os.path.join(dir, <span class="string">'result.json'</span>), <span class="string">'w'</span>)</span><br><span class="line">    f.write(<span class="string">'callback('</span>+json.dumps(old_data) + <span class="string">')'</span>)</span><br><span class="line">    f.close</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    os.chdir(dir)</span><br><span class="line">    <span class="keyword">while</span>(<span class="literal">True</span>):</span><br><span class="line">        homework_dir = os.path.join(dir, <span class="string">'homework2'</span>)</span><br><span class="line">        edit(homework_dir)</span><br><span class="line">        <span class="keyword">while</span>(<span class="literal">True</span>):</span><br><span class="line">            cname = generate(homework_dir)</span><br><span class="line">            <span class="keyword">if</span>(cname == <span class="string">''</span>):</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">            res = re.search(<span class="string">r'^1-([0-9]&#123;14&#125;)-([0-9]+)\(([0-9]+)\)'</span>, cname)</span><br><span class="line">            <span class="keyword">if</span>(res):</span><br><span class="line">                date = res.group(<span class="number">1</span>)</span><br><span class="line">                xmuid = res.group(<span class="number">2</span>)</span><br><span class="line">                question = res.group(<span class="number">3</span>)</span><br><span class="line">            cname = os.path.join(homework_dir, cname)</span><br><span class="line">            status = <span class="string">'0'</span></span><br><span class="line">            <span class="keyword">if</span> build(cname, <span class="string">'raw.o'</span>):</span><br><span class="line">                <span class="keyword">if</span>(test(<span class="string">'raw.o'</span>, question)):</span><br><span class="line">                    status = <span class="string">'1'</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    status = <span class="string">'3'</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                status = <span class="string">'2'</span></span><br><span class="line">            write(&#123;<span class="string">'date'</span>: date[:<span class="number">8</span>], <span class="string">'time'</span>: date[<span class="number">8</span>:<span class="number">10</span>] + <span class="string">':'</span> + date[<span class="number">10</span>:<span class="number">12</span>] + <span class="string">':'</span> + date[<span class="number">12</span>:<span class="number">14</span>],</span><br><span class="line">                   <span class="string">'xmuid'</span>: xmuid, <span class="string">'question'</span>: question, <span class="string">'status'</span>: status&#125;)</span><br><span class="line">        time.sleep(<span class="number">5</span>)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
          <category> xmu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> c </tag>
            
            <tag> oj </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2020 book list</title>
      <link href="/blog/2020/01/01/2020-book-list/"/>
      <url>/blog/2020/01/01/2020-book-list/</url>
      
        <content type="html"><![CDATA[<h3 id="å†™åœ¨å‰é¢"><a class="header-anchor" href="#å†™åœ¨å‰é¢">#</a>å†™åœ¨å‰é¢</h3><a id="more"></a><h3 id="ä¸‰æœˆ"><a class="header-anchor" href="#ä¸‰æœˆ">#</a>ä¸‰æœˆ</h3><ul><li><a href="https://book.douban.com/subject/3533221/" target="_blank" rel="noopener">ã€Šéæš´åŠ›æ²Ÿé€šã€‹</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
      </categories>
      
      
        <tags>
            
            <tag> book </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nginxå¤šåŸŸåè·¨åŸŸ</title>
      <link href="/blog/2019/12/21/nginx-multiple-domains/"/>
      <url>/blog/2019/12/21/nginx-multiple-domains/</url>
      
        <content type="html"><![CDATA[<p>å› ä¸ºéœ€è¦å¯èƒ½ä¼šå…è®¸æœåŠ¡å™¨è·¨åŸŸäº¤äº’æ•°æ®ï¼Œæ‰€ä»¥è¦è®¾ç½®å…è®¸å¤šåŸŸåè·¨åŸŸã€‚</p><a id="more"></a><h2 id="é€šç”¨æ–¹æ³•"><a class="header-anchor" href="#é€šç”¨æ–¹æ³•">#</a>é€šç”¨æ–¹æ³•</h2><p>æ‰“å¼€ nginx.confï¼Œåœ¨ http é‡ŒåŠ å…¥å¦‚ä¸‹è¯­å¥ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="attribute">add_header</span> Access-Control-Allow-Origin *;</span><br><span class="line">    <span class="attribute">add_header</span> Access-Control-Allow-Headers X-Requested-With;</span><br><span class="line">    <span class="attribute">add_header</span> Access-Control-Allow-Methods GET,POST,OPTIONS;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å³å¯ã€‚åªæ˜¯è¿™æ ·çš„æ–¹å¼å®‰å…¨æ€§å¾ˆå·®ï¼Œä½†åƒä¸‹é¢çš„è®¾ç½®æ–¹å¼ä¸è¢«æµè§ˆå™¨å…è®¸ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="attribute">add_header</span> Access-Control-Allow-Origin domain1;</span><br><span class="line">    <span class="attribute">add_header</span> Access-Control-Allow-Origin domain2;</span><br><span class="line">    <span class="attribute">add_header</span> Access-Control-Allow-Headers X-Requested-With;</span><br><span class="line">    <span class="attribute">add_header</span> Access-Control-Allow-Methods GET,POST,OPTIONS;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æµè§ˆå™¨åªå…è®¸ä¸€ä¸ª <code>Access-Control-Allow-Origin</code> å­—æ®µã€‚</p><h2 id="è§£å†³æ–¹æ³•"><a class="header-anchor" href="#è§£å†³æ–¹æ³•">#</a>è§£å†³æ–¹æ³•</h2><p>å°† <code>add_header Access-Control-Allow-Origin</code> è¯­å¥æ”¾ç½®åœ¨å¦‚ä¸‹ä½ç½®ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">http</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="attribute">add_header</span> Access-Control-Allow-Headers X-Requested-With;</span><br><span class="line">    <span class="attribute">add_header</span> Access-Control-Allow-Methods GET,POST,OPTIONS;</span><br><span class="line">    ...</span><br><span class="line">    <span class="section">server</span> &#123;</span><br><span class="line">        ...</span><br><span class="line">        <span class="attribute">location</span> <span class="regexp">~ \.php($|/)</span> &#123;</span><br><span class="line">            ...</span><br><span class="line">            <span class="attribute">if</span> (<span class="variable">$http_origin</span> <span class="regexp">~* "^domain1$"</span> ) &#123;</span><br><span class="line">                <span class="attribute">add_header</span> Access-Control-Allow-Origin <span class="variable">$http_origin</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="attribute">if</span> (<span class="variable">$http_origin</span> <span class="regexp">~* "^domain2$"</span> ) &#123;</span><br><span class="line">                <span class="attribute">add_header</span> Access-Control-Allow-Origin <span class="variable">$http_origin</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            ...</span><br><span class="line">        &#125;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®Œã€‚</p><h2 id="å‚è€ƒæ–‡æ¡£"><a class="header-anchor" href="#å‚è€ƒæ–‡æ¡£">#</a>å‚è€ƒæ–‡æ¡£</h2><ul><li><a href="https://serverfault.com/questions/350330/nginx-add-header-adding-multiple-headers" target="_blank" rel="noopener">NGINX add_header, adding multiple headers</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nginx </tag>
            
            <tag> multiple domains </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cè¯­è¨€ç¼–ç¨‹æ³¨æ„äº‹é¡¹</title>
      <link href="/blog/2019/12/11/c-tips/"/>
      <url>/blog/2019/12/11/c-tips/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘è§£ç­”äº†å¥½å¤šç–‘é—®ï¼Œå¯¹å¤§å®¶çš„æœŸæœ«è€ƒè¯•ååˆ†å ªå¿§å•Š</p><center><p><img src="//onns.xyz/blog/image/1_180417102937_1.jpg" alt=""></p></center><p>ç­”åº”æˆ‘ï¼Œä¸‹é¢è¿™äº›é”™è¯¯ä¸è¦å†çŠ¯äº†å¥½å—ã€‚</p><a id="more"></a><h2 id="ä¸€äº›å°çš„çŸ¥è¯†ç‚¹"><a class="header-anchor" href="#ä¸€äº›å°çš„çŸ¥è¯†ç‚¹">#</a>ä¸€äº›å°çš„çŸ¥è¯†ç‚¹</h2><ul><li>æ•°ç»„å®šä¹‰æ—¶å¿…é¡»æŒ‡å®šå›ºå®šå¸¸æ•°çš„é•¿åº¦ï¼Œä¸èƒ½ä½¿ç”¨å˜é‡ã€‚<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é”™è¯¯ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">int</span> n=<span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> a[n];</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­£ç¡®ç¤ºä¾‹</span></span><br><span class="line"><span class="keyword">int</span> a[<span class="number">10</span>];</span><br></pre></td></tr></table></figure></li></ul><h2 id="å˜é‡åœ¨ä½¿ç”¨å‰ï¼Œä¸€å®šè¦åˆå§‹åŒ–"><a class="header-anchor" href="#å˜é‡åœ¨ä½¿ç”¨å‰ï¼Œä¸€å®šè¦åˆå§‹åŒ–">#</a>å˜é‡åœ¨ä½¿ç”¨å‰ï¼Œä¸€å®šè¦åˆå§‹åŒ–</h2><p><strong>å˜é‡åœ¨ä½¿ç”¨å‰ï¼Œä¸€å®šè¦åˆå§‹åŒ–ï¼</strong><br><strong>å˜é‡åœ¨ä½¿ç”¨å‰ï¼Œä¸€å®šè¦åˆå§‹åŒ–ï¼</strong><br><strong>å˜é‡åœ¨ä½¿ç”¨å‰ï¼Œä¸€å®šè¦åˆå§‹åŒ–ï¼</strong></p><p>ä¸¾ä¸ª ğŸŒ°ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">min</span> = <span class="number">10000</span>;</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; <span class="number">5</span>; j++)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">min</span> &gt; a[i][j])</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="built_in">min</span> = a[i][j];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢æ˜¯ä¸€ä¸ªå¾ˆç®€å•çš„æ±‚ <code>a[i][*]</code> ä¸­æœ€å°å€¼çš„æ–¹æ³•ï¼Œä½†æ˜¯ <code>min</code> åœ¨ä¸€è½®å¾ªç¯å <code>æœªè¢«åˆå§‹åŒ–ä¸º0</code>ï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´åé¢çš„æ‰€æœ‰ <code>min</code> é”™è¯¯ï¼Œæ­£ç¡®çš„å†™æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="built_in">min</span> = <span class="number">10000</span>;</span><br><span class="line">  <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; <span class="number">5</span>; j++)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">min</span> &gt; a[i][j])</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="built_in">min</span> = a[i][j];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿˜æœ‰ä¸€ä¸ªå¾ˆå®¹æ˜“è¢«äººå¿½è§†çš„ç‚¹ï¼Œå†ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘æƒ³å¾—åˆ°æ•°ç»„æœ€å°çš„å€¼åŠå…¶æ‰€åœ¨çš„ä½ç½®ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> <span class="built_in">min</span>,index;</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="built_in">min</span> = a[i][<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; n; j++)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">min</span> &gt; a[i][j])</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="built_in">min</span> = a[i][j];</span><br><span class="line">      index = j + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ç§é”™è¯¯å¾ˆéšè”½ï¼Œå› ä¸ºåªæœ‰å½“ç¢°å·§  <code>a[i][0]</code> æœ€å°çš„æ—¶å€™æ‰ä¼šå‡ºé”™ï¼Œå› ä¸º <code>index</code> æ²¡è¢«åˆå§‹åŒ–ä¸º <code>0</code>ã€‚</p><p>è¿™ç§åŒæ—¶å¸¦äº†å¤šä¸ªå€¼çš„æƒ…å†µï¼Œæ‰€æœ‰çš„å€¼éƒ½è¦åˆå§‹åŒ–ï¼Œå¾ˆå®¹æ˜“æ¼æ‰ï¼Œéœ€è¦æ³¨æ„ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> <span class="built_in">min</span>,index;</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="built_in">min</span> = a[i][<span class="number">0</span>];</span><br><span class="line">  <span class="comment">//åŒæ—¶å¯¹indexè¿›è¡Œèµ‹å€¼</span></span><br><span class="line">  index = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; n; j++)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">min</span> &gt; a[i][j])</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="built_in">min</span> = a[i][j];</span><br><span class="line">      index = j + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¹¦å†™æ ¼å¼è¦è§„èŒƒ"><a class="header-anchor" href="#ä¹¦å†™æ ¼å¼è¦è§„èŒƒ">#</a>ä¹¦å†™æ ¼å¼è¦è§„èŒƒ</h2><h3 id="åˆç†ä½¿ç”¨tabç¼©è¿›"><a class="header-anchor" href="#åˆç†ä½¿ç”¨tabç¼©è¿›">#</a>åˆç†ä½¿ç”¨tabç¼©è¿›</h3><p>è™½ç„¶Cè¯­è¨€æ˜¯å†™ç»™æœºå™¨çš„è¯­è¨€ï¼Œä¸è®ºä½ å†™çš„å¤šä¹±æœºå™¨éƒ½èƒ½è¯†åˆ«ï¼Œä½†å½“ä½ ç¨‹åºå‡ºç°é”™è¯¯è¦æŸ¥é”™çš„æ—¶å€™ï¼Œè‰¯å¥½çš„ç¼©è¿›ä¹ æƒ¯å¯ä»¥å¸®ä½ å¿«é€Ÿåœ°é˜…è¯»ä»£ç ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;<span class="number">5</span>;j++)&#123;<span class="keyword">float</span> avr;</span><br><span class="line">avr=<span class="number">0</span>; </span><br><span class="line"><span class="keyword">int</span> sum=<span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">5</span>;i++)</span><br><span class="line">sum=sum+a[i][j]; </span><br><span class="line">avr=sum/<span class="number">5</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%.2f "</span>,avr);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; <span class="number">5</span>; j++)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">float</span> avr;</span><br><span class="line">  avr = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)</span><br><span class="line">    sum = sum + a[i][j];</span><br><span class="line">  avr = sum / <span class="number">5</span>;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"%.2f "</span>, avr);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åˆç†ä½¿ç”¨èŠ±æ‹¬å·"><a class="header-anchor" href="#åˆç†ä½¿ç”¨èŠ±æ‹¬å·">#</a>åˆç†ä½¿ç”¨èŠ±æ‹¬å·{}</h3><p>åœ¨Cè¯­è¨€é‡Œ <code>for</code> <code>while</code> ç­‰å¾ªç¯å¯ä»¥æ¥å•ä¸ªè¯­å¥è¾¾åˆ°å¾ªç¯çš„ä½œç”¨ï¼Œå¦‚ä¸‹æ®µä»£ç æ‰€ç¤ºï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)</span><br><span class="line">  sum = sum + a[i][j];</span><br></pre></td></tr></table></figure><p>å‡å¦‚æˆ‘ä»¬éœ€è¦åœ¨å¾ªç¯é‡Œåšäº›åˆ«çš„äº‹æƒ…ï¼Œæ¯”å¦‚æˆ‘çªç„¶è¦è®°å½• <code>i</code> çš„å€¼ï¼Œæƒ¯æ€§æ€ç»´çš„æ”¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)</span><br><span class="line">  sum = sum + a[i][j];</span><br><span class="line">  index = i;</span><br></pre></td></tr></table></figure><p>ä¹ä¸€çœ‹æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œä½†å®é™…ä¸Šè¿™ä¸ª <code>i</code> çš„å€¼å›ºå®šä¸º <code>5</code>ã€‚<br>æ‰€ä»¥ä¸€å®šè¦åˆç†ä½¿ç”¨ <code>{}</code>ï¼Œä¸è¦å› ä¸ºè¿™ç§é”™è¯¯å¹³ç™½æµªè´¹æ—¶é—´ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">  sum = sum + a[i][j];</span><br><span class="line">  index = i;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> xmu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cç¨‹åºè®¾è®¡åŸºç¡€-ç¬¬äºŒæ¬¡ä½œä¸š</title>
      <link href="/blog/2019/12/05/c-homework2/"/>
      <url>/blog/2019/12/05/c-homework2/</url>
      
        <content type="html"><![CDATA[<h2 id="ä½œä¸šè¦æ±‚"><a class="header-anchor" href="#ä½œä¸šè¦æ±‚">#</a>ä½œä¸šè¦æ±‚</h2><ul><li>æ–‡ä»¶å‘½åæ ¼å¼:     <code>å­¦å·(é¢˜ç›®).cpp</code></li><li>æ–‡ä»¶å‘½åæ ·ä¾‹:     <code>23020181154229(7).cpp</code></li><li>æ–‡ä»¶ä¸Šä¼ åœ°å€:     <a href="https://inbox.weiyun.com/5usbRaL" target="_blank" rel="noopener">https://inbox.weiyun.com/5usbRaL</a></li><li>ä½œä¸šç»“æœæŸ¥çœ‹:     <a href="http://onns.xyz/s/ctest/">http://onns.xyz/s/ctest/</a></li><li>ä½œä¸šæˆªæ­¢æ—¥æœŸ:     <code>2019-12-17 23:59:59</code></li></ul><h2 id="æ³¨æ„äº‹é¡¹"><a class="header-anchor" href="#æ³¨æ„äº‹é¡¹">#</a>æ³¨æ„äº‹é¡¹</h2><ol><li>å¯ä»¥é‡å¤æäº¤ã€‚</li><li>æ³¨æ„æ–‡ä»¶å‘½åé‡Œçš„æ‹¬å·æ˜¯è‹±æ–‡çš„æ‹¬å·ä¸æ˜¯ä¸­æ–‡çš„ã€‚</li><li>é¢˜å·æŒ‰ç…§æ–‡æ¡£ä¸­çš„é¢˜å·<strong>7-12</strong>ã€‚</li><li>æ–‡ä»¶æäº¤.cæˆ–.cppæ–‡ä»¶ï¼Œä¸è¦å‹ç¼©ï¼Œå…­é“é¢˜åˆ†åˆ«å‘é€ã€‚</li><li><strong>æµ‹è¯•ç»“æœé¡µé¢</strong>é»„è‰²ä»£è¡¨æœªé€šè¿‡æ‰€æœ‰æµ‹è¯•ï¼Œçº¢è‰²ä»£è¡¨ç¼–è¯‘æœªé€šè¿‡ï¼Œç»¿è‰²ä»£è¡¨é€šè¿‡ã€‚</li><li>æŒ‰ç…§æ–‡æ¡£çš„è¦æ±‚è¾“å…¥è¾“å‡ºï¼Œä¸è¦è‡ªå·±åŠ æç¤ºè¯­å¥ï¼Œä¸ç„¶ä¼šæŒ‰ç…§é”™è¯¯ç®—çš„ã€‚</li><li>æµ‹è¯•ç»“æœå·²ç»åŠ äº†æ—¶é—´ï¼Œå¦‚æœå‘ç°è‡ªå·±ä¸Šä¼ äº†ä¸Šé¢è¿˜æ²¡æ˜¾ç¤ºï¼Œè¡¨é¢æ–‡ä»¶å‘½åé”™è¯¯äº†ï¼Œä»”ç»†æ ¸å¯¹ä¸€ä¸‹å‘½åæ ¼å¼ã€‚</li><li><strong>æµ‹è¯•ç»“æœé¡µé¢</strong>å­¦å·ä¸‹çš„è¾“å…¥æ¡†å¯ä»¥è¾“å…¥è‡ªå·±çš„å­¦å·ç­›é€‰ï¼Œæ–¹ä¾¿æŸ¥çœ‹æ‰€æœ‰é¢˜ç›®çš„é€šè¿‡æƒ…å†µã€‚</li><li>åˆ¤æ–­æ—¥æœŸéæ³•ä¸ç”¨è€ƒè™‘é—°å¹´ï¼Œåªéœ€è€ƒè™‘1æœˆå¤©æ•°ä¸èƒ½å¤§äº31å¤©ï¼Œ2æœˆä¸èƒ½å¤§äº29å¤©â€¦æœˆä»½ä¸èƒ½å¤§äº12è¿™ç§ã€‚</li><li>å»ºè®®å¤§å®¶å†™å®Œä¸€é“é¢˜ä¹‹åå°±ä¸Šä¼ ï¼Œè¿™æ ·å°±çŸ¥é“å¦‚ä½•é€šè¿‡æµ‹è¯•ç³»ç»Ÿçš„æµ‹è¯•ï¼Œå› ä¸ºè¦æŒ‰ç…§æ–‡æ¡£çš„è¦æ±‚è¾“å…¥è¾“å‡ºã€‚</li><li>å¤§å®¶äº¤å®Œä¹‹åæœ€åæ£€æŸ¥ä¸€ä¸‹è‡ªå·±æ˜¯ä¸æ˜¯12é“éƒ½æäº¤æ­£ç¡®äº†ï¼Œæ¯”å¦‚é‚£ç§å­¦å·å°‘æ‰“ä¸€ä½çš„åŒå­¦ï¼Œåˆ°æ—¶å€™å¯èƒ½è¦ç®—ä½ æ²¡æäº¤äº†ã€‚</li></ol><a id="more"></a><h2 id="ä½œä¸šå†…å®¹"><a class="header-anchor" href="#ä½œä¸šå†…å®¹">#</a>ä½œä¸šå†…å®¹</h2><h3 id="é¢˜ç›®7"><a class="header-anchor" href="#é¢˜ç›®7">#</a>é¢˜ç›®7</h3><p>è¾“å…¥ä¸€ç»´æ•´å‹æ•°ç»„a(é•¿åº¦ä¸º10)çš„å„å…ƒç´ å€¼ï¼Œæ±‚æ•°ç»„ä¸­æœ€å°å…ƒç´ çš„å€¼åŠå…¶åœ¨æ•°ç»„ä¸­çš„ä½ç½®ã€‚</p><ul><li>æ¯è¡Œè¾“å…¥ã€è¾“å‡ºçš„æ•°å­—é—´ç”¨ç©ºæ ¼ï¼ˆâ€œ â€ï¼‰åˆ†éš”ã€‚</li><li>å¦‚æœæœ€å°çš„å…ƒç´ æœ‰å¤šä¸ªï¼Œè¾“å‡ºç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ã€‚</li></ul><p>Test case:<br>Input:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">8 9 7 1 6 5 3 4 2 10</span><br></pre></td></tr></table></figure><p>Output:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 4</span><br></pre></td></tr></table></figure><h3 id="é¢˜ç›®8"><a class="header-anchor" href="#é¢˜ç›®8">#</a>é¢˜ç›®8</h3><p>è¾“å…¥ä¸€ç»´å®å‹æ•°ç»„a(é•¿åº¦ä¸º10)çš„å„å…ƒç´ å€¼ï¼Œæ±‚æ•°ç»„ä¸­æ‰€æœ‰å…ƒç´ ä¹‹å’Œï¼ˆä¿ç•™ä¸¤ä½å°æ•°ï¼‰åŠå…¶å¹³å‡å€¼ï¼ˆä¿ç•™ä¸¤ä½å°æ•°ï¼‰ã€‚</p><ul><li>æ¯è¡Œè¾“å…¥ã€è¾“å‡ºçš„æ•°å­—é—´ç”¨ç©ºæ ¼ï¼ˆâ€œ â€ï¼‰åˆ†éš”ã€‚</li></ul><p>Test case:<br>Input:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 2 3 4 5 6 7 8 9 10</span><br></pre></td></tr></table></figure><p>Output:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">55.00 5.50</span><br></pre></td></tr></table></figure><h3 id="é¢˜ç›®9"><a class="header-anchor" href="#é¢˜ç›®9">#</a>é¢˜ç›®9</h3><p>ç¼–å†™ç¨‹åºè¯»å–ä¸€ä¸ª5X5çš„æ•´æ•°æ•°ç»„ï¼Œç„¶åæ˜¾ç¤ºå‡ºæ¯è¡Œçš„å’Œä¸æ¯åˆ—çš„å’Œã€‚è¿›ä¸€æ­¥åœ°ï¼Œå‡è®¾è¾“å…¥æ¯ä¸ªå­¦ç”Ÿ5é—¨æµ‹éªŒçš„æˆç»©ï¼Œæœ‰5ä¸ªå­¦ç”Ÿã€‚ç„¶åè®¡ç®—æ¯ä¸ªå­¦ç”Ÿçš„æ€»åˆ†å’Œå¹³å‡åˆ†ï¼Œä»¥åŠæ¯é—¨æµ‹éªŒçš„å¹³å‡åˆ†ã€æœ€é«˜åˆ†å’Œæœ€ä½åˆ†ã€‚</p><ul><li>è¾“å…¥åˆ†ä¸ºäº”è¡Œäº”åˆ—ï¼Œæ¯è¡Œä»£è¡¨ä¸€é—¨æˆç»©ï¼Œæ¯åˆ—ä»£è¡¨ä¸€åå­¦ç”Ÿã€‚</li><li>è¾“å‡ºåˆ†ä¸ºäº”è¡Œäº”åˆ—ï¼Œç¬¬ä¸€è¡Œä¸ºæ¯ä¸ªå­¦ç”Ÿçš„æ€»åˆ†ï¼Œç¬¬äºŒè¡Œä¸ºæ¯ä¸ªå­¦ç”Ÿçš„å¹³å‡åˆ†ï¼ˆä¿ç•™ä¸¤ä½å°æ•°ï¼‰ï¼Œç¬¬ä¸‰è¡Œä¸ºæ¯é—¨æµ‹éªŒçš„å¹³å‡åˆ†ï¼ˆä¿ç•™ä¸¤ä½å°æ•°ï¼‰ï¼Œç¬¬å››è¡Œä¸ºæ¯é—¨æµ‹éªŒçš„æœ€é«˜åˆ†ï¼Œç¬¬äº”è¡Œä¸ºæ¯é—¨æµ‹éªŒçš„æœ€ä½åˆ†ã€‚</li><li>æ¯è¡Œè¾“å…¥ã€è¾“å‡ºçš„æ•°å­—é—´ç”¨ç©ºæ ¼ï¼ˆâ€œ â€ï¼‰åˆ†éš”ã€‚</li><li><del>æ¯è¡Œå’Œæ¯è¡Œä¹‹é—´ä¸è¦æœ‰å¤šä½™çš„ç©ºæ ¼ã€‚ï¼ˆè€ƒè¯•çš„æ—¶å€™ä¸ºäººå·¥åˆ¤å·ï¼Œä¸ä¼šè¿‡åˆ†è‹›æ±‚è¿™äº›ç»†èŠ‚ï¼Œä½†æ˜¯å¸Œæœ›å¤§å®¶å¹³æ—¶å¯ä»¥æ³¨æ„åˆ°è¿™äº›ç»†èŠ‚ï¼Œæ¯•ç«Ÿç±»æ¯”ä¸‹æ¥ï¼Œç®—æ•°å­—å“ªæ€•å››èˆäº”å…¥å·®äº†ä¸€ç‚¹ç‚¹ä¹Ÿä¼šæ˜¯é”™è¯¯çš„ã€‚ï¼‰</del> ä¸è¦æ±‚å¤§å®¶è¿™ä¸€ç‚¹äº†ï¼Œå¯ä»¥å¿½ç•¥ã€‚</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸€ä¸ªé”™è¯¯çš„æ ·ä¾‹</span></span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d "</span>, b[i]);</span><br><span class="line"></span><br><span class="line">ä¼šè¾“å‡º:</span><br><span class="line"><span class="number">15</span>[ç©ºæ ¼]<span class="number">15</span>[ç©ºæ ¼]<span class="number">15</span>[ç©ºæ ¼]<span class="number">15</span>[ç©ºæ ¼]<span class="number">15</span>[ç©ºæ ¼]</span><br><span class="line">ç»“å°¾å¤šè¾“å‡ºä¸€ä¸ªç©ºæ ¼</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸€ä¸ªæ­£ç¡®çš„æ ·ä¾‹</span></span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++)</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d "</span>, b[i]);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d"</span>, b[i]);</span><br><span class="line"></span><br><span class="line">ä¼šè¾“å‡º:</span><br><span class="line"><span class="number">15</span>[ç©ºæ ¼]<span class="number">15</span>[ç©ºæ ¼]<span class="number">15</span>[ç©ºæ ¼]<span class="number">15</span>[ç©ºæ ¼]<span class="number">15</span></span><br><span class="line">ç†æƒ³ç»“æœ</span><br></pre></td></tr></table></figure><p>Test case:<br>Input:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1 2 3 4 5</span><br><span class="line">2 3 4 5 1</span><br><span class="line">3 4 5 1 2</span><br><span class="line">4 5 1 2 3</span><br><span class="line">5 1 2 3 4</span><br></pre></td></tr></table></figure><p>Output:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">15 15 15 15 15</span><br><span class="line">3.00 3.00 3.00 3.00 3.00</span><br><span class="line">3.00 3.00 3.00 3.00 3.00</span><br><span class="line">5 5 5 5 5</span><br><span class="line">1 1 1 1 1</span><br></pre></td></tr></table></figure><h3 id="é¢˜ç›®10"><a class="header-anchor" href="#é¢˜ç›®10">#</a>é¢˜ç›®10</h3><p>è¾“å…¥ä¸€ä¸ªç”±å¤§å†™å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼ˆé•¿åº¦å°äº100ï¼‰ï¼Œæ±‚å­—ç¬¦ä¸²ä¸­åŒ…å«äº†å‡ ä¸ªä¸åŒçš„å­—æ¯ã€‚</p><p>Test case:<br>Input:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AABBBCD</span><br></pre></td></tr></table></figure><p>Output:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4</span><br></pre></td></tr></table></figure><h3 id="é¢˜ç›®11"><a class="header-anchor" href="#é¢˜ç›®11">#</a>é¢˜ç›®11</h3><p>è¾“å…¥ä¸€å­—ç¬¦ä¸²ï¼ˆé•¿åº¦å°äº100ï¼‰å’Œä¸€ä¸ªå­—ç¬¦ï¼Œç»Ÿè®¡å‡ºå­—ç¬¦åœ¨å­—ç¬¦ä¸²ä¸­å‡ºç°çš„æ¬¡æ•°ã€‚</p><p>Test case:<br>Input:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">AABBBCD</span><br><span class="line">A</span><br></pre></td></tr></table></figure><p>Output:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2</span><br></pre></td></tr></table></figure><h3 id="é¢˜ç›®12"><a class="header-anchor" href="#é¢˜ç›®12">#</a>é¢˜ç›®12</h3><p>ä¸è¦è°ƒç”¨strcpyå‡½æ•°ï¼ŒæŠŠå­—ç¬¦æ•°ç»„str2ä¸­çš„å­—ç¬¦ä¸²ï¼ˆé•¿åº¦å°äº100ï¼‰å¤åˆ¶åˆ°å­—ç¬¦æ•°ç»„str1ä¸­ã€‚</p><p>Test case:<br>Input:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ABCDEFG</span><br></pre></td></tr></table></figure><p>Output:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ABCDEFG</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> xmu </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cè¯­è¨€ä¸­floatçš„ç²¾åº¦é—®é¢˜</title>
      <link href="/blog/2019/11/06/float-in-c/"/>
      <url>/blog/2019/11/06/float-in-c/</url>
      
        <content type="html"><![CDATA[<h2 id="é—®é¢˜"><a class="header-anchor" href="#é—®é¢˜">#</a>é—®é¢˜</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">float</span> a = <span class="number">123456789</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%f"</span>, a);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç çš„è¾“å‡ºç»“æœä¸ºï¼š<code>123456792.000000</code>ï¼Œä¸ºä»€ä¹ˆï¼Ÿ</p><a id="more"></a><h2 id="floatå­˜å‚¨æ–¹æ³•"><a class="header-anchor" href="#floatå­˜å‚¨æ–¹æ³•">#</a>floatå­˜å‚¨æ–¹æ³•</h2><p>è¯¦ç»†å†…å®¹å¯ä»¥å‚è€ƒ<a href="https://blog.csdn.net/qq_35057840/article/details/52430651" target="_blank" rel="noopener">è¿™ç¯‡åšå®¢</a>ï¼Œfloatå‹çš„æ•°æ®å ç”¨32ä½çš„å­˜å‚¨ç©ºé—´ï¼Œå…¶ä¸­ï¼š</p><ul><li>1ä½ç¬¦å·ä½</li><li>8ä½æŒ‡æ•°ä½</li><li>23ä½å°¾æ•°ä½</li></ul><p>floatå‹æ•°æ®çš„å­˜å‚¨æ–¹æ³•ä¸ºç§‘å­¦è®¡æ•°æ³•ï¼Œå³ <code>110</code> å¯ä»¥å†™æˆ <code>+ 1.1 * 10^2</code> çš„å½¢å¼ï¼Œå³ï¼š</p><ul><li><code>+</code> ä¸ºç¬¦å·ä½ <code>æ­£</code></li><li><code>2</code> ä¸ºæŒ‡æ•°ä½ <code>2æ¬¡å¹‚</code></li><li><code>1</code> ä¸ºå°¾æ•°ä½ <code>.1</code> è€Œä¸æ˜¯ <code>1.1</code></li></ul><p>è¿™é‡Œæ³¨æ„ä¸€ä¸‹ï¼Œå› ä¸ºç§‘å­¦è®¡æ•°æ³•æ˜¯ <code>ä¸€ä¸ªå¤§äº1å°äºç­‰äº9</code> çš„å°æ•°(ç›¸å¯¹äºåè¿›åˆ¶)ï¼ŒäºŒè¿›åˆ¶çš„ç§‘å­¦è®¡æ•°æ³•çš„å°æ•°çš„æ•´æ•°éƒ¨åˆ†ä¸€å®šæ˜¯ <code>1</code>ï¼Œæ•…çœç•¥æ•´æ•°éƒ¨åˆ†ï¼Œæ•…å®é™…ä¸Šå°¾æ•°çš„æœ‰æ•ˆä½æ•°æ˜¯ <code>24</code> ä½ã€‚</p><h2 id="æ•°å­—åˆ†æ"><a class="header-anchor" href="#æ•°å­—åˆ†æ">#</a>æ•°å­—åˆ†æ</h2><p>ä½¿ç”¨<a href="https://tool.lu/hexconvert/" target="_blank" rel="noopener">è¿›åˆ¶è½¬æ¢å·¥å…·</a>å¾—åˆ° <code>123456789</code> çš„äºŒè¿›åˆ¶ä¸º</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">111010110111100110100010101</span><br></pre></td></tr></table></figure><p>ä¸€å…± <code>27</code> ä½ï¼Œå‰é¢è¯´è¿‡floatçš„æœ‰æ•ˆä½æ•°ä¸º <code>23+1</code> ä½ï¼Œç¬¬ <code>24</code> ä½è¦æ ¹æ® <code>å°±è¿‘åŸåˆ™</code><sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup> ç¡®å®šæ˜¯ <code>0</code> è¿˜æ˜¯ <code>1</code>ï¼Œå…¶ä½™éƒ¨ä½è¡¥ <code>0</code>ï¼Œå³ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">111010110111100110100011000</span><br></pre></td></tr></table></figure><p>å¾—åˆ°ç»“æœä¸º <code>123456792</code>ã€‚</p><h2 id="ç¨‹åºéªŒè¯"><a class="header-anchor" href="#ç¨‹åºéªŒè¯">#</a>ç¨‹åºéªŒè¯</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">numæ˜¯è¦å±•ç¤ºçš„floatæ•°,binæ˜¯ä¿å­˜æ‰€æœ‰äºŒè¿›åˆ¶ä½çš„æ•°ç»„</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">getFloatBin</span><span class="params">(<span class="keyword">float</span> num, <span class="keyword">char</span> bin[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> t = <span class="number">1</span>;              <span class="comment">//ç”¨æ¥æŒ‰ä½ä¸æ“ä½œ</span></span><br><span class="line">    <span class="keyword">int</span> *f = (<span class="keyword">int</span> *)(&amp;num); <span class="comment">//å°†floatçš„è§£é‡Šæˆintï¼Œå³floatçš„åœ°å€è½¬æˆint*</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">32</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//ä»æœ€é«˜ä½å¼€å§‹æŒ‰ä½ä¸ï¼Œå¦‚æœä¸º1ï¼Œåˆ™bin[i]=1ï¼Œå¦‚æœä¸º0ï¼Œåˆ™bin[i]=0</span></span><br><span class="line">        <span class="comment">//è¿™é‡Œæ²¡æœ‰å°†binå­˜æˆå­—ç¬¦ï¼Œè€Œæ˜¯æ•°å­—1 0</span></span><br><span class="line">        bin[i] = (*f) &amp; (t &lt;&lt; <span class="number">31</span> - i) ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">float</span> test = <span class="number">100</span>;</span><br><span class="line">    <span class="keyword">char</span> c[<span class="number">32</span>];</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"æµ‹è¯•floatæ•°ä¸º:%f\n"</span>, test);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"äºŒè¿›åˆ¶è¡¨ç¤ºä¸º:"</span>);</span><br><span class="line">    getFloatBin(test, c);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">32</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d"</span>, c[i]);</span><br><span class="line">        <span class="keyword">if</span> (i == <span class="number">0</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">", "</span>);</span><br><span class="line">        <span class="keyword">if</span> (i == <span class="number">8</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">", "</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šä»£ç æ‘˜è‡ª<a href="https://blog.csdn.net/wayway0554/article/details/84111889" target="_blank" rel="noopener">åœ¨Cè¯­è¨€ä¸­å°†float(æµ®ç‚¹æ•°)çš„äºŒè¿›åˆ¶è¡¨ç¤ºæ‰“å°å‡ºæ¥</a>ï¼Œç»“æœä¸ºï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æµ‹è¯•<span class="built_in">float</span>æ•°ä¸º:123456792.000000</span><br><span class="line">äºŒè¿›åˆ¶è¡¨ç¤ºä¸º:0, 10011001, 11010110111100110100011</span><br></pre></td></tr></table></figure><p>ä¸ç†è®ºç»“æœæ¯”å¯¹ä¸€è‡´ã€‚</p><h2 id="ç»“è¯­"><a class="header-anchor" href="#ç»“è¯­">#</a>ç»“è¯­</h2><p>æ„Ÿè°¢èˆå‹å’Œè€è¾£é¸¡ä»¬çš„ç¾¤ç­–ç¾¤åŠ›ï¼æœ€ç»ˆåˆæ­¥è§£å†³äº†é—®é¢˜ï½</p><h2 id="å‚è€ƒæ–‡æ¡£"><a class="header-anchor" href="#å‚è€ƒæ–‡æ¡£">#</a>å‚è€ƒæ–‡æ¡£</h2><ul><li><a href="https://blog.csdn.net/leho666/article/details/89204964" target="_blank" rel="noopener">Cè¯­è¨€ä¸­ï¼Œfloatåœ¨å†…å­˜ä¸­çš„å‚¨å­˜æ–¹å¼</a></li><li><a href="https://blog.csdn.net/qq_35057840/article/details/52430651" target="_blank" rel="noopener">Cè¯­è¨€æµ®ç‚¹æ•°å­˜å‚¨æ–¹å¼</a></li><li><a href="https://blog.csdn.net/wayway0554/article/details/84111889" target="_blank" rel="noopener">åœ¨Cè¯­è¨€ä¸­å°†float(æµ®ç‚¹æ•°)çš„äºŒè¿›åˆ¶è¡¨ç¤ºæ‰“å°å‡ºæ¥</a></li></ul><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>â€å°±è¿‘åŸåˆ™â€œæ— æ³•æ‰¾åˆ°ç›¸å…³æ–‡æ¡£è¯´æ˜ï¼Œåªèƒ½æ ¹æ®æµ‹è¯•æ•°æ®è¿›è¡Œæ¨æµ‹ï¼Œå‡†ç¡®æ€§æœ‰å¾…è€ƒç©¶ã€‚ <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> c </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é˜¿é‡Œäº‘åŠ¨æ€ä¿®æ”¹åŸŸåè§£æ</title>
      <link href="/blog/2019/10/23/aliyun-ddns/"/>
      <url>/blog/2019/10/23/aliyun-ddns/</url>
      
        <content type="html"><![CDATA[<h2 id="20211007-æ›´æ–°"><a class="header-anchor" href="#20211007-æ›´æ–°">#</a>20211007 æ›´æ–°</h2><p>python2 ç‰ˆæœ¬å¤ªå¤è€äº†ï¼Œåˆå¼„äº†ä¸€ä¸ª golang ç‰ˆæœ¬çš„ï¼Œç§»æ¤æ€§æ›´å¼ºï¼š<a href="https://github.com/onns/ddns" target="_blank" rel="noopener">https://github.com/onns/ddns</a></p><p>ä¸»è¦ç”¨åˆ°ä¸¤ä¸ª apiï¼š</p><ul><li><a href="https://next.api.aliyun.com/api/Alidns/2015-01-09/UpdateDomainRecord?params=%7B%7D" target="_blank" rel="noopener">https://next.api.aliyun.com/api/Alidns/2015-01-09/UpdateDomainRecord?params={}</a></li><li><a href="https://next.api.aliyun.com/api/Alidns/2015-01-09/DescribeDomainRecords?params=%7B%7D" target="_blank" rel="noopener">https://next.api.aliyun.com/api/Alidns/2015-01-09/DescribeDomainRecords?params={}</a></li></ul><h2 id="20210215-æ›´æ–°"><a class="header-anchor" href="#20210215-æ›´æ–°">#</a>20210215 æ›´æ–°</h2><p>å¤§æ¦‚å†™è¿™ä¸ªè„šæœ¬çš„äººä¹Ÿä¸çŸ¥é“åŸæ¥ä¼šæœ‰ä¸€ä¸ªä¸ªäººç”¨æˆ·çš„åŸŸåè§£æè®°å½•ä¼šæœ‰å‡ åä¸ªï¼Œå¯¼è‡´ä»£ç æ‰¾ä¸åˆ°è§£æè®°å½•â€¦<br>ä¿®æ”¹äº†è„šæœ¬ï¼Œä½¿å¾—æ¯æ¬¡è·å–çš„è®°å½•æ•°æ›´å¤šï¼Œå¦‚æœè¿˜æ˜¯æ‰¾ä¸åˆ°ï¼Œè‡ªå·±å»çœ‹ä¸€ä¸‹ç¿»é¡µçš„æ–¹æ³•å§ï¼Œé˜¿é‡Œäº‘çš„æ–‡æ¡£å‹æ ¹å„¿æ²¡æœ‰ï¼Œæˆ‘ä¹Ÿæ˜¯é†‰äº†ã€‚</p><h2 id="å‰è¨€"><a class="header-anchor" href="#å‰è¨€">#</a>å‰è¨€</h2><p>å®¿èˆæ”¾ç€ä¸€å°æ¢ä¸‹æ¥çš„æ—§æ‰‹æœº Mi5ï¼Œå¹³æ—¶é™¤äº†åŒå¼€å¥½åƒå°±æ²¡ç”¨è¿‡ï¼ŒæŠ±ç€é—²ç½®ç‰©å“å†åˆ©ç”¨çš„åŸåˆ™ï¼Œåœ¨ä¸Šé¢è£…äº†ä¸ª centos ç³»ç»Ÿï¼Œä½†ç”±äºå®¿èˆçš„å®½å¸¦æ˜¯åŠ¨æ€ ip çš„ï¼Œå¦‚æœæ¯æ¬¡éƒ½è¦æ‰‹åŠ¨é‡æ–°è§£æåŸŸåï¼Œé‚£ä¹Ÿå¤ªéº»çƒ¦äº†ã€‚äºæ˜¯æƒ³è®¾å®šå®šæ—¶ä»»åŠ¡è‡ªåŠ¨è§£æï¼ŒæŠ˜è…¾ä¸€ç•ªï¼Œè®°å½•ä¹‹ã€‚</p><a id="more"></a><h2 id="å®‰è£…ç¯å¢ƒ"><a class="header-anchor" href="#å®‰è£…ç¯å¢ƒ">#</a>å®‰è£…ç¯å¢ƒ</h2><h3 id="pip"><a class="header-anchor" href="#pip">#</a>pip</h3><p>å› ä¸ºæ˜¯æœ€å°åŒ–å®‰è£…æ‰€ä»¥ pip éƒ½æ²¡è£…â€¦<br>ç›´æ¥<a href="https://pip.pypa.io/en/stable/installing/" target="_blank" rel="noopener">å®˜ç½‘</a>å®‰è£…å³å¯</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py</span><br><span class="line">python get-pip.py</span><br></pre></td></tr></table></figure><h3 id="gcc"><a class="header-anchor" href="#gcc">#</a>gcc</h3><p>æ˜¯çš„ gcc ä¹Ÿæ²¡æœ‰ï¼Œè¦è‡ªå·±è£…ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install gcc -y</span><br></pre></td></tr></table></figure><h3 id="aliyun-sdk"><a class="header-anchor" href="#aliyun-sdk">#</a>aliyun-sdk</h3><p>é˜¿é‡Œäº‘å·²ç»æŠŠæ¡†æ¶å†™å¥½äº†ï¼Œæˆ‘ä»¬ç›´æ¥è°ƒç”¨å°±è¡Œï¼Œçœå»äº†è‡ªå·±é€ è½®å­çš„éº»çƒ¦ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install aliyun-python-sdk-alidns</span><br></pre></td></tr></table></figure><h2 id="ä»£ç "><a class="header-anchor" href="#ä»£ç ">#</a>ä»£ç </h2><p>é˜¿é‡Œäº‘å·²ç»æŠŠæ¡†æ¶å†™å¥½äº†ï¼Œæˆ‘ä»¬ç›´æ¥è°ƒç”¨å°±è¡Œï¼Œçœå»äº†è‡ªå·±é€ è½®å­çš„éº»çƒ¦ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python2</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> urllib2</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> aliyunsdkcore <span class="keyword">import</span> client</span><br><span class="line"><span class="keyword">from</span> aliyunsdkalidns.request.v20150109 <span class="keyword">import</span> DescribeDomainRecordsRequest</span><br><span class="line"><span class="keyword">from</span> aliyunsdkalidns.request.v20150109 <span class="keyword">import</span> DescribeDomainRecordInfoRequest</span><br><span class="line"><span class="keyword">from</span> aliyunsdkalidns.request.v20150109 <span class="keyword">import</span> UpdateDomainRecordRequest</span><br><span class="line"></span><br><span class="line"><span class="comment"># é˜¿é‡Œäº‘ Access Key ID</span></span><br><span class="line">access_key_id = <span class="string">""</span></span><br><span class="line"><span class="comment"># é˜¿é‡Œäº‘ Access Key Secret</span></span><br><span class="line">access_key_secret = <span class="string">""</span></span><br><span class="line"><span class="comment"># é˜¿é‡Œäº‘ ä¸€çº§åŸŸå</span></span><br><span class="line">rc_domain = <span class="string">'onns.xyz'</span></span><br><span class="line"><span class="comment"># é˜¿é‡Œäº‘ äºŒçº§åŸŸåå‰ç¼€</span></span><br><span class="line">rc_subdomain = <span class="string">'xm'</span></span><br><span class="line"><span class="comment"># è¿”å›å†…å®¹æ ¼å¼</span></span><br><span class="line">rc_format = <span class="string">'json'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">check_records</span><span class="params">(dns_domain)</span>:</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">è·å–åŸŸåçš„è§£æä¿¡æ¯</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line">clt = client.AcsClient(access_key_id, access_key_secret, <span class="string">'cn-hangzhou'</span>)</span><br><span class="line">request = DescribeDomainRecordsRequest.DescribeDomainRecordsRequest()</span><br><span class="line">request.set_DomainName(dns_domain)</span><br><span class="line">request.set_accept_format(rc_format)</span><br><span class="line">request.set_PageSize(<span class="number">100</span>)</span><br><span class="line">result = clt.do_action(request)</span><br><span class="line">result = json.JSONDecoder().decode(result)</span><br><span class="line"><span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_old_ip</span><span class="params">(record_id)</span>:</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">æ ¹æ®åŸŸåè§£æè®°å½•IDæŸ¥è¯¢ä¸Šä¸€æ¬¡çš„IPè®°å½•</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line">clt = client.AcsClient(access_key_id, access_key_secret, <span class="string">'cn-hangzhou'</span>)</span><br><span class="line">request = DescribeDomainRecordInfoRequest.DescribeDomainRecordInfoRequest()</span><br><span class="line">request.set_RecordId(record_id)</span><br><span class="line">request.set_accept_format(rc_format)</span><br><span class="line">result = clt.do_action(request)</span><br><span class="line">result = json.JSONDecoder().decode(result)</span><br><span class="line">result = result[<span class="string">'Value'</span>]</span><br><span class="line"><span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">update_dns</span><span class="params">(dns_rr, dns_type, dns_value, dns_record_id, dns_ttl, dns_format)</span>:</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">æ›´æ–°é˜¿é‡Œäº‘åŸŸåè§£æè®°å½•ä¿¡æ¯</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line">clt = client.AcsClient(access_key_id, access_key_secret, <span class="string">'cn-hangzhou'</span>)</span><br><span class="line">request = UpdateDomainRecordRequest.UpdateDomainRecordRequest()</span><br><span class="line">request.set_RR(dns_rr)</span><br><span class="line">request.set_Type(dns_type)</span><br><span class="line">request.set_Value(dns_value)</span><br><span class="line">request.set_RecordId(dns_record_id)</span><br><span class="line">request.set_TTL(dns_ttl)</span><br><span class="line">request.set_accept_format(dns_format)</span><br><span class="line">result = clt.do_action(request)</span><br><span class="line"><span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_my_publick_ip</span><span class="params">()</span>:</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">è·å–å½“å‰ä¸»æœºçš„å¤–ç½‘IP</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">u = urllib2.urlopen(<span class="string">'http://members.3322.org/dyndns/getip'</span>)</span><br><span class="line"><span class="keyword">return</span> u.read().strip(<span class="string">'\n'</span>)</span><br><span class="line"><span class="keyword">except</span> HTTPError <span class="keyword">as</span> e:</span><br><span class="line">print(<span class="string">'getMyIp:'</span>, e)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">write_to_file</span><span class="params">(new_ip)</span>:</span></span><br><span class="line">time_now = datetime.now().strftime(<span class="string">'%Y-%m-%d %H:%M:%S'</span>)</span><br><span class="line">write_log = open(<span class="string">'aliyun_ddns.txt'</span>, <span class="string">'a'</span>)</span><br><span class="line">write_log.write(time_now + <span class="string">' '</span> + str(new_ip) + <span class="string">'\n'</span>)</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line"><span class="comment"># ä¹‹å‰çš„è§£æè®°å½•</span></span><br><span class="line">old_ip = <span class="string">""</span></span><br><span class="line">record_id = <span class="string">""</span></span><br><span class="line">dns_records = check_records(rc_domain)</span><br><span class="line"><span class="keyword">for</span> record <span class="keyword">in</span> dns_records[<span class="string">"DomainRecords"</span>][<span class="string">"Record"</span>]:</span><br><span class="line"><span class="keyword">if</span> record[<span class="string">"Type"</span>] == <span class="string">'A'</span> <span class="keyword">and</span> record[<span class="string">"RR"</span>] == rc_subdomain:</span><br><span class="line">record_id = record[<span class="string">"RecordId"</span>]</span><br><span class="line"><span class="keyword">print</span> <span class="string">"%s.%s recordID is %s"</span> % (rc_subdomain, rc_domain, record_id)</span><br><span class="line"><span class="keyword">if</span> record_id != <span class="string">""</span>:</span><br><span class="line">old_ip = get_old_ip(record_id)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> record_id == <span class="string">""</span>:</span><br><span class="line">exit(<span class="string">"Record ID error!"</span>)</span><br><span class="line">old_ip = get_old_ip(record_id)</span><br><span class="line"><span class="comment"># è·å–ä¸»æœºå½“å‰çš„IP</span></span><br><span class="line">now_ip = get_my_publick_ip()</span><br><span class="line"><span class="keyword">print</span> <span class="string">"now host ip is %s, dns ip is %s"</span> % (now_ip, old_ip)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> old_ip == now_ip:</span><br><span class="line"><span class="keyword">print</span> <span class="string">"The specified value of parameter Value is the same as old"</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">rc_rr = rc_subdomain        <span class="comment"># è§£æè®°å½•</span></span><br><span class="line">rc_type = <span class="string">'a'</span>               <span class="comment"># è®°å½•ç±»å‹, DDNSå¡«å†™Aè®°å½•</span></span><br><span class="line">rc_value = now_ip           <span class="comment"># æ–°çš„è§£æè®°å½•å€¼</span></span><br><span class="line">rc_record_id = record_id    <span class="comment"># è®°å½•ID</span></span><br><span class="line">rc_ttl = <span class="string">'600'</span>              <span class="comment"># è§£æè®°å½•æœ‰æ•ˆç”Ÿå­˜æ—¶é—´TTL,å•ä½:ç§’</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> update_dns(rc_rr, rc_type, rc_value, rc_record_id, rc_ttl, rc_format)</span><br><span class="line"></span><br><span class="line">write_to_file(now_ip)</span><br></pre></td></tr></table></figure><p>ä»£ç æ‹·è´è‡ªï¼š<a href="https://www.vincents.cn/2017/03/27/aliyun-ddns/" target="_blank" rel="noopener">é˜¿é‡Œäº‘ DNS åŠ¨æ€è§£æ</a>ï¼Œç•¥ä½œä¿®æ”¹ã€‚<br>è¿™é‡Œåªéœ€è¦æ”¹å‰å‡ è¡Œï¼ˆ15-22 è¡Œï¼‰çš„å€¼å³å¯ï¼Œé˜¿é‡Œäº‘çš„<code>accesskey</code>ä»<a href="https://usercenter.console.aliyun.com/#/manage/ak" target="_blank" rel="noopener">è¿™é‡Œ</a>è·å–ã€‚</p><h2 id="æ‰§è¡Œ"><a class="header-anchor" href="#æ‰§è¡Œ">#</a>æ‰§è¡Œ</h2><p>å¯ä»¥æ‰‹åŠ¨å…ˆæ‰§è¡Œä¸€ä¸‹å‘½ä»¤çœ‹ä¸‹ç»“æœã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ python ddns.py</span><br><span class="line"></span><br><span class="line">xm.onns.xyz recordID is XXXXXXXXXXXXXXX</span><br><span class="line">now host ip is XXXXXXXXXXXXXXX, dns ip is XXXXXXXXXXXXXXX</span><br><span class="line">&#123;<span class="string">"RecordId"</span>:<span class="string">"XXXXXXXXXXXXXXX"</span>,<span class="string">"RequestId"</span>:<span class="string">"XXXXXXXXXXXXXXX"</span>&#125;</span><br></pre></td></tr></table></figure><p>æ¥ç€è®¾ç½® crontab å®šæ—¶ä»»åŠ¡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ å¦‚ä¸‹ä¸€æ¡è®°å½•ï¼Œä¸ºäº†é¿å…é”™è¯¯ï¼Œå†™ç»å¯¹åœ°å€ã€‚</span></span><br><span class="line">*/10 * * * * /usr/bin/python /home/android/ddns.py /dev/null 1&gt;/dev/null</span><br></pre></td></tr></table></figure><p>å¾ˆå°´å°¬çš„æ˜¯ï¼Œä¸ä»…ä»…æ˜¯æœ€å°åŒ–å®‰è£…ï¼Œè¿ä¸€äº› service çš„æœåŠ¡éƒ½æ²¡æœ‰å†™å…¥ï¼Œæ‰€ä»¥è¦æ‰‹åŠ¨æ‰“å¼€â€¦<code>crontab</code>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo /usr/sbin/crond -s</span><br></pre></td></tr></table></figure><p>ç„¶åå°±å¯ä»¥æ„‰å¿«çš„ä½¿ï¼ˆwanï¼‰ç”¨ï¼ˆshuaï¼‰äº†ã€‚</p><h2 id="å‚è€ƒæ–‡æ¡£"><a class="header-anchor" href="#å‚è€ƒæ–‡æ¡£">#</a>å‚è€ƒæ–‡æ¡£</h2><ul><li><a href="https://www.vincents.cn/2017/03/27/aliyun-ddns/" target="_blank" rel="noopener">é˜¿é‡Œäº‘ DNS åŠ¨æ€è§£æ</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ddns </tag>
            
            <tag> aliyun </tag>
            
            <tag> python </tag>
            
            <tag> linux </tag>
            
            <tag> centos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MacOSä¸‹è¶…å¥½ç”¨çš„è½¯ä»¶</title>
      <link href="/blog/2019/09/08/software-for-mac/"/>
      <url>/blog/2019/09/08/software-for-mac/</url>
      
        <content type="html"><![CDATA[<h2 id="æ—¥å¸¸"><a class="header-anchor" href="#æ—¥å¸¸">#</a>æ—¥å¸¸</h2><ul><li><a href="https://justgetflux.com/" target="_blank" rel="noopener">f.lux</a><br>ä¸€ä¸ªè‡ªåŠ¨è°ƒèŠ‚å±å¹•æ˜¾ç¤ºçš„å·¥å…·ï¼Œå¯ä»¥æ ¹æ®æ—¥å‡æ—¥è½æ—¶é—´è°ƒèŠ‚æŠ¤çœ¼æ¨¡å¼ã€‚</li></ul><h2 id="æ•ˆç‡"><a class="header-anchor" href="#æ•ˆç‡">#</a>æ•ˆç‡</h2><ul><li>OmniGraffle</li></ul><h2 id="å¨±ä¹"><a class="header-anchor" href="#å¨±ä¹">#</a>å¨±ä¹</h2><ul><li>VLC</li></ul>]]></content>
      
      
      <categories>
          
          <category> software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> macos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Teamviewerå•†ç”¨è§£å†³æ–¹æ¡ˆ</title>
      <link href="/blog/2019/08/07/solution-for-teamviewer-commercial-use/"/>
      <url>/blog/2019/08/07/solution-for-teamviewer-commercial-use/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a class="header-anchor" href="#å‰è¨€">#</a>å‰è¨€</h2><p>æµ‹è¯•äº†å¾ˆå¤šè¿œç¨‹è¿æ¥è½¯ä»¶ï¼Œå‘ç°è¿˜æ˜¯teamviewerå¥½ç”¨ï¼Œä½†æ˜¯è«åå…¶å¦™è¢«æ£€æµ‹æˆå•†ä¸šç”¨æˆ·ï¼Œä¸èƒ½ä½¿ç”¨ï¼Œè®°å½•è§£å†³æ–¹æ¡ˆã€‚</p><a id="more"></a><h2 id="ç”³è¯‰"><a class="header-anchor" href="#ç”³è¯‰">#</a>ç”³è¯‰</h2><p>Teamviewerå®˜æ–¹æä¾›äº†ç”³è¯‰æ¸ é“ï¼Œé€šè¿‡ <a href="https://teamviewer.com/en/support/personal-use-verification/" target="_blank" rel="noopener">TeamViewer Personal Use Verification</a>ï¼Œæä¾›æ—¥å¿—ä¿¡æ¯å³å¯ç”³è¯‰ï¼Œä¼šé€šè¿‡é‚®ä»¶å›å¤ç”³è¯‰ç»“æœï¼Œèƒ½ä¸èƒ½æ¢å¤å…¨å‡­è¿æ°”ã€‚</p><p>æˆåŠŸä¾‹å­ï¼š</p><blockquote><p>Dear User,</p><p>Thank you for your email and query regarding TeamViewer.</p><p>We have gone ahead and reset your device back to private use.</p><p>For the changes to take effect, please restart your TeamViewer application via â€œConnection -&gt; Exit TeamViewerâ€.</p><p>Please keep in mind:</p><ul><li>TeamViewer is only free for private, non-commercial use.</li><li>If the device is used in an office or commercial setting, you will be blocked again and will need to buy a license to continue.</li><li>The partners you connect with also need to be using either a private or a licensed version of the software.</li></ul></blockquote><p>å¤±è´¥ä¾‹å­ï¼š</p><blockquote><p>Dear TeamViewer User,</p><p>Thank you for your request regarding being unblocked from using the free version of TeamViewer. After reviewing the information provided to us, we were unable to confirm that the submitted ID is being used privately.</p><p>Requiring commercial users to purchase a license is also part of our effort to maintain the free version, and to therefore make help accessible to everyone. The free version is for people who are using it to help family and friends.</p></blockquote><p>ä¸Šé¢ä¸¤å°éƒ½æ˜¯æˆ‘æ”¶åˆ°çš„é‚®ä»¶ï¼Œâ•®(â•¯â–½â•°)â•­</p><h2 id="macä¸‹è§£å†³æ–¹æ¡ˆ"><a class="header-anchor" href="#macä¸‹è§£å†³æ–¹æ¡ˆ">#</a>Macä¸‹è§£å†³æ–¹æ¡ˆ</h2><p>å‚è€ƒ <a href="https://www.590103.idv.tw/blog/%E8%A7%A3%E6%B1%BAmac%E7%89%88teamviewer%E5%80%8B%E4%BA%BA%E7%89%885%E5%88%86%E9%90%98%E6%96%B7%E7%B7%9A%E5%95%8F%E9%A1%8C#.XUqNcpMzZQK" target="_blank" rel="noopener">è§£æ±ºMACç‰ˆTeamviewerå€‹äººç‰ˆ5åˆ†é˜æ–·ç·šå•é¡Œ</a>ï¼Œä¸‹è½½è¿è¡Œå³å¯ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li>è®°ä½å½“å‰IDï¼Œå…³é—­Teamviewerã€‚</li><li>ä¸‹è½½ <a href="https://gist.github.com/zhenhappy/3c808a198715978a38acf0ba44044ea6" target="_blank" rel="noopener">TeamViewer-14-id-changer-for-mac.py</a> æˆ– <a href="https://gist.github.com/zhovner/b1d72f3465c46e7b58a4ea42d625c3e8" target="_blank" rel="noopener">TeamViewer-id-changer.py</a>ï¼Œç¬¬äºŒä¸ªä¸é€‚ç”¨äºTeamviewer14ï¼Œæ¨èç¬¬ä¸€ä¸ªã€‚</li><li>æ‰“å¼€å‘½ä»¤åï¼Œè¾“å…¥<code>sudo python TeamViewer-14-id-changer-for-mac.py</code>ï¼Œç‚¹å‡»å›è½¦ã€‚</li><li>é‡å¯ç”µè„‘ï¼Œå‘ç°IDæ”¹å˜ï¼Œé—®é¢˜è§£å†³ã€‚</li></ol><h2 id="windowsä¸‹è§£å†³æ–¹æ¡ˆ"><a class="header-anchor" href="#windowsä¸‹è§£å†³æ–¹æ¡ˆ">#</a>Windowsä¸‹è§£å†³æ–¹æ¡ˆ</h2><p>å‚è€ƒ <a href="https://www.itread01.com/content/1546764964.html" target="_blank" rel="noopener">teamviewerè¢«æª¢æ¸¬ç‚ºå•†æ¥­ç”¨é€”è§£æ±ºæ–¹æ³•</a>ã€‚</p><h3 id="å¸è½½"><a class="header-anchor" href="#å¸è½½">#</a>å¸è½½</h3>]]></content>
      
      
      <categories>
          
          <category> software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> teamviewer </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sign recognition lab report</title>
      <link href="/blog/2019/01/11/sign-recognition-lab-report/"/>
      <url>/blog/2019/01/11/sign-recognition-lab-report/</url>
      
        <content type="html"><![CDATA[<h2 id="å®éªŒæŠ¥å‘Š"><a class="header-anchor" href="#å®éªŒæŠ¥å‘Š">#</a>å®éªŒæŠ¥å‘Š</h2><a id="more"></a><div class="row">    <embed src="//onns.xyz/blog/files/sign-recognition-lab-report.pdf" width="100%" height="550" type="application/pdf"></div>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> computer vision </tag>
            
            <tag> matlab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2019 movie list</title>
      <link href="/blog/2019/01/01/2019-movie-list/"/>
      <url>/blog/2019/01/01/2019-movie-list/</url>
      
        <content type="html"><![CDATA[<h3 id="å†™åœ¨å‰é¢"><a class="header-anchor" href="#å†™åœ¨å‰é¢">#</a>å†™åœ¨å‰é¢</h3><a id="more"></a><h3 id="ä¸€æœˆ"><a class="header-anchor" href="#ä¸€æœˆ">#</a>ä¸€æœˆ</h3>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
      </categories>
      
      
        <tags>
            
            <tag> movie </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>local feature lab report</title>
      <link href="/blog/2018/12/18/local-feature-lab-report/"/>
      <url>/blog/2018/12/18/local-feature-lab-report/</url>
      
        <content type="html"><![CDATA[<h2 id="é—®é¢˜åˆ†æ"><a class="header-anchor" href="#é—®é¢˜åˆ†æ">#</a>é—®é¢˜åˆ†æ</h2><h3 id="é—®é¢˜æè¿°"><a class="header-anchor" href="#é—®é¢˜æè¿°">#</a>é—®é¢˜æè¿°</h3><p>è¯¥é¡¹ç›®çš„ç›®æ ‡æ˜¯å®Œæˆä¸€ä¸ªæ‰¾åˆ°åœ¨ä¸åŒçš„è§†è§’ä¸‹æ‹æ‘„çš„åŒä¸€ç‰©ä½“æˆ–åœºæ™¯ä¸­çš„ç›¸ä¼¼ä¹‹å¤„çš„ç®—æ³•ã€‚æˆ‘ä»¬ä¸»è¦å®ç°çš„æ˜¯ä¸€ä¸ªç®€æ˜“ç‰ˆçš„SIFTç®—æ³•ã€‚ä¸»è¦éœ€è¦å®Œæˆçš„æ˜¯ä»¥ä¸‹ä¸‰ä¸ªæ–¹é¢çš„å†…å®¹ï¼š</p><ul><li><p>å®ç°ä¸€ä¸ªHarrisè§’ç‚¹æ£€æµ‹ç®—æ³•</p></li><li><p>å®ç°ä¸€ä¸ªç±»ä¼¼SIFTç®—æ³•çš„å±€éƒ¨ç‰¹å¾æè¿°ç®—æ³•</p></li><li><p>å®ç°ä¸€ä¸ªåŸºäº<code>æ¯”ç‡æµ‹è¯•</code>æˆ–<code>æœ€è¿‘é‚»è·ç¦»æ¯”æµ‹è¯•</code>çš„å±€éƒ¨ç‰¹å¾åŒ¹é…ç®—æ³•</p></li></ul><h3 id="æ•°æ®é›†åˆ†æ"><a class="header-anchor" href="#æ•°æ®é›†åˆ†æ">#</a>æ•°æ®é›†åˆ†æ</h3><p>ä»¥<code>NotreDame</code>æ•°æ®ä¸ºä¾‹ï¼ŒåŒ…å«äº†ä¸¤å¼ åŒä¸€ç‰©ä½“çš„ä¸åŒè§’åº¦çš„å›¾åƒï¼Œå¦‚<code>å›¾1</code>æ‰€ç¤ºã€‚</p><center><p><img src="//onns.xyz/blog/image/921919841_a30df938f2_o.jpg" alt="æ•°æ®å›¾åƒ"></p><p>å›¾1 æ•°æ®å›¾åƒ</p></center><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">data</span><br><span class="line">â”œâ”€â”€ NotreDame</span><br><span class="line">|   â”œâ”€â”€ 921919841_a30df938f2_o_to_4191453057_c86028ce1f_o.mat</span><br><span class="line">|   â”œâ”€â”€ 921919841_a30df938f2_o.jpg</span><br><span class="line">|   â””â”€â”€ 4191453057_c86028ce1f_o.jpg</span><br><span class="line">â”œâ”€â”€ ...</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="å®éªŒè¿‡ç¨‹"><a class="header-anchor" href="#å®éªŒè¿‡ç¨‹">#</a>å®éªŒè¿‡ç¨‹</h2><h3 id="ç¼–ç¨‹è¯­è¨€ä»‹ç»"><a class="header-anchor" href="#ç¼–ç¨‹è¯­è¨€ä»‹ç»">#</a>ç¼–ç¨‹è¯­è¨€ä»‹ç»</h3><p>æœ¬å®éªŒæ‰€é€‰æ‹©çš„ç¼–ç¨‹è¯­è¨€ä¸º<code>Matlab</code>, ç¼–ç¨‹è½¯ä»¶ä¸º<code>Matlab 2018b</code>.</p><h3 id="harrisè§’ç‚¹æ£€æµ‹"><a class="header-anchor" href="#harrisè§’ç‚¹æ£€æµ‹">#</a>Harrisè§’ç‚¹æ£€æµ‹</h3><p>è§’ç‚¹æ˜¯ä¸€å¹…å›¾åƒä¸Šæœ€æ˜æ˜¾ä¸é‡è¦çš„ç‰¹å¾ï¼Œè§’ç‚¹æ£€æµ‹çš„åŸç†æ˜¯åˆ©ç”¨è§’ç‚¹åœ¨å„ä¸ªæ–¹å‘ä¸Šçš„æ¢¯åº¦å€¼å˜åŒ–æ˜æ˜¾è¿™ä¸€ç‰¹æ€§ã€‚<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p><p>é€‰å–çš„æè¿°çª—å®½åº¦ä¸º<code>16åƒç´ </code>ï¼Œé¦–å…ˆå¯¹å›¾åƒè¿›è¡Œé«˜æ–¯æ»¤æ³¢ï¼Œè¿™ä¸€æ­¥æ˜¯ä¸ºäº†æ¶ˆé™¤æŸäº›å™ªç‚¹å¯¹äºæ¥ä¸‹æ¥è¿›è¡Œçš„æ£€æµ‹çš„å½±å“ã€‚<br>æ¥ç€æ±‚åœ¨xxã€yyå’Œxyæ–¹å‘çš„æ¢¯åº¦å¹¶è¿›è¡Œé«˜æ–¯æ»¤æ³¢ã€‚<br>æœ€åå¾—åˆ°Harrisè§’ç‚¹çš„å“åº”å€¼Rã€‚è®¡ç®—å…¬å¼å¦‚<code>å…¬ç¤º1</code>æ‰€ç¤º:</p><p>$$<br>R = det(M) - \alpha*trace(M)<br>\tag{1}<br>$$</p><p>å…¶ä¸­$\alpha$ä¸ºç³»æ•°å€¼ï¼Œé€šå¸¸å–å€¼èŒƒå›´ä¸º0.04 ~ 0.06ä¹‹é—´.<br>æœ€åå°†å¾—åˆ°çš„å†è¿›è¡Œè¿‡æ»¤ï¼Œä¿ç•™é‚£äº›é‡è¦çš„å…´è¶£ç‚¹ã€‚</p><p>è¿è¡Œç»“æœå¦‚<code>å›¾2</code>æ‰€ç¤ºã€‚</p><center><p><img src="//onns.xyz/blog/image/20181218-1.jpg" alt="Harrisè§’ç‚¹æ£€æµ‹ç»“æœ"></p><p>å›¾2 Harrisè§’ç‚¹æ£€æµ‹ç»“æœ</p></center><h3 id="å±€éƒ¨ç‰¹å¾æè¿°"><a class="header-anchor" href="#å±€éƒ¨ç‰¹å¾æè¿°">#</a>å±€éƒ¨ç‰¹å¾æè¿°</h3><p>å±€éƒ¨ç‰¹å¾æè¿°æˆ‘ä»¬è¿ç”¨ä¸€ç§ç±»ä¼¼SIFTç®—æ³•çš„æè¿°æ–¹æ³•ï¼Œæˆ‘ä»¬è®¾ç½®çš„æè¿°çª—å£çš„å¤§å°ä¸º<code>16*16</code>ï¼Œæ¥ç€å°†çª—å£åˆ’åˆ†æˆ16ä¸ª<code>4*4</code>çš„å°çª—å£ï¼Œåœ¨è¿™äº›å°çª—å£ä¸­æ‰¾å¯»æ¯ä¸ªåƒç´ çš„ä¸»è¦æ¢¯åº¦ï¼Œç„¶åå°†å…¶å½’åˆ°0-360åº¦æŒ‰æ¯45åº¦ä¸€åˆ’åˆ†çš„8ä¸ªæ–¹å‘ä¹‹ä¸­ã€‚<br>ç„¶åå¯¹è¿™äº›ç‰¹å¾å‘é‡è¿›è¡Œå½’ä¸€åŒ–å¤„ç†ï¼Œä»¥æ¶ˆé™¤å…‰ç…§ç­‰å˜åŒ–çš„å½±å“ã€‚</p><h3 id="å±€éƒ¨ç‰¹å¾åŒ¹é…"><a class="header-anchor" href="#å±€éƒ¨ç‰¹å¾åŒ¹é…">#</a>å±€éƒ¨ç‰¹å¾åŒ¹é…</h3><p>åœ¨å¾—åˆ°ç‰¹å¾å‘é‡ä¹‹åï¼Œåªéœ€è¦é€šè¿‡è®¡ç®—å‘é‡çš„è·ç¦»ï¼Œå°±èƒ½å¤Ÿå¯¹ç‰¹å¾ç‚¹è¿›è¡ŒåŒ¹é…ã€‚<br>å…·ä½“çš„æ–¹æ³•æ˜¯ç®—ä¸€ä¸ªå‘é‡å’Œæ¥è‡ªå¦ä¸€ä¸ªå›¾çš„æ‰€æœ‰ç‰¹å¾ç‚¹çš„ç‰¹å¾å‘é‡çš„æ¬§å¼è·ç¦»ï¼Œç„¶åå–æœ€è¿‘çš„ä¸€ä¸ªç‰¹å¾å‘é‡è¿›è¡ŒåŒ¹é…ã€‚<br>åŒ¹é…ç»“æœå¦‚<code>å›¾3</code>æ‰€ç¤ºã€‚</p><center><p><img src="//onns.xyz/blog/image/20181218-2.jpg" alt="å±€éƒ¨ç‰¹å¾åŒ¹é…ç»“æœ"></p><p>å›¾3 å±€éƒ¨ç‰¹å¾åŒ¹é…ç»“æœ</p></center><h2 id="å®éªŒç»“æœ"><a class="header-anchor" href="#å®éªŒç»“æœ">#</a>å®éªŒç»“æœ</h2><p>æˆåŠŸå®ç°äº†ç®€å•çš„å›¾ç‰‡ç›¸ä¼¼ç‚¹çš„å¯»æ‰¾ä¸åŒ¹é…ã€‚åœ¨<code>Notre Dam</code>å›¾åƒä¸Šè·å¾—äº†87%çš„å‡†ç¡®ç‡ã€‚</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="https://blog.csdn.net/jia20003/article/details/16908661" target="_blank" rel="noopener">å›¾åƒå¤„ç†ä¹‹è§’ç‚¹æ£€æµ‹ç®—æ³•</a> <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> computer vision </tag>
            
            <tag> matlab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2018 Computational Intelligence Homework No.6</title>
      <link href="/blog/2018/12/10/2018-computational-intelligence-homework-no.6/"/>
      <url>/blog/2018/12/10/2018-computational-intelligence-homework-no.6/</url>
      
        <content type="html"><![CDATA[<h1 id="ç”¨äººå·¥ç¥ç»ç½‘ç»œæ±‚è§£æ—…è¡Œå•†-tsp-é—®é¢˜"><a class="header-anchor" href="#ç”¨äººå·¥ç¥ç»ç½‘ç»œæ±‚è§£æ—…è¡Œå•†-tsp-é—®é¢˜">#</a>ç”¨äººå·¥ç¥ç»ç½‘ç»œæ±‚è§£æ—…è¡Œå•†(TSP)é—®é¢˜</h1><h2 id="é—®é¢˜æè¿°"><a class="header-anchor" href="#é—®é¢˜æè¿°">#</a>é—®é¢˜æè¿°</h2><p>æ—…è¡Œå•†é—®é¢˜(Travelling Salesman Problem, ç®€è®°TSP, äº¦ç§°è´§éƒæ‹…é—®é¢˜): è®¾æœ‰34ä¸ªåŸå¸‚åŠå…¶å¯¹åº”çš„ç»çº¬åº¦åæ ‡, åˆ™é—®é¢˜æ˜¯è¦æ‰¾å‡ºéè®¿æ¯ä¸ªåŸå¸‚æ°å¥½ä¸€æ¬¡çš„ä¸€æ¡å›è·¯å¹¶ä½¿å…¶è·¯å¾„é•¿åº¦ä¸ºæœ€çŸ­.</p><a id="more"></a><h2 id="ç®—æ³•è®¾è®¡"><a class="header-anchor" href="#ç®—æ³•è®¾è®¡">#</a>ç®—æ³•è®¾è®¡</h2><p>Hopfieldç¥ç»ç½‘ç»œæ˜¯ä¸€ç§å•å±‚äº’ç›¸å…¨è¿æ¥çš„åé¦ˆå‹ç¥ç»ç½‘ç»œã€‚æ¯ä¸ªç¥ç»å…ƒæ—¢æ˜¯è¾“å…¥ä¹Ÿæ˜¯è¾“å‡ºï¼Œç½‘ç»œä¸­çš„æ¯ä¸€ä¸ªç¥ç»å…ƒéƒ½å°†è‡ªå·±çš„è¾“å‡ºé€šè¿‡è¿æ¥æƒä¼ é€ç»™æ‰€æœ‰å…¶å®ƒç¥ç»å…ƒï¼ŒåŒæ—¶åˆéƒ½æ¥æ”¶æ‰€æœ‰å…¶å®ƒç¥ç»å…ƒä¼ é€’è¿‡æ¥çš„ä¿¡æ¯ã€‚å³ï¼šç½‘ç»œä¸­çš„ç¥ç»å…ƒåœ¨tæ—¶åˆ»çš„è¾“å‡ºçŠ¶æ€å®é™…ä¸Šé—´æ¥åœ°ä¸è‡ªå·±t-1æ—¶åˆ»çš„è¾“å‡ºçŠ¶æ€æœ‰å…³ã€‚ç¥ç»å…ƒä¹‹é—´äº’è¿æ¥ï¼Œæ‰€ä»¥å¾—åˆ°çš„æƒé‡çŸ©é˜µå°†æ˜¯å¯¹ç§°çŸ©é˜µã€‚<br>åŒæ—¶ï¼ŒHopfieldç¥ç»ç½‘ç»œæˆåŠŸå¼•å…¥èƒ½é‡å‡½æ•°çš„æ¦‚å¿µï¼Œä½¿ç½‘ç»œè¿è¡Œåœ°ç¨³å®šæ€§åˆ¤æ–­æœ‰äº†å¯é ä¾æ®ã€‚åŸºæœ¬çš„Hopfieldç¥ç»ç½‘ç»œæ˜¯ä¸€ä¸ªç”±éçº¿æ€§å…ƒä»¶æ„æˆçš„å…¨è¿æ¥å‹å•å±‚é€’å½’ç³»ç»Ÿã€‚å…¶çŠ¶æ€å˜åŒ–å¯ä»¥ç”¨å·®åˆ†æ–¹ç¨‹æ¥è¡¨ç¤ºã€‚é€’å½’å‹ç½‘ç»œçš„ä¸€ä¸ªé‡è¦ç‰¹ç‚¹å°±æ˜¯å®ƒå…·æœ‰ç¨³å®šçŠ¶æ€, å½“ç½‘ç»œè¾¾åˆ°ç¨³å®šçŠ¶æ€çš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯å®ƒçš„èƒ½é‡å‡½æ•°è¾¾åˆ°æœ€å°çš„æ—¶å€™ã€‚è¿™é‡Œçš„èƒ½é‡å‡½æ•°ä¸æ˜¯ç‰©ç†æ„ä¹‰ä¸Šçš„èƒ½é‡å‡½æ•°ï¼Œè€Œæ˜¯åœ¨è¡¨è¾¾å½¢å¼ä¸Šä¸ç‰©ç†æ„ä¹‰ä¸Šçš„èƒ½é‡æ¦‚å¿µä¸€è‡´ï¼Œå³å®ƒè¡¨å¾ç½‘ç»œçŠ¶æ€çš„å˜åŒ–è¶‹åŠ¿ï¼Œå¹¶å¯ä»¥ä¾æ®Hopfieldç½‘ç»œæ¨¡å‹çš„å·¥ä½œè¿è¡Œè§„åˆ™ä¸æ–­åœ°è¿›è¡ŒçŠ¶æ€å˜åŒ–ï¼Œæœ€ç»ˆèƒ½å¤Ÿåˆ°è¾¾å…·æœ‰æŸä¸ªæå°å€¼çš„ç›®æ ‡å‡½æ•°ã€‚ç½‘ç»œæ”¶æ•›å°±æ˜¯æŒ‡èƒ½é‡å‡½æ•°è¾¾åˆ°æå°å€¼ã€‚<br>å¦‚æœæŠŠä¸€ä¸ªæœ€ä¼˜åŒ–åœ¨ç€é€’å½’ä¿¡å·ï¼Œç½‘ç»œçš„çŠ¶æ€æ˜¯éšæ—¶é—´çš„å˜åŒ–è€Œå˜åŒ–çš„ï¼Œå…¶è¿åŠ¨è½¨è¿¹å¿…ç„¶å­˜åœ¨ç€ç¨³å®šæ€§çš„é—®é¢˜ã€‚è¿™å°±æ˜¯é€’å½’ç½‘ç»œä¸å‰å‘ç½‘ç»œåœ¨ç½‘ç»œæ€§èƒ½åˆ†æä¸Šæœ€å¤§çš„åŒºåˆ«ä¹‹ä¸€åœ¨ä½¿ç”¨é€’å½’ç½‘ç»œæ—¶ï¼Œå¿…é¡»å¯¹å…¶ç¨³å®šæ€§è¿›è¡Œä¸“é—¨çš„åˆ†æä¸è®¨è®ºï¼Œåˆç†é€‰æ‹©ç½‘ç»œçš„å‚æ•°å˜åŒ–èŒƒå›´ï¼Œæ‰èƒ½ç¡®ä¿é€’å½’ç½‘ç»œçš„æ­£å¸¸å·¥ä½œã€‚<br>Hopfieldç¥ç»ç½‘ç»œæ¨¡å‹æœ‰ç¦»æ•£å‹å’Œè¿ç»­æ€§ä¸¤ç§ï¼Œç¦»æ•£å‹é€‚ç”¨äºè”æƒ³è®°å¿†ï¼Œè¿ç»­æ€§é€‚åˆå¤„ç†ä¼˜åŒ–é—®é¢˜ã€‚<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p><p>å°†TSPé—®é¢˜æ˜ å°„ä¸ºç¥ç»ç½‘ç»œåŠ¨åŠ›ç³»ç»Ÿå¯ç”¨ä»¥ä¸‹æ­¥éª¤å®Œæˆï¼š</p><ol><li>å°†TSPé—®é¢˜çš„æ¯ä¸€æ¡å¯èƒ½è·¯å¾„ç”¨ä¸€æ¢ä½çŸ©é˜µè¡¨ç¤ºï¼Œå¹¶ç»™å‡ºç›¸åº”çš„è·ç¦»è¡¨ç¤ºè¯•ï¼›</li><li>å°†TSPé—®é¢˜çš„æ¢ä½é˜µé›†åˆä¸ç”±Nä¸ªç¥ç»å…ƒæ„æˆçš„ç¥ç»å…ƒé˜µåˆ—ç›¸å¯¹åº”ï¼›æ¯ä¸€æ¡è·¯å¾„æ‰€å¯¹åº”çš„æ¢ä½é˜µçš„å„å…ƒç´ ä¸ç›¸åº”çš„ç¥ç»å…ƒç¨³æ€è¾“å‡ºå¯¹åº”ï¼›</li><li>æ‰¾å‡ºä¸€ååº”TSPçº¦æŸä¼˜åŒ–é—®é¢˜çš„èƒ½è¿å‡½æ•°Eï¼›</li><li>æ±‚å‡ºä½¿Eå–æå°å€¼çš„ç¥ç»ç½‘ç»œè¿æ¥æƒé‡çŸ©é˜µå’Œåç½®å‚æ•°ã€‚</li></ol><h3 id="tspçš„èƒ½é‡å‡½æ•°e"><a class="header-anchor" href="#tspçš„èƒ½é‡å‡½æ•°e">#</a>TSPçš„èƒ½é‡å‡½æ•°E</h3>$$\begin{aligned}E = & \frac{A}{2}\sum^n_{x=1}\sum^n_{i=1}\sum^n_{j \ne 1}v_{xi}v_{xj} + \frac{B}{2}\sum^n_{i=1}\sum^n_{x=1}\sum^n_{y \ne x}v_{xi}v_{yi} \\& + \frac{C}{2}(\sum^n_{x=1}\sum^n_{i=1}v_{xi}-n)^2 +\frac{D}{2}\sum^n_{x=1}\sum^n_{y \ne x}\sum^n_{i=1}d_{xy}d_{xi}(v_{y,i+1}+v_{y,i-1})\end{aligned}\tag{1}$$<p>å…¶ä¸­å‚æ•°$ABCD$ç§°ä¸ºæƒå€¼ï¼Œå‰ä¸‰é¡¹æ˜¯æ»¡è¶³TSPç½®æ¢çŸ©é˜µçš„çº¦æŸæ¡ä»¶ï¼Œæœ€åä¸€é¡¹åŒ…å«ä¼˜åŒ–ç›®æ ‡å‡½æ•°é¡¹.</p><h2 id="æ”¹è¿›çš„tspçš„èƒ½é‡å‡½æ•°e"><a class="header-anchor" href="#æ”¹è¿›çš„tspçš„èƒ½é‡å‡½æ•°e">#</a>æ”¹è¿›çš„TSPçš„èƒ½é‡å‡½æ•°E</h2>$$\begin{aligned}E = & \frac{A}{2}\sum^n_{x=1}(\sum^n_{i=1}v_{xi}-1)^2+\frac{A}{2}\sum^n_{i=1}(\sum^n_{x=1}v_{xi}-1)^2 \\& + \frac{D}{2}\sum^n_{x=1}\sum^n_{y=1}\sum^n_{i=1}v_{xi}d_{xy}v_{y,i+1}\end{aligned}\tag{2}$$<h3 id="hopfieldç¥ç»ç½‘ç»œåŠ¨æ€æ–¹ç¨‹"><a class="header-anchor" href="#hopfieldç¥ç»ç½‘ç»œåŠ¨æ€æ–¹ç¨‹">#</a>Hopfieldç¥ç»ç½‘ç»œåŠ¨æ€æ–¹ç¨‹</h3>$$\begin{aligned}\frac{du_{xi}}{dt} = - \frac{\partial E}{\partial v_{xi}} =& -A(\sum^n_{i=1}v_{xi}-1)-A(\sum^n_{y=1}v_{yi}-1) \\& - D(\sum^n_{y=1}v_{xi}d_{xy}v_{y,i+1}\end{aligned}\tag{3}$$<h2 id="ç¨‹åºæµç¨‹"><a class="header-anchor" href="#ç¨‹åºæµç¨‹">#</a>ç¨‹åºæµç¨‹</h2><p>ç¨‹åºæµç¨‹å¦‚<code>å›¾1</code>æ‰€ç¤º</p><center><div id="flowchart-0" class="flow-chart"></div><p>å›¾1 ç¨‹åºæµç¨‹å›¾</p></center><h2 id="æ ¸å¿ƒä¼ªä»£ç "><a class="header-anchor" href="#æ ¸å¿ƒä¼ªä»£ç ">#</a>æ ¸å¿ƒä¼ªä»£ç </h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> range(num_iter):</span><br><span class="line">    <span class="comment"># åˆ©ç”¨åŠ¨æ€æ–¹ç¨‹è®¡ç®—du</span></span><br><span class="line">    du = calc_du(V, distance)</span><br><span class="line">    <span class="comment"># ç”±ä¸€é˜¶æ¬§æ‹‰æ³•æ›´æ–°ä¸‹ä¸€ä¸ªæ—¶é—´çš„è¾“å…¥çŠ¶æ€ï¼ˆç”µè·¯çš„è¾“å…¥ç”µå‹Uï¼‰</span></span><br><span class="line">    U = calc_U(U, du, step)</span><br><span class="line">    <span class="comment"># ç”±sigmoidå‡½æ•°æ›´æ–°ä¸‹ä¸€ä¸ªæ—¶é—´çš„è¾“å‡ºçŠ¶æ€ï¼ˆç”µè·¯çš„è¾“å‡ºç”µå‹Vï¼‰</span></span><br><span class="line">    V = calc_V(U, U0)</span><br><span class="line">    <span class="comment"># è®¡ç®—å½“å‰ç½‘ç»œçš„èƒ½é‡E</span></span><br><span class="line">    energys[n] = calc_energy(V, distance)</span><br><span class="line">    <span class="comment"># æ£€æŸ¥è·¯å¾„çš„åˆæ³•æ€§</span></span><br><span class="line">    route, newV = check_path(V)</span><br><span class="line">    <span class="keyword">if</span> len(np.unique(route)) == N:</span><br><span class="line">        route.append(route[<span class="number">0</span>])</span><br><span class="line">        dis = calc_distance(route)</span><br><span class="line">        <span class="keyword">if</span> dis &lt; best_distance:</span><br><span class="line">            H_path = []</span><br><span class="line">            best_distance = dis</span><br><span class="line">            best_route = route</span><br><span class="line">            [H_path.append((route[i], route[i + <span class="number">1</span>]))</span><br><span class="line">                <span class="keyword">for</span> i <span class="keyword">in</span> range(len(route) - <span class="number">1</span>)]</span><br><span class="line">            print(<span class="string">'ç¬¬&#123;&#125;æ¬¡è¿­ä»£æ‰¾åˆ°çš„æ¬¡ä¼˜è§£è·ç¦»ä¸ºï¼š&#123;&#125;ï¼Œèƒ½é‡ä¸ºï¼š&#123;&#125;ï¼Œè·¯å¾„ä¸ºï¼š'</span></span><br><span class="line">            .format(n, best_distance, energys[n]))</span><br><span class="line">            [print(<span class="string">'['</span> + str(citys[v][<span class="number">0</span>]) + <span class="string">','</span> + str(citys[v][<span class="number">1</span>]) </span><br><span class="line">            + <span class="string">']'</span>, end=<span class="string">','</span> <span class="keyword">if</span> i &lt; len(best_route) - <span class="number">1</span> <span class="keyword">else</span> <span class="string">'\n'</span>)</span><br><span class="line">                <span class="keyword">for</span> i, v <span class="keyword">in</span> enumerate(best_route)]</span><br><span class="line"><span class="keyword">if</span> len(H_path) &gt; <span class="number">0</span>:</span><br><span class="line">    draw_H_and_E(citys, H_path, energys)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">'æ²¡æœ‰æ‰¾åˆ°æœ€ä¼˜è§£'</span>)</span><br></pre></td></tr></table></figure><h2 id="ä»£ç è¿è¡ŒåŠæµ‹è¯•"><a class="header-anchor" href="#ä»£ç è¿è¡ŒåŠæµ‹è¯•">#</a>ä»£ç è¿è¡ŒåŠæµ‹è¯•</h2><p>ä»£ç è¿è¡Œç»“æœå¦‚<code>å›¾2</code>æ‰€ç¤º.</p><center><p><img src="//onns.xyz/blog/image/20181210-1.png" alt="è¿è¡Œç»“æœå›¾"></p><p>å›¾2 è¿è¡Œç»“æœå›¾</p></center><h2 id="ç»“è®º"><a class="header-anchor" href="#ç»“è®º">#</a>ç»“è®º</h2><p>34ä¸ªåŸå¸‚çš„æœ€ç»ˆç»“æœä¸º<code>18513.0361</code>å…¬é‡Œã€‚<br>Hopfieldç¥ç»ç½‘ç»œæ˜¯æ±‚è§£TSPçš„ä¸€ç§ä¼˜åŒ–ç½‘ç»œç®—æ³•ã€‚Hopfieldç¥ç»ç½‘ç»œé€šè¿‡ç¥ç»åŠ¨åŠ›å­¦æ¥æ˜ å°„ç”Ÿç‰©ç¥ç»ç½‘ç»œï¼Œåœ¨å‚æ•°è®¾ç½®åˆç†çš„æƒ…å†µä¸‹ï¼Œæœ‰å¯èƒ½æ‰¾åˆ°çœŸå®æœ€ä¼˜è§£ï¼Œæ¯”è¿‘ä¼¼ç®—æ³•è®¡ç®—çš„æ•ˆæœè¦å¥½ã€‚Hopfieldç¥ç»ç½‘ç»œæ¯”è¾ƒä¾èµ–åˆå§‹æƒå€¼çš„è®¾ç½®ï¼Œä¼šå—åˆ°åˆå§‹è¾“å…¥çŠ¶æ€å’Œè¾“å‡ºçŠ¶æ€çš„éšæœºæ€§å½±å“ï¼Œä¸ä¸€å®šæ¯ä¸€æ¬¡éƒ½å¯ä»¥æ‰¾åˆ°æœ€ä¼˜è§£ï¼Œæœ‰å¯èƒ½æ‰¾åˆ°çš„æ˜¯ä¸åŒçš„æ¬¡ä¼˜è§£ã€‚</p><h2 id="å‚è€ƒé“¾æ¥"><a class="header-anchor" href="#å‚è€ƒé“¾æ¥">#</a>å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://www.jianshu.com/p/30fdc835d5b3" target="_blank" rel="noopener">TSPé—®é¢˜â€”Hopfieldç¥ç»ç½‘ç»œç®—æ³•</a></li></ul><p style="page-break-before: always"></p><h2 id="é™„å½•"><a class="header-anchor" href="#é™„å½•">#</a>é™„å½•</h2><h3 id="åŸå¸‚åæ ‡"><a class="header-anchor" href="#åŸå¸‚åæ ‡">#</a>åŸå¸‚åæ ‡</h3><center id="city_list">åŸå¸‚åæ ‡è¡¨</center><table><thead><tr><th style="text-align:center">åºå·</th><th style="text-align:center">çœä»½</th><th style="text-align:center">ç»åº¦</th><th style="text-align:center">çº¬åº¦</th></tr></thead><tbody><tr><td style="text-align:center">01</td><td style="text-align:center">åŒ—äº¬</td><td style="text-align:center">116.4</td><td style="text-align:center">39.9</td></tr><tr><td style="text-align:center">02</td><td style="text-align:center">å¤©æ´¥</td><td style="text-align:center">117.2</td><td style="text-align:center">39.12</td></tr><tr><td style="text-align:center">03</td><td style="text-align:center">æ²³åŒ—</td><td style="text-align:center">114.52</td><td style="text-align:center">38.05</td></tr><tr><td style="text-align:center">04</td><td style="text-align:center">å±±è¥¿</td><td style="text-align:center">112.55</td><td style="text-align:center">37.87</td></tr><tr><td style="text-align:center">05</td><td style="text-align:center">å†…è’™å¤</td><td style="text-align:center">111.73</td><td style="text-align:center">40.83</td></tr><tr><td style="text-align:center">06</td><td style="text-align:center">è¾½å®</td><td style="text-align:center">123.43</td><td style="text-align:center">41.8</td></tr><tr><td style="text-align:center">07</td><td style="text-align:center">å‰æ—</td><td style="text-align:center">125.32</td><td style="text-align:center">43.9</td></tr><tr><td style="text-align:center">08</td><td style="text-align:center">é»‘é¾™æ±Ÿ</td><td style="text-align:center">126.53</td><td style="text-align:center">45.8</td></tr><tr><td style="text-align:center">09</td><td style="text-align:center">ä¸Šæµ·</td><td style="text-align:center">121.47</td><td style="text-align:center">31.23</td></tr><tr><td style="text-align:center">10</td><td style="text-align:center">æ±Ÿè‹</td><td style="text-align:center">118.78</td><td style="text-align:center">32.07</td></tr><tr><td style="text-align:center">11</td><td style="text-align:center">æµ™æ±Ÿ</td><td style="text-align:center">120.15</td><td style="text-align:center">30.28</td></tr><tr><td style="text-align:center">12</td><td style="text-align:center">å®‰å¾½</td><td style="text-align:center">117.25</td><td style="text-align:center">31.83</td></tr><tr><td style="text-align:center">13</td><td style="text-align:center">ç¦å»º</td><td style="text-align:center">119.3</td><td style="text-align:center">26.08</td></tr><tr><td style="text-align:center">14</td><td style="text-align:center">æ±Ÿè¥¿</td><td style="text-align:center">115.85</td><td style="text-align:center">28.68</td></tr><tr><td style="text-align:center">15</td><td style="text-align:center">å±±ä¸œ</td><td style="text-align:center">116.98</td><td style="text-align:center">36.67</td></tr><tr><td style="text-align:center">16</td><td style="text-align:center">æ²³å—</td><td style="text-align:center">113.62</td><td style="text-align:center">34.75</td></tr><tr><td style="text-align:center">17</td><td style="text-align:center">æ¹–åŒ—</td><td style="text-align:center">114.3</td><td style="text-align:center">30.6</td></tr><tr><td style="text-align:center">18</td><td style="text-align:center">æ¹–å—</td><td style="text-align:center">112.93</td><td style="text-align:center">28.23</td></tr><tr><td style="text-align:center">19</td><td style="text-align:center">å¹¿ä¸œ</td><td style="text-align:center">113.27</td><td style="text-align:center">23.13</td></tr><tr><td style="text-align:center">20</td><td style="text-align:center">å¹¿è¥¿</td><td style="text-align:center">108.37</td><td style="text-align:center">22.82</td></tr><tr><td style="text-align:center">21</td><td style="text-align:center">æµ·å—</td><td style="text-align:center">108.37</td><td style="text-align:center">22.82</td></tr><tr><td style="text-align:center">22</td><td style="text-align:center">é‡åº†</td><td style="text-align:center">106.55</td><td style="text-align:center">29.57</td></tr><tr><td style="text-align:center">23</td><td style="text-align:center">å››å·</td><td style="text-align:center">104.07</td><td style="text-align:center">30.67</td></tr><tr><td style="text-align:center">24</td><td style="text-align:center">è´µå·</td><td style="text-align:center">106.63</td><td style="text-align:center">26.65</td></tr><tr><td style="text-align:center">25</td><td style="text-align:center">äº‘å—</td><td style="text-align:center">102.72</td><td style="text-align:center">25.05</td></tr><tr><td style="text-align:center">26</td><td style="text-align:center">è¥¿è—</td><td style="text-align:center">91.13</td><td style="text-align:center">29.65</td></tr><tr><td style="text-align:center">27</td><td style="text-align:center">é™•è¥¿</td><td style="text-align:center">108.93</td><td style="text-align:center">34.27</td></tr><tr><td style="text-align:center">28</td><td style="text-align:center">ç”˜è‚ƒ</td><td style="text-align:center">103.82</td><td style="text-align:center">36.07</td></tr><tr><td style="text-align:center">29</td><td style="text-align:center">é’æµ·</td><td style="text-align:center">101.78</td><td style="text-align:center">36.62</td></tr><tr><td style="text-align:center">30</td><td style="text-align:center">å®å¤</td><td style="text-align:center">106.28</td><td style="text-align:center">38.47</td></tr><tr><td style="text-align:center">31</td><td style="text-align:center">æ–°ç–†</td><td style="text-align:center">87.62</td><td style="text-align:center">43.82</td></tr><tr><td style="text-align:center">32</td><td style="text-align:center">å°åŒ—</td><td style="text-align:center">121.52</td><td style="text-align:center">25.03</td></tr><tr><td style="text-align:center">33</td><td style="text-align:center">é¦™æ¸¯</td><td style="text-align:center">114.17</td><td style="text-align:center">22.28</td></tr><tr><td style="text-align:center">34</td><td style="text-align:center">æ¾³é—¨</td><td style="text-align:center">113.55</td><td style="text-align:center">22.19</td></tr></tbody></table><script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.3.0/raphael.min.js"></script><script src="//flowchart.js.org/flowchart-latest.js"></script><textarea id="flowchart-0-code" style="display: none">st=>start: åˆå§‹åŒ–Hopfieldç¥ç»ç½‘ç»œçš„åˆå€¼å’Œæƒå€¼op1=>operation: è®¡ç®—nä¸ªåŸå¸‚ä¹‹é—´çš„è·ç¦»çŸ©é˜µDxyï¼Œåˆå§‹åŒ–ç¥ç»ç½‘ç»œçš„è¾“å…¥çŠ¶æ€op2=>operation: åˆ©ç”¨åŠ¨æ€æ–¹ç¨‹è®¡ç®—è¾“å…¥çŠ¶æ€çš„å¢é‡op3=>operation: ç”±ä¸€é˜¶æ¬§æ‹‰æ–¹æ³•æ›´æ–°ç¥ç»ç½‘ç»œä¸‹ä¸€ä¸ªæ—¶åˆ»çš„è¾“å…¥çŠ¶æ€op4=>operation: ç”±sigmoidå‡½æ•°æ›´æ–°ç¥ç»ç½‘ç»œä¸‹ä¸ªæ—¶åˆ»çš„è¾“å‡ºçŠ¶æ€op5=>operation: è®¡ç®—å½“å‰çš„èƒ½é‡å‡½æ•°Econd1=>condition: æ˜¯å¦è¿­ä»£æŒ‡å®šæ¬¡æ•°?e1=>end: ç®—æ³•ç»“æŸst->op1->cond1cond1(no, bottom)->op3->op4->op5->cond1cond1(yes)->e1</textarea><textarea id="flowchart-0-options" style="display: none">{"scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12}</textarea><script>  var code = document.getElementById("flowchart-0-code").value;  var options = JSON.parse(decodeURIComponent(document.getElementById("flowchart-0-options").value));  var diagram = flowchart.parse(code);  diagram.drawSVG("flowchart-0", options);</script><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="https://blog.csdn.net/weixin_39707121/article/details/79041536" target="_blank" rel="noopener">Hopfieldç¥ç»ç½‘ç»œ</a> <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> computational intelligence </tag>
            
            <tag> artificial neural network </tag>
            
            <tag> perceptron </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2018 Computational Intelligence Homework No.5</title>
      <link href="/blog/2018/11/26/2018-computational-intelligence-homework-no.5/"/>
      <url>/blog/2018/11/26/2018-computational-intelligence-homework-no.5/</url>
      
        <content type="html"><![CDATA[<h1 id="äººå·¥ç¥ç»ç½‘ç»œ-æ„ŸçŸ¥å™¨è®­ç»ƒ"><a class="header-anchor" href="#äººå·¥ç¥ç»ç½‘ç»œ-æ„ŸçŸ¥å™¨è®­ç»ƒ">#</a>äººå·¥ç¥ç»ç½‘ç»œ-æ„ŸçŸ¥å™¨è®­ç»ƒ</h1><h2 id="é—®é¢˜æè¿°"><a class="header-anchor" href="#é—®é¢˜æè¿°">#</a>é—®é¢˜æè¿°</h2><p>ä¸‹é¢è¿™ä¸ªè®­ç»ƒé›†åˆæ˜¯çº¿æ€§å¯åˆ†çš„:</p><table><thead><tr><th style="text-align:center">è¾“å…¥</th><th style="text-align:center">è¾“å‡º</th></tr></thead><tbody><tr><td style="text-align:center">1 0 0</td><td style="text-align:center">1</td></tr><tr><td style="text-align:center">0 1 1</td><td style="text-align:center">0</td></tr><tr><td style="text-align:center">1 1 0</td><td style="text-align:center">1</td></tr><tr><td style="text-align:center">1 1 1</td><td style="text-align:center">0</td></tr><tr><td style="text-align:center">0 0 1</td><td style="text-align:center">0</td></tr><tr><td style="text-align:center">1 0 1</td><td style="text-align:center">1</td></tr></tbody></table><p>(æ‰‹å·¥)è®­ç»ƒæ­¤è®­ç»ƒé›†åˆä¸­çš„çº¿æ€§é˜ˆå€¼å•å…ƒã€‚ä½ çš„å•å…ƒåŒ…æ‹¬æ‰§è¡Œé˜ˆå€¼çš„è¾“å…¥åœ¨å†…çš„å››ä¸ªè¾“å…¥ã€‚è®¾æ‰€æœ‰æƒå€¼çš„åˆå§‹å€¼ä¸º0ã€‚ç”¨å›ºå®šé€’å¢çº é”™ç¨‹åºæ¥è®­ç»ƒä½ çš„å•å…ƒç›´è‡³æ‰¾åˆ°ä¸€ä¸ªè§£ã€‚<br>åœ¨æ¯æ¬¡è®­ç»ƒå¾ªç¯åæ ‡å‡ºå„ç»„æƒå€¼ã€‚ä»¥å‰é¢çš„è¾“å…¥ä¸ºé¡¶ç‚¹ç”»å‡ºä¸€ä¸ªä¸‰ç»´ç«‹æ–¹ä½“çš„è‰å›¾ï¼Œå¹¶æ ¹æ®æœ€ç»ˆæƒé›†ç”»å‡ºåˆ†å‰²å¹³é¢çš„è‰å›¾ã€‚</p><a id="more"></a><h2 id="è®­ç»ƒè¿‡ç¨‹"><a class="header-anchor" href="#è®­ç»ƒè¿‡ç¨‹">#</a>è®­ç»ƒè¿‡ç¨‹</h2><h3 id="åˆå§‹åŒ–"><a class="header-anchor" href="#åˆå§‹åŒ–">#</a>åˆå§‹åŒ–</h3><p>å–Î¼=0.1, Î¸=0.0ï¼Œåˆå§‹çŠ¶æ€w<sub>1</sub>=w<sub>2</sub>=w<sub>3</sub>=0<br>æ¿€æ´»å‡½æ•°å¦‚<code>å…¬å¼1</code>æ‰€ç¤º.</p>$$f_h(x)=\begin{cases}1,&{x \geq 0} \\0,&{x < 0}\end{cases}\tag{1}$$<p>è¾“å‡ºç»“æœå¦‚<code>å…¬å¼2</code>æ‰€ç¤ºã€‚</p>$$o = f_h(\omega_1x+\omega_2y+\omega_3z+\theta)\tag{2}$$<p>æƒé‡æ›´æ–°è§„åˆ™å¦‚<code>å…¬ç¤º3</code>æ‰€ç¤º, å…¶ä¸­ $input$ ä¸ºè¾“å…¥ã€‚</p>$$\omega' = \omega + \Delta\omega * input \\\theta' = \theta + \Delta\omega\tag{3}$$<p>æ„ŸçŸ¥å™¨å¦‚<code>å›¾1</code>æ‰€ç¤ºã€‚</p><center><div id="graphviz-0"></div><p>å›¾1 æ„ŸçŸ¥å™¨å›¾</p></center><h3 id="ç¬¬ä¸€è½®å¾ªç¯"><a class="header-anchor" href="#ç¬¬ä¸€è½®å¾ªç¯">#</a>ç¬¬ä¸€è½®å¾ªç¯</h3><p>å°†æ‰€æœ‰è¾“å…¥è¾“å…¥åˆ°æ„ŸçŸ¥å™¨ä¸­è¿›è¡Œè®¡ç®—ã€‚</p>$$\begin{aligned}&o|_{(1, 0, 0)}=f_h(0+0+0+0.0)=1, &æ­£ç¡® \\&o|_{(0, 1, 1)}=f_h(0+0+0+0.0)=1, &åº”è¯¥æ˜¯0 \\\end{aligned}$$<p>æ›´æ–°æƒé‡$\Delta\omega=-0.1, \omega_1 = 0 +  -0.1 * 0 = 0.0, åŒæ ·åœ°å¾—åˆ°\omega_2 = -0.1, \omega_3 = -0.1, \theta = -0.1$</p>$$\begin{aligned}&o|_{(1, 1, 0)}=f_h(0-0.1+0-0.1)=0, &åº”è¯¥æ˜¯1\end{aligned}$$<p>æ›´æ–°æƒé‡$\Delta\omega=0.1, \omega_1 = 0.1, \omega_2 = 0.0, \omega_3 = -0.1, \theta = -0.0$</p>$$\begin{aligned}&o|_{(1, 1, 1)}=f_h(0.1+0-0.1+0.0)=1, &åº”è¯¥æ˜¯0\end{aligned}$$<p>æ›´æ–°æƒé‡$\Delta\omega=-0.1, \omega_1 = 0.1, \omega_2 = -0.1, \omega_3 = -0.2, \theta = -0.1$</p>$$\begin{aligned}&o|_{(0, 0, 1)}=f_h(0+0-0.2-0.1)=0, &æ­£ç¡® \\&o|_{(1, 0, 1)}=f_h(-0.1+0-0.2-0.1)=0, &åº”è¯¥æ˜¯1 \\\end{aligned}$$<p>æ›´æ–°æƒé‡$\Delta\omega=0.1, \omega_1 = 0.1, \omega_2 = -0.1, \omega_3 = -0.1, \theta = -0.0$</p><center><div id="graphviz-1"></div><p>å›¾2 ä¸€è½®å¾ªç¯åçš„æ„ŸçŸ¥å™¨å›¾</p></center><h3 id="ç¬¬äºŒè½®å¾ªç¯"><a class="header-anchor" href="#ç¬¬äºŒè½®å¾ªç¯">#</a>ç¬¬äºŒè½®å¾ªç¯</h3>$$\begin{aligned}&o|_{(1, 0, 0)}=f_h(0.1+0+0+0.0)=1, &æ­£ç¡® \\&o|_{(0, 1, 1)}=f_h(0-0.1-0.1+0.0)=0, &æ­£ç¡® \\&o|_{(1, 1, 0)}=f_h(0.1-0.1+0+0.0)=1, &æ­£ç¡® \\&o|_{(1, 1, 1)}=f_h(0.1-0.1-0.1+0.0)=0, &æ­£ç¡® \\&o|_{(0, 0, 1)}=f_h(0+0-0.1+0.0)=0, &æ­£ç¡® \\&o|_{(1, 0, 1)}=f_h(0.1+0-0.1+0.0)=1, &æ­£ç¡® \\\end{aligned}$$<p>è‡³æ­¤æ„ŸçŸ¥å™¨æ”¶æ•›ï¼Œå¾ªç¯ç»“æŸã€‚</p><center><div id="graphviz-2"></div><p>å›¾3 æœ€ç»ˆçš„çš„æ„ŸçŸ¥å™¨å›¾</p></center><h2 id="ç»“è®º"><a class="header-anchor" href="#ç»“è®º">#</a>ç»“è®º</h2><p>æœ€ç»ˆæƒé›†ç”»å‡ºçš„åˆ†å‰²å¹³é¢çš„è‰å›¾å¦‚<code>å›¾4</code>æ‰€ç¤ºã€‚</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">clear all</span><br><span class="line">x = <span class="number">-2</span>:<span class="number">0.1</span>:<span class="number">2</span></span><br><span class="line">y = <span class="number">-2</span>:<span class="number">0.1</span>:<span class="number">2</span></span><br><span class="line">[X,Y]= <span class="built_in">meshgrid</span>(x,y)</span><br><span class="line">Z = X - Y</span><br><span class="line"><span class="built_in">scatter3</span>([<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>],[<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>],[<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>],<span class="string">'rp'</span>)</span><br><span class="line"><span class="built_in">scatter3</span>([<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>],[<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>],[<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>],<span class="string">'k'</span>)</span><br></pre></td></tr></table></figure><center><p><img src="//onns.xyz/blog/image/20181204-1.png" alt="åˆ†å‰²å¹³é¢å›¾"></p><p>å›¾4 åˆ†å‰²å¹³é¢å›¾</p></center><h2 id="é™„å½•"><a class="header-anchor" href="#é™„å½•">#</a>é™„å½•</h2><h3 id="æ„ŸçŸ¥å™¨è®­ç»ƒä»£ç "><a class="header-anchor" href="#æ„ŸçŸ¥å™¨è®­ç»ƒä»£ç ">#</a>æ„ŸçŸ¥å™¨è®­ç»ƒä»£ç </h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ----------model import----------</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line"></span><br><span class="line"><span class="comment"># ----------end model import----------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ----------global variables----------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ----------end global variables----------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ----------function definition----------</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    activation function</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span> <span class="keyword">if</span> x &gt;= <span class="number">0</span> <span class="keyword">else</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ----------end function definition----------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ----------class definition----------</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Perceptron</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, input_num, activator)</span>:</span></span><br><span class="line">        <span class="string">'''</span></span><br><span class="line"><span class="string">        initiate</span></span><br><span class="line"><span class="string">        '''</span></span><br><span class="line">        self.activator = activator</span><br><span class="line">        self.weights = [<span class="number">0.0</span>] * input_num</span><br><span class="line">        self.bias = <span class="number">0.0</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">'''</span></span><br><span class="line"><span class="string">        print weights and nbias</span></span><br><span class="line"><span class="string">        '''</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'weights: %s\nbias: %f\n'</span> % (list(self.weights), self.bias)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">predict</span><span class="params">(self, input_vec)</span>:</span></span><br><span class="line">        <span class="string">'''</span></span><br><span class="line"><span class="string">        predict function</span></span><br><span class="line"><span class="string">        '''</span></span><br><span class="line">        <span class="keyword">return</span> self.activator(</span><br><span class="line">            reduce(<span class="keyword">lambda</span> a, b: a + b,</span><br><span class="line">                   map(<span class="keyword">lambda</span> x_w: x_w[<span class="number">0</span>]*x_w[<span class="number">1</span>],</span><br><span class="line">                       zip(input_vec, self.weights)), <span class="number">0.0</span>) + self.bias)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">train</span><span class="params">(self, input_vecs, labels, iteration, rate)</span>:</span></span><br><span class="line">        <span class="string">'''</span></span><br><span class="line"><span class="string">        train the perceptron also print weights and nbias for each iteration</span></span><br><span class="line"><span class="string">        '''</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(iteration):</span><br><span class="line">            print(<span class="string">'iterations: %d'</span> % (i+<span class="number">1</span>))</span><br><span class="line">            self._one_iteration(input_vecs, labels, rate)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_one_iteration</span><span class="params">(self, input_vecs, labels, rate)</span>:</span></span><br><span class="line">        <span class="string">'''</span></span><br><span class="line"><span class="string">        iteration</span></span><br><span class="line"><span class="string">        '''</span></span><br><span class="line">        samples = zip(input_vecs, labels)</span><br><span class="line">        <span class="keyword">for</span> (input_vec, label) <span class="keyword">in</span> samples:</span><br><span class="line">            output = self.predict(input_vec)</span><br><span class="line">            self._update_weights(input_vec, output, label, rate)</span><br><span class="line">            print(input_vec, output, label)</span><br><span class="line">            print(self)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">_update_weights</span><span class="params">(self, input_vec, output, label, rate)</span>:</span></span><br><span class="line">        <span class="string">'''</span></span><br><span class="line"><span class="string">        update weights</span></span><br><span class="line"><span class="string">        '''</span></span><br><span class="line">        delta = label - output</span><br><span class="line">        self.weights = list(map(</span><br><span class="line">            <span class="keyword">lambda</span> x_w: x_w[<span class="number">1</span>] + rate * delta * x_w[<span class="number">0</span>],</span><br><span class="line">            zip(input_vec, self.weights)))</span><br><span class="line">        self.bias += rate * delta</span><br><span class="line"></span><br><span class="line"><span class="comment"># ----------end class definition----------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ----------main function----------</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    p = Perceptron(<span class="number">3</span>, f)</span><br><span class="line">    input_vecs = [[<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>], [</span><br><span class="line">        <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>], [<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>], [<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>], [<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>]]</span><br><span class="line">    labels = [<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>]</span><br><span class="line"></span><br><span class="line">    p.train(input_vecs, labels, <span class="number">10</span>, <span class="number">0.1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> x, y, z <span class="keyword">in</span> input_vecs:</span><br><span class="line">        print(<span class="string">'input: %d %d %d predict: %d'</span> % (x, y, z, p.predict([x, y, z])))</span><br><span class="line"></span><br><span class="line"><span class="comment"># ----------end main function----------</span></span><br></pre></td></tr></table></figure><script src="https://unpkg.com/viz.js@2.1.2/viz.js"></script><script src="https://unpkg.com/viz.js@2.1.2/full.render.js"></script><textarea id="graphviz-0-code" style="display: none">digraph G {    node[shape=circle,style=filled,color=green];    "x" -> "âˆ‘"[label="0"]    "y" -> "âˆ‘"[label="0"]    "z" -> "âˆ‘"[label="0"]    "âˆ‘" -> "o"[label="Î¸ = 0.0"]}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-0-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-0").append(element)  });</script><textarea id="graphviz-1-code" style="display: none">digraph G {    node[shape=circle,style=filled,color=green];    "x" -> ""[label="0.1"]    "y" -> ""[label="-0.1"]    "z" -> ""[label="-0.1"]    "" -> "o"[label="Î¸ = 0.0"]}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-1-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-1").append(element)  });</script><textarea id="graphviz-2-code" style="display: none">digraph G {    node[shape=circle,style=filled,color=green];    "x" -> ""[label="0.1"]    "y" -> ""[label="-0.1"]    "z" -> ""[label="-0.1"]    "" -> "o"[label="Î¸ = 0.0"]}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-2-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-2").append(element)  });</script>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> computational intelligence </tag>
            
            <tag> artificial neural network </tag>
            
            <tag> perceptron </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2018 Computational Intelligence Homework No.4</title>
      <link href="/blog/2018/11/25/2018-computational-intelligence-homework-no.4/"/>
      <url>/blog/2018/11/25/2018-computational-intelligence-homework-no.4/</url>
      
        <content type="html"><![CDATA[<h1 id="å¤šå°ºåº¦ååŒå˜å¼‚çš„ç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•"><a class="header-anchor" href="#å¤šå°ºåº¦ååŒå˜å¼‚çš„ç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•">#</a>å¤šå°ºåº¦ååŒå˜å¼‚çš„ç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•</h1><h2 id="é—®é¢˜æè¿°"><a class="header-anchor" href="#é—®é¢˜æè¿°">#</a>é—®é¢˜æè¿°</h2><p>å®ç°æ–‡ã€Šä¸€ç§å¤šå°ºåº¦ååŒå˜å¼‚çš„ç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•ã€‹<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>çš„æµ‹è¯•å®éªŒã€‚</p><a id="more"></a><h2 id="ç®—æ³•è®¾è®¡"><a class="header-anchor" href="#ç®—æ³•è®¾è®¡">#</a>ç®—æ³•è®¾è®¡</h2><p>â€ƒâ€ƒç²’å­ç¾¤ç®—æ³•(Particle Swarm Optimizerï¼ŒPSO)æ˜¯ç”±Kennedyå’ŒEberhartåšå£«æå‡ºçš„ä¸€ç§åŸºäºç¾¤ä½“æ™ºèƒ½çš„ä¼˜åŒ–ç®—æ³•, å…¶åŸºæœ¬æ€æƒ³æ˜¯å—åˆ°ä»–ä»¬æ—©æœŸå¯¹è®¸å¤šé¸Ÿç±»çš„ç¾¤ä½“è¡Œä¸ºè¿›è¡Œå»ºæ¨¡ä¸ä»¿çœŸç ”ç©¶çš„å¯å‘. ç²’å­ç¾¤ç®—æ³•çš„ä¼˜åŠ¿åœ¨äºå…¶ç®€å•å®¹æ˜“å®ç°,æ²¡æœ‰å¾ˆå¤šå‚æ•°éœ€è¦è°ƒæ•´,æ˜¯éçº¿æ€§è¿ç»­ä¼˜åŒ–é—®é¢˜ã€ç»„åˆä¼˜åŒ–é—®é¢˜å’Œæ··åˆæ•´æ•°éçº¿æ€§ä¼˜åŒ–é—®é¢˜çš„æœ‰æ•ˆä¼˜åŒ–å·¥å…·. ç”±äºPSOç®—æ³•æ¦‚å¿µç®€å•ã€å®ç°å®¹æ˜“ï¼Œåœ¨å‡½æ•°ä¼˜åŒ–å’Œç¥ç»ç½‘ç»œæƒå€¼è®­ç»ƒç­‰æ–¹é¢éƒ½æœ‰å¾ˆå¥½çš„è¡¨ç°. ç”±äºå…¶åˆå…·æœ‰æ·±åˆ»çš„æ™ºèƒ½èƒŒæ™¯ï¼Œæ—¢é€‚åˆç§‘å­¦ç ”ç©¶ï¼Œåˆç‰¹åˆ«é€‚äºå·¥ç¨‹åº”ç”¨, å› æ­¤åœ¨è¿‘å¹´æ¥å¾—åˆ°äº†é£é€Ÿçš„å‘å±•. å…¶åº”ç”¨æ¶‰åŠç³»ç»Ÿæ§åˆ¶ã€äººå·¥æ™ºèƒ½ã€æ¨¡å¼è¯†åˆ«ã€è®¡ç®—æœºã€é€šä¿¡å·¥ç¨‹ç­‰å„ä¸ªé¢†åŸŸ. ç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•é—®ä¸–ä»¥æ¥å—åˆ°äº†å¹¿æ³›çš„é‡è§†, ç»è¿‡åå‡ å¹´çš„ç ”ç©¶, å…¶ä¸è®ºåœ¨åº”ç”¨æ–¹é¢è¿˜æ˜¯åœ¨ä¼˜åŒ–æ€§èƒ½æ–¹é¢éƒ½å¾—åˆ°äº†å¾ˆå¤§çš„å‘å±•. ç„¶è€Œ, ç ”ç©¶äººå‘˜ä»ç„¶æ— æ³•è§£å†³ä¸€ç›´å›°æ‰°è¯¥ç®—æ³•çš„ä¸¤ä¸ªéš¾é¢˜: æ—©ç†Ÿå’Œæ”¶æ•›é€Ÿåº¦æ…¢.<br>â€ƒâ€ƒæ–‡ä¸­æå‡ºä¸€ç§å¤šå°ºåº¦ååŒå˜å¼‚çš„å¾®ç²’ç¾¤ç®—æ³•(MAEPSO). è¯¥ç®—æ³•åˆ©ç”¨ä¸åŒå¤§å°æ–¹å·®çš„é«˜æ–¯å˜å¼‚æœºåˆ¶å®ç°è§£ç©ºé—´çš„æ¢ç´¢, è¿™ç§å¤šä¸ªæˆ–å¤§æˆ–å°çš„å˜å¼‚æœºåˆ¶, èƒ½ä¿ƒä½¿æ•´ä¸ªç§ç¾¤ä»¥å°½é‡åˆ†æ•£çš„å˜å¼‚å°ºåº¦æ¥å¯¹è§£ç©ºé—´è¿›è¡Œæ›´åŠ è¯¦å°½çš„æ¢ç´¢. åŒæ—¶é«˜æ–¯å˜å¼‚çš„èŒƒå›´éšç€é€‚åº”å€¼çš„å˜å°ä¹Ÿé€æ¸é™ä½, åœ¨ç®—æ³•åæœŸæœ‰åˆ©äºæé«˜æœ€ä¼˜è§£çš„ç²¾åº¦; åœ¨åˆ©ç”¨ä¸åŒå¤§å°å˜å¼‚ç®—å­æé«˜å±€éƒ¨ç²¾ç¡®æœç´¢èƒ½åŠ›çš„åŒæ—¶, è¯¥ç®—æ³•åŒæ ·åˆ©ç”¨å‡åŒ€ç®—å­ç»´æŠ¤ç§ç¾¤å¤šæ ·æ€§. åˆ©ç”¨è¯•éªŒå¯¹ä¸åŒè¯„æµ‹å‡½æ•°è¿›è¡Œæµ‹è¯•å‡éªŒè¯æ–°ç®—æ³•ä¼˜è‰¯çš„ä¼˜åŒ–æ€§èƒ½.</p><h3 id="é€Ÿåº¦æ›´æ–°"><a class="header-anchor" href="#é€Ÿåº¦æ›´æ–°">#</a>é€Ÿåº¦æ›´æ–°</h3><p>â€ƒâ€ƒé€Ÿåº¦æ›´æ–°çš„å…¬å¼ä¸º:</p>$$v_{id}(t+1)=wÃ—v_{id}(t) + c_1Ã—r_1Ã—(p_{id}(t)âˆ’x_{id}(t)) \\\ + c_2Ã—r_2Ã—(p_{gd}(t)âˆ’x_{id}(t))\tag{1}$$<h3 id="ä½ç½®æ›´æ–°"><a class="header-anchor" href="#ä½ç½®æ›´æ–°">#</a>ä½ç½®æ›´æ–°</h3><p>â€ƒâ€ƒä½ç½®æ›´æ–°çš„å…¬å¼ä¸º:</p>$$x_{id}(t+1) = x_{id}(t) + v_{id}(t+1)\tag{2}$$<h3 id="å¤šå°ºåº¦é«˜æ–¯å˜å¼‚ç®—å­"><a class="header-anchor" href="#å¤šå°ºåº¦é«˜æ–¯å˜å¼‚ç®—å­">#</a>å¤šå°ºåº¦é«˜æ–¯å˜å¼‚ç®—å­</h3><p>â€ƒâ€ƒè®¾å°ºåº¦ä¸ªæ•°ä¸º$M$, é¦–å…ˆåˆå§‹åŒ–å¤šå°ºåº¦é«˜æ–¯å˜å¼‚ç®—å­çš„åˆå§‹æ–¹å·®</p>$$\sigma^{(0)} = (\sigma_1^{(0)},\sigma_2^{(0)},\cdots,\sigma_M^{(0)})\tag{3}$$<p>â€ƒâ€ƒåˆå§‹æ—¶, æ–¹å·®ä¸€èˆ¬è®¾å®šä¸ºä¼˜åŒ–å˜é‡çš„å–å€¼èŒƒå›´, éšç€è¿­ä»£æ¬¡æ•°çš„å¢åŠ , å¤šå°ºåº¦é«˜æ–¯å˜å¼‚ç®—å­çš„æ–¹å·®ä¼šéšä¹‹è¿›è¡Œè°ƒæ•´, å…·ä½“è°ƒæ•´æ–¹å¼å¦‚ä¸‹æ‰€ç¤º, é¦–å…ˆæ ¹æ®é€‚åº”å€¼çš„å¤§å°å¯¹ç§ç¾¤ä¸­çš„å¾®ç²’è¿›è¡Œç”±å°åˆ°å¤§æ’åº, ç„¶åå¯¹å…¶è¿›è¡Œç»„åˆ, ç”Ÿæˆ$M$ä¸ªå­ç¾¤, æ¯ä¸€ä¸ªå­ç¾¤çš„å¾®ç²’ä¸ªæ•°ä¸º$P = N / M $, $K$æ˜¯å½“å‰è¿­ä»£æ¬¡æ•°, è®¡ç®—æ¯ä¸€ä¸ªå­ç¾¤çš„é€‚åº”åº¦:</p>$$FitX_m^{(K)} = \sum_{i=1}^Pf(x_i^m) / P,m = 1,2,\cdots,M\tag{4}$$<p>â€ƒâ€ƒå…¶ä¸­$f$æ˜¯å¾®ç²’çš„é€‚åº”å€¼è®¡ç®—å‡½æ•°, ä¸åŒå˜å¼‚å°ºåº¦ä¹‹é—´ç›¸äº’ç«äº‰, æ ¹æ®é€‚åº”èƒ½åŠ›çš„ä¸åŒè€Œè®¾ç½®ä¸åŒçš„å˜å¼‚èƒ½åŠ›, å› æ­¤ç¬¬$m$ä¸ªå˜å¼‚ç®—å­çš„æ ‡å‡†å·®ä¸º:</p>$$\sigma_m^{(K)} = \sigma_m^{(K-1)} exp(\frac{M\cdot FitX_m^{(K)} - \sum_{m=1}^MFitX_m^{(K)}}{FitX_{max} - FitX_{min}})\tag{5}$$$$FitX_{max} = max(FitX_1^{(K)},FitX_2^{(K)},\cdots,FitX_M^{(K)})\tag{6}$$$$FitX_{min} = min(FitX_1^{(K)},FitX_2^{(K)},\cdots,FitX_M^{(K)})\tag{7}$$<p>ç”±äºå˜å¼‚ç®—å­çš„è¿›åŒ–æ˜¯ä¸€ä¸ªé€’å½’è¿‡ç¨‹, æ’åœ¨åé¢çš„å˜å¼‚ç®—å­å¯èƒ½å¾ˆå¤§, å› æ­¤å¯¹å˜å¼‚ç®—å­çš„æ ‡å‡†å·®åšå¦‚ä¸‹è§„èŒƒ: å¦‚æœ$\sigma_i^{(k)} &gt;W/4$, åˆ™</p>$$\sigma_i^{(k)} = \vert W/4 - \sigma_i^{(k)} \vert\tag{8}$$<p>$W$ä¸ºå¾…ä¼˜åŒ–å˜é‡ç©ºé—´çš„å®½åº¦, é‡å¤ä½¿ç”¨ä¸Šå¼, ç›´åˆ°æ»¡è¶³$\sigma_i^{(k)} &lt; W/4$. ä¸ºäº†èƒ½æœ€å¤§èŒƒå›´çš„å®ç°ç©ºé—´å‹˜æ¢$i$èƒ½åŠ›, åœ¨è¿›è¡Œå®Œå¤šå°ºåº¦é«˜æ–¯å˜å¼‚å, åŒæ—¶è¿›è¡Œä¸€æ¬¡å‡åŒ€å˜å¼‚æ“ä½œ, æ¯”è¾ƒåå–æ‰€æœ‰å˜å¼‚åé€‚åº”å€¼æœ€å¥½çš„ä½ç½®ä½œä¸ºæ–°çš„é€ƒé€¸ç‚¹, å‡åŒ€å˜å¼‚ç®—å­å®ç°åŒ<code>å¼(9)</code>.é€šè¿‡å¤šå°ºåº¦å˜å¼‚ç®—å­èƒ½å®ç°æ•´ä¸ªæœç´¢ç©ºé—´çš„è¦†ç›–, å…¶ä¸­å¤§å°ºåº¦æœ‰åˆ©äºå®ç°è§£ç©ºé—´çš„ç²—æœç´¢, å¯ä»¥å¿«é€Ÿå®šä½åˆ°æœ€ä¼˜è§£åŒºåŸŸ, å°å°ºåº¦èƒ½åœ¨è¿›åŒ–åæœŸå®ç°å±€éƒ¨ç²¾ç¡®è§£çš„æœç´¢.</p>$$If \quad (v_{id} < T_d ) \quad then \quad v_{id} = rand Ã— V_{max}\tag{9}$$<h2 id="ç¨‹åºæµç¨‹"><a class="header-anchor" href="#ç¨‹åºæµç¨‹">#</a>ç¨‹åºæµç¨‹</h2><p>ç¨‹åºæµç¨‹å¦‚<code>å›¾1</code>æ‰€ç¤º</p><center><div id="flowchart-0" class="flow-chart"></div><p>å›¾1 ç¨‹åºæµç¨‹å›¾</p></center><h2 id="ä»£ç è¿è¡ŒåŠæµ‹è¯•"><a class="header-anchor" href="#ä»£ç è¿è¡ŒåŠæµ‹è¯•">#</a>ä»£ç è¿è¡ŒåŠæµ‹è¯•</h2><p>ä»£ç è¿è¡Œç»“æœå¦‚<code>è¡¨1</code>æ‰€ç¤º.</p><center>è¡¨1: è¿è¡Œç»“æœ</center><table><thead><tr><th style="text-align:center">function</th><th style="text-align:center">min</th><th style="text-align:center">max</th><th style="text-align:center">mean</th><th style="text-align:center">derivation</th></tr></thead><tbody><tr><td style="text-align:center">Tablet</td><td style="text-align:center">1.7048e<sup>-25</sup></td><td style="text-align:center">1.8725e<sup>-13</sup></td><td style="text-align:center">2.4511e<sup>-14</sup></td><td style="text-align:center">3.3659e<sup>-27</sup></td></tr><tr><td style="text-align:center">Quadric</td><td style="text-align:center">4.6845e<sup>-24</sup></td><td style="text-align:center">2.1658e<sup>-13</sup></td><td style="text-align:center">1.5153e<sup>-14</sup></td><td style="text-align:center">2.4005e<sup>-27</sup></td></tr><tr><td style="text-align:center">Rosenbrock</td><td style="text-align:center">24.6117</td><td style="text-align:center">35.1629</td><td style="text-align:center">27.9979</td><td style="text-align:center">13.0007</td></tr><tr><td style="text-align:center">Griewank</td><td style="text-align:center">0</td><td style="text-align:center">9.7511e<sup>-13</sup></td><td style="text-align:center">1.1072e<sup>-13</sup></td><td style="text-align:center">9.2515e<sup>-26</sup></td></tr><tr><td style="text-align:center">Rastrigin</td><td style="text-align:center">0</td><td style="text-align:center">0.9950</td><td style="text-align:center">0.0995</td><td style="text-align:center">0.0990</td></tr><tr><td style="text-align:center">Schaffer</td><td style="text-align:center">0.0797</td><td style="text-align:center">0.3685</td><td style="text-align:center">0.1838</td><td style="text-align:center">0.0099</td></tr></tbody></table><h2 id="ç»“è®º"><a class="header-anchor" href="#ç»“è®º">#</a>ç»“è®º</h2><p>è®ºæ–‡æå‡ºä¸€ç§æ–°çš„å¤šå°ºåº¦ååŒå˜å¼‚çš„å¾®ç²’ç¾¤ç®—æ³•, åˆ©ç”¨ä¸åŒå¤§å°åˆå§‹æ–¹å·®çš„é«˜æ–¯å˜å¼‚æœºåˆ¶å®ç°è§£ç©ºé—´çš„æ¢ç´¢, è¿™ç§å¤šä¸ªæˆ–å¤§æˆ–å°çš„å˜å¼‚æœºåˆ¶, èƒ½ä¿ƒä½¿æ•´ä¸ªç§ç¾¤ä»¥å°½é‡åˆ†æ•£çš„å˜å¼‚å°ºåº¦æ¥å¯¹è§£ç©ºé—´è¿›è¡Œæ›´åŠ è¯¦å°½çš„æ¢ç´¢. åŒæ—¶é«˜æ–¯å˜å¼‚çš„èŒƒå›´éšç€é€‚åº”å€¼çš„å˜å°ä¹Ÿé€æ¸é™ä½, æœ‰åˆ©äºæé«˜æœ€ä¼˜è§£çš„ç²¾åº¦; åœ¨åˆ©ç”¨ä¸åŒå¤§å°å˜å¼‚ç®—å­æé«˜å±€éƒ¨ç²¾ç¡®æœç´¢èƒ½åŠ›çš„åŒæ—¶, è¯¥ç®—æ³•åŒæ ·åˆ©ç”¨å‡åŒ€å˜å¼‚ç®—å­ç»´æŠ¤ç§ç¾¤å¤šæ ·æ€§. é€šè¿‡6ä¸ªbenchmark æ•°æ®è¿›è¡Œæµ‹è¯•, å®éªŒç»“æœè¡¨æ˜æ–°ç®—æ³•èƒ½å¤Ÿåœ¨ç®—æ³•åˆæœŸå°±èƒ½å¤Ÿå¿«é€Ÿå®šä½åˆ°æœç´¢ç©ºé—´çš„æœ€ä¼˜è§£åŒºåŸŸ, è¿›è€Œä½¿å¾—å¾®ç²’é€šè¿‡è¿›åŒ–PSOåŠå°å°ºåº¦å˜å¼‚ç®—å­å‘ç€æœ€ä¼˜ç²¾ç¡®è§£ç©ºé—´é€¼è¿‘, ä½¿å…¶åœ¨è¿›åŒ–è¿‡ç¨‹ä¸­ä¿æŒå±€éƒ¨æœ€ä¼˜è§£ç©ºé—´å¼€é‡‡çš„èƒ½åŠ›, åŠ å¿«äº†ç®—æ³•çš„æ”¶æ•›é€Ÿåº¦.</p><script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.3.0/raphael.min.js"></script><script src="//flowchart.js.org/flowchart-latest.js"></script><textarea id="flowchart-0-code" style="display: none">st=>start: éšæœºåˆå§‹åŒ–æ¯ä¸ªç²’å­op1=>operation: è¯„ä¼°æ¯ä¸ªç²’å­å¹¶å¾—åˆ°å…¨å±€æœ€ä¼˜op2=>operation: æ›´æ–°æ¯ä¸ªç²’å­çš„é€Ÿåº¦å’Œä½ç½®op3=>operation: è¯„ä¼°æ¯ä¸ªç²’å­çš„å‡½æ•°é€‚åº”å€¼op4=>operation: æ›´æ–°æ¯ä¸ªç²’å­å†å²æœ€ä¼˜ä½ç½®op5=>operation: æ›´æ–°ç¾¤ä½“çš„å…¨å±€æœ€ä¼˜ä½ç½®cond1=>condition: ç»ˆæ­¢åˆ¤æ®æ˜¯å¦æ»¡è¶³?e1=>end: ç®—æ³•ç»“æŸst->op1->cond1cond1(no, bottom)->op2->op3->op4->op5->cond1cond1(yes)->e1</textarea><textarea id="flowchart-0-options" style="display: none">{"scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12}</textarea><script>  var code = document.getElementById("flowchart-0-code").value;  var options = JSON.parse(decodeURIComponent(document.getElementById("flowchart-0-options").value));  var diagram = flowchart.parse(code);  diagram.drawSVG("flowchart-0", options);</script><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="http://www.cnki.com.cn/Article/CJFDTotal-RJXB201207015.htm" target="_blank" rel="noopener">ä¸€ç§å¤šå°ºåº¦ååŒå˜å¼‚çš„ç²’å­ç¾¤ä¼˜åŒ–ç®—æ³•</a> <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> computational intelligence </tag>
            
            <tag> TSP </tag>
            
            <tag> GA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2018 Computational Intelligence Homework No.3</title>
      <link href="/blog/2018/11/23/2018-computational-intelligence-homework-no.3/"/>
      <url>/blog/2018/11/23/2018-computational-intelligence-homework-no.3/</url>
      
        <content type="html"><![CDATA[<h1 id="ç”¨-ga-ç®—æ³•æ±‚è§£æ—…è¡Œå•†é—®é¢˜"><a class="header-anchor" href="#ç”¨-ga-ç®—æ³•æ±‚è§£æ—…è¡Œå•†é—®é¢˜">#</a>ç”¨ GA ç®—æ³•æ±‚è§£æ—…è¡Œå•†é—®é¢˜</h1><h2 id="é—®é¢˜æè¿°"><a class="header-anchor" href="#é—®é¢˜æè¿°">#</a>é—®é¢˜æè¿°</h2><p>æ—…è¡Œå•†é—®é¢˜(Travelling Salesman Problem, ç®€è®° TSP, äº¦ç§°è´§éƒæ‹…é—®é¢˜): è®¾æœ‰ 34 ä¸ªåŸå¸‚åŠå…¶å¯¹åº”çš„ç»çº¬åº¦åæ ‡, åˆ™é—®é¢˜æ˜¯è¦æ‰¾å‡ºéè®¿æ¯ä¸ªåŸå¸‚æ°å¥½ä¸€æ¬¡çš„ä¸€æ¡å›è·¯å¹¶ä½¿å…¶è·¯å¾„é•¿åº¦ä¸ºæœ€çŸ­.</p><a id="more"></a><h2 id="ç®—æ³•è®¾è®¡"><a class="header-anchor" href="#ç®—æ³•è®¾è®¡">#</a>ç®—æ³•è®¾è®¡</h2><p>é—ä¼ ç®—æ³•æ˜¯æ¨¡æ‹Ÿè¾¾å°”æ–‡ç”Ÿç‰©è¿›åŒ–è®ºçš„è‡ªç„¶é€‰æ‹©å’Œé—ä¼ å­¦æœºç†çš„ç”Ÿç‰©è¿›åŒ–è¿‡ç¨‹çš„è®¡ç®—æ¨¡å‹ï¼Œæ˜¯ä¸€ç§é€šè¿‡æ¨¡æ‹Ÿè‡ªç„¶è¿›åŒ–è¿‡ç¨‹æœç´¢æœ€ä¼˜è§£çš„æ–¹æ³•ã€‚é—ä¼ ç®—æ³•æ˜¯ä»ä»£è¡¨é—®é¢˜å¯èƒ½æ½œåœ¨çš„è§£é›†çš„ä¸€ä¸ªç§ç¾¤å¼€å§‹çš„ï¼Œè€Œä¸€ä¸ªç§ç¾¤åˆ™ç”±ç»è¿‡åŸºå› ç¼–ç çš„ä¸€å®šæ•°ç›®çš„ä¸ªä½“ç»„æˆã€‚æ¯ä¸ªä¸ªä½“å®é™…ä¸Šæ˜¯æŸ“è‰²ä½“å¸¦æœ‰ç‰¹å¾çš„å®ä½“ã€‚æŸ“è‰²ä½“ä½œä¸ºé—ä¼ ç‰©è´¨çš„ä¸»è¦è½½ä½“ï¼Œå³å¤šä¸ªåŸºå› çš„é›†åˆï¼Œå…¶å†…éƒ¨è¡¨ç°(å³åŸºå› å‹)æ˜¯æŸç§åŸºå› ç»„åˆï¼Œå®ƒå†³å®šäº†ä¸ªä½“çš„å½¢çŠ¶çš„å¤–éƒ¨è¡¨ç°ï¼Œå¦‚é»‘å¤´å‘çš„ç‰¹å¾æ˜¯ç”±æŸ“è‰²ä½“ä¸­æ§åˆ¶è¿™ä¸€ç‰¹å¾çš„æŸç§åŸºå› ç»„åˆå†³å®šçš„ã€‚å› æ­¤ï¼Œåœ¨ä¸€å¼€å§‹éœ€è¦å®ç°ä»è¡¨ç°å‹åˆ°åŸºå› å‹çš„æ˜ å°„å³ç¼–ç å·¥ä½œã€‚ç”±äºä»¿ç…§åŸºå› ç¼–ç çš„å·¥ä½œå¾ˆå¤æ‚ï¼Œæˆ‘ä»¬å¾€å¾€è¿›è¡Œç®€åŒ–ï¼Œå¦‚äºŒè¿›åˆ¶ç¼–ç ï¼Œåˆä»£ç§ç¾¤äº§ç”Ÿä¹‹åï¼ŒæŒ‰ç…§é€‚è€…ç”Ÿå­˜å’Œä¼˜èƒœåŠ£æ±°çš„åŸç†ï¼Œé€ä»£æ¼”åŒ–äº§ç”Ÿå‡ºè¶Šæ¥è¶Šå¥½çš„è¿‘ä¼¼è§£ï¼Œåœ¨æ¯ä¸€ä»£ï¼Œæ ¹æ®é—®é¢˜åŸŸä¸­ä¸ªä½“çš„é€‚åº”åº¦å¤§å°é€‰æ‹©ä¸ªä½“ï¼Œå¹¶å€ŸåŠ©äºè‡ªç„¶é—ä¼ å­¦çš„é—ä¼ ç®—å­è¿›è¡Œç»„åˆäº¤å‰å’Œå˜å¼‚ï¼Œäº§ç”Ÿå‡ºä»£è¡¨æ–°çš„è§£é›†çš„ç§ç¾¤ã€‚è¿™ä¸ªè¿‡ç¨‹å°†å¯¼è‡´ç§ç¾¤åƒè‡ªç„¶è¿›åŒ–ä¸€æ ·çš„åç”Ÿä»£ç§ç¾¤æ¯”å‰ä»£æ›´åŠ é€‚åº”äºç¯å¢ƒï¼Œæœ«ä»£ç§ç¾¤ä¸­çš„æœ€ä¼˜ä¸ªä½“ç»è¿‡è§£ç ï¼Œå¯ä»¥ä½œä¸ºé—®é¢˜è¿‘ä¼¼æœ€ä¼˜è§£ã€‚<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p><h3 id="ä¸ªä½“é€‚åº”æ€§"><a class="header-anchor" href="#ä¸ªä½“é€‚åº”æ€§">#</a>ä¸ªä½“é€‚åº”æ€§</h3><p>é—ä¼ ç®—æ³•ä¸­çš„é€‚åº”æ€§åœ¨æ—…è¡Œå•†é—®é¢˜ä¸­å¯¹åº”çš„æ˜¯èµ°è¿‡æ‰€æœ‰çš„ç‚¹çš„è·ç¦»ä¹‹å’Œï¼Œè·ç¦»è¶Šå°åˆ™æ‰€ä»£è¡¨çš„é€‚åº”æ€§è¶Šå¼ºã€‚</p><h3 id="dna-ç¼–ç "><a class="header-anchor" href="#dna-ç¼–ç ">#</a>DNA ç¼–ç </h3><p>ç¼–ç æ˜¯åº”ç”¨é—ä¼ ç®—æ³•æ—¶è¦è§£å†³çš„é¦–è¦é—®é¢˜ï¼Œä¹Ÿæ˜¯è®¾è®¡é—ä¼ ç®—æ³•æ—¶çš„ä¸€ä¸ªå…³é”®æ­¥éª¤ã€‚ç¼–ç æ–¹æ³•å½±å“åˆ°äº¤å‰ç®—å­ã€å˜å¼‚ç®—å­ç­‰é—ä¼ ç®—å­çš„è¿ç®—æ–¹æ³•ï¼Œå¤§å¾ˆå¤§ç¨‹åº¦ä¸Šå†³å®šäº†é—ä¼ è¿›åŒ–çš„æ•ˆç‡ã€‚åœ¨æ—…è¡Œå•†é—®é¢˜ä¸­çš„ DNA ç¼–ç æ–¹å¼æ˜¯<code>äºŒè¿›åˆ¶ç¼–ç </code>æ–¹å¼ï¼Œå…·ä½“æ˜¯å°†åæ ‡åˆ†åˆ«æ”¾å…¥ä¸¤æ¡ DNA ä¸­ï¼Œå½¢æˆ<code>x</code>å’Œ<code>y</code>ä¸¤æ¡ DNAï¼Œå¦‚ä¸‹æ‰€ç¤º:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">x:</span><br><span class="line">[<span class="number">121.47</span> <span class="number">115.85</span> <span class="number">117.25</span> <span class="number">108.93</span> <span class="number">106.55</span> <span class="number">112.55</span> <span class="number">114.52</span> <span class="number">121.52</span> <span class="number">108.37</span>  <span class="number">91.13</span></span><br><span class="line">  <span class="number">87.62</span> <span class="number">106.63</span> <span class="number">111.73</span> <span class="number">101.78</span> <span class="number">119.3</span>  <span class="number">114.3</span>  <span class="number">125.32</span> <span class="number">116.4</span>  <span class="number">117.2</span>  <span class="number">116.98</span></span><br><span class="line"> <span class="number">118.78</span> <span class="number">113.62</span> <span class="number">114.17</span> <span class="number">113.27</span> <span class="number">108.37</span> <span class="number">123.43</span> <span class="number">120.15</span> <span class="number">113.55</span> <span class="number">102.72</span> <span class="number">104.07</span></span><br><span class="line"> <span class="number">112.93</span> <span class="number">103.82</span> <span class="number">106.28</span> <span class="number">126.53</span>]</span><br><span class="line">y:</span><br><span class="line">[<span class="number">31.23</span> <span class="number">28.68</span> <span class="number">31.83</span> <span class="number">34.27</span> <span class="number">29.57</span> <span class="number">37.87</span> <span class="number">38.05</span> <span class="number">25.03</span> <span class="number">22.82</span> <span class="number">29.65</span> <span class="number">43.82</span> <span class="number">26.65</span></span><br><span class="line"> <span class="number">40.83</span> <span class="number">36.62</span> <span class="number">26.08</span> <span class="number">30.6</span>  <span class="number">43.9</span>  <span class="number">39.9</span>  <span class="number">39.12</span> <span class="number">36.67</span> <span class="number">32.07</span> <span class="number">34.75</span> <span class="number">22.28</span> <span class="number">23.13</span></span><br><span class="line"> <span class="number">22.82</span> <span class="number">41.8</span>  <span class="number">30.28</span> <span class="number">22.19</span> <span class="number">25.05</span> <span class="number">30.67</span> <span class="number">28.23</span> <span class="number">36.07</span> <span class="number">38.47</span> <span class="number">45.8</span>]</span><br></pre></td></tr></table></figure><h3 id="é€‚è€…ç”Ÿå­˜-selection"><a class="header-anchor" href="#é€‚è€…ç”Ÿå­˜-selection">#</a>é€‚è€…ç”Ÿå­˜ (selection)</h3><p>é€šè¿‡ä¸ªä½“é€‚åº”æ€§æ¥æŒ‘é€‰ï¼Œé€‚åº”æ€§è¶Šé«˜(å³è·ç¦»è¶Šå°)å°±è¶Šå¯èƒ½è¢«é€‰åˆ°ã€‚</p><h3 id="äº¤å‰é…å¯¹-crossover"><a class="header-anchor" href="#äº¤å‰é…å¯¹-crossover">#</a>äº¤å‰é…å¯¹ (crossover)</h3><p>åœ¨æ—…è¡Œå•†é—®é¢˜ä¸­ï¼Œäº¤å‰é…å¯¹ä¸èƒ½é€šè¿‡ç®€å•çš„ä»çˆ¶æ¯çš„ DNA ä¸­å–ä¸€åŠæ¥å®Œæˆï¼Œè¿™æ ·ä¼šäº§ç”Ÿé‡å¤ç‚¹ã€‚<br>æ›¿ä»£åŠæ³•æ˜¯å°†çˆ¶ä»£çš„ DNA ä¸­é€‰å–çš„ç‚¹å¾—åˆ°åæŒ‰é¡ºåºæ”¾ç½®åˆ°æ–° DNA çš„å‰åŠéƒ¨ï¼Œç„¶åå†ä»æ¯ä»£çš„ DNA ä¸­é€‰å–å‰©ä¸‹çš„ç‚¹ï¼Œæ”¾åˆ°æ–° DNA çš„ååŠéƒ¨ã€‚</p><h3 id="å˜å¼‚-mutation"><a class="header-anchor" href="#å˜å¼‚-mutation">#</a>å˜å¼‚ (mutation)</h3><p>åœ¨æ—…è¡Œå•†é—®é¢˜ä¸­ï¼Œå˜å¼‚åªéœ€è¦éšæœºäº¤æ¢ä¸¤ä¸ªç‚¹çš„ä½ç½®å³å¯ã€‚</p><h2 id="ç¨‹åºæµç¨‹"><a class="header-anchor" href="#ç¨‹åºæµç¨‹">#</a>ç¨‹åºæµç¨‹</h2><p>ç¨‹åºæµç¨‹å¦‚<code>å›¾1</code>æ‰€ç¤º</p><center><div id="flowchart-0" class="flow-chart"></div><p>å›¾ 1 ç¨‹åºæµç¨‹å›¾</p></center><h2 id="æ ¸å¿ƒä¼ªä»£ç "><a class="header-anchor" href="#æ ¸å¿ƒä¼ªä»£ç ">#</a>æ ¸å¿ƒä¼ªä»£ç </h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿­ä»£N_GENERATIONSæ¬¡</span></span><br><span class="line"><span class="keyword">for</span> generation <span class="keyword">in</span> range(N_GENERATIONS):</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å°†åŸå¸‚åæ ‡è½¬æ¢ä¸ºDNA</span></span><br><span class="line">    lx, ly = translateDNA(pop, CITIES)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è®¡ç®—ä¸ªä½“é€‚åº”æ€§</span></span><br><span class="line">    fitness, total_distance = get_fitness(lx, ly)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># é€‚è€…ç”Ÿå­˜</span></span><br><span class="line">    pop = select(fitness)</span><br><span class="line">    pop_copy = pop.copy()</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¯¹äºç§ç¾¤ä¸­çš„æ¯ä¸€ä¸ªçˆ¶æ¯ä»£</span></span><br><span class="line">    <span class="keyword">for</span> parent <span class="keyword">in</span> pop:</span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ‚äº¤</span></span><br><span class="line">        child = crossover(parent, pop_copy)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># å˜å¼‚</span></span><br><span class="line">        child = mutate(child)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># åŠ å…¥åˆ°æ–°ç§ç¾¤ä¸­</span></span><br><span class="line">        parent[:] = child</span><br></pre></td></tr></table></figure><h2 id="ä»£ç è¿è¡ŒåŠæµ‹è¯•"><a class="header-anchor" href="#ä»£ç è¿è¡ŒåŠæµ‹è¯•">#</a>ä»£ç è¿è¡ŒåŠæµ‹è¯•</h2><p>é€‰å–çš„å‚æ•°å¦‚<code>è¡¨1</code>æ‰€ç¤º.</p><center>å‚æ•°è¡¨</center><table><thead><tr><th style="text-align:center">å‚æ•°åç§°</th><th style="text-align:center">å‚æ•°å€¼</th></tr></thead><tbody><tr><td style="text-align:center">åŸå¸‚æ•°é‡</td><td style="text-align:center">34</td></tr><tr><td style="text-align:center">åŸå¸‚åæ ‡</td><td style="text-align:center"><a href="#city_list">é™„å½•:åŸå¸‚åæ ‡</a></td></tr><tr><td style="text-align:center">äº¤å‰æ¦‚ç‡</td><td style="text-align:center">0.1</td></tr><tr><td style="text-align:center">å˜å¼‚æ¦‚ç‡</td><td style="text-align:center">0.02</td></tr><tr><td style="text-align:center">ç§ç¾¤è§„æ¨¡</td><td style="text-align:center">1000</td></tr><tr><td style="text-align:center">è¿­ä»£æ¬¡æ•°</td><td style="text-align:center">500</td></tr></tbody></table><p>ä»£ç è¿è¡Œç»“æœå¦‚<code>å›¾2</code>æ‰€ç¤º.</p><center><p><img src="//onns.xyz/blog/image/20181124-1.png" alt="è¿è¡Œç»“æœå›¾"></p><p>å›¾ 2 è¿è¡Œç»“æœå›¾</p></center><h2 id="ç»“è®º"><a class="header-anchor" href="#ç»“è®º">#</a>ç»“è®º</h2><p>34 ä¸ªåŸå¸‚çš„æœ€ç»ˆç»“æœä¸º<code>16434.4730</code>å…¬é‡Œã€‚<br>æ€»å¾—æ¥è¯´é—ä¼ ç®—æ³•è§£å†³æ—…è¡Œå•†é—®é¢˜æ˜¯ç”±è¿ç»­é—®é¢˜å½’çº³åˆ°ç»„åˆé—®é¢˜çš„æ±‚è§£ï¼Œä½¿å¾—ç²¾åº¦å—åˆ°å¾ˆå¤§çš„å½±å“ï¼Œæœ€ç»ˆç»“æœæœ‰æ—¶ä¹Ÿå®¹æ˜“é™·å…¥åˆ°å±€éƒ¨æ—©ç†Ÿè€Œå¯¼è‡´ç»“æœä¸ç†æƒ³ï¼Œä¸è¿‡é—ä¼ ç®—æ³•è¿˜æ˜¯å…·æœ‰è¾ƒå¼ºçš„å…¨å±€æœç´¢èƒ½åŠ›ï¼Œåœ¨è®¡ç®—ç²¾åº¦è¦æ±‚è¾ƒé«˜æ—¶ï¼Œå¯¹è®¡ç®—æ—¶é—´çš„èŠ±è´¹è¾ƒå°‘ã€‚</p><h2 id="å‚è€ƒé“¾æ¥"><a class="header-anchor" href="#å‚è€ƒé“¾æ¥">#</a>å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://morvanzhou.github.io/tutorials/machine-learning/evolutionary-algorithm/2-01-genetic-algorithm/" target="_blank" rel="noopener">é—ä¼ ç®—æ³•</a></li></ul><p style="page-break-before: always"></p><h2 id="é™„å½•"><a class="header-anchor" href="#é™„å½•">#</a>é™„å½•</h2><h3 id="åŸå¸‚åæ ‡"><a class="header-anchor" href="#åŸå¸‚åæ ‡">#</a>åŸå¸‚åæ ‡</h3><center id="city_list">åŸå¸‚åæ ‡è¡¨</center><table><thead><tr><th style="text-align:center">åºå·</th><th style="text-align:center">çœä»½</th><th style="text-align:center">ç»åº¦</th><th style="text-align:center">çº¬åº¦</th></tr></thead><tbody><tr><td style="text-align:center">01</td><td style="text-align:center">åŒ—äº¬</td><td style="text-align:center">116.4</td><td style="text-align:center">39.9</td></tr><tr><td style="text-align:center">02</td><td style="text-align:center">å¤©æ´¥</td><td style="text-align:center">117.2</td><td style="text-align:center">39.12</td></tr><tr><td style="text-align:center">03</td><td style="text-align:center">æ²³åŒ—</td><td style="text-align:center">114.52</td><td style="text-align:center">38.05</td></tr><tr><td style="text-align:center">04</td><td style="text-align:center">å±±è¥¿</td><td style="text-align:center">112.55</td><td style="text-align:center">37.87</td></tr><tr><td style="text-align:center">05</td><td style="text-align:center">å†…è’™å¤</td><td style="text-align:center">111.73</td><td style="text-align:center">40.83</td></tr><tr><td style="text-align:center">06</td><td style="text-align:center">è¾½å®</td><td style="text-align:center">123.43</td><td style="text-align:center">41.8</td></tr><tr><td style="text-align:center">07</td><td style="text-align:center">å‰æ—</td><td style="text-align:center">125.32</td><td style="text-align:center">43.9</td></tr><tr><td style="text-align:center">08</td><td style="text-align:center">é»‘é¾™æ±Ÿ</td><td style="text-align:center">126.53</td><td style="text-align:center">45.8</td></tr><tr><td style="text-align:center">09</td><td style="text-align:center">ä¸Šæµ·</td><td style="text-align:center">121.47</td><td style="text-align:center">31.23</td></tr><tr><td style="text-align:center">10</td><td style="text-align:center">æ±Ÿè‹</td><td style="text-align:center">118.78</td><td style="text-align:center">32.07</td></tr><tr><td style="text-align:center">11</td><td style="text-align:center">æµ™æ±Ÿ</td><td style="text-align:center">120.15</td><td style="text-align:center">30.28</td></tr><tr><td style="text-align:center">12</td><td style="text-align:center">å®‰å¾½</td><td style="text-align:center">117.25</td><td style="text-align:center">31.83</td></tr><tr><td style="text-align:center">13</td><td style="text-align:center">ç¦å»º</td><td style="text-align:center">119.3</td><td style="text-align:center">26.08</td></tr><tr><td style="text-align:center">14</td><td style="text-align:center">æ±Ÿè¥¿</td><td style="text-align:center">115.85</td><td style="text-align:center">28.68</td></tr><tr><td style="text-align:center">15</td><td style="text-align:center">å±±ä¸œ</td><td style="text-align:center">116.98</td><td style="text-align:center">36.67</td></tr><tr><td style="text-align:center">16</td><td style="text-align:center">æ²³å—</td><td style="text-align:center">113.62</td><td style="text-align:center">34.75</td></tr><tr><td style="text-align:center">17</td><td style="text-align:center">æ¹–åŒ—</td><td style="text-align:center">114.3</td><td style="text-align:center">30.6</td></tr><tr><td style="text-align:center">18</td><td style="text-align:center">æ¹–å—</td><td style="text-align:center">112.93</td><td style="text-align:center">28.23</td></tr><tr><td style="text-align:center">19</td><td style="text-align:center">å¹¿ä¸œ</td><td style="text-align:center">113.27</td><td style="text-align:center">23.13</td></tr><tr><td style="text-align:center">20</td><td style="text-align:center">å¹¿è¥¿</td><td style="text-align:center">108.37</td><td style="text-align:center">22.82</td></tr><tr><td style="text-align:center">21</td><td style="text-align:center">æµ·å—</td><td style="text-align:center">108.37</td><td style="text-align:center">22.82</td></tr><tr><td style="text-align:center">22</td><td style="text-align:center">é‡åº†</td><td style="text-align:center">106.55</td><td style="text-align:center">29.57</td></tr><tr><td style="text-align:center">23</td><td style="text-align:center">å››å·</td><td style="text-align:center">104.07</td><td style="text-align:center">30.67</td></tr><tr><td style="text-align:center">24</td><td style="text-align:center">è´µå·</td><td style="text-align:center">106.63</td><td style="text-align:center">26.65</td></tr><tr><td style="text-align:center">25</td><td style="text-align:center">äº‘å—</td><td style="text-align:center">102.72</td><td style="text-align:center">25.05</td></tr><tr><td style="text-align:center">26</td><td style="text-align:center">è¥¿è—</td><td style="text-align:center">91.13</td><td style="text-align:center">29.65</td></tr><tr><td style="text-align:center">27</td><td style="text-align:center">é™•è¥¿</td><td style="text-align:center">108.93</td><td style="text-align:center">34.27</td></tr><tr><td style="text-align:center">28</td><td style="text-align:center">ç”˜è‚ƒ</td><td style="text-align:center">103.82</td><td style="text-align:center">36.07</td></tr><tr><td style="text-align:center">29</td><td style="text-align:center">é’æµ·</td><td style="text-align:center">101.78</td><td style="text-align:center">36.62</td></tr><tr><td style="text-align:center">30</td><td style="text-align:center">å®å¤</td><td style="text-align:center">106.28</td><td style="text-align:center">38.47</td></tr><tr><td style="text-align:center">31</td><td style="text-align:center">æ–°ç–†</td><td style="text-align:center">87.62</td><td style="text-align:center">43.82</td></tr><tr><td style="text-align:center">32</td><td style="text-align:center">å°åŒ—</td><td style="text-align:center">121.52</td><td style="text-align:center">25.03</td></tr><tr><td style="text-align:center">33</td><td style="text-align:center">é¦™æ¸¯</td><td style="text-align:center">114.17</td><td style="text-align:center">22.28</td></tr><tr><td style="text-align:center">34</td><td style="text-align:center">æ¾³é—¨</td><td style="text-align:center">113.55</td><td style="text-align:center">22.19</td></tr></tbody></table><h3 id="é—ä¼ ç®—æ³•ä»£ç "><a class="header-anchor" href="#é—ä¼ ç®—æ³•ä»£ç ">#</a>é—ä¼ ç®—æ³•ä»£ç </h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ----------model import----------</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> radians, cos, sin, asin, sqrt</span><br><span class="line"></span><br><span class="line"><span class="comment"># ----------end model import----------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ----------global variables----------</span></span><br><span class="line"></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">@param:</span></span><br><span class="line"><span class="string">    CITIES          the longitude and the latitude of cities</span></span><br><span class="line"><span class="string">    N_CITIES        the number of cities</span></span><br><span class="line"><span class="string">    CROSS_RATE      the rate of cross</span></span><br><span class="line"><span class="string">    MUTATE_RATE     the rate of mutate</span></span><br><span class="line"><span class="string">    POP_SIZE        the size of population</span></span><br><span class="line"><span class="string">    N_GENERATIONS   the number of generations</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line">CITIES = np.array([[<span class="number">116.4</span>, <span class="number">39.9</span>],</span><br><span class="line">                   [<span class="number">117.2</span>, <span class="number">39.12</span>],</span><br><span class="line">                   [<span class="number">114.52</span>, <span class="number">38.05</span>],</span><br><span class="line">                   [<span class="number">112.55</span>, <span class="number">37.87</span>],</span><br><span class="line">                   [<span class="number">111.73</span>, <span class="number">40.83</span>],</span><br><span class="line">                   [<span class="number">123.43</span>, <span class="number">41.8</span>],</span><br><span class="line">                   [<span class="number">125.32</span>, <span class="number">43.9</span>],</span><br><span class="line">                   [<span class="number">126.53</span>, <span class="number">45.8</span>],</span><br><span class="line">                   [<span class="number">121.47</span>, <span class="number">31.23</span>],</span><br><span class="line">                   [<span class="number">118.78</span>, <span class="number">32.07</span>],</span><br><span class="line">                   [<span class="number">120.15</span>, <span class="number">30.28</span>],</span><br><span class="line">                   [<span class="number">117.25</span>, <span class="number">31.83</span>],</span><br><span class="line">                   [<span class="number">119.3</span>, <span class="number">26.08</span>],</span><br><span class="line">                   [<span class="number">115.85</span>, <span class="number">28.68</span>],</span><br><span class="line">                   [<span class="number">116.98</span>, <span class="number">36.67</span>],</span><br><span class="line">                   [<span class="number">113.62</span>, <span class="number">34.75</span>],</span><br><span class="line">                   [<span class="number">114.3</span>, <span class="number">30.6</span>],</span><br><span class="line">                   [<span class="number">112.93</span>, <span class="number">28.23</span>],</span><br><span class="line">                   [<span class="number">113.27</span>, <span class="number">23.13</span>],</span><br><span class="line">                   [<span class="number">108.37</span>, <span class="number">22.82</span>],</span><br><span class="line">                   [<span class="number">108.37</span>, <span class="number">22.82</span>],</span><br><span class="line">                   [<span class="number">106.55</span>, <span class="number">29.57</span>],</span><br><span class="line">                   [<span class="number">104.07</span>, <span class="number">30.67</span>],</span><br><span class="line">                   [<span class="number">106.63</span>, <span class="number">26.65</span>],</span><br><span class="line">                   [<span class="number">102.72</span>, <span class="number">25.05</span>],</span><br><span class="line">                   [<span class="number">91.13</span>, <span class="number">29.65</span>],</span><br><span class="line">                   [<span class="number">108.93</span>, <span class="number">34.27</span>],</span><br><span class="line">                   [<span class="number">103.82</span>, <span class="number">36.07</span>],</span><br><span class="line">                   [<span class="number">101.78</span>, <span class="number">36.62</span>],</span><br><span class="line">                   [<span class="number">106.28</span>, <span class="number">38.47</span>],</span><br><span class="line">                   [<span class="number">87.62</span>, <span class="number">43.82</span>],</span><br><span class="line">                   [<span class="number">121.52</span>, <span class="number">25.03</span>],</span><br><span class="line">                   [<span class="number">114.17</span>, <span class="number">22.28</span>],</span><br><span class="line">                   [<span class="number">113.55</span>, <span class="number">22.19</span>]])</span><br><span class="line">N_CITIES = CITIES.shape[<span class="number">0</span>]</span><br><span class="line">CROSS_RATE = <span class="number">0.1</span></span><br><span class="line">MUTATE_RATE = <span class="number">0.02</span></span><br><span class="line">POP_SIZE = <span class="number">1000</span></span><br><span class="line">N_GENERATIONS = <span class="number">500</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ----------end global variables----------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ----------function definition----------</span></span><br><span class="line"></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">    Calculate the great circle distance between two points</span></span><br><span class="line"><span class="string">    on the earth (specified in decimal degrees)</span></span><br><span class="line"><span class="string">    @param:</span></span><br><span class="line"><span class="string">        lon1    Longitude of the first point</span></span><br><span class="line"><span class="string">        lat1    Latitude of the first point</span></span><br><span class="line"><span class="string">        lon2    Longitude of the second point</span></span><br><span class="line"><span class="string">        lat2    Latitude of the second point</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">haversine</span><span class="params">(lon1, lat1, lon2, lat2)</span>:</span></span><br><span class="line">    lon1, lat1, lon2, lat2 = map(radians, [lon1, lat1, lon2, lat2])</span><br><span class="line">    dlon = lon2 - lon1</span><br><span class="line">    dlat = lat2 - lat1</span><br><span class="line">    a = sin(dlat/<span class="number">2</span>)**<span class="number">2</span> + cos(lat1) * cos(lat2) * sin(dlon/<span class="number">2</span>)**<span class="number">2</span></span><br><span class="line">    c = <span class="number">2</span> * asin(sqrt(a))</span><br><span class="line">    r = <span class="number">6378.137</span></span><br><span class="line">    <span class="keyword">return</span> c * r</span><br><span class="line"></span><br><span class="line"><span class="comment"># ----------end function definition----------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ----------class definition----------</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GA</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, DNA_size, cross_rate, mutation_rate, pop_size, )</span>:</span></span><br><span class="line">        self.DNA_size = DNA_size</span><br><span class="line">        self.cross_rate = cross_rate</span><br><span class="line">        self.mutate_rate = mutation_rate</span><br><span class="line">        self.pop_size = pop_size</span><br><span class="line"></span><br><span class="line">        self.pop = np.vstack([np.random.permutation(DNA_size)</span><br><span class="line">                              <span class="keyword">for</span> _ <span class="keyword">in</span> range(pop_size)])</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">translateDNA</span><span class="params">(self, DNA, city_position)</span>:</span>     <span class="comment"># get cities' coord in order</span></span><br><span class="line">        line_x = np.empty_like(DNA, dtype=np.float64)</span><br><span class="line">        line_y = np.empty_like(DNA, dtype=np.float64)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i, d <span class="keyword">in</span> enumerate(DNA):</span><br><span class="line"></span><br><span class="line">            city_coord = city_position[d]</span><br><span class="line">            line_x[i, :] = city_coord[:, <span class="number">0</span>]</span><br><span class="line">            line_y[i, :] = city_coord[:, <span class="number">1</span>]</span><br><span class="line">        <span class="keyword">return</span> line_x, line_y</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_fitness</span><span class="params">(self, line_x, line_y)</span>:</span></span><br><span class="line">        total_distance = np.zeros((line_x.shape[<span class="number">0</span>],), dtype=np.float64)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(line_x.shape[<span class="number">0</span>]):</span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> range(line_x.shape[<span class="number">1</span>]<span class="number">-1</span>):</span><br><span class="line">                total_distance[i] += haversine(line_x[i][j],</span><br><span class="line">                    line_y[i][j], line_x[i][j+<span class="number">1</span>], line_y[i][j+<span class="number">1</span>])</span><br><span class="line">            total_distance[i] += haversine(line_x[i][<span class="number">0</span>], line_y[i][<span class="number">0</span>],</span><br><span class="line">                line_x[i][line_x.shape[<span class="number">1</span>]<span class="number">-1</span>], line_y[i][line_x.shape[<span class="number">1</span>]<span class="number">-1</span>])</span><br><span class="line"></span><br><span class="line">        fitness = np.exp(self.DNA_size * <span class="number">20000</span> / total_distance)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> fitness, total_distance</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">select</span><span class="params">(self, fitness)</span>:</span></span><br><span class="line">        idx = np.random.choice(np.arange(</span><br><span class="line">            self.pop_size), size=self.pop_size, replace=<span class="literal">True</span>, p=fitness / fitness.sum())</span><br><span class="line">        <span class="keyword">return</span> self.pop[idx]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">crossover</span><span class="params">(self, parent, pop)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> np.random.rand() &lt; self.cross_rate:</span><br><span class="line">            <span class="comment"># select another individual from pop</span></span><br><span class="line">            i_ = np.random.randint(<span class="number">0</span>, self.pop_size, size=<span class="number">1</span>)</span><br><span class="line">            <span class="comment"># choose crossover points</span></span><br><span class="line">            cross_points = np.random.randint(</span><br><span class="line">                <span class="number">0</span>, <span class="number">2</span>, self.DNA_size).astype(np.bool)</span><br><span class="line">            <span class="comment"># find the city number</span></span><br><span class="line">            keep_city = parent[~cross_points]</span><br><span class="line">            swap_city = pop[i_, np.in1d(</span><br><span class="line">                pop[i_].ravel(), keep_city, invert=<span class="literal">True</span>)]</span><br><span class="line">            parent[:] = np.concatenate((keep_city, swap_city))</span><br><span class="line">        <span class="keyword">return</span> parent</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">mutate</span><span class="params">(self, child)</span>:</span></span><br><span class="line">        <span class="keyword">for</span> point <span class="keyword">in</span> range(self.DNA_size):</span><br><span class="line">            <span class="keyword">if</span> np.random.rand() &lt; self.mutate_rate:</span><br><span class="line">                swap_point = np.random.randint(<span class="number">0</span>, self.DNA_size)</span><br><span class="line">                swapA, swapB = child[point], child[swap_point]</span><br><span class="line">                child[point], child[swap_point] = swapB, swapA</span><br><span class="line">        <span class="keyword">return</span> child</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">evolve</span><span class="params">(self, fitness)</span>:</span></span><br><span class="line">        pop = self.select(fitness)</span><br><span class="line">        pop_copy = pop.copy()</span><br><span class="line">        <span class="comment"># for every parent</span></span><br><span class="line">        <span class="keyword">for</span> parent <span class="keyword">in</span> pop:</span><br><span class="line">            child = self.crossover(parent, pop_copy)</span><br><span class="line">            child = self.mutate(child)</span><br><span class="line">            parent[:] = child</span><br><span class="line">        self.pop = pop</span><br><span class="line"></span><br><span class="line"><span class="comment"># ----------end class definition----------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ----------main function----------</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    ga = GA(DNA_size=N_CITIES, cross_rate=CROSS_RATE,</span><br><span class="line">            mutation_rate=MUTATE_RATE, pop_size=POP_SIZE)</span><br><span class="line"></span><br><span class="line">    path_list = []</span><br><span class="line">    <span class="keyword">for</span> generation <span class="keyword">in</span> range(N_GENERATIONS):</span><br><span class="line">        lx, ly = ga.translateDNA(ga.pop, CITIES)</span><br><span class="line">        fitness, total_distance = ga.get_fitness(lx, ly)</span><br><span class="line">        ga.evolve(fitness)</span><br><span class="line">        best_idx = np.argmax(fitness)</span><br><span class="line">        print(<span class="string">'Gen:'</span>, generation, <span class="string">'| total distance: %.4f'</span> %</span><br><span class="line">              total_distance[best_idx],)</span><br><span class="line"></span><br><span class="line">        path_x = np.array(list(lx[best_idx]) + [lx[best_idx][<span class="number">0</span>]])</span><br><span class="line">        path_y = np.array(list(ly[best_idx]) + [ly[best_idx][<span class="number">0</span>]])</span><br><span class="line">        path = np.stack((path_x, path_y))</span><br><span class="line">        path = path.transpose(<span class="number">1</span>, <span class="number">0</span>)</span><br><span class="line">        path_list.append(path.tolist())</span><br><span class="line"></span><br><span class="line">    f = open(<span class="string">'data.json'</span>, <span class="string">'w'</span>)</span><br><span class="line">    f.write(json.dumps(path_list))</span><br><span class="line">    f.close()</span><br><span class="line"></span><br><span class="line"><span class="comment"># ----------end main function----------</span></span><br></pre></td></tr></table></figure><h3 id="ç›¸å…³é“¾æ¥"><a class="header-anchor" href="#ç›¸å…³é“¾æ¥">#</a>ç›¸å…³é“¾æ¥</h3><ul><li><a href="https://github.com/onns/GaTSP" target="_blank" rel="noopener">GitHub ä»£ç åœ°å€</a></li><li><a href="https://onns.xyz/2018/11/24/gatsp/">å¯è§†åŒ–æ¼”ç¤ºåœ°å€</a></li></ul><script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.3.0/raphael.min.js"></script><script src="//flowchart.js.org/flowchart-latest.js"></script><textarea id="flowchart-0-code" style="display: none">st=>start: éšæœºäº§ç”Ÿåˆå§‹ç§ç¾¤op1=>operation: è®¡ç®—ç§ç¾¤ä¸­æ¯ä¸ªä¸ªä½“çš„é€‚åº”æ€§op2=>operation: æŒ‰é€‚åº”åº¦è¿›è¡Œé€‰æ‹©ä¸ªä½“op3=>operation: ç¹æ®–op4=>operation: å°†æ–°ä¸ªä½“å¤åˆ¶åˆ°æ–°ç§ç¾¤op5=>operation: æŒ‰é€‚åº”åº¦è¿›è¡Œé€‰æ‹©ä¸¤ä¸ªä¸ªä½“op6=>operation: æ‚äº¤op7=>operation: å°†ä¸¤ä¸ªæ–°ä¸ªä½“åŠ åˆ°æ–°ç§ç¾¤op8=>operation: æŒ‰é€‚åº”åº¦è¿›è¡Œé€‰æ‹©ä¸ªä½“op9=>operation: å˜å¼‚op10=>operation: å°†å˜å¼‚åçš„æ–°ä¸ªä½“åŠ åˆ°æ–°ç§ç¾¤op11=>operation: å¾ªç¯æ¬¡æ•°åŠ ä¸€cond1=>condition: ç»ˆæ­¢åˆ¤æ®æ˜¯å¦æ»¡è¶³?cond2=>condition: æ˜¯å¦å¾ªç¯æŒ‡å®šæ¬¡æ•°?para1=>parallel: éšæœºé€‰æ‹©é—ä¼ ç®—å­io1=>inputoutput: è¾“å‡ºç»“æœe1=>end: ç®—æ³•ç»“æŸst->cond1cond1(no, bottom)->op1->cond2cond1(yes)->io1->e1cond2(no, bottom)->para1cond2(yes)->cond1para1(path1, left)->op2para1(path2, bottom)->op5para1(path3, right)->op8op2->op3->op4->op11op5->op6->op7->op11op8->op9->op10->op11op11->cond2</textarea><textarea id="flowchart-0-options" style="display: none">{"scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12}</textarea><script>  var code = document.getElementById("flowchart-0-code").value;  var options = JSON.parse(decodeURIComponent(document.getElementById("flowchart-0-options").value));  var diagram = flowchart.parse(code);  diagram.drawSVG("flowchart-0", options);</script><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="https://baike.baidu.com/item/%E9%81%97%E4%BC%A0%E7%AE%97%E6%B3%95/838140" target="_blank" rel="noopener">é—ä¼ ç®—æ³•_ç™¾åº¦ç™¾ç§‘</a> <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> computational intelligence </tag>
            
            <tag> TSP </tag>
            
            <tag> GA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hybrid images lab report</title>
      <link href="/blog/2018/11/11/hybrid-images-lab-report/"/>
      <url>/blog/2018/11/11/hybrid-images-lab-report/</url>
      
        <content type="html"><![CDATA[<h2 id="é—®é¢˜åˆ†æ"><a class="header-anchor" href="#é—®é¢˜åˆ†æ">#</a>é—®é¢˜åˆ†æ</h2><h3 id="é—®é¢˜æè¿°"><a class="header-anchor" href="#é—®é¢˜æè¿°">#</a>é—®é¢˜æè¿°</h3><p>è¯¥å®éªŒçš„ç›®æ ‡æ˜¯ç¼–å†™ä¸€ä¸ªå›¾åƒè¿‡æ»¤åŠŸèƒ½çš„ä»£ç ï¼Œå¹¶ä½¿ç”¨å®ƒæ¥åˆ›å»ºæ··åˆå›¾åƒã€‚æ··åˆå›¾åƒæ˜¯é™æ€å›¾åƒï¼Œå…¶è§†è§‰æ•ˆæœéšè§‚å¯Ÿè·ç¦»çš„å˜åŒ–è€Œå˜åŒ–ã€‚åŸºæœ¬æ€æƒ³æ˜¯äººçš„æ„ŸçŸ¥å¯¹äº<code>é«˜é¢‘ç‡</code>æ›´åŠ æ•æ„Ÿï¼Œä½†æ˜¯åœ¨è¿œå¤„åªèƒ½çœ‹åˆ°ä¿¡å·çš„<code>ä½é¢‘(å¹³æ»‘)</code>éƒ¨åˆ†ã€‚é€šè¿‡å°†ä¸€ä¸ªå›¾åƒçš„é«˜é¢‘éƒ¨åˆ†ä¸å¦ä¸€ä¸ªå›¾åƒçš„ä½é¢‘éƒ¨åˆ†æ··åˆï¼Œå¯ä»¥è·å¾—æ··åˆå›¾åƒï¼Œä»è€Œåœ¨ä¸åŒè·ç¦»å¤„äº§ç”Ÿä¸åŒçš„è§†è§‰æ•ˆæœã€‚å®éªŒæ•°æ®é›†åœ¨<code>proj1.rar</code>ä¸­ã€‚</p><h3 id="æ•°æ®é›†åˆ†æ"><a class="header-anchor" href="#æ•°æ®é›†åˆ†æ">#</a>æ•°æ®é›†åˆ†æ</h3><p>å®éªŒæ•°æ®é›†å¦‚ä¸‹æ‰€ç¤ºï¼Œç”±åå¼ ä¸åŒçš„<code>bmp</code>å›¾åƒæ„æˆã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">data</span><br><span class="line">â”œâ”€â”€ bicycle.bmp</span><br><span class="line">â”œâ”€â”€ bird.bmp</span><br><span class="line">â”œâ”€â”€ cat.bmp</span><br><span class="line">â”œâ”€â”€ dog.bmp</span><br><span class="line">â”œâ”€â”€ einstein.bmp</span><br><span class="line">â”œâ”€â”€ fish.bmp</span><br><span class="line">â”œâ”€â”€ marilyn.bmp</span><br><span class="line">â”œâ”€â”€ motorcycle.bmp</span><br><span class="line">â”œâ”€â”€ plane.bmp</span><br><span class="line">â””â”€â”€ submarine.bmp</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="å®éªŒæ–¹æ³•"><a class="header-anchor" href="#å®éªŒæ–¹æ³•">#</a>å®éªŒæ–¹æ³•</h2><h3 id="å®éªŒæµç¨‹"><a class="header-anchor" href="#å®éªŒæµç¨‹">#</a>å®éªŒæµç¨‹</h3><p>æœ¬å®éªŒçš„æµç¨‹å¦‚<code>å›¾1</code>æ‰€ç¤ºã€‚</p><center><div id="flowchart-0" class="flow-chart"></div><p>å›¾ 1 å®éªŒæµç¨‹å›¾</p></center><h3 id="æ»¤æ³¢å™¨"><a class="header-anchor" href="#æ»¤æ³¢å™¨">#</a>æ»¤æ³¢å™¨<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></h3><p>é«˜é€šæ»¤æ³¢å™¨å¯ä»¥é€šè¿‡ä½é€šæ»¤æ³¢å™¨å–åå¾—åˆ°ï¼Œæ•…ä¸å†åŒºåˆ†é«˜/ä½é€šæ»¤æ³¢å™¨ã€‚<br>ä¸‹é¢å¯¹æ¯”ç»“æœçš„è¾“å…¥å›¾åƒå¦‚<code>å›¾2</code>æ‰€ç¤ºã€‚</p><center><p><img src="//onns.xyz/blog/image/20181117-1.jpg" alt="æ»¤æ³¢å™¨è¾“å…¥å›¾åƒ"><br>å›¾ 2 è¾“å…¥å›¾åƒ</p></center><h4 id="ç†æƒ³çš„ä½é€šæ»¤æ³¢å™¨"><a class="header-anchor" href="#ç†æƒ³çš„ä½é€šæ»¤æ³¢å™¨">#</a>ç†æƒ³çš„ä½é€šæ»¤æ³¢å™¨</h4><p>$$<br>H(u,v)=<br>\begin{cases}<br>1,&amp;{D(u,v) \leq D_0} \<br>0,&amp;{D(u,v) &gt; D_0}<br>\end{cases}<br>\tag{1}<br>$$</p><p>å…¶ä¸­ï¼Œ$D_0$è¡¨ç¤ºé€šå¸¦çš„åŠå¾„ã€‚$D(u,v)$çš„è®¡ç®—æ–¹å¼ä¹Ÿå°±æ˜¯ä¸¤ç‚¹é—´çš„è·ç¦»ï¼Œè®¡ç®—å…¬å¼å¦‚<code>å…¬å¼2.2</code>æ‰€ç¤ºã€‚</p><p>$$<br>D(u,v)=\sqrt{\left( u-\frac{P}{2} \right)^{2} + \left( v-\frac{Q}{2} \right)^{2}}<br>\tag{2}<br>$$</p><p>ä½é€šæ»¤æ³¢å™¨æ‰€å¾—åˆ°çš„ç»“æœå¦‚ä¸‹æ‰€ç¤ºã€‚ä½é€šæ»¤æ³¢å™¨æ»¤é™¤äº†é«˜é¢‘æˆåˆ†ï¼Œæ‰€ä»¥ä½¿å¾—å›¾åƒæ¨¡ç³Šã€‚ç”±äºç†æƒ³ä½é€šæ»¤æ³¢å™¨çš„è¿‡åº¦ç‰¹æ€§è¿‡äºæ€¥å³»ï¼Œæ‰€ä»¥ä¼šäº§ç”Ÿäº†æŒ¯é“ƒç°è±¡ã€‚</p><center><p><img src="//onns.xyz/blog/image/20181117-2.jpg" alt="ç†æƒ³çš„ä½é€šæ»¤æ³¢å™¨"><br><img src="//onns.xyz/blog/image/20181117-3.jpg" alt="ç†æƒ³çš„ä½é€šæ»¤æ³¢å™¨"><br>å›¾ 3 ç†æƒ³çš„ä½é€šæ»¤æ³¢å™¨</p></center><h4 id="å·´ç‰¹æ²ƒæ–¯ä½é€šæ»¤æ³¢å™¨"><a class="header-anchor" href="#å·´ç‰¹æ²ƒæ–¯ä½é€šæ»¤æ³¢å™¨">#</a>å·´ç‰¹æ²ƒæ–¯ä½é€šæ»¤æ³¢å™¨</h4><p>$$<br>H(u,v)=\frac{1}{1+\left(D(u,v) / {D_0} \right)^{2n}}<br>\tag{3}<br>$$</p><p>$D_0$è¡¨ç¤ºé€šå¸¦çš„åŠå¾„ï¼Œ$n$è¡¨ç¤ºçš„æ˜¯å·´ç‰¹æ²ƒæ–¯æ»¤æ³¢å™¨çš„æ¬¡æ•°ã€‚éšç€æ¬¡æ•°çš„å¢åŠ ï¼ŒæŒ¯é“ƒç°è±¡ä¼šè¶Šæ¥è¶Šæ˜æ˜¾ã€‚</p><center><p><img src="//onns.xyz/blog/image/20181117-4.jpg" alt="ç†æƒ³çš„ä½é€šæ»¤æ³¢å™¨"><br><img src="//onns.xyz/blog/image/20181117-5.jpg" alt="ç†æƒ³çš„ä½é€šæ»¤æ³¢å™¨"><br>å›¾ 4 å·´ç‰¹æ²ƒæ–¯ä½é€šæ»¤æ³¢å™¨</p></center><h4 id="é«˜æ–¯ä½é€šæ»¤æ³¢å™¨"><a class="header-anchor" href="#é«˜æ–¯ä½é€šæ»¤æ³¢å™¨">#</a>é«˜æ–¯ä½é€šæ»¤æ³¢å™¨</h4><p>$$<br>H(u,v)=e^<br>{\frac{-D^2(u,v)}<br>{2{D_0}^2}}<br>\tag{4}<br>$$</p><p>$D_0$è¡¨ç¤ºé€šå¸¦çš„åŠå¾„ï¼Œé«˜æ–¯æ»¤æ³¢å™¨çš„è¿‡åº¦ç‰¹æ€§éå¸¸å¹³å¦ï¼Œä¸ä¼šäº§ç”ŸæŒ¯é“ƒç°è±¡çš„ã€‚</p><center><p><img src="//onns.xyz/blog/image/20181117-6.jpg" alt="ç†æƒ³çš„ä½é€šæ»¤æ³¢å™¨"><br><img src="//onns.xyz/blog/image/20181117-7.jpg" alt="ç†æƒ³çš„ä½é€šæ»¤æ³¢å™¨"><br>å›¾ 5 é«˜æ–¯ä½é€šæ»¤æ³¢å™¨</p></center><h3 id="ç»“è®º"><a class="header-anchor" href="#ç»“è®º">#</a>ç»“è®º</h3><p>ç»¼åˆä»¥ä¸Šåˆ†æ, æˆ‘ä»¬æœ€ç»ˆé€‰æ‹©äº†<code>é«˜æ–¯ä½é€šæ»¤æ³¢å™¨</code>.</p><h2 id="å®éªŒè¿‡ç¨‹"><a class="header-anchor" href="#å®éªŒè¿‡ç¨‹">#</a>å®éªŒè¿‡ç¨‹</h2><h3 id="ç¼–ç¨‹è¯­è¨€ä»‹ç»"><a class="header-anchor" href="#ç¼–ç¨‹è¯­è¨€ä»‹ç»">#</a>ç¼–ç¨‹è¯­è¨€ä»‹ç»</h3><p>æœ¬å®éªŒæ‰€é€‰æ‹©çš„ç¼–ç¨‹è¯­è¨€ä¸º<code>Matlab</code>, ç¼–ç¨‹è½¯ä»¶ä¸º<code>Matlab 2018b</code>.</p><h3 id="å›¾åƒé¢„å¤„ç†"><a class="header-anchor" href="#å›¾åƒé¢„å¤„ç†">#</a>å›¾åƒé¢„å¤„ç†</h3><p><code>10å¼ </code>bmp å›¾åƒå¯ä»¥åˆ†æˆ<code>5å¯¹</code>å›¾åƒè¿›è¡Œå®éªŒï¼Œå¦‚<code>å›¾6</code>æ‰€ç¤ºï¼Œå¤§å°éƒ½æ˜¯<code>225*265</code>ï¼Œæ•…ä¸éœ€è¦è¿›è¡Œç¼©æ”¾ã€‚è‹¥é€‰å–çš„å›¾åƒå¤§å°ä¸ä¸€ï¼Œéœ€è¦å…ˆå¯¹å›¾åƒè¿›è¡Œå¤§å°è°ƒæ•´ï¼Œç”¨<code>Matlab</code>çš„<code>imresize</code>å‡½æ•°ã€‚</p><center><p><img src="//onns.xyz/blog/image/20181117-einstein.bmp" alt="åŸå›¾ä»¥åŠHOGç‰¹å¾å›¾"><img src="//onns.xyz/blog/image/20181117-marilyn.bmp" alt="åŸå›¾ä»¥åŠHOGç‰¹å¾å›¾"><br>å›¾ 6 æ ·ä¾‹å›¾åƒ</p></center><h3 id="ç¨‹åºç¼–å†™"><a class="header-anchor" href="#ç¨‹åºç¼–å†™">#</a>ç¨‹åºç¼–å†™</h3><h4 id="ç©ºåŸŸå›¾åƒæ»¤æ³¢"><a class="header-anchor" href="#ç©ºåŸŸå›¾åƒæ»¤æ³¢">#</a>ç©ºåŸŸå›¾åƒæ»¤æ³¢</h4><p>å°†æ¨¡æ¿åœ¨å›¾åƒä¸­é€åƒç´ ç§»åŠ¨ï¼Œå°†å·ç§¯æ ¸çš„æ¯ä¸ªå…ƒç´ åˆ†åˆ«å’Œå›¾åƒçŸ©é˜µå¯¹åº”ä½ç½®å…ƒç´ ç›¸ä¹˜å¹¶å°†ç»“æœç´¯åŠ ï¼Œç´¯åŠ å’Œä½œä¸ºæ¨¡æ¿ä¸­å¿ƒå¯¹åº”åƒç´ ç‚¹çš„å·ç§¯ç»“æœã€‚é€šä¿—çš„è®²ï¼Œå·ç§¯å°±æ˜¯å¯¹æ•´å¹…å›¾åƒè¿›è¡ŒåŠ æƒå¹³å‡çš„è¿‡ç¨‹ï¼Œæ¯ä¸€ä¸ªåƒç´ ç‚¹çš„å€¼ï¼Œéƒ½ç”±å…¶æœ¬èº«å’Œé‚»åŸŸå†…çš„å…¶ä»–åƒç´ å€¼ç»è¿‡åŠ æƒå¹³å‡åå¾—åˆ°ã€‚åœ¨åƒç´ çš„å¤„ç†ä¸Šï¼Œæ˜¯å…ˆå°†ç»“æœæš‚å­˜åœ¨äºä¸€ä¸ªå‰¯æœ¬ï¼Œæœ€åç»Ÿä¸€æ‹·è´ï¼Œæ•…ä¸ä¼šå‡ºç°å¤„ç†é¡ºåºä¸åŒè€Œç»“æœä¸åŒçš„æƒ…å†µã€‚<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup></p><p>æ»¤æ³¢ç»“æœå¦‚<code>å›¾7</code>æ‰€ç¤ºã€‚</p><center><p><img src="//onns.xyz/blog/image/20181117-8.jpg" alt="é«˜é€šæ»¤æ³¢ç»“æœå›¾"><img src="//onns.xyz/blog/image/20181117-9.jpg" alt="ä½é€šæ»¤æ³¢ç»“æœå›¾"><br>å›¾ 7 ç©ºåŸŸå›¾åƒæ»¤æ³¢ç»“æœå›¾</p></center><h4 id="é¢‘åŸŸå›¾åƒæ»¤æ³¢"><a class="header-anchor" href="#é¢‘åŸŸå›¾åƒæ»¤æ³¢">#</a>é¢‘åŸŸå›¾åƒæ»¤æ³¢</h4><p>å…ˆå¯¹å›¾åƒè¿›è¡Œå‚…é‡Œå¶å˜æ¢ï¼Œè½¬æ¢è‡³é¢‘ç‡åŸŸï¼Œåœ¨é¢‘åŸŸä½¿ç”¨æ»¤æ³¢å‡½æ•°è¿›è¡Œæ»¤æ³¢ï¼Œæœ€åå°†ç»“æœåå˜æ¢è‡³ç©ºé—´åŸŸã€‚</p><p>æ»¤æ³¢ç»“æœå¦‚<code>å›¾8</code>æ‰€ç¤ºã€‚</p><center><p><img src="//onns.xyz/blog/image/20181117-11.jpg" alt="é«˜é€šæ»¤æ³¢ç»“æœå›¾"><img src="//onns.xyz/blog/image/20181117-12.jpg" alt="ä½é€šæ»¤æ³¢ç»“æœå›¾"><br>å›¾ 8 é¢‘åŸŸå›¾åƒæ»¤æ³¢ç»“æœå›¾</p></center><h4 id="å›¾åƒèåˆ"><a class="header-anchor" href="#å›¾åƒèåˆ">#</a>å›¾åƒèåˆ</h4><p>åœ¨ Matlab ä¸­å°†ä¸¤ä¸ªæ»¤æ³¢åçš„å›¾åƒ<code>ç›¸åŠ </code>å³å¯å¾—åˆ°èåˆå›¾åƒã€‚</p><p>ç»“æœå¦‚<code>å›¾9</code>æ‰€ç¤ºã€‚</p><center><p><img src="//onns.xyz/blog/image/20181117-10.jpg" alt="ç©ºåŸŸå›¾åƒæ»¤æ³¢èåˆå›¾"><img src="//onns.xyz/blog/image/20181117-13.jpg" alt="é¢‘åŸŸå›¾åƒæ»¤æ³¢èåˆå›¾"><br>å›¾ 9 å›¾åƒèåˆç»“æœå›¾</p></center><h2 id="å®éªŒç»“æœ"><a class="header-anchor" href="#å®éªŒç»“æœ">#</a>å®éªŒç»“æœ</h2><center><p><img src="//onns.xyz/blog/image/20181117-14.png" alt="ç¨‹åºå¯è§†åŒ–ç•Œé¢å›¾"><br>å›¾ 10 ç¨‹åºå¯è§†åŒ–ç•Œé¢å›¾</p></center><h3 id="å®éªŒç»“æœåˆ†æ"><a class="header-anchor" href="#å®éªŒç»“æœåˆ†æ">#</a>å®éªŒç»“æœåˆ†æ</h3><p>ç»™å®šé¢‘ç‡åŸŸæ»¤æ³¢å™¨ï¼Œå¯å¯¹å…¶è¿›è¡Œå‚…é‡Œå¶é€†å˜æ¢å¾—åˆ°å¯¹åº”çš„ç©ºåŸŸæ»¤æ³¢å™¨ï¼›æ»¤æ³¢åœ¨é¢‘åŸŸæ›´ä¸ºç›´è§‚ï¼Œä½†ç©ºåŸŸé€‚åˆä½¿ç”¨æ›´å°çš„æ»¤æ³¢æ¨¡æ¿ä»¥æé«˜æ»¤æ³¢é€Ÿåº¦ã€‚å› ä¸ºç›¸åŒå°ºå¯¸ä¸‹ï¼Œé¢‘åŸŸæ»¤æ³¢å™¨æ•ˆç‡é«˜äºç©ºåŸŸæ»¤æ³¢å™¨ï¼Œæ•…ç©ºåŸŸæ»¤æ³¢éœ€è¦ä¸€ä¸ªæ›´å°å°ºå¯¸çš„æ¨¡æ¿è¿‘ä¼¼å¾—åˆ°éœ€è¦çš„æ»¤æ³¢ç»“æœã€‚</p><script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.3.0/raphael.min.js"></script><script src="//flowchart.js.org/flowchart-latest.js"></script><textarea id="flowchart-0-code" style="display: none">st1=>start: å¼€å§‹e1=>end: ç»“æŸio1=>inputoutput: è¾“å…¥å›¾åƒ1io2=>inputoutput: è¾“å…¥å›¾åƒ2io3=>inputoutput: è¾“å‡ºæ··åˆå›¾åƒop1=>operation: é€šè¿‡ä½é€šæ»¤æ³¢å™¨å¾—åˆ°ä½é¢‘éƒ¨åˆ†op2=>operation: é€šè¿‡é«˜é€šæ»¤æ³¢å™¨å¾—åˆ°é«˜é¢‘éƒ¨åˆ†op3=>operation: å°†ä¸¤éƒ¨åˆ†ç›¸åŠ å¾—åˆ°æ··åˆå›¾åƒst1->io1->op1->io2->op2->op3->io3->e1</textarea><textarea id="flowchart-0-options" style="display: none">{"scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12}</textarea><script>  var code = document.getElementById("flowchart-0-code").value;  var options = JSON.parse(decodeURIComponent(document.getElementById("flowchart-0-options").value));  var diagram = flowchart.parse(code);  diagram.drawSVG("flowchart-0", options);</script><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="https://blog.csdn.net/zhoufan900428/article/details/17194289" target="_blank" rel="noopener">åŸºç¡€ä¸ä½é€šæ»¤æ³¢å™¨</a> <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li><li id="fn2" class="footnote-item"><p><a href="https://blog.csdn.net/u010839382/article/details/41908541" target="_blank" rel="noopener">ç©ºåŸŸé«˜æ–¯æ»¤æ³¢ä¸é¢‘åŸŸé«˜æ–¯æ»¤æ³¢</a> <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> computer vision </tag>
            
            <tag> matlab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2018 Computational Intelligence Homework No.2</title>
      <link href="/blog/2018/10/31/2018-computational-intelligence-homework-no.2/"/>
      <url>/blog/2018/10/31/2018-computational-intelligence-homework-no.2/</url>
      
        <content type="html"><![CDATA[<h1 id="ç”¨saç®—æ³•æ±‚è§£æ—…è¡Œå•†é—®é¢˜"><a class="header-anchor" href="#ç”¨saç®—æ³•æ±‚è§£æ—…è¡Œå•†é—®é¢˜">#</a>ç”¨SAç®—æ³•æ±‚è§£æ—…è¡Œå•†é—®é¢˜</h1><h2 id="é—®é¢˜æè¿°"><a class="header-anchor" href="#é—®é¢˜æè¿°">#</a>é—®é¢˜æè¿°</h2><p>æ—…è¡Œå•†é—®é¢˜ï¼ˆTravelling Salesman Problem, ç®€è®°TSP, äº¦ç§°è´§éƒæ‹…é—®é¢˜): è®¾æœ‰nä¸ªåŸå¸‚å’Œè·ç¦»çŸ©é˜µD=[d<sub>ij</sub>], å…¶ä¸­d<sub>ij</sub>è¡¨ç¤ºåŸå¸‚iåˆ°åŸå¸‚jçš„è·ç¦», i, j=1, 2 â€¦ n, åˆ™é—®é¢˜æ˜¯è¦æ‰¾å‡ºéè®¿æ¯ä¸ªåŸå¸‚æ°å¥½ä¸€æ¬¡çš„ä¸€æ¡å›è·¯å¹¶ä½¿å…¶è·¯å¾„é•¿åº¦ä¸ºæœ€çŸ­.</p><a id="more"></a><h2 id="ç®—æ³•è®¾è®¡"><a class="header-anchor" href="#ç®—æ³•è®¾è®¡">#</a>ç®—æ³•è®¾è®¡</h2><p>é‡‡ç”¨æ¨¡æ‹Ÿé€€ç«ç®—æ³•è®¡ç®—æ—…è¡Œå•†é—®é¢˜, æ¨¡æ‹Ÿé€€ç«ç®—æ³•(Simulated Annealing Algorithm, ç®€ç§°SAç®—æ³•), æºäºå¯¹å›ºä½“é€€ç«è¿‡ç¨‹çš„æ¨¡æ‹Ÿ, é‡‡ç”¨Metropolisæ¥å—å‡†åˆ™, å¹¶ç”¨ä¸€ç»„ç§°ä¸ºå†·å´è¡¨çš„å‚æ•°æ§åˆ¶ç®—æ³•è¿›ç¨‹, ä½¿ç®—æ³•åœ¨å¤šé¡¹å¼æ—¶é—´é‡Œç»™å‡ºä¸€ä¸ªè¿‘ä¼¼æœ€ä¼˜è§£.</p><h3 id="metropolisç®—æ³•"><a class="header-anchor" href="#metropolisç®—æ³•">#</a>Metropolisç®—æ³•</h3><p>æ¨¡æ‹Ÿé€€ç«ç®—æ³•ç”¨Metropolisç®—æ³•äº§ç”Ÿç»„åˆä¼˜åŒ–é—®é¢˜è§£çš„åºåˆ—. å¹¶ç”±Metropoliså‡†åˆ™å¯¹åº”çš„è½¬ç§»æ¦‚ç‡<code>P</code>.</p>$$P(i=>j)=\begin{cases}1,&{å½“f(j) \leq f(i)} \\e^{\frac{f(i)âˆ’f(j)}{t}},&{å¦åˆ™}\end{cases}\tag{1}$$<h3 id="å†·å´è¿›åº¦è¡¨"><a class="header-anchor" href="#å†·å´è¿›åº¦è¡¨">#</a>å†·å´è¿›åº¦è¡¨</h3><p>å†·å´è¡¨(cooling schedule)æ˜¯ä¸€ç»„æ§åˆ¶ç®—æ³•è¿›ç¨‹çš„å‚æ•°, ç”¨ä»¥é€¼è¿‘æ¨¡æ‹Ÿé€€ç«ç®—æ³•çš„æ¸è¿›æ”¶æ•›æ€§æ€, ä½¿ç®—æ³•åœ¨æœ‰é™æ—¶é—´å†…æ‰§è¡Œè¿­ä»£è¿‡ç¨‹åè¿”å›ä¸€ä¸ªè¿‘ä¼¼æœ€ä¼˜è§£.<br>å†·å´è¡¨æ˜¯å½±å“æ¨¡æ‹Ÿé€€ç«ç®—æ³•å®éªŒæ€§èƒ½çš„é‡è¦å› ç´ , å…¶åˆç†é€‰å–æ˜¯ç®—æ³•åº”ç”¨çš„å…³é”®.<br>ä¸€ä¸ªå†·å´è¡¨åº”å½“è§„å®šä¸‹è¿°å‚æ•°:</p><ul><li>æ§åˆ¶å‚æ•°tçš„åˆå€¼t<sub>0</sub></li><li>æ§åˆ¶å‚æ•°tçš„è¡°å‡å‡½æ•°</li><li>æ§åˆ¶å‚æ•°tçš„ç»ˆå€¼t<sub>f</sub>(åœæ­¢å‡†åˆ™)</li><li>Mapkobé“¾é•¿L<sub>k</sub></li></ul><h4 id="åˆå€¼t0"><a class="header-anchor" href="#åˆå€¼t0">#</a>åˆå€¼t<sub>0</sub></h4><p>æ§åˆ¶å‚æ•°åˆå€¼t<sub>0</sub>è¦è¶³å¤Ÿå¤§, æ‰èƒ½ä½¿ç®—æ³•è¿›ç¨‹åœ¨åˆç†æ—¶é—´é‡Œæœç´¢å°½å¯èƒ½å¤§çš„è§£ç©ºé—´èŒƒå›´.<br>æœ¬å®éªŒé€‰å–t<sub>0</sub>ä¸º<code>100</code>.</p><h4 id="è¡°å‡å‡½æ•°"><a class="header-anchor" href="#è¡°å‡å‡½æ•°">#</a>è¡°å‡å‡½æ•°</h4><p>åœ¨æ§åˆ¶å‚æ•°çš„è¡°å‡å‡½æ•°åº”ä½¿t<sub>k</sub>çš„è¡°å‡ä»¥å°ä¸ºå®œ.</p>$$\alpha(t)=0.9*t\tag{2}$$<p>æœ¬å®éªŒé€‰å–çš„è¡°å‡å‡½æ•°å¦‚<code>å…¬å¼2</code>æ‰€ç¤º.</p><h4 id="tçš„ç»ˆå€¼tf-åœæ­¢å‡†åˆ™"><a class="header-anchor" href="#tçš„ç»ˆå€¼tf-åœæ­¢å‡†åˆ™">#</a>tçš„ç»ˆå€¼t<sub>f</sub>(åœæ­¢å‡†åˆ™)</h4><p>æ§åˆ¶å‚æ•°ç»ˆå€¼t<sub>f</sub>é€šå¸¸ç”±åœæ­¢å‡†åˆ™å†³å®š. åˆç†çš„åœæ­¢å‡†åˆ™æ—¢è¦ç¡®ä¿ç®—æ³•æ”¶æ•›äºæŸä¸€è¿‘ä¼¼è§£, åˆè¦ä½¿æœ€ç»ˆè§£å…·æœ‰ä¸€å®šçš„è´¨é‡.<br>æœ¬å®éªŒé€‰å–çš„åœæ­¢å‡†åˆ™ä¸º<code>è¿ç»­ä¸¤ä¸ªMapkobé“¾è·¯å¾„æ— å˜åŒ–</code>åˆ™ç¨‹åºç»ˆæ­¢.</p><h4 id="mapkobé“¾é•¿lk"><a class="header-anchor" href="#mapkobé“¾é•¿lk">#</a>Mapkobé“¾é•¿L<sub>k</sub></h4><p>Mapkobé“¾é•¿L<sub>k</sub>åœ¨æ§åˆ¶å‚æ•°tçš„è¡°å‡å‡½æ•°å·²é€‰å®šçš„å‰æä¸‹, L<sub>k</sub>åº”é€‰å¾—åœ¨æ§åˆ¶å‚æ•°çš„æ¯ä¸€å–å€¼ä¸Šéƒ½èƒ½æ¢å¤å‡†å¹³è¡¡.<br>æœ¬å®éªŒé€‰å–çš„Mapkobé“¾é•¿ä¸º<code>å®šé•¿20000</code>.</p><h3 id="æ–°è§£çš„äº§ç”Ÿ"><a class="header-anchor" href="#æ–°è§£çš„äº§ç”Ÿ">#</a>æ–°è§£çš„äº§ç”Ÿ</h3><p>é‡‡ç”¨2å˜æ¢æ³•. ä»»é€‰åºå·<code>u</code>å’Œ<code>v</code>(u &lt; v), å°† <code>u</code>å’Œ<code>v</code>åŠå…¶ä¹‹é—´çš„é¡ºåºé€†è½¬.</p>$$\pi_{1}...\pi_{u-1}\color{red}{\pi_{u}\pi_{u+1}...\pi_{v-1}\pi_{v}}\pi_{v+1}...\pi_{n} \\\downarrow{} \\\pi_{1}...\pi_{u-1}\color{red}{\pi_{v}\pi_{v-1}...\pi_{u-1}\pi_{u}}\pi_{v+1}...\pi_{n}\tag{3}$$<h2 id="ç¨‹åºæµç¨‹"><a class="header-anchor" href="#ç¨‹åºæµç¨‹">#</a>ç¨‹åºæµç¨‹</h2><p>ç¨‹åºæµç¨‹å¦‚<code>å›¾1</code>æ‰€ç¤º</p><center><div id="flowchart-0" class="flow-chart"></div>å›¾1 ç¨‹åºæµç¨‹å›¾</center><h2 id="æ ¸å¿ƒä¼ªä»£ç "><a class="header-anchor" href="#æ ¸å¿ƒä¼ªä»£ç ">#</a>æ ¸å¿ƒä¼ªä»£ç </h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆå§‹åŒ–è·¯å¾„</span></span><br><span class="line">x1 = random.sample(range(citynum), citynum)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¡ç®—æŒ‰æ­¤è·¯å¾„è¿åŠ¨æ‰€èŠ±è´¹çš„ä»£ä»·</span></span><br><span class="line">f1 = calculate(x1)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆå§‹åŒ–èµ·å§‹æ¸©åº¦</span></span><br><span class="line">T = T_max</span><br><span class="line"></span><br><span class="line">flag = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å½“èµ·å§‹æ¸©åº¦ä½äºé¢„è®¾çš„æœ€ä½æ¸©åº¦æ—¶åœæ­¢å¾ªç¯</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    flag = flag + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Mapkobé“¾é•¿, å³è¿­ä»£æ¬¡æ•°</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(iter):</span><br><span class="line"></span><br><span class="line">        <span class="comment"># é€šè¿‡2å˜æ¢æ³•ç”Ÿæˆæ–°è·¯å¾„</span></span><br><span class="line">        x2 = generate(x1)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># è®¡ç®—æ–°è§£æ‰€èŠ±è´¹çš„ä»£ä»·</span></span><br><span class="line">        f2 = calculate(x2)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># è®¡ç®—ä¸¤ä¸ªè§£çš„ä»£ä»·å·®</span></span><br><span class="line">        df = f2 - f1</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ç”¨Metropolisç®—æ³•åˆ¤æ–­æ˜¯å¦æ¥å—æ–°è§£</span></span><br><span class="line">        <span class="keyword">if</span> accept(df, T):</span><br><span class="line">            x1 = x2</span><br><span class="line">            f1 = calculate(x1)</span><br><span class="line">            flag = <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æ¨¡æ‹Ÿæ¸©åº¦è¡°å‡</span></span><br><span class="line">    T *= rate</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è¿ç»­ä¸¤æ¬¡Mapkobé“¾è·¯å¾„æ— å˜åŒ–åˆ™åœæ­¢å¾ªç¯</span></span><br><span class="line">    <span class="keyword">if</span> flag &gt;= <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¾—åˆ°æœ€ç»ˆè·¯å¾„ç»“æœ</span></span><br><span class="line">x = x1</span><br></pre></td></tr></table></figure><h2 id="ä»£ç è¿è¡ŒåŠæµ‹è¯•"><a class="header-anchor" href="#ä»£ç è¿è¡ŒåŠæµ‹è¯•">#</a>ä»£ç è¿è¡ŒåŠæµ‹è¯•</h2><p>ä»£ç çš„è¿è¡Œç»“æœå¦‚ä¸‹:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">time: 14.867s</span><br><span class="line">result: 0 -&gt; 3 -&gt; 2 -&gt; 1</span><br><span class="line">cost: 108</span><br><span class="line"></span><br><span class="line">time: 16.764s</span><br><span class="line">result: 5 -&gt; 6 -&gt; 7 -&gt; 1 -&gt; 2 -&gt; 9 -&gt; 0 -&gt; 8 -&gt; 4 -&gt; 3</span><br><span class="line">cost: 229</span><br><span class="line"></span><br><span class="line">time: 24.910s</span><br><span class="line">result: 12 -&gt; 15 -&gt; 8 -&gt; 0 -&gt; 18 -&gt; 3 -&gt; 21 -&gt; 16 -&gt; 27 -&gt; 20</span><br><span class="line"> -&gt; 29 -&gt; 14 -&gt; 10 -&gt; 6 -&gt; 28 -&gt; 25 -&gt; 17 -&gt; 5 -&gt; 4 -&gt; 11</span><br><span class="line"> -&gt; 24 -&gt; 1 -&gt; 26 -&gt; 9 -&gt; 23 -&gt; 7 -&gt; 19 -&gt; 13 -&gt; 2 -&gt; 22</span><br><span class="line">cost: 576</span><br></pre></td></tr></table></figure><p>ç”±äºæ•°æ®è®¡ç®—ç»“æœè¿‡æ…¢, åœ¨ä»£ç ä¸­é¢å¤–å¢åŠ äº†ç»ˆæ­¢æ¡ä»¶: <code>å½“æ¸©åº¦ä½äº0.01æ—¶ç¨‹åºåœæ­¢</code>.<br>ç”±äºå‰ä¸¤ä¸ªæµ‹è¯•æ•°æ®åŸå¸‚æ•°é‡è¾ƒå°‘, å·²ç»å¾—åˆ°æœ€ä¼˜è§£, åç»­æ”¹è¿›å®éªŒä»…ä»¥<code>30</code>ä¸ªåŸå¸‚çš„ç»“æœä½œä¸ºå¯¹æ¯”.<br>è€ƒè™‘åˆ°åˆå§‹å€¼ä¸ºéšæœºé€‰å–çš„, ä¸”æœ€ç»ˆçš„è·¯å¾„ä¸ºä¸€ä¸ª<code>å¤´å°¾ç›¸æ¥</code>çš„&quot;ç¯&quot;, ä¿®æ”¹æ–°è§£çš„äº§ç”Ÿæ–¹æ³•</p>$$\color{red}{\pi_{1}...\pi_{u-1}}\pi_{u}\pi_{u+1}...\pi_{v-1}\pi_{v}\color{red}{\pi_{v+1}...\pi_{n}} \\\downarrow{} \\\color{red}{\pi_{1}...\pi_{v+1}}\pi_{u}\pi_{u+1}...\pi_{v-1}\pi_{v}\color{red}{\pi_{u-1}...\pi_{n}}\tag{4}$$<p>ä»£ç çš„è¿è¡Œç»“æœå¦‚ä¸‹:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">time: 22.672s</span><br><span class="line">result: 9 -&gt; 17 -&gt; 5 -&gt; 18 -&gt; 16 -&gt; 27 -&gt; 20 -&gt; 21 -&gt; 4 -&gt; 1</span><br><span class="line"> -&gt; 12 -&gt; 15 -&gt; 8 -&gt; 3 -&gt; 13 -&gt; 25 -&gt; 2 -&gt; 29 -&gt; 14 -&gt; 10</span><br><span class="line"> -&gt; 6 -&gt; 28 -&gt; 22 -&gt; 11 -&gt; 24 -&gt; 7 -&gt; 19 -&gt; 23 -&gt; 26 -&gt; 0</span><br><span class="line">cost: 565</span><br></pre></td></tr></table></figure><p>å¢å¤§å˜æ¢çš„è‡ªç”±åº¦, åªäº¤æ¢<code>u</code>å’Œ<code>v</code>çš„ä¸¤ä¸ªåºå·</p>$$\pi_{1}...\pi_{u-1}\color{red}{\pi_{u}}\pi_{u+1}...\pi_{v-1}\color{red}{\pi_{v}}\pi_{v+1}...\pi_{n} \\\downarrow{} \\\pi_{1}...\pi_{u-1}\color{red}{\pi_{v}}\pi_{u+1}...\pi_{v-1}\color{red}{\pi_{u}}\pi_{v+1}...\pi_{n}\tag{5}$$<p>ä»£ç çš„è¿è¡Œç»“æœå¦‚ä¸‹:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">time: 11.749s</span><br><span class="line">result: 0 -&gt; 2 -&gt; 22 -&gt; 11 -&gt; 7 -&gt; 28 -&gt; 6 -&gt; 19 -&gt; 23 -&gt; 26</span><br><span class="line"> -&gt; 9 -&gt; 21 -&gt; 12 -&gt; 13 -&gt; 16 -&gt; 27 -&gt; 20 -&gt; 15 -&gt; 8 -&gt; 24</span><br><span class="line"> -&gt; 4 -&gt; 1 -&gt; 5 -&gt; 25 -&gt; 17 -&gt; 18 -&gt; 3 -&gt; 29 -&gt; 14 -&gt; 10</span><br><span class="line">cost: 475</span><br></pre></td></tr></table></figure><p>è§‚å¯Ÿä»£ç è¿è¡ŒçŠ¶æ€, éƒ½æ˜¯æ¸©åº¦è¾¾åˆ°<code>æœ€å°å€¼ä»¥ä¸‹</code>åé€€å‡ºçš„ç¨‹åº, å¯èƒ½æœªè¾¾åˆ°<code>å½“å‰å‚æ•°ä¸‹</code>çš„æœ€ä½³ç»“æœ, æ•…å°†å¾ªç¯ç»ˆæ­¢æ¡ä»¶æ”¹ä¸º<code>åªæœ‰è¿ç»­ä¸¤ä¸ªMapkobé“¾è·¯å¾„æ— å˜åŒ–</code>.<br>ä»£ç çš„è¿è¡Œç»“æœå¦‚ä¸‹:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">time: 7.6435s</span><br><span class="line">result: 8 -&gt; 2 -&gt; 21 -&gt; 6 -&gt; 28 -&gt; 29 -&gt; 14 -&gt; 10 -&gt; 17 -&gt; 23</span><br><span class="line"> -&gt; 26 -&gt; 9 -&gt; 12 -&gt; 15 -&gt; 19 -&gt; 25 -&gt; 1 -&gt; 5 -&gt; 13 -&gt; 16</span><br><span class="line"> -&gt; 27 -&gt; 20 -&gt; 18 -&gt; 22 -&gt; 11 -&gt; 0 -&gt; 24 -&gt; 4 -&gt; 7 -&gt; 3</span><br><span class="line">cost: 467</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥ç»“æœå¦‚<code>è¡¨1</code>æ‰€ç¤º:</p><center>è¡¨1 ä»£ç è¿è¡Œç»“æœ</center><table><thead><tr><th style="text-align:center">ä»£ç ç‰ˆæœ¬</th><th style="text-align:center">æ—¶é—´</th><th style="text-align:center">èŠ±è´¹</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">24.910s</td><td style="text-align:center">576</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">22.672s</td><td style="text-align:center">565</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center">11.749s</td><td style="text-align:center">475</td></tr><tr><td style="text-align:center">4</td><td style="text-align:center"><font color=#ff0000>7.6435s</font></td><td style="text-align:center"><font color=#ff0000>467</font></td></tr></tbody></table><h2 id="ç»“è®º"><a class="header-anchor" href="#ç»“è®º">#</a>ç»“è®º</h2><p>ç®—æ³•åœ¨å¤šé¡¹å¼æ—¶é—´é‡Œç»™å‡ºä¸€ä¸ªè¿‘ä¼¼æœ€ä¼˜è§£.</p><h2 id="é™„å½•"><a class="header-anchor" href="#é™„å½•">#</a>é™„å½•</h2><h3 id="åŸå¸‚çŸ©é˜µç”Ÿæˆä»£ç "><a class="header-anchor" href="#åŸå¸‚çŸ©é˜µç”Ÿæˆä»£ç ">#</a>åŸå¸‚çŸ©é˜µç”Ÿæˆä»£ç </h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">generate_city</span><span class="params">(num, min=<span class="number">10</span>, max=<span class="number">100</span>)</span>:</span></span><br><span class="line">data = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(num):</span><br><span class="line">temp_data = []</span><br><span class="line"><span class="keyword">for</span> j <span class="keyword">in</span> range(num):</span><br><span class="line"><span class="keyword">if</span>(i == j):</span><br><span class="line">temp_data.append(<span class="number">0</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">temp_data.append(random.randint(min, max))</span><br><span class="line">data.append(temp_data)</span><br><span class="line"><span class="keyword">return</span> data</span><br><span class="line"></span><br><span class="line">print(generate_city(<span class="number">4</span>))</span><br><span class="line">print(generate_city(<span class="number">10</span>))</span><br><span class="line">print(generate_city(<span class="number">30</span>))</span><br></pre></td></tr></table></figure><h3 id="æ¨¡æ‹Ÿé€€ç«ç®—æ³•ä»£ç "><a class="header-anchor" href="#æ¨¡æ‹Ÿé€€ç«ç®—æ³•ä»£ç ">#</a>æ¨¡æ‹Ÿé€€ç«ç®—æ³•ä»£ç </h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SA</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, citymap, T_max=<span class="number">100</span>, T_min=<span class="number">0.01</span>, iter=<span class="number">20000</span>, rate=<span class="number">0.90</span>)</span>:</span></span><br><span class="line">        self.citymap = citymap</span><br><span class="line">        self.citynum = len(citymap)</span><br><span class="line">        self.T_max = T_max</span><br><span class="line">        self.T_min = T_min</span><br><span class="line">        self.iter = iter</span><br><span class="line">        self.rate = rate</span><br><span class="line"></span><br><span class="line">        self.i = random.sample(range(self.citynum), self.citynum)</span><br><span class="line"></span><br><span class="line">        start_time = time.time()</span><br><span class="line">        self.solve()</span><br><span class="line">        end_time = time.time()</span><br><span class="line"></span><br><span class="line">        print(<span class="string">'time: '</span> + str(end_time - start_time)[:<span class="number">6</span>] + <span class="string">'s'</span>)</span><br><span class="line">        print(<span class="string">'result: '</span> + <span class="string">' -&gt; '</span>.join(str(i) <span class="keyword">for</span> i <span class="keyword">in</span> self.x))</span><br><span class="line">        print(<span class="string">'cost: '</span> + str(self.calculate(self.x)))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">calculate</span><span class="params">(self, city_list)</span>:</span></span><br><span class="line">        cost = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(self.citynum - <span class="number">1</span>):</span><br><span class="line">            cost = cost + self.citymap[city_list[i]][city_list[i + <span class="number">1</span>]]</span><br><span class="line">        cost = cost + self.citymap[city_list[i + <span class="number">1</span>]][city_list[<span class="number">0</span>]]</span><br><span class="line">        <span class="keyword">return</span> cost</span><br><span class="line"></span><br><span class="line">    <span class="comment"># def generate(self, city_list):</span></span><br><span class="line">    <span class="comment">#     u, v = random.sample(range(self.citynum + 1), 2)</span></span><br><span class="line">    <span class="comment">#     if u &gt; v:</span></span><br><span class="line">    <span class="comment">#         temp_list = city_list[u:] + city_list[:v]</span></span><br><span class="line">    <span class="comment">#         temp_list.reverse()</span></span><br><span class="line">    <span class="comment">#         return temp_list[self.citynum-u:] + city_list[v:u] + temp_list[:self.citynum-u]</span></span><br><span class="line">    <span class="comment">#     else:</span></span><br><span class="line">    <span class="comment">#         temp_list = city_list[u:v]</span></span><br><span class="line">    <span class="comment">#         temp_list.reverse()</span></span><br><span class="line">    <span class="comment">#         return city_list[:u] + temp_list + city_list[v:]</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># def generate(self, city_list):</span></span><br><span class="line">    <span class="comment">#     u, v = random.sample(range(self.citynum + 1), 2)</span></span><br><span class="line">    <span class="comment">#     if u &gt; v:</span></span><br><span class="line">    <span class="comment">#         u, v = v, u</span></span><br><span class="line">    <span class="comment">#     temp_list = city_list[u:v]</span></span><br><span class="line">    <span class="comment">#     temp_list.reverse()</span></span><br><span class="line">    <span class="comment">#     return city_list[:u] + temp_list + city_list[v:]</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">generate</span><span class="params">(self, city_list)</span>:</span></span><br><span class="line">        u, v = random.sample(range(self.citynum), <span class="number">2</span>)</span><br><span class="line">        <span class="keyword">if</span> u &gt; v:</span><br><span class="line">            u, v = v, u</span><br><span class="line">        <span class="keyword">return</span> city_list[:u] + city_list[v:v+<span class="number">1</span>] + city_list[u+<span class="number">1</span>:v] + city_list[u:u+<span class="number">1</span>] + city_list[v+<span class="number">1</span>:]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">accept</span><span class="params">(self, df, T)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> df &lt; <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">if</span> np.exp(-df / T) &gt;= random.random():</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">solve</span><span class="params">(self)</span>:</span></span><br><span class="line">        x1 = self.i</span><br><span class="line">        f1 = self.calculate(x1)</span><br><span class="line">        T = self.T_max</span><br><span class="line">        flag = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            flag = flag + <span class="number">1</span></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(self.iter):</span><br><span class="line">                x2 = self.generate(x1)</span><br><span class="line">                f2 = self.calculate(x2)</span><br><span class="line">                df = f2 - f1</span><br><span class="line">                <span class="keyword">if</span> self.accept(df, T):</span><br><span class="line">                    x1 = x2</span><br><span class="line">                    f1 = self.calculate(x1)</span><br><span class="line">                    flag = <span class="number">0</span></span><br><span class="line">            T *= self.rate</span><br><span class="line">            <span class="keyword">if</span> flag &gt;= <span class="number">2</span>:</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">        self.x = x1</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    SA([[<span class="number">0</span>, <span class="number">48</span>, <span class="number">46</span>, <span class="number">48</span>], [<span class="number">1</span>, <span class="number">0</span>, <span class="number">63</span>, <span class="number">4</span>], [<span class="number">39</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">59</span>], [<span class="number">67</span>, <span class="number">28</span>, <span class="number">56</span>, <span class="number">0</span>]])</span><br><span class="line">    SA([[<span class="number">0</span>, <span class="number">76</span>, <span class="number">62</span>, <span class="number">85</span>, <span class="number">81</span>, <span class="number">99</span>, <span class="number">78</span>, <span class="number">99</span>, <span class="number">37</span>, <span class="number">87</span>],</span><br><span class="line">        [<span class="number">31</span>, <span class="number">0</span>, <span class="number">24</span>, <span class="number">61</span>, <span class="number">56</span>, <span class="number">89</span>, <span class="number">84</span>, <span class="number">99</span>, <span class="number">48</span>, <span class="number">44</span>],</span><br><span class="line">        [<span class="number">12</span>, <span class="number">54</span>, <span class="number">0</span>, <span class="number">43</span>, <span class="number">53</span>, <span class="number">86</span>, <span class="number">73</span>, <span class="number">90</span>, <span class="number">37</span>, <span class="number">22</span>],</span><br><span class="line">        [<span class="number">77</span>, <span class="number">12</span>, <span class="number">23</span>, <span class="number">0</span>, <span class="number">64</span>, <span class="number">13</span>, <span class="number">61</span>, <span class="number">29</span>, <span class="number">94</span>, <span class="number">54</span>],</span><br><span class="line">        [<span class="number">17</span>, <span class="number">90</span>, <span class="number">81</span>, <span class="number">27</span>, <span class="number">0</span>, <span class="number">61</span>, <span class="number">94</span>, <span class="number">36</span>, <span class="number">79</span>, <span class="number">64</span>],</span><br><span class="line">        [<span class="number">47</span>, <span class="number">27</span>, <span class="number">66</span>, <span class="number">82</span>, <span class="number">87</span>, <span class="number">0</span>, <span class="number">17</span>, <span class="number">57</span>, <span class="number">91</span>, <span class="number">55</span>],</span><br><span class="line">        [<span class="number">98</span>, <span class="number">18</span>, <span class="number">93</span>, <span class="number">72</span>, <span class="number">89</span>, <span class="number">90</span>, <span class="number">0</span>, <span class="number">48</span>, <span class="number">47</span>, <span class="number">94</span>],</span><br><span class="line">        [<span class="number">88</span>, <span class="number">13</span>, <span class="number">97</span>, <span class="number">78</span>, <span class="number">80</span>, <span class="number">54</span>, <span class="number">21</span>, <span class="number">0</span>, <span class="number">10</span>, <span class="number">96</span>],</span><br><span class="line">        [<span class="number">32</span>, <span class="number">87</span>, <span class="number">75</span>, <span class="number">27</span>, <span class="number">10</span>, <span class="number">94</span>, <span class="number">36</span>, <span class="number">21</span>, <span class="number">0</span>, <span class="number">14</span>],</span><br><span class="line">        [<span class="number">18</span>, <span class="number">97</span>, <span class="number">75</span>, <span class="number">91</span>, <span class="number">57</span>, <span class="number">78</span>, <span class="number">76</span>, <span class="number">70</span>, <span class="number">13</span>, <span class="number">0</span>]])</span><br><span class="line">    SA([[<span class="number">0</span>, <span class="number">84</span>, <span class="number">19</span>, <span class="number">73</span>, <span class="number">83</span>, <span class="number">56</span>, <span class="number">55</span>, <span class="number">78</span>, <span class="number">68</span>, <span class="number">10</span>, <span class="number">33</span>, <span class="number">61</span>, <span class="number">23</span>, <span class="number">41</span>, <span class="number">17</span>,</span><br><span class="line">         <span class="number">81</span>, <span class="number">12</span>, <span class="number">22</span>, <span class="number">24</span>, <span class="number">60</span>, <span class="number">85</span>, <span class="number">53</span>, <span class="number">82</span>, <span class="number">97</span>, <span class="number">13</span>, <span class="number">44</span>, <span class="number">54</span>, <span class="number">96</span>, <span class="number">54</span>, <span class="number">18</span>],</span><br><span class="line">        [<span class="number">56</span>, <span class="number">0</span>, <span class="number">25</span>, <span class="number">76</span>, <span class="number">60</span>, <span class="number">11</span>, <span class="number">38</span>, <span class="number">35</span>, <span class="number">98</span>, <span class="number">76</span>, <span class="number">25</span>, <span class="number">67</span>, <span class="number">29</span>, <span class="number">51</span>, <span class="number">53</span>,</span><br><span class="line">         <span class="number">29</span>, <span class="number">94</span>, <span class="number">70</span>, <span class="number">76</span>, <span class="number">74</span>, <span class="number">83</span>, <span class="number">29</span>, <span class="number">54</span>, <span class="number">64</span>, <span class="number">75</span>, <span class="number">33</span>, <span class="number">25</span>, <span class="number">53</span>, <span class="number">23</span>, <span class="number">62</span>],</span><br><span class="line">        [<span class="number">43</span>, <span class="number">89</span>, <span class="number">0</span>, <span class="number">95</span>, <span class="number">100</span>, <span class="number">93</span>, <span class="number">38</span>, <span class="number">95</span>, <span class="number">77</span>, <span class="number">34</span>, <span class="number">33</span>, <span class="number">70</span>, <span class="number">90</span>, <span class="number">75</span>, <span class="number">66</span>,</span><br><span class="line">         <span class="number">75</span>, <span class="number">26</span>, <span class="number">81</span>, <span class="number">90</span>, <span class="number">19</span>, <span class="number">91</span>, <span class="number">27</span>, <span class="number">10</span>, <span class="number">25</span>, <span class="number">17</span>, <span class="number">37</span>, <span class="number">18</span>, <span class="number">95</span>, <span class="number">13</span>, <span class="number">27</span>],</span><br><span class="line">        [<span class="number">31</span>, <span class="number">26</span>, <span class="number">63</span>, <span class="number">0</span>, <span class="number">80</span>, <span class="number">71</span>, <span class="number">64</span>, <span class="number">70</span>, <span class="number">10</span>, <span class="number">54</span>, <span class="number">70</span>, <span class="number">47</span>, <span class="number">78</span>, <span class="number">12</span>, <span class="number">18</span>,</span><br><span class="line">         <span class="number">89</span>, <span class="number">69</span>, <span class="number">90</span>, <span class="number">59</span>, <span class="number">37</span>, <span class="number">24</span>, <span class="number">11</span>, <span class="number">90</span>, <span class="number">87</span>, <span class="number">71</span>, <span class="number">48</span>, <span class="number">38</span>, <span class="number">76</span>, <span class="number">84</span>, <span class="number">13</span>],</span><br><span class="line">        [<span class="number">24</span>, <span class="number">16</span>, <span class="number">72</span>, <span class="number">64</span>, <span class="number">0</span>, <span class="number">14</span>, <span class="number">64</span>, <span class="number">11</span>, <span class="number">82</span>, <span class="number">52</span>, <span class="number">87</span>, <span class="number">14</span>, <span class="number">43</span>, <span class="number">75</span>, <span class="number">32</span>,</span><br><span class="line">         <span class="number">79</span>, <span class="number">66</span>, <span class="number">54</span>, <span class="number">66</span>, <span class="number">50</span>, <span class="number">55</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">85</span>, <span class="number">31</span>, <span class="number">58</span>, <span class="number">37</span>, <span class="number">60</span>, <span class="number">33</span>, <span class="number">83</span>],</span><br><span class="line">        [<span class="number">11</span>, <span class="number">15</span>, <span class="number">56</span>, <span class="number">46</span>, <span class="number">37</span>, <span class="number">0</span>, <span class="number">50</span>, <span class="number">86</span>, <span class="number">55</span>, <span class="number">76</span>, <span class="number">17</span>, <span class="number">59</span>, <span class="number">58</span>, <span class="number">15</span>, <span class="number">37</span>,</span><br><span class="line">         <span class="number">12</span>, <span class="number">22</span>, <span class="number">39</span>, <span class="number">33</span>, <span class="number">97</span>, <span class="number">65</span>, <span class="number">88</span>, <span class="number">57</span>, <span class="number">56</span>, <span class="number">64</span>, <span class="number">29</span>, <span class="number">69</span>, <span class="number">51</span>, <span class="number">66</span>, <span class="number">94</span>],</span><br><span class="line">        [<span class="number">63</span>, <span class="number">71</span>, <span class="number">50</span>, <span class="number">34</span>, <span class="number">97</span>, <span class="number">87</span>, <span class="number">0</span>, <span class="number">37</span>, <span class="number">75</span>, <span class="number">58</span>, <span class="number">68</span>, <span class="number">21</span>, <span class="number">57</span>, <span class="number">74</span>, <span class="number">75</span>,</span><br><span class="line">         <span class="number">84</span>, <span class="number">20</span>, <span class="number">90</span>, <span class="number">77</span>, <span class="number">18</span>, <span class="number">99</span>, <span class="number">59</span>, <span class="number">19</span>, <span class="number">22</span>, <span class="number">40</span>, <span class="number">33</span>, <span class="number">44</span>, <span class="number">81</span>, <span class="number">11</span>, <span class="number">34</span>],</span><br><span class="line">        [<span class="number">89</span>, <span class="number">79</span>, <span class="number">22</span>, <span class="number">15</span>, <span class="number">78</span>, <span class="number">55</span>, <span class="number">83</span>, <span class="number">0</span>, <span class="number">21</span>, <span class="number">74</span>, <span class="number">22</span>, <span class="number">69</span>, <span class="number">53</span>, <span class="number">25</span>, <span class="number">57</span>,</span><br><span class="line">         <span class="number">100</span>, <span class="number">88</span>, <span class="number">53</span>, <span class="number">68</span>, <span class="number">18</span>, <span class="number">99</span>, <span class="number">71</span>, <span class="number">81</span>, <span class="number">56</span>, <span class="number">72</span>, <span class="number">82</span>, <span class="number">100</span>, <span class="number">21</span>, <span class="number">14</span>, <span class="number">55</span>],</span><br><span class="line">        [<span class="number">19</span>, <span class="number">88</span>, <span class="number">13</span>, <span class="number">28</span>, <span class="number">61</span>, <span class="number">79</span>, <span class="number">73</span>, <span class="number">31</span>, <span class="number">0</span>, <span class="number">14</span>, <span class="number">85</span>, <span class="number">61</span>, <span class="number">36</span>, <span class="number">39</span>, <span class="number">62</span>,</span><br><span class="line">         <span class="number">44</span>, <span class="number">69</span>, <span class="number">63</span>, <span class="number">25</span>, <span class="number">55</span>, <span class="number">51</span>, <span class="number">100</span>, <span class="number">77</span>, <span class="number">36</span>, <span class="number">11</span>, <span class="number">78</span>, <span class="number">37</span>, <span class="number">76</span>, <span class="number">88</span>, <span class="number">66</span>],</span><br><span class="line">        [<span class="number">15</span>, <span class="number">99</span>, <span class="number">36</span>, <span class="number">61</span>, <span class="number">79</span>, <span class="number">85</span>, <span class="number">57</span>, <span class="number">26</span>, <span class="number">39</span>, <span class="number">0</span>, <span class="number">22</span>, <span class="number">54</span>, <span class="number">13</span>, <span class="number">78</span>, <span class="number">95</span>,</span><br><span class="line">         <span class="number">99</span>, <span class="number">94</span>, <span class="number">11</span>, <span class="number">60</span>, <span class="number">12</span>, <span class="number">43</span>, <span class="number">20</span>, <span class="number">60</span>, <span class="number">28</span>, <span class="number">24</span>, <span class="number">95</span>, <span class="number">94</span>, <span class="number">50</span>, <span class="number">51</span>, <span class="number">77</span>],</span><br><span class="line">        [<span class="number">34</span>, <span class="number">73</span>, <span class="number">96</span>, <span class="number">100</span>, <span class="number">81</span>, <span class="number">93</span>, <span class="number">21</span>, <span class="number">63</span>, <span class="number">34</span>, <span class="number">19</span>, <span class="number">0</span>, <span class="number">63</span>, <span class="number">47</span>, <span class="number">95</span>, <span class="number">36</span>,</span><br><span class="line">         <span class="number">20</span>, <span class="number">18</span>, <span class="number">13</span>, <span class="number">99</span>, <span class="number">58</span>, <span class="number">30</span>, <span class="number">98</span>, <span class="number">29</span>, <span class="number">75</span>, <span class="number">85</span>, <span class="number">58</span>, <span class="number">99</span>, <span class="number">39</span>, <span class="number">25</span>, <span class="number">79</span>],</span><br><span class="line">        [<span class="number">16</span>, <span class="number">90</span>, <span class="number">15</span>, <span class="number">85</span>, <span class="number">79</span>, <span class="number">53</span>, <span class="number">44</span>, <span class="number">13</span>, <span class="number">83</span>, <span class="number">86</span>, <span class="number">27</span>, <span class="number">0</span>, <span class="number">37</span>, <span class="number">41</span>, <span class="number">42</span>,</span><br><span class="line">         <span class="number">13</span>, <span class="number">50</span>, <span class="number">45</span>, <span class="number">97</span>, <span class="number">36</span>, <span class="number">96</span>, <span class="number">87</span>, <span class="number">59</span>, <span class="number">57</span>, <span class="number">42</span>, <span class="number">36</span>, <span class="number">85</span>, <span class="number">17</span>, <span class="number">55</span>, <span class="number">98</span>],</span><br><span class="line">        [<span class="number">99</span>, <span class="number">85</span>, <span class="number">69</span>, <span class="number">70</span>, <span class="number">44</span>, <span class="number">34</span>, <span class="number">39</span>, <span class="number">88</span>, <span class="number">35</span>, <span class="number">13</span>, <span class="number">26</span>, <span class="number">40</span>, <span class="number">0</span>, <span class="number">11</span>, <span class="number">19</span>,</span><br><span class="line">         <span class="number">10</span>, <span class="number">22</span>, <span class="number">28</span>, <span class="number">21</span>, <span class="number">52</span>, <span class="number">54</span>, <span class="number">91</span>, <span class="number">76</span>, <span class="number">78</span>, <span class="number">53</span>, <span class="number">66</span>, <span class="number">87</span>, <span class="number">17</span>, <span class="number">54</span>, <span class="number">87</span>],</span><br><span class="line">        [<span class="number">80</span>, <span class="number">66</span>, <span class="number">29</span>, <span class="number">77</span>, <span class="number">41</span>, <span class="number">92</span>, <span class="number">61</span>, <span class="number">25</span>, <span class="number">10</span>, <span class="number">100</span>, <span class="number">47</span>, <span class="number">39</span>, <span class="number">92</span>, <span class="number">0</span>, <span class="number">30</span>,</span><br><span class="line">         <span class="number">37</span>, <span class="number">10</span>, <span class="number">81</span>, <span class="number">59</span>, <span class="number">24</span>, <span class="number">75</span>, <span class="number">74</span>, <span class="number">34</span>, <span class="number">65</span>, <span class="number">82</span>, <span class="number">53</span>, <span class="number">100</span>, <span class="number">82</span>, <span class="number">69</span>, <span class="number">92</span>],</span><br><span class="line">        [<span class="number">87</span>, <span class="number">73</span>, <span class="number">97</span>, <span class="number">59</span>, <span class="number">72</span>, <span class="number">77</span>, <span class="number">34</span>, <span class="number">86</span>, <span class="number">57</span>, <span class="number">90</span>, <span class="number">10</span>, <span class="number">74</span>, <span class="number">38</span>, <span class="number">18</span>, <span class="number">0</span>,</span><br><span class="line">         <span class="number">90</span>, <span class="number">19</span>, <span class="number">55</span>, <span class="number">17</span>, <span class="number">71</span>, <span class="number">63</span>, <span class="number">95</span>, <span class="number">83</span>, <span class="number">88</span>, <span class="number">45</span>, <span class="number">32</span>, <span class="number">40</span>, <span class="number">51</span>, <span class="number">70</span>, <span class="number">71</span>],</span><br><span class="line">        [<span class="number">78</span>, <span class="number">51</span>, <span class="number">43</span>, <span class="number">92</span>, <span class="number">50</span>, <span class="number">81</span>, <span class="number">91</span>, <span class="number">59</span>, <span class="number">11</span>, <span class="number">48</span>, <span class="number">52</span>, <span class="number">58</span>, <span class="number">30</span>, <span class="number">79</span>, <span class="number">48</span>,</span><br><span class="line">         <span class="number">0</span>, <span class="number">26</span>, <span class="number">28</span>, <span class="number">52</span>, <span class="number">17</span>, <span class="number">24</span>, <span class="number">11</span>, <span class="number">63</span>, <span class="number">55</span>, <span class="number">46</span>, <span class="number">76</span>, <span class="number">59</span>, <span class="number">32</span>, <span class="number">43</span>, <span class="number">96</span>],</span><br><span class="line">        [<span class="number">77</span>, <span class="number">64</span>, <span class="number">11</span>, <span class="number">77</span>, <span class="number">89</span>, <span class="number">64</span>, <span class="number">23</span>, <span class="number">31</span>, <span class="number">81</span>, <span class="number">43</span>, <span class="number">55</span>, <span class="number">30</span>, <span class="number">38</span>, <span class="number">92</span>, <span class="number">63</span>,</span><br><span class="line">         <span class="number">67</span>, <span class="number">0</span>, <span class="number">100</span>, <span class="number">31</span>, <span class="number">40</span>, <span class="number">59</span>, <span class="number">39</span>, <span class="number">41</span>, <span class="number">35</span>, <span class="number">72</span>, <span class="number">19</span>, <span class="number">37</span>, <span class="number">12</span>, <span class="number">76</span>, <span class="number">65</span>],</span><br><span class="line">        [<span class="number">33</span>, <span class="number">80</span>, <span class="number">18</span>, <span class="number">86</span>, <span class="number">35</span>, <span class="number">18</span>, <span class="number">81</span>, <span class="number">22</span>, <span class="number">32</span>, <span class="number">47</span>, <span class="number">72</span>, <span class="number">43</span>, <span class="number">60</span>, <span class="number">73</span>, <span class="number">88</span>,</span><br><span class="line">         <span class="number">49</span>, <span class="number">30</span>, <span class="number">0</span>, <span class="number">13</span>, <span class="number">46</span>, <span class="number">84</span>, <span class="number">72</span>, <span class="number">25</span>, <span class="number">15</span>, <span class="number">88</span>, <span class="number">22</span>, <span class="number">69</span>, <span class="number">60</span>, <span class="number">97</span>, <span class="number">97</span>],</span><br><span class="line">        [<span class="number">57</span>, <span class="number">68</span>, <span class="number">69</span>, <span class="number">33</span>, <span class="number">74</span>, <span class="number">36</span>, <span class="number">24</span>, <span class="number">49</span>, <span class="number">32</span>, <span class="number">11</span>, <span class="number">48</span>, <span class="number">38</span>, <span class="number">56</span>, <span class="number">20</span>, <span class="number">60</span>,</span><br><span class="line">         <span class="number">24</span>, <span class="number">16</span>, <span class="number">69</span>, <span class="number">0</span>, <span class="number">60</span>, <span class="number">27</span>, <span class="number">98</span>, <span class="number">33</span>, <span class="number">26</span>, <span class="number">73</span>, <span class="number">37</span>, <span class="number">40</span>, <span class="number">83</span>, <span class="number">29</span>, <span class="number">89</span>],</span><br><span class="line">        [<span class="number">83</span>, <span class="number">79</span>, <span class="number">23</span>, <span class="number">58</span>, <span class="number">33</span>, <span class="number">65</span>, <span class="number">76</span>, <span class="number">97</span>, <span class="number">65</span>, <span class="number">17</span>, <span class="number">93</span>, <span class="number">87</span>, <span class="number">66</span>, <span class="number">25</span>, <span class="number">95</span>,</span><br><span class="line">         <span class="number">28</span>, <span class="number">90</span>, <span class="number">78</span>, <span class="number">33</span>, <span class="number">0</span>, <span class="number">64</span>, <span class="number">90</span>, <span class="number">41</span>, <span class="number">12</span>, <span class="number">74</span>, <span class="number">30</span>, <span class="number">100</span>, <span class="number">86</span>, <span class="number">73</span>, <span class="number">49</span>],</span><br><span class="line">        [<span class="number">57</span>, <span class="number">66</span>, <span class="number">50</span>, <span class="number">82</span>, <span class="number">42</span>, <span class="number">56</span>, <span class="number">54</span>, <span class="number">61</span>, <span class="number">55</span>, <span class="number">65</span>, <span class="number">23</span>, <span class="number">98</span>, <span class="number">78</span>, <span class="number">54</span>, <span class="number">44</span>,</span><br><span class="line">         <span class="number">17</span>, <span class="number">60</span>, <span class="number">89</span>, <span class="number">17</span>, <span class="number">44</span>, <span class="number">0</span>, <span class="number">14</span>, <span class="number">48</span>, <span class="number">40</span>, <span class="number">100</span>, <span class="number">44</span>, <span class="number">58</span>, <span class="number">11</span>, <span class="number">55</span>, <span class="number">25</span>],</span><br><span class="line">        [<span class="number">88</span>, <span class="number">18</span>, <span class="number">94</span>, <span class="number">98</span>, <span class="number">32</span>, <span class="number">55</span>, <span class="number">20</span>, <span class="number">40</span>, <span class="number">90</span>, <span class="number">52</span>, <span class="number">80</span>, <span class="number">30</span>, <span class="number">15</span>, <span class="number">89</span>, <span class="number">60</span>,</span><br><span class="line">         <span class="number">72</span>, <span class="number">20</span>, <span class="number">59</span>, <span class="number">77</span>, <span class="number">31</span>, <span class="number">83</span>, <span class="number">0</span>, <span class="number">83</span>, <span class="number">51</span>, <span class="number">90</span>, <span class="number">48</span>, <span class="number">63</span>, <span class="number">48</span>, <span class="number">42</span>, <span class="number">36</span>],</span><br><span class="line">        [<span class="number">98</span>, <span class="number">51</span>, <span class="number">76</span>, <span class="number">52</span>, <span class="number">42</span>, <span class="number">80</span>, <span class="number">57</span>, <span class="number">36</span>, <span class="number">98</span>, <span class="number">64</span>, <span class="number">28</span>, <span class="number">25</span>, <span class="number">18</span>, <span class="number">62</span>, <span class="number">22</span>,</span><br><span class="line">         <span class="number">59</span>, <span class="number">13</span>, <span class="number">95</span>, <span class="number">65</span>, <span class="number">69</span>, <span class="number">91</span>, <span class="number">28</span>, <span class="number">0</span>, <span class="number">88</span>, <span class="number">64</span>, <span class="number">38</span>, <span class="number">97</span>, <span class="number">66</span>, <span class="number">14</span>, <span class="number">96</span>],</span><br><span class="line">        [<span class="number">32</span>, <span class="number">20</span>, <span class="number">71</span>, <span class="number">94</span>, <span class="number">45</span>, <span class="number">93</span>, <span class="number">98</span>, <span class="number">10</span>, <span class="number">99</span>, <span class="number">78</span>, <span class="number">31</span>, <span class="number">35</span>, <span class="number">56</span>, <span class="number">18</span>, <span class="number">91</span>,</span><br><span class="line">         <span class="number">79</span>, <span class="number">23</span>, <span class="number">16</span>, <span class="number">55</span>, <span class="number">71</span>, <span class="number">53</span>, <span class="number">59</span>, <span class="number">75</span>, <span class="number">0</span>, <span class="number">58</span>, <span class="number">66</span>, <span class="number">11</span>, <span class="number">100</span>, <span class="number">81</span>, <span class="number">53</span>],</span><br><span class="line">        [<span class="number">68</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">62</span>, <span class="number">23</span>, <span class="number">74</span>, <span class="number">55</span>, <span class="number">11</span>, <span class="number">83</span>, <span class="number">64</span>, <span class="number">73</span>, <span class="number">57</span>, <span class="number">73</span>, <span class="number">45</span>, <span class="number">28</span>,</span><br><span class="line">         <span class="number">81</span>, <span class="number">40</span>, <span class="number">93</span>, <span class="number">78</span>, <span class="number">29</span>, <span class="number">97</span>, <span class="number">97</span>, <span class="number">36</span>, <span class="number">17</span>, <span class="number">0</span>, <span class="number">70</span>, <span class="number">77</span>, <span class="number">65</span>, <span class="number">75</span>, <span class="number">31</span>],</span><br><span class="line">        [<span class="number">45</span>, <span class="number">12</span>, <span class="number">16</span>, <span class="number">84</span>, <span class="number">72</span>, <span class="number">22</span>, <span class="number">47</span>, <span class="number">93</span>, <span class="number">46</span>, <span class="number">37</span>, <span class="number">85</span>, <span class="number">89</span>, <span class="number">32</span>, <span class="number">92</span>, <span class="number">59</span>,</span><br><span class="line">         <span class="number">93</span>, <span class="number">62</span>, <span class="number">12</span>, <span class="number">80</span>, <span class="number">21</span>, <span class="number">91</span>, <span class="number">80</span>, <span class="number">49</span>, <span class="number">35</span>, <span class="number">90</span>, <span class="number">0</span>, <span class="number">68</span>, <span class="number">54</span>, <span class="number">17</span>, <span class="number">45</span>],</span><br><span class="line">        [<span class="number">21</span>, <span class="number">49</span>, <span class="number">13</span>, <span class="number">58</span>, <span class="number">100</span>, <span class="number">98</span>, <span class="number">56</span>, <span class="number">12</span>, <span class="number">74</span>, <span class="number">13</span>, <span class="number">87</span>, <span class="number">36</span>, <span class="number">48</span>, <span class="number">59</span>, <span class="number">55</span>,</span><br><span class="line">         <span class="number">71</span>, <span class="number">21</span>, <span class="number">70</span>, <span class="number">45</span>, <span class="number">38</span>, <span class="number">63</span>, <span class="number">91</span>, <span class="number">99</span>, <span class="number">100</span>, <span class="number">41</span>, <span class="number">38</span>, <span class="number">0</span>, <span class="number">91</span>, <span class="number">13</span>, <span class="number">48</span>],</span><br><span class="line">        [<span class="number">69</span>, <span class="number">59</span>, <span class="number">58</span>, <span class="number">28</span>, <span class="number">25</span>, <span class="number">98</span>, <span class="number">54</span>, <span class="number">39</span>, <span class="number">75</span>, <span class="number">33</span>, <span class="number">60</span>, <span class="number">52</span>, <span class="number">35</span>, <span class="number">43</span>, <span class="number">15</span>,</span><br><span class="line">         <span class="number">34</span>, <span class="number">90</span>, <span class="number">58</span>, <span class="number">62</span>, <span class="number">34</span>, <span class="number">11</span>, <span class="number">23</span>, <span class="number">41</span>, <span class="number">50</span>, <span class="number">81</span>, <span class="number">75</span>, <span class="number">83</span>, <span class="number">0</span>, <span class="number">60</span>, <span class="number">54</span>],</span><br><span class="line">        [<span class="number">36</span>, <span class="number">44</span>, <span class="number">92</span>, <span class="number">14</span>, <span class="number">41</span>, <span class="number">100</span>, <span class="number">17</span>, <span class="number">19</span>, <span class="number">89</span>, <span class="number">43</span>, <span class="number">30</span>, <span class="number">27</span>, <span class="number">65</span>, <span class="number">80</span>, <span class="number">65</span>,</span><br><span class="line">         <span class="number">81</span>, <span class="number">35</span>, <span class="number">90</span>, <span class="number">17</span>, <span class="number">75</span>, <span class="number">26</span>, <span class="number">89</span>, <span class="number">13</span>, <span class="number">63</span>, <span class="number">16</span>, <span class="number">35</span>, <span class="number">22</span>, <span class="number">86</span>, <span class="number">0</span>, <span class="number">19</span>],</span><br><span class="line">        [<span class="number">85</span>, <span class="number">23</span>, <span class="number">52</span>, <span class="number">95</span>, <span class="number">40</span>, <span class="number">77</span>, <span class="number">71</span>, <span class="number">81</span>, <span class="number">45</span>, <span class="number">66</span>, <span class="number">47</span>, <span class="number">52</span>, <span class="number">53</span>, <span class="number">69</span>, <span class="number">11</span>,</span><br><span class="line">         <span class="number">22</span>, <span class="number">22</span>, <span class="number">86</span>, <span class="number">90</span>, <span class="number">35</span>, <span class="number">33</span>, <span class="number">12</span>, <span class="number">36</span>, <span class="number">51</span>, <span class="number">86</span>, <span class="number">43</span>, <span class="number">59</span>, <span class="number">65</span>, <span class="number">64</span>, <span class="number">0</span>]])</span><br></pre></td></tr></table></figure><script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.3.0/raphael.min.js"></script><script src="//flowchart.js.org/flowchart-latest.js"></script><textarea id="flowchart-0-code" style="display: none">st=>start: è¾“å…¥åŸå¸‚è·ç¦»çŸ©é˜µe1=>end: ç®—æ³•ç»“æŸ, å¾—åˆ°ç»“æœop1=>operation: éšæœºåˆå§‹åŒ–è¡Œèµ°è·¯å¾„op2=>operation: é€šè¿‡2å˜æ¢æ³•ç”Ÿæˆæ–°è·¯å¾„op3=>operation: æ¥å—æ–°è§£op4=>operation: æ”¹å˜æ¸©åº¦å‚æ•°cond1=>condition: ç”¨Metropolisç®—æ³•åˆ¤æ–­æ˜¯å¦æ¥å—æ–°è§£?cond2=>condition: æ˜¯å¦è¿ç»­ä¸¤æ¬¡Mapkobé“¾è·¯å¾„æ— å˜åŒ–?st->op1->op2->cond1cond1(yes)->op3cond1(no)->op4op3->op4->cond2cond2(yes)->e1cond2(no)->op1</textarea><textarea id="flowchart-0-options" style="display: none">{"scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12}</textarea><script>  var code = document.getElementById("flowchart-0-code").value;  var options = JSON.parse(decodeURIComponent(document.getElementById("flowchart-0-options").value));  var diagram = flowchart.parse(code);  diagram.drawSVG("flowchart-0", options);</script>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> computational intelligence </tag>
            
            <tag> TSP </tag>
            
            <tag> SA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>face recognition lab report</title>
      <link href="/blog/2018/10/16/face-recognition-lab-report/"/>
      <url>/blog/2018/10/16/face-recognition-lab-report/</url>
      
        <content type="html"><![CDATA[<h2 id="é—®é¢˜åˆ†æ"><a class="header-anchor" href="#é—®é¢˜åˆ†æ">#</a>é—®é¢˜åˆ†æ</h2><h3 id="é—®é¢˜æè¿°"><a class="header-anchor" href="#é—®é¢˜æè¿°">#</a>é—®é¢˜æè¿°</h3><p>åœ¨ç»™å®šçš„Yaleäººè„¸æ•°æ®é›†ä¸Šè¿›è¡Œäººè„¸è¯†åˆ«. è¾“å…¥ä¸€å¼ å¾…æµ‹è¯•çš„äººè„¸å›¾ç‰‡, åˆ¤æ–­å…¶å±äºæ•°æ®åº“ä¸­å“ªä¸ªäººçš„è„¸.</p><h3 id="æ•°æ®é›†åˆ†æ"><a class="header-anchor" href="#æ•°æ®é›†åˆ†æ">#</a>æ•°æ®é›†åˆ†æ</h3><p>Yaleäººè„¸æ•°æ®é›†ä¸­åŒ…å«æœ‰165å¼ <code>bmp</code>æ ¼å¼çš„é»‘ç™½äººè„¸å›¾åƒ, å›¾åƒå¤§å°ä¸º<code>100*100</code>åƒç´ , è¿™äº›å›¾åƒåˆ†åˆ«å±äº15ä¸ªäºº, æ¯äºº11å¼ å›¾åƒ.</p><a id="more"></a><h2 id="ç°æœ‰æ–¹æ³•"><a class="header-anchor" href="#ç°æœ‰æ–¹æ³•">#</a>ç°æœ‰æ–¹æ³•</h2><h3 id="ä¼ ç»Ÿæ–¹æ³•"><a class="header-anchor" href="#ä¼ ç»Ÿæ–¹æ³•">#</a>ä¼ ç»Ÿæ–¹æ³•</h3><p>ä¼ ç»Ÿçš„æ–¹æ³•æ˜¯å…ˆå¯¹å›¾åƒè¿›è¡Œå¤„ç†å, å¯¹å›¾åƒçš„ç‰¹å¾è¿›è¡Œæå–, ç„¶åç”¨åˆ†ç±»å™¨å¯¹å›¾åƒè¿›è¡Œåˆ†ç±», æœ€åè¯†åˆ«å‡ºå›¾åƒçš„æ–¹æ³•.</p><h4 id="ç‰¹å¾æå–"><a class="header-anchor" href="#ç‰¹å¾æå–">#</a>ç‰¹å¾æå–</h4><ul><li>å¼¹æ€§æ¨¡ç‰ˆ<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></li></ul><blockquote><p>ä¸ºäººè„¸å»ºç«‹å±æ€§æ‹“æ‰‘å›¾æ¥è¡¨ç¤ºäººè„¸å„å™¨å®˜ä¹‹é—´çš„æ‹“æ‰‘ç»“æ„, å®é™…ä¸Šæ˜¯åŸºäºå‡ ä½•ç‰¹å¾å’Œå¯¹ç°åº¦åˆ†å¸ƒä¿¡æ¯è¿›è¡Œå°æ³¢çº¹ç†åˆ†æç›¸ç»“åˆçš„æ–¹æ³•.</p></blockquote><p>è¯¥æ–¹æ³•å¯¹åˆå§‹å‚æ•°è¦æ±‚é«˜, å®ç°è¾ƒå¤æ‚</p><ul><li>ç‰¹å¾è„¸(PCA)<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup></li></ul><blockquote><p>å°†å›¾åƒç”±é«˜ç»´æŠ•å½±åˆ°ä½ç»´å½¢æˆç‰¹å¾çŸ¢é‡, æ‰€æœ‰å­ç©ºé—´çš„æ­£äº¤åŸºè¢«ç§°ä¸ºç‰¹å¾è„¸.</p></blockquote><p>è¯¥æ–¹æ³•é€Ÿåº¦å¿«, ä½†é²æ£’æ€§è¾ƒå·®, å—è¡¨æƒ…ã€å…‰å¼ºå’Œè§†è§’çš„å˜åŒ–å½±å“è¾ƒå¤§.</p><ul><li>å°ºåº¦ä¸å˜ç‰¹å¾å˜æ¢(SIFT)<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup></li></ul><blockquote><p>åœ¨æ¯ä¸ªç‰¹å¾ç‚¹å‘¨å›´çš„é¢†åŸŸå†…, åœ¨é€‰å®šçš„å°ºåº¦ä¸Šæµ‹é‡å›¾åƒçš„å±€éƒ¨æ¢¯åº¦, è®¡ç®—æ¢¯åº¦ç›´æ–¹å›¾ç”Ÿæˆå…·æœ‰ç‹¬ç‰¹æ€§çš„å‘é‡.</p></blockquote><p>å…·æœ‰å°ºåº¦ä¸å˜æ€§çš„ä¼˜ç‚¹, å¹¶ä¸”æŠ—é®æŒ¡. ç¼ºç‚¹æ˜¯è®¡ç®—é‡è¾ƒå¤§, å¦‚æœä¸å€ŸåŠ©ç¡¬ä»¶åŠ é€Ÿæˆ–ä¸“é—¨çš„å›¾åƒå¤„ç†å™¨å¾ˆéš¾å®ç°.</p><ul><li>æ–¹å‘æ¢¯åº¦ç›´æ–¹å›¾(HOG)<sup class="footnote-ref"><a href="#fn4" id="fnref4">[4]</a></sup></li></ul><blockquote><p>å°†å›¾åƒåˆ†å‰²æˆcell, ç„¶åé‡‡é›†cellä¸­å„åƒç´ ç‚¹æ¢¯åº¦æ–¹å‘çš„ç›´æ–¹å›¾, æŠŠç›´æ–¹å›¾ç»„åˆèµ·æ¥å°±å¯ä»¥æ„æˆå›¾åƒç‰¹å¾.</p></blockquote><p>è¯¥æ–¹æ³•å¯¹å›¾åƒçš„é¢œè‰²ä¿¡æ¯å’Œå…‰å­¦å˜åŒ–å…·æœ‰ä¸å˜æ€§, ä½†å¯¹å™ªå£°æ¯”è¾ƒæ•æ„Ÿ.</p><ul><li>å±€éƒ¨äºŒå€¼æ¨¡å¼(LBP)<sup class="footnote-ref"><a href="#fn5" id="fnref5">[5]</a></sup></li></ul><blockquote><p>å°†æŸä¸­å¿ƒåƒç´ çš„ç°åº¦å€¼å’Œå…¶ç›¸é‚»çš„8ä¸ªåƒç´ ä½œæ¯”è¾ƒ, ç”ŸæˆLBPç ç”¨æ¥åæ˜ çº¹ç†ä¿¡æ¯.</p></blockquote><p>å®ƒå…·æœ‰æ—‹è½¬å’Œç°åº¦ä¸å˜æ€§çš„ä¼˜ç‚¹, å¯¹æ–¹å‘ä¿¡æ¯æ¯”è¾ƒæ•æ„Ÿ, ä¸€èˆ¬ç”¨äºå¤„ç†8ä½æˆ–16ä½çš„å›¾ç‰‡.</p><h4 id="åˆ†ç±»å™¨"><a class="header-anchor" href="#åˆ†ç±»å™¨">#</a>åˆ†ç±»å™¨</h4><ul><li>æœ€é‚»è¿‘åˆ†ç±»å™¨<sup class="footnote-ref"><a href="#fn6" id="fnref6">[6]</a></sup></li></ul><blockquote><p>å®šä¹‰ä¸€ä¸ªè·ç¦»åº¦é‡, ä»¥æµ‹è¯•æ ·æœ¬æœ€è¿‘çš„kä¸ªæ ·æœ¬çš„ä¸»è¦ç±»åˆ«ä½œä¸ºæµ‹è¯•æ ·æœ¬çš„ç±»åˆ«.</p></blockquote><ul><li>çº¿æ€§åˆ¤åˆ«å¼åˆ†æ(LDA)<sup class="footnote-ref"><a href="#fn7" id="fnref7">[7]</a></sup></li></ul><blockquote><p>å‡è®¾æ•°æ®ä¸ºå‡å€¼ä¸åŒã€æ–¹å·®ç›¸åŒçš„é«˜æ–¯åˆ†å¸ƒ, æ‰¾å‡ºæœ€ä¼˜å†³ç­–é¢.</p></blockquote><ul><li>é€»è¾‘å›å½’(Logistic Regression)<sup class="footnote-ref"><a href="#fn8" id="fnref8">[8]</a></sup></li></ul><blockquote><p>å‡è®¾åéªŒæ¦‚ç‡ä¸ºLogistics åˆ†å¸ƒ, æ ¹æ®è´å¶æ–¯ç†è®ºè®¡ç®—æŸä¸€ç±»çš„æ¦‚ç‡.</p></blockquote><ul><li>æ”¯æŒå‘é‡æœº(SVM)<sup class="footnote-ref"><a href="#fn9" id="fnref9">[9]</a></sup></li></ul><blockquote><p>æœ€å°åŒ–ç±»é—´çš„æœ€å¤§é—´éš”å¾—åˆ°æœ€ä¼˜å†³ç­–é¢. å¯¹æ•°æ®åˆ†å¸ƒçš„è¦æ±‚ä½, é€‚ç”¨æ€§æ›´å¹¿.</p></blockquote><h3 id="ç¥ç»ç½‘ç»œæ–¹æ³•"><a class="header-anchor" href="#ç¥ç»ç½‘ç»œæ–¹æ³•">#</a>ç¥ç»ç½‘ç»œæ–¹æ³•</h3><p>ç¥ç»ç½‘ç»œæ–¹æ³•éœ€è¦å¤§é‡çš„æ•°æ®, ä¸ç¬¦åˆæœ¬å®éªŒçš„æ¡ä»¶.</p><h3 id="ç»“è®º"><a class="header-anchor" href="#ç»“è®º">#</a>ç»“è®º</h3><p>ç»¼åˆä»¥ä¸Šåˆ†æ, æˆ‘ä»¬æœ€ç»ˆé€‰æ‹©äº†<code>HOG+SVM</code>çš„æ–¹æ³•.</p><h2 id="å®éªŒè¿‡ç¨‹"><a class="header-anchor" href="#å®éªŒè¿‡ç¨‹">#</a>å®éªŒè¿‡ç¨‹</h2><h3 id="ç¼–ç¨‹è¯­è¨€ä»‹ç»"><a class="header-anchor" href="#ç¼–ç¨‹è¯­è¨€ä»‹ç»">#</a>ç¼–ç¨‹è¯­è¨€ä»‹ç»</h3><p>æœ¬å®éªŒæ‰€é€‰æ‹©çš„ç¼–ç¨‹è¯­è¨€ä¸º<code>Matlab</code>, ç¼–ç¨‹è½¯ä»¶ä¸º<code>Matlab 2018b</code>.</p><h3 id="æ•°æ®é›†é¢„å¤„ç†"><a class="header-anchor" href="#æ•°æ®é›†é¢„å¤„ç†">#</a>æ•°æ®é›†é¢„å¤„ç†</h3><p>å¯¹æ¯ä¸ªäººé€‰å–1å¼ ä½œä¸ºæµ‹è¯•æ ·æœ¬, å…¶ä½™10å¼ ä½œä¸ºè®­ç»ƒæ ·æœ¬. å› æ­¤æœ€ç»ˆçš„è®­ç»ƒé›†åŒ…å«150å¼ å›¾åƒ, æµ‹è¯•é›†ä¸º15å¼ .</p><h3 id="ç¨‹åºç¼–å†™"><a class="header-anchor" href="#ç¨‹åºç¼–å†™">#</a>ç¨‹åºç¼–å†™</h3><h4 id="svmæ„é€ 15ä¸ªäºŒåˆ†ç±»å™¨"><a class="header-anchor" href="#svmæ„é€ 15ä¸ªäºŒåˆ†ç±»å™¨">#</a>SVMæ„é€ 15ä¸ªäºŒåˆ†ç±»å™¨</h4><p>æ„é€ 15ä¸ªåˆ†ç±»å™¨, æ¯ä¸€ä¸ªåˆ†ç±»å™¨ç”¨10å¼ ä½œä¸ºæ­£æ ·æœ¬, å…¶ä½™140å¼ ä½œä¸ºè¯¥åˆ†ç±»å™¨çš„è´Ÿæ ·æœ¬, ç„¶åè¿›è¡Œè®­ç»ƒ. æœ€ç»ˆå¾—åˆ°15ä¸ªåˆ†ç±»å™¨, ç”¨äºåˆ†åˆ«è¯†åˆ«æ˜¯å¦ä¸º15ä¸ªäººçš„å›¾åƒ.</p><h4 id="hog-svmæ„é€ 15ä¸ªäºŒåˆ†ç±»å™¨"><a class="header-anchor" href="#hog-svmæ„é€ 15ä¸ªäºŒåˆ†ç±»å™¨">#</a>HOG+SVMæ„é€ 15ä¸ªäºŒåˆ†ç±»å™¨</h4><p>å’Œä¹‹å‰çš„æ–¹æ³•ç›¸åŒ, åœ¨å›¾åƒè¢«åŠ å…¥åˆ†ç±»å™¨ä¸­è¿›è¡Œè®­ç»ƒä¹‹å‰, å…ˆå°†å›¾åƒçš„å¤§å°è½¬æ¢ä¸º<code>256*256</code>, ç„¶åæå–å‡ºHOGç‰¹å¾, é‡å¤ä¸Šè¿°å®éªŒ.<br><code>extractHOGFeatures</code><sup class="footnote-ref"><a href="#fn10" id="fnref10">[10]</a></sup>æ˜¯Matlabé¢„å…ˆå®ç°å¥½çš„æ–¹æ³•, é€‰å–<code>cell</code>ä¸º<code>8*8</code>, <code>block</code>ä¸º<code>2*2</code>.<br>å›¾ä¸€ä¸º<code>s1.bmp</code>å’Œå®ƒçš„HOGç‰¹å¾å›¾:</p><center><p><img src="https://onns.xyz/blog/image/20181017-1.jpg" alt="åŸå›¾ä»¥åŠHOGç‰¹å¾å›¾"></p><p>å›¾1 åŸå›¾ä»¥åŠHOGç‰¹å¾å›¾</p></center><h4 id="hog-svmæ„é€ å¤šåˆ†ç±»å™¨"><a class="header-anchor" href="#hog-svmæ„é€ å¤šåˆ†ç±»å™¨">#</a>HOG+SVMæ„é€ å¤šåˆ†ç±»å™¨</h4><p>åœ¨è®­ç»ƒå›¾åƒå¼€å§‹ä¹‹å‰, å°†HOGç‰¹å¾å›¾å’Œç‰¹å¾å›¾å¯¹åº”çš„æ ‡ç­¾(å³å¯¹åº”çš„äººè„¸çš„æ ‡å·1-15)ä¼ å…¥<code>fitcecoc</code><sup class="footnote-ref"><a href="#fn11" id="fnref11">[11]</a></sup>å‡½æ•°å³å¯è®­ç»ƒå¾—åˆ°ä¸€ä¸ªå¤šæ ‡ç­¾çš„SVM, å¯¹äºç»™å®šçš„æµ‹è¯•æ ·ä¾‹, å¯ä»¥ç»™å‡ºæ ·ä¾‹æ‰€å¯¹åº”çš„æ ‡ç­¾.</p><h2 id="å®éªŒç»“æœ"><a class="header-anchor" href="#å®éªŒç»“æœ">#</a>å®éªŒç»“æœ</h2><h3 id="å®éªŒè¿‡ç¨‹è¯´æ˜"><a class="header-anchor" href="#å®éªŒè¿‡ç¨‹è¯´æ˜">#</a>å®éªŒè¿‡ç¨‹è¯´æ˜</h3><p>ç”±äºå‰ä¸€ä¸ªå®éªŒæ–¹æ³•å¹¶ä¸èƒ½åˆ°è¾¾ç†æƒ³çš„100%å‡†ç¡®ç‡, æ‰€ä»¥æ”¹å˜äº†ä¸åŒçš„æ–¹æ³•é‡æ–°å®ç°, æœ€ç»ˆæœ‰ä¸‰ç§ä¸åŒçš„å®éªŒæ–¹æ³•.<br>ä¸‹è¿°å®éªŒç»“æœå¦‚æ— ç‰¹æ®Šè¯´æ˜, éƒ½æ˜¯æŒ‰ç…§<code>è®­ç»ƒé›†10:æµ‹è¯•é›†1</code>è¿›è¡Œçš„å®éªŒ, å®éªŒç»“æœä¸º<code>1æ¬¡</code>å®éªŒçš„ç»“æœ.</p><h3 id="ä¸åŒå®éªŒæ–¹æ³•ç»“æœå¯¹æ¯”"><a class="header-anchor" href="#ä¸åŒå®éªŒæ–¹æ³•ç»“æœå¯¹æ¯”">#</a>ä¸åŒå®éªŒæ–¹æ³•ç»“æœå¯¹æ¯”</h3><center>è¡¨1 å®éªŒç»“æœ</center><table><thead><tr><th style="text-align:left">å®éªŒæ–¹æ³•</th><th style="text-align:center">å‡†ç¡®ç‡</th><th style="text-align:center">ç¨‹åºè¿è¡Œæ—¶é—´</th></tr></thead><tbody><tr><td style="text-align:left">SVM</td><td style="text-align:center">93.333%</td><td style="text-align:center">27.485s</td></tr><tr><td style="text-align:left">SVM+HOG binary</td><td style="text-align:center">93.333%</td><td style="text-align:center"><font color=#ff0000>4.928s</font></td></tr><tr><td style="text-align:left">SVM+HOG</td><td style="text-align:center"><font color=#ff0000>100%</font></td><td style="text-align:center">11.556s</td></tr></tbody></table><p>å®éªŒç»“æœå¦‚è¡¨1æ‰€ç¤º, åœ¨å‡†ç¡®ç‡ä¸Š, <code>SVM+HOGå¤šåˆ†ç±»</code>çš„æ–¹æ³•åœ¨å‡†ç¡®ç‡ä¸Šåˆæ­¥è¾¾åˆ°äº†<code>100%</code>, ä½†ä»éœ€è¦åç»­çš„å¤šæ¬¡å®éªŒè¯æ˜; åœ¨ç¨‹åºè¿è¡Œæ—¶é—´ä¸Š, <code>SVM+HOGäºŒåˆ†ç±»</code>çš„æ–¹æ³•è€—æ—¶æœ€å°‘, ä¸ç¬¬ä¸€ç§æ–¹æ³•ç›¸å¯¹æ¯”, æå–çš„ç‰¹å¾å›¾è¾ƒåŸå›¾åƒç›¸æ¯”, æ›´å®¹æ˜“å¾—åˆ°ç‰¹å¾, æ›´å®¹æ˜“è®­ç»ƒ, ä¸ç¬¬ä¸‰ç§æ–¹æ³•ç›¸å¯¹æ¯”, äºŒåˆ†ç±»å™¨åªéœ€è¦åˆ¤æ–­<code>æ˜¯æˆ–ä¸æ˜¯</code>çš„é—®é¢˜, è¾ƒ<code>æ˜¯å“ªä¸ª</code>è¿™ä¸ªé—®é¢˜æ¥è¯´ç›¸å¯¹ç®€å•, æ•…æ¶ˆè€—æ—¶é—´æœ€å°‘.</p><h3 id="svm-hogå¤šåˆ†ç±»"><a class="header-anchor" href="#svm-hogå¤šåˆ†ç±»">#</a>SVM+HOGå¤šåˆ†ç±»</h3><p>ä¸€æ¬¡å®éªŒçš„ç»“æœå…·æœ‰éšæœºæ€§, æ•…å–<code>10æ¬¡</code>å®éªŒçš„<code>å¹³å‡å€¼</code>å¹¶æ”¹å˜è®­ç»ƒé›†ä¸æµ‹è¯•é›†çš„æ¯”ä¾‹, å¾—åˆ°çš„ç»“æœå¦‚è¡¨2æ‰€ç¤º.</p><center>è¡¨2 10æ¬¡éšæœºå®éªŒç»“æœå¹³å‡å€¼</center><table><thead><tr><th style="text-align:center">è®­ç»ƒé›†:æµ‹è¯•é›†</th><th style="text-align:center">å‡†ç¡®ç‡</th><th style="text-align:center">ç¨‹åºè¿è¡Œæ—¶é—´</th></tr></thead><tbody><tr><td style="text-align:center">10:1</td><td style="text-align:center">100.00%</td><td style="text-align:center">7.7176s</td></tr><tr><td style="text-align:center">9:2</td><td style="text-align:center">99.50%</td><td style="text-align:center">8.1220s</td></tr><tr><td style="text-align:center">8:3</td><td style="text-align:center">99.78%</td><td style="text-align:center">8.4686s</td></tr><tr><td style="text-align:center">7:4</td><td style="text-align:center">99.50%</td><td style="text-align:center">9.2287s</td></tr><tr><td style="text-align:center">6:5</td><td style="text-align:center">95.73%</td><td style="text-align:center">9.7408s</td></tr></tbody></table><h3 id="å®éªŒç»“æœåˆ†æ"><a class="header-anchor" href="#å®éªŒç»“æœåˆ†æ">#</a>å®éªŒç»“æœåˆ†æ</h3><p><code>SVMåˆ†ç±»</code>æ–¹æ³•è®­ç»ƒçš„åˆ†ç±»å™¨æœªèƒ½è¯†åˆ«çš„å›¾åƒéƒ½æ˜¯å•ä¾§å…‰ç…§ä¸‹çš„å›¾åƒ, æ•…åç»­æ”¹è¿›æ—¶å¢åŠ äº†å¯¹<code>å…‰ç…§ä¸æ•æ„Ÿ</code>çš„HOGç‰¹æ€§æ¥è¿›è¡Œè®­ç»ƒ; <code>HOG+SVMäºŒåˆ†ç±»</code>æ–¹æ³•å­˜åœ¨ç€<code>æ ·æœ¬ä¸å¯¹ç§°</code>çš„é—®é¢˜, ä¹Ÿæœªèƒ½è¾¾åˆ°ç†æƒ³çš„å®éªŒæ•ˆæœ; <code>SVM+HOGå¤šåˆ†ç±»å™¨</code>æ–¹æ³•åœ¨<code>å¯¹å…‰ç…§ä¸æ•æ„Ÿ</code>çš„åŒæ—¶, ä¹Ÿä¸å­˜åœ¨<code>æ ·æœ¬ä¸å¯¹ç§°</code>çš„é—®é¢˜, æœ€ç»ˆè¾¾åˆ°äº†é¢„æœŸçš„å®éªŒç»“æœ, å³<code>100%</code>çš„å‡†ç¡®ç‡.</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="http://www.arocmag.com/getarticle/?aid=8d1cc55eca76ad42" target="_blank" rel="noopener">äººè„¸è¯†åˆ«ç ”ç©¶ç»¼è¿°</a> <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li><li id="fn2" class="footnote-item"><p><a href="https://blog.csdn.net/liulina603/article/details/7925170" target="_blank" rel="noopener">äººè„¸è¯†åˆ«ä¸»è¦ç®—æ³•åŸç†</a> <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p></li><li id="fn3" class="footnote-item"><p><a href="https://www.zhihu.com/question/45833619" target="_blank" rel="noopener">Scale-Invariant Feature Taransform</a> <a href="#fnref3" class="footnote-backref">â†©ï¸</a></p></li><li id="fn4" class="footnote-item"><p><a href="https://www.zhihu.com/question/45833619" target="_blank" rel="noopener">Histogram of Oriented Gradient</a> <a href="#fnref4" class="footnote-backref">â†©ï¸</a></p></li><li id="fn5" class="footnote-item"><p><a href="https://www.zhihu.com/question/45833619" target="_blank" rel="noopener">Local Binary Pattern</a> <a href="#fnref5" class="footnote-backref">â†©ï¸</a></p></li><li id="fn6" class="footnote-item"><p><a href="https://blog.csdn.net/u013146742/article/details/52356560" target="_blank" rel="noopener">æœ€é‚»è¿‘åˆ†ç±»å™¨</a> <a href="#fnref6" class="footnote-backref">â†©ï¸</a></p></li><li id="fn7" class="footnote-item"><p><a href="https://blog.csdn.net/u013146742/article/details/52356560" target="_blank" rel="noopener">Linear Discriminant Analysis</a> <a href="#fnref7" class="footnote-backref">â†©ï¸</a></p></li><li id="fn8" class="footnote-item"><p><a href="https://blog.csdn.net/liulina603/article/details/78676723" target="_blank" rel="noopener">Logistic Regression</a> <a href="#fnref8" class="footnote-backref">â†©ï¸</a></p></li><li id="fn9" class="footnote-item"><p><a href="https://blog.csdn.net/liugan528/article/details/79448379" target="_blank" rel="noopener">Support Vector Machine</a> <a href="#fnref9" class="footnote-backref">â†©ï¸</a></p></li><li id="fn10" class="footnote-item"><p><a href="http://ww2.mathworks.cn/help/vision/ref/extracthogfeatures.html" target="_blank" rel="noopener">Extract histogram of oriented gradients (HOG) features</a> <a href="#fnref10" class="footnote-backref">â†©ï¸</a></p></li><li id="fn11" class="footnote-item"><p><a href="https://www.mathworks.com/help/stats/fitcecoc.html" target="_blank" rel="noopener">Fit multiclass models for support vector machines or other classifierscollapse</a> <a href="#fnref11" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> computer vision </tag>
            
            <tag> matlab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>bimé¢„è§ˆ</title>
      <link href="/blog/2018/10/04/bim-preview/"/>
      <url>/blog/2018/10/04/bim-preview/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a class="header-anchor" href="#å‰è¨€">#</a>å‰è¨€</h2><a id="more"></a><center><p><canvas id="viewer" width="640" height="360"></canvas></p></center><script src="//docs.xbim.net/XbimWebUI/scripts/xbim-viewer.debug.bundle.js"></script><script type="text/javascript">    var canvas = document.getElementById('viewer');    var viewer = new xViewer('viewer');    viewer.load('//onns.xyz/attachment/m6.wexbim');    viewer.start();</script>]]></content>
      
      
      <categories>
          
          <category> bim </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bim </tag>
            
            <tag> html </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexoæ’ä»¶æ•´ç†</title>
      <link href="/blog/2018/10/03/hexo-plugin-list/"/>
      <url>/blog/2018/10/03/hexo-plugin-list/</url>
      
        <content type="html"><![CDATA[<h2 id="ä»‹ç»"><a class="header-anchor" href="#ä»‹ç»">#</a>ä»‹ç»</h2><p>hexoæœ‰å¾ˆå¤šå¾ˆå¥½ç”¨çš„æ’ä»¶, å¯ä»¥ä¼˜åŒ–å†™åšå®¢çš„ä½“éªŒ, å°¤å…¶æ˜¯å¯¹äºä¸€äº›æ•°å­¦å…¬ç¤ºæˆ–å›¾è¡¨çš„æ¸²æŸ“.</p><a id="more"></a><h2 id="å…¬å¼"><a class="header-anchor" href="#å…¬å¼">#</a>å…¬å¼</h2><p>ç½‘ä¸Šçš„å…³äºæ•°å­¦å…¬å¼æ¸²æŸ“çš„è§£å†³æ–¹æ¡ˆåŸºæœ¬éƒ½æ˜¯æ¢äº†hexoçš„é»˜è®¤markdownè§£æå·¥å…·, æˆ‘ä¸æ˜¯å¾ˆæƒ³è¿™æ ·ä¿®æ”¹, è¿˜æ˜¯æƒ³é‡‡ç”¨æ’ä»¶çš„æ–¹æ³•.<br><a href="https://github.com/hexojs/hexo-math" target="_blank" rel="noopener">hexo-math</a>æ˜¯ä¸€ä¸ªæ¸²æŸ“æ•°å­¦å…¬å¼çš„æ’ä»¶, è™½ç„¶ä»githubä¸Šçš„è¯„è®ºæ¥çœ‹, åœ¨å¾ˆå¤šæƒ…å†µä¸‹éƒ½å­˜åœ¨ä¸èƒ½æ¸²æŸ“çš„é—®é¢˜, ä¸è¿‡æŒ‰ç…§ä¸‹é¢çš„é…ç½®, åº”è¯¥å¯ä»¥æˆåŠŸå®ç°æ•°å­¦å…¬å¼çš„æ¸²æŸ“, å…ˆçœ‹ä¸€ä¸‹æ•ˆæœ.</p><h3 id="æ•ˆæœ"><a class="header-anchor" href="#æ•ˆæœ">#</a>æ•ˆæœ</h3>$$\begin{aligned}\dot{x} & = \sigma(y-x) \\\dot{y} & = \rho x - y - xz \\\dot{z} & = -\beta z + xy\end{aligned}$$<h3 id="é…ç½®"><a class="header-anchor" href="#é…ç½®">#</a>é…ç½®</h3><p>é¦–å…ˆé€šè¿‡npmå®‰è£…<code>hexo-math</code>, ä¸çŸ¥é“ä¸ºä»€ä¹ˆè¦è¿ç»­æ‰§è¡Œä¸¤æ¬¡æ‰èƒ½æ‰§è¡ŒæˆåŠŸ.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-math --save</span><br><span class="line">npm install hexo-math --save</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹ç½‘ç«™æ ¹ç›®å½•çš„<code>_config.yml</code>, æ·»åŠ å¦‚ä¸‹å†…å®¹:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">math:</span><br><span class="line">  engine: &#39;mathjax&#39; # or &#39;katex&#39;</span><br><span class="line">  mathjax:</span><br><span class="line">    src: &quot;&#x2F;&#x2F;cdn.mathjax.org&#x2F;mathjax&#x2F;latest&#x2F;MathJax.js?config&#x3D;TeX-AMS-MML_HTMLorMML&quot;</span><br><span class="line">    config:</span><br><span class="line">      # MathJax config</span><br></pre></td></tr></table></figure><h3 id="ç”¨æ³•"><a class="header-anchor" href="#ç”¨æ³•">#</a>ç”¨æ³•</h3><p>ç”±äºæ­£å¸¸markdownçš„<code>$$...$$</code>ç­‰å†™æ³•ä¼šå’Œhexoçš„è§£ææ–¹æ³•äº§ç”Ÿå†²çª, æ”¹æˆå¦‚ä¸‹çš„å†™æ³•å³å¯:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;% raw %&#125;</span><br><span class="line">$$</span><br><span class="line">\begin&#123;array&#125;&#123;c|lcr&#125;</span><br><span class="line">n &amp; \text&#123;Left&#125; &amp; \text&#123;Center&#125; &amp; \text&#123;Right&#125; \\</span><br><span class="line">\hline</span><br><span class="line">1 &amp; 0.24 &amp; 1 &amp; 125 \\</span><br><span class="line">2 &amp; -1 &amp; 189 &amp; -8 \\</span><br><span class="line">3 &amp; -20 &amp; 2000 &amp; 1+10i</span><br><span class="line">\end&#123;array&#125;</span><br><span class="line">$$</span><br><span class="line">&#123;% endraw %&#125;</span><br></pre></td></tr></table></figure><p>æ˜¾ç¤ºç»“æœå¦‚ä¸‹:</p>$$\begin{array}{c|lcr}n & \text{Left} & \text{Center} & \text{Right} \\\hline1 & 0.24 & 1 & 125 \\2 & -1 & 189 & -8 \\3 & -20 & 2000 & 1+10i\end{array}$$]]></content>
      
      
      <categories>
          
          <category> html </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
            <tag> markdown </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linuxå¸¸ç”¨å‘½ä»¤æ•´ç†</title>
      <link href="/blog/2018/10/03/linux-command-list/"/>
      <url>/blog/2018/10/03/linux-command-list/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a class="header-anchor" href="#å‰è¨€">#</a>å‰è¨€</h2><a id="more"></a><h2 id="bash"><a class="header-anchor" href="#bash">#</a>bash</h2><ul><li>Centos7é˜²ç«å¢™å¼€å¯æˆ–å…³é—­æŸä¸ªç«¯å£:</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iptables -I INPUT -p tcp --dport &lt;port&gt; -j ACCEPT</span><br><span class="line">iptables -I INPUT -p tcp --dport &lt;port&gt; -j REJECT</span><br></pre></td></tr></table></figure><h2 id="git"><a class="header-anchor" href="#git">#</a>git</h2><ul><li>gitå›é€€åˆ°æŸä¸€ä¸ªç‰ˆæœ¬, å³åˆ é™¤commitè®°å½•:</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard &lt;commit_id&gt;</span><br><span class="line">git push -f -u origin &lt;branch&gt;</span><br></pre></td></tr></table></figure><ul><li>gitæ–°å»ºä¸€ä¸ªæ–°çš„ç©ºåˆ†æ”¯:</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git checkout --orphan &lt;branch&gt;</span><br><span class="line">git rm -rf .</span><br></pre></td></tr></table></figure><h2 id="python"><a class="header-anchor" href="#python">#</a>python</h2><ul><li>å»æ‰å­—ç¬¦ä¸²ä¸¤è¾¹çš„ç©ºæ ¼:</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">string.strip()</span><br></pre></td></tr></table></figure><ul><li>å¤§å°å†™è½¬æ¢:</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å°å†™å­—æ¯è½¬æ¢æˆå¤§å†™å­—æ¯</span></span><br><span class="line">string.upper()</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¤§å†™å­—æ¯è½¬æ¢æˆå°å†™å­—æ¯</span></span><br><span class="line">string.lower()</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼€å¤´å­—æ¯å¤§å†™</span></span><br><span class="line">string.capitalize()</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰€æœ‰é¦–å­—æ¯å¤§å†™</span></span><br><span class="line">string.title()</span><br></pre></td></tr></table></figure><h2 id="selenium"><a class="header-anchor" href="#selenium">#</a>selenium</h2>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> shell </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2018 Computational Intelligence Homework No.1</title>
      <link href="/blog/2018/09/29/2018-computational-intelligence-homework-no.1/"/>
      <url>/blog/2018/09/29/2018-computational-intelligence-homework-no.1/</url>
      
        <content type="html"><![CDATA[<h2 id="é—®é¢˜æè¿°"><a class="header-anchor" href="#é—®é¢˜æè¿°">#</a>é—®é¢˜æè¿°</h2><p>å°å­©åˆ†æ²¹é—®é¢˜ï¼šä¸¤ä¸ªå°å­©å»æ‰“æ²¹ï¼Œä¸€äººå¸¦äº†ä¸€ä¸ªä¸€æ–¤çš„ç©ºç“¶ï¼Œå¦ä¸€ä¸ªå¸¦äº†ä¸€ä¸ªä¸ƒä¸¤ã€ä¸€ä¸ªä¸‰ä¸¤çš„ç©ºç“¶ã€‚åŸè®¡åˆ’å„æ‰“ä¸€æ–¤æ²¹ï¼Œå¯æ˜¯ç”±äºæ‰€å¸¦çš„é’±ä¸å¤Ÿï¼Œåªå¥½ä¸¤äººåˆæ‰“äº†ä¸€æ–¤æ²¹ï¼Œåœ¨å›å®¶çš„è·¯ä¸Šï¼Œä¸¤äººæƒ³å¹³åˆ†è¿™ä¸€æ–¤æ²¹ï¼Œå¯æ˜¯åˆæ²¡æœ‰å…¶å®ƒå·¥å…·ã€‚è¯•ä»…ç”¨ä¸‰ä¸ªç“¶å­(ä¸€æ–¤ã€ä¸ƒä¸¤ã€ä¸‰ä¸¤)ç²¾ç¡®åœ°åˆ†å‡ºä¸¤ä¸ªåŠæ–¤æ²¹æ¥ã€‚</p><a id="more"></a><h2 id="ç®—æ³•è®¾è®¡"><a class="header-anchor" href="#ç®—æ³•è®¾è®¡">#</a>ç®—æ³•è®¾è®¡</h2><h3 id="é€‰æ‹©åˆé€‚çš„æ•°æ®ç»“æ„è¡¨ç¤ºé—®é¢˜çŠ¶æ€"><a class="header-anchor" href="#é€‰æ‹©åˆé€‚çš„æ•°æ®ç»“æ„è¡¨ç¤ºé—®é¢˜çŠ¶æ€">#</a>é€‰æ‹©åˆé€‚çš„æ•°æ®ç»“æ„è¡¨ç¤ºé—®é¢˜çŠ¶æ€</h3><p>ç”¨å‘é‡<code>(T, S, Q)</code>è¡¨ç¤ºçŠ¶æ€, <code>E</code>è¡¨ç¤º10æ–¤ç“¶ä¸­çš„æ²¹é‡, <code>S</code>è¡¨ç¤º7æ–¤ç“¶ä¸­çš„æ²¹é‡, <code>Q</code>è¡¨ç¤º3æ–¤ç“¶ä¸­çš„æ²¹é‡.</p><p>é—®é¢˜çš„èµ·å§‹çŠ¶æ€: <font color="#FF0000">(10, 0, 0)</font></p><p>é—®é¢˜çš„ç›®æ ‡çŠ¶æ€: <font color="#FF0000">(5, 5, 0)</font></p><h3 id="ç¡®å®šæ™ºèƒ½ç®—å­ï¼Œç”¨ä»¥å˜åŒ–çŠ¶æ€çš„è§„åˆ™"><a class="header-anchor" href="#ç¡®å®šæ™ºèƒ½ç®—å­ï¼Œç”¨ä»¥å˜åŒ–çŠ¶æ€çš„è§„åˆ™">#</a>ç¡®å®šæ™ºèƒ½ç®—å­ï¼Œç”¨ä»¥å˜åŒ–çŠ¶æ€çš„è§„åˆ™</h3><center id="rulelist">è§„åˆ™è¡¨</center><table><thead><tr><th style="text-align:left">è§„åˆ™å·</th><th style="text-align:left">è§„åˆ™</th><th style="text-align:left">è§£é‡Š</th></tr></thead><tbody><tr><td style="text-align:left">1</td><td style="text-align:left">(T, S, Q) and S&lt;7 and T+Sâ‰¥7 â†’ (T+S-7, 7, Q)</td><td style="text-align:left">ç”¨10æ–¤ç“¶æ²¹è£…æ»¡7æ–¤ç“¶</td></tr><tr><td style="text-align:left">2</td><td style="text-align:left">(T, S, Q) and Q&lt;3 and T+Qâ‰¥3 â†’ (T+Q-3, S, 3)</td><td style="text-align:left">ç”¨10æ–¤ç“¶æ²¹è£…æ»¡3æ–¤ç“¶</td></tr><tr><td style="text-align:left">3</td><td style="text-align:left">(T, S, Q) and T&lt;10 and T+Sâ‰¥10 â†’ (10, T+S-10, Q)</td><td style="text-align:left">ç”¨7æ–¤ç“¶æ²¹è£…æ»¡10æ–¤ç“¶</td></tr><tr><td style="text-align:left">4</td><td style="text-align:left">(T, S, Q) and Q&lt;3 and S+Qâ‰¥3 â†’ (T, S+Q-3, 3)</td><td style="text-align:left">ç”¨7æ–¤ç“¶æ²¹è£…æ»¡3æ–¤ç“¶</td></tr><tr><td style="text-align:left">5</td><td style="text-align:left">(T, S, Q) and T&lt;10 and T+Qâ‰¥10 â†’ (10, S, T+Q-10)</td><td style="text-align:left">ç”¨3æ–¤ç“¶æ²¹è£…æ»¡10æ–¤ç“¶</td></tr><tr><td style="text-align:left">6</td><td style="text-align:left">(T, S, Q) and S&lt;7 and S+Qâ‰¥7 â†’ (T, 7, S+Q-7)</td><td style="text-align:left">ç”¨3æ–¤ç“¶æ²¹è£…æ»¡7æ–¤ç“¶</td></tr><tr><td style="text-align:left">7</td><td style="text-align:left">(T, S, Q) and T&gt;0 and T+Sâ‰¤7 â†’ (0, T+S, Q)</td><td style="text-align:left">10æ–¤ç“¶æ²¹å…¨éƒ¨å€’å…¥7æ–¤ç“¶</td></tr><tr><td style="text-align:left">8</td><td style="text-align:left">(T, S, Q) and T&gt;0 and T+Qâ‰¤3 â†’ (0, S, T+Q)</td><td style="text-align:left">10æ–¤ç“¶æ²¹å…¨éƒ¨å€’å…¥3æ–¤ç“¶</td></tr><tr><td style="text-align:left">9</td><td style="text-align:left">(T, S, Q) and S&gt;0 and T+Sâ‰¤10 â†’ (T+S, 0, Q)</td><td style="text-align:left">7æ–¤ç“¶æ²¹å…¨éƒ¨å€’å…¥10æ–¤ç“¶</td></tr><tr><td style="text-align:left">10</td><td style="text-align:left">(T, S, Q) and S&gt;0 and S+Qâ‰¤3 â†’ (T, 0, S+Q)</td><td style="text-align:left">7æ–¤ç“¶æ²¹å…¨éƒ¨å€’å…¥3æ–¤ç“¶</td></tr><tr><td style="text-align:left">11</td><td style="text-align:left">(T, S, Q) and Q&gt;0 and T+Qâ‰¤10 â†’ (T+Q, S, 0)</td><td style="text-align:left">3æ–¤ç“¶æ²¹å…¨éƒ¨å€’å…¥10æ–¤ç“¶</td></tr><tr><td style="text-align:left">12</td><td style="text-align:left">(T, S, Q) and Q&gt;0 and S+Qâ‰¤7 â†’ (T, S+Q, 0)</td><td style="text-align:left">3æ–¤ç“¶æ²¹å…¨éƒ¨å€’å…¥7æ–¤ç“¶</td></tr></tbody></table><h3 id="ç¡®å®šæœç´¢æ–¹æ³•"><a class="header-anchor" href="#ç¡®å®šæœç´¢æ–¹æ³•">#</a>ç¡®å®šæœç´¢æ–¹æ³•</h3><p>æœ€åŸºæœ¬çš„æœç´¢æ–¹æ³•ä¸º<code>æ·±åº¦ä¼˜å…ˆæœç´¢</code>å’Œ<code>å¹¿åº¦ä¼˜å…ˆæœç´¢</code>, è€ƒè™‘åˆ°æœ¬é¢˜ç›®å­˜åœ¨ç€æ— é™æ·±åº¦çš„æƒ…å†µ, æ•…é€‰ç”¨<code>å¹¿åº¦ä¼˜å…ˆæœç´¢</code>æ–¹æ³•æ¥å®ç°.</p><h2 id="ç¨‹åºæµç¨‹"><a class="header-anchor" href="#ç¨‹åºæµç¨‹">#</a>ç¨‹åºæµç¨‹</h2><p>å¤§ä½“çš„ç¨‹åºæµç¨‹å¦‚å›¾1æ‰€ç¤º</p><center><div id="flowchart-0" class="flow-chart"></div>å›¾1 ç¨‹åºæµç¨‹å›¾</center><h2 id="æ ¸å¿ƒä¼ªä»£ç "><a class="header-anchor" href="#æ ¸å¿ƒä¼ªä»£ç ">#</a>æ ¸å¿ƒä¼ªä»£ç </h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="comment">//å–å‡ºå½“å‰é˜Ÿåˆ—çš„å¤´éƒ¨èŠ‚ç‚¹</span></span><br><span class="line">  currNode = list.shift();</span><br><span class="line"></span><br><span class="line">  <span class="comment">//é˜Ÿåˆ—ä¸ºç©º, æœç´¢å¤±è´¥</span></span><br><span class="line">  <span class="keyword">if</span>(currNode == <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//åˆ¤æ–­æ˜¯å¦ä¸ºç›®æ ‡çŠ¶æ€</span></span><br><span class="line">  <span class="keyword">if</span>(checkNode(currNode)) &#123;</span><br><span class="line">    printPath(currNode);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//å°†æ‰€æœ‰å¯èƒ½çš„ä¸‹ä¸€æ­¥çŠ¶æ€åŠ å…¥é˜Ÿåˆ—å°¾éƒ¨</span></span><br><span class="line">  pour(currNode);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä»£ç è¿è¡ŒåŠæµ‹è¯•"><a class="header-anchor" href="#ä»£ç è¿è¡ŒåŠæµ‹è¯•">#</a>ä»£ç è¿è¡ŒåŠæµ‹è¯•</h2><p>ä»£ç è¿è¡Œç»“æœå¦‚å›¾2æ‰€ç¤º, ç”±äºå¹¶æœªå¯¹çŠ¶æ€è¿›è¡Œä¼˜åŒ–, é¦–æ¬¡å‡ºç°çš„ç›®æ ‡çŠ¶æ€åœ¨<code>ç¬¬åå±‚</code>, æœ‰<code>190221 </code>ä¸ªé‡å¤çŠ¶æ€, ä¸¥é‡å½±å“äº†è¿ç®—é€Ÿåº¦.</p><center><p><img src="https://onns.xyz/blog/image/20180930-1.png" alt="ä»£ç è¿è¡Œç»“æœå›¾"></p><p>å›¾2 ä»£ç è¿è¡Œç»“æœå›¾</p></center><p>æ”¹è¿›æ–¹æ³•æ˜¯åœ¨å¯¹ç›®æ ‡çŠ¶æ€è¿›è¡Œæœç´¢çš„è¿‡ç¨‹ä¸­, å¯¹äºé‚£äº›åœ¨ä¹‹å‰å­˜åœ¨è¿‡çš„çŠ¶æ€è¿›è¡Œå‰”é™¤, åªä¿ç•™æ–°çŠ¶æ€, æ”¹è¿›åçš„ä»£ç è¿è¡Œç»“æœå¦‚å›¾3æ‰€ç¤º.</p><center><p><img src="https://onns.xyz/blog/image/20180930-2.png" alt="æ”¹è¿›åä»£ç è¿è¡Œç»“æœå›¾"></p><p>å›¾3 æ”¹è¿›åä»£ç è¿è¡Œç»“æœå›¾</p></center><h2 id="ç»“è®º"><a class="header-anchor" href="#ç»“è®º">#</a>ç»“è®º</h2><p>ä»<font color="#FF0000">(10, 0, 0)</font>åˆ°<font color="#FF0000">(5, 5, 0)</font>çš„åˆ†æ²¹æ–¹æ³•ä¸º:</p><ul><li>ç”¨10æ–¤ç“¶æ²¹è£…æ»¡7æ–¤ç“¶ (10, 0, 0) -&gt; (3, 7, 0)</li><li>ç”¨7æ–¤ç“¶æ²¹è£…æ»¡3æ–¤ç“¶ (3, 7, 0) -&gt; (3, 4, 3)</li><li>3æ–¤ç“¶æ²¹å…¨éƒ¨å€’å…¥10æ–¤ç“¶ (3, 4, 3) -&gt; (6, 4, 0)</li><li>ç”¨7æ–¤ç“¶æ²¹è£…æ»¡3æ–¤ç“¶ (6, 4, 0) -&gt; (6, 1, 3)</li><li>3æ–¤ç“¶æ²¹å…¨éƒ¨å€’å…¥10æ–¤ç“¶ (6, 1, 3) -&gt; (9, 1, 0)</li><li>7æ–¤ç“¶æ²¹å…¨éƒ¨å€’å…¥3æ–¤ç“¶ (9, 1, 0) -&gt; (9, 0, 1)</li><li>ç”¨10æ–¤ç“¶æ²¹è£…æ»¡7æ–¤ç“¶ (9, 0, 1) -&gt; (2, 7, 1)</li><li>ç”¨7æ–¤ç“¶æ²¹è£…æ»¡3æ–¤ç“¶ (2, 7, 1) -&gt; (2, 5, 3)</li><li>3æ–¤ç“¶æ²¹å…¨éƒ¨å€’å…¥10æ–¤ç“¶ (2, 5, 3) -&gt; (5, 5, 0)</li></ul><p>å¦‚å›¾4æ‰€ç¤ºçº¢è‰²ç®­å¤´å³ä¸ºåˆ†æ²¹æ–¹æ³•.</p><center><div id="graphviz-0"></div><p>å›¾4 åˆ†æ²¹æ–¹æ³•ç¤ºæ„å›¾</p></center><p><a href="#rulelist">æ³¨:ç®­å¤´ä¸Šæ–¹æ•°å­—å³ä¸ºè§„åˆ™å·</a></p><script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.3.0/raphael.min.js"></script><script src="//flowchart.js.org/flowchart-latest.js"></script><textarea id="flowchart-0-code" style="display: none">st=>start: ç¡®å®šåˆå§‹çŠ¶æ€(10, 0, 0), åŠ å…¥é˜Ÿåˆ—e1=>end: æœªæ‰¾åˆ°ç›®æ ‡çŠ¶æ€e2=>end: è¾¾åˆ°ç›®æ ‡çŠ¶æ€(5, 5, 0)op1=>operation: å–å‡ºé˜Ÿåˆ—å¤´éƒ¨ä¸­çš„ç¬¬ä¸€ä¸ªçŠ¶æ€cond1=>condition: æ­¤çŠ¶æ€æ˜¯å¦ä¸ºç©º?cond2=>condition: æ˜¯å¦ä¸ºç›®æ ‡çŠ¶æ€?op2=>operation: å°†æ‰€æœ‰å¯èƒ½ä¸‹ä¸€æ­¥çŠ¶æ€åŠ å…¥é˜Ÿåˆ—å°¾éƒ¨st->op1->cond1cond1(yes)->e1cond1(no)->cond2cond2(yes)->e2cond2(no)->op2op2->op1</textarea><textarea id="flowchart-0-options" style="display: none">{"scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12}</textarea><script>  var code = document.getElementById("flowchart-0-code").value;  var options = JSON.parse(decodeURIComponent(document.getElementById("flowchart-0-options").value));  var diagram = flowchart.parse(code);  diagram.drawSVG("flowchart-0", options);</script><script src="https://unpkg.com/viz.js@2.1.2/viz.js"></script><script src="https://unpkg.com/viz.js@2.1.2/full.render.js"></script><textarea id="graphviz-0-code" style="display: none">digraph G {  "(10,0,0)" -> "(3,7,0)"[color=red,label="1"]  "(10,0,0)" -> "(7,0,3)"[label="2"]  "(3,7,0)" -> "(0,7,3)"[label="2"]  "(3,7,0)" -> "(3,4,3)"[color=red,label="4"]  "(7,0,3)" -> "(7,3,0)"[label="12"]  "(3,4,3)" -> "(6,4,0)"[color=red,label="11"]  "(7,3,0)" -> "(4,3,3)"[label="2"]  "(6,4,0)" -> "(6,1,3)"[color=red,label="4"]  "(4,3,3)" -> "(4,6,0)"[label="12"]  "(6,1,3)" -> "(9,1,0)"[color=red,label="11"]  "(4,6,0)" -> "(1,6,3)"[label="2"]  "(9,1,0)" -> "(9,0,1)"[color=red,label="10"]  "(1,6,3)" -> "(1,7,2)"[label="6"]  "(9,0,1)" -> "(2,7,1)"[color=red,label="1"]  "(1,7,2)" -> "(8,0,2)"[label="9"]  "(2,7,1)" -> "(2,5,3)"[color=red,label="4"]  "(8,0,2)" -> "(8,2,0)"[label="12"]  "(2,5,3)" -> "(5,5,0)"[color=red,label="11"]  "(8,2,0)" -> "(5,2,3)"[label="2"]}</textarea><script>  var viz = new Viz();  var code = document.getElementById("graphviz-0-code").value;  viz.renderSVGElement(code)  .then(function(element) {    document.getElementById("graphviz-0").append(element)  });</script>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> computational intelligence </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysqlæ‹¼æ¥å­—ç¬¦ä¸²æœç´¢</title>
      <link href="/blog/2018/04/03/mysql-string-search/"/>
      <url>/blog/2018/04/03/mysql-string-search/</url>
      
        <content type="html"><![CDATA[<h2 id="é—®é¢˜æè¿°"><a class="header-anchor" href="#é—®é¢˜æè¿°">#</a>é—®é¢˜æè¿°</h2><p>åœ¨mysqlçš„è¡¨ä¸­æŸä¸€ä¸ªé”®å€¼æ˜¯ç”±<code>,</code>åˆ†éš”çš„å¤šä¸ª<code>id</code>ç»„æˆçš„å­—ç¬¦ä¸², ä¾‹å¦‚: <code>1,2,3,4,5,6,7,8</code>.<br>ç°åœ¨éœ€è¦æœç´¢æ‰€æœ‰æ‹¥æœ‰<code>id</code>ä¸º<code>3</code>çš„è¡Œ, ä¾‹å¦‚: <code>1,2,3,4</code>, <code>1,2,3</code>, <code>3,4,5,6</code>.</p><a id="more"></a><h3 id="æ–¹æ³•ä¸€"><a class="header-anchor" href="#æ–¹æ³•ä¸€">#</a>æ–¹æ³•ä¸€</h3><p>è¿™æ˜¯æˆ‘è‡ªå·±æƒ³åˆ°çš„æœ€ç¬¨çš„æ–¹æ³•, å°±æ˜¯å°†æ•°æ®éƒ½å–å‡ºä¹‹åå†æŸ¥æ‰¾, æ•ˆç‡è‚¯å®šå¾ˆä½.<br>ä¸æ¨è.</p><h3 id="æ–¹æ³•äºŒ"><a class="header-anchor" href="#æ–¹æ³•äºŒ">#</a>æ–¹æ³•äºŒ</h3><p>ç”¨æ¨¡ç³Šæœç´¢, ä½†æ˜¯å‡å¦‚åŒ¹é…<code>id</code>ä¸º<code>3</code>çš„å­—æ®µ, ä¹ŸåŒæ—¶ä¼šåŒ¹é…<code>id</code>ä¸º<code>31</code>æˆ–<code>13</code>çš„å­—æ®µ.<br>è§£å†³æ–¹æ¡ˆæ˜¯å°†å­—ç¬¦ä¸²å¤´å°¾æ·»åŠ <code>,</code>, è¿™æ ·åŒ¹é…<code>,3,</code>å³å¯.åªæ˜¯ä¸å¤Ÿä¼˜é›….<br>ä¸æ¨è.</p><h3 id="æ–¹æ³•ä¸‰"><a class="header-anchor" href="#æ–¹æ³•ä¸‰">#</a>æ–¹æ³•ä¸‰</h3><p>mysqlæä¾›äº†å†…ç½®çš„å‡½æ•°<code>FIND_IN_SET(str,strlist)</code>,<br>åªéœ€<code>find_in_set('3', user_id_list)</code>å³å¯.<br>æ¨è.</p><p>è°¢è°¢ç¾¤é‡Œçš„å¤§ç¥.</p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¹Œç­å›¾ä¸‹ä½¿ç”¨shadowsocksrå®¢æˆ·ç«¯</title>
      <link href="/blog/2018/04/02/ubuntu-client-setup/"/>
      <url>/blog/2018/04/02/ubuntu-client-setup/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a class="header-anchor" href="#å‰è¨€">#</a>å‰è¨€</h2><p>æ–°é…ç½®çš„ç”µè„‘éœ€è¦ä¸‹è½½Googleçš„æ’ä»¶å’ŒGoogleçš„æœç´¢åŠŸèƒ½, æ‰€ä»¥è¦é…ç½®ä»£ç†. è®°å½•ä¸€ä¸‹.</p><a id="more"></a><h3 id="å®‰è£…git"><a class="header-anchor" href="#å®‰è£…git">#</a>å®‰è£…git</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install git -y</span><br></pre></td></tr></table></figure><h3 id="è·å–shadowsocksr"><a class="header-anchor" href="#è·å–shadowsocksr">#</a>è·å–shadowsocksr</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> -b manyuser https://github.com/shadowsocksr-backup/shadowsocksr.git</span><br><span class="line"><span class="built_in">cd</span> shadowsocksr/shadowsocks</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºé…ç½®æ–‡ä»¶"><a class="header-anchor" href="#åˆ›å»ºé…ç½®æ–‡ä»¶">#</a>åˆ›å»ºé…ç½®æ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/shadowsocks.json</span><br></pre></td></tr></table></figure><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"server"</span>:<span class="string">"0.0.0.0"</span>,</span><br><span class="line">    <span class="attr">"server_ipv6"</span>: <span class="string">"::"</span>,</span><br><span class="line">    <span class="attr">"server_port"</span>:<span class="number">8000</span>,</span><br><span class="line">    <span class="attr">"local_address"</span>: <span class="string">"127.0.0.1"</span>,</span><br><span class="line">    <span class="attr">"local_port"</span>:<span class="number">1080</span>,</span><br><span class="line">    <span class="attr">"password"</span>:<span class="string">"password"</span>,</span><br><span class="line">    <span class="attr">"timeout"</span>:<span class="number">300</span>,</span><br><span class="line">    <span class="attr">"udp_timeout"</span>: <span class="number">60</span>,</span><br><span class="line">    <span class="attr">"method"</span>:<span class="string">"aes-256-cfb"</span>,</span><br><span class="line">    <span class="attr">"protocol"</span>: <span class="string">"auth_aes128_md5"</span>,</span><br><span class="line">    <span class="attr">"protocol_param"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="attr">"obfs"</span>:<span class="string">"http_simple"</span>,</span><br><span class="line">    <span class="attr">"obfs_param"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="attr">"fast_open"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"workers"</span>: <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è¿è¡Œ"><a class="header-anchor" href="#è¿è¡Œ">#</a>è¿è¡Œ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python local.py -c /etc/shadowsocks.json -d start</span><br></pre></td></tr></table></figure><h3 id="è¯´æ˜"><a class="header-anchor" href="#è¯´æ˜">#</a>è¯´æ˜</h3><p>æ­¤æ—¶ä»£ç†å·²ç»è¿è¡Œåœ¨äº†127.0.0.1:1080, å°†éœ€è¦ä»£ç†çš„ç½‘å€ä»£ç†åˆ°æ­¤ç«¯å£å³å¯.</p><h2 id="é™„å½•"><a class="header-anchor" href="#é™„å½•">#</a>é™„å½•</h2><h3 id="chromeæ’ä»¶æ¨è"><a class="header-anchor" href="#chromeæ’ä»¶æ¨è">#</a>Chromeæ’ä»¶æ¨è</h3><h4 id="switchyomega"><a class="header-anchor" href="#switchyomega">#</a><a href="https://chrome.google.com/webstore/detail/proxy-switchyomega/padekgcemlokbadohgkifijomclgjgif?hl=en" target="_blank" rel="noopener">SwitchyOmega</a></h4><p>chromeä¸­é€šè¿‡SwitchyOmegaå¯ä»¥å°†è®¿é—®çš„ç½‘å€ä»£ç†åˆ°å‰é¢çš„shadowsocksrå®¢æˆ·ç«¯è®¿é—®.<br>ä»£ç†è®¾ç½®:<br>åè®® <code>SOCKS5</code><br>æœåŠ¡å™¨ <code>127.0.0.1</code><br>ç«¯å£ <code>1080</code></p><p>ä¹Ÿå¯ä»¥æ ¹æ®åœ°å€é€‰æ‹©è‡ªåŠ¨åˆ‡æ¢ä»£ç†.<br>ä»£ç†è®¾ç½®:<br>è·¯ç”±åˆ—è¡¨æ ¼å¼ <code>AutoProxy</code><br>è·¯ç”±åˆ—è¡¨åœ°å€ <code>https://raw.githubusercontent.com/gfwlist/gfwlist/master/gfwlist.txt</code></p><p>åº”ç”¨å³å¯.</p><h4 id="google-input-tools"><a class="header-anchor" href="#google-input-tools">#</a><a href="https://chrome.google.com/webstore/detail/google-input-tools/mclkkofklkfljcocdinagocijmpgbhab?hl=en" target="_blank" rel="noopener">Google Input Tools</a></h4><p>chromeä¸­å¯ä»¥ä½¿ç”¨çš„è¾“å…¥æ³•, æ”¯æŒå¤šç§è¯­è¨€å’Œä¸ªäººè¯åº“.</p><h2 id="å‚è€ƒé“¾æ¥"><a class="header-anchor" href="#å‚è€ƒé“¾æ¥">#</a>å‚è€ƒé“¾æ¥</h2><ul><li><a href="https://github.com/shadowsocksr-backup/shadowsocks-rss/wiki" target="_blank" rel="noopener">Python client setup (Mult language)</a></li><li><a href="https://www.switchyomega.com/settings.html" target="_blank" rel="noopener">é…ç½® - SwitchyOmega - è½»æ¾å¿«æ·åœ°ç®¡ç†å’Œåˆ‡æ¢å¤šä¸ªä»£ç†è®¾ç½®</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ubuntu </tag>
            
            <tag> shadowsocksr </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœåŠ¡å™¨æ–‡æ¡£</title>
      <link href="/blog/2018/01/30/server-document/"/>
      <url>/blog/2018/01/30/server-document/</url>
      
        <content type="html"><![CDATA[<h2 id="ç¯å¢ƒä¾èµ–"><a class="header-anchor" href="#ç¯å¢ƒä¾èµ–">#</a>ç¯å¢ƒä¾èµ–</h2><ul><li>Centos/7.x.x</li><li>nginx/1.12.2</li><li>PHP/7.1.xã€php-fpm/7.1.x</li><li>mysql/5.7.x</li><li>unoconv/0.8.x</li></ul><a id="more"></a><h2 id="ç³»ç»Ÿå¯åŠ¨æµç¨‹"><a class="header-anchor" href="#ç³»ç»Ÿå¯åŠ¨æµç¨‹">#</a>ç³»ç»Ÿå¯åŠ¨æµç¨‹</h2><ol><li>æ‰“å¼€nginxæœåŠ¡å™¨ <code>nginx</code></li><li>å¼€å¯phpæœåŠ¡ <code>service php-fpm start</code></li><li>å¼€å¯mysqlæœåŠ¡ <code>service mysqld start</code></li><li>å…³é—­selinuxé˜²ç«å¢™ <code>setenforce 0</code></li><li>å¼€å¯iptableså¯¹ç›¸åº”ç«¯å£çš„å±è”½ <code>iptables -I INPUT -p tcp --dport </code><font color=#ff0000><code>10080</code></font><code> -j ACCEPT</code></li><li>å¼€å¯unoconvç›‘å¬å™¨å¹¶åå°è¿è¡Œ <code>nohup unoconv --listener &amp;</code></li></ol><h2 id="ç›¸å…³é…ç½®æ–‡ä»¶"><a class="header-anchor" href="#ç›¸å…³é…ç½®æ–‡ä»¶">#</a>ç›¸å…³é…ç½®æ–‡ä»¶</h2><ol><li>nginxé…ç½®æ–‡ä»¶ç›®å½• <code>/etc/nginx/nginx.conf</code></li><li>phpé…ç½®æ–‡ä»¶ç›®å½• <code>/etc/php.ini</code></li><li>ç³»ç»Ÿæ–‡ä»¶ç›®å½• <code>/usr/share/nginx/longjing/</code></li><li>ä¸Šä¼ æ–‡ä»¶ç›®å½• <code>/usr/share/nginx/longjing/upload/</code></li><li>å¯¼å‡ºè¡¨æ–‡ä»¶ç›®å½• <code>/usr/share/nginx/longjing/application/index/file/</code></li></ol>]]></content>
      
      
      <categories>
          
          <category> work </category>
          
      </categories>
      
      
        <tags>
            
            <tag> longking </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2018 movie list</title>
      <link href="/blog/2018/01/01/2018-movie-list/"/>
      <url>/blog/2018/01/01/2018-movie-list/</url>
      
        <content type="html"><![CDATA[<h3 id="å†™åœ¨å‰é¢"><a class="header-anchor" href="#å†™åœ¨å‰é¢">#</a>å†™åœ¨å‰é¢</h3><a id="more"></a><h3 id="ä¸€æœˆ"><a class="header-anchor" href="#ä¸€æœˆ">#</a>ä¸€æœˆ</h3><ul><li>2017-01-03 <a href="https://movie.douban.com/subject/26580232/" target="_blank" rel="noopener">ã€Šçœ‹ä¸è§çš„å®¢äººã€‹</a></li><li>2017-01-11 <a href="https://movie.douban.com/subject/22266126/" target="_blank" rel="noopener">ã€Šç‹ç‰Œä¿é•–ã€‹</a></li><li>2017-01-12 <a href="https://movie.douban.com/subject/1578714/" target="_blank" rel="noopener">ã€Šç¥å¥‡å¥³ä¾ ã€‹</a></li><li>2017-01-15 <a href="https://movie.douban.com/subject/10512661/" target="_blank" rel="noopener">ã€Šé“¶ç¿¼æ€æ‰‹2049ã€‹</a></li><li>2017-01-17 <a href="https://movie.douban.com/subject/1292720/" target="_blank" rel="noopener">ã€Šé˜¿ç”˜æ­£ä¼ ã€‹</a></li><li>2017-01-30 <a href="https://movie.douban.com/subject/3205624/" target="_blank" rel="noopener">ã€Šç¤¾äº¤ç½‘ç»œã€‹</a></li></ul><h3 id="äºŒæœˆ"><a class="header-anchor" href="#äºŒæœˆ">#</a>äºŒæœˆ</h3><ul><li>2017-02-02 <a href="https://movie.douban.com/subject/1851857/" target="_blank" rel="noopener">ã€Šè™è ä¾ ï¼šé»‘æš—éª‘å£«ã€‹</a></li><li>2017-02-20 <a href="https://movie.douban.com/subject/26861685/" target="_blank" rel="noopener">ã€Šçº¢æµ·è¡ŒåŠ¨ã€‹</a></li><li>2017-02-21 <a href="https://movie.douban.com/subject/3442220/" target="_blank" rel="noopener">ã€Šæµ·è±šæ¹¾ã€‹</a></li><li>2017-02-22 <a href="https://movie.douban.com/subject/1309046/" target="_blank" rel="noopener">ã€ŠVå­—ä»‡æ€é˜Ÿã€‹</a></li><li>2017-02-24 <a href="https://movie.douban.com/subject/26698897/" target="_blank" rel="noopener">ã€Šå”äººè¡—æ¢æ¡ˆ2ã€‹</a></li><li>2017-02-26 <a href="https://movie.douban.com/subject/26311973/" target="_blank" rel="noopener">ã€Šå”äººè¡—æ¢æ¡ˆã€‹</a></li><li>2017-02-27 <a href="https://movie.douban.com/subject/26942674/" target="_blank" rel="noopener">ã€Šç¥ç§˜å·¨æ˜Ÿã€‹</a></li></ul><h3 id="ä¸‰æœˆ"><a class="header-anchor" href="#ä¸‰æœˆ">#</a>ä¸‰æœˆ</h3><ul><li>2017-03-01 <a href="https://movie.douban.com/subject/2158490/" target="_blank" rel="noopener">ã€Šæ­£ä¹‰è”ç›Ÿã€‹</a></li><li>2017-03-06 <a href="https://movie.douban.com/subject/26662193/" target="_blank" rel="noopener">ã€Šå‰ä»»3ï¼šå†è§å‰ä»»ã€‹</a></li><li>2017-03-09 <a href="https://movie.douban.com/subject/6390825/" target="_blank" rel="noopener">ã€Šé»‘è±¹ã€‹</a></li><li>2017-03-09 <a href="https://movie.douban.com/subject/26611804/" target="_blank" rel="noopener">ã€Šä¸‰å—å¹¿å‘Šç‰Œã€‹</a></li><li>2017-03-12 <a href="https://movie.douban.com/subject/21324900/" target="_blank" rel="noopener">ã€Šé™ä¸´ã€‹</a></li><li>2017-03-13 <a href="https://movie.douban.com/subject/1900841/" target="_blank" rel="noopener">ã€Šçªƒå¬é£æš´ã€‹</a></li><li>2017-03-16 <a href="https://movie.douban.com/subject/26752852/" target="_blank" rel="noopener">ã€Šæ°´å½¢ç‰©è¯­ã€‹</a></li><li>2017-03-18 <a href="https://movie.douban.com/subject/1760622/" target="_blank" rel="noopener">ã€Šé¦™æ°´ã€‹</a></li><li>2017-03-20 <a href="https://movie.douban.com/subject/1472510/" target="_blank" rel="noopener">ã€Šä¸å¥³äººä»¬çš„å¯¹è¯ã€‹</a><blockquote><p>å¦‚æœé‚£ä¸ªå¿ƒè„ç—…åŒ»ç”Ÿ, è§‰å¾—ä½ åˆè€åˆè¡°, è€Œä¸”å¾ˆä¸‘ä¸€ç‚¹éƒ½ä¸å¯çˆ±äº†, æˆ‘æ„¿æ„é™ªä½ èµ°å®Œæœ€åçš„äººç”Ÿ.</p></blockquote></li><li>2017-03-21 <a href="https://movie.douban.com/subject/1296821/" target="_blank" rel="noopener">ã€Šæ€»æœ‰éª„é˜³ã€‹</a></li><li>2017-03-23 <a href="https://movie.douban.com/subject/27042405/" target="_blank" rel="noopener">ã€Šå¤§åç‹ç‹¸çš„æ•…äº‹ã€‹</a></li><li>2017-03-26 <a href="https://movie.douban.com/subject/26764928/" target="_blank" rel="noopener">ã€Šè„¸åºï¼Œæ‘åº„ã€‹</a></li><li>2017-03-27 <a href="https://movie.douban.com/subject/3530403/" target="_blank" rel="noopener">ã€Šäº‘å›¾ã€‹</a></li><li>2017-03-29 <a href="https://movie.douban.com/subject/4920389/" target="_blank" rel="noopener">ã€Šå¤´å·ç©å®¶ã€‹</a></li></ul><h3 id="å››æœˆ"><a class="header-anchor" href="#å››æœˆ">#</a>å››æœˆ</h3><ul><li>2017-04-04 <a href="https://movie.douban.com/subject/3364223/" target="_blank" rel="noopener">ã€Šäº†ä¸èµ·çš„ç›–èŒ¨æ¯”ã€‹</a></li><li>2017-04-06 <a href="https://movie.douban.com/subject/26353372/" target="_blank" rel="noopener">ã€Šå¤œè¡ŒåŠ¨ç‰©ã€‹</a></li><li>2017-04-14 <a href="https://movie.douban.com/subject/26393561/" target="_blank" rel="noopener">ã€Šå°èè‰çš„çŒ´ç¥å¤§å”ã€‹</a></li></ul><h3 id="äº”æœˆ"><a class="header-anchor" href="#äº”æœˆ">#</a>äº”æœˆ</h3><ul><li>2017-05-31 <a href="https://movie.douban.com/subject/6874741/" target="_blank" rel="noopener">ã€Šæ— é—®è¥¿ä¸œã€‹</a></li></ul><h3 id="å…­æœˆ"><a class="header-anchor" href="#å…­æœˆ">#</a>å…­æœˆ</h3><ul><li>2017-06-01 <a href="https://movie.douban.com/subject/27069070/" target="_blank" rel="noopener">ã€Šå“†å•¦Aæ¢¦ï¼šå¤§é›„çš„é‡‘é“¶å²›ã€‹</a></li><li>2017-06-29 <a href="https://movie.douban.com/subject/26925317/" target="_blank" rel="noopener">ã€ŠåŠ¨ç‰©ä¸–ç•Œã€‹</a></li></ul><h3 id="ä¸ƒæœˆ"><a class="header-anchor" href="#ä¸ƒæœˆ">#</a>ä¸ƒæœˆ</h3><ul><li>2017-07-13 <a href="https://movie.douban.com/subject/1292780/" target="_blank" rel="noopener">ã€Šæ—¶å…‰å€’æµä¸ƒåå¹´ã€‹</a></li><li>2017-07-17 <a href="https://movie.douban.com/subject/3742360/" target="_blank" rel="noopener">ã€Šè®©å­å¼¹é£ã€‹</a></li><li>2017-07-21 <a href="https://movie.douban.com/subject/1292656/" target="_blank" rel="noopener">ã€Šå¿ƒçµæ•æ‰‹ã€‹</a></li></ul><h3 id="å…«æœˆ"><a class="header-anchor" href="#å…«æœˆ">#</a>å…«æœˆ</h3><ul><li>2017-08-09 <a href="https://movie.douban.com/subject/1291841/" target="_blank" rel="noopener">ã€Šæ•™çˆ¶ã€‹</a></li><li>2017-08-10 <a href="https://movie.douban.com/subject/1299131/" target="_blank" rel="noopener">ã€Šæ•™çˆ¶2ã€‹</a></li><li>2017-08-13 <a href="https://movie.douban.com/subject/1291571/" target="_blank" rel="noopener">ã€ŠæŒ‡ç¯ç‹1ï¼šé­”æˆ’å†ç°ã€‹</a></li><li>2017-08-18 <a href="https://movie.douban.com/subject/1291572/" target="_blank" rel="noopener">ã€ŠæŒ‡ç¯ç‹2ï¼šåŒå¡”å¥‡å…µã€‹</a></li><li>2017-08-19 <a href="https://movie.douban.com/subject/1291552/" target="_blank" rel="noopener">ã€ŠæŒ‡ç¯ç‹3ï¼šç‹è€…æ— æ•Œã€‹</a></li><li>2017-08-21 <a href="https://movie.douban.com/subject/1291999/" target="_blank" rel="noopener">ã€Šé‡åº†æ£®æ—ã€‹</a></li><li>2017-08-23 <a href="https://movie.douban.com/subject/1295124/" target="_blank" rel="noopener">ã€Šè¾›å¾·å‹’çš„åå•ã€‹</a></li><li>2017-08-24 <a href="https://movie.douban.com/subject/1291549/" target="_blank" rel="noopener">ã€Šæ”¾ç‰›ç­çš„æ˜¥å¤©ã€‹</a></li><li>2017-08-27 <a href="https://movie.douban.com/subject/1292063/" target="_blank" rel="noopener">ã€Šç¾ä¸½äººç”Ÿã€‹</a></li><li>2017-08-28 <a href="https://movie.douban.com/subject/1889243/" target="_blank" rel="noopener">ã€Šæ˜Ÿé™…ç©¿è¶Šã€‹</a></li><li>2017-08-29 <a href="https://movie.douban.com/subject/1293182/" target="_blank" rel="noopener">ã€ŠåäºŒæ€’æ±‰ã€‹</a></li><li>2017-08-31 <a href="https://movie.douban.com/subject/25839662/" target="_blank" rel="noopener">ã€Š45å‘¨å¹´ã€‹</a></li></ul><h3 id="ä¹æœˆ"><a class="header-anchor" href="#ä¹æœˆ">#</a>ä¹æœˆ</h3><ul><li>2017-09-01 <a href="https://movie.douban.com/subject/26336252/" target="_blank" rel="noopener">ã€Šç¢Ÿä¸­è°6ï¼šå…¨é¢ç“¦è§£ã€‹</a></li><li>2017-09-04 <a href="https://movie.douban.com/subject/10727641/" target="_blank" rel="noopener">ã€Šç¢Ÿä¸­è°5ï¼šç¥ç§˜å›½åº¦ã€‹</a></li><li>2017-09-04 <a href="https://movie.douban.com/subject/3068206/" target="_blank" rel="noopener">ã€Šç¢Ÿä¸­è°4ã€‹</a></li><li>2017-09-04 <a href="https://movie.douban.com/subject/26416603/" target="_blank" rel="noopener">ã€Šè¨åˆ©æœºé•¿ã€‹</a></li><li>2017-09-06 <a href="https://movie.douban.com/subject/25814705/" target="_blank" rel="noopener">ã€Šå°æ£®æ— å¤ç§‹ç¯‡ã€‹</a></li><li>2017-09-06 <a href="https://movie.douban.com/subject/25814707/" target="_blank" rel="noopener">ã€Šå°æ£®æ— å†¬æ˜¥ç¯‡ã€‹</a></li><li>2017-09-07 <a href="https://movie.douban.com/subject/26874505/" target="_blank" rel="noopener">ã€Šäººç”Ÿæœå®ã€‹</a></li><li>2017-09-12 <a href="https://movie.douban.com/subject/1937401/" target="_blank" rel="noopener">ã€ŠKæ­Œæƒ…äººã€‹</a></li><li>2017-09-21 <a href="https://movie.douban.com/subject/27605698/" target="_blank" rel="noopener">ã€Šè¥¿è™¹å¸‚é¦–å¯Œã€‹</a></li><li>2017-09-22 <a href="https://movie.douban.com/subject/26806099/" target="_blank" rel="noopener">ã€Šçˆ±çŒ«ä¹‹åŸã€‹</a></li><li>2017-09-24 <a href="https://movie.douban.com/subject/1294639/" target="_blank" rel="noopener">ã€Šå‹‡æ•¢çš„å¿ƒã€‹</a></li><li>2017-09-28 <a href="https://movie.douban.com/subject/27133303/" target="_blank" rel="noopener">ã€Šè¶…æ—¶ç©ºåŒå±…ã€‹</a></li></ul><h3 id="åæœˆ"><a class="header-anchor" href="#åæœˆ">#</a>åæœˆ</h3><h3 id="å¾…çœ‹"><a class="header-anchor" href="#å¾…çœ‹">#</a>å¾…çœ‹</h3><ul><li>ã€Šç»¿é‡Œå¥‡è¿¹ã€‹</li><li>ã€Šäº†ä¸èµ·çš„ç›–èŒ¨æ¯”ã€‹</li><li><a href="https://movie.douban.com/subject/1305725/" target="_blank" rel="noopener">ã€Šå¤§å«Â·æˆˆå°”çš„ä¸€ç”Ÿã€‹</a></li><li><a href="https://movie.douban.com/subject/2369845/" target="_blank" rel="noopener">ã€Šå«Œç–‘äººXçš„çŒ®èº«ã€‹</a></li><li>ã€Šç‹ç‰Œç‰¹å·¥2: é»„é‡‘åœˆã€‹</li><li>ã€ŠåˆºçŒ¬çš„ä¼˜é›…ã€‹</li><li><a href="https://movie.douban.com/subject/26356789/" target="_blank" rel="noopener">ã€Šå¿ƒæˆ¿å®¢ã€‹</a></li><li><a href="https://movie.douban.com/subject/20514947/" target="_blank" rel="noopener">ã€Šé¾™è™¾ã€‹</a></li><li><a href="https://movie.douban.com/subject/2053515/" target="_blank" rel="noopener">ã€Šæ›¾ç»ã€‹</a><blockquote><p>I paid the cost too late, Now youâ€™re gone.</p></blockquote></li></ul>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
      </categories>
      
      
        <tags>
            
            <tag> movie </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2017 movie list</title>
      <link href="/blog/2017/10/30/2017-movie-list/"/>
      <url>/blog/2017/10/30/2017-movie-list/</url>
      
        <content type="html"><![CDATA[<h3 id="å†™åœ¨å‰é¢"><a class="header-anchor" href="#å†™åœ¨å‰é¢">#</a>å†™åœ¨å‰é¢</h3><p>å¥½çœ‹çš„ç”µå½±å¥½å¤š, æˆªå›¾æ”¾åˆ°æ‰‹æœºé‡Œæ€•ä¸¢, å†™ä¸‹æ¥.<br>å®šæœŸæ›´æ–°.</p><a id="more"></a><h3 id="ä¸€æœˆ"><a class="header-anchor" href="#ä¸€æœˆ">#</a>ä¸€æœˆ</h3><ul><li>2017-01-01 <a href="https://movie.douban.com/subject/25894431/" target="_blank" rel="noopener">ã€Šæ˜Ÿçƒå¤§æˆ˜å¤–ä¼ : ä¾ ç›—ä¸€å·ã€‹</a></li><li>2017-01-07 <a href="https://movie.douban.com/subject/1309196/" target="_blank" rel="noopener">ã€Šå©šç¤¼å‚²å®¢ã€‹</a></li><li>2017-01-08 <a href="https://movie.douban.com/subject/25815034/" target="_blank" rel="noopener">ã€Šæ¹„å…¬æ²³è¡ŒåŠ¨ã€‹</a></li></ul><h3 id="äºŒæœˆ"><a class="header-anchor" href="#äºŒæœˆ">#</a>äºŒæœˆ</h3><ul><li>2017-02-02 <a href="https://movie.douban.com/subject/26182910/" target="_blank" rel="noopener">ã€ŠåŠŸå¤«ç‘œä¼½ã€‹</a></li><li>2017-02-06 <a href="https://movie.douban.com/subject/26862259/" target="_blank" rel="noopener">ã€Šä¹˜é£ç ´æµªã€‹</a></li><li>2017-02-09 <a href="https://movie.douban.com/subject/1309163/" target="_blank" rel="noopener">ã€Šæ‹æ‹ç¬”è®°æœ¬ã€‹</a></li><li>2017-02-15 <a href="https://movie.douban.com/subject/25934014/" target="_blank" rel="noopener">ã€Šçˆ±ä¹ä¹‹åŸã€‹</a></li></ul><h3 id="ä¸‰æœˆ"><a class="header-anchor" href="#ä¸‰æœˆ">#</a>ä¸‰æœˆ</h3><ul><li>2017-03-09 <a href="https://movie.douban.com/subject/26235839/" target="_blank" rel="noopener">ã€Šå†…åœ¨ç¾ã€‹</a></li><li>2017-03-10 <a href="https://movie.douban.com/subject/25980443/" target="_blank" rel="noopener">ã€Šæµ·è¾¹çš„æ›¼å½»æ–¯ç‰¹ã€‹</a></li><li>2017-03-11 <a href="https://movie.douban.com/subject/2974278/" target="_blank" rel="noopener">ã€Šè“è‰²æƒ…äººèŠ‚ã€‹</a></li><li>2017-03-16 <a href="https://movie.douban.com/subject/5360889/" target="_blank" rel="noopener">ã€Šæœˆå‡ç‹å›½ã€‹</a></li><li>2017-03-22 <a href="https://movie.douban.com/subject/1300992/" target="_blank" rel="noopener">ã€Šå®Œç¾çš„ä¸–ç•Œã€‹</a></li><li>2017-03-28 <a href="https://movie.douban.com/subject/1340517/" target="_blank" rel="noopener">ã€Šåˆå»ã€‹</a></li><li>2017-03-29 <a href="https://movie.douban.com/subject/3550132/" target="_blank" rel="noopener">ã€Šéå¸¸ä¸»æ’­ã€‹</a></li></ul><h3 id="å››æœˆ"><a class="header-anchor" href="#å››æœˆ">#</a>å››æœˆ</h3><ul><li>2017-04-12 <a href="https://movie.douban.com/subject/26599076/" target="_blank" rel="noopener">ã€Šå››æœˆæ˜¯ä½ çš„è°è¨€ã€‹</a></li><li>2017-04-14 <a href="https://movie.douban.com/subject/26260853/" target="_blank" rel="noopener">ã€Šé€Ÿåº¦ä¸æ¿€æƒ…8ã€‹</a></li><li>2017-04-23 <a href="https://movie.douban.com/subject/10777687/" target="_blank" rel="noopener">ã€Š7å·æˆ¿çš„ç¤¼ç‰©ã€‹</a></li></ul><h3 id="äº”æœˆ"><a class="header-anchor" href="#äº”æœˆ">#</a>äº”æœˆ</h3><ul><li>2017-05-11 <a href="https://movie.douban.com/subject/1301912/" target="_blank" rel="noopener">ã€Šç§‹å¤©çš„ç«¥è¯ã€‹</a></li><li>2017-05-18 <a href="https://movie.douban.com/subject/10577869/" target="_blank" rel="noopener">ã€Šæ—¶ç©ºæ‹æ—…äººã€‹</a></li><li>2017-05-26 <a href="https://movie.douban.com/subject/6311303/" target="_blank" rel="noopener">ã€ŠåŠ å‹’æ¯”æµ·ç›—5: æ­»æ— å¯¹è¯ã€‹</a></li><li>2017-05-28 <a href="https://movie.douban.com/subject/26593587/" target="_blank" rel="noopener">ã€Šå¤©æ‰å°‘å¥³ã€‹</a></li><li>2017-05-31 <a href="https://movie.douban.com/subject/26586432/" target="_blank" rel="noopener">ã€Šå¥‘å…‹ã€‹</a></li></ul><h3 id="å…­æœˆ"><a class="header-anchor" href="#å…­æœˆ">#</a>å…­æœˆ</h3><ul><li>2017-06-13 <a href="https://movie.douban.com/subject/1309172/" target="_blank" rel="noopener">ã€Šåˆæ‹50æ¬¡ã€‹</a></li><li>2017-06-15 <a href="https://movie.douban.com/subject/3025447/" target="_blank" rel="noopener">ã€Šé‡‘è‰è„±å£³ã€‹</a></li></ul><h3 id="ä¸ƒæœˆ"><a class="header-anchor" href="#ä¸ƒæœˆ">#</a>ä¸ƒæœˆ</h3><ul><li>2017-07-02 <a href="https://movie.douban.com/subject/23761370/" target="_blank" rel="noopener">ã€Šé€Ÿåº¦ä¸æ¿€æƒ…7ã€‹</a></li><li>2017-07-16 <a href="https://movie.douban.com/subject/6845529/" target="_blank" rel="noopener">ã€Šæœ‰å¸Œæœ›çš„ç”·äººã€‹</a></li><li>2017-07-17 <a href="https://movie.douban.com/subject/25812712/" target="_blank" rel="noopener">ã€Šç¥å·å¥¶çˆ¸3ã€‹</a></li><li>2017-07-19 <a href="https://movie.douban.com/subject/26811587/" target="_blank" rel="noopener">ã€Šå¤§æŠ¤æ³•ã€‹</a></li><li>2017-07-24 <a href="https://movie.douban.com/subject/26266085/" target="_blank" rel="noopener">ã€Šä¸‰ä¸ªè€æªæ‰‹ã€‹</a></li><li>2017-07-29 <a href="https://movie.douban.com/subject/24529353/" target="_blank" rel="noopener">ã€Šç»åœ°é€ƒäº¡ã€‹</a></li><li>2017-07-30 <a href="https://movie.douban.com/subject/26816383/" target="_blank" rel="noopener">ã€Šå–œæ¬¢ä½ ã€‹</a></li></ul><h3 id="å…«æœˆ"><a class="header-anchor" href="#å…«æœˆ">#</a>å…«æœˆ</h3><ul><li>2017-08-12 <a href="https://movie.douban.com/subject/3011091/" target="_blank" rel="noopener">ã€Šå¿ çŠ¬å…«å…¬çš„æ•…äº‹ã€‹</a></li></ul><h3 id="ä¹æœˆ"><a class="header-anchor" href="#ä¹æœˆ">#</a>ä¹æœˆ</h3><ul><li>2017-09-06 <a href="https://movie.douban.com/subject/26607693/" target="_blank" rel="noopener">ã€Šæ•¦åˆ»å°”å…‹ã€‹</a></li><li>2017-09-09 <a href="https://movie.douban.com/subject/26366465/" target="_blank" rel="noopener">ã€Šæˆ‘çš„å°‘å¥³æ—¶ä»£ã€‹</a></li></ul><h3 id="åæœˆ"><a class="header-anchor" href="#åæœˆ">#</a>åæœˆ</h3><ul><li>2017-10-15 <a href="https://movie.douban.com/subject/27024903/" target="_blank" rel="noopener">ã€Šå¤©æ‰æªæ‰‹ã€‹</a></li><li>2017-10-22 <a href="https://movie.douban.com/subject/1298624/" target="_blank" rel="noopener">ã€Šé—»é¦™è¯†å¥³äººã€‹</a></li><li>2017-10-29 <a href="https://movie.douban.com/subject/26382962/" target="_blank" rel="noopener">ã€Šç¾å¥½çš„æ„å¤–ã€‹</a></li></ul><h3 id="åä¸€æœˆ"><a class="header-anchor" href="#åä¸€æœˆ">#</a>åä¸€æœˆ</h3><ul><li>2017-11-16 <a href="https://movie.douban.com/subject/3443074/" target="_blank" rel="noopener">ã€Šå¯‚å¯èŠ³å¿ƒã€‹</a></li><li>2017-11-23 <a href="https://movie.douban.com/subject/1308820/" target="_blank" rel="noopener">ã€ŠèŠ±ä¸çˆ±ä¸½ä¸ã€‹</a></li></ul><h3 id="åäºŒæœˆ"><a class="header-anchor" href="#åäºŒæœˆ">#</a>åäºŒæœˆ</h3><ul><li>2017-12-21 <a href="https://movie.douban.com/subject/1293399/" target="_blank" rel="noopener">ã€Šè«æ‰ç‰¹ä¼ ã€‹</a></li><li>2017-12-30 <a href="https://movie.douban.com/subject/26799731/" target="_blank" rel="noopener">ã€Šè¯·ä»¥ä½ çš„åå­—å‘¼å”¤æˆ‘ã€‹</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
      </categories>
      
      
        <tags>
            
            <tag> movie </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>New Here</title>
      <link href="/blog/2017/10/29/new-here/"/>
      <url>/blog/2017/10/29/new-here/</url>
      
        <content type="html"><![CDATA[<h2 id="first-and-foremost"><a class="header-anchor" href="#first-and-foremost">#</a>First and Foremost</h2><p><a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> is a fast, simple and powerful blog framework. You write posts in Markdown (or other languages) and Hexo generates static files with a beautiful theme in seconds.</p><a id="more"></a><p>Being tired of my old WordPress blog framework so I want to try something new. Hexo is just the one I really need! Simple and beautiful.</p><p>New here with new change, so in this blog I will try my best to wirte some posts in English.</p><p>åšå®¢çš„ä¸»é¢˜ç®€å•, ä½†æ˜¯æˆ‘æ„å¤–çš„å‘ç°, åœ¨è¿™ä¸ªä¸»é¢˜ä¸‹çš„æ–‡ç« ç”¨ä¸­æ–‡æ„å¤–çš„æ¯”è‹±æ–‡å¥½çœ‹.</p>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
      </categories>
      
      
        <tags>
            
            <tag> life </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/blog/2017/10/28/hello-world/"/>
      <url>/blog/2017/10/28/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><a id="more"></a><h2 id="quick-start"><a class="header-anchor" href="#quick-start">#</a>Quick Start</h2><h3 id="create-a-new-post"><a class="header-anchor" href="#create-a-new-post">#</a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="run-server"><a class="header-anchor" href="#run-server">#</a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="generate-static-files"><a class="header-anchor" href="#generate-static-files">#</a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="deploy-to-remote-sites"><a class="header-anchor" href="#deploy-to-remote-sites">#</a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Arduino in command line</title>
      <link href="/blog/2017/05/01/arduino-in-command-line/"/>
      <url>/blog/2017/05/01/arduino-in-command-line/</url>
      
        <content type="html"><![CDATA[<h2 id="å‰è¨€"><a class="header-anchor" href="#å‰è¨€">#</a>å‰è¨€</h2><p>ç”±äºå¼€å‘ç¯å¢ƒæ˜¯æ ‘è“æ´¾è¿æ¥Arduinoçš„æ¿å­ç„¶åæ§åˆ¶å…¶å®ƒå…ƒä»¶,è€Œæ ‘è“æ´¾å’ŒArduinoéƒ½å·²ç»è¢«æ”¾ç½®åœ¨äº†å¯†å°è£…ç½®ä¸­,åªèƒ½é€šè¿‡wifiçš„æ–¹å¼è¿æ¥,æ‰€ä»¥é€šè¿‡Googleæ‰¾åˆ°äº†ä¸€ä¸ªæ•™ç¨‹æˆåŠŸå®ç°è¿œç¨‹Arduinoç¼–è¯‘ä¸Šä¼ .</p><a id="more"></a><h2 id="ç¯å¢ƒ"><a class="header-anchor" href="#ç¯å¢ƒ">#</a>ç¯å¢ƒ</h2><p>Raspberry Pi3,Ubuntu-Mate 16.04 LTS,ArduinoÂ Mega 2560.</p><h2 id="é…ç½®"><a class="header-anchor" href="#é…ç½®">#</a>é…ç½®</h2><p>æ‰¾åˆ°çš„å·¥å…·æ˜¯ <a href="http://inotool.org/" target="_blank" rel="noopener">Ino</a>. é¦–å…ˆæŒ‰ç…§æ–‡æ¡£è¦æ±‚, å®‰è£…ä¾èµ–æ–‡ä»¶:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é»˜è®¤Ubuntuä¸‹æœ‰Python 2.6+æ•…æ— éœ€é‡æ–°å®‰è£…</span></span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install arduino arduino-core <span class="comment"># å¤§æ¦‚inoä¹Ÿæ˜¯ä¸€ä¸ªæ§åˆ¶å·¥å…·,è¿˜æ˜¯è¦ä¾èµ–arduinoçš„ide</span></span><br><span class="line">sudo apt-get install picocom <span class="comment"># picocomæ˜¯ä¸€ä¸ªä¸²å£è°ƒè¯•å·¥å…·</span></span><br></pre></td></tr></table></figure><p>å®‰è£…åå³å¯å®‰è£…ino,å®˜æ–¹æ¨èäº†å¯ä»¥ç”¨è¿‡pipå’Œeasy_installå®‰è£…,ä¸è¿‡æˆ‘éƒ½å®‰è£…å¤±è´¥äº†,æ•…è¿™é‡Œé€‰æ‹©ä¸‹è½½æ–¹å¼:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨https://pypi.python.org/pypi/ino/#downloadsç½‘é¡µä¸­æ‰¾åˆ°æœ€æ–°çš„å‹ç¼©åŒ…ä¸‹è½½å³å¯.</span></span><br><span class="line">tar -xvf ino-0.3.6.tar.gz</span><br><span class="line"><span class="built_in">cd</span> ino-0.3.6/</span><br><span class="line">pip install -r requirements.txt <span class="comment"># ä¸çŸ¥é“ä¸ºä»€ä¹ˆæˆ‘ç”¨python setup.pyå°±æ˜¯ä¼šå‡ºé”™,åªèƒ½æ‰‹åŠ¨å®‰è£…pipä¾èµ–</span></span><br><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line">sudo mv ino-0.3.6/ /usr/<span class="built_in">local</span>/ino</span><br><span class="line">sudo ln -s /usr/<span class="built_in">local</span>/ino/bin/ino /usr/bin/ino</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨"><a class="header-anchor" href="#ä½¿ç”¨">#</a>ä½¿ç”¨</h2><p>å› ä¸ºarduinoé™åˆ¶æ–‡ä»¶å¿…é¡»åœ¨å·¥ç¨‹ä¸‹æ‰èƒ½ç¼–è¯‘,æ‰€ä»¥å…ˆåˆ›å»ºå·¥ç¨‹(å…¶å®å°±æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹å³å¯):</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir driver</span><br><span class="line"><span class="built_in">cd</span> driver</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨initå‘½ä»¤å¯ä»¥è‡ªåŠ¨å¸®ä½ ç”Ÿæˆä¸€ä¸ªå·¥ç¨‹:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ino init</span><br></pre></td></tr></table></figure><p>ç„¶åä¿®æ”¹srcæ–‡ä»¶ä¸‹çš„.inoæ–‡ä»¶å³å¯. ç¼–å†™å®Œæˆå,ä½¿ç”¨buildå‘½ä»¤ç¼–è¯‘:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ino build -m mega2560 <span class="comment"># -må‚æ•°æ˜¯æ¿å­ç±»å‹</span></span><br></pre></td></tr></table></figure><p>ç¼–è¯‘å®Œæˆå,ä½¿ç”¨uploadå‘½ä»¤ä¸Šä¼ :</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ino upload -m mega2560 -p /dev/ttyACM0 <span class="comment"># -pæ˜¯ä¸²å£å·</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥æ·»åŠ é…ç½®æ–‡ä»¶å°±ä¸ç”¨æ¯æ¬¡buildå’Œuploadçš„æ—¶å€™éƒ½å¸¦å‚æ•°:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">vi ino.ini</span><br><span class="line">[build]</span><br><span class="line">board-model = mega2560</span><br><span class="line"></span><br><span class="line">[upload]</span><br><span class="line">board-model = mega2560</span><br><span class="line">serial-port = /dev/ttyACM0</span><br><span class="line"></span><br><span class="line">[serial]</span><br><span class="line">serial-port = /dev/ttyACM0</span><br></pre></td></tr></table></figure><h2 id="å‚è€ƒæ–‡æ¡£"><a class="header-anchor" href="#å‚è€ƒæ–‡æ¡£">#</a>å‚è€ƒæ–‡æ¡£</h2><ul><li><a href="http://playground.arduino.cc//Linux/Ubuntu" target="_blank" rel="noopener">Install Arduino on Ubuntu Linux</a></li><li><a href="http://inotool.org/#installation" target="_blank" rel="noopener">Ino</a></li><li><a href="http://inotool.org/quickstart" target="_blank" rel="noopener">Ino-Quick start</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> code </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Arduino </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¦‚ä½•ç”¨Adobe Photoshopåˆ›é€ æœˆå…‰åœºæ™¯æ•ˆæœ</title>
      <link href="/blog/2015/12/13/how-to-create-a-moonlight-scene-photo-manipulation-with-adobe-photoshop/"/>
      <url>/blog/2015/12/13/how-to-create-a-moonlight-scene-photo-manipulation-with-adobe-photoshop/</url>
      
        <content type="html"><![CDATA[<p><img src="http://r.photo.store.qq.com/psb?/V10scHBd1P6AZ9/mTf0sRWTETF*eeeP7I5HvMkVA.n8FexdNX9YQ9NFVts!/r/dHQBAAAAAAAA" alt=""><br>æœ€ç»ˆæ•ˆæœå›¾<br>åœ¨è¿™ç¯‡æ•™ç¨‹ä¸­ï¼Œæˆ‘ä¼šå‘ä½ å±•ç¤ºå¦‚ä½•åˆ¶ä½œä¸€å¼ å¥³å­èµèŠ±çš„æœˆæ™¯å›¾ã€‚</p><a id="more"></a><p>é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆæ·»åŠ å¤©ç©ºå’Œé£æ™¯ï¼Œä¹‹åæ·»åŠ æœˆäº®ï¼Œå¹¶ä¸”é€šè¿‡è°ƒæ•´å›¾å±‚ã€è’™æ¿å’Œç¬”åˆ·æ¥æ”¹å˜å®ƒçš„æ•ˆæœã€‚è¿™ä¹‹åæˆ‘ä»¬å†æ·»åŠ å…¶å®ƒå…ƒç´ ï¼Œä¾‹å¦‚åœ°æ¿ã€é˜³å°ã€æ¨¡ç‰¹å’Œé²œèŠ±ï¼Œæˆ‘ä»¬ç”¨ç›¸åŒçš„æ‰‹æ³•æŠŠå®ƒä»¬ç»“åˆèµ·æ¥ã€‚æœ€åçš„ä½œå“å°†ç”±å‡ ä¸ªå›¾å±‚æ„æˆã€‚</p><p>é€šè¿‡è¿™ç¯‡æ•™ç¨‹ï¼Œä½ å¯ä»¥å­¦ä¹ åˆ°å¯¹å…‰çº¿çš„è°ƒæ•´ã€å¯¹æ™¯æ·±çš„åŠ å¼ºç­‰ç­‰ã€‚</p><p>ä½ æ˜¯ä¸€ä¸ªLightroomçš„ç²‰ä¸ä¹ˆï¼Ÿæˆ‘ä»¬æœ‰å¾ˆå¤šå¥½çš„<a href="http://graphicriver.net/category/add-ons/lightroom-presets" target="_blank" rel="noopener">Lightroomé¢„è®¾</a>æ”¶è—åœ¨GraphicRiverï¼Œè¿™äº›å°†å¸®ä½ åœ¨ä¿®æ”¹ç…§ç‰‡çš„æ•ˆåº”å’Œé£æ ¼ä¸ŠèŠ‚çœå¾ˆå¤šæ—¶é—´ã€‚</p><h3 id="æ•™ç¨‹æ‰€éœ€ç´ æ"><a class="header-anchor" href="#æ•™ç¨‹æ‰€éœ€ç´ æ">#</a>æ•™ç¨‹æ‰€éœ€ç´ æ</h3><p>ä¸‹é¢å°±æ˜¯æœ¬æ•™ç¨‹éœ€è¦ç”¨åˆ°çš„ç´ æï¼š</p><ul><li><a href="https://pixabay.com/en/gray-clouds-thunderstorm-718177/" target="_blank" rel="noopener">å¤©ç©º</a></li><li><a href="https://pixabay.com/en/mountains-lake-mist-fog-nature-691082/" target="_blank" rel="noopener">é£æ™¯</a></li><li><a href="https://pixabay.com/en/moon-nocturne-night-nature-232753/" target="_blank" rel="noopener">æœˆäº®</a></li><li><a href="http://www.textures.com/download/brickround0092/37917" target="_blank" rel="noopener">åœ°æ¿</a></li><li><a href="http://simbores.deviantart.com/art/Medieval-Garden-07-492641354" target="_blank" rel="noopener">é˜³å°</a></li><li><a href="http://mizzd-stock.deviantart.com/art/Fairytale-Princess-2-206778528" target="_blank" rel="noopener">æ¨¡ç‰¹</a></li><li><a href="https://pixabay.com/en/bloom-blossom-bougainvillea-flora-2387/" target="_blank" rel="noopener">èŠ±1</a></li><li><a href="https://pixabay.com/en/bougainvillea-flowers-pink-flowers-241690/" target="_blank" rel="noopener">èŠ±2</a></li><li><a href="https://pixabay.com/en/bougainvillea-sky-moon-374111/" target="_blank" rel="noopener">èŠ±3</a></li></ul><h3 id="1-æ·»åŠ å¤©ç©ºå’Œé£æ™¯"><a class="header-anchor" href="#1-æ·»åŠ å¤©ç©ºå’Œé£æ™¯">#</a>1.æ·»åŠ å¤©ç©ºå’Œé£æ™¯</h3><h4 id="æ­¥éª¤1"><a class="header-anchor" href="#æ­¥éª¤1">#</a>æ­¥éª¤1</h4><p>åœ¨Photoshopé¢„è®¾æ¡ä»¶ä¸‹åˆ›å»ºä¸€ä¸ª1500åƒç´ *1500åƒç´ çš„æ–°æ–‡ä»¶ï¼š</p><p><img src="http://r.photo.store.qq.com/psb?/V10scHBd1P6AZ9/cd8TyBtimYUUTH4ycZFUplic5kfm10zs0TMzRqJ*9l4!/r/dHUBAAAAAAAA" alt=""></p><h4 id="æ­¥éª¤2"><a class="header-anchor" href="#æ­¥éª¤2">#</a>æ­¥éª¤2</h4><p>æ‰“å¼€å¤©ç©ºçš„å›¾ç‰‡ã€‚å°†å®ƒç”¨ç§»åŠ¨å·¥å…·(V)æ‹–åŠ¨åˆ°ä¸»æ–‡ä»¶ä¸­ï¼Œå¹¶å°†å®ƒæ”¾ç½®åœ¨ç”»å¸ƒçš„ä¸ŠåŠéƒ¨åˆ†ã€‚</p><p><img src="http://r.photo.store.qq.com/psb?/V10scHBd1P6AZ9/O*i39A7Lzl.NZCnC5r6A28zvSkOgOFXZJ.lhNkZFcrI!/r/dHIBAAAAAAAA" alt=""></p><p>é€‰æ‹©æ»¤é•œ&gt;æ¨¡ç³Š&gt;é«˜æ–¯æ¨¡ç³Šï¼Œè®¾ç½®åŠå¾„ä¸º8åƒç´ ï¼š</p><p><img src="http://r.photo.store.qq.com/psb?/V10scHBd1P6AZ9/raNpbkQfXiAfVjPvbFfqpof4bEkoQm*WQbFTl*IVaGw!/r/dHMBAAAAAAAA" alt=""></p><h4 id="æ­¥éª¤3"><a class="header-anchor" href="#æ­¥éª¤3">#</a>æ­¥éª¤3</h4><p>ä½¿ç”¨å›¾åƒè°ƒæ•´è®©å¤©ç©ºå˜å¾—æ›´æš—ä¸€äº›ã€‚å›¾å±‚&gt;æ–°å»ºè°ƒæ•´å›¾å±‚&gt;æ›²çº¿ï¼š</p><p><img src="http://r.photo.store.qq.com/psb?/V10scHBd1P6AZ9/uTOJdaTPV0nzusZfKTHhEyBjR0ZP6kgWJzRJ7ToR5So!/r/dHIBAAAAAAAA" alt=""></p><p>åœ¨è¿™ä¸ªå›¾å±‚è’™æ¿ä¸Šï¼Œæ¿€æ´»ç¬”åˆ·å·¥å…·(B)ï¼Œç”¨ä¸€ä¸ªè½¯åœ†çš„ã€é»‘é¢œè‰²çš„(è½¯é»‘ç¬”åˆ·)æ¥å‡å°‘å·¦è¾¹çš„æ•ˆæœï¼Œä¸ºçš„æ˜¯æˆ‘ä»¬ä¹‹åä¼šåœ¨è¿™é‡Œæ·»åŠ çš„æœˆäº®ã€‚</p><p><img src="http://r.photo.store.qq.com/psb?/V10scHBd1P6AZ9/R6z4eLPc92UAgDC*DBq8u1m0MLpXN4grKa*XUcnk1lA!/r/dI8BAAAAAAAA" alt=""></p><h4 id="æ­¥éª¤4"><a class="header-anchor" href="#æ­¥éª¤4">#</a>æ­¥éª¤4</h4><p>ç”¨å¦ä¸€ä¸ªæ›²çº¿è°ƒæ•´å›¾å±‚æ¥ä½¿å¤©ç©ºåŠ äº®ï¼Œç‰¹åˆ«æ˜¯å·¦è¾¹éƒ¨åˆ†ã€‚</p><p><img src="http://r.photo.store.qq.com/psb?/V10scHBd1P6AZ9/BZ3hmdfcNTRVGVY4lf2gupPDRFGqvQQpJuEod.F1RFk!/r/dGsAAAAAAAAA" alt=""></p><p>ä½¿ç”¨è½¯é»‘ç¬”åˆ·éšè—å³åŠéƒ¨åˆ†çš„æ•ˆæœï¼Œè¿™ä¹ˆåšæ˜¯ä¸ºäº†è®©å®ƒæ›´æš—ä¸€äº›ã€‚</p><p><img src="http://r.photo.store.qq.com/psb?/V10scHBd1P6AZ9/vkVe8ekz*YjMVpEjOaqlrbEIZXV4KDpLgXTLb.RWG3s!/r/dHQBAAAAAAAA" alt=""></p><h4 id="æ­¥éª¤5"><a class="header-anchor" href="#æ­¥éª¤5">#</a>æ­¥éª¤5</h4><p>æ‰“å¼€é£æ™¯çš„å›¾ç‰‡ã€‚æŠŠå®ƒæ”¾ç½®åœ¨ç”»å¸ƒçš„ä¸‹åŠéƒ¨åˆ†ã€‚</p><p><img src="http://r.photo.store.qq.com/psb?/V10scHBd1P6AZ9/lBPBaiPx7C4u7mJ4dO0SID0uvMkarzzcq8ds4Tphsrc!/r/dHIBAAAAAAAA" alt=""></p><p>åœ¨è¿™ä¸ªå›¾å±‚ä¸Šæ·»åŠ ä¸€ä¸ªè’™æ¿ï¼Œç”¨è½¯é»‘ç¬”åˆ·å»æ‰å¯¹æ¯”å¼ºçƒˆçš„è¾¹ç¼˜ï¼Œè®©ä¸¤å¼ å›¾ç‰‡çš„å¤©ç©ºèåˆã€‚ä¿ç•™ä¸€äº›å±±é¡¶å‘¨å›´äº‘é›¾çš„è¾¹ç¼˜ã€‚åœ¨æ¶‚æŠ¹å·¦è¾¹çš„å±±çš„æ—¶å€™é™ä½ç¬”åˆ·çš„é€æ˜åº¦ï¼Œè®©å®ƒæ¶ˆå¤±åœ¨å¤©ç©ºä¸­ã€‚</p><p><img src="http://r.photo.store.qq.com/psb?/V10scHBd1P6AZ9/RCyav9QORhwoYe4YGI1KyDlPnMlLnH0F1b5P7ALG.TQ!/r/dI8BAAAAAAAA" alt="â€œ"></p><h4 id="æ­¥éª¤6"><a class="header-anchor" href="#æ­¥éª¤6">#</a>æ­¥éª¤6</h4><p>åœ¨æ¹–é¢ä¸Šæœ‰ä¸€äº›æˆ‘ä»¬ä¸æƒ³è¦çš„ç»†èŠ‚ã€‚æ–°å»ºä¸€ä¸ªå›¾å±‚ï¼ŒæŠŠå®ƒä½œä¸ºå‰ªåˆ‡è’™æ¿ã€‚é€‰æ‹©ä»¿åˆ¶å›¾ç« å·¥å…·(S)æ¥æ¸…é™¤è¿™äº›ç»†èŠ‚ã€‚</p><p><img src="http://r.photo.store.qq.com/psb?/V10scHBd1P6AZ9/*pkFvZePxW8VNl1*tq8WFJ8F.pCPbEKltd6ifyTQ1*8!/r/dHIBAAAAAAAA" alt="â€œâ€/"></p><p><img src="http://r.photo.store.qq.com/psb?/V10scHBd1P6AZ9/fLm4kbuNt2DnfxZWbgsqu6CsyPj5WHL.hkCbeOdkxlM!/r/dHUBAAAAAAAA" alt="â€œâ€/"></p><h4 id="æ­¥éª¤7"><a class="header-anchor" href="#æ­¥éª¤7">#</a>æ­¥éª¤7</h4><p>æ·»åŠ ä¸€ä¸ªæ›²çº¿è°ƒæ•´å›¾å±‚(ä½œä¸ºå‰ªåˆ‡è’™æ¿)æ¥è®©ç”»é¢æš—åŒ–ã€‚åœ¨å®ƒçš„å›¾å±‚è’™æ¿ä¸Šï¼Œç”¨è½¯é»‘ç¬”åˆ·æ¸…é™¤æœˆå…‰ç…§äº®çš„éƒ¨åˆ†çš„æš—åŒ–æ•ˆæœã€‚</p><p><img src="http://r.photo.store.qq.com/psb?/V10scHBd1P6AZ9/HEMFn10HahuPII9fOUosMwMUOiGkxy5Yk1ZOf.MBYh4!/r/dHIBAAAAAAAA" alt="â€œâ€/"></p><p><img src="http://r.photo.store.qq.com/psb?/V10scHBd1P6AZ9/xBKAbWNBAolO09QZ7k*W9m7hmg7A*kgdRLvvp4bkVzQ!/r/dHIBAAAAAAAA" alt="â€œâ€/"></p><h4 id="æ­¥éª¤8"><a class="header-anchor" href="#æ­¥éª¤8">#</a>æ­¥éª¤8</h4><p>ä½¿ç”¨è‰²ç›¸/é¥±å’Œåº¦è°ƒæ•´å›¾å±‚è®©é£æ™¯å’Œå¤©ç©ºçš„é¥±å’Œåº¦åŒ¹é…ï¼š</p><p><img src="http://r.photo.store.qq.com/psb?/V10scHBd1P6AZ9/EMHRi*T1lrgTs7ARk*phWVNgWVpy2XzYc9ef*xrVup0!/r/dI8BAAAAAAAA" alt="â€œ"></p><h3 id="2-æ·»åŠ æœˆäº®"><a class="header-anchor" href="#2-æ·»åŠ æœˆäº®">#</a>2.æ·»åŠ æœˆäº®</h3><h4 id="æ­¥éª¤1-2"><a class="header-anchor" href="#æ­¥éª¤1-2">#</a>æ­¥éª¤1</h4><p>ç”¨æ¤­åœ†é€‰åŒºå·¥å…·(M)å°†æœˆäº®ä»åŸå§‹å›¾ç‰‡ä¸­æŠ å‡ºï¼ŒæŠŠå®ƒæ”¾ç½®åˆ°ç”»å¸ƒçš„å·¦ä¸Šè§’ã€‚</p><p><img src="http://r.photo.store.qq.com/psb?/V10scHBd1P6AZ9/Jn.SihB9uqOgPn6LqrQVFJqckRZi81nwwbl5eeFgHTg!/r/dHQBAAAAAAAA" alt="â€œ"></p><h4 id="æ­¥éª¤2-2"><a class="header-anchor" href="#æ­¥éª¤2-2">#</a>æ­¥éª¤2</h4><p>å¯¹æœˆäº®å›¾å±‚åº”ç”¨8åƒç´ çš„é«˜æ–¯æ¨¡ç³Šï¼Œä½¿å¾—å®ƒå’Œå¤©ç©ºçš„æ·±åº¦å’ŒæŸ”è½¯åº¦ç›¸åŒ¹é…ï¼š</p><p><img src="http://r.photo.store.qq.com/psb?/V10scHBd1P6AZ9/HoXp*B40D3Jfqs3Rw00nDNfhnx85n5MpGQoZDet1XlE!/r/dIoBAAAAAAAA" alt="â€œâ€/"></p><h4 id="æ­¥éª¤3-2"><a class="header-anchor" href="#æ­¥éª¤3-2">#</a>æ­¥éª¤3</h4><p>åŒå‡»æœˆäº®å›¾å±‚ï¼Œé€‰æ‹©å†…å‘å…‰æ•ˆæœï¼Œè®¾ç½®çš„å‘å…‰é¢œè‰²ä¸º#edededï¼š</p><p><img src="http://r.photo.store.qq.com/psb?/V10scHBd1P6AZ9/81POBVcgpZy60yCeovpd3cY*F0jPjNzC2Fr9D7jsUwk!/r/dHQBAAAAAAAA" alt="â€œâ€/"></p><p><img src="http://r.photo.store.qq.com/psb?/V10scHBd1P6AZ9/aR0HIA7BiD2HpXFNuM8gD0J96Wtd4pMH1EdKi7wnGmY!/r/dHIBAAAAAAAA" alt="â€œ"></p><h4 id="æ­¥éª¤4-2"><a class="header-anchor" href="#æ­¥éª¤4-2">#</a>æ­¥éª¤4</h4><p>ç”¨å’Œæˆ‘ä¹‹å‰çš„<a href="http://design.tutsplus.com/tutorials/create-a-relaxing-vibrant-fantasy-lake-scene-with-adobe-photoshop--cms-24409" target="_blank" rel="noopener">æ¢¦å¹»æ¹–æ³Šæ™¯è±¡æ•™ç¨‹</a>ä¸€æ ·çš„æ–¹æ³•æ¥åšæœˆå…‰å…³äºæ¹–é¢çš„åå°„ã€‚ä½ åº”è¯¥å¾—åˆ°ç±»ä¼¼å‘ä¸‹å›¾ä¸€æ ·çš„æ•ˆæœï¼š</p><p><img src="http://r.photo.store.qq.com/psb?/V10scHBd1P6AZ9/JQnLzUr4yNUZY.bkux0yyQJbzS0W6K57HKcHvYZm.2k!/r/dHQBAAAAAAAA" alt="â€œâ€/"></p><h4 id="æ­¥éª¤5-2"><a class="header-anchor" href="#æ­¥éª¤5-2">#</a>æ­¥éª¤5</h4><p>æ–°å»ºä¸€ä¸ªå›¾å±‚ï¼Œç”¨æŸ”è½¯çš„ã€é¢œè‰²å€¼ä¸º#edededçš„ç¬”åˆ·æ¥æ¶‚æŠ¹æ¹–é¢çš„åŒºåŸŸï¼Œè¾¾åˆ°åå°„æœˆå…‰çš„æ•ˆæœã€‚æ›´æ”¹å›¾å±‚æ ·å¼å˜ä¸ºæŸ”å…‰100%ã€‚</p><p><img src="http://r.photo.store.qq.com/psb?/V10scHBd1P6AZ9/qJcrjAfAdo273Fr9vKtQoD5dJ45OS1r*R*mSZt2nifo!/r/dHYBAAAAAAAA" alt="â€œâ€/"></p><p><a href="http://design.tutsplus.com/tutorials/how-to-create-a-moonlight-scene-photo-manipulation-with-adobe-photoshop--cms-25064" target="_blank" rel="noopener">åŸæ–‡é“¾æ¥</a></p>]]></content>
      
      
      <categories>
          
          <category> Photoshop </category>
          
      </categories>
      
      
        <tags>
            
            <tag> photoshop </tag>
            
            <tag> design </tag>
            
        </tags>
      
    </entry>
    
    
  
  
    
    
    <entry>
      <title>about</title>
      <link href="/blog/about/index.html"/>
      <url>/blog/about/index.html</url>
      
        <content type="html"><![CDATA[<p>ä¸€äº›å…³äºæˆ‘çš„ï¼Œæœ‰çš„æ²¡çš„ï¼Œçš„ä¸œè¥¿ã€‚</p><ul><li>ä¸€ä¸ªåœ¨çº¿è§†é¢‘åŒæ­¥æ’­æ”¾æ’ä»¶ï¼š<a href="https://onns.xyz/sync-sofa/">https://onns.xyz/sync-sofa/</a></li><li>ä¸€ä¸ªå› ä¸º leetcode åˆ·é¢˜ä¸æƒ³æ¯æ¬¡æ”¹åçš„ä¸­åˆ’çº¿è½¬é©¼å³°ï¼š<a href="https://onns.xyz/tools/hyphens-to-camel-case/">https://onns.xyz/tools/hyphens-to-camel-case/</a></li><li>ä¸€ä¸ªä¸æƒ³åˆ°å¤„ä¹±ç™»å½•çš„æ–‡å­—åŒæ­¥å·¥å…·ï¼š<a href="https://onns.xyz/doc/?anything">https://onns.xyz/doc/?anything</a></li><li>ä¸€ä¸ªPPTçš„é¥æ§å™¨ï¼š<a href="https://github.com/onns/ppt-remoter" target="_blank" rel="noopener">https://github.com/onns/ppt-remoter</a></li><li>ä¸€ä¸ªè§†é¢‘æ•°æ®æ ‡æ³¨å·¥å…·ï¼š<a href="https://github.com/onns/video-annotation" target="_blank" rel="noopener">https://github.com/onns/video-annotation</a></li></ul><p>ä¸€ä¸ªç®€ç®€å•å•çš„ç®€å†ï¼Œ<code>Adobe Indesign</code> åšçš„ã€‚</p><div class="row">    <embed src="//onns.xyz/blog/files/resume-20200706.pdf" width="100%" height="550" type="application/pdf"></div><p>ä¸€äº›å­¦ç”»ç”»è·¯ä¸Šçš„ä¸œè¥¿ï¼š<a href="https://onns.xyz/blog/draw/">ä¹±æ¶‚ä¹±ç”»</a></p><p>ä¸€äº›å‹é“¾ï¼Œå¦‚æœæ²¡æœ‰ï¼Œä¸æ˜¯æˆ‘æ²¡æœ‰æœ‹å‹ï¼Œæ˜¯ä»–ä»¬è€æ¢é“¾æ¥ï¼Œå”‰ â•®(â•¯â–½â•°)â•­ï¼š<a href="https://onns.xyz/blog/links/">å‹é“¾</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>categories</title>
      <link href="/blog/categories/index.html"/>
      <url>/blog/categories/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>2019å¹´æ€»ç»“</title>
      <link href="/blog/drafts/2019-summary.html"/>
      <url>/blog/drafts/2019-summary.html</url>
      
        <content type="html"><![CDATA[<p>è’å”äº‹ä¸‰å››</p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>ifc file parsing</title>
      <link href="/blog/drafts/ifc-file-parsing.html"/>
      <url>/blog/drafts/ifc-file-parsing.html</url>
      
        <content type="html"><![CDATA[<p>ISO-10303-21;<br>HEADER;<br>FILE_DESCRIPTION ((â€™â€™), â€˜2;1â€™);<br>FILE_NAME (â€™â€™, â€˜2018-10-16T13:20:31â€™, (â€™â€™), (â€™â€™), â€˜Xbim File Processor version 4.0.0.0â€™, â€˜Xbim version 4.0.0.0â€™, â€˜â€™);<br>FILE_SCHEMA ((â€˜IFC4â€™));<br>ENDSEC;<br>DATA;<br>#1=IFCPROJECT(â€˜2GZ2lqVtL4RhhgjFpmQj7sâ€™,#2,â€˜HelloWallâ€™,$,$,$,$,(#20,#23),#8);<br>#2=IFCOWNERHISTORY(#5,#6,$,.ADDED.,$,$,$,0);<br>#3=IFCPERSON($,â€˜Teamâ€™,â€˜xBIMâ€™,$,$,$,$,$);<br>#4=IFCORGANIZATION($,â€˜xBimTeamâ€™,$,$,$);<br>#5=IFCPERSONANDORGANIZATION(#3,#4,$);<br>#7=IFCORGANIZATION($,â€˜xBimTeamâ€™,$,$,$);<br>#6=IFCAPPLICATION(#7,â€˜1.0â€™,â€˜Hello Wall Applicationâ€™,â€˜HelloWall.exeâ€™);<br>#8=IFCUNITASSIGNMENT((#9,#10,#11,#12,#13,#14,#15,#16,#17));<br>#9=IFCSIUNIT(<em>,.LENGTHUNIT.,.MILLI.,.METRE.);<br>#10=IFCSIUNIT(</em>,.AREAUNIT.,$,.SQUARE_METRE.);<br>#11=IFCSIUNIT(<em>,.VOLUMEUNIT.,$,.CUBIC_METRE.);<br>#12=IFCSIUNIT(</em>,.SOLIDANGLEUNIT.,$,.STERADIAN.);<br>#13=IFCSIUNIT(<em>,.PLANEANGLEUNIT.,$,.RADIAN.);<br>#14=IFCSIUNIT(</em>,.MASSUNIT.,$,.GRAM.);<br>#15=IFCSIUNIT(<em>,.TIMEUNIT.,$,.SECOND.);<br>#16=IFCSIUNIT(</em>,.THERMODYNAMICTEMPERATUREUNIT.,$,.DEGREE_CELSIUS.);<br>#17=IFCSIUNIT(<em>,.LUMINOUSINTENSITYUNIT.,$,.LUMEN.);<br>#18=IFCCARTESIANPOINT((0.,0.,0.));<br>#19=IFCAXIS2PLACEMENT3D(#18,$,$);<br>#20=IFCGEOMETRICREPRESENTATIONCONTEXT(â€˜Building Modelâ€™,â€˜Modelâ€™,3,1.E-05,#19,$);<br>#21=IFCCARTESIANPOINT((0.,0.));<br>#22=IFCAXIS2PLACEMENT2D(#21,$);<br>#23=IFCGEOMETRICREPRESENTATIONCONTEXT(â€˜Building Plan Viewâ€™,â€˜Planâ€™,2,1.E-05,#22,$);<br>#24=IFCBUILDING(â€˜0ClVgjZh5FhBAip2_5_wLeâ€™,#2,â€˜Default Buildingâ€™,$,$,#25,$,$,.ELEMENT.,$,$,$);<br>#25=IFCLOCALPLACEMENT($,#26);<br>#26=IFCAXIS2PLACEMENT3D(#27,$,$);<br>#27=IFCCARTESIANPOINT((0.,0.,0.));<br>#28=IFCRELAGGREGATES(â€˜30n8zf84X9W8Dm9so0gVfbâ€™,#2,$,$,#1,(#24));<br>#29=IFCWALLSTANDARDCASE(â€˜0m0peqs9P7veKstlE2d0ilâ€™,#2,â€˜A Standard rectangular wallâ€™,$,$,#39,#38,$,$);<br>#30=IFCRECTANGLEPROFILEDEF(.AREA.,$,#32,300.,4000.);<br>#31=IFCCARTESIANPOINT((0.,400.));<br>#32=IFCAXIS2PLACEMENT2D(#31,$);<br>#33=IFCEXTRUDEDAREASOLID(#30,#36,#34,2400.);<br>#34=IFCDIRECTION((0.,0.,1.));<br>#35=IFCCARTESIANPOINT((0.,0.,0.));<br>#36=IFCAXIS2PLACEMENT3D(#35,$,$);<br>#37=IFCSHAPEREPRESENTATION(#20,â€˜Bodyâ€™,â€˜SweptSolidâ€™,(#33));<br>#38=IFCPRODUCTDEFINITIONSHAPE($,$,(#37,#52));<br>#39=IFCLOCALPLACEMENT($,#40);<br>#40=IFCAXIS2PLACEMENT3D(#35,#42,#41);<br>#41=IFCDIRECTION((0.,1.,0.));<br>#42=IFCDIRECTION((0.,0.,1.));<br>#43=IFCMATERIALLAYERSETUSAGE(#44,.AXIS2.,.NEGATIVE.,150.,$);<br>#44=IFCMATERIALLAYERSET((#45),$,$);<br>#45=IFCMATERIALLAYER($,10.,$,$,$,$,$);<br>#46=IFCMATERIAL(â€˜some materialâ€™,$,$);<br>#47=IFCRELASSOCIATESMATERIAL(â€˜1tSNZgCKP6TOgKn7Pgi4Niâ€™,#2,$,$,(#29),#43);<br>#48=IFCPRESENTATIONLAYERASSIGNMENT(â€˜some ifcPresentationLayerAssignmentâ€™,$,(#37),$);<br>#49=IFCPOLYLINE((#50,#51));<br>#50=IFCCARTESIANPOINT((0.,0.));<br>#51=IFCCARTESIANPOINT((4000.,0.));<br>#52=IFCSHAPEREPRESENTATION(#20,â€˜Axisâ€™,â€˜Curve2Dâ€™,(#49));<br>#54=IFCSIUNIT(</em>,.LENGTHUNIT.,.MILLI.,.METRE.);<br>#53=IFCQUANTITYLENGTH(â€˜IfcQuantityArea:Areaâ€™,â€™â€™,#54,100.,$);<br>#56=IFCDIMENSIONALEXPONENTS(1,0,0,0,0,0,0);<br>#55=IFCCONTEXTDEPENDENTUNIT(#56,.LENGTHUNIT.,â€˜Elephantsâ€™);<br>#57=IFCQUANTITYCOUNT(â€˜IfcQuantityCount:Elephantâ€™,$,#55,12.,$);<br>#60=IFCSIUNIT(<em>,.LENGTHUNIT.,.MILLI.,.METRE.);<br>#59=IFCMEASUREWITHUNIT(IFCRATIOMEASURE(25.4),#60);<br>#61=IFCDIMENSIONALEXPONENTS(1,0,0,0,0,0,0);<br>#58=IFCCONVERSIONBASEDUNIT(#61,.LENGTHUNIT.,â€˜Inchâ€™,#59);<br>#62=IFCQUANTITYLENGTH(â€˜IfcQuantityLength:Lengthâ€™,â€™â€™,#58,24.,$);<br>#63=IFCELEMENTQUANTITY(â€˜2eT$$_utH4BR61Fw6jnbaTâ€™,#2,â€˜Test:IfcElementQuantityâ€™,â€˜Measurement quantityâ€™,$,(#53,#57,#62));<br>#64=IFCRELDEFINESBYPROPERTIES(â€˜10Kc9Br0D13961GThfQc7sâ€™,#2,â€˜Area Associationâ€™,â€˜IfcElementQuantity associated to wallâ€™,(#29),#63);<br>#66=IFCSIUNIT(</em>,.TIMEUNIT.,$,.SECOND.);<br>#65=IFCPROPERTYSINGLEVALUE(â€˜IfcPropertySingleValue:Timeâ€™,â€™â€™,IFCTIMEMEASURE(150.),#66);<br>#68=IFCPROPERTYENUMERATION(â€˜Notesâ€™,(IFCLABEL(â€˜Doâ€™),IFCLABEL(â€˜Reâ€™),IFCLABEL(â€˜Miâ€™),IFCLABEL(â€˜Faâ€™),IFCLABEL(â€˜Soâ€™),IFCLABEL(â€˜Laâ€™),IFCLABEL(â€˜Tiâ€™)),$);<br>#67=IFCPROPERTYENUMERATEDVALUE(â€˜IfcPropertyEnumeratedValue:Musicâ€™,$,(IFCLABEL(â€˜Doâ€™),IFCLABEL(â€˜Reâ€™),IFCLABEL(â€˜Miâ€™)),#68);<br>#70=IFCSIUNIT(*,.MASSUNIT.,.KILO.,.GRAM.);<br>#69=IFCPROPERTYBOUNDEDVALUE(â€˜IfcPropertyBoundedValue:Massâ€™,â€™â€™,IFCMASSMEASURE(5000.),IFCMASSMEASURE(1000.),#70,$);<br>#73=IFCDIMENSIONALEXPONENTS(0,0,0,0,0,0,0);<br>#72=IFCCONTEXTDEPENDENTUNIT(#73,.FREQUENCYUNIT.,â€˜dBâ€™);<br>#71=IFCPROPERTYTABLEVALUE(â€˜IfcPropertyTableValue:Soundâ€™,$,(IFCREAL(100.),IFCREAL(200.),IFCREAL(400.),IFCREAL(800.),IFCREAL(1600.),IFCREAL(3200.)),(IFCREAL(20.),IFCREAL(42.),IFCREAL(46.),IFCREAL(56.),IFCREAL(60.),IFCREAL(65.)),$,$,#72,$);<br>#74=IFCPROPERTYLISTVALUE(â€˜IfcPropertyListValue:Coloursâ€™,$,(IFCLABEL(â€˜Redâ€™),IFCLABEL(â€˜Greenâ€™),IFCLABEL(â€˜Blueâ€™),IFCLABEL(â€˜Pinkâ€™),IFCLABEL(â€˜Whiteâ€™),IFCLABEL(â€˜Blackâ€™)),$);<br>#75=IFCMATERIAL(â€˜Brickâ€™,$,$);<br>#76=IFCPROPERTYREFERENCEVALUE(â€˜IfcPropertyReferenceValue:Materialâ€™,$,$,#75);<br>#78=IFCMATERIAL(â€˜Cavityâ€™,$,$);<br>#79=IFCMATERIAL(â€˜Blockâ€™,$,$);<br>#77=IFCMATERIALLIST((#75,#78,#79));<br>#80=IFCMATERIALLAYER(#75,100.,$,$,$,$,$);<br>#81=IFCPROPERTYREFERENCEVALUE(â€˜IfcPropertyReferenceValue:MaterialLayerâ€™,$,$,#80);<br>#82=IFCDOCUMENTREFERENCE(â€˜c://Documents//TheDoc.Txtâ€™,$,â€˜Documentâ€™,$,$);<br>#83=IFCPROPERTYREFERENCEVALUE(â€˜IfcPropertyReferenceValue:Documentâ€™,$,$,#82);<br>#84=IFCREGULARTIMESERIES(â€˜Regular Time Seriesâ€™,â€˜Time series of eventsâ€™,â€˜2015-02-14T12:01:01â€™,â€˜2015-05-15T12:01:01â€™,.CONTINUOUS.,.MEASURED.,$,$,604800.,());<br>#85=IFCPROPERTYREFERENCEVALUE(â€˜IfcPropertyReferenceValue:TimeSeriesâ€™,$,$,#84);<br>#86=IFCPOSTALADDRESS($,$,$,â€˜Room 101â€™,(â€˜12 New roadâ€™,â€˜DoxFieldâ€™),$,â€˜Sunderlandâ€™,$,â€˜DL01 6SXâ€™,$);<br>#87=IFCPROPERTYREFERENCEVALUE(â€˜IfcPropertyReferenceValue:Addressâ€™,$,$,#86);<br>#88=IFCTELECOMADDRESS($,$,$,(â€˜01325 6589965â€™),$,$,(â€˜bob@bobsworks.comâ€™),$,$);<br>#89=IFCPROPERTYREFERENCEVALUE(â€˜IfcPropertyReferenceValue:Telecomâ€™,$,$,#88);<br>#90=IFCPROPERTYSET(â€˜1qDdK625XDLvD1ADI2cU4Qâ€™,#2,â€˜Test:IfcPropertySetâ€™,â€˜Property Setâ€™,(#65,#67,#69,#71,#74,#76,#81,#83,#85,#87,#89));<br>#91=IFCRELDEFINESBYPROPERTIES(â€˜2oFbfaFWT6SAQkNtJ7W$sBâ€™,#2,â€˜Property Associationâ€™,â€˜IfcPropertySet associated to wallâ€™,(#29),#90);<br>#92=IFCRELCONTAINEDINSPATIALSTRUCTURE(â€˜2BRDC5_vD1XfhW_$wVxuAtâ€™,#2,$,$,(#29),#24);<br>ENDSEC;<br>END-ISO-10303-21;</p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Xlibraryæ¥å£æ–‡æ¡£</title>
      <link href="/blog/drafts/xlibrary-api-document.html"/>
      <url>/blog/drafts/xlibrary-api-document.html</url>
      
        <content type="html"><![CDATA[<!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=6 orderedList=false} --><!-- code_chunk_output --><ul><li><a href="#%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3">æ¥å£æ–‡æ¡£</a><ul><li><a href="#%E7%94%9F%E6%88%90%E8%BD%AC%E5%80%9F%E7%A0%81">ç”Ÿæˆè½¬å€Ÿç </a></li><li><a href="#%E8%BD%AC%E5%80%9F%E5%9B%BE%E4%B9%A6">è½¬å€Ÿå›¾ä¹¦</a></li></ul></li></ul><!-- /code_chunk_output --><a id="more"></a><h1 id="æ¥å£æ–‡æ¡£"><a class="header-anchor" href="#æ¥å£æ–‡æ¡£">#</a>æ¥å£æ–‡æ¡£</h1><ul><li>æ®µè½æ ‡é¢˜<ul><li>æ®µè½æ ‡é¢˜<ul><li>æ®µè½æ ‡é¢˜<ul><li>æ®µè½æ ‡é¢˜</li></ul></li><li>æ®µè½æ ‡é¢˜</li></ul></li><li>æ®µè½æ ‡é¢˜</li></ul></li><li>æ®µè½æ ‡é¢˜</li></ul><h2 id="ç”Ÿæˆè½¬å€Ÿç "><a class="header-anchor" href="#ç”Ÿæˆè½¬å€Ÿç ">#</a>ç”Ÿæˆè½¬å€Ÿç </h2><ul><li>ä½œè€…ï¼š@Onns</li><li>ä¸Šæ¬¡ä¿®æ”¹ï¼š2019-08-14</li></ul><p>æ‹¥æœ‰ä¹¦çš„ç”¨æˆ·å¯ä»¥ç”Ÿæˆè½¬å€Ÿç ï¼Œå°†ä¹¦å€Ÿç»™ä»–äººã€‚</p><ul><li><strong>ç½‘å€ï¼š</strong><br>/api/book/generate-code</li><li><strong>æ–¹æ³•ï¼š</strong><br><code>GET</code> | <code>POST</code></li></ul><ul><li><strong>å‚æ•°ï¼š</strong><ul><li>å¿…éœ€ï¼š<br><code>isbn=[isbn]</code></li></ul></li></ul><ul><li><strong>æˆåŠŸï¼š</strong><ul><li>è¿”å›ç ï¼š<img src="https://placehold.it/15/00ff00/000000?text=+" alt=""> <strong>10101</strong> <br /><br>è¿”å›å€¼ï¼š<br /><br><code>{&quot;error&quot;:0,&quot;message&quot;:&quot;10101: ç”Ÿæˆè½¬å€Ÿç æˆåŠŸ&quot;,&quot;data&quot;:&quot;LDMvsjLWikpPjXX+ytc3wISPZr66c9oE1XN1NgzBjO0=&quot;}</code></li></ul></li><li><strong>å¤±è´¥ï¼š</strong><ul><li>è¿”å›ç ï¼š<img src="https://placehold.it/15/ff0000/000000?text=+" alt=""> <strong>10000</strong> <br /><br>è¿”å›å€¼ï¼š<br /><br><code>{error: 1, message: &quot;10000: æœªç™»å½•ï¼Œç¦æ­¢æ“ä½œ&quot;}</code></li><li>è¿”å›ç ï¼š<img src="https://placehold.it/15/ff0000/000000?text=+" alt=""> <strong>10102</strong> <br /><br>è¿”å›å€¼ï¼š<br /><br><code>{error: 1, message: &quot;10102: isbnå·æœ‰è¯¯&quot;}</code></li><li>è¿”å›ç ï¼š<img src="https://placehold.it/15/ff0000/000000?text=+" alt=""> <strong>10103</strong> <br /><br>è¿”å›å€¼ï¼š<br /><br><code>{error: 1, message: &quot;10103: æœªæ‰¾åˆ°ç›¸å…³è®°å½•&quot;}</code></li></ul></li></ul><h2 id="è½¬å€Ÿå›¾ä¹¦"><a class="header-anchor" href="#è½¬å€Ÿå›¾ä¹¦">#</a>è½¬å€Ÿå›¾ä¹¦</h2><ul><li>ä½œè€…ï¼š@Onns</li><li>ä¸Šæ¬¡ä¿®æ”¹ï¼š2019-08-14</li></ul><p>é€šè¿‡æ‰«ç ä»–äººçš„è½¬å€Ÿç ï¼Œè·å¾—è½¬å€Ÿçš„å›¾ä¹¦ã€‚</p><ul><li><p><strong>ç½‘å€ï¼š</strong></p><p>/api/book/subtenancy</p></li><li><p><strong>æ–¹æ³•ï¼š</strong></p><p><code>GET</code> | <code>POST</code></p></li><li><p><strong>å‚æ•°ï¼š</strong></p><ul><li><p>å¿…éœ€ï¼š</p><p><code>code=[code]</code></p></li></ul></li><li><p><strong>æˆåŠŸï¼š</strong></p><ul><li>è¿”å›ç ï¼š<img src="https://placehold.it/15/00ff00/000000?text=+" alt=""> <strong>10201</strong> <br /><br>è¿”å›å€¼ï¼š<br /><br><code>{&quot;error&quot;:0,&quot;message&quot;:&quot;10201: è½¬å€ŸæˆåŠŸ&quot;}</code></li></ul></li><li><p><strong>å¤±è´¥ï¼š</strong></p><ul><li><p>è¿”å›ç ï¼š<img src="https://placehold.it/15/ff0000/000000?text=+" alt=""> <strong>10000</strong> <br /><br>è¿”å›å€¼ï¼š<br /><br><code>{error: 1, message: &quot;10000: æœªç™»å½•ï¼Œç¦æ­¢æ“ä½œ&quot;}</code></p></li><li><p>è¿”å›ç ï¼š<img src="https://placehold.it/15/ff0000/000000?text=+" alt=""> <strong>10202</strong> <br /><br>è¿”å›å€¼ï¼š<br /><br><code>{error: 1, message: &quot;10202: ä¸èƒ½è½¬å€Ÿç»™è‡ªå·±&quot;}</code></p></li><li><p>è¿”å›ç ï¼š<img src="https://placehold.it/15/ff0000/000000?text=+" alt=""> <strong>10103</strong> <br /><br>è¿”å›å€¼ï¼š<br /><br><code>{error: 1, message: &quot;10103: æœªæ‰¾åˆ°ç›¸å…³è®°å½•&quot;}</code></p></li><li><p>è¿”å›ç ï¼š<img src="https://placehold.it/15/ff0000/000000?text=+" alt=""> <strong>10204</strong> <br /><br>è¿”å›å€¼ï¼š<br /><br><code>{&quot;error&quot;:1,&quot;message&quot;:&quot;10204: è½¬å€Ÿç æœ‰è¯¯&quot;}</code></p></li><li><p>è¿”å›ç ï¼š<img src="https://placehold.it/15/ff0000/000000?text=+" alt=""> <strong>10205</strong> <br /><br>è¿”å›å€¼ï¼š<br /><br><code>{error: 1, message: &quot;10205: è½¬å€Ÿç æœ‰è¯¯&quot;}</code></p></li></ul></li></ul>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>ç”»å•Šç”»æ¶‚å•Šæ¶‚</title>
      <link href="/blog/draw/index.html"/>
      <url>/blog/draw/index.html</url>
      
        <content type="html"><![CDATA[<h3 id="2020-02"><a class="header-anchor" href="#2020-02">#</a>2020.02</h3><p><img src="//onns.xyz/blog/image/draw-20200207.jpg" alt="20200207"></p><h3 id="2019-12"><a class="header-anchor" href="#2019-12">#</a>2019.12</h3><p><img src="//onns.xyz/blog/image/draw-20191215.jpg" alt="20191215"></p><h3 id="2019-10"><a class="header-anchor" href="#2019-10">#</a>2019.10</h3><p><img src="//onns.xyz/blog/image/draw-20191031.jpg" alt="20191031"></p><h3 id="2019-07"><a class="header-anchor" href="#2019-07">#</a>2019.07</h3><p><img src="//onns.xyz/blog/image/draw-20190731.jpg" alt="20190731"></p><p><img src="//onns.xyz/blog/image/draw-20190728.jpg" alt="20190728"></p><h3 id="2019-06"><a class="header-anchor" href="#2019-06">#</a>2019.06</h3><p><img src="//onns.xyz/blog/image/draw-20190608.jpg" alt="20190608"></p><p><img src="//onns.xyz/blog/image/draw-20190606.jpg" alt="20190606"></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>home</title>
      <link href="/blog/home/index.html"/>
      <url>/blog/home/index.html</url>
      
        <content type="html"><![CDATA[<script language="javascript" type="text/javascript">window.location.href="//onns.xyz/";</script>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>image</title>
      <link href="/blog/image/index.html"/>
      <url>/blog/image/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>links</title>
      <link href="/blog/links/index.html"/>
      <url>/blog/links/index.html</url>
      
        <content type="html"><![CDATA[<ul><li><a href="https://www.mycgx.com/" target="_blank" rel="noopener">å°é±¼ blog</a></li><li><a href="http://xiangyi.pro/" target="_blank" rel="noopener">Xiangyiâ€™s Blog</a></li><li><a href="https://her-cat.com/" target="_blank" rel="noopener">å¥¹å’Œå¥¹çš„çŒ«</a></li></ul>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>tags</title>
      <link href="/blog/tags/index.html"/>
      <url>/blog/tags/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
  
</search>
